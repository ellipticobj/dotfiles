/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={7453:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BE_PROFILE:()=>s,NRT_PROFILE:()=>o,PostChannel:()=>Dt,RT_PROFILE:()=>i});var n,i="REAL_TIME",o="NEAR_REAL_TIME",s="BEST_EFFORT",a=r(2012),c=r(14635),u=r(52631),l=r(13107),d="",p="timings",f="value",h="kind",g="length",m="processTelemetryStart",v=l.V4.hasOwnProperty,y=((n={})[0]=0,n[2]=6,n[1]=1,n[3]=7,n[4098]=6,n[4097]=1,n[4099]=7,n);function _(e){return!(e===d||(0,u.lep)(e))}function S(e,t,r){var n=-1;if(!(0,u.o8e)(e))if(t>0&&(32===t?n=8192:t<=13&&(n=t<<5)),function(e){return e>=0&&e<=9}(r))-1===n&&(n=0),n|=r;else{var i=y[P(e)]||-1;-1!==n&&-1!==i?n|=i:6===i&&(n=i)}return n}function w(e,t,r,n,i){var o={},s=!1,a=0,c=arguments[g],l=arguments;for((0,u.jnD)(l[0])&&(s=l[0],a++);a<c;a++)e=l[a],(0,u.rWU)(e,(function(e,t){s&&t&&(0,u.Kn2)(t)?(0,u.kJL)(t)?(o[e]=o[e]||[],(0,u.tOU)(t,(function(t,r){t&&(0,u.Kn2)(t)?o[e][r]=w(!0,o[e][r],t):o[e][r]=t}))):o[e]=w(!0,o[e],t):o[e]=t}));return o}(0,u.Nvg)(),(0,u.Ymo)();var E=u.Jjf;function b(e,t){var r=e;r[p]=r[p]||{},r[p][m]=r[p][m]||{},r[p][m][t]=E()}function P(e){var t=0;if(null!=e){var r=typeof e;"string"===r?t=1:"number"===r?t=2:"boolean"===r?t=3:r===l.fK&&(t=4,(0,u.kJL)(e)?(t=4096,e[g]>0&&(t|=P(e[0]))):v.call(e,"value")&&(t=8192|P(e[f])))}return t}function T(e){return e>0}var C=r(27019),I=r(33668),O=r(73831),x=r(21328),N=r(38570),k=r(98769),A=r(13657),R=r(38942),D=r(18264),j=r(90862),M="",L="drop",F="requeue",U="no-cache, no-store",B="application/x-json-stream",V="cache-control",$="content-type",q="client-version",H="client-id",z="time-delta-to-apply-millis",W="upload-time",G="apikey",K="AuthMsaDeviceTicket",X="WebAuthToken",J="AuthXToken",Q="msfpc",Y="trace",Z="user",ee="allowRequestSending",te="firstRequestSent",re="shouldAddClockSkewHeaders",ne="getClockSkewHeaderValue",ie="setClockSkew",oe="length",se="concat",ae="iKey",ce="count",ue="events",le="push",de="split",pe="splice",fe="toLowerCase",he="hdrs",ge="useHdrs",me="initialize",ve="setTimeoutOverride",ye="clearTimeoutOverride",_e="overrideEndpointUrl",Se="avoidOptions",we="enableCompoundKey",Ee="disableXhrSync",be="disableFetchKeepAlive",Pe="useSendBeacon",Te="alwaysUseXhrOverride",Ce="serializeOfflineEvt",Ie="getOfflineRequestDetails",Oe="createPayload",xe="createOneDSPayload",Ne="payloadBlob",ke="headers",Ae="_thePayload",Re="urlString",De="batches",je="sendType",Me="addHeader",Le="canSendRequest",Fe="sendQueuedRequests",Ue="isCompletelyIdle",Be="setUnloading",Ve="sendSynchronousBatch",$e="_transport",qe="getWParam",He="isBeacon",ze="timings",We="isTeardown",Ge="isSync",Ke="data",Xe="_sendReason",Je="setKillSwitchTenants",Qe="_backOffTransmission",Ye="identifier",Ze="eventsLimitInMem",et="autoFlushEventsLimit",tt="baseData",rt="sendAttempt",nt="latency",it="sync";function ot(e){var t=(e.ext||{}).intweb;return t&&_(t[Q])?t[Q]:null}function st(e){for(var t=null,r=0;null===t&&r<e[oe];r++)t=ot(e[r]);return t}var at=function(){function e(t,r){var n=r?[][se](r):[],i=this,o=st(n);i[ae]=function(){return t},i.Msfpc=function(){return o||M},i[ce]=function(){return n[oe]},i[ue]=function(){return n},i.addEvent=function(e){return!!e&&(n[le](e),o||(o=ot(e)),!0)},i[de]=function(r,i){var s;if(r<n[oe]){var a=n[oe]-r;(0,u.lep)(i)||(a=i<a?i:a),s=n[pe](r,a),o=st(n)}return new e(t,s)}}return e.create=function(t,r){return new e(t,r)},e}(),ct=r(49233),ut=r(68224),lt=function(){function e(){var t=!0,r=!0,n=!0,i="use-collector-delta",o=!1;(0,c.Z)(e,this,(function(e){e[ee]=function(){return t},e[te]=function(){n&&(n=!1,o||(t=!1))},e[re]=function(){return r},e[ne]=function(){return i},e[ie]=function(e){o||(e?(i=e,r=!0,o=!0):r=!1,t=!0)}}))}return e.__ieDyn=1,e}(),dt=function(){function e(){var t={};(0,c.Z)(e,this,(function(e){e[Je]=function(e,r){if(e&&r)try{var n=(s=e[de](","),a=[],s&&(0,u.tOU)(s,(function(e){a[le]((0,u.ndY)(e))})),a);if("this-request-only"===r)return n;for(var i=1e3*parseInt(r,10),o=0;o<n[oe];++o)t[n[o]]=(0,u.Ggd)()+i}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var r=t,n=(0,u.ndY)(e);return void 0!==r[n]&&r[n]>(0,u.Ggd)()||(delete r[n],!1)}}))}return e.__ieDyn=1,e}();function pt(e){var t,r=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*r,Math.min(t,6e5)}var ft,ht=2e6,gt=Math.min(ht,65e3),mt="metadata",vt="f",yt=/\./,_t=function(){function e(t,r,n,i,o,s){var a="data",l="baseData",p=!!i,m=r,y={},w=!!s,E=o||S;(0,c.Z)(e,this,(function(e){function r(e,t,i,o,s,a,c){(0,u.rWU)(e,(function(e,l){var S=null;if(l||_(l)){var w=i,E=e,b=s,P=t;if(p&&!o&&yt.test(e)){var T=e.split("."),C=T.length;if(C>1){b&&(b=b.slice());for(var I=0;I<C-1;I++){var O=T[I];P=P[O]=P[O]||{},w+="."+O,b&&b.push(O)}E=T[C-1]}}var x=o&&function(e,t){var r=y[e];return void 0===r&&(e.length>=7&&(r=(0,u.xee)(e,"ext.metadata")||(0,u.xee)(e,"ext.web")),y[e]=r),r}(w);if(S=!x&&m&&m.handleField(w,E)?m.value(w,E,l,n):function(e,t,r){if(!t&&!_(t)||"string"!=typeof e)return null;var n,i=typeof t;if("string"===i||"number"===i||"boolean"===i||(0,u.kJL)(t))t={value:t};else if("object"!==i||v.call(t,"value")){if((0,u.lep)(t[f])||t[f]===d||!(0,u.HD0)(t[f])&&!(0,u.hj$)(t[f])&&!(0,u.jnD)(t[f])&&!(0,u.kJL)(t[f]))return null}else t={value:r?JSON.stringify(t):t};if((0,u.kJL)(t[f])&&!(t[f][g]>0))return null;if(!(0,u.lep)(t[h])){if((0,u.kJL)(t[f])||!(0===(n=t[h])||n>0&&n<=13||32===n))return null;t[f]=t[f].toString()}return t}(E,l,n)){var N=S.value;if(P[E]=N,a&&a(b,E,S),c&&"object"==typeof N&&!(0,u.kJL)(N)){var k=b;k&&(k=k.slice()).push(E),r(l,N,w+"."+E,o,k,a,c)}}}}))}e.createPayload=function(e,t,r,n,i,o){return{apiKeys:[],payloadBlob:M,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:r,isBeacon:n,sendType:o,sendReason:i}},e.appendPayload=function(r,n,i){var o=r&&n&&!r.overflow;return o&&(0,C.Lm)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=n.events(),o=r.payloadBlob,s=r.numEvents,a=!1,c=[],l=[],d=r.isBeacon,p=d?65e3:3984588,f=d?gt:ht,h=0,g=0;h<t.length;){var m=t[h];if(m){if(s>=i){r.overflow=n.split(h);break}var v=e.getEventBlob(m);if(v&&v.length<=f){var y=v.length;if(o.length+y>p){r.overflow=n.split(h);break}o&&(o+="\n"),o+=v,++g>20&&((0,u.s1E)(o,0,1),g=0),a=!0,s++}else v?c.push(m):l.push(m),t.splice(h,1),h--}h++}if(c.length>0&&r.sizeExceed.push(at.create(n.iKey(),c)),l.length>0&&r.failedEvts.push(at.create(n.iKey(),l)),a){r.batches.push(n),r.payloadBlob=o,r.numEvents=s;var _=n.iKey();-1===(0,u.UAM)(r.apiKeys,_)&&r.apiKeys.push(_)}}),(function(){return{payload:r,theBatch:{iKey:n.iKey(),evts:n.events()},max:i}})),o},e.getEventBlob=function(e){try{return(0,C.Lm)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+function(e){if(e){var t=(0,u.MLb)(e,"-");if(t>-1)return(0,u.lH9)(e,t)}return d}(e.iKey);var n,i={};w||(n=function(e,t,r){!function(e,t,r,n,i){if(i&&t){var o=e(i.value,i.kind,i.propertyType);if(o>-1){var s=t[mt];s||(s=t[mt]={f:{}});var a=s[vt];if(a||(a=s[vt]={}),r)for(var c=0;c<r.length;c++){var l=r[c];a[l]||(a[l]={f:{}});var d=a[l][vt];d||(d=a[l][vt]={}),a=d}a=a[n]={},(0,u.kJL)(i.value)?a.a={t:o}:a.t=o}}}(E,i,e,t,r)});var o=e.ext;o&&(t.ext=i,(0,u.rWU)(o,(function(e,t){r(t,i[e]={},"ext."+e,!0,null,null,!0)})));var s=t[a]={};s.baseType=e.baseType;var c=s[l]={};return r(e.baseData,c,l,!1,[l],n,!0),r(e.data,s,a,!1,[],n,!0),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function St(e,t){return{set:function(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return(0,u._HB)([e,t],r,n,i)}}}var wt="sendAttempt",Et="?cors=true&"+$[fe]()+"="+B,bt=((ft={})[1]=F,ft[100]=F,ft[200]="sent",ft[8004]=L,ft[8003]=L,ft),Pt={},Tt={};function Ct(e,t,r){Pt[e]=t,!1!==r&&(Tt[t]=e)}function It(e,t){var r=!1;if(e&&t){var n=(0,u.FYL)(e);if(n&&n[oe]>0)for(var i=t[fe](),o=0;o<n[oe];o++){var s=n[o];if(s&&(0,u.aE6)(t,s)&&s[fe]()===i){r=!0;break}}}return r}function Ot(e,t,r,n){t&&r&&r[oe]>0&&(n&&Pt[t]?(e[he][Pt[t]]=r,e[ge]=!0):e.url+="&"+t+"="+r)}Ct(K,K,!1),Ct(q,q),Ct(H,"Client-Id"),Ct(G,G),Ct(z,z),Ct(W,W),Ct(J,J);var xt=function(){function e(t,r,n,i){var o,s,a,d,p,f,h,g,m,v,y,b,P,T,I,O,N,A,D,j,F,K,X,J,Y,Z,fe,Ye,Ze,et,tt,rt=!1;(0,c.Z)(e,this,(function(e){function c(e,t){try{return tt&&tt.getSenderInst(e,t)}catch(e){}return null}function nt(e,t,r){var n=(0,k.tV)(e);st(t,200,{},n),Rt(n)}function it(e,t,r,n){var i={},o=e[ke];o&&o.forEach((function(e,t){i[t]=e})),function(e,r,n){st(t,e,r,n),Rt(n)}(e.status,i,r||M)}function ot(e,t,r){var n=(0,k.tV)(e);st(t,e.status,(0,k.Fz)(e,!0),n),Rt(n)}function st(e,t,r,n){try{e(t,r,n)}catch(e){(0,R.kP)(h,2,518,(0,u.eUe)(e))}}function ft(e,t,r){var n=200,i=e[Ae],o=e[Re]+(X?"&NoResponseBody=true":M);try{var s=(0,u.jWD)();if(i){var a=!!m.getPlugin("LocalStorage"),c=[],l=[];(0,u.tOU)(i[De],(function(e){if(c&&e&&e[ce]()>0)for(var t=e[ue](),r=0;r<t[oe];r++){if(!s.sendBeacon(o,T.getEventBlob(t[r]))){c[le](e[de](r));break}l[le](e[r])}else c[le](e[de](0))})),l[oe]>0&&(i.sentEvts=l),a||Dt(c,8003,i[je],!0)}else n=0}catch(e){(0,R.jV)(h,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.eUe)(e)),n=0}finally{st(t,n,{},M)}}function ht(e){return 2===e||3===e}function gt(e){return N&&ht(e)&&(e=2),e}function mt(){return!a&&p<r}function vt(){var e=P;return P=[],e}function yt(e,t,r){var n=!1;return e&&e[oe]>0&&!a&&g[t]&&T&&(n=0!==t||mt()&&(r>0||d[ee]())),n}function Pt(e){var t={};return e&&(0,u.tOU)(e,(function(e,r){t[r]={iKey:e[ae](),evts:e[ue]()}})),t}function Ct(e,r,n,i,o){if(e&&0!==e[oe])if(a)Dt(e,1,i);else{i=gt(i);try{var c=e,l=0!==i;(0,C.Lm)(m,(function(){return"HttpManager:_sendBatches"}),(function(a){a&&(e=e.slice(0));for(var c=[],u=null,d=E(),p=g[i]||(l?g[1]:g[0]),f=p&&p[$e],h=K&&(N||ht(i)||3===f||p._isSync&&2===f);yt(e,i,r);){var m=e.shift();m&&m[ce]()>0&&(s.isTenantKilled(m[ae]())?c[le](m):(u=u||T[Oe](r,n,l,h,o,i),T.appendPayload(u,m,t)?null!==u.overflow&&(e=[u.overflow][se](e),u.overflow=null,kt(u,d,E(),o),d=E(),u=null):(kt(u,d,E(),o),d=E(),e=[m][se](e),u=null)))}u&&kt(u,d,E(),o),e[oe]>0&&(P=e[se](P)),Dt(c,8004,i)}),(function(){return{batches:Pt(c),retryCount:r,isTeardown:n,isSynchronous:l,sendReason:o,useSendBeacon:ht(i),sendType:i}}),!l)}catch(e){(0,R.kP)(h,2,48,"Unexpected Exception sending batch: "+(0,u.eUe)(e))}}}function xt(e,t){var r={url:o,hdrs:{},useHdrs:!1};t?(r[he]=w(r[he],b),r.useHdrs=(0,u.FYL)(r.hdrs)[oe]>0):(0,u.rWU)(b,(function(e,t){Tt[e]?Ot(r,Tt[e],t,!1):(r[he][e]=t,r[ge]=!0)})),Ot(r,H,"NO_AUTH",t),Ot(r,q,"1DS-Web-JS-4.3.0",t);var n=M;(0,u.tOU)(e.apiKeys,(function(e){n[oe]>0&&(n+=","),n+=e})),Ot(r,G,n,t),Ot(r,W,(0,u.Ggd)().toString(),t);var i=function(e){for(var t=0;t<e.batches[oe];t++){var r=e[De][t].Msfpc();if(r)return encodeURIComponent(r)}return M}(e);if(_(i)&&(r.url+="&ext.intweb.msfpc="+i),d[re]()&&Ot(r,z,d[ne](),t),m[qe]){var s=m[qe]();s>=0&&(r.url+="&w="+s)}for(var a=0;a<y[oe];a++)r.url+="&"+y[a].name+"="+y[a].value;return r}function Nt(e,t,r){e[t]=e[t]||{},e[t][f.identifier]=r}function kt(t,r,i,o){if(t&&t.payloadBlob&&t.payloadBlob[oe]>0){var a=!!Y,c=g[t.sendType];!ht(t[je])&&t[He]&&2===t.sendReason&&(c=g[2]||g[3]||c);var y=A;(t.isBeacon||3===c[$e])&&(y=!1);var _=xt(t,y);y=y||_[ge];var S=E();(0,C.Lm)(m,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var g=0;g<t.batches[oe];g++)for(var b=t[De][g][ue](),P=0;P<b[oe];P++){var T=b[P];if(I){var O=T[ze]=T[ze]||{};Nt(O,"sendEventStart",S),Nt(O,"serializationStart",r),Nt(O,"serializationCompleted",i)}T[wt]>0?T[wt]++:T[wt]=1}Dt(t[De],1e3+(o||0),t[je],!0);var x={data:t[Ne],urlString:_.url,headers:_[he],_thePayload:t,_sendReason:o,timeout:D,disableXhrSync:j,disableFetchKeepAlive:F};y&&(It(x[ke],V)||(x[ke][V]=U),It(x[ke],$)||(x[ke][$]=B));var k=null;c&&(k=function(r){d[te]();var i=function(r,i){!function(t,r,i,o){var a,c=9e3,h=null,g=!1,m=!1;try{var v=!0;if(typeof t!==l.jA){if(r){d[ie](r["time-delta-millis"]);var y=r["kill-duration"]||r["kill-duration-seconds"];(0,u.tOU)(s[Je](r["kill-tokens"],y),(function(e){(0,u.tOU)(i[De],(function(t){if(t[ae]()===e){h=h||[];var r=t[de](0);i.numEvents-=r[ce](),h[le](r)}}))}))}if(200==t||204==t)return void(c=200);((a=t)>=300&&a<500&&429!=a||501==a||505==a||i.numEvents<=0)&&(v=!1),c=9e3+t%1e3}if(v){c=100;var _=i.retryCnt;0===i[je]&&(_<n?(g=!0,At((function(){0===i[je]&&p--,Ct(i[De],_+1,i[We],N?2:i[je],5)}),N,pt(_))):(m=!0,N&&(c=8001)))}}finally{g||(d[ie](),function(t,r,n,i){try{i&&f[Qe]();var o=t[De];200===r&&(o=t.sentEvts||t[De],i||t[Ge]||f._clearBackOff(),function(e){if(I){var t=E();(0,u.tOU)(e,(function(e){e&&e[ce]()>0&&function(e,t){I&&(0,u.tOU)(e,(function(e){Nt(e[ze]=e[ze]||{},"sendEventCompleted",t)}))}(e[ue](),t)}))}}(o)),Dt(o,r,t[je],!0)}finally{0===t[je]&&(p--,5!==n&&e.sendQueuedRequests(t[je],n))}}(i,c,o,m)),Dt(h,8004,i[je])}}(r,i,t,o)},a=t[We]||t[Ge];try{c.sendPOST(r,i,a),Z&&Z(x,r,a,t[He])}catch(e){(0,R.jV)(h,"Unexpected exception sending payload. Ex:"+(0,u.eUe)(e)),st(i,0,{})}}),(0,C.Lm)(m,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(k)if(0===t[je]&&p++,a&&!t.isBeacon&&3!==c[$e]){var e={data:x[Ke],urlString:x[Re],headers:w({},x[ke]),timeout:x.timeout,disableXhrSync:x[Ee],disableFetchKeepAlive:x[be]},r=!1;(0,C.Lm)(m,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{Y(e,(function(e){r=!0,v||e[Ae]||(e[Ae]=e[Ae]||x[Ae],e[Xe]=e[Xe]||x[Xe]),k(e)}),t.isSync||t[We])}catch(e){r||k(x)}}))}else k(x)}))}),(function(){return{thePayload:t,serializationStart:r,serializationCompleted:i,sendReason:o}}),t[Ge])}t.sizeExceed&&t.sizeExceed[oe]>0&&Dt(t.sizeExceed,8003,t[je]),t.failedEvts&&t.failedEvts[oe]>0&&Dt(t.failedEvts,8002,t[je])}function At(e,t,r){t?e():Ze.set(e,r)}function Rt(e){var t=fe;try{for(var r=0;r<t[oe];r++)try{t[r](e)}catch(e){(0,R.kP)(h,1,519,"Response handler failed: "+e)}if(e){var n=JSON.parse(e);_(n.webResult)&&_(n.webResult[Q])&&O.set("MSFPC",n.webResult[Q],31536e3)}}catch(e){}}function Dt(e,t,r,n){if(e&&e[oe]>0&&i){var o=i[(a=t,c=bt[a],_(c)||(c="oth",a>=9e3&&a<=9999?c="rspFail":a>=8e3&&a<=8999?c=L:a>=1e3&&a<=1999&&(c="send")),c)];if(o){var s=0!==r;(0,C.Lm)(m,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){At((function(){try{o.call(i,e,t,s,r)}catch(e){(0,R.kP)(h,1,74,"send request notification failed: "+e)}}),n||s,0)}),(function(){return{batches:Pt(e),reason:t,isSync:s,sendSync:n,sendType:r}}),!s)}}var a,c}!function(){var e;o=null,s=new dt,a=!1,d=new lt,rt=!1,p=0,f=null,h=null,g=null,m=null,v=!0,y=[],b={},P=[],T=null,I=!1,O=null,N=!1,A=!1,D=e,j=e,F=e,K=e,X=e,J=[],Y=e,Z=e,fe=[],Ye=!1,Ze=St(),et=!1,tt=null}(),e[me]=function(e,t,r){Ye||(m=t,O=t.getCookieMgr(),h=(f=r).diagLog(),(0,u.W5k)(J,(0,x.k)(e,(function(e){var n,i=e.cfg,s=e.cfg.extensionConfig[r.identifier];Ze=St(s[ve],s[ye]),_(i.anonCookieName)?function(e,t,r){for(var n=0;n<e[oe];n++)if(e[n].name===t)return void(e[n].value=r);e[le]({name:t,value:r})}(y,"anoncknm",i.anonCookieName):function(e,t){for(var r=0;r<e[oe];r++)if("anoncknm"===e[r].name)return void e[pe](r,1)}(y),Y=s.payloadPreprocessor,Z=s.payloadListener;var a=s.httpXHROverride,l=s[_e]?s[_e]:i.endpointUrl;o=l+Et,A=!!(0,u.o8e)(s[Se])||!s[Se],I=!s.disableEventTimings;var d=s.valueSanitizer,p=s.stringifyObjects,f=!!i[we];(0,u.o8e)(s[we])||(f=!!s[we]),D=s.xhrTimeout,j=!!s[Ee],F=!!s[be],X=!1!==s.addNoResponse,et=!!s.excludeCsMetaData,t.getPlugin("LocalStorage")&&(F=!0),rt=!(0,ct.b$)(),T=new _t(m,d,p,f,S,et),(0,u.lep)(s[Pe])||(rt=!!s[Pe]);var w=function(){try{return{enableSendPromise:!1,isOneDs:!0,disableCredentials:!1,disableXhr:!1,disableBeacon:!rt,disableBeaconSync:!rt,disableFetchKeepAlive:F,timeWrapper:Ze,addNoResponse:X,senderOnCompleteCallBack:{xdrOnComplete:nt,fetchOnComplete:it,xhrOnComplete:ot,beaconOnRetry:ft}}}catch(e){}return null}();tt?tt.SetConfig(w):(tt=new ut.s)[me](w,h);var E=a,b=s[Te]?a:null,P=s[Te]?a:null,C=[3,2];if(!a){v=!1;var O=[];(0,ct.b$)()?(O=[2,1],C=[2,1,3]):O=[1,2,3],(a=c(O=(0,k.fM)(O,s.transports),!1))||(0,R.jV)(h,"No available transport to send events"),E=c(O,!0)}b||(b=c(C=(0,k.fM)(C,s.unloadTransports),!0)),K=!v&&(rt&&(0,ct.MF)()||!F&&(0,ct.JO)(!0)),(n={})[0]=a,n[1]=E||c([1,2,3],!0),n[2]=b||E||c([1],!0),n[3]=P||c([2,3],!0)||E||c([1],!0),g=n}))),Ye=!0)},e.addResponseHandler=function(e){return fe[le](e),{rm:function(){var t=fe.indexOf(e);t>=0&&fe[pe](t,1)}}},e[Ce]=function(e){try{if(T)return T.getEventBlob(e)}catch(e){}return M},e[Ie]=function(){try{return xt(T&&T[Oe](0,!1,!1,!1,1,0),A)}catch(e){}return null},e[xe]=function(e,r){try{var n=[];(0,u.tOU)(e,(function(e){r&&(e=(0,k.Ax)(e));var t=at.create(e[ae],[e]);n[le](t)}));for(var i=null;n[oe]>0&&T;){var o=n.shift();o&&o[ce]()>0&&(i=i||T[Oe](0,!1,!1,!1,1,0),T.appendPayload(i,o,t))}var s=xt(i,A),a={data:i[Ne],urlString:s.url,headers:s[he],timeout:D,disableXhrSync:j,disableFetchKeepAlive:F};return A&&(It(a[ke],V)||(a[ke][V]=U),It(a[ke],$)||(a[ke][$]=B)),a}catch(e){}return null},e._getDbgPlgTargets=function(){return[g[0],s,T,g]},e[Me]=function(e,t){b[e]=t},e.removeHeader=function(e){delete b[e]},e[Le]=function(){return mt()&&d[ee]()},e[Fe]=function(e,t){(0,u.o8e)(e)&&(e=0),N&&(e=gt(e),t=2),yt(P,e,0)&&Ct(vt(),0,!1,e,t||0)},e[Ue]=function(){return!a&&0===p&&0===P[oe]},e[Be]=function(e){N=e},e.addBatch=function(e){if(e&&e[ce]()>0){if(s.isTenantKilled(e[ae]()))return!1;P[le](e)}return!0},e.teardown=function(){P[oe]>0&&Ct(vt(),0,!0,2,2),(0,u.tOU)(J,(function(e){e&&e.rm&&e.rm()})),J=[]},e.pause=function(){a=!0},e.resume=function(){a=!1,e[Fe](0,4)},e[Ve]=function(e,t,r){e&&e[ce]()>0&&((0,u.lep)(t)&&(t=1),N&&(t=gt(t),r=2),Ct([e],0,!1,t,r||0))}}))}return e.__ieDyn=1,e}(),Nt=1e4,kt="eventsDiscarded",At=void 0,Rt=(0,u.Hef)({eventsLimitInMem:{isVal:T,v:Nt},immediateEventLimit:{isVal:T,v:500},autoFlushEventsLimit:{isVal:T,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:function(e){return e&&e.sendPOST},v:At},overrideInstrumentationKey:At,overrideEndpointUrl:At,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:At,clearTimeoutOverride:At,payloadPreprocessor:At,payloadListener:At,disableEventTimings:At,valueSanitizer:At,stringifyObjects:At,enableCompoundKey:At,disableOptimizeObj:!1,transports:At,unloadTransports:At,useSendBeacon:At,disableFetchKeepAlive:At,avoidOptions:!1,xhrTimeout:At,disableXhrSync:At,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:u.hj$,v:6},maxUnloadEventRetryAttempts:{isVal:u.hj$,v:2},addNoResponse:At,excludeCsMetaData:At}),Dt=function(e){function t(){var r,n=e.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.0";var a,l,d,p,f,h,g,m,v,y,_,S,w,E,P,D,M,L,F,U,B,V,$,q,H,z=!1,W=[],G=!1,J=0,Q=0,ee={},te=i;return(0,c.Z)(t,n,(function(e,t){function n(){(0,I.JA)(null,L),(0,I.C9)(null,L),(0,I.Yl)(null,L)}function c(e){var t="";return e&&e[oe]&&(0,u.tOU)(e,(function(e){t&&(t+="\n"),t+=e})),t}function re(e){var t="";try{fe(e),t=m[Ce](e)}catch(e){}return t}function ne(e){"beforeunload"!==(e||(0,u.Jj3)().event).type&&(P=!0,m[Be](P)),Pe(2,2)}function ie(e){P=!1,m[Be](P)}function fe(e){e.ext&&e.ext[Y]&&delete e.ext[Y],e.ext&&e.ext[Z]&&e.ext[Z].id&&delete e.ext[Z].id,E&&(e.ext=(0,k.Ax)(e.ext),e[tt]&&(e[tt]=(0,k.Ax)(e[tt])),e[Ke]&&(e[Ke]=(0,k.Ax)(e[Ke])))}function he(e,t){if(e[rt]||(e[rt]=0),e[nt]||(e[nt]=1),fe(e),e[it])if(h||G)e[nt]=3,e[it]=!1;else if(m)return E&&(e=(0,k.Ax)(e)),void m[Ve](at.create(e[ae],[e]),!0===e[it]?1:e[it],3);var r=e[nt],n=Q,i=d;4===r&&(n=J,i=l);var o=!1;if(n<i)o=!Ne(e,t);else{var s=1,a=20;4===r&&(s=4,a=1),o=!0,function(e,t,r,n){for(;r<=t;){var i=Te(e,t,!0);if(i&&i[ce]()>0){var o=i[de](0,n),s=o[ce]();if(s>0)return 4===r?J-=s:Q-=s,Ge(kt,[o],A.h.QueueFull),!0}r++}return ke(),!1}(e[ae],e[nt],s,a)&&(o=!Ne(e,t))}o&&We(kt,[e],A.h.QueueFull)}function ge(e,t,r){var n=Ae(e,t,r);return m[Fe](t,r),n}function _e(){return Q>0}function Se(){if(S>=0&&Ae(S,0,w)&&m[Fe](0,w),J>0&&!f&&!G){var e=ee[te][2];e>=0&&(f=Ee((function(){f=null,ge(4,0,1),Se()}),e))}var t=ee[te][1];!p&&!a&&t>=0&&!G&&(_e()?p=Ee((function(){p=null,ge(0===g?3:1,0,1),g++,g%=2,Se()}),t):g=0)}function we(){r=null,z=!1,W=[],a=null,G=!1,J=0,l=500,Q=0,d=Nt,ee={},te=i,p=null,f=null,h=0,g=0,v={},y=0,$=!1,_=0,S=-1,w=null,E=!0,P=!1,D=6,M=2,L=null,q=null,H=!1,F=St(),m=new xt(500,2,1,{requeue:He,send:Xe,sent:Je,drop:ot,rspFail:st,oth:ct}),$e(),v[4]={batches:[],iKeyMap:{}},v[3]={batches:[],iKeyMap:{}},v[2]={batches:[],iKeyMap:{}},v[1]={batches:[],iKeyMap:{}},ut()}function Ee(e,t){0===t&&h&&(t=1);var r=1e3;return h&&(r=pt(h-1)),F.set(e,t*r)}function be(){return null!==p&&(p.cancel(),p=null,g=0,!0)}function Pe(e,t){be(),a&&(a.cancel(),a=null),G||ge(1,e,t)}function Te(e,t,r){var n=v[t];n||(n=v[t=1]);var i=n.iKeyMap[e];return!i&&r&&(i=at.create(e),n.batches[le](i),n.iKeyMap[e]=i),i}function Oe(t,r){m[Le]()&&!h&&(y>0&&Q>y&&(r=!0),r&&null==a&&e.flush(t,(function(){}),20))}function Ne(e,t){E&&(e=(0,k.Ax)(e));var r=e[nt],n=Te(e[ae],r,!0);return!!n.addEvent(e)&&(4!==r?(Q++,t&&0===e[rt]&&Oe(!e.sync,_>0&&n[ce]()>=_)):J++,!0)}function ke(){for(var e=0,t=0,r=function(r){var n=v[r];n&&n[De]&&(0,u.tOU)(n[De],(function(n){4===r?e+=n[ce]():t+=n[ce]()}))},n=1;n<=4;n++)r(n);Q=t,J=e}function Ae(t,r,n){var i=!1,o=0===r;return!o||m[Le]()?(0,C.Lm)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],r=4;r>=t;){var n=v[r];n&&n.batches&&n.batches[oe]>0&&((0,u.tOU)(n[De],(function(t){m.addBatch(t)?i=i||t&&t[ce]()>0:e=e[se](t[ue]()),4===r?J-=t[ce]():Q-=t[ce]()})),n[De]=[],n.iKeyMap={}),r--}e[oe]>0&&We(kt,e,A.h.KillSwitch),i&&S>=t&&(S=-1,w=0)}),(function(){return{latency:t,sendType:r,sendReason:n}}),!o):(S=S>=0?Math.min(S,t):t,w=Math.max(w,n)),i}function Re(e,t){ge(1,0,t),ke(),je((function(){e&&e(),W[oe]>0?a=Ee((function(){a=null,Re(W.shift(),t)}),0):(a=null,Se())}))}function je(e){m[Ue]()?e():a=Ee((function(){a=null,je(e)}),.25)}function $e(){(ee={})[i]=[2,1,0],ee[o]=[6,3,0],ee[s]=[18,9,0]}function He(t,r){var n=[],i=D;P&&(i=M),(0,u.tOU)(t,(function(t){t&&t[ce]()>0&&(0,u.tOU)(t[ue](),(function(t){t&&(t[it]&&(t[nt]=4,t[it]=!1),t[rt]<i?(b(t,e[Ye]),he(t,!1)):n[le](t))}))})),n[oe]>0&&We(kt,n,A.h.NonRetryableStatus),P&&Pe(2,2)}function ze(t,r){var n=V||{},i=n[t];if(i)try{i.apply(n,r)}catch(r){(0,R.kP)(e.diagLog(),1,74,t+" notification failed: "+r)}}function We(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t&&t[oe]>0&&ze(e,[t][se](r))}function Ge(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t&&t[oe]>0&&(0,u.tOU)(t,(function(t){t&&t[ce]()>0&&ze(e,[t.events()][se](r))}))}function Xe(e,t,r){e&&e[oe]>0&&ze("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==r])}function Je(e,t){Ge("eventsSent",e,t),Se()}function ot(e,t){Ge(kt,e,t>=8e3&&t<=8999?t-8e3:A.h.Unknown)}function st(e){Ge(kt,e,A.h.NonRetryableStatus),Se()}function ct(e,t){Ge(kt,e,A.h.Unknown),Se()}function ut(){_=B?0:Math.max(1500,d/6)}we(),e._getDbgPlgTargets=function(){return[m,r]},e[me]=function(i,o,s){(0,C.Lm)(o,(function(){return"PostChannel:initialize"}),(function(){t[me](i,o,s),V=o.getNotifyMgr();try{L=(0,I.jU)((0,O.J)(e[Ye]),o.evtNamespace&&o.evtNamespace()),e._addHook((0,x.k)(i,(function(t){var i=t.cfg,s=(0,N.CD)(null,i,o);r=s.getExtCfg(e[Ye],Rt),F=St(r[ve],r[ye]),E=!r.disableOptimizeObj&&!!(0,u.vsb)("chrome"),U=r.ignoreMc1Ms0CookieProcessing,function(e){var t=e[qe];e[qe]=function(){var r=0;return U&&(r|=2),r|t.call(e)}}(o),d=r[Ze],l=r.immediateEventLimit,y=r[et],D=r.maxEventRetryAttempts,M=r.maxUnloadEventRetryAttempts,B=r.disableAutoBatchFlushLimit,ut(),q=r.overrideInstrumentationKey,H=!!r.disableTelemetry,$&&n();var a=i.disablePageUnloadEvents||[];$=(0,I.c9)(ne,a,L),$=(0,I.TJ)(ne,a,L)||$,$=(0,I.nD)(ie,i.disablePageShowEvents,L)||$}))),m[me](i,e.core,e)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{theConfig:i,core:o,extensions:s}}))},e.processTelemetry=function(t,r){b(t,e[Ye]),r=r||e._getTelCtx(r);var n=t;H||z||(q&&(n[ae]=q),he(n,!0),P?Pe(2,2):Se()),e.processNext(n,r)},e.getOfflineSupport=function(){try{var e=m&&m[Ie]();if(m)return{getUrl:function(){return e?e.url:null},serialize:re,batch:c,shouldProcess:function(e){return!H},createPayload:function(e){return null},createOneDSPayload:function(e){if(m[xe])return m[xe](e,E)}}}catch(e){}return null},e._doTeardown=function(e,t){Pe(2,2),z=!0,m.teardown(),n(),we()},e.setEventQueueLimits=function(e,t){r[Ze]=d=T(e)?e:Nt,r[et]=y=T(t)?t:0,ut();var n=Q>e;if(!n&&_>0)for(var i=1;!n&&i<=3;i++){var o=v[i];o&&o[De]&&(0,u.tOU)(o[De],(function(e){e&&e[ce]()>=_&&(n=!0)}))}Oe(!0,n)},e.pause=function(){be(),G=!0,m.pause()},e.resume=function(){G=!1,m.resume(),Se()},e._loadTransmitProfiles=function(e){be(),$e(),te=i,Se(),(0,u.rWU)(e,(function(e,t){var r=t[oe];if(r>=2){var n=r>2?t[2]:0;if(t[pe](0,r-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}n>=0&&t[1]>=0&&n>t[1]&&(n=t[1]),t[le](n),ee[e]=t}}))},e.flush=function(e,t,r){var n;if(void 0===e&&(e=!0),!G)if(r=r||1,e)t||(n=(0,j.wv)((function(e){t=e}))),null==a?(be(),Ae(1,0,r),a=Ee((function(){a=null,Re(t,r)}),0)):W[le](t);else{var i=be();ge(1,1,r),t&&t(),i&&Se()}return n},e.setMsaAuthTicket=function(e){m[Me](K,e)},e.setAuthPluginHeader=function(e){m[Me](X,e)},e.removeAuthPluginHeader=function(){m.removeHeader(X)},e.hasEvents=_e,e._setTransmitProfile=function(e){te!==e&&void 0!==ee[e]&&(be(),te=e,Se())},(0,k.Vb)(e,(function(){return m}),["addResponseHandler"]),e[Qe]=function(){h<4&&(h++,be(),Se())},e._clearBackOff=function(){h&&(h=0,be(),Se())}})),n}return(0,a.ne)(t,e),t.__ieDyn=1,t}(D.i)},80673:(e,t,r)=>{"use strict";r.d(t,{N:()=>u,X:()=>c});var n=r(52631),i=r(90508),o=r(1895),s=";",a="=";function c(e){if(!e)return{};var t=e[o.w6](s),r=(0,n.XzL)(t,(function(e,t){var r=t[o.w6](a);if(2===r[o.R5]){var n=r[0][o.T1](),i=r[1];e[n]=i}return e}),{});if((0,n.FYL)(r)[o.R5]>0){if(r.endpointsuffix){var c=r.location?r.location+".":"";r[o.ok]=r[o.ok]||"https://"+c+"dc."+r.endpointsuffix}r[o.ok]=r[o.ok]||i.cA,(0,n.IdH)(r[o.ok],"/")&&(r[o.ok]=r[o.ok].slice(0,-1))}return r}var u={parse:c}},90508:(e,t,r)=>{"use strict";r.d(t,{b2:()=>u,cA:()=>a,cV:()=>o,fb:()=>i,ly:()=>l,qp:()=>c,tP:()=>n,w$:()=>s});var n="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",i="sampleRate",o="ProcessLegacy",s="http.method",a="https://dc.services.visualstudio.com",c="/v2/track",u="not_specified",l="iKey"},20200:(e,t,r)=>{"use strict";r.d(t,{IN:()=>s,Z1:()=>i,vp:()=>o});var n=r(20488),i=(0,n.B)({LocalStorage:0,SessionStorage:1}),o=(0,n.B)({AI:0,AI_AND_W3C:1,W3C:2}),s=(0,n.B)({Normal:1,Critical:2})},49722:(e,t,r)=>{"use strict";r.d(t,{CO:()=>s,eN:()=>a,uI:()=>u,y1:()=>c});var n=r(52631),i=r(1895),o="";function s(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[i.T1]()}function a(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var t=o+e%1e3,r=o+Math.floor(e/1e3)%60,n=o+Math.floor(e/6e4)%60,s=o+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t[i.R5]?"00"+t:2===t[i.R5]?"0"+t:t,r=r[i.R5]<2?"0"+r:r,n=n[i.R5]<2?"0"+n:n,s=s[i.R5]<2?"0"+s:s,(a>0?a+".":o)+s+":"+n+":"+r+"."+t}function c(e,t){var r=null;return(0,n.tOU)(e,(function(e){if(e.identifier===t)return r=e,-1})),r}function u(e,t,r,i,o){return!o&&(0,n.HD0)(e)&&("Script error."===e||"Script error"===e)}},28266:(e,t,r)=>{"use strict";r.d(t,{n:()=>h});var n=r(2012),i=r(98769);function o(e){var t="ai."+e+".";return function(e){return t+e}}var s=o("application"),a=o("device"),c=o("location"),u=o("operation"),l=o("session"),d=o("user"),p=o("cloud"),f=o("internal"),h=function(e){function t(){return e.call(this)||this}return(0,n.ne)(t,e),t}((0,i.hl)({applicationVersion:s("ver"),applicationBuild:s("build"),applicationTypeId:s("typeId"),applicationId:s("applicationId"),applicationLayer:s("layer"),deviceId:a("id"),deviceIp:a("ip"),deviceLanguage:a("language"),deviceLocale:a("locale"),deviceModel:a("model"),deviceFriendlyName:a("friendlyName"),deviceNetwork:a("network"),deviceNetworkName:a("networkName"),deviceOEMName:a("oemName"),deviceOS:a("os"),deviceOSVersion:a("osVersion"),deviceRoleInstance:a("roleInstance"),deviceRoleName:a("roleName"),deviceScreenResolution:a("screenResolution"),deviceType:a("type"),deviceMachineName:a("machineName"),deviceVMName:a("vmName"),deviceBrowser:a("browser"),deviceBrowserVersion:a("browserVersion"),locationIp:c("ip"),locationCountry:c("country"),locationProvince:c("province"),locationCity:c("city"),operationId:u("id"),operationName:u("name"),operationParentId:u("parentId"),operationRootId:u("rootId"),operationSyntheticSource:u("syntheticSource"),operationCorrelationVector:u("correlationVector"),sessionId:l("id"),sessionIsFirst:l("isFirst"),sessionIsNew:l("isNew"),userAccountAcquisitionDate:d("accountAcquisitionDate"),userAccountId:d("accountId"),userAgent:d("userAgent"),userId:d("id"),userStoreRegion:d("storeRegion"),userAuthUserId:d("authUserId"),userAnonymousUserAcquisitionDate:d("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:d("authUserAcquisitionDate"),cloudName:p("name"),cloudRole:p("role"),cloudRoleVer:p("roleVer"),cloudRoleInstance:p("roleInstance"),cloudEnvironment:p("environment"),cloudLocation:p("location"),cloudDeploymentUnit:p("deploymentUnit"),internalNodeName:f("nodeName"),internalSdkVersion:f("sdkVersion"),internalAgentVersion:f("agentVersion"),internalSnippet:f("snippet"),internalSdkSrc:f("sdkSrc")}))},88967:(e,t,r)=>{"use strict";r.d(t,{_:()=>n});var n=(0,r(20488).B)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})},21874:(e,t,r)=>{"use strict";r.d(t,{I:()=>i,Y:()=>o});var n=r(28266),i={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},o=new n.n},35358:(e,t,r)=>{"use strict";r.d(t,{g:()=>c});var n=r(33668),i=r(52631),o=r(73831),s=r(1895);function a(e,t){(0,n.QY)(e,null,null,t)}function c(e){var t=(0,i.MeC)(),r=(0,i.jWD)(),c=!1,u=[],l=1;!r||(0,i.lep)(r.onLine)||r.onLine||(l=2);var d=0,p=m(),f=(0,n.jU)((0,o.J)("OfflineListener"),e);try{if(g((0,i.Jj3)())&&(c=!0),t){var h=t.body||t;h.ononline&&g(h)&&(c=!0)}}catch(e){c=!1}function g(e){var t=!1;return e&&(t=(0,n.XO)(e,"online",y,f))&&(0,n.XO)(e,"offline",_,f),t}function m(){return 2!==d&&2!==l}function v(){var e=m();p!==e&&(p=e,(0,i.tOU)(u,(function(e){var t={isOnline:p,rState:l,uState:d};try{e(t)}catch(e){}})))}function y(){l=1,v()}function _(){l=2,v()}return{isOnline:function(){return p},isListening:function(){return c},unload:function(){var e=(0,i.Jj3)();if(e&&c){if(a(e,f),t){var r=t.body||t;(0,i.o8e)(r.ononline)||a(r,f)}c=!1}},addListener:function(e){return u[s.MW](e),{rm:function(){var t=u.indexOf(e);return t>-1?u.splice(t,1):void 0}}},setOnlineState:function(e){d=e,v()}}}},36708:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var n=(0,r(20488).c)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})},71464:(e,t,r)=>{"use strict";r.d(t,{B1:()=>g,D3:()=>E,KX:()=>w,LN:()=>_,MB:()=>v,TY:()=>S,Vd:()=>P,d4:()=>y,lC:()=>b,ll:()=>C,mh:()=>m,yp:()=>T});var n=r(52631),i=r(88363),o=r(38942),s=r(98769),a=r(20200),c=r(1895),u=void 0,l=void 0,d="";function p(){return y()?f(a.Z1.LocalStorage):null}function f(e){try{if((0,n.lep)((0,i.Rd)()))return null;var t=(new Date)[c.r_](),r=(0,n.vsb)(e===a.Z1.LocalStorage?"localStorage":"sessionStorage"),o=d+t;r.setItem(o,t);var s=r.getItem(o)!==t;if(r[c.XI](o),!s)return r}catch(e){}return null}function h(){return E()?f(a.Z1.SessionStorage):null}function g(){u=!1,l=!1}function m(e){d=e||""}function v(){u=y(!0),l=E(!0)}function y(e){return(e||void 0===u)&&(u=!!f(a.Z1.LocalStorage)),u}function _(e,t){var r=p();if(null!==r)try{return r.getItem(t)}catch(t){u=!1,(0,o.kP)(e,2,1,"Browser failed read of local storage. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return null}function S(e,t,r){var i=p();if(null!==i)try{return i.setItem(t,r),!0}catch(t){u=!1,(0,o.kP)(e,2,3,"Browser failed write to local storage. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return!1}function w(e,t){var r=p();if(null!==r)try{return r[c.XI](t),!0}catch(t){u=!1,(0,o.kP)(e,2,5,"Browser failed removal of local storage item. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return!1}function E(e){return(e||void 0===l)&&(l=!!f(a.Z1.SessionStorage)),l}function b(){var e=[];return E()&&(0,n.rWU)((0,n.vsb)("sessionStorage"),(function(t){e[c.MW](t)})),e}function P(e,t){var r=h();if(null!==r)try{return r.getItem(t)}catch(t){l=!1,(0,o.kP)(e,2,2,"Browser failed read of session storage. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return null}function T(e,t,r){var i=h();if(null!==i)try{return i.setItem(t,r),!0}catch(t){l=!1,(0,o.kP)(e,2,4,"Browser failed write to session storage. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return!1}function C(e,t){var r=h();if(null!==r)try{return r[c.XI](t),!0}catch(t){l=!1,(0,o.kP)(e,2,6,"Browser failed removal of session storage item. "+(0,s.jj)(t),{exception:(0,n.eUe)(t)})}return!1}},57979:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});var n=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t}},10733:(e,t,r)=>{"use strict";r.d(t,{AL:()=>c,G9:()=>f,GO:()=>p,HS:()=>d,NN:()=>h,O$:()=>u,X0:()=>a,ev:()=>v,oN:()=>m,oO:()=>g,rr:()=>l});var n=r(52631),i=r(38942),o=r(49233),s=r(1895);function a(e,t,r){var i=t[s.R5],o=c(e,t);if(o[s.R5]!==i){for(var a=0,u=o;void 0!==r[u];)a++,u=(0,n.k4L)(o,0,147)+v(a);o=u}return o}function c(e,t){var r;return t&&(t=(0,n.ndY)((0,n.XCJ)(t)))[s.R5]>150&&(r=(0,n.k4L)(t,0,150),(0,i.kP)(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),r||t}function u(e,t,r){var o;return void 0===r&&(r=1024),t&&(r=r||1024,(t=(0,n.ndY)((0,n.XCJ)(t)))[s.R5]>r&&(o=(0,n.k4L)(t,0,r),(0,i.kP)(e,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:t},!0))),o||t}function l(e,t){return m(e,t,2048,66)}function d(e,t){var r;return t&&t[s.R5]>32768&&(r=(0,n.k4L)(t,0,32768),(0,i.kP)(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),r||t}function p(e,t){var r;if(t){var o=""+t;o[s.R5]>32768&&(r=(0,n.k4L)(o,0,32768),(0,i.kP)(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return r||t}function f(e,t){if(t){var r={};(0,n.rWU)(t,(function(t,c){if((0,n.Kn2)(c)&&(0,o.nS)())try{c=(0,o.xA)()[s.MB](c)}catch(t){(0,i.kP)(e,2,49,"custom property is not valid",{exception:t},!0)}c=u(e,c,8192),t=a(e,t,r),r[t]=c})),t=r}return t}function h(e,t){if(t){var r={};(0,n.rWU)(t,(function(t,n){t=a(e,t,r),r[t]=n})),t=r}return t}function g(e,t){return t?m(e,t,128,69)[s.r_]():t}function m(e,t,r,o){var a;return t&&(t=(0,n.ndY)((0,n.XCJ)(t)))[s.R5]>r&&(a=(0,n.k4L)(t,0,r),(0,i.kP)(e,2,o,"input is too long, it has been truncated to "+r+" characters.",{data:t},!0)),a||t}function v(e){var t="00"+e;return(0,n.s1E)(t,t[s.R5]-3)}},15922:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var n=r(98769),i=r(90508),o=r(1895),s=r(10733),a=function(e,t,r){var a=this,c=this;c.ver=1,c.sampleRate=100,c.tags={},c[o.I]=(0,s.O$)(e,r)||i.b2,c.data=t,c.time=(0,n.Y6)(new Date),c.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===a.sampleRate?4:1},tags:1,data:1}}},96938:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var n=r(90508),i=r(1895),o=r(10733),s=function(){function e(e,t,r,s){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var a=this;a.ver=2,a[i.I]=(0,o.O$)(e,t)||n.b2,a[i.qZ]=(0,o.G9)(e,r),a[i.Ee]=(0,o.NN)(e,s)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}()},94045:(e,t,r)=>{"use strict";r.d(t,{Pp:()=>w});var n=r(2012),i=r(52631),o=r(90508),s=r(1895),a=r(10733),c="error",u="stack",l="stackDetails",d="errorSrc",p="message",f="description";function h(e,t){var r=e;return r&&!(0,i.HD0)(r)&&(JSON&&JSON[s.MB]?(r=JSON[s.MB](e),!t||r&&"{}"!==r||(r=(0,i.mf2)(e[s.r_])?e[s.r_]():""+e)):r=e+" - (Missing JSON.stringify)"),r||""}function g(e,t){var r=e;return e&&(r&&!(0,i.HD0)(r)&&(r=e[p]||e[f]||r),r&&!(0,i.HD0)(r)&&(r=h(r,!0)),e.filename&&(r=r+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(0,i.MLb)(r||"",t)&&(r=t+": "+r),r||""}function m(e){return e&&e.src&&(0,i.HD0)(e.src)&&e.obj&&(0,i.kJL)(e.obj)}function v(e){var t=e||"";(0,i.HD0)(t)||(t=(0,i.HD0)(t[u])?t[u]:""+t);var r=t[s.w6]("\n");return{src:t,obj:r}}function y(e){var t=null;if(e)try{if(e[u])t=v(e[u]);else if(e[c]&&e[c][u])t=v(e[c][u]);else if(e.exception&&e.exception[u])t=v(e.exception[u]);else if(m(e))t=e;else if(m(e[l]))t=e[l];else if((0,i.Jj3)()&&(0,i.Jj3)().opera&&e[p])t=function(e){for(var t=[],r=e[s.w6]("\n"),n=0;n<r[s.R5];n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),t[s.MW](i)}return{src:e,obj:t}}(e[s.gU]);else if(e.reason&&e.reason[u])t=v(e.reason[u]);else if((0,i.HD0)(e))t=v(e);else{var r=e[p]||e[f]||"";(0,i.HD0)(e[d])&&(r&&(r+="\n"),r+=" from "+e[d]),r&&(t=v(r))}}catch(e){t=v(e)}return t||{src:"",obj:null}}function _(e){var t="";if(e&&!(t=e.typeName||e[s.I]||""))try{var r=/function (.{1,200})\(/.exec(e.constructor[s.r_]());t=r&&r[s.R5]>1?r[1]:""}catch(e){}return t}function S(e){if(e)try{if(!(0,i.HD0)(e)){var t=_(e),r=h(e,!1);return r&&"{}"!==r||(e[c]&&(t=_(e=e[c])),r=h(e,!0)),0!==(0,i.MLb)(r,t)&&"String"!==t?t+":"+r:r}}catch(e){}return""+(e||"")}var w=function(){function e(e,t,r,n,o,c){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var u=this;u.ver=2,function(e){try{if((0,i.Kn2)(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(u[s.pj]=t[s.pj]||[],u[s.qZ]=t[s.qZ],u[s.Ee]=t[s.Ee],t[s.uO]&&(u[s.uO]=t[s.uO]),t.id&&(u.id=t.id,t[s.qZ].id=t.id),t[s.oJ]&&(u[s.oJ]=t[s.oJ]),(0,i.lep)(t[s.NE])||(u[s.NE]=t[s.NE])):(r||(r={}),c&&(r.id=c),u[s.pj]=[new E(e,t,r)],u[s.qZ]=(0,a.G9)(e,r),u[s.Ee]=(0,a.NN)(e,n),o&&(u[s.uO]=o),c&&(u.id=c))}return e.CreateAutoException=function(e,t,r,n,i,o,a,c){var u,l=_(i||o||e);return(u={})[s.gU]=g(e,l),u.url=t,u.lineNumber=r,u.columnNumber=n,u.error=S(i||o||e),u.evt=S(o||e),u[s.YX]=l,u.stackDetails=y(a||i||o),u.errorSrc=c,u},e.CreateFromInterface=function(t,r,o,a){var c=r[s.pj]&&(0,i.Mrq)(r[s.pj],(function(e){return E[s.HO](t,e)}));return new e(t,(0,n.uc)((0,n.uc)({},r),{exceptions:c}),o,a)},e.prototype.toInterface=function(){var e,t=this,r=t.exceptions,n=t.properties,o=t.measurements,a=t.severityLevel,c=t.problemGroup,u=t.id,l=t.isManual,d=r instanceof Array&&(0,i.Mrq)(r,(function(e){return e.toInterface()}))||void 0;return(e={ver:"4.0"})[s.pj]=d,e.severityLevel=a,e.properties=n,e.measurements=o,e.problemGroup=c,e.id=u,e.isManual=l,e},e.CreateSimpleException=function(e,t,r,n,i,o){var a;return{exceptions:[(a={},a[s.A5]=!0,a.message=e,a.stack=i,a.typeName=t,a)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=S,e}(),E=function(){function e(e,t,r){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var n=this;if(function(e){try{if((0,i.Kn2)(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))n[s.YX]=t[s.YX],n[s.gU]=t[s.gU],n[u]=t[u],n[s.Xo]=t[s.Xo]||[],n[s.A5]=t[s.A5];else{var d=t,p=d&&d.evt;(0,i.VZO)(d)||(d=d[c]||p||d),n[s.YX]=(0,a.O$)(e,_(d))||o.b2,n[s.gU]=(0,a.HS)(e,g(t||d,n[s.YX]))||o.b2;var f=t[l]||y(t);n[s.Xo]=function(e){var t,r=e.obj;if(r&&r[s.R5]>0){t=[];var n=0,o=0;if((0,i.tOU)(r,(function(e){var r=e[s.r_]();if(b.regex.test(r)){var i=new b(r,n++);o+=i[s.$t],t[s.MW](i)}})),o>32768)for(var a=0,c=t[s.R5]-1,u=0,l=a,d=c;a<c;){if((u+=t[a][s.$t]+t[c][s.$t])>32768){var p=d-l+1;t.splice(l,p);break}l=a,d=c,a++,c--}}return t}(f),(0,i.kJL)(n[s.Xo])&&(0,i.Mrq)(n[s.Xo],(function(t){t[s.wp]=(0,a.O$)(e,t[s.wp]),t[s.us]=(0,a.O$)(e,t[s.us])})),n[u]=(0,a.GO)(e,function(e){var t="";return e&&(e.obj?(0,i.tOU)(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(f)),n.hasFullStack=(0,i.kJL)(n.parsedStack)&&n.parsedStack[s.R5]>0,r&&(r[s.YX]=r[s.YX]||n[s.YX])}}return e.prototype.toInterface=function(){var e,t=this,r=t[s.Xo]instanceof Array&&(0,i.Mrq)(t[s.Xo],(function(e){return e.toInterface()}));return(e={id:t.id,outerId:t.outerId,typeName:t[s.YX],message:t[s.gU],hasFullStack:t[s.A5],stack:t[u]})[s.Xo]=r||void 0,e},e.CreateFromInterface=function(t,r){var o=r[s.Xo]instanceof Array&&(0,i.Mrq)(r[s.Xo],(function(e){return b[s.HO](e)}))||r[s.Xo];return new e(t,(0,n.uc)((0,n.uc)({},r),{parsedStack:o}))},e}(),b=function(){function e(t,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[s.$t]=0,"string"==typeof t){var o=t;n[s.qs]=r,n[s.RQ]="<no_method>",n[s.wp]=(0,i.ndY)(o),n[s.us]="",n[s.sO]=0;var a=o.match(e.regex);a&&a[s.R5]>=5&&(n[s.RQ]=(0,i.ndY)(a[2])||n[s.RQ],n[s.us]=(0,i.ndY)(a[4]),n[s.sO]=parseInt(a[5])||0)}else n[s.qs]=t[s.qs],n[s.RQ]=t[s.RQ],n[s.wp]=t[s.wp],n[s.us]=t[s.us],n[s.sO]=t[s.sO],n[s.$t]=0;n.sizeInBytes+=n.method[s.R5],n.sizeInBytes+=n.fileName[s.R5],n.sizeInBytes+=n.assembly[s.R5],n[s.$t]+=e.baseSize,n.sizeInBytes+=n.level.toString()[s.R5],n.sizeInBytes+=n.line.toString()[s.R5]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[s.qs],method:e[s.RQ],assembly:e[s.wp],fileName:e[s.us],line:e[s.sO]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}()},8829:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});var n=r(90508),i=r(1895),o=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},s=r(10733),a=function(){function e(e,t,r,a,c,u,l,d,p){this.aiDataContract={ver:1,metrics:1,properties:0};var f=this;f.ver=2;var h=new o;h[i.yM]=a>0?a:void 0,h.max=isNaN(u)||null===u?void 0:u,h.min=isNaN(c)||null===c?void 0:c,h[i.I]=(0,s.O$)(e,t)||n.b2,h.value=r,h.stdDev=isNaN(l)||null===l?void 0:l,f.metrics=[h],f[i.qZ]=(0,s.G9)(e,d),f[i.Ee]=(0,s.NN)(e,p)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}()},92642:(e,t,r)=>{"use strict";r.d(t,{B:()=>a});var n=r(90508),i=r(49722),o=r(1895),s=r(10733),a=function(){function e(e,t,r,a,c,u,l){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var d=this;d.ver=2,d.id=(0,s.oO)(e,l),d.url=(0,s.rr)(e,r),d[o.I]=(0,s.O$)(e,t)||n.b2,isNaN(a)||(d[o.az]=(0,i.eN)(a)),d[o.qZ]=(0,s.G9)(e,c),d[o.Ee]=(0,s.NN)(e,u)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}()},74486:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var n=r(90508),i=r(1895),o=r(10733),s=function(){function e(e,t,r,s,a,c,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var l=this;l.ver=2,l.url=(0,o.rr)(e,r),l[i.I]=(0,o.O$)(e,t)||n.b2,l[i.qZ]=(0,o.G9)(e,a),l[i.Ee]=(0,o.NN)(e,c),u&&(l.domProcessing=u.domProcessing,l[i.az]=u[i.az],l.networkConnect=u.networkConnect,l.perfTotal=u.perfTotal,l[i.g5]=u[i.g5],l.sentRequest=u.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}()},84124:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var n=r(49722),i=r(88861),o=r(1895),s=r(10733),a=function(){function e(e,t,r,a,c,u,l,d,p,f,h,g){void 0===p&&(p="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var m=this;m.ver=2,m.id=t,m[o.az]=(0,n.eN)(c),m.success=u,m.resultCode=l+"",m.type=(0,s.O$)(e,p);var v=(0,i.BB)(e,r,d,a);m.data=(0,s.rr)(e,a)||v.data,m.target=(0,s.O$)(e,v.target),f&&(m.target="".concat(m.target," | ").concat(f)),m[o.I]=(0,s.O$)(e,v[o.I]),m[o.qZ]=(0,s.G9)(e,h),m[o.Ee]=(0,s.NN)(e,g)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}()},39856:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});var n=r(90508),i=r(1895),o=r(10733),s=function(){function e(e,t,r,s,a){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var c=this;c.ver=2,t=t||n.b2,c[i.gU]=(0,o.HS)(e,t),c[i.qZ]=(0,o.G9)(e,s),c[i.Ee]=(0,o.NN)(e,a),r&&(c[i.uO]=r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}()},46979:(e,t,r)=>{"use strict";r.d(t,{NZ:()=>f,U:()=>u,ZM:()=>l,az:()=>p,hq:()=>d,oy:()=>c});var n=r(52631),i=r(1895),o=(0,n.MeC)()||{},s=0,a=[null,null,null,null,null];function c(e){var t=s,r=a,n=r[t];return o.createElement?r[t]||(n=r[t]=o.createElement("a")):n={host:p(e,!0)},n.href=e,++t>=r[i.R5]&&(t=0),s=t,n}function u(e){var t,r=c(e);return r&&(t=r.href),t}function l(e){var t,r=c(e);return r&&(t=r[i.wL]),t}function d(e,t){return e?e.toUpperCase()+" "+t:t}function p(e,t){var r=f(e,t)||"";if(r){var o=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=o&&o[i.R5]>3&&(0,n.HD0)(o[2])&&o[2][i.R5]>0)return o[2]+(o[3]||"")}return r}function f(e,t){var r=null;if(e){var o=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=o&&o[i.R5]>2&&(0,n.HD0)(o[2])&&o[2][i.R5]>0&&(r=o[2]||"",t&&o[i.R5]>2)){var s=(o[1]||"")[i.T1](),a=o[3]||"";("http"===s&&":80"===a||"https"===s&&":443"===a)&&(a=""),r+=a}}return r}},88861:(e,t,r)=>{"use strict";r.d(t,{BB:()=>y,EX:()=>p,HZ:()=>h,I:()=>g,Je:()=>v,QM:()=>_,m:()=>m,wc:()=>f,xx:()=>w,yZ:()=>S});var n=r(52631),i=r(33866),o=r(90508),s=r(36708),a=r(10733),c=r(46979),u=r(1895),l=[o.cA+o.qp,"https://breeze.aimon.applicationinsights.io"+o.qp,"https://dc-int.services.visualstudio.com"+o.qp],d="cid-v1:";function p(e){return-1!==(0,n.UAM)(l,e[u.T1]())}function f(e){d=e}function h(){return d}function g(e,t,r){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[u.ZP])for(var i=0;i<e.correlationHeaderExcludePatterns[u.R5];i++)if(e[u.ZP][i].test(t))return!1;var o=(0,c.oy)(t).host[u.T1]();if(!o||-1===(0,n.MLb)(o,":443")&&-1===(0,n.MLb)(o,":80")||(o=((0,c.NZ)(t,!0)||"")[u.T1]()),(!e||!e.enableCorsCorrelation)&&o&&o!==r)return!1;var s,a=e&&e.correlationHeaderDomains;if(a&&((0,n.tOU)(a,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||t.test(o)})),!s))return!1;var l=e&&e.correlationHeaderExcludedDomains;if(!l||0===l[u.R5])return!0;for(i=0;i<l[u.R5];i++)if(new RegExp(l[i].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(o))return!1;return o&&o[u.R5]>0}function m(e){if(e){var t=v(e,s.C[1]);if(t&&t!==d)return t}}function v(e,t){if(e)for(var r=e[u.w6](","),n=0;n<r[u.R5];++n){var i=r[n][u.w6]("=");if(2===i[u.R5]&&i[0]===t)return i[1]}}function y(e,t,r,n){var i,o=n,s=n;if(t&&t[u.R5]>0){var l=(0,c.oy)(t);if(i=l.host,!o)if(null!=l[u.wL]){var d=0===l.pathname[u.R5]?"/":l[u.wL];"/"!==d.charAt(0)&&(d="/"+d),s=l[u.wL],o=(0,a.O$)(e,r?r+" "+d:d)}else o=(0,a.O$)(e,t)}else i=n,o=n;return{target:i,name:o,data:s}}function _(){var e=(0,n.ra_)();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return(0,n.Ggd)()}function S(e,t){var r=null;return 0===e||0===t||(0,n.lep)(e)||(0,n.lep)(t)||(r=t-e),r}function w(e,t){var r=e||{};return{getName:function(){return r[u.I]},setName:function(e){t&&t.setName(e),r[u.I]=e},getTraceId:function(){return r.traceID},setTraceId:function(e){t&&t.setTraceId(e),(0,i.jN)(e)&&(r.traceID=e)},getSpanId:function(){return r.parentID},setSpanId:function(e){t&&t.setSpanId(e),(0,i.Lc)(e)&&(r.parentID=e)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),r.traceFlags=e}}}},1895:(e,t,r)=>{"use strict";r.d(t,{$t:()=>I,A5:()=>j,Ee:()=>C,G$:()=>g,GW:()=>y,Gb:()=>v,HO:()=>A,I:()=>l,MB:()=>_,MW:()=>c,NE:()=>k,R5:()=>i,RQ:()=>L,T1:()=>o,XI:()=>u,Xo:()=>P,YX:()=>O,ZP:()=>w,az:()=>U,g5:()=>B,gU:()=>d,iU:()=>f,ih:()=>E,jZ:()=>m,oJ:()=>N,ok:()=>s,pj:()=>b,qZ:()=>T,qs:()=>M,r_:()=>a,sO:()=>F,uO:()=>x,us:()=>D,w6:()=>n,wL:()=>S,wp:()=>R,x5:()=>h,yM:()=>p});var n="split",i="length",o="toLowerCase",s="ingestionendpoint",a="toString",c="push",u="removeItem",l="name",d="message",p="count",f="preTriggerDate",h="disabled",g="interval",m="daysOfMonth",v="date",y="getUTCDate",_="stringify",S="pathname",w="correlationHeaderExcludePatterns",E="extensionConfig",b="exceptions",P="parsedStack",T="properties",C="measurements",I="sizeInBytes",O="typeName",x="severityLevel",N="problemGroup",k="isManual",A="CreateFromInterface",R="assembly",D="fileName",j="hasFullStack",M="level",L="method",F="line",U="duration",B="receivedResponse"},13238:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnalyticsPluginIdentifier:()=>B,BreezeChannelIdentifier:()=>U,ConfigurationManager:()=>T,ConnectionStringParser:()=>p.N,ContextTagKeys:()=>C.n,CtxTagKeys:()=>N.Y,DEFAULT_BREEZE_ENDPOINT:()=>h.cA,DEFAULT_BREEZE_PATH:()=>h.qp,Data:()=>b.V,DisabledPropertyName:()=>h.tP,DistributedTracingModes:()=>k.vp,Envelope:()=>g.w,Event:()=>m.j,EventPersistence:()=>k.IN,Exception:()=>v.Pp,Extensions:()=>N.I,HttpMethod:()=>h.w$,Metric:()=>y.j,PageView:()=>_.B,PageViewPerformance:()=>E.y,ProcessLegacy:()=>h.cV,PropertiesPluginIdentifier:()=>F,RemoteDependencyData:()=>S.H,RequestHeaders:()=>f.C,SampleRate:()=>h.fb,SeverityLevel:()=>P._,TelemetryItemCreator:()=>x,ThrottleMgr:()=>d,Trace:()=>w.f,correlationIdCanIncludeCorrelationHeader:()=>n.I,correlationIdGetCorrelationContext:()=>n.m,correlationIdGetCorrelationContextValue:()=>n.Je,correlationIdGetPrefix:()=>n.HZ,correlationIdSetPrefix:()=>n.wc,createDistributedTraceContextFromTrace:()=>n.xx,createDomEvent:()=>j,createOfflineListener:()=>L.g,createTelemetryItem:()=>O,createTraceParent:()=>D.SU,dataSanitizeException:()=>I.GO,dataSanitizeId:()=>I.oO,dataSanitizeInput:()=>I.oN,dataSanitizeKey:()=>I.AL,dataSanitizeKeyAndAddUniqueness:()=>I.X0,dataSanitizeMeasurements:()=>I.NN,dataSanitizeMessage:()=>I.HS,dataSanitizeProperties:()=>I.G9,dataSanitizeString:()=>I.O$,dataSanitizeUrl:()=>I.rr,dateTimeUtilsDuration:()=>n.yZ,dateTimeUtilsNow:()=>n.QM,dsPadNumber:()=>I.ev,findW3cTraceParent:()=>D.lq,formatTraceParent:()=>D.aR,getExtensionByName:()=>A.y1,isBeaconApiSupported:()=>R.MF,isCrossOriginError:()=>A.uI,isInternalApplicationInsightsEndpoint:()=>n.EX,isSampledFlag:()=>D.Pn,isValidSpanId:()=>D.Lc,isValidTraceId:()=>D.jN,isValidTraceParent:()=>D.J6,msToTimeSpan:()=>A.eN,parseConnectionString:()=>p.X,parseTraceParent:()=>D.j_,strNotSpecified:()=>h.b2,stringToBoolOrDefault:()=>A.CO,urlGetAbsoluteUrl:()=>M.U,urlGetCompleteUrl:()=>M.hq,urlGetPathName:()=>M.ZM,urlParseFullHost:()=>M.NZ,urlParseHost:()=>M.az,urlParseUrl:()=>M.oy,utlCanUseLocalStorage:()=>u.d4,utlCanUseSessionStorage:()=>u.D3,utlDisableStorage:()=>u.B1,utlEnableStorage:()=>u.MB,utlGetLocalStorage:()=>u.LN,utlGetSessionStorage:()=>u.Vd,utlGetSessionStorageKeys:()=>u.lC,utlRemoveSessionStorage:()=>u.ll,utlRemoveStorage:()=>u.KX,utlSetLocalStorage:()=>u.TY,utlSetSessionStorage:()=>u.yp,utlSetStoragePrefix:()=>u.mh});var n=r(88861),i=r(52631),o=r(38942),s=r(98769),a=r(21328),c=r(25778),u=r(71464),l=r(1895),d=function(e,t){var r,n,d,p,f,h,g,m=this,v=!1,y=!1;function _(e,t,i,o){if(v){var s=function(e){try{var t=S(e);return(0,c.az)(1e6)<=t.limit.samplingRate}catch(e){}return!1}(e);if(!s)return;var a=S(e),u=O(e),d=E(a,r,u),p=!1,h=0,g=x(e);try{d&&!g?(h=Math.min(a.limit.maxSendNumber,u[l.yM]+1),u[l.yM]=0,p=!0,f[e]=!0,u[l.iU]=new Date):(f[e]=d,u[l.yM]+=1);var m=b(e);T(n,m,u);for(var y=0;y<h;y++)I(e,n,t,i)}catch(e){}return{isThrottled:p,throttleNum:h}}return o&&N(e)[l.MW]({msgID:e,message:t,severity:i}),null}function S(e){return d[e]||d[109]}function w(e,t){var r,n,o,s,a;try{var c=t||{},u={};u[l.x5]=!!c[l.x5];var p=c[l.G$]||{};y=(null==p?void 0:p.daysOfMonth)&&(null==p?void 0:p.daysOfMonth[l.R5])>0,u[l.G$]=(s=null===(o=(o=p)||{})||void 0===o?void 0:o.monthInterval,a=null==o?void 0:o.dayInterval,(0,i.lep)(s)&&(0,i.lep)(a)&&(o.monthInterval=3,y||(o[l.jZ]=[28],y=!0)),o={monthInterval:null==o?void 0:o.monthInterval,dayInterval:null==o?void 0:o.dayInterval,daysOfMonth:null==o?void 0:o.daysOfMonth});var f={samplingRate:(null===(r=c.limit)||void 0===r?void 0:r.samplingRate)||100,maxSendNumber:(null===(n=c.limit)||void 0===n?void 0:n.maxSendNumber)||1};u.limit=f,d[e]=u}catch(e){}}function E(e,t,r){if(e&&!e[l.x5]&&t&&(0,s.BX)(r)){var n=P(),o=r[l.Gb],a=e[l.G$],c=1;if(null==a?void 0:a.monthInterval){var u=12*(n.getUTCFullYear()-o.getUTCFullYear())+n.getUTCMonth()-o.getUTCMonth();c=C(a.monthInterval,0,u)}var d=1;if(y)d=(0,i.UAM)(a[l.jZ],n[l.GW]());else if(null==a?void 0:a.dayInterval){var p=Math.floor((n.getTime()-o.getTime())/864e5);d=C(a.dayInterval,0,p)}return c>=0&&d>=0}return!1}function b(e,t){var r=(0,s.BX)(t)?t:"";return e?"appInsightsThrottle"+r+"-"+e:null}function P(e){try{if(!e)return new Date;var t=new Date(e);if(!isNaN(t.getDate()))return t}catch(e){}return null}function T(e,t,r){try{return(0,u.TY)(e,t,(0,i.ndY)(JSON[l.MB](r)))}catch(e){}return!1}function C(e,t,r){return e<=0?1:r>=t&&(r-t)%e==0?Math.floor((r-t)/e)+1:-1}function I(e,t,r,n){(0,o.kP)(t,n||1,e,r)}function O(e){try{var t=p[e];if(!t){var r=b(e,h);t=function(e,t,r){try{var n={date:P(),count:0};if(e){var i=JSON.parse(e);return{date:P(i[l.Gb])||n[l.Gb],count:i[l.yM]||n[l.yM],preTriggerDate:i.preTriggerDate?P(i[l.iU]):void 0}}return T(t,r,n),n}catch(e){}return null}((0,u.LN)(n,r),n,r),p[e]=t}return p[e]}catch(e){}return null}function x(e){var t=f[e];if((0,i.lep)(t)){t=!1;var r=O(e);r&&(t=function(e){try{if(e){var t=new Date;return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e[l.GW]()===t[l.GW]()}}catch(e){}return!1}(r[l.iU])),f[e]=t}return f[e]}function N(e){return g=g||{},(0,i.lep)(g[e])&&(g[e]=[]),g[e]}n=(0,o.vH)(e),f={},p={},g={},d={},w(109),h=(0,s.BX)(t)?t:"",e.addUnloadHook((0,a.k)(e.config,(function(e){var t=e.cfg;r=(0,u.d4)();var n=t.throttleMgrCfg||{};(0,i.rWU)(n,(function(e,t){w(parseInt(e),t)}))}))),m._getDbgPlgTargets=function(){return[g]},m.getConfig=function(){return d},m.canThrottle=function(e){var t=O(e);return E(S(e),r,t)},m.isTriggered=function(e){return x(e)},m.isReady=function(){return v},m.flush=function(e){try{var t=N(e);if(t&&t[l.R5]>0){var r=t.slice(0);return g[e]=[],(0,i.tOU)(r,(function(e){_(e.msgID,e[l.gU],e.severity,!1)})),!0}}catch(e){}return!1},m.flushAll=function(){try{if(g){var e=!0;return(0,i.rWU)(g,(function(t){var r=m.flush(parseInt(t));e=e&&r})),e}}catch(e){}return!1},m.onReadyState=function(e,t){return void 0===t&&(t=!0),(v=!!(0,i.lep)(e)||e)&&t?m.flushAll():null},m.sendMessage=function(e,t,r){return _(e,t,r,!0)}},p=r(80673),f=r(36708),h=r(90508),g=r(15922),m=r(96938),v=r(94045),y=r(8829),_=r(92642),S=r(84124),w=r(39856),E=r(74486),b=r(57979),P=r(88967),T=function(){function e(){}return e.getConfig=function(e,t,r,n){var o;return void 0===n&&(n=!1),o=r&&e[l.ih]&&e[l.ih][r]&&!(0,i.lep)(e[l.ih][r][t])?e[l.ih][r][t]:e[t],(0,i.lep)(o)?n:o},e}(),C=r(28266),I=r(10733);function O(e,t,r,n,o,a){var c;r=(0,I.O$)(n,r)||h.b2,((0,i.lep)(e)||(0,i.lep)(t)||(0,i.lep)(r))&&(0,i._yM)("Input doesn't contain all required fields");var u="";e[h.ly]&&(u=e[h.ly],delete e[h.ly]);var d=((c={})[l.I]=r,c.time=(0,s.Y6)(new Date),c.iKey=u,c.ext=a||{},c.tags=[],c.data={},c.baseType=t,c.baseData=e,c);return(0,i.lep)(o)||(0,i.rWU)(o,(function(e,t){d.data[e]=t})),d}var x=function(){function e(){}return e.create=O,e}(),N=r(21874),k=r(20200),A=r(49722),R=r(49233),D=r(33866);function j(e){var t=null;if((0,i.mf2)(Event))t=new Event(e);else{var r=(0,i.MeC)();r&&r.createEvent&&(t=r.createEvent("Event")).initEvent(e,!0,!0)}return t}var M=r(46979),L=r(35358),F="AppInsightsPropertiesPlugin",U="AppInsightsChannelPlugin",B="ApplicationInsightsAnalytics"},7082:(e,t,r)=>{"use strict";r.d(t,{bK:()=>s,gI:()=>a,up:()=>c});var n=r(52631),i=r(7372);function o(e,t,r){return!e&&(0,n.lep)(e)?t:(0,n.jnD)(e)?e:"true"===(0,n.XCJ)(e)[i.D7]()}function s(e){return{mrg:!0,v:e}}function a(e,t,r){return{fb:r,isVal:e,v:t}}function c(e,t){return{fb:t,set:o,v:!!e}}},14619:(e,t,r)=>{"use strict";r.d(t,{e:()=>c});var n=r(52631),i=r(7372);function o(e){return e&&(0,n.Kn2)(e)&&(e.isVal||e.fb||(0,n.wj3)(e,"v")||(0,n.wj3)(e,"mrg")||(0,n.wj3)(e,"ref")||e.set)}function s(e,t,r){var o,s=r.dfVal||n.$KD;if(t&&r.fb){var a=r.fb;(0,n.kJL)(a)||(a=[a]);for(var c=0;c<a[i.R5];c++){var u=a[c],l=t[u];if(s(l)?o=l:e&&(s(l=e.cfg[u])&&(o=l),e.set(e.cfg,(0,n.XCJ)(u),l)),s(o))break}}return!s(o)&&s(r.v)&&(o=r.v),o}function a(e,t,r){var c,u=r;return r&&o(r)&&(u=s(e,t,r)),u&&(o(u)&&(u=a(e,t,u)),(0,n.kJL)(u)?(c=[])[i.R5]=u[i.R5]:(0,n.POo)(u)&&(c={}),c&&((0,n.rWU)(u,(function(r,n){n&&o(n)&&(n=a(e,t,n)),c[r]=n})),u=c)),u}function c(e,t,r,u){var l,d,p,f,h,g,m,v,y=u;o(y)?(l=y.isVal,d=y.set,g=y[i.aV],m=y[i.vd],f=y.mrg,!(h=y.ref)&&(0,n.o8e)(h)&&(h=!!f),p=s(e,t,y)):p=u,m&&e[i.vd](t,r);var _=!0,S=t[r];!S&&(0,n.lep)(S)||(v=S,_=!1,l&&v!==p&&!l(v)&&(v=p,_=!0),d&&(_=(v=d(v,p,t))===p)),_?v=p?a(e,t,p):p:((0,n.POo)(v)||(0,n.kJL)(p))&&f&&p&&((0,n.POo)(p)||(0,n.kJL)(p))&&(0,n.rWU)(p,(function(t,r){c(e,v,t,r)})),e.set(t,r,v),h&&e.ref(t,r),g&&e[i.aV](t,r)}},21328:(e,t,r)=>{"use strict";r.d(t,{o:()=>_,k:()=>S});var n,i=r(52631),o=r(73831),s=r(40370),a=r(7372),c=r(14619),u=r(60388),l=["push","pop","shift","unshift","splice"],d=function(e,t,r,n){e&&e[a.v1](3,108,"".concat(r," [").concat(t,"] failed - ")+(0,i.eUe)(n))};function p(e,t){var r=(0,i.Sn2)(e,t);return r&&r.get}function f(e,t,r,n){if(t){var o=p(t,r);o&&o[e.prop]?t[r]=n:function(e,t,r,n){var o={n:r,h:[],trk:function(t){t&&t.fn&&(-1===(0,i.UAM)(o.h,t)&&o.h[a.MW](t),e.trk(t,o))},clr:function(e){var t=(0,i.UAM)(o.h,e);-1!==t&&o.h[a.cb](t,1)}},c=!0,l=!1;function h(){c&&(l=l||(0,u.QT)(h,e,n),n&&!n[u.iM]&&l&&(n=g(e,n,r,"Converting")),c=!1);var t=e.act;return t&&o.trk(t),n}h[e.prop]={chng:function(){e.add(o)}},(0,i.g$V)(t,o.n,{g:h,s:function(m){if(n!==m){h[e.ro]&&!e.upd&&(0,u.bh)("["+r+"] is read-only:"+(0,i.eUe)(t)),c&&(l=l||(0,u.QT)(h,e,n),c=!1);var v=l&&h[e.rf];if(l)if(v){(0,i.rWU)(n,(function(e){n[e]=m?m[e]:s.c8}));try{(0,i.rWU)(m,(function(t,r){f(e,n,t,r)})),m=n}catch(t){d((e.hdlr||{})[a.eZ],r,"Assigning",t),l=!1}}else n&&n[u.iM]&&(0,i.rWU)(n,(function(t){var r=p(n,t);if(r){var i=r[e.prop];i&&i.chng()}}));if(m!==n){var y=m&&(0,u.QT)(h,e,m);!v&&y&&(m=g(e,m,r,"Converting")),n=m,l=y}e.add(o)}}})}(e,t,r,n)}return t}function h(e,t,r,n){if(t){var i=p(t,r),o=i&&!!i[e.prop],s=n&&n[0],c=n&&n[1],l=n&&n[2];if(!o){if(l)try{(0,u.qx)(t)}catch(t){d((e.hdlr||{})[a.eZ],r,"Blocking",t)}try{f(e,t,r,t[r]),i=p(t,r)}catch(t){d((e.hdlr||{})[a.eZ],r,"State",t)}}s&&(i[e.rf]=s),c&&(i[e.ro]=c),l&&(i[e.blkVal]=!0)}return t}function g(e,t,r,n){try{(0,i.rWU)(t,(function(r,n){f(e,t,r,n)})),t[u.iM]||((0,i.iUz)(t,u.iM,{get:function(){return e[a.Hp]}}),function(e,t,r){(0,i.kJL)(t)&&(0,i.tOU)(l,(function(n){var i=t[n];t[n]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var s=i[a.ZV](this,n);return g(e,t,r,"Patching"),s}}))}(e,t,r))}catch(t){d((e.hdlr||{})[a.eZ],r,n,t)}return t}var m="[[ai_",v="]]";function y(e,t,r){var s,l=(0,u.Rw)(t);if(l)return l;var p,y=(0,o.J)("dyncfg",!0),_=t&&!1!==r?t:(0,u.$1)(t),S=((s={uid:null,cfg:_})[a.eZ]=e,s[a.jW]=function(){p[a.jW]()},s.set=function(t,r,n){try{t=f(p,t,r,n)}catch(t){d(e,r,"Setting value",t)}return t[r]},s[a.Ag]=function(e,t){return t&&(0,i.rWU)(t,(function(t,r){(0,c.e)(S,e,t,r)})),e},s[a.DI]=function(e){return function(e,t){var r={fn:t,rm:function(){r.fn=null,e=null,t=null}};return(0,i.g$V)(r,"toJSON",{v:function(){return"WatcherHandler"+(r.fn?"":"[X]")}}),e.use(r,t),r}(p,e)},s.ref=function(e,t){var r;return h(p,e,t,(r={},r[0]=!0,r))[t]},s[a.aV]=function(e,t){var r;return h(p,e,t,(r={},r[1]=!0,r))[t]},s[a.vd]=function(e,t){var r;return h(p,e,t,(r={},r[2]=!0,r))[t]},s._block=function(e,t){p.use(null,(function(r){var n=p.upd;try{(0,i.o8e)(t)||(p.upd=t),e(r)}finally{p.upd=n}}))},s);return(0,i.g$V)(S,"uid",{c:!1,e:!1,w:!1,v:y}),g(p=function(e){var t,r,o=(0,i.eML)(m+"get"+e.uid+v),s=(0,i.eML)(m+"ro"+e.uid+v),c=(0,i.eML)(m+"rf"+e.uid+v),u=(0,i.eML)(m+"blkVal"+e.uid+v),l=(0,i.eML)(m+"dtl"+e.uid+v),d=null,p=null;function f(t,n){var o=r.act;try{r.act=t,t&&t[l]&&((0,i.tOU)(t[l],(function(e){e.clr(t)})),t[l]=[]),n({cfg:e.cfg,set:e.set.bind(e),setDf:e[a.Ag].bind(e),ref:e.ref.bind(e),rdOnly:e[a.aV].bind(e)})}catch(t){var s=e[a.eZ];throw s&&s[a.v1](1,107,(0,i.eUe)(t)),t}finally{r.act=o||null}}function h(){if(d){var e=d;d=null,p&&p[a.SG](),p=null;var t=[];if((0,i.tOU)(e,(function(e){if(e&&(e[l]&&((0,i.tOU)(e[l],(function(t){t.clr(e)})),e[l]=null),e.fn))try{f(e,e.fn)}catch(e){t[a.MW](e)}})),d)try{h()}catch(e){t[a.MW](e)}t[a.R5]>0&&function(e,t){n||(n=(0,i.cHs)("AggregationError",(function(e,t){t[a.R5]>1&&(e.errors=t[1])})));var r="Watcher error(s): ";throw(0,i.tOU)(t,(function(e,t){r+="\n".concat(t," > ").concat((0,i.eUe)(e))})),new n(r,t||[])}(0,t)}}return(t={prop:o,ro:s,rf:c})[a.vd]=u,t[a.Hp]=e,t.add=function(e){if(e&&e.h[a.R5]>0){d||(d=[]),p||(p=(0,i.tXR)((function(){p=null,h()}),0));for(var t=0;t<e.h[a.R5];t++){var r=e.h[t];r&&-1===(0,i.UAM)(d,r)&&d[a.MW](r)}}},t[a.jW]=h,t.use=f,t.trk=function(e,t){if(e){var r=e[l]=e[l]||[];-1===(0,i.UAM)(r,t)&&r[a.MW](t)}},r=t}(S),_,"config","Creating"),S}function _(e,t,r,n){var i=y(r,e||{},n);return t&&i[a.Ag](i.cfg,t),i}function S(e,t,r){var n=e[u.iM]||e;return!n.cfg||n.cfg!==e&&n.cfg[u.iM]!==n?(function(e,t){e?(e[a.pQ](t),e[a.v1](2,108,t)):(0,u.bh)(t)}(r,s.XS+(0,i.eUe)(e)),_(e,null,r)[a.DI](t)):n[a.DI](t)}},60388:(e,t,r)=>{"use strict";r.d(t,{$1:()=>c,QT:()=>p,Rw:()=>u,bh:()=>f,iM:()=>o,qx:()=>l,sP:()=>d});var n=r(52631),i=r(7372),o=(0,n.dvW)("[[ai_dynCfg_1]]"),s=(0,n.dvW)("[[ai_blkDynCfg_1]]"),a=(0,n.dvW)("[[ai_frcDynCfg_1]]");function c(e){var t;return e&&((0,n.kJL)(e)?(t=[])[i.R5]=e[i.R5]:(0,n.POo)(e)&&(t={}),t)?((0,n.rWU)(e,(function(e,r){t[e]=c(r)})),t):e}function u(e){if(e){var t=e[o]||e;if(t.cfg&&(t.cfg===e||t.cfg[o]===t))return t}return null}function l(e){if(e&&((0,n.POo)(e)||(0,n.kJL)(e)))try{e[s]=!0}catch(e){}return e}function d(e){if(e)try{e[a]=!0}catch(e){}return e}function p(e,t,r){var i=!1;return r&&!e[t.blkVal]&&((i=r[a])||r[s]||(i=(0,n.POo)(r)||(0,n.kJL)(r))),i}function f(e){(0,n.ZU2)("InvalidAccess:"+e)}},20488:(e,t,r)=>{"use strict";r.d(t,{B:()=>i,c:()=>o});var n=r(52631),i=n.$S8,o=n.Oz1},13657:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});var n=r(20488),i=(0,n.B)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});(0,n.B)({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})},96182:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var n=(0,r(20488).B)({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})},69451:(e,t,r)=>{"use strict";r.d(t,{F:()=>R});var n,i=r(2012),o=r(14635),s=r(90862),a=r(52631),c=r(21328),u=r(96182),l=r(7372),d=r(12187),p=r(27970),f=r(42450),h=r(73831),g=r(89266),m=r(38942),v=r(98769),y=r(40370),_=r(51016),S=r(27019),w=r(38570),E=r(77076),b=function(e){function t(){var r,n,i=e.call(this)||this;function s(){r=0,n=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,s(),(0,o.Z)(t,i,(function(e,t){e.addTelemetryInitializer=function(e){return function(e,t,r){var n={id:t,fn:r};return(0,a.W5k)(e,n),{remove:function(){(0,a.tOU)(e,(function(t,r){if(t.id===n.id)return e[l.cb](r,1),-1}))}}}(n,r++,e)},e[y.hL]=function(t,r){(function(e,t,r){for(var n=!1,i=e[l.R5],o=0;o<i;++o){var s=e[o];if(s)try{if(!1===s.fn[l.ZV](null,[t])){n=!0;break}}catch(e){(0,m.kP)(r,2,64,"Telemetry initializer failed: "+(0,v.jj)(e),{exception:(0,a.eUe)(e)},!0)}}return!n})(n,t,r?r[l.mc]():e[l.mc]())&&e[l.uL](t,r)},e[l.F3]=function(){s()}})),i}return(0,i.ne)(t,e),t.__ieDyn=1,t}(r(18264).i),P=r(46096),T=r(19925),C="Plugins must provide initialize method",I="SDK is still unloading...",O=(0,a.Hef)(((n={cookieCfg:{}})[y.js]={rdOnly:!0,ref:!0,v:[]},n[y.Z]={rdOnly:!0,ref:!0,v:[]},n[y.Zh]={ref:!0,v:{}},n[y.DN]=y.c8,n.loggingLevelConsole=0,n.diagnosticLogInterval=y.c8,n));function x(e,t){return new S.Jk(t)}function N(e,t){var r=!1;return(0,a.tOU)(t,(function(t){if(t===e)return r=!0,-1})),r}function k(e,t,r,n){r&&(0,a.rWU)(r,(function(r,i){n&&(0,a.POo)(i)&&(0,a.POo)(t[r])&&k(e,t[r],i,n),n&&(0,a.POo)(i)&&(0,a.POo)(t[r])?k(e,t[r],i,n):e.set(t,r,i)}))}function A(e,t){var r=null,n=-1;return(0,a.tOU)(e,(function(e,i){if(e.w===t)return r=e,n=i,-1})),{i:n,l:r}}var R=function(){function e(){var t,r,n,R,D,j,M,L,F,U,B,V,$,q,H,z,W,G,K,X,J,Q,Y,Z,ee,te,re,ne,ie,oe,se,ae;(0,o.Z)(e,this,(function(e){function o(){ie=!0,(0,a.lep)(J)?(te=u.t[l.Vv],(0,m.kP)(n,1,112,"ikey can't be resolved from promises")):te=u.t.ACTIVE,ce()}function ce(){r&&(e.releaseQueue(),e[l.T1]())}function ue(e){return oe&&oe[l.jP]||ae||(e||n&&n.queue[l.R5]>0)&&(se||(se=!0,Ee(t[l.DI]((function(e){var t=e.cfg.diagnosticLogInterval;t&&t>0||(t=1e4);var r=!1;oe&&(r=oe[l.jP],oe[l.SG]()),(oe=(0,a._w8)(ve,t)).unref(),oe[l.jP]=r})))),oe[l.jP]=!0),oe}function le(){var e={};Z=[];var t=function(t){t&&(0,a.tOU)(t,(function(t){if(t[l.pZ]&&t[l.PA]&&!e[t.identifier]){var r=t[l.pZ]+"="+t[l.PA];Z[l.MW](r),e[t.identifier]=t}}))};t(V),B&&(0,a.tOU)(B,(function(e){t(e)})),t(U)}function de(){r=!1,(t=(0,c.o)({},O,e[l.eZ])).cfg[l.KW]=1,(0,a.g$V)(e,"config",{g:function(){return t.cfg},s:function(t){e.updateCfg(t,!1)}}),(0,a.g$V)(e,"pluginVersionStringArr",{g:function(){return Z||le(),Z}}),(0,a.g$V)(e,"pluginVersionString",{g:function(){return ee||(Z||le(),ee=Z.join(";")),ee||y.qS}}),(0,a.g$V)(e,"logger",{g:function(){return n||(n=new m.AQ(t.cfg),t[l.eZ]=n),n},s:function(e){t[l.eZ]=e,n!==e&&((0,d.e)(n,!1),n=e)}}),e[l.eZ]=new m.AQ(t.cfg),Y=[];var i=e.config[y.js]||[];i.splice(0,i[l.R5]),(0,a.W5k)(i,Y),q=new b,R=[],(0,d.e)(D,!1),D=null,j=null,M=null,(0,d.e)(L,!1),L=null,F=null,U=[],B=null,V=null,$=!1,H=null,z=(0,h.J)("AIBaseCore",!0),W=(0,P.Y)(),X=null,J=null,G=(0,T.t)(),Q=[],ee=null,Z=null,ae=!1,oe=null,se=!1,te=0,re=null,ne=null,ie=!1}function pe(){var r=(0,w.CD)(ge(),t.cfg,e);return r[l.Fc](ue),r}function fe(t){var r=function(e,t,r){var n,i=[],o=[],s={};return(0,a.tOU)(r,(function(r){((0,a.lep)(r)||(0,a.lep)(r[l.VL]))&&(0,a._yM)(C);var n=r[y.yi],c=r[l.pZ];r&&n&&((0,a.lep)(s[n])?s[n]=c:(0,m.jV)(e,"Two extensions have same priority #"+n+" - "+s[n]+", "+c)),!n||n<t?i[l.MW](r):o[l.MW](r)})),(n={})[y.oV]=i,n[y.Z]=o,n}(e[l.eZ],p.A,U);F=null,ee=null,Z=null,V=(B||[])[0]||[],V=(0,E.AA)((0,a.W5k)(V,r[y.Z]));var n=(0,a.W5k)((0,E.AA)(r[y.oV]),V);Y=(0,a.FL5)(n);var i=e.config[y.js]||[];i.splice(0,i[l.R5]),(0,a.W5k)(i,Y);var o=pe();V&&V[l.R5]>0&&(0,E.bP)(o[l.zV](V),n),(0,E.bP)(o,n),t&&_e(t)}function he(e){var t=null,r=null,n=[];return(0,a.tOU)(Y,(function(t){if(t[l.pZ]===e&&t!==q)return r=t,-1;t.getChannel&&n[l.MW](t)})),!r&&n[l.R5]>0&&(0,a.tOU)(n,(function(t){if(!(r=t.getChannel(e)))return-1})),r&&(t={plugin:r,setEnabled:function(e){(0,E.OY)(r)[y.mE]=!e},isEnabled:function(){var e=(0,E.OY)(r);return!e[l.fi]&&!e[y.mE]},remove:function(e,t){var n;void 0===e&&(e=!0);var i=[r],o=((n={reason:1})[l.d]=e,n);me(i,o,(function(e){e&&fe({reason:32,removed:i}),t&&t(e)}))}}),t}function ge(){if(!F){var r=(Y||[]).slice();-1===(0,a.UAM)(r,q)&&r[l.MW](q),F=(0,w.jV)((0,E.AA)(r),t.cfg,e)}return F}function me(r,n,i){if(r&&r[l.R5]>0){var o=(0,w.jV)(r,t.cfg,e),s=(0,w.Bt)(o,e);s[l.Fc]((function(){var e=!1,t=[];(0,a.tOU)(U,(function(n,i){N(n,r)?e=!0:t[l.MW](n)})),U=t,ee=null,Z=null;var n=[];B&&((0,a.tOU)(B,(function(t,i){var o=[];(0,a.tOU)(t,(function(t){N(t,r)?e=!0:o[l.MW](t)})),n[l.MW](o)})),B=n),i&&i(e),ue()})),s[l.uL](n)}else i(!1)}function ve(){if(n&&n.queue){var t=n.queue.slice(0);n.queue[l.R5]=0,(0,a.tOU)(t,(function(t){var r,n=((r={})[l.I]=H||"InternalMessageId: "+t[l.Gc],r[l.fm]=J,r[l.Z_]=(0,v.Y6)(new Date),r.baseType=m.lQ.dataType,r.baseData={message:t[l.gU]},r);e.track(n)}))}}function ye(e,t,r,n){var i=1,o=!1,s=null;function c(){i--,o&&0===i&&(s&&s[l.SG](),s=null,t&&t(o),t=null)}return n=n||5e3,V&&V[l.R5]>0&&pe()[l.zV](V).iterate((function(t){if(t.flush){i++;var o=!1;t.flush(e,(function(){o=!0,c()}),r)||o||(e&&null==s?s=(0,a.tXR)((function(){s=null,c()}),n):c())}})),o=!0,c(),!0}function _e(t){var r=(0,w.xy)(ge(),e);r[l.Fc](ue),e._updateHook&&!0===e._updateHook(r,t)||r[l.uL](t)}function Se(t){var r=e[l.eZ];r?((0,m.kP)(r,2,73,t),ue()):(0,a._yM)(t)}function we(t){var r=e[l.tb]();r&&r[y.$F]([t],2)}function Ee(e){G.add(e)}de(),e._getDbgPlgTargets=function(){return[Y,R]},e[l.yl]=function(){return r},e.activeStatus=function(){return te},e._setPendingStatus=function(){te=3},e[l.VL]=function(d,p,f,h){var _;$&&(0,a._yM)(I),e[l.yl]()&&(0,a._yM)("Core cannot be initialized more than once"),t=(0,c.o)(d,O,f||e[l.eZ],!1),d=t.cfg,Ee(t[l.DI]((function(e){var t=e.cfg;if(3!==te){ne=t.initInMemoMaxSize||100;var i=t[l.p$],c=t.endpointUrl;if((0,a.lep)(i)){J=null,te=u.t[l.Vv];var p="Please provide instrumentation key";r?((0,m.kP)(n,1,100,p),ce()):(0,a._yM)(p)}else{var f=[];if((0,a.y8_)(i)?(f[l.MW](i),J=null):J=i,(0,a.y8_)(c)?(f[l.MW](c),re=null):re=c,f[l.R5]){ie=!1,te=3;var h=(0,v.BX)(t.initTimeOut)?t.initTimeOut:5e4,g=(0,s.Zu)(f);(0,a.tXR)((function(){ie||o()}),h),(0,s.Zm)(g,(function(e){try{if(ie)return;if(!e.rejected){var t=e[l.V_];if(t&&t[l.R5]){var r=t[0];if(J=r&&r[l.V_],t[l.R5]>1){var n=t[1];re=n&&n[l.V_]}}J&&(d[l.p$]=J,d.endpointUrl=re)}o()}catch(e){ie||o()}}))}else o();var _=e.ref(e.cfg,y.Zh);(0,a.rWU)(_,(function(t){e.ref(_,t)}))}}}))),K=function(e,t,r,n){return t.add(e[l.DI]((function(e){var t=e.cfg.disableDbgExt;!0===t&&n&&(r[l.nG](n),n=null),r&&!n&&!0!==t&&(n=(0,g.p)(e.cfg),r[l.g](n))}))),n}(t,G,(D=h)&&e[l.tb](),K),Ee(t[l.DI]((function(t){if(t.cfg.enablePerfMgr){var r=t.cfg[y.DN];_!==r&&(r||(r=x),(0,v.qK)(t.cfg,y.DN,r),_=r,M=null),j||M||!(0,a.mf2)(r)||(M=r(e,e[l.tb]()))}else M=null,_=null}))),e[l.eZ]=f;var S=d[y.js];if((U=[])[l.MW].apply(U,(0,i.$h)((0,i.$h)([],p,!1),S,!1)),B=d[y.Z],fe(null),V&&0!==V[l.R5]||(0,a._yM)("No "+y.Z+" available"),B&&B[l.R5]>1){var w=e[l.TO]("TeeChannelController");w&&w.plugin||(0,m.kP)(n,1,28,"TeeChannel required")}!function(e,t,r){(0,a.tOU)(t,(function(t){var n=(0,c.k)(e,t.w,r);delete t.w,t.rm=function(){n.rm()}}))}(d,Q,n),Q=null,r=!0,te===u.t.ACTIVE&&ce()},e.getChannels=function(){var e=[];return V&&(0,a.tOU)(V,(function(t){e[l.MW](t)})),(0,a.FL5)(e)},e.track=function(t){(0,S.Lm)(e[y.kl](),(function(){return"AppInsightsCore:track"}),(function(){null===t&&(we(t),(0,a._yM)("Invalid telemetry item")),!t[l.I]&&(0,a.lep)(t[l.I])&&(we(t),(0,a._yM)("telemetry name required")),t[l.fm]=t[l.fm]||J,t[l.Z_]=t[l.Z_]||(0,v.Y6)(new Date),t.ver=t.ver||"4.0",!$&&e[l.yl]()&&te===u.t.ACTIVE?pe()[l.uL](t):te!==u.t[l.Vv]&&R[l.R5]<=ne&&R[l.MW](t)}),(function(){return{item:t}}),!t.sync)},e[l.fs]=pe,e[l.tb]=function(){return D||(D=new _.f(t.cfg),e._notificationManager=D),D},e[l.g]=function(t){e.getNotifyMgr()[l.g](t)},e[l.nG]=function(e){D&&D[l.nG](e)},e.getCookieMgr=function(){return L||(L=(0,f.Nz)(t.cfg,e[l.eZ])),L},e.setCookieMgr=function(e){L!==e&&((0,d.e)(L,!1),L=e)},e[y.kl]=function(){return j||M||(0,S.j5)()},e.setPerfMgr=function(e){j=e},e.eventCnt=function(){return R[l.R5]},e.releaseQueue=function(){if(r&&R[l.R5]>0){var e=R;R=[],2===te?(0,a.tOU)(e,(function(e){e[l.fm]=e[l.fm]||J,pe()[l.uL](e)})):(0,m.kP)(n,2,20,"core init status is not active")}},e[l.T1]=function(e){return H=e||null,ae=!1,oe&&oe[l.SG](),ue(!0)},e[l.LS]=function(){ae=!0,oe&&oe[l.SG](),ve()},(0,v.Vb)(e,(function(){return q}),["addTelemetryInitializer"]),e[l.c7]=function(t,i,o){var c;void 0===t&&(t=!0),r||(0,a._yM)("SDK is not initialized"),$&&(0,a._yM)(I);var u,p=((c={reason:50})[l.d]=t,c.flushComplete=!1,c);t&&!i&&(u=(0,s.wv)((function(e){i=e})));var f=(0,w.Bt)(ge(),e);function h(t){p.flushComplete=t,$=!0,W.run(f,p),e[l.LS](),f[l.uL](p)}return f[l.Fc]((function(){G.run(e[l.eZ]),(0,d.G)([L,D,n],t,(function(){de(),i&&i(p)}))}),e),ve(),ye(t,h,6,o)||h(!1),u},e[l.TO]=he,e.addPlugin=function(e,t,r,n){if(!e)return n&&n(!1),void Se(C);var i=he(e[l.pZ]);if(i&&!t)return n&&n(!1),void Se("Plugin ["+e[l.pZ]+"] is already loaded!");var o={reason:16};function s(t){U[l.MW](e),o.added=[e],fe(o),n&&n(!0)}if(i){var a=[i.plugin];me(a,{reason:2,isAsync:!!r},(function(e){e?(o.removed=a,o.reason|=32,s()):n&&n(!1)}))}else s()},e.updateCfg=function(r,n){var i;if(void 0===n&&(n=!0),e[l.yl]()){i={reason:1,cfg:t.cfg,oldCfg:(0,a.ZBL)({},t.cfg),newConfig:(0,a.ZBL)({},r),merge:n},r=i.newConfig;var o=t.cfg;r[y.js]=o[y.js],r[y.Z]=o[y.Z]}t._block((function(e){var t=e.cfg;k(e,t,r,n),n||(0,a.rWU)(t,(function(n){(0,a.wj3)(r,n)||e.set(t,n,y.c8)})),e[l.Ag](t,O)}),!0),t[l.jW](),i&&_e(i)},e.evtNamespace=function(){return z},e.flush=ye,e.getTraceCtx=function(e){return X||(X=(0,E.Yn)()),X},e.setTraceCtx=function(e){X=e||null},e.addUnloadHook=Ee,(0,v.Oi)(e,"addUnloadCb",(function(){return W}),"add"),e.onCfgChange=function(n){var i,o,s,u;return r?i=(0,c.k)(t.cfg,n,e[l.eZ]):((u=A(o=Q,s=n).l)||(u={w:s,rm:function(){var e=A(o,s);-1!==e.i&&o[l.cb](e.i,1)}},o[l.MW](u)),i=u),function(e){return(0,a.g$V)({rm:function(){e.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(e)+">"}})}(i)},e.getWParam=function(){return(0,a.Nvg)()||t.cfg.enableWParam?0:-1}}))}return e.__ieDyn=1,e}()},12187:(e,t,r)=>{"use strict";r.d(t,{G:()=>a,e:()=>s});var n=r(90862),i=r(52631),o=r(7372);function s(e,t){if(e&&e[o.c7])return e[o.c7](t)}function a(e,t,r){var o;return r||(o=(0,n.wv)((function(e){r=e}))),e&&(0,i.xAH)(e)>0?(0,n.Zm)(s(e[0],t),(function(){a((0,i.K7g)(e,1),t,r)})):r(),o}},18264:(e,t,r)=>{"use strict";r.d(t,{i:()=>m});var n,i=r(14635),o=r(52631),s=r(21328),a=r(7372),c=r(38942),u=r(98769),l=r(40370),d=r(38570),p=r(46096),f=r(19925),h="getPlugin",g=((n={})[l.Zh]={isVal:u.BX,v:{}},n),m=function(){function e(){var t,r,n,m,v,y=this;function _(e){void 0===e&&(e=null);var t=e;if(!t){var i=r||(0,d.CD)(null,{},y[l.oV]);t=n&&n[h]?i[a.zV](null,n[h]):i[a.zV](null,n)}return t}function S(e,t,i){(0,s.o)(e,g,(0,c.vH)(t)),!i&&t&&(i=t[a.fs]()[a.Fr]());var o=n;n&&n[h]&&(o=n[h]()),y[l.oV]=t,r=(0,d.CD)(i,e,t,o)}function w(){t=!1,y[l.oV]=null,r=null,n=null,v=(0,f.t)(),m=(0,p.Y)()}w(),(0,i.Z)(e,y,(function(e){e[a.VL]=function(e,r,n,i){S(e,r,i),t=!0},e[a.fi]=function(t,r){var i,o=e[l.oV];if(o&&(!t||o===t[l.oV]())){var s,c=!1,u=t||(0,d.Bt)(null,o,n&&n[h]?n[h]():n),p=r||((i={reason:0})[a.d]=!1,i);return e[a.F3]&&!0===e[a.F3](u,p,f)?s=!0:f(),s}function f(){c||(c=!0,m.run(u,r),v.run(u[a.mc]()),!0===s&&u[a.uL](p),w())}},e[a.Tu]=function(t,r){var i=e[l.oV];if(i&&(!t||i===t[l.oV]())){var o,s=!1,c=t||(0,d.xy)(null,i,n&&n[h]?n[h]():n),u=r||{reason:0};return e._doUpdate&&!0===e._doUpdate(c,u,p)?o=!0:p(),o}function p(){s||(s=!0,S(c.getCfg(),c.core(),c[a.Fr]()))}},(0,u.Oi)(e,"_addUnloadCb",(function(){return m}),"add"),(0,u.Oi)(e,"_addHook",(function(){return v}),"add"),(0,o.g$V)(e,"_unloadHooks",{g:function(){return v}})})),y[a.mc]=function(e){return _(e)[a.mc]()},y[a.yl]=function(){return t},y.setInitialized=function(e){t=e},y[a.Jd]=function(e){n=e},y[a.uL]=function(e,t){t?t[a.uL](e):n&&(0,o.mf2)(n[l.hL])&&n[l.hL](e,null)},y._getTelCtx=_}return e.__ieDyn=1,e}()},27970:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,t:()=>i});var n=500,i="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"},42450:(e,t,r)=>{"use strict";r.d(t,{JP:()=>k,Nz:()=>A,UY:()=>U,p7:()=>R});var n,i,o,s=r(52631),a=r(7082),c=r(21328),u=r(7372),l=r(38942),d=r(49233),p=r(98769),f=r(40370),h="toGMTString",g="toUTCString",m="cookie",v="expires",y="isCookieUseDisabled",_="disableCookiesUsage",S="_ckMgr",w=null,E=null,b=null,P={},T={},C=((n={cookieCfg:(0,a.bK)((i={},i[f.sB]={fb:"cookieDomain",dfVal:p.BX},i.path={fb:"cookiePath",dfVal:p.BX},i.enabled=f.c8,i.ignoreCookies=f.c8,i.blockedCookies=f.c8,i)),cookieDomain:f.c8,cookiePath:f.c8})[_]=f.c8,n);function I(){!o&&(o=(0,s.d$o)((function(){return(0,s.MeC)()})))}function O(e){return!e||e.isEnabled()}function x(e,t){return!!(t&&e&&(0,s.kJL)(e.ignoreCookies))&&-1!==(0,s.UAM)(e.ignoreCookies,t)}function N(e,t){var r=t[u.jP];if((0,s.lep)(r)){var n=void 0;(0,s.o8e)(e[y])||(n=!e[y]),(0,s.o8e)(e[_])||(n=!e[_]),r=n}return r}function k(e,t){var r;if(e)r=e.getCookieMgr();else if(t){var n=t.cookieCfg;r=n&&n[S]?n[S]:A(t)}return r||(r=function(e,t){var r=A[S]||T[S];return r||(r=A[S]=A(e,t),T[S]=r),r}(t,(e||{})[u.eZ])),r}function A(e,t){var r,n,i,o,a,l,m,y,_;e=(0,c.o)(e||T,null,t).cfg,a=(0,c.k)(e,(function(t){t[u.Ag](t.cfg,C),n=t.ref(t.cfg,"cookieCfg"),i=n[f.W8]||"/",o=n[f.sB],l=!1!==N(e,n),m=n.getCookie||L,y=n.setCookie||F,_=n.delCookie||F}),t);var w=((r={isEnabled:function(){var r=!1!==N(e,n)&&l&&R(t),i=T[S];return r&&i&&w!==i&&(r=O(i)),r},setEnabled:function(e){l=!1!==e,n[u.jP]=e},set:function(e,t,r,a,c){var l=!1;if(O(w)&&!function(e,t){return!!(t&&e&&(0,s.kJL)(e.blockedCookies)&&-1!==(0,s.UAM)(e.blockedCookies,t))||x(e,t)}(n,e)){var m={},_=(0,s.ndY)(t||f.qS),S=(0,s.MLb)(_,";");if(-1!==S&&(_=(0,s.ndY)((0,s.lH9)(t,S)),m=D((0,s.k4L)(t,S+1))),(0,p.sO)(m,f.sB,a||o,s.fQg,s.o8e),!(0,s.lep)(r)){var b=(0,d.w1)();if((0,s.o8e)(m[v])){var P=(0,s.Ggd)()+1e3*r;if(P>0){var T=new Date;T.setTime(P),(0,p.sO)(m,v,j(T,b?h:g)||j(T,b?h:g)||f.qS,s.fQg)}}b||(0,p.sO)(m,"max-age",f.qS+r,null,s.o8e)}var C=(0,d.k$)();C&&"https:"===C[u.Po]&&((0,p.sO)(m,"secure",null,null,s.o8e),null===E&&(E=!U(((0,s.jWD)()||{})[u.qV])),E&&(0,p.sO)(m,"SameSite","None",null,s.o8e)),(0,p.sO)(m,f.W8,c||i,null,s.o8e),y(e,M(_,m)),l=!0}return l},get:function(e){var t=f.qS;return O(w)&&!x(n,e)&&(t=m(e)),t},del:function(e,t){var r=!1;return O(w)&&(r=w.purge(e,t)),r},purge:function(e,r){var n,i=!1;if(R(t)){var o=((n={})[f.W8]=r||"/",n[v]="Thu, 01 Jan 1970 00:00:01 GMT",n);(0,d.w1)()||(o["max-age"]="0"),_(e,M(f.qS,o)),i=!0}return i}})[u.c7]=function(e){a&&a.rm(),a=null},r);return w[S]=w,w}function R(e){if(null===w){w=!1,!o&&I();try{var t=o.v||{};w=void 0!==t[m]}catch(t){(0,l.kP)(e,2,68,"Cannot access document.cookie - "+(0,p.jj)(t),{exception:(0,s.eUe)(t)})}}return w}function D(e){var t={};if(e&&e[u.R5]){var r=(0,s.ndY)(e)[u.w6](";");(0,s.tOU)(r,(function(e){if(e=(0,s.ndY)(e||f.qS)){var r=(0,s.MLb)(e,"=");-1===r?t[e]=null:t[(0,s.ndY)((0,s.lH9)(e,r))]=(0,s.ndY)((0,s.k4L)(e,r+1))}}))}return t}function j(e,t){return(0,s.mf2)(e[t])?e[t]():null}function M(e,t){var r=e||f.qS;return(0,s.rWU)(t,(function(e,t){r+="; "+e+((0,s.lep)(t)?f.qS:"="+t)})),r}function L(e){var t=f.qS;if(!o&&I(),o.v){var r=o.v[m]||f.qS;b!==r&&(P=D(r),b=r),t=(0,s.ndY)(P[e]||f.qS)}return t}function F(e,t){!o&&I(),o.v&&(o.v[m]=e+"="+t)}function U(e){return!(!(0,s.HD0)(e)||!(0,p._Q)(e,"CPU iPhone OS 12")&&!(0,p._Q)(e,"iPad; CPU OS 12")&&!((0,p._Q)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,p._Q)(e,"Version/")&&(0,p._Q)(e,"Safari"))&&(!(0,p._Q)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,s.IdH)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,p._Q)(e,"Chrome/5")&&!(0,p._Q)(e,"Chrome/6")&&(!(0,p._Q)(e,"UnrealEngine")||(0,p._Q)(e,"Chrome"))&&!(0,p._Q)(e,"UCBrowser/12")&&!(0,p._Q)(e,"UCBrowser/11"))}},49187:(e,t,r)=>{"use strict";r.d(t,{DO:()=>a,GW:()=>s});var n=r(52631),i=r(40370),o=r(25778);function s(){var e=a();return(0,n.k4L)(e,0,8)+"-"+(0,n.k4L)(e,8,12)+"-"+(0,n.k4L)(e,12,16)+"-"+(0,n.k4L)(e,16,20)+"-"+(0,n.k4L)(e,20)}function a(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r=i.qS,s=0;s<4;s++)r+=t[15&(e=(0,o._l)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var a=t[8+(3&(0,o._l)())|0];return(0,n.s1E)(r,0,8)+(0,n.s1E)(r,9,4)+"4"+(0,n.s1E)(r,13,3)+a+(0,n.s1E)(r,16,3)+(0,n.s1E)(r,19,12)}},73831:(e,t,r)=>{"use strict";r.d(t,{J:()=>p,K:()=>f});var n=r(52631),i=r(7372),o=r(98769),s=r(40370),a=r(25778),c="3.3.0",u="."+(0,a.pZ)(6),l=0;function d(e){return 1===e[i.xv]||9===e[i.xv]||!+e[i.xv]}function p(e,t){return void 0===t&&(t=!1),(0,o.Gf)(e+l+++(t?"."+c:s.qS)+u)}function f(e){var t={id:p("_aiData-"+(e||s.qS)+"."+c),accept:function(e){return d(e)},get:function(e,r,i,s){var a=e[t.id];return a?a[(0,o.Gf)(r)]:(s&&(a=function(e,t){var r=t[e.id];if(!r){r={};try{d(t)&&(0,n.g$V)(t,e.id,{e:!1,v:r})}catch(e){}}return r}(t,e),a[(0,o.Gf)(r)]=i),i)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},89266:(e,t,r)=>{"use strict";r.d(t,{j:()=>l,p:()=>d});var n,i=r(52631),o=r(7372),s=r(40370),a=[s.uC,s.$F,s.f_,s.C$],c=null;function u(e,t){return function(){var r=arguments,n=l(t);if(n){var i=n.listener;i&&i[e]&&i[e][o.ZV](i,r)}}}function l(e){var t,r=c;return r||!0===e.disableDbgExt||(r=c||((t=(0,i.vsb)("Microsoft"))&&(c=t.ApplicationInsights),c)),r?r.ChromeDbgExt:null}function d(e){if(!n){n={};for(var t=0;t<a[o.R5];t++)n[a[t]]=u(a[t],e)}return n}},38942:(e,t,r)=>{"use strict";r.d(t,{AQ:()=>y,L4:()=>E,jV:()=>w,kP:()=>S,lQ:()=>m,vH:()=>v});var n,i=r(14635),o=r(52631),s=r(21328),a=r(7372),c=r(89266),u=r(49233),l=r(40370),d="warnToConsole",p={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},f=((n={})[0]=null,n[1]="errorToConsole",n[2]=d,n[3]="debugToConsole",n);function h(e){return e?'"'+e[a.i7](/\"/g,l.qS)+'"':l.qS}function g(e,t){var r=(0,u.dr)();if(r){var n="log";r[e]&&(n=e),(0,o.mf2)(r[n])&&r[n](t)}}var m=function(){function e(e,t,r,n){void 0===r&&(r=!1);var i=this;i[a.Gc]=e,i[a.gU]=(r?"AI: ":"AI (Internal): ")+e;var o=l.qS;(0,u.nS)()&&(o=(0,u.xA)().stringify(n));var s=(t?" message:"+h(t):l.qS)+(n?" props:"+h(o):l.qS);i[a.gU]+=s}return e.dataType="MessageData",e}();function v(e,t){return(e||{})[a.eZ]||new y(t)}var y=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var r,n,u,l,h,v=0,y={};(0,i.Z)(e,this,(function(e){function i(t,r){if(!(v>=u)){var i=!0,o="AITR_"+r[a.Gc];if(y[o]?i=!1:y[o]=!0,i&&(t<=n&&(e.queue[a.MW](r),v++,_(1===t?"error":"warn",r)),v===u)){var s="Internal events throttle limit per PageView reached for this app.",c=new m(23,s,!1);e.queue[a.MW](c),1===t?e.errorToConsole(s):e[a.pQ](s)}}}function _(e,r){var n=(0,c.j)(t||{});n&&n[a.mc]&&n[a.mc](e,r)}h=function(t){return(0,s.k)((0,s.o)(t,p,e).cfg,(function(e){var t=e.cfg;r=t[a.KW],n=t.loggingLevelTelemetry,u=t.maxMessageLimit,l=t.enableDebug}))}(t||{}),e.consoleLoggingLevel=function(){return r},e[a.v1]=function(t,n,s,c,u){void 0===u&&(u=!1);var p=new m(n,s,u,c);if(l)throw(0,o.eUe)(p);var h=f[t]||d;if((0,o.o8e)(p[a.gU]))_("throw"+(1===t?"Critical":"Warning"),p);else{if(u){var g=+p[a.Gc];!y[g]&&r>=t&&(e[h](p[a.gU]),y[g]=!0)}else r>=t&&e[h](p[a.gU]);i(t,p)}},e.debugToConsole=function(e){g("debug",e),_("warning",e)},e[a.pQ]=function(e){g("warn",e),_("warning",e)},e.errorToConsole=function(e){g("error",e),_("error",e)},e.resetInternalMessageCount=function(){v=0,y={}},e[a.jk]=i,e[a.c7]=function(e){h&&h.rm(),h=null}}))}return e.__ieDyn=1,e}();function _(e){return e||new y}function S(e,t,r,n,i,o){void 0===o&&(o=!1),_(e)[a.v1](t,r,n,i,o)}function w(e,t){_(e)[a.pQ](t)}function E(e,t,r){_(e)[a.jk](t,r)}},49233:(e,t,r)=>{"use strict";r.d(t,{JO:()=>j,MF:()=>D,MX:()=>x,Z3:()=>L,b$:()=>k,cp:()=>M,dI:()=>P,dr:()=>C,ed:()=>U,gz:()=>N,k$:()=>T,nS:()=>I,pI:()=>B,sA:()=>R,w1:()=>A,xA:()=>O});var n=r(13107),i=r(52631),o=r(7372),s=r(98769),a=r(40370),c="documentMode",u="location",l="console",d="JSON",p="crypto",f="msCrypto",h="ReactNative",g="msie",m="trident/",v="XMLHttpRequest",y=null,_=null,S=!1,w=null,E=null;function b(e,t){var r=!1;if(e){try{if(!(r=t in e)){var o=e[n.hB];o&&(r=t in o)}}catch(e){}if(!r)try{var s=new e;r=!(0,i.o8e)(s[t])}catch(e){}}return r}function P(e){S=e}function T(e){if(e&&S){var t=(0,i.vsb)("__mockLocation");if(t)return t}return typeof location===n.fK&&location?location:(0,i.vsb)(u)}function C(){return typeof console!==n.jA?console:(0,i.vsb)(l)}function I(){return Boolean(typeof JSON===n.fK&&JSON||null!==(0,i.vsb)(d))}function O(){return I()?JSON||(0,i.vsb)(d):null}function x(){return(0,i.vsb)(p)}function N(){return(0,i.vsb)(f)}function k(){var e=(0,i.jWD)();return!(!e||!e.product)&&e.product===h}function A(){var e=(0,i.jWD)();if(e&&(e[o.qV]!==_||null===y)){var t=((_=e[o.qV])||a.qS)[o.D7]();y=(0,s._Q)(t,g)||(0,s._Q)(t,m)}return y}function R(e){if(void 0===e&&(e=null),!e){var t=(0,i.jWD)()||{};e=t?(t.userAgent||a.qS)[o.D7]():a.qS}var r=(e||a.qS)[o.D7]();if((0,s._Q)(r,g)){var n=(0,i.MeC)()||{};return Math.max(parseInt(r[o.w6](g)[1]),n[c]||0)}if((0,s._Q)(r,m)){var u=parseInt(r[o.w6](m)[1]);if(u)return u+4}return null}function D(e){return null!==E&&!1!==e||(E=(0,i.d6F)()&&Boolean((0,i.jWD)().sendBeacon)),E}function j(e){var t=!1;try{t=!!(0,i.vsb)("fetch");var r=(0,i.vsb)("Request");t&&e&&r&&(t=b(r,"keepalive"))}catch(e){}return t}function M(){return null===w&&(w=typeof XDomainRequest!==n.jA)&&L()&&(w=w&&!b((0,i.vsb)(v),"withCredentials")),w}function L(){var e=!1;try{e=!!(0,i.vsb)(v)}catch(e){}return e}function F(e,t){if(e)for(var r=0;r<e[o.R5];r++){var n=e[r];if(n[o.I]&&n[o.I]===t)return n}return{}}function U(e){var t=(0,i.MeC)();return t&&e?F(t.querySelectorAll("meta"),e).content:null}function B(e){var t,r=(0,i.ra_)();if(r){var n=r.getEntriesByType("navigation")||[];t=F((n[o.R5]>0?n[0]:{}).serverTiming,e).description}return t}},33668:(e,t,r)=>{"use strict";r.d(t,{C1:()=>L,C9:()=>H,Ib:()=>M,JA:()=>$,QY:()=>R,TJ:()=>q,XO:()=>A,Yl:()=>W,c9:()=>V,jU:()=>k,nD:()=>z,nJ:()=>B,pD:()=>j,pZ:()=>D,um:()=>I,yw:()=>U});var n=r(52631),i=r(7372),o=r(73831),s=r(40370),a="on",c="attachEvent",u="addEventListener",l="detachEvent",d="removeEventListener",p="events",f="visibilitychange",h="pagehide",g="pageshow",m="unload",v="beforeunload",y=(0,o.J)("aiEvtPageHide"),_=(0,o.J)("aiEvtPageShow"),S=/\.[\.]+/g,w=/[\.]+$/,E=1,b=(0,o.K)("events"),P=/^([^.]*)(?:\.(.+)|)/;function T(e){return e&&e[i.i7]?e[i.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,s.qS):e}function C(e,t){var r;if(t){var o=s.qS;(0,n.kJL)(t)?(o=s.qS,(0,n.tOU)(t,(function(e){(e=T(e))&&("."!==e[0]&&(e="."+e),o+=e)}))):o=T(t),o&&("."!==o[0]&&(o="."+o),e=(e||s.qS)+o)}var a=P.exec(e||s.qS)||[];return(r={})[i.P6]=a[1],r.ns=(a[2]||s.qS).replace(S,".").replace(w,s.qS)[i.w6](".").sort().join("."),r}function I(e,t,r){var o=[],a=b.get(e,p,{},!1),c=C(t,r);return(0,n.rWU)(a,(function(e,t){(0,n.tOU)(t,(function(e){var t;c[i.P6]&&c[i.P6]!==e.evtName[i.P6]||c.ns&&c.ns!=c.ns||o[i.MW](((t={})[i.I]=e.evtName[i.P6]+(e.evtName.ns?"."+e.evtName.ns:s.qS),t.handler=e[i.Kn],t))}))})),o}function O(e,t,r){void 0===r&&(r=!0);var n=b.get(e,p,{},r),i=n[t];return i||(i=n[t]=[]),i}function x(e,t,r,n){e&&t&&t[i.P6]&&(e[d]?e[d](t[i.P6],r,n):e[l]&&e[l](a+t[i.P6],r))}function N(e,t,r,n){for(var o=t[i.R5];o--;){var s=t[o];s&&(r.ns&&r.ns!==s.evtName.ns||n&&!n(s)||(x(e,s.evtName,s[i.Kn],s.capture),t[i.cb](o,1)))}}function k(e,t){return t?C("xx",(0,n.kJL)(t)?[e].concat(t):[e,t]).ns[i.w6]("."):e}function A(e,t,r,n,o){var s;void 0===o&&(o=!1);var l=!1;if(e)try{var d=C(t,n);if(l=function(e,t,r,n){var o=!1;return e&&t&&t[i.P6]&&r&&(e[u]?(e[u](t[i.P6],r,n),o=!0):e[c]&&(e[c](a+t[i.P6],r),o=!0)),o}(e,d,r,o),l&&b.accept(e)){var p=((s={guid:E++,evtName:d})[i.Kn]=r,s.capture=o,s);O(e,d.type)[i.MW](p)}}catch(e){}return l}function R(e,t,r,o,s){if(void 0===s&&(s=!1),e)try{var a=C(t,o),c=!1;!function(e,t,r){if(t[i.P6])N(e,O(e,t[i.P6]),t,r);else{var o=b.get(e,p,{});(0,n.rWU)(o,(function(n,i){N(e,i,t,r)})),0===(0,n.FYL)(o)[i.R5]&&b.kill(e,p)}}(e,a,(function(e){return!((!a.ns||r)&&e[i.Kn]!==r||(c=!0,0))})),c||x(e,a,r,s)}catch(e){}}function D(e,t,r,n){return void 0===n&&(n=!1),A(e,t,r,null,n)}function j(e,t,r,n){void 0===n&&(n=!1),R(e,t,r,null,n)}function M(e,t,r){var i=!1,o=(0,n.Jj3)();o&&(i=A(o,e,t,r),i=A(o.body,e,t,r)||i);var s=(0,n.MeC)();return s&&(i=A(s,e,t,r)||i),i}function L(e,t,r){var i=(0,n.Jj3)();i&&(R(i,e,t,r),R(i.body,e,t,r));var o=(0,n.MeC)();o&&R(o,e,t,r)}function F(e,t,r,o){var s=!1;return t&&e&&e[i.R5]>0&&(0,n.tOU)(e,(function(e){e&&(r&&-1!==(0,n.UAM)(r,e)||(s=M(e,t,o)||s))})),s}function U(e,t,r,o){var s=!1;return t&&e&&(0,n.kJL)(e)&&!(s=F(e,t,r,o))&&r&&r[i.R5]>0&&(s=F(e,t,null,o)),s}function B(e,t,r){e&&(0,n.kJL)(e)&&(0,n.tOU)(e,(function(e){e&&L(e,t,r)}))}function V(e,t,r){return U([v,m,h],e,t,r)}function $(e,t){B([v,m,h],e,t)}function q(e,t,r){var i=k(y,r),o=F([h],e,t,i);return t&&-1!==(0,n.UAM)(t,f)||(o=F([f],(function(t){var r=(0,n.MeC)();e&&r&&"hidden"===r.visibilityState&&e(t)}),t,i)||o),!o&&t&&(o=q(e,null,r)),o}function H(e,t){var r=k(y,t);B([h],e,r),B([f],null,r)}function z(e,t,r){var i=k(_,r),o=F([g],e,t,i);return!(o=F([f],(function(t){var r=(0,n.MeC)();e&&r&&"visible"===r.visibilityState&&e(t)}),t,i)||o)&&t&&(o=z(e,null,r)),o}function W(e,t){var r=k(_,t);B([g],e,r),B([f],null,r)}},98769:(e,t,r)=>{"use strict";r.d(t,{An:()=>I,Ax:()=>b,BX:()=>d,F3:()=>D,Fz:()=>F,Gf:()=>p,Np:()=>C,Oi:()=>S,Vb:()=>w,XE:()=>R,Y6:()=>h,_Q:()=>f,cf:()=>_,fM:()=>O,hl:()=>E,jj:()=>g,mm:()=>P,ot:()=>A,qK:()=>v,sO:()=>m,tV:()=>T});var n=r(76761),i=r(13107),o=r(52631),s=r(7372),a=r(40370),c=/-([a-z])/g,u=/([^\w\d_$])/g,l=/^(\d+[\w\d_$])/;function d(e){return!(0,o.lep)(e)}function p(e){var t=e;return t&&(0,o.HD0)(t)&&(t=(t=(t=t[s.i7](c,(function(e,t){return t.toUpperCase()})))[s.i7](u,"_"))[s.i7](l,(function(e,t){return"_"+t}))),t}function f(e,t){return!(!e||!t)&&-1!==(0,o.MLb)(e,t)}function h(e){return e&&e.toISOString()||""}function g(e){return(0,o.VZO)(e)?e[s.I]:a.qS}function m(e,t,r,n,i){var o=r;return e&&((o=e[t])===r||i&&!i(o)||n&&!n(r)||(o=r,e[t]=o)),o}function v(e,t,r){var n;return e?!(n=e[t])&&(0,o.lep)(n)&&(n=(0,o.o8e)(r)?{}:r,e[t]=n):n=(0,o.o8e)(r)?{}:r,n}function y(e,t){var r=null,n=null;return(0,o.mf2)(e)?r=e:n=e,function(){var e=arguments;if(r&&(n=r()),n)return n[t][s.ZV](n,e)}}function _(e,t,r){if(e&&t&&(0,o.Kn2)(e)&&(0,o.Kn2)(t)){var n=function(n){if((0,o.HD0)(n)){var i=t[n];(0,o.mf2)(i)?r&&!r(n,!0,t,e)||(e[n]=y(t,n)):r&&!r(n,!1,t,e)||((0,o.wj3)(e,n)&&delete e[n],(0,o.g$V)(e,n,{g:function(){return t[n]},s:function(e){t[n]=e}}))}};for(var i in t)n(i)}return e}function S(e,t,r,n,i){e&&t&&r&&(!1!==i||(0,o.o8e)(e[t]))&&(e[t]=y(r,n))}function w(e,t,r,n){return e&&t&&(0,o.Kn2)(e)&&(0,o.kJL)(r)&&(0,o.tOU)(r,(function(r){(0,o.HD0)(r)&&S(e,r,t,r,n)})),e}function E(e){return function(){var t=this;e&&(0,o.rWU)(e,(function(e,r){t[e]=r}))}}function b(e){return e&&n.z$&&(e=(0,i.Pw)((0,n.z$)({},e))),e}function P(e,t,r,n,i,a){var c=arguments,u=c[0]||{},l=c[s.R5],d=!1,p=1;for(l>0&&(0,o.jnD)(u)&&(d=u,u=c[p]||{},p++),(0,o.Kn2)(u)||(u={});p<l;p++){var f=c[p],h=(0,o.kJL)(f),g=(0,o.Kn2)(f);for(var m in f)if(h&&m in f||g&&(0,o.wj3)(f,m)){var v=f[m],y=void 0;if(d&&v&&((y=(0,o.kJL)(v))||(0,o.POo)(v))){var _=u[m];y?(0,o.kJL)(_)||(_=[]):(0,o.POo)(_)||(_={}),v=P(d,_,v)}void 0!==v&&(u[m]=v)}}return u}function T(e){try{return e.responseText}catch(e){}return null}function C(e,t){return e?"XDomainRequest,Response:"+T(e)||0:t}function I(e,t){return e?"XMLHttpRequest,Status:"+e[s.Yz]+",Response:"+T(e)||0:t}function O(e,t){return t&&((0,o.hj$)(t)?e=[t].concat(e):(0,o.kJL)(t)&&(e=t.concat(e))),e}Object.getPrototypeOf;var x="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",N="withCredentials",k="timeout";function A(e,t,r,n,i,o){function s(e,t,r){try{e[t]=r}catch(e){}}void 0===n&&(n=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return n&&s(a,x,n),r&&s(a,N,r),a.open(e,t,!i),r&&s(a,N,r),!i&&o&&s(a,k,o),a}function R(e){var t={};if((0,o.HD0)(e)){var r=(0,o.ndY)(e)[s.w6](/[\r\n]+/);(0,o.tOU)(r,(function(e){if(e){var r=e.indexOf(": ");if(-1!==r){var n=(0,o.ndY)(e.substring(0,r))[s.D7](),i=(0,o.ndY)(e.substring(r+1));t[n]=i}else t[(0,o.ndY)(e)]=1}}))}return t}function D(e,t,r){if(!e[r]&&t&&t[s.rb]){var n=t[s.rb](r);n&&(e[r]=(0,o.ndY)(n))}return e}var j="kill-duration",M="kill-duration-seconds",L="time-delta-millis";function F(e,t){var r={};return e[s.l8]?r=R(e[s.l8]()):t&&(r=D(r,e,L),r=D(r,e,j),r=D(r,e,M)),r}},40370:(e,t,r)=>{"use strict";r.d(t,{$F:()=>h,C$:()=>m,DN:()=>a,W$:()=>y,W8:()=>E,XS:()=>b,Z:()=>o,Zh:()=>u,c8:()=>n,f_:()=>g,hL:()=>d,js:()=>l,kl:()=>S,lO:()=>v,mE:()=>c,oV:()=>s,qS:()=>i,sB:()=>w,uC:()=>f,v_:()=>_,yi:()=>p});var n=void 0,i="",o="channels",s="core",a="createPerfMgr",c="disabled",u="extensionConfig",l="extensions",d="processTelemetry",p="priority",f="eventsSent",h="eventsDiscarded",g="eventsSendRequest",m="perfEvent",v="offlineEventsStored",y="offlineBatchSent",_="offlineBatchDrop",S="getPerfMgr",w="domain",E="path",b="Not dynamic - "},51016:(e,t,r)=>{"use strict";r.d(t,{f:()=>p});var n=r(14635),i=r(90862),o=r(52631),s=r(21328),a=r(7372),c=r(40370),u={perfEvtsSendAll:!1};function l(e){e.h=null;var t=e.cb;e.cb=[],(0,o.tOU)(t,(function(e){(0,o.TwK)(e.fn,[e.arg])}))}function d(e,t,r,n){(0,o.tOU)(e,(function(e){e&&e[t]&&(r?(r.cb[a.MW]({fn:n,arg:e}),r.h=r.h||(0,o.tXR)(l,0,r)):(0,o.TwK)(n,[e]))}))}var p=function(){function e(t){var r,l;this.listeners=[];var p=[],f={h:null,cb:[]},h=(0,s.o)(t,u);l=h[a.DI]((function(e){r=!!e.cfg.perfEvtsSendAll})),(0,n.Z)(e,this,(function(e){(0,o.g$V)(e,"listeners",{g:function(){return p}}),e[a.g]=function(e){p[a.MW](e)},e[a.nG]=function(e){for(var t=(0,o.UAM)(p,e);t>-1;)p[a.cb](t,1),t=(0,o.UAM)(p,e)},e[c.uC]=function(e){d(p,c.uC,f,(function(t){t[c.uC](e)}))},e[c.$F]=function(e,t){d(p,c.$F,f,(function(r){r[c.$F](e,t)}))},e[c.f_]=function(e,t){d(p,c.f_,t?f:null,(function(r){r[c.f_](e,t)}))},e[c.C$]=function(e){e&&(!r&&e[a.PL]()||d(p,c.C$,null,(function(t){e[a.d]?(0,o.tXR)((function(){return t[c.C$](e)}),0):t[c.C$](e)})))},e[c.lO]=function(e){e&&e[a.R5]&&d(p,c.lO,f,(function(t){t[c.lO](e)}))},e[c.W$]=function(e){e&&e[a.ob]&&d(p,c.W$,f,(function(t){t[c.W$](e)}))},e[c.v_]=function(e,t){if(e>0){var r=t||0;d(p,c.v_,f,(function(t){t[c.v_](e,r)}))}},e[a.c7]=function(e){var t,r=function(){l&&l.rm(),l=null,p=[],f.h&&f.h[a.SG](),f.h=null,f.cb=[]};if(d(p,"unload",null,(function(r){var n=r[a.c7](e);n&&(t||(t=[]),t[a.MW](n))})),t)return(0,i.wv)((function(e){return(0,i.Zm)((0,i.Tp)(t),(function(){r(),e()}))}));r()}}))}return e.__ieDyn=1,e}()},27019:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>p,Lm:()=>h,j5:()=>g,zn:()=>d});var n=r(14635),i=r(52631),o=r(7372),s=r(40370),a="ctx",c="ParentContextKey",u="ChildrenContextKey",l=null,d=function(){function e(t,r,n){var s,l=this;l.start=(0,i.Ggd)(),l[o.I]=t,l[o.d]=n,l[o.PL]=function(){return!1},(0,i.mf2)(r)&&(0,i.g$V)(l,"payload",{g:function(){return!s&&(0,i.mf2)(r)&&(s=r(),r=null),s}}),l[o.T]=function(t){return t?t===e[c]||t===e[u]?l[t]:(l[a]||{})[t]:null},l[o.wu]=function(t,r){t&&(t===e[c]?(l[t]||(l[o.PL]=function(){return!0}),l[t]=r):t===e[u]?l[t]=r:(l[a]=l[a]||{})[t]=r)},l[o.Km]=function(){var t=0,r=l[o.T](e[u]);if((0,i.kJL)(r))for(var n=0;n<r[o.R5];n++){var s=r[n];s&&(t+=s[o.Z_])}l[o.Z_]=(0,i.Ggd)()-l.start,l.exTime=l[o.Z_]-t,l[o.Km]=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),p=function(){function e(t){this.ctx={},(0,n.Z)(e,this,(function(e){e.create=function(e,t,r){return new d(e,t,r)},e.fire=function(e){e&&(e[o.Km](),t&&(0,i.mf2)(t[s.C$])&&t[s.C$](e))},e[o.wu]=function(t,r){t&&((e[a]=e[a]||{})[t]=r)},e[o.T]=function(t){return(e[a]||{})[t]}}))}return e.__ieDyn=1,e}(),f="CoreUtils.doPerf";function h(e,t,r,n,i){if(e){var a=e;if(a[s.kl]&&(a=a[s.kl]()),a){var l=void 0,p=a[o.T](f);try{if(l=a.create(t(),n,i)){if(p&&l[o.wu]&&(l[o.wu](d[c],p),p[o.T]&&p[o.wu])){var h=p[o.T](d[u]);h||(h=[],p[o.wu](d[u],h)),h[o.MW](l)}return a[o.wu](f,l),r(l)}}catch(e){l&&l[o.wu]&&l[o.wu]("exception",e)}finally{l&&a.fire(l),a[o.wu](f,p)}}}return r()}function g(){return l}},38570:(e,t,r)=>{"use strict";r.d(t,{Bt:()=>y,CD:()=>v,Vi:()=>w,jV:()=>S,xy:()=>_});var n=r(52631),i=r(14619),o=r(21328),s=r(7372),a=r(38942),c=r(98769),u=r(40370),l=r(27019),d=r(77076),p="TelemetryPluginChain",f="_hasRun",h="_getTelCtx",g=0;function m(e,t,r,c){var l=null,d=[];t||(t=(0,o.o)({},null,r[s.eZ])),null!==c&&(l=c?function(e,t,r){for(;e;){if(e[s.TO]()===r)return e;e=e[s.Fr]()}return S([r],t.config||{},t)}(e,r,c):e);var p={_next:function(){var e=l;if(l=e?e[s.Fr]():null,!e){var t=d;t&&t[s.R5]>0&&((0,n.tOU)(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){(0,a.kP)(r[s.eZ],2,73,"Unexpected Exception during onComplete - "+(0,n.eUe)(e))}})),d=[])}return e},ctx:{core:function(){return r},diagLog:function(){return(0,a.vH)(r,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(e,r){var o=f(e,!0);return r&&(0,n.rWU)(r,(function(e,r){if((0,n.lep)(o[e])){var s=t.cfg[e];!s&&(0,n.lep)(s)||(o[e]=s)}(0,i.e)(t,o,e,r)})),t[s.Ag](o,r)},getConfig:function(e,r,i){void 0===i&&(i=!1);var o,s=f(e,!1),a=t.cfg;return!s||!s[r]&&(0,n.lep)(s[r])?!a[r]&&(0,n.lep)(a[r])||(o=a[r]):o=s[r],o||!(0,n.lep)(o)?o:i},hasNext:function(){return!!l},getNext:function(){return l},setNext:function(e){l=e},iterate:function(e){for(var t;t=p._next();){var r=t[s.TO]();r&&e(r)}},onComplete:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e&&d[s.MW]({func:e,self:(0,n.o8e)(t)?p.ctx:t,args:r})}}};function f(e,r){var n=null,i=t.cfg;if(i&&e){var o=i[u.Zh];!o&&r&&(o={}),i[u.Zh]=o,(o=t.ref(i,u.Zh))&&(!(n=o[e])&&r&&(n={}),o[e]=n,n=t.ref(o,e))}return n}return p}function v(e,t,r,i){var a=(0,o.o)(t),c=m(e,a,r,i),l=c.ctx;return l[s.uL]=function(e){var t=c._next();return t&&t[u.hL](e,l),!t},l[s.zV]=function(e,t){return void 0===e&&(e=null),(0,n.kJL)(e)&&(e=S(e,a.cfg,r,t)),v(e||l[s.Fr](),a.cfg,r,t)},l}function y(e,t,r){var i=(0,o.o)(t.config),a=m(e,i,t,r),c=a.ctx;return c[s.uL]=function(e){var t=a._next();return t&&t[s.c7](c,e),!t},c[s.zV]=function(e,r){return void 0===e&&(e=null),(0,n.kJL)(e)&&(e=S(e,i.cfg,t,r)),y(e||c[s.Fr](),t,r)},c}function _(e,t,r){var i=(0,o.o)(t.config),a=m(e,i,t,r).ctx;return a[s.uL]=function(e){return a.iterate((function(t){(0,n.mf2)(t[s.Tu])&&t[s.Tu](a,e)}))},a[s.zV]=function(e,r){return void 0===e&&(e=null),(0,n.kJL)(e)&&(e=S(e,i.cfg,t,r)),_(e||a[s.Fr](),t,r)},a}function S(e,t,r,i){var o=null,c=!i;if((0,n.kJL)(e)&&e[s.R5]>0){var m=null;(0,n.tOU)(e,(function(e){if(c||i!==e||(c=!0),c&&e&&(0,n.mf2)(e[u.hL])){var y=function(e,t,r){var i,o=null,c=(0,n.mf2)(e[u.hL]),m=(0,n.mf2)(e[s.Jd]),y={getPlugin:function(){return e},getNext:function(){return o},processTelemetry:function(i,a){_(a=a||function(){var i;return e&&(0,n.mf2)(e[h])&&(i=e[h]()),i||(i=v(y,t,r)),i}(),(function(t){if(!e||!c)return!1;var r=(0,d.OY)(e);return!r[s.fi]&&!r[u.mE]&&(m&&e[s.Jd](o),e[u.hL](i,t),!0)}),"processTelemetry",(function(){return{item:i}}),!i.sync)||a[s.uL](i)},unload:function(t,r){_(t,(function(){var n=!1;if(e){var i=(0,d.OY)(e),o=e[u.oV]||i[u.oV];!e||o&&o!==t.core()||i[s.fi]||(i[u.oV]=null,i[s.fi]=!0,i[s.yl]=!1,e[s.fi]&&!0===e[s.fi](t,r)&&(n=!0))}return n}),"unload",(function(){}),r[s.d])||t[s.uL](r)},update:function(t,r){_(t,(function(){var n=!1;if(e){var i=(0,d.OY)(e),o=e[u.oV]||i[u.oV];!e||o&&o!==t.core()||i[s.fi]||e[s.Tu]&&!0===e[s.Tu](t,r)&&(n=!0)}return n}),"update",(function(){}),!1)||t[s.uL](r)},_id:i=e?e[s.pZ]+"-"+e[u.yi]+"-"+g++:"Unknown-0-"+g++,_setNext:function(e){o=e}};function _(t,r,c,d,h){var g=!1,m=e?e[s.pZ]:p,v=t[f];return v||(v=t[f]={}),t.setNext(o),e&&(0,l.Lm)(t[u.oV](),(function(){return m+":"+c}),(function(){v[i]=!0;try{var e=o?o._id:u.qS;e&&(v[e]=!1),g=r(t)}catch(e){var l=!o||v[o._id];l&&(g=!0),o&&l||(0,a.kP)(t[s.mc](),1,73,"Plugin ["+m+"] failed during "+c+" - "+(0,n.eUe)(e)+", run flags: "+(0,n.eUe)(v))}}),d,h),g}return(0,n.FL5)(y)}(e,t,r);o||(o=y),m&&m._setNext(y),m=y}}))}return i&&!o?S([i],t,r):o}var w=function(e,t,r,i){var o=v(e,t,r,i);(0,c.Vb)(this,o,(0,n.FYL)(o))}},25778:(e,t,r)=>{"use strict";r.d(t,{_l:()=>m,az:()=>g,pZ:()=>v});var n=r(52631),i=r(7372),o=r(49233),s=r(40370),a=4294967296,c=4294967295,u=123456789,l=987654321,d=!1,p=u,f=l;function h(){try{var e=2147483647&(0,n.Ggd)();(t=(Math.random()*a^e)+e)<0&&(t>>>=0),p=u+t&c,f=l-t&c,d=!0}catch(e){}var t}function g(e){return e>0?Math.floor(m()/c*(e+1))>>>0:0}function m(e){var t=0,r=(0,o.MX)()||(0,o.gz)();return r&&r.getRandomValues&&(t=r.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,o.w1)()&&(d||h(),t=function(e){var t=((f=36969*(65535&f)+(f>>16)&c)<<16)+(65535&(p=18e3*(65535&p)+(p>>16)&c))>>>0&c|0;return t>>>=0}()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function v(e){void 0===e&&(e=22);for(var t=m()>>>0,r=0,n=s.qS;n[i.R5]<e;)r++,n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===r&&(t=(m()<<2&4294967295|3&t)>>>0,r=0);return n}},87781:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});var n=r(52631),i=r(7372),o=r(38942),s=r(49233);function a(e,t){try{if(e&&""!==e){var r=(0,s.xA)().parse(e);if(r&&r[i.QQ]&&r[i.QQ]>=r.itemsAccepted&&r.itemsReceived-r.itemsAccepted===r.errors[i.R5])return r}}catch(r){(0,o.kP)(t,1,43,"Cannot parse the response. "+(r[i.I]||(0,n.eUe)(r)),{response:e})}return null}},68224:(e,t,r)=>{"use strict";r.d(t,{s:()=>h});var n=r(14635),i=r(90862),o=r(52631),s=r(7372),a=r(27970),c=r(38942),u=r(49233),l=r(98769),d="",p="&NoResponseBody=true",f="POST",h=function(){function e(){var t,r,h,g,m,v,y,_,S,w,E,b,P,T=0;(0,n.Z)(e,this,(function(e,n){var C=!0;function I(e,t){(0,c.kP)(h,2,26,"Failed to send telemetry.",{message:e}),x(t,400,{})}function O(e){I("No endpoint url is provided for the batch",e)}function x(e,t,r,n){try{e&&e(t,r,n)}catch(e){}}function N(e,t){var r=(0,o.jWD)(),n=e[s.jx];if(!n)return O(t),!0;n=e[s.jx]+(b?p:d);var i=e[s.ob],a=g?i:new Blob([i],{type:"text/plain;charset=UTF-8"});return r.sendBeacon(n,a)}function k(e,t,r){var n=e[s.ob];try{if(n)if(N(e,t))x(t,200,{},d);else{var i=m&&m.beaconOnRetry;i&&(0,o.mf2)(i)?i(e,t,N):(y&&y[s.Jz](e,t,!0),(0,c.kP)(h,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(e){g&&(0,c.jV)(h,"Failed to send telemetry using sendBeacon API. Ex:"+(0,o.eUe)(e)),x(t,g?0:400,{},d)}}function A(e,r,n){var a,c,u,p=e[s.JA]||{};!n&&t&&(a=(0,i.wv)((function(e,t){c=e,u=t}))),g&&n&&e.disableXhrSync&&(n=!1);var h=e[s.jx];if(!h)return O(r),void(c&&c(!1));var v=(0,l.ot)(f,h,C,!0,n,e[s.jh]);function y(t){var n=m&&m.xhrOnComplete;if(n&&(0,o.mf2)(n))n(t,r,e);else{var i=(0,l.tV)(t);x(r,t[s.Yz],(0,l.Fz)(t,g),i)}}return g||v[s.tp]("Content-type","application/json"),(0,o.tOU)((0,o.FYL)(p),(function(e){v[s.tp](e,p[e])})),v.onreadystatechange=function(){g||(y(v),4===v.readyState&&c&&c(!0))},v.onload=function(){g&&y(v)},v.onerror=function(e){x(r,g?v[s.Yz]:400,(0,l.Fz)(v,g),g?d:(0,l.An)(v)),u&&u(e)},v.ontimeout=function(){x(r,g?v[s.Yz]:500,(0,l.Fz)(v,g),g?d:(0,l.An)(v)),c&&c(!1)},v.send(e[s.ob]),a}function R(e,r,n){var c,u,l,h,v=e[s.jx],y=e[s.ob],_=g?y:new Blob([y],{type:"application/json"}),S=new Headers,w=y[s.R5],E=!1,I=!1,N=e[s.JA]||{},k=((c={method:f,body:_})[a.t]=!0,c);e.headers&&(0,o.FYL)(e.headers)[s.R5]>0&&((0,o.tOU)((0,o.FYL)(N),(function(e){S.append(e,N[e])})),k[s.JA]=S),C&&g&&(k.credentials="include"),n&&(k.keepalive=!0,T+=w,g?2===e._sendReason&&(E=!0,b&&(v+=p)):E=!0);var A=new Request(v,k);try{A[a.t]=!0}catch(e){}if(!n&&t&&(u=(0,i.wv)((function(e,t){l=e,h=t}))),!v)return O(r),void(l&&l(!1));function R(e){x(r,g?0:400,{},g?d:e)}function D(e,t,n){var i=e[s.Yz],a=m.fetchOnComplete;a&&(0,o.mf2)(a)?a(e,r,n||d,t):x(r,i,{},n||d)}try{(0,i.Zm)(fetch(g?v:A,g?k:null),(function(t){if(n&&(T-=w,w=0),!I)if(I=!0,t.rejected)R(t.reason&&t.reason[s.gU]),h&&h(t.reason);else{var r=t[s.V_];try{g||r.ok?g&&!r.body?(D(r,null,d),l&&l(!0)):(0,i.Zm)(r.text(),(function(t){D(r,e,t[s.V_]),l&&l(!0)})):(R(r.statusText),l&&l(!1))}catch(e){R((0,o.eUe)(e)),h&&h(e)}}}))}catch(e){I||(R((0,o.eUe)(e)),h&&h(e))}return E&&!I&&(I=!0,x(r,200,{}),l&&l(!0)),g&&!I&&e[s.jh]>0&&P&&P.set((function(){I||(I=!0,x(r,500,{}),l&&l(!0))}),e[s.jh]),u}function D(e,t,r){var n=(0,o.Jj3)(),i=new XDomainRequest,a=e[s.ob];i.onload=function(){var r=(0,l.tV)(i),n=m&&m.xdrOnComplete;n&&(0,o.mf2)(n)?n(i,t,e):x(t,200,{},r)},i.onerror=function(){x(t,400,{},g?d:(0,l.Np)(i))},i.ontimeout=function(){x(t,500,{})},i.onprogress=function(){};var u=n&&n.location&&n.location[s.Po]||"",p=e[s.jx];if(p){if(!g&&0!==p.lastIndexOf(u,0)){var v="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";return(0,c.kP)(h,2,40,". "+v),void I(v,t)}var y=g?p:p[s.i7](/^(https?:)/,"");i.open(f,y),e[s.jh]&&(i[s.jh]=e[s.jh]),i.send(a),g&&r?P&&P.set((function(){i.send(a)}),0):i.send(a)}else O(t)}function j(){T=0,r=!1,t=!1,h=null,g=null,m=null,v=null,y=null,_=!1,S=!1,w=!1,E=!1,b=!1,P=null}j(),e[s.VL]=function(t,n){h=n,r&&(0,c.kP)(h,1,28,"Sender is already initialized"),e.SetConfig(t),r=!0},e._getDbgPlgTargets=function(){return[r,g,v,t]},e.SetConfig=function(e){try{if(m=e.senderOnCompleteCallBack||{},v=!!e.disableCredentials,g=!!e.isOneDs,t=!!e.enableSendPromise,_=!!e.disableXhr,S=!!e.disableBeacon,w=!!e.disableBeaconSync,P=e.timeWrapper,b=!!e.addNoResponse,E=!!e.disableFetchKeepAlive,y={sendPOST:A},g||(C=!1),v){var r=(0,u.k$)();r&&r.protocol&&"file:"===r.protocol[s.D7]()&&(C=!1)}return!0}catch(e){}return!1},e.getSyncFetchPayload=function(){return T},e.getSenderInst=function(e,t){return e&&e[s.R5]?function(e,t){for(var r,n=0,i=null,o=0;null==i&&o<e[s.R5];)n=e[o],_||1!==n?2!==n||!(0,u.JO)(t)||t&&E?3!==n||!(0,u.MF)()||(t?w:S)||(i=k):i=R:(0,u.cp)()?i=D:(0,u.Z3)()&&(i=A),o++;return i?((r={_transport:n,_isSync:t})[s.Jz]=i,r):null}(e,t):null},e.getFallbackInst=function(){return y},e[s.F3]=function(e,t){j()}}))}return e.__ieDyn=1,e}()},77076:(e,t,r)=>{"use strict";r.d(t,{AA:()=>d,OY:()=>u,Yn:()=>p,bP:()=>l});var n=r(52631),i=r(7372),o=r(73831),s=r(40370),a=r(33866),c=(0,o.K)("plugin");function u(e){return c.get(e,"state",{},!0)}function l(e,t){for(var r,o=[],a=null,c=e[i.Fr]();c;){var l=c[i.TO]();if(l){a&&a[i.Jd]&&l[s.hL]&&a[i.Jd](l);var d=!!(r=u(l))[i.yl];l[i.yl]&&(d=l[i.yl]()),d||o[i.MW](l),a=l,c=c[i.Fr]()}}(0,n.tOU)(o,(function(n){var o=e[s.oV]();n[i.VL](e.getCfg(),o,t,e[i.Fr]()),r=u(n),n[s.oV]||r[s.oV]||(r[s.oV]=o),r[i.yl]=!0,delete r[i.fi]}))}function d(e){return e.sort((function(e,t){var r=0;if(t){var n=t[s.hL];e[s.hL]?r=n?e[s.yi]-t[s.yi]:1:n&&(r=-1)}else r=e?1:-1;return r}))}function p(e){var t={};return{getName:function(){return t[i.I]},setName:function(r){e&&e.setName(r),t[i.I]=r},getTraceId:function(){return t[i.nY]},setTraceId:function(r){e&&e.setTraceId(r),(0,a.jN)(r)&&(t[i.nY]=r)},getSpanId:function(){return t[i._d]},setSpanId:function(r){e&&e.setSpanId(r),(0,a.Lc)(r)&&(t[i._d]=r)},getTraceFlags:function(){return t[i.T0]},setTraceFlags:function(r){e&&e.setTraceFlags(r),t[i.T0]=r}}}},46096:(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});var n=r(52631),i=r(7372),o=r(38942);function s(){var e=[];return{add:function(t){t&&e[i.MW](t)},run:function(t,r){(0,n.tOU)(e,(function(e){try{e(t,r)}catch(e){(0,o.kP)(t[i.mc](),2,73,"Unexpected error calling unload handler - "+(0,n.eUe)(e))}})),e=[]}}}},19925:(e,t,r)=>{"use strict";r.d(t,{f:()=>c,t:()=>u});var n,i,o=r(52631),s=r(7372),a=r(38942);function c(e,t){n=e,i=t}function u(){var e=[];return{run:function(t){var r=e;e=[],(0,o.tOU)(r,(function(e){try{(e.rm||e.remove).call(e)}catch(e){(0,a.kP)(t,2,73,"Unloading:"+(0,o.eUe)(e))}})),n&&r[s.R5]>n&&(i?i("doUnload",r):(0,a.kP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))},add:function(t){t&&((0,o.W5k)(e,t),n&&e[s.R5]>n&&(i?i("Add",e):(0,a.kP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}}}},33866:(e,t,r)=>{"use strict";r.d(t,{J6:()=>w,Lc:()=>S,Pn:()=>E,SU:()=>v,aR:()=>b,jN:()=>_,j_:()=>y,lq:()=>P});var n=r(52631),i=r(7372),o=r(49187),s=r(49233),a=r(40370),c=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,u="00",l="ff",d="00000000000000000000000000000000",p="0000000000000000",f=1;function h(e,t,r){return!(!e||e[i.R5]!==t||e===r||!e.match(/^[\da-f]*$/i))}function g(e,t,r){return h(e,t)?e:r}function m(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[i.R5]<2;)t="0"+t;return t}function v(e,t,r,s){var a;return(a={})[i.PA]=h(s,2,l)?s:u,a[i.nY]=_(e)?e:(0,o.DO)(),a[i._d]=S(t)?t:(0,n.lH9)((0,o.DO)(),16),a.traceFlags=r>=0&&r<=255?r:1,a}function y(e,t){var r;if(!e)return null;if((0,n.kJL)(e)&&(e=e[0]||""),!e||!(0,n.HD0)(e)||e[i.R5]>8192)return null;if(-1!==e.indexOf(",")){var o=e[i.w6](",");e=o[t>0&&o[i.R5]>t?t:0]}var s=c.exec((0,n.ndY)(e));return s&&s[1]!==l&&s[2]!==d&&s[3]!==p?((r={version:(s[1]||a.qS)[i.D7](),traceId:(s[2]||a.qS)[i.D7](),spanId:(s[3]||a.qS)[i.D7]()})[i.T0]=parseInt(s[4],16),r):null}function _(e){return h(e,32,d)}function S(e){return h(e,16,p)}function w(e){return!!(e&&h(e[i.PA],2,l)&&h(e[i.nY],32,d)&&h(e[i._d],16,p)&&h(m(e[i.T0]),2))}function E(e){return!!w(e)&&(e[i.T0]&f)===f}function b(e){if(e){var t=m(e[i.T0]);h(t,2)||(t="01");var r=e[i.PA]||u;return"00"!==r&&"ff"!==r&&(r=u),"".concat(r.toLowerCase(),"-").concat(g(e.traceId,32,d).toLowerCase(),"-").concat(g(e.spanId,16,p).toLowerCase(),"-").concat(t.toLowerCase())}return""}function P(e){var t="traceparent",r=y((0,s.ed)(t),e);return r||(r=y((0,s.pI)(t),e)),r}},7372:(e,t,r)=>{"use strict";r.d(t,{Ag:()=>l,D7:()=>n,DI:()=>d,F3:()=>W,Fc:()=>L,Fr:()=>K,Gc:()=>$,Hp:()=>m,I:()=>O,JA:()=>ge,Jd:()=>X,Jz:()=>he,KW:()=>U,Km:()=>de,Kn:()=>ne,LS:()=>j,MW:()=>h,P6:()=>re,PA:()=>F,PL:()=>ae,Po:()=>J,QQ:()=>pe,R5:()=>o,SG:()=>v,T:()=>ue,T0:()=>Se,T1:()=>R,TO:()=>I,Tu:()=>G,VL:()=>y,V_:()=>T,Vv:()=>P,Yz:()=>ie,ZV:()=>f,Z_:()=>N,_d:()=>_e,aV:()=>s,c7:()=>M,cb:()=>g,d:()=>H,eZ:()=>p,fi:()=>V,fm:()=>x,fs:()=>A,g:()=>w,gU:()=>q,i7:()=>ee,jP:()=>D,jW:()=>a,jh:()=>me,jk:()=>te,jx:()=>fe,l8:()=>se,mc:()=>z,nG:()=>S,nY:()=>ye,ob:()=>ce,p$:()=>b,pQ:()=>c,pZ:()=>_,qV:()=>Q,rb:()=>oe,tb:()=>C,tp:()=>ve,uL:()=>k,v1:()=>u,vd:()=>i,w6:()=>Y,wu:()=>le,xv:()=>Z,yl:()=>E,zV:()=>B});var n="toLowerCase",i="blkVal",o="length",s="rdOnly",a="notify",c="warnToConsole",u="throwInternal",l="setDf",d="watch",p="logger",f="apply",h="push",g="splice",m="hdlr",v="cancel",y="initialize",_="identifier",S="removeNotificationListener",w="addNotificationListener",E="isInitialized",b="instrumentationKey",P="INACTIVE",T="value",C="getNotifyMgr",I="getPlugin",O="name",x="iKey",N="time",k="processNext",A="getProcessTelContext",R="pollInternalLogs",D="enabled",j="stopPollingInternalLogs",M="unload",L="onComplete",F="version",U="loggingLevelConsole",B="createNew",V="teardown",$="messageId",q="message",H="isAsync",z="diagLog",W="_doTeardown",G="update",K="getNext",X="setNextPlugin",J="protocol",Q="userAgent",Y="split",Z="nodeType",ee="replace",te="logInternalMessage",re="type",ne="handler",ie="status",oe="getResponseHeader",se="getAllResponseHeaders",ae="isChildEvt",ce="data",ue="getCtx",le="setCtx",de="complete",pe="itemsReceived",fe="urlString",he="sendPOST",ge="headers",me="timeout",ve="setRequestHeader",ye="traceId",_e="spanId",Se="traceFlags"},13107:(e,t,r)=>{"use strict";r.d(t,{Pw:()=>a,V4:()=>c,cb:()=>n,fK:()=>i,hB:()=>s,jA:()=>o});var n="function",i="object",o="undefined",s="prototype",a=Object,c=a[s]},2012:(e,t,r)=>{"use strict";r.d(t,{uc:()=>d,ne:()=>f,$h:()=>h});var n=r(88363),i=r(76761),o=r(71825),s=r(3529);function a(e,t){var r=o.E_;if((0,s.VZ)(e))r="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'";else try{r=JSON.stringify(e,o.Il,t?(0,s.hj)(t)?t:4:o.z_)}catch(e){r=" - "+a(e,t)}return(0,s.Mu)(e)+": "+r}var c=o.Pw.create||function(e){if(!e)return{};var t=typeof e;if(t!==o.$l&&t!==o.cy)throw new TypeError("Prototype must be an Object or function: "+a(e));function r(){}return r[o.sw]=e,new r},u=r(13107),l=(((0,n.Rd)()||{}).Symbol,((0,n.Rd)()||{}).Reflect,"hasOwnProperty"),d=i.z$||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])u.V4[l].call(t,i)&&(e[i]=t[i]);return e},p=function(e,t){return p=u.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t[l](r)&&(e[r]=t[r])},p(e,t)};function f(e,t){function r(){this.constructor=e}typeof t!==u.cb&&null!==t&&function(e){throw new TypeError(e)}("Class extends value "+String(t)+" is not a constructor or null"),p(e,t),e[u.hB]=null===t?c(t):(r[u.hB]=t[u.hB],new r)}function h(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}},3529:(e,t,r)=>{"use strict";r.d(t,{Kn:()=>a,Mu:()=>s,VZ:()=>u,hj:()=>c});var n=r(71825);function i(e){return function(t){return typeof t===e}}function o(e){var t="[object "+e+"]";return function(e){return!(!e||s(e)!==t)}}function s(e){return n.V4.toString.call(e)}function a(e){return!(!e&&function(e){return e===n.Il||function(e){return typeof e===n.i_||e===n.i_}(e)}(e)||!e||typeof e!==n.$l)}n.jd,n.Wu,n.IX,n.i_,i(n.jd),i(n.cy),n.Ch.isArray,o("Date");var c=i(n.Wu),u=(i(n.IX),o("RegExp"),o("File"),o("FormData"),o("Blob"),o("ArrayBuffer"),o("Error"))},88363:(e,t,r)=>{"use strict";r.d(t,{Rd:()=>d});var n,i=r(71825),o="__tsUtils$gblCfg";function s(){var e;return typeof globalThis!==i.i_&&(e=globalThis),e||typeof self===i.i_||(e=self),e||typeof window===i.i_||(e=window),e||typeof global===i.i_||(e=global),e}i.o9;var a,c=i.Pw.defineProperty;i.Pw.defineProperties;var u=function(){a=function(){if(!n){var e=s()||{};n=e[o]=e[o]||{}}return n}(),u=i.Il};var l,d=function(e){return(!l||!1===e||a&&a.lzy&&!l.b)&&(t=s,r=i.Il,l=function(e){var t={};return u&&u(),t.b=a.lzy,c(t,"v",{configurable:!0,get:function(){var r=e();return a.lzy||(c(t,"v",{value:r}),t.b&&delete t.b),a.lzy&&t.b!==a.lzy&&(t.b=a.lzy),r}}),t}((function(){return function(e,t){var r=t;try{r=e()}catch(e){}return r}(t,r)}))),l.v;var t,r}},71825:(e,t,r)=>{"use strict";r.d(t,{$l:()=>u,Ch:()=>v,E_:()=>o,IX:()=>s,Il:()=>i,Pw:()=>g,V4:()=>m,Wu:()=>c,b6:()=>d,cy:()=>a,i_:()=>f,jd:()=>p,o9:()=>h,sw:()=>l,z_:()=>n});var n=void 0,i=null,o="",s="boolean",a="function",c="number",u="object",l="prototype",d="__proto__",p="string",f="undefined",h="value",g=Object,m=g[l],v=(String[l],Array);v[l]},76761:(e,t,r)=>{"use strict";r.d(t,{z$:()=>o});var n=r(71825),i=(r(3529),n.Pw.getOwnPropertyDescriptor);n.Pw.hasOwn;n.Pw.freeze;var o=n.Pw.assign;n.Pw.seal,n.Pw.getPrototypeOf,n.Pw.entries,n.Pw.values},34843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppInsightsCore:()=>gt.F,ApplicationInsights:()=>Tt,Sender:()=>ft,SeverityLevel:()=>bt._,arrForEach:()=>w.tOU,isNullOrUndefined:()=>w.lep,proxyFunctions:()=>S.Vb,throwError:()=>w._yM});var n=r(14635),i=r(2012),o=r(90508),s=r(96938),a=r(39856),c=r(92642),u=r(74486),l=r(94045),d=r(8829),p=r(84124),f=r(13238),h=r(35358),g=r(71464),m=r(88861),v=r(36708),y=r(7082),_=r(38942),S=r(98769),w=r(52631),E=r(33668),b=r(73831),P=r(21328),T=r(38570),C=r(96182),I=r(49233),O=r(68224),x=r(12187),N=r(87781),k=r(18264),A=r(21874),R=r(10733),D=r(15922),j=r(57979),M="duration",L="tags",F="deviceType",U="data",B="name",V="traceID",$="length",q="stringify",H="measurements",z="dataType",W="envelopeType",G="toString",K="_get",X="enqueue",J="count",Q="eventsLimitInMem",Y="push",Z="item",ee="emitLineDelimitedJson",te="clear",re="createNew",ne="markAsSent",ie="clearSent",oe="bufferOverride",se="BUFFER_KEY",ae="SENT_BUFFER_KEY",ce="concat",ue="MAX_BUFFER_SIZE",le="triggerSend",de="diagLog",pe="initialize",fe="_sender",he="customHeaders",ge="maxBatchSizeInBytes",me="onunloadDisableBeacon",ve="isBeaconApiDisabled",ye="alwaysUseXhrOverride",_e="disableXhr",Se="enableSessionStorageBuffer",we="_buffer",Ee="onunloadDisableFetch",be="disableSendBeaconSplit",Pe="instrumentationKey",Te="enableSendPromise",Ce="getSenderInst",Ie="unloadTransports",Oe="convertUndefined",xe="maxBatchInterval",Ne="serialize",ke="_onError",Ae="_onPartialSuccess",Re="_onSuccess",De="itemsReceived",je="itemsAccepted",Me="oriPayload",Le="baseType",Fe="sampleRate",Ue="eventsSendRequest",Be="getSamplingScore",Ve="baseType",$e="baseData",qe="properties",He="true";function ze(e,t,r){return(0,S.sO)(e,t,r,w.fQg)}function We(e,t,r){(0,w.lep)(e)||(0,w.rWU)(e,(function(e,n){(0,w.hj$)(n)?r[e]=n:(0,w.HD0)(n)?t[e]=n:(0,I.nS)()&&(t[e]=(0,I.xA)()[q](n))}))}function Ge(e,t){(0,w.lep)(e)||(0,w.rWU)(e,(function(r,n){e[r]=n||t}))}function Ke(e,t,r,n){var s=new D.w(e,n,t);ze(s,"sampleRate",r[o.fb]),(r[$e]||{}).startTime&&(s.time=(0,S.Y6)(r[$e].startTime)),s.iKey=r.iKey;var a=r.iKey.replace(/-/g,"");return s[B]=s[B].replace("{0}",a),function(e,t,r){var n=r[L]=r[L]||{},o=t.ext=t.ext||{},s=t[L]=t[L]||[],a=o.user;a&&(ze(n,A.Y.userAuthUserId,a.authId),ze(n,A.Y.userId,a.id||a.localId));var c=o.app;c&&ze(n,A.Y.sessionId,c.sesId);var u=o.device;u&&(ze(n,A.Y.deviceId,u.id||u.localId),ze(n,A.Y[F],u.deviceClass),ze(n,A.Y.deviceIp,u.ip),ze(n,A.Y.deviceModel,u.model),ze(n,A.Y[F],u[F]));var l=t.ext.web;if(l){ze(n,A.Y.deviceLanguage,l.browserLang),ze(n,A.Y.deviceBrowserVersion,l.browserVer),ze(n,A.Y.deviceBrowser,l.browser);var d=r[U]=r[U]||{},p=d[$e]=d[$e]||{},f=p[qe]=p[qe]||{};ze(f,"domain",l.domain),ze(f,"isManual",l.isManual?He:null),ze(f,"screenRes",l.screenRes),ze(f,"userConsent",l.userConsent?He:null)}var h=o.os;h&&(ze(n,A.Y.deviceOS,h[B]),ze(n,A.Y.deviceOSVersion,h.osVer));var g=o.trace;g&&(ze(n,A.Y.operationParentId,g.parentID),ze(n,A.Y.operationName,(0,R.O$)(e,g[B])),ze(n,A.Y.operationId,g[V]));for(var m={},v=s[$]-1;v>=0;v--){var y=s[v];(0,w.rWU)(y,(function(e,t){m[e]=t})),s.splice(v,1)}(0,w.rWU)(s,(function(e,t){m[e]=t}));var _=(0,i.uc)((0,i.uc)({},n),m);_[A.Y.internalSdkVersion]||(_[A.Y.internalSdkVersion]=(0,R.O$)(e,"javascript:".concat(Je.Version),64)),r[L]=(0,S.Ax)(_)}(e,r,s),r[L]=r[L]||[],(0,S.Ax)(s)}function Xe(e,t){(0,w.lep)(t[$e])&&(0,_.kP)(e,1,46,"telemetryItem.baseData cannot be null.")}var Je={Version:"3.3.0"};function Qe(e,t,r){Xe(e,t);var n={},i={};t[Ve]!==s.j[z]&&(n.baseTypeSource=t[Ve]),t[Ve]===s.j[z]?(n=t[$e][qe]||{},i=t[$e][H]||{}):t[$e]&&We(t[$e],n,i),We(t[U],n,i),(0,w.lep)(r)||Ge(n,r);var o=t[$e][B],a=new s.j(e,o,n,i),c=new j.V(s.j[z],a);return Ke(e,s.j[W],t,c)}var Ye,Ze,et=function(){function e(t,r){var i=[],o=!1,s=r.maxRetryCnt;this[K]=function(){return i},this._set=function(e){return i=e},(0,n.Z)(e,this,(function(e){e[X]=function(n){e[J]()>=r[Q]?o||((0,_.kP)(t,2,105,"Maximum in-memory buffer size reached: "+e[J](),!0),o=!0):(n.cnt=n.cnt||0,!(0,w.lep)(s)&&n.cnt>s||i[Y](n))},e[J]=function(){return i[$]},e.size=function(){for(var e=i[$],t=0;t<i[$];t++)e+=i[t].item[$];return r[ee]||(e+=2),e},e[te]=function(){i=[],o=!1},e.getItems=function(){return i.slice(0)},e.batchPayloads=function(e){if(e&&e[$]>0){var t=[];return(0,w.tOU)(e,(function(e){t[Y](e[Z])})),r[ee]?t.join("\n"):"["+t.join(",")+"]"}return null},e[re]=function(e,r,n){var o=i.slice(0);e=e||t,r=r||{};var s=n?new nt(e,r):new tt(e,r);return(0,w.tOU)(o,(function(e){s[X](e)})),s}}))}return e.__ieDyn=1,e}(),tt=function(e){function t(r,i){var o=e.call(this,r,i)||this;return(0,n.Z)(t,o,(function(e,t){e[ne]=function(e){t[te]()},e[ie]=function(e){}})),o}return(0,i.ne)(t,e),t.__ieDyn=1,t}(et),rt=["AI_buffer","AI_sentBuffer"],nt=function(e){function t(r,i){var o=e.call(this,r,i)||this,s=!1,a=null==i?void 0:i.namePrefix,c=i[oe]||{getItem:g.Vd,setItem:g.yp},u=c.getItem,l=c.setItem,d=i.maxRetryCnt;return(0,n.Z)(t,o,(function(e,n){var i=m(t[se]),o=m(t[ae]),c=function(){var e=[];try{return(0,w.tOU)(rt,(function(t){var r=E(t);if(e=e[ce](r),a){var n=E(a+"_"+t);e=e[ce](n)}})),e}catch(e){(0,_.kP)(r,2,41,"Transfer events from previous buffers: "+(0,S.jj)(e)+". previous Buffer items can not be removed",{exception:(0,w.eUe)(e)})}return[]}(),p=o[ce](c),f=e._set(i[ce](p));function h(e,t){var r=[],n=[];return(0,w.tOU)(e,(function(e){n[Y](e[Z])})),(0,w.tOU)(t,(function(e){(0,w.mf2)(e)||-1!==(0,w.UAM)(n,e[Z])||r[Y](e)})),r}function m(e){return v(a?a+"_"+e:e)}function v(e){try{var t=u(r,e);if(t){var n=(0,I.xA)().parse(t);if((0,w.HD0)(n)&&(n=(0,I.xA)().parse(n)),n&&(0,w.kJL)(n))return n}}catch(t){(0,_.kP)(r,1,42," storage key: "+e+", "+(0,S.jj)(t),{exception:(0,w.eUe)(t)})}return[]}function y(e,t){var n=e;try{n=a?a+"_"+n:n;var i=JSON[q](t);l(r,n,i)}catch(e){l(r,n,JSON[q]([])),(0,_.kP)(r,2,41," storage key: "+n+", "+(0,S.jj)(e)+". Buffer cleared",{exception:(0,w.eUe)(e)})}}function E(e){try{var t=v(e),n=[];return(0,w.tOU)(t,(function(e){var t={item:e,cnt:0};n[Y](t)})),(0,g.ll)(r,e),n}catch(e){}return[]}f[$]>t[ue]&&(f[$]=t[ue]),y(t[ae],[]),y(t[se],f),e[X]=function(i){e[J]()>=t[ue]?s||((0,_.kP)(r,2,67,"Maximum buffer size reached: "+e[J](),!0),s=!0):(i.cnt=i.cnt||0,!(0,w.lep)(d)&&i.cnt>d||(n[X](i),y(t.BUFFER_KEY,e[K]())))},e[te]=function(){n[te](),y(t.BUFFER_KEY,e[K]()),y(t[ae],[]),s=!1},e[ne]=function(n){y(t[se],e._set(h(n,e[K]())));var i=m(t[ae]);i instanceof Array&&n instanceof Array&&((i=i[ce](n))[$]>t[ue]&&((0,_.kP)(r,1,67,"Sent buffer reached its maximum size: "+i[$],!0),i[$]=t[ue]),y(t[ae],i))},e[ie]=function(e){var r=m(t[ae]);r=h(e,r),y(t[ae],r)},e[re]=function(n,i,o){o=!!o;var s=e[K]().slice(0),a=m(t[ae]).slice(0);n=n||r,i=i||{},e[te]();var c=o?new t(n,i):new tt(n,i);return(0,w.tOU)(s,(function(e){c[X](e)})),o&&c[ne](a),c}})),o}var r;return(0,i.ne)(t,e),r=t,t.VERSION="_1",t.BUFFER_KEY="AI_buffer"+r.VERSION,t.SENT_BUFFER_KEY="AI_sentBuffer"+r.VERSION,t.MAX_BUFFER_SIZE=2e3,t}(et),it=function(){function e(t){(0,n.Z)(e,this,(function(e){function r(e,o){var s="__aiCircularRefCheck",a={};if(!e)return(0,_.kP)(t,1,48,"cannot serialize object because it is null or undefined",{name:o},!0),a;if(e[s])return(0,_.kP)(t,2,50,"Circular reference detected while serializing object",{name:o},!0),a;if(!e.aiDataContract){if("measurements"===o)a=i(e,"number",o);else if("properties"===o)a=i(e,"string",o);else if("tags"===o)a=i(e,"string",o);else if((0,w.kJL)(e))a=n(e,o);else{(0,_.kP)(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{(0,I.xA)()[q](e),a=e}catch(e){(0,_.kP)(t,1,48,e&&(0,w.mf2)(e[G])?e[G]():"Error serializing object",null,!0)}}return a}return e[s]=!0,(0,w.rWU)(e.aiDataContract,(function(i,s){var c=(0,w.mf2)(s)?1&s():1&s,u=(0,w.mf2)(s)?4&s():4&s,l=2&s,d=void 0!==e[i],p=(0,w.Kn2)(e[i])&&null!==e[i];if(!c||d||l){if(!u){var f;void 0!==(f=p?l?n(e[i],i):r(e[i],i):e[i])&&(a[i]=f)}}else(0,_.kP)(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:o})})),delete e[s],a}function n(e,n){var i;if(e)if((0,w.kJL)(e)){i=[];for(var o=0;o<e[$];o++){var s=r(e[o],n+"["+o+"]");i[Y](s)}}else(0,_.kP)(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:n},!0);return i}function i(e,r,n){var i;return e&&(i={},(0,w.rWU)(e,(function(e,o){if("string"===r)void 0===o?i[e]="undefined":null===o?i[e]="null":o[G]?i[e]=o[G]():i[e]="invalid field: toString() is not defined.";else if("number"===r)if(void 0===o)i[e]="undefined";else if(null===o)i[e]="null";else{var s=parseFloat(o);i[e]=s}else i[e]="invalid field: "+n+" is of unknown type.",(0,_.kP)(t,1,i[e],null,!0)}))),i}e[Ne]=function(e){var n=r(e,"root");try{return(0,I.xA)()[q](n)}catch(e){(0,_.kP)(t,1,48,e&&(0,w.mf2)(e[G])?e[G]():"Error serializing object",null,!0)}}}))}return e.__ieDyn=1,e}(),ot=r(28266),st=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[$]<8;)e=e[ce](e);for(var t=5381,r=0;r<e[$];++r)t=(t<<5)+t+e.charCodeAt(r),t&=t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),at=function(){var e=new st,t=new ot.n;this[Be]=function(r){return r[L]&&r[L][t.userId]?e.getHashCodeScore(r[L][t.userId]):r.ext&&r.ext.user&&r.ext.user.id?e.getHashCodeScore(r.ext.user.id):r[L]&&r[L][t.operationId]?e.getHashCodeScore(r[L][t.operationId]):r.ext&&r.ext.telemetryTrace&&r.ext.telemetryTrace[V]?e.getHashCodeScore(r.ext.telemetryTrace[V]):100*Math.random()}},ct=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var r=t||(0,_.vH)(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Fe]=e,this.samplingScoreGenerator=new at}return e.prototype.isSampledIn=function(e){var t=this[Fe];return null==t||t>=100||e.baseType===d.j[z]||this.samplingScoreGenerator[Be](e)<t},e}(),ut=void 0;function lt(e){try{return e.responseText}catch(e){}return null}var dt=(0,w.Hef)(((Ye={endpointUrl:(0,y.gI)(w.fQg,o.cA+o.qp)})[ee]=(0,y.up)(),Ye[xe]=15e3,Ye[ge]=102400,Ye.disableTelemetry=(0,y.up)(),Ye[Se]=(0,y.up)(!0),Ye.isRetryDisabled=(0,y.up)(),Ye[ve]=(0,y.up)(!0),Ye[be]=(0,y.up)(!0),Ye[_e]=(0,y.up)(),Ye[Ee]=(0,y.up)(),Ye[me]=(0,y.up)(),Ye[Pe]=ut,Ye.namePrefix=ut,Ye.samplingPercentage=(0,y.gI)((function(e){return!isNaN(e)&&e>0&&e<=100}),100),Ye[he]=ut,Ye[Oe]=ut,Ye[Q]=1e4,Ye[oe]=!1,Ye.httpXHROverride={isVal:function(e){return e&&e.sendPOST},v:ut},Ye[ye]=(0,y.up)(),Ye.transports=ut,Ye.retryCodes=ut,Ye.maxRetryCnt={isVal:w.hj$,v:10},Ye)),pt=((Ze={})[s.j.dataType]=Qe,Ze[a.f.dataType]=function(e,t,r){Xe(e,t);var n=t[$e].message,i=t[$e].severityLevel,o=t[$e][qe]||{},s=t[$e][H]||{};We(t[U],o,s),(0,w.lep)(r)||Ge(o,r);var c=new a.f(e,n,i,o,s),u=new j.V(a.f[z],c);return Ke(e,a.f[W],t,u)},Ze[c.B.dataType]=function(e,t,r){var n;Xe(e,t);var i=t[$e];(0,w.lep)(i)||(0,w.lep)(i[qe])||(0,w.lep)(i[qe][M])?(0,w.lep)(t[U])||(0,w.lep)(t[U][M])||(n=t[U][M],delete t[U][M]):(n=i[qe][M],delete i[qe][M]);var o,s=t[$e];((t.ext||{}).trace||{})[V]&&(o=t.ext.trace[V]);var a=s.id||o,u=s[B],l=s.uri,d=s[qe]||{},p=s[H]||{};if((0,w.lep)(s.refUri)||(d.refUri=s.refUri),(0,w.lep)(s.pageType)||(d.pageType=s.pageType),(0,w.lep)(s.isLoggedIn)||(d.isLoggedIn=s.isLoggedIn[G]()),!(0,w.lep)(s[qe])){var f=s[qe];(0,w.rWU)(f,(function(e,t){d[e]=t}))}We(t[U],d,p),(0,w.lep)(r)||Ge(d,r);var h=new c.B(e,u,l,n,d,p,a),g=new j.V(c.B[z],h);return Ke(e,c.B[W],t,g)},Ze[u.y.dataType]=function(e,t,r){Xe(e,t);var n=t[$e],i=n[B],o=n.uri||n.url,s=n[qe]||{},a=n[H]||{};We(t[U],s,a),(0,w.lep)(r)||Ge(s,r);var c=new u.y(e,i,o,void 0,s,a,n),l=new j.V(u.y[z],c);return Ke(e,u.y[W],t,l)},Ze[l.Pp.dataType]=function(e,t,r){Xe(e,t);var n=t[$e][H]||{},i=t[$e][qe]||{};We(t[U],i,n),(0,w.lep)(r)||Ge(i,r);var o=t[$e],s=l.Pp.CreateFromInterface(e,o,i,n),a=new j.V(l.Pp[z],s);return Ke(e,l.Pp[W],t,a)},Ze[d.j.dataType]=function(e,t,r){Xe(e,t);var n=t[$e],i=n[qe]||{},o=n[H]||{};We(t[U],i,o),(0,w.lep)(r)||Ge(i,r);var s=new d.j(e,n[B],n.average,n.sampleCount,n.min,n.max,n.stdDev,i,o),a=new j.V(d.j[z],s);return Ke(e,d.j[W],t,a)},Ze[p.H.dataType]=function(e,t,r){Xe(e,t);var n=t[$e][H]||{},i=t[$e][qe]||{};We(t[U],i,n),(0,w.lep)(r)||Ge(i,r);var s=t[$e];if((0,w.lep)(s))return(0,_.jV)(e,"Invalid input for dependency data"),null;var a=s[qe]&&s[qe][o.w$]?s[qe][o.w$]:"GET",c=new p.H(e,s.id,s.target,s[B],s[M],s.success,s.responseCode,a,s.type,s.correlationContext,i,n),u=new j.V(p.H[z],c);return Ke(e,p.H[W],t,u)},Ze),ft=function(e){function t(){var r,i,s,a,c,u,l,d=e.call(this)||this;d.priority=1001,d.identifier=f.BreezeChannelIdentifier;var p,y,k,A,R,D,j,M,F,B,V,q,H,z,W,G,K,Q,ee,se,ae,ce,ue,Be,Ve,$e,qe,He=0;return(0,n.Z)(t,d,(function(e,n){function f(t,n){var i=lt(t);if(!t||i+""!="200"&&""!==i){var o=(0,N.L)(i);o&&o[De]&&o[De]>o[je]&&!z?e[Ae](n,o):e[ke](n,(0,S.Np)(t))}else r=0,e[Re](n,0)}function ze(e,t,r){4===e.readyState&&ot(e.status,t,e.responseURL,r,(0,S.An)(e),lt(e)||e.response)}function We(e){try{if(e){var t=e[Me];return t&&t[$]?t:null}}catch(e){}return null}function Ge(t,r){return!(V||(t?t.baseData&&!t[Le]?(r&&(0,_.kP)(r,1,70,"Cannot send telemetry without baseData and baseType"),1):(t[Le]||(t[Le]="EventData"),e[fe]?(n=t,e._sample.isSampledIn(n)?(t[o.fb]=e._sample[Fe],0):(r&&(0,_.kP)(r,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[Fe]}),1)):(r&&(0,_.kP)(r,1,28,"Sender was not initialized"),1)):(r&&(0,_.kP)(r,1,7,"Cannot send empty telemetry"),1)));var n}function Ke(e,r){var n=e.iKey||q,i=t.constructEnvelope(e,n,r,H);if(i){var s=!1;if(e[L]&&e[L][o.cV]&&((0,w.tOU)(e[L][o.cV],(function(e){try{e&&!1===e(i)&&(s=!0,(0,_.jV)(r,"Telemetry processor check returns false"))}catch(e){(0,_.kP)(r,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,S.jj)(e),{exception:(0,w.eUe)(e)},!0)}})),delete e[L][o.cV]),!s)return i}else(0,_.kP)(r,1,47,"Unable to create an AppInsights envelope")}function Xe(t){var r="",n=e[de]();try{var i=Ge(t,n),o=null;i&&(o=Ke(t,n)),o&&(r=c[Ne](o))}catch(e){}return r}function Je(e){var t="";return e&&e[$]&&(t="["+e.join(",")+"]"),t}function Qe(e){var t,r=et();return(t={urlString:A})[U]=e,t.headers=r,t}function Ye(t,r,n,i){void 0===i&&(i=!0);var o=Ze(r),s=t&&t.sendPOST;return s&&o?(i&&e._buffer[ne](r),s(o,(function(t,n,i){return function(t,r,n,i){200===r&&t?e._onSuccess(t,t[$]):i&&e[ke](t,i)}(r,t,0,i)}),!n)):null}function Ze(t){var r;if((0,w.kJL)(t)&&t[$]>0){var n=e[we].batchPayloads(t),i=et();return(r={})[U]=n,r.urlString=A,r.headers=i,r.disableXhrSync=ae,r.disableFetchKeepAlive=!ce,r[Me]=t,r}return null}function et(){try{var e=l||{};return(0,m.EX)(A)&&(e[v.C[6]]=v.C[7]),e}catch(e){}return null}function rt(t){var r=t?t[$]:0;return e[we].size()+r>D&&(y&&!y.isOnline()||e[le](!0,null,10),!0)}function ot(t,n,i,o,s,a){var c=null;if(e._appId||(c=(0,N.L)(a))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!st(i))return void e[ke](n,s);!z&&vt(t)?(ht(n),(0,_.kP)(e[de](),2,40,". Response code "+t+". Will retry to send "+n[$]+" items.")):e[ke](n,s)}else y&&!y.isOnline()?z||(ht(n,10),(0,_.kP)(e[de](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!y.isOnline(),". Will retry to send ").concat(n.length," items."))):(st(i),206===t?(c||(c=(0,N.L)(a)),c&&!z?e[Ae](n,c):e[ke](n,s)):(r=0,e[Re](n,o)))}function st(e){return!(u>=10||(0,w.lep)(e)||""===e||e===A||(A=e,++u,0))}function at(e,t){if(!p)return Ye($e&&$e[Ce]([3],!0),e,t);p(e,!1)}function pt(e){try{if(e&&e[$])return(0,w.HD0)(e[0])}catch(e){}return null}function ft(t,r){var n=null;if((0,w.kJL)(t)){for(var i=t[$],o=0;o<t[$];o++)i+=t[o].item[$];return $e.getSyncFetchPayload()+i<=65e3?n=2:(0,I.MF)()?n=3:(n=1,(0,_.kP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),Ye($e&&$e[Ce]([n],!0),t,r)}return null}function ht(t,n){if(void 0===n&&(n=1),t&&0!==t[$]){var o=e[we];o[ie](t),r++;for(var s=0,a=t;s<a.length;s++){var c=a[s];c.cnt=c.cnt||0,c.cnt++,o[X](c)}!function(e){var t;if(r<=1)t=10;else{var n=(Math.pow(2,r)-1)/2,o=Math.floor(Math.random()*n*10)+1;o*=e,t=Math.max(Math.min(o,3600),10)}var s=(0,w.Ggd)()+1e3*t;i=s}(n),gt()}}function gt(){if(!a&&!s){var t=i?Math.max(0,i-(0,w.Ggd)()):0,r=Math.max(W,t);a=(0,w.tXR)((function(){a=null,e[le](!0,null,1)}),r)}}function mt(){a&&a.cancel(),a=null,i=null}function vt(e){return(0,w.lep)(qe)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:qe[$]&&qe.indexOf(e)>-1}function yt(){e[fe]=null,e[we]=null,e._appId=null,e._sample=null,l={},y=null,r=0,i=null,s=!1,a=null,c=null,u=0,He=0,p=null,k=null,A=null,R=null,D=0,j=!1,B=null,V=!1,q=null,H=ut,z=!1,G=null,Q=ut,ae=!1,ce=!1,Ve=!1,ue=null,Be=null,$e=null,(0,w.g$V)(e,"_senderConfig",{g:function(){return(0,S.mm)({},dt)}})}yt(),e.pause=function(){mt(),s=!0},e.resume=function(){s&&(s=!1,i=null,rt(),gt())},e.flush=function(t,r,n){if(void 0===t&&(t=!0),!s){mt();try{return e[le](t,null,n||1)}catch(t){(0,_.kP)(e[de](),1,22,"flush failed, telemetry will not be collected: "+(0,S.jj)(t),{exception:(0,w.eUe)(t)})}}},e.onunloadFlush=function(){if(!s)if(j||se)try{return e[le](!0,at,2)}catch(t){(0,_.kP)(e[de](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,S.jj)(t),{exception:(0,w.eUe)(t)})}else e.flush(!1)},e.addHeader=function(e,t){l[e]=t},e[pe]=function(t,o,s,a){e.isInitialized()&&(0,_.kP)(e[de](),1,28,"Sender is already initialized"),n[pe](t,o,s,a);var v=e.identifier;c=new it(o.logger),r=0,i=null,e[fe]=null,u=0;var x=e[de]();k=(0,E.jU)((0,b.J)("Sender"),o.evtNamespace&&o.evtNamespace()),y=(0,h.g)(k),e._addHook((0,P.k)(t,(function(t){var r=t.cfg;r.storagePrefix&&(0,g.mh)(r.storagePrefix);var n=(0,T.CD)(null,r,o).getExtCfg(v,dt);(0,w.g$V)(e,"_senderConfig",{g:function(){return n}}),o.activeStatus()===C.t.PENDING?e.pause():o.activeStatus()===C.t.ACTIVE&&e.resume(),R!==n.endpointUrl&&(A=R=n.endpointUrl),B&&B!==n[he]&&(0,w.tOU)(B,(function(e){delete l[e.header]})),D=n[ge],j=(!1===n[me]||!1===n[ve])&&(0,I.MF)(),M=!1===n[me]&&(0,I.MF)(),F=!1===n[ve]&&(0,I.MF)(),se=n[ye],ae=!!n[_e],qe=n.retryCodes;var i=n[oe],s=!!n[Se]&&(!!i||(0,g.D3)()),a=n.namePrefix,c=s!==G||s&&Q!==a||s&&K!==i;if(e[we]){if(c)try{e._buffer=e._buffer[re](x,n,s)}catch(t){(0,_.kP)(e[de](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+(0,S.jj)(t),{exception:(0,w.eUe)(t)})}rt()}else e[we]=s?new nt(x,n):new tt(x,n);Q=a,G=s,K=i,ce=!n[Ee]&&(0,I.JO)(!0),Ve=!!n[be],e._sample=new ct(n.samplingPercentage,x),function(e,t){var r=t.disableInstrumentationKeyValidation;return!((0,w.lep)(r)||!r)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)}(q=n[Pe],r)||(0,_.kP)(x,1,100,"Invalid Instrumentation key "+q),B=n[he],(0,w.HD0)(A)&&!(0,m.EX)(A)&&B&&B[$]>0?(0,w.tOU)(B,(function(e){d.addHeader(e.header,e.value)})):B=null,ee=n[Te];var u=function(){var t;try{var r={xdrOnComplete:function(e,t,r){var n=We(r);if(n)return f(e,n)},fetchOnComplete:function(e,t,r,n){var i=We(n);if(i)return ot(e.status,i,e.url,i[$],e.statusText,r||"")},xhrOnComplete:function(e,t,r){var n=We(r);if(n)return ze(e,n,n[$])},beaconOnRetry:function(t,r,n){return function(t,r,n){var i=t&&t[Me];if(Ve)Be&&Be(i,!0),(0,_.kP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var o=[],s=0;s<i[$];s++){var a=i[s],c=[a];n(Ze(c),r)?e._onSuccess(c,c[$]):o[Y](a)}o[$]>0&&(Be&&Be(o,!0),(0,_.kP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}(t,r,n)}};return(t={})[Te]=ee,t.isOneDs=!1,t.disableCredentials=!1,t[_e]=ae,t.disableBeacon=!F,t.disableBeaconSync=!M,t.senderOnCompleteCallBack=r,t}catch(e){}return null}();$e?$e.SetConfig(u):($e=new O.s)[pe](u,x);var h=n.httpXHROverride,y=null,E=null,b=(0,S.fM)([3,1,2],n.transports);y=$e&&$e[Ce](b,!1);var P=$e&&$e.getFallbackInst();ue=function(e,t){return Ye(P,e,t)},Be=function(e,t){return Ye(P,e,t,!1)},y=se?h:y||h||P,e[fe]=function(e,t){return Ye(y,e,t)},ce&&(p=ft);var N=(0,S.fM)([3,1],n[Ie]);ce||(N=N.filter((function(e){return 2!==e}))),E=$e&&$e[Ce](N,!0),E=se?h:E||h,(se||n[Ie]||!p)&&E&&(p=function(e,t){return Ye(E,e,t)}),p||(p=ue),V=n.disableTelemetry,H=n[Oe]||ut,z=n.isRetryDisabled,W=n[xe]})))},e.processTelemetry=function(t,r){var n,i=(r=e._getTelCtx(r))[de]();try{if(!Ge(t,i))return;var o=Ke(t,i);if(!o)return;var s=c[Ne](o),a=e[we];rt(s);var u=((n={})[Z]=s,n.cnt=0,n);a[X](u),gt()}catch(e){(0,_.kP)(i,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,S.jj)(e),{exception:(0,w.eUe)(e)})}e.processNext(t,r)},e.isCompletelyIdle=function(){return!s&&0===He&&0===e._buffer[J]()},e._xhrReadyStateChange=function(e,t,r){if(!pt(t))return ze(e,t,r)},e[le]=function(t,r,n){var i;if(void 0===t&&(t=!0),!s)try{var o=e[we];if(V)o[te]();else{if(o[J]()>0){var a=o.getItems();!function(t,r){var n,i=(n="getNotifyMgr",e.core[n]?e.core[n]():e.core._notificationManager);if(i&&i[Ue])try{i[Ue](t,r)}catch(t){(0,_.kP)(e[de](),1,74,"send request notification failed: "+(0,S.jj)(t),{exception:(0,w.eUe)(t)})}}(n||0,t),i=r?r.call(e,a,t):e[fe](a,t)}new Date}mt()}catch(t){var c=(0,I.sA)();(!c||c>9)&&(0,_.kP)(e[de](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,S.jj)(t),{exception:(0,w.eUe)(t)})}return i},e.getOfflineSupport=function(){var e;return(e={getUrl:function(){return A},createPayload:Qe})[Ne]=Xe,e.batch=Je,e.shouldProcess=function(e){return!!Ge(e)},e},e._doTeardown=function(t,r){e.onunloadFlush(),(0,x.e)(y,!1),yt()},e[ke]=function(t,r,n){if(!pt(t))return function(t,r,n){(0,_.kP)(e[de](),2,26,"Failed to send telemetry.",{message:r}),e._buffer&&e._buffer[ie](t)}(t,r)},e[Ae]=function(t,r){if(!pt(t))return function(t,r){for(var n=[],i=[],o=0,s=r.errors.reverse();o<s.length;o++){var a=s[o],c=t.splice(a.index,1)[0];vt(a.statusCode)?i[Y](c):n[Y](c)}t[$]>0&&e[Re](t,r[je]),n[$]>0&&e[ke](n,(0,S.An)(null,["partial success",r[je],"of",r.itemsReceived].join(" "))),i[$]>0&&(ht(i),(0,_.kP)(e[de](),2,40,"Partial success. Delivered: "+t[$]+", Failed: "+n[$]+". Will retry to send "+i[$]+" our of "+r[De]+" items"))}(t,r)},e[Re]=function(t,r){if(!pt(t))return function(t,r){e._buffer&&e._buffer[ie](t)}(t)},e._xdrOnLoad=function(e,t){if(!pt(t))return f(e,t)}})),d}return(0,i.ne)(t,e),t.constructEnvelope=function(e,t,r,n){var o;return o=t===e.iKey||(0,w.lep)(t)?e:(0,i.uc)((0,i.uc)({},e),{iKey:t}),(pt[o.baseType]||Qe)(r,o,n)},t}(k.i),ht=r(80673),gt=r(69451),mt=r(90862),vt="instrumentationKey",yt="connectionString",_t="instrumentationkey",St="endpointUrl",wt="ingestionendpoint",Et="userOverrideEndpointUrl",bt=r(88967),Pt={diagnosticLogInterval:(0,y.gI)((function(e){return e&&e>0}),1e4)},Tt=function(){function e(t){var r,i=new gt.F;function s(e){e&&(e.baseData=e.baseData||{},e.baseType=e.baseType||"EventData"),i.track(e)}((0,w.lep)(t)||(0,w.lep)(t[vt])&&(0,w.lep)(t[yt]))&&(0,w._yM)("Invalid input configuration"),(0,n.Z)(e,this,(function(e){function n(){var e=(0,P.o)(t||{},Pt);r=e.cfg,i.addUnloadHook((0,P.k)(e,(function(){var e=r[yt];if((0,w.y8_)(e)){var t=(0,mt.PC)((function(t,n){(0,mt.Zm)(e,(function(e){var n=e.value,i=r[vt];!e.rejected&&n&&(r[yt]=n,i=(0,ht.X)(n)[_t]||i),t(i)}))})),n=(0,mt.PC)((function(t,n){(0,mt.Zm)(e,(function(e){var n=e.value,i=r[St];if(!e.rejected&&n){var s=(0,ht.X)(n)[wt];i=s?s+o.qp:i}t(i)}))}));r[vt]=t,r[St]=r[Et]||n}if((0,w.HD0)(e)){var i=(0,ht.X)(e),s=i[wt];r[St]=r[Et]?r[Et]:s+o.qp,r[vt]=i[_t]||r[vt]}r[St]=r[Et]?r[Et]:r[St]}))),i.initialize(r,[new ft])}(0,w.g$V)(e,"config",{g:function(){return r}}),n(),e.initialize=n,e.track=s,(0,S.Vb)(e,i,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"])}))}return e.__ieDyn=1,e}()},82398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionController=void 0;const n=r(39474),i=r(62546),o=r(83176),s=r(49352);t.CollectionController=class{_context;_serviceBroker;_logger;_telemetryService;_sessionsData=new Map;_collectionService;constructor(e,t,r,n){this._context=e,this._serviceBroker=t,this._logger=r,this._telemetryService=n}async initialize(){const e=await this._serviceBroker.getProxy(n.Descriptors.collectionService);e?(this._collectionService=e,this._context.subscriptions.push(this._collectionService)):this._logger.log("CodeCoverage: Unable to get report service")}dispose(){this._collectionService?.dispose()}async setupCoverageProfile(e){let t=await(0,o.getReportController)();e.loadDetailedCoverage=(e,r,n)=>t.loadDetailedCoverage(r)}async start(e,t,r,n,o){if(!this._collectionService)return this._logger.log("CodeCoverage: Collection service not initialized"),t;if(this._sessionsData.has(e))return this._logger.log("CodeCoverage: Session already started"),t;try{this._sessionsData.set(e,new i.SessionData(e,o,n,r));const s={sessionId:e,runSettings:t,sourceDirectories:n,sourceFiles:o};return await this._collectionService.start(s)}catch(r){return this._logger.log(`CodeCoverage: Error starting coverage collection: ${r}`),this._sessionsData.delete(e),t}}async stop(e){if(!this._collectionService)return void this._logger.log("CodeCoverage: Collection service not initialized");const t=this._sessionsData.get(e);if(!t)return void this._logger.log("CodeCoverage: Active run not initialized");const r=await this._collectionService.stop(e);if(this._telemetryService.sendTelemetryEvent(s.TelemetryEventNames.CoverageCollectionServerEvent,{},{[s.TelemetryEventNames.SourceDirectoriesCountProperty]:t.sourceDirectories?.length||0,[s.TelemetryEventNames.SourceFilesCountProperty]:t.sourceFiles?.length||0,[s.TelemetryEventNames.ReportsCountProperty]:r.length,[s.TelemetryEventNames.TimeProperty]:performance.now()-t.startTime}),0===r.length)return void this._logger.log("CodeCoverage: No reports generated");let n=await(0,o.getReportController)();for(const e of r)this._logger.log(`CodeCoverage: Report generated: ${e}`),t.testRun?await n.showCoverageReport(e,t.testRun):await n.openCoverageReport(e);this._sessionsData.delete(e)}}},87065:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE_COVERAGE_DISPLAY_NAME=t.COVERAGE_CONTROLLER_ID=t.CODE_COVERAGE_ID=void 0,t.CODE_COVERAGE_ID="csdevkit-code-coverage",t.COVERAGE_CONTROLLER_ID="csdevkit-coverage-controller",t.CODE_COVERAGE_DISPLAY_NAME="C# Dev Kit - Code Coverage"},62546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionData=t.CollectionServerData=void 0,t.CollectionServerData=class{sessionId="";runSettings="";sourceDirectories=[];sourceFiles=[]},t.SessionData=class{sessionId="";sourceFiles=[];sourceDirectories=[];testRun;startTime=0;constructor(e,t,r,n){this.sessionId=e,this.sourceFiles=t,this.sourceDirectories=r,this.testRun=n,this.startTime=performance.now()}}},39474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Descriptors=void 0;const n=r(71620);class i{static reportService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.CodeCoverage.VSCode.ReportService","1.0"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static collectionService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.CodeCoverage.VSCode.CollectionService","1.0"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}))}t.Descriptors=i},23960:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CoverageStatus=t.LineCoverageData=t.CoverageFileData=t.CoverageRunData=void 0,t.CoverageRunData=class{fileCoverageData=[]},t.CoverageFileData=class{path="";linesCovered=0;linesNotCovered=0;linesPartiallyCovered=0;linesCoverageData=[]},t.LineCoverageData=class{coverageStatus=r.notCovered;startLine=0;endLine=0;startColumn=0;endColumn=0;blocksCovered=0;blocksNotCovered=0},function(e){e[e.covered=0]="covered",e[e.notCovered=1]="notCovered",e[e.partiallyCovered=2]="partiallyCovered"}(r=t.CoverageStatus||(t.CoverageStatus={}))},97809:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoverageController=void 0;const n=r(15603),i=r(82398),o=r(88262);t.CoverageController=class{_reportController;_collectionController;_telemetryService;constructor(e,t,r){this._telemetryService=new o.TelemetryService(e,r),this._reportController=new n.ReportController(e,t,r,this._telemetryService),this._collectionController=new i.CollectionController(e,t,r,this._telemetryService)}async initialize(){await this._reportController.initialize(),await this._collectionController.initialize()}dispose(){this._reportController.dispose(),this._collectionController.dispose(),this._telemetryService.dispose()}async getReportController(){return this._reportController}async getCollectionController(){return this._collectionController}}},16439:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.openCoverageFile=void 0;const s=o(r(89496)),a={canSelectMany:!1,openLabel:"Open coverage file",canSelectFolders:!1,filters:{"Coverage files":["coverage"],"Cobertura files":["cobertura.xml"],"Xml files":["xml"],"All files":["*"]}};t.openCoverageFile=async function(){return await s.window.showOpenDialog(a).then((e=>{if(e&&e[0])return e[0].fsPath}))}},83176:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getCollectionController=t.getReportController=t.createCoverageControllers=void 0;const s=o(r(89496)),a=r(7320),c=r(97809),u=r(21542),l=new s.EventEmitter,d=new Promise((e=>l.event(e)));t.createCoverageControllers=async function(e,t,r){const n=new a.Logger;try{u.Strings.initialize(r);const i=new c.CoverageController(e,t,n);n.log("Created Coverage Controller"),await i.initialize(),l.fire(i),e.subscriptions.push(i)}catch(e){n.log(`unable to create coverage controller for c# extension: ${e}`)}},t.getReportController=async function(){const e=await d;return await e.getReportController()},t.getCollectionController=async function(){const e=await d;return await e.getCollectionController()}},7320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const n=r(89496),i=r(87065);t.Logger=class{outputChannel;constructor(){this.outputChannel=n.window.createOutputChannel(i.CODE_COVERAGE_DISPLAY_NAME)}log(e){this.outputChannel.appendLine(e)}logAndThrow(e){throw this.log(e),new Error(e)}}},15603:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportController=void 0;const s=o(r(89496)),a=r(23960),c=r(39474),u=r(21542),l=r(16439),d=r(87065),p=r(49352);t.ReportController=class{_context;_serviceBroker;_logger;_telemetryService;_controller;_runProfile;_coverageData=new WeakMap;_reportService;constructor(e,t,r,n){this._context=e,this._serviceBroker=t,this._logger=r,this._telemetryService=n,this._controller=s.tests.createTestController(d.COVERAGE_CONTROLLER_ID,d.CODE_COVERAGE_DISPLAY_NAME),this._runProfile=this._controller.createRunProfile("Coverage",s.TestRunProfileKind.Coverage,((e,t)=>{})),this._runProfile.loadDetailedCoverage=(e,t,r)=>this.loadDetailedCoverage(t)}async initialize(){const e=await this._serviceBroker.getProxy(c.Descriptors.reportService);e?(this._reportService=e,this._context.subscriptions.push(this._reportService)):this._logger.logAndThrow("Unable to get report service")}dispose(){this._runProfile.dispose(),this._controller.dispose(),this._reportService?.dispose()}async loadDetailedCoverage(e){return this._coverageData.get(e)||[]}async openCoverageReport(e){if(!this._reportService)return void this._logger.log("Report service not available");if(!e&&!(e=await(0,l.openCoverageFile)()))return;var t=new s.TestRunRequest(void 0,void 0,this._runProfile);const r=this._controller.createTestRun(t,"Coverage",!1);await this.showCoverageReport(e,r),r.end()}async showCoverageReport(e,t){if(this._reportService)try{const r=performance.now(),n=await this._reportService.getReport(e);for(let e of n.fileCoverageData){const r=new s.FileCoverage(s.Uri.file(e.path),new s.TestCoverageCount(e.linesCovered+e.linesPartiallyCovered,e.linesCovered+e.linesNotCovered+e.linesPartiallyCovered));this._coverageData.set(r,this.getLines(e)),t.addCoverage(r)}this._telemetryService.sendTelemetryEvent(p.TelemetryEventNames.LoadReportEvent,{},{[p.TelemetryEventNames.ModulesCountProperty]:n.fileCoverageData.length,[p.TelemetryEventNames.TimeProperty]:performance.now()-r})}catch(e){s.window.showErrorMessage(u.Strings.get("invalidCoverageFile"))}else this._logger.log("Report service not available")}getLines(e){let t=new Array;for(let r of e.linesCoverageData){const e=r.coverageStatus===a.CoverageStatus.covered,n=this.getRangeOrPosition(r);if(1===r.blocksCovered+r.blocksNotCovered){const r=new s.StatementCoverage(e,n);t.push(r)}else{const i=new Array;for(let e=0;e<r.blocksCovered;e++)i.push(new s.BranchCoverage(!0,n));for(let e=0;e<r.blocksNotCovered;e++)i.push(new s.BranchCoverage(!1,n));const o=new s.StatementCoverage(e,n,i);t.push(o)}}return t}getRangeOrPosition(e){let t=e.startLine-1,r=e.endLine-1,n=0===e.startColumn?0:e.startColumn-1,i=0===e.endColumn?0:e.endColumn-1;return t===r&&n===i&&0===n?new s.Position(t,n):new s.Range(t,n,r,i)}}},21542:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Strings=void 0;class r{static _strings;static initialize(e){r._strings=e}static get(e){if(!r._strings)return"<< Error loading localized string >>";return r._strings[e]||"<< Error loading localized string >>"}}t.Strings=r},49352:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEventNames=void 0,t.TelemetryEventNames=class{static LoadReportEvent="vs/codecoverage/vscode/report/load";static CoverageCollectionServerEvent="vs/codecoverage/vscode/collection";static ModulesCountProperty="vs.codecoverage.vscode.modulesCount";static ReportsCountProperty="vs.codecoverage.vscode.reportsCount";static SourceFilesCountProperty="vs.codecoverage.vscode.sourceFilesCount";static SourceDirectoriesCountProperty="vs.codecoverage.vscode.sourceDirectoriesCount";static TimeProperty="vs.codecoverage.vscode.time"}},88262:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryService=void 0;const i=n(r(92291));t.TelemetryService=class{_telemetryReporter;_telemetryLogger;_loggingEnabled;constructor(e,t,r=!1){this._loggingEnabled=r,this._telemetryLogger=t;try{this._telemetryReporter=new i.default(e.extension.packageJSON.aiKey),e.subscriptions.push(this._telemetryReporter)}catch(e){this._loggingEnabled&&this._telemetryLogger.log(`Failed to create TelemetryReporter due to ${e}`),this._telemetryReporter=void 0}}sendTelemetryEvent(e,t,r){this.outputTelemetryToLog(e,t,r),this._telemetryReporter?.sendTelemetryEvent(e,t,r)}sendTelemetryErrorEvent(e,t,r){this._telemetryReporter?.sendTelemetryErrorEvent(e,t,r)}outputTelemetryToLog(e,t,r){if(this._loggingEnabled){if(this._telemetryLogger.log(`Event: ${e}`),void 0!==t){this._telemetryLogger.log("Properties");for(const e in t)this._telemetryLogger.log(`  ${e}: ${t[e]}`)}if(void 0!==r){this._telemetryLogger.log("Measurements");for(const e in r)this._telemetryLogger.log(`  ${e}: ${r[e]}`)}this._telemetryLogger.log("")}}async dispose(){if(void 0!==this._telemetryReporter)return await this._telemetryReporter.dispose()}}},69678:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationServiceClient=void 0;const i=n(r(39491)),o=n(r(9593));t.AuthorizationServiceClient=class{authService;ownsAuthService;isDisposed=!1;constructor(e,t=!0){this.authService=e,this.ownsAuthService=t,(0,i.default)(e),this.authService=e}async getCredentials(e=o.default.CONTINUE){if(this.isDisposed)throw new Error("Object is disposed");return await this.authService.getCredentials(e)}async checkAuthorization(e,t=o.default.CONTINUE){if((0,i.default)(e),this.isDisposed)throw new Error("Object is disposed");return await this.authService.checkAuthorization(e,t)}dispose(){this.isDisposed=!0,this.ownsAuthService&&this.authService.dispose()}}},57850:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BE32MessageWriter=t.BE32MessageReader=void 0;const i=r(74389),o=n(r(9593)),s=r(12781),a=r(84017),c=r(17850);class u extends i.AbstractMessageReader{readable;decoder;constructor(e,t){super(),this.readable=e,this.decoder=t}listen(e){this.readable.on("error",(e=>this.fireError(e)));const t=o.default.create();return(async()=>{try{for(;;){const r=await(0,c.getBufferFrom)(this.readable,4,!0,t.token);if(!r)return void this.fireClose();const n=r.readInt32BE(0),i=await(0,c.getBufferFrom)(this.readable,n,!1,t.token),o=await this.decoder(i);e(o)}}catch(e){this.fireError(e)}})(),i.Disposable.create((()=>t.cancel()))}}t.BE32MessageReader=u;class l extends i.AbstractMessageWriter{writable;encoder;semaphore=new a.Semaphore(1);headerBuffer=Buffer.alloc(4);errorCount=0;constructor(e,t){super(),this.writable=e,this.encoder=t,e.on("error",(e=>this.fireError([e,void 0,void 0]))),e.once("close",(()=>this.fireClose()))}async write(e){await this.semaphore.use((async()=>{try{const t=await this.encoder(e);this.headerBuffer.writeInt32BE(t.byteLength,0),this.writable instanceof s.Writable&&this.writable.cork();const r=Promise.all([(0,c.writeAsync)(this.writable,this.headerBuffer),(0,c.writeAsync)(this.writable,t)]);this.writable instanceof s.Writable&&this.writable.uncork(),await r}catch(e){this.errorCount++,this.fireError([d(e),void 0,this.errorCount])}}))}end(){this.writable.end()}}function d(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${"string"==typeof e.message?e.message:"unknown"}`)}t.BE32MessageWriter=l},79819:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenAdapters=void 0;const i=n(r(9593)),o=r(74389);t.CancellationTokenAdapters=class{static isVSCode(e){return o.CancellationToken.is(e)}static isCancellationToken(e){return e&&!function(e){return e&&void 0!==e.ImAProxy}(e)&&"function"==typeof e.throwIfCancelled&&"function"==typeof e.onCancelled&&void 0!==e.isCancelled&&void 0!==e.canBeCancelled}static vscodeToCancellationToken(e){if(e.isCancellationRequested)return i.default.CANCELLED;if(e===o.CancellationToken.None)return i.default.CONTINUE;{const t=i.default.create();return e.onCancellationRequested((e=>t.cancel())),t.token}}static cancellationTokenToVSCode(e){if(e.isCancelled)return o.CancellationToken.Cancelled;if(e.canBeCancelled){const t=new o.CancellationTokenSource;return e.onCancelled((e=>t.cancel())),t.token}return o.CancellationToken.None}}},68444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameworkServices=void 0;const n=r(75374),i=r(44280),o=r(94305);class s{static remoteServiceBroker=Object.freeze(new i.ServiceJsonRpcDescriptor(o.ServiceMoniker.create("RemoteServiceBroker"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static authorization=Object.freeze(new i.ServiceJsonRpcDescriptor(o.ServiceMoniker.create("Microsoft.ServiceHub.Framework.AuthorizationService"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders))}t.FrameworkServices=s},41429:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.IDisposable=void 0,function(e){e.is=function(e){return"function"==typeof e.dispose}}(r||(t.IDisposable=r={}))},42451:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcRelayServiceBroker=void 0;const n=r(75374),i=r(82361),o=r(5861),s=r(41808),a=r(71017);class c extends i{serviceBroker;static _rpcEventNames=Object.freeze(["availabilityChanged"]);rpcEventNames=c._rpcEventNames;completion;channelsOfferedToClient={};disposed;constructor(e){super(),this.serviceBroker=e,e.on("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.completion=new Promise((e=>this.disposed=e))}handshake(e,t){if(!n.RemoteServiceConnections.contains(e.supportedConnections,n.RemoteServiceConnections.IpcPipe))throw new Error("The client must support IpcPipe to use this service broker.");return Promise.resolve()}async requestServiceChannel(e,t,r){const i=await this.serviceBroker.getPipe(e,t,r);if(!i)return{};const c=(0,o.v4)(),u=a.join(n.PIPE_NAME_PREFIX,(0,o.v4)()),l=(0,s.createServer)((e=>{delete this.channelsOfferedToClient[c],e.pipe(i),i.pipe(e)}));return l.listen(u),this.channelsOfferedToClient[c]=l,{requestId:c,pipeName:u}}cancelServiceRequest(e,t){const r=this.channelsOfferedToClient[e];return r?(delete this.channelsOfferedToClient[e],r.close(),Promise.resolve()):Promise.reject("Request to cancel a channel that is not awaiting acceptance.")}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged.bind(this));for(const e in this.channelsOfferedToClient)this.channelsOfferedToClient[e].close(),delete this.channelsOfferedToClient[e];this.disposed&&this.disposed()}onAvailabilityChanged(e){this.emit("availabilityChanged",e)}}t.IpcRelayServiceBroker=c},17430:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingRelayServiceBroker=void 0;const i=r(75374),o=r(82361),s=r(33543),a=r(68444),c=n(r(5458)),u=r(5861);class l extends o{serviceBroker;multiplexingStreamWithClient;multiplexingStreamWithRemoteClientOwned;static _rpcEventNames=Object.freeze(["availabilityChanged"]);channelsOfferedToClient={};completion;rpcEventNames=l._rpcEventNames;disposed;constructor(e,t,r){super(),this.serviceBroker=e,this.multiplexingStreamWithClient=t,this.multiplexingStreamWithRemoteClientOwned=r,e.on("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.completion=new Promise((e=>this.disposed=e))}static async connectToServer(e,t,r){try{const n=await s.MultiplexingStream.CreateAsync(t,void 0,r),i=await n.offerChannelAsync("",void 0,r),o=new l(e,n,!0);return a.FrameworkServices.remoteServiceBroker.constructRpc(o,i),o}catch(e){throw t.end(),e}}handshake(e,t){if(!i.RemoteServiceConnections.contains(e.supportedConnections,i.RemoteServiceConnections.Multiplexing))throw new Error("The client must support multiplexing to use this service broker.");return Promise.resolve()}async requestServiceChannel(e,t,r){const n=(0,u.v4)();(t=t?{...t}:{}).multiplexingStream=this.multiplexingStreamWithClient;const i=await this.serviceBroker.getPipe(e,t,r);if(!i)return{};const o=this.multiplexingStreamWithClient.createChannel();return o.stream.pipe(i),i.pipe(o.stream),this.channelsOfferedToClient[n]=o,(0,c.default)(o.acceptance.finally((()=>delete this.channelsOfferedToClient[n]))),{requestId:n,multiplexingChannelId:o.qualifiedId.id}}async cancelServiceRequest(e,t){const r=this.channelsOfferedToClient[e];return r?(r.dispose(),Promise.resolve()):Promise.reject("Request to cancel a channel that is not awaiting acceptance.")}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.multiplexingStreamWithRemoteClientOwned&&this.multiplexingStreamWithClient.dispose(),this.disposed&&this.disposed()}onAvailabilityChanged(e){this.emit("availabilityChanged",e)}}t.MultiplexingRelayServiceBroker=l},38616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStreamMessageWriter=t.NodeStreamMessageReader=void 0;const n=r(74389);class i extends n.ReadableStreamMessageReader{constructor(e,t){super(new s(e),t)}}t.NodeStreamMessageReader=i;class o extends n.WriteableStreamMessageWriter{constructor(e,t){super(new a(e),t)}}t.NodeStreamMessageWriter=o;class s{stream;constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),n.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),n.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),n.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),n.Disposable.create((()=>this.stream.off("data",e)))}}class a{stream;constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),n.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),n.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),n.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((r,n)=>{const i=e=>{null==e?r():n(e)};"string"==typeof e?this.stream.write(e,t,i):this.stream.write(e,i)}))}end(){this.stream.end()}}},46836:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProtectedOperation=void 0;const i=n(r(39491));var o;!function(e){e.create=function(e,t){return Object.freeze({operationMoniker:e,requiredTrustLevel:t})},e.isSupersetOf=function(e,t){return(0,i.default)(e),(0,i.default)(t),e.operationMoniker===t.operationMoniker&&(e.requiredTrustLevel===t.requiredTrustLevel||!!e.requiredTrustLevel&&!!t.requiredTrustLevel&&e.requiredTrustLevel>t.requiredTrustLevel)},e.equals=function(e,t){return e===t||!(!e||!t)&&e.operationMoniker===t.operationMoniker&&e.requiredTrustLevel===t.requiredTrustLevel}}(o||(t.ProtectedOperation=o={}))},59200:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceBroker=void 0;const i=n(r(39491)),o=n(r(9593)),s=r(82361),a=r(33543),c=r(69678),u=r(75374),l=r(4817),d=r(7145),p=r(41808),f=r(68444);class h extends s.EventEmitter{serviceBroker;multiplexingStream;static fullConnectionSupport=u.RemoteServiceConnections.Multiplexing|u.RemoteServiceConnections.IpcPipe;static async connectToDuplex(e,t=o.default.CONTINUE){(0,i.default)(e);const r=f.FrameworkServices.remoteServiceBroker.constructRpc(e);return await h.initializeBrokerConnection(r,t)}static async connectToRemoteServiceBroker(e,t=o.default.CONTINUE){return(0,i.default)(e),await h.initializeBrokerConnection(e,t)}static async connectToMultiplexingDuplex(e,t,r=o.default.CONTINUE){(0,i.default)(e);const n=await a.MultiplexingStream.CreateAsync(e,t,r),s=await n.acceptChannelAsync("",void 0,r),c=f.FrameworkServices.remoteServiceBroker.constructRpc(s.stream),u=await this.connectToMultiplexingRemoteServiceBroker(c,n,r);return u.ownsMxStream=!0,u}static async connectToMultiplexingRemoteServiceBroker(e,t,r=o.default.CONTINUE){(0,i.default)(e),(0,i.default)(t);const n={supportedConnections:h.fullConnectionSupport},s=await h.initializeBrokerConnection(e,r,n,t);return s.ownsMxStream=!1,s}static async initializeBrokerConnection(e,t=o.default.CONTINUE,r,n){if(!r){let e=this.fullConnectionSupport;n||(e&=~u.RemoteServiceConnections.Multiplexing),r={supportedConnections:e}}try{await e.handshake(r,t)}catch(t){const r=e;throw"function"==typeof r.dispose&&r.dispose(),t}return new h(e,r,n)}isDisposed=!1;ownsMxStream=!1;defaultClientCulture="en-US";defaultClientUICulture="en-US";authorizationClient;constructor(e,t,r){super(),this.serviceBroker=e,this.multiplexingStream=r,(0,i.default)(e),(0,i.default)(t),u.RemoteServiceConnections.contains(t.supportedConnections,u.RemoteServiceConnections.Multiplexing)&&(0,i.default)(r),this.serviceBroker.on("availabilityChanged",(e=>{this.emit("availabilityChanged",e)}))}setAuthorizationService(e){(0,i.default)(e),this.authorizationClient?.dispose(),this.authorizationClient=new c.AuthorizationServiceClient(e)}async getProxy(e,t,r=o.default.CONTINUE){let n;(0,i.default)(e),t=t||{clientCulture:this.defaultClientCulture,clientUICulture:this.defaultClientUICulture},t=await this.applyAuthorization(t,r);let s={};try{if(s=await this.serviceBroker.requestServiceChannel(e.moniker,t,r),!s||l.RemoteServiceConnectionInfo.isEmpty(s))return null;if(s.multiplexingChannelId&&this.multiplexingStream)n=await this.multiplexingStream.acceptChannel(s.multiplexingChannelId);else{if(!s.pipeName)throw new Error("Unsupported connection type");{const e="win32"!==process.platform||s.pipeName.startsWith(u.PIPE_NAME_PREFIX)?s.pipeName:u.PIPE_NAME_PREFIX+s.pipeName;n=(0,p.createConnection)(e)}}}catch(e){throw(0,d.isReadWriteStream)(n)?n.end():(0,d.isChannel)(n)&&n.dispose(),s?.requestId&&await this.serviceBroker.cancelServiceRequest(s.requestId,r),e}return e.constructRpc(t?.clientRpcTarget,n)}async getPipe(e,t,r=o.default.CONTINUE){if((0,i.default)(e),t=t||{clientCulture:this.defaultClientCulture,clientUICulture:this.defaultClientUICulture},(t=await this.applyAuthorization(t,r)).clientRpcTarget)throw new Error("Cannot connect pipe to service with client RPC target");let n={},s=null,a=null;try{if(n=await this.serviceBroker.requestServiceChannel(e,t,r),!n||l.RemoteServiceConnectionInfo.isEmpty(n))return null;if(!n.multiplexingChannelId||!this.multiplexingStream)throw n.pipeName?new Error("Cannot connect to named pipe"):new Error("Unsupported connection type");return a=await this.multiplexingStream.acceptChannel(n.multiplexingChannelId),s=a.stream,s}catch(e){throw a?.dispose(),s?.end(),!s&&n?.requestId&&await this.serviceBroker.cancelServiceRequest(n.requestId,r),e}}dispose(){this.isDisposed=!0,this.serviceBroker.removeAllListeners(u.availabilityChangedEvent);const e=this.serviceBroker;"function"==typeof e.dispose&&e.dispose(),this.authorizationClient?.dispose(),this.multiplexingStream&&this.ownsMxStream&&this.multiplexingStream.dispose()}async applyAuthorization(e,t){return this.authorizationClient&&!e.clientCredentials&&(e.clientCredentials=await this.authorizationClient.getCredentials(t)),e}}t.RemoteServiceBroker=h},4817:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceConnectionInfo=void 0,function(e){e.isEmpty=function(e){return!e.multiplexingChannelId&&!e.requestId&&!e.pipeName},e.isOneOf=function(e,t){return!!e.multiplexingChannelId&&t.indexOf("multiplexing")>-1}}(r||(t.RemoteServiceConnectionInfo=r={}))},44280:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcConnection=t.ServiceJsonRpcDescriptor=void 0;const s=r(95028),a=r(75374),c=r(94305),u=r(78444),l=r(7145),d=r(57850),p=o(r(87323)),f=r(33543),h=r(12781),g=r(38616),m=r(14107);class v extends u.ServiceRpcDescriptor{formatter;messageDelimiter;protocol="json-rpc";multiplexingStreamOptions;connectionFactory;constructor(e,t,r,n){let i,o;switch(super(e),this.formatter=t,this.messageDelimiter=r,t){case a.Formatters.Utf8:i=e=>Promise.resolve(Buffer.from(JSON.stringify(e))),o=e=>JSON.parse(e.toString());break;case a.Formatters.MessagePack:i=e=>Promise.resolve(p.encode(e)),o=e=>p.decode(e);break;default:throw new Error(`Unsupported formatter: ${t}.`)}if(this.multiplexingStreamOptions=void 0===n?void 0:Object.freeze(n),r===a.MessageDelimiters.HttpLikeHeaders){if(t!==a.Formatters.Utf8)throw new Error("Utf8 is the only formatter supported while using HttpLikeHeaders.");this.connectionFactory=e=>(0,s.createMessageConnection)(new g.NodeStreamMessageReader(e),new g.NodeStreamMessageWriter(e))}else{if(r!==a.MessageDelimiters.BigEndianInt32LengthHeader)throw new Error(`Unsupported message delimiter: ${r}.`);this.connectionFactory=e=>(0,s.createMessageConnection)(new d.BE32MessageReader(e,o),new d.BE32MessageWriter(e,i))}}constructRpcConnection(e){if(this.multiplexingStreamOptions){const t=this.createSeedChannels();let r=(0,l.isChannel)(e)?e.stream:e;const n=f.MultiplexingStream.Create(r,t),i=n.acceptChannel(0);return i.completion.finally((()=>n.dispose())),new _((0,l.constructMessageConnection)(i,this.connectionFactory))}return new _((0,l.constructMessageConnection)(e,this.connectionFactory))}equals(e){return!!(e&&e instanceof v)&&!!c.ServiceMoniker.equals(e.moniker,this.moniker)&&this.formatter===e.formatter&&this.messageDelimiter===e.messageDelimiter}createSeedChannels(){if(void 0===this.multiplexingStreamOptions)throw new Error("multiplexingStreamOptions unset.");if(void 0===this.multiplexingStreamOptions.seededChannels||0===this.multiplexingStreamOptions.seededChannels.length){const e=(0,l.clone)(this.multiplexingStreamOptions);return e.seededChannels=[{}],e.protocolMajorVersion=3,e}return this.multiplexingStreamOptions}}t.ServiceJsonRpcDescriptor=v;const y={get:(e,t)=>{switch(t.toString()){case"dispose":return function(){e.messageConnection.dispose()};case"_jsonRpc":return e.messageConnection;case"then":return;case"on":return function(t,r){return e.eventEmitter.on(t,r),e};case"once":return function(t,r){return e.eventEmitter.once(t,r),e};case"prependListener":return function(t,r){return e.eventEmitter.prependListener(t,r),e};case"prependOnceListener":return function(t,r){return e.eventEmitter.prependOnceListener(t,r),e};case"addListener":return function(t,r){return e.eventEmitter.addListener(t,r),e};case"rawListeners":return e.eventEmitter.rawListeners;case"removeAllListeners":return function(t){return e.eventEmitter.removeAllListeners(t),e};case"removeListener":return function(t,r){return e.eventEmitter.removeListener(t,r),e};case"off":return function(t,r){return e.eventEmitter.off(t,r),e};case"listenerCount":return e.eventEmitter.listenerCount;case"getMaxListeners":return e.eventEmitter.getMaxListeners;case"setMaxListeners":return function(t){return e.eventEmitter.setMaxListeners(t),e};case"eventNames":return function(){return e.eventEmitter.eventNames(),e};case"emit":return function(t,r){return e.eventEmitter.emit(t,r),e};default:return function(){const r=t.toString();return(0,m.invokeRpc)(r,arguments,e.messageConnection)}}}};class _ extends u.RpcConnection{messageConnection;constructor(e){super(),this.messageConnection=e}addLocalRpcTarget(e){if((0,m.registerInstanceMethodsAsRpcTargets)(e,this.messageConnection),u.RpcConnection.IsRpcEventServer(e))for(let t of e.rpcEventNames)e.on(t,((...e)=>{this.messageConnection.sendNotification(t,s.ParameterStructures.byPosition,...e)}));"function"==typeof e.dispose&&this.messageConnection.onDispose((()=>e.dispose()))}constructRpcClient(){const e={messageConnection:this.messageConnection,eventEmitter:new h.EventEmitter};return this.messageConnection.onNotification(((t,r)=>Array.isArray(r)?e.eventEmitter.emit(t,...r):e.eventEmitter.emit(t,r))),new Proxy(e,y)}startListening(){this.messageConnection?.listen()}dispose(){}}t.JsonRpcConnection=_},94305:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceMoniker=void 0,function(e){function t(e){return e.version?`${e.name} (${e.version})`:e.name}function r(){return t(this)}e.create=function(e,t){if(!e||""===e)throw new Error("name cannot be empty.");return Object.freeze({name:e,version:t,toString:r})},e.equals=function(e,t){return e===t||!(!e||!t)&&e.name===t.name&&e.version===t.version},e.toString=t}(r||(t.ServiceMoniker=r={}))},78444:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcConnection=t.ServiceRpcDescriptor=void 0;const i=n(r(39491));t.ServiceRpcDescriptor=class{moniker;constructor(e){this.moniker=e,(0,i.default)(e)}constructRpc(e,t){let r;if(t?r=e:t=e,void 0===t)throw new Error("No pipe supplied.");const n=this.constructRpcConnection(t);void 0!==r&&n.addLocalRpcTarget(r);const i=n.constructRpcClient();return n.startListening(),i}},t.RpcConnection=class{static IsRpcEventServer(e){return e.rpcEventNames&&e.on}}},75374:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.PIPE_NAME_PREFIX=t.availabilityChangedEvent=t.RemoteServiceConnections=t.MessageDelimiters=t.Formatters=void 0,function(e){e[e.Utf8=0]="Utf8",e[e.MessagePack=1]="MessagePack"}(r||(t.Formatters=r={})),function(e){e[e.HttpLikeHeaders=0]="HttpLikeHeaders",e[e.BigEndianInt32LengthHeader=1]="BigEndianInt32LengthHeader"}(n||(t.MessageDelimiters=n={})),function(e){e[e.None=0]="None",e[e.Multiplexing=1]="Multiplexing",e[e.IpcPipe=2]="IpcPipe",e[e.ClrActivation=8]="ClrActivation"}(i||(t.RemoteServiceConnections=i={})),function(e){function t(t){let r=e.None;for(const n of t.split(","))switch(n.trim()){case"None":break;case"Multiplexing":r|=e.Multiplexing;break;case"IpcPipe":r|=e.IpcPipe;break;case"ClrActivation":r|=e.ClrActivation;break;default:throw new Error(`unrecognized element '${n.trim()}'.`)}return r}e.contains=function(e,r){return"string"==typeof e&&(e=t(e)),(e&r)===r},e.parse=t}(i||(t.RemoteServiceConnections=i={})),t.availabilityChangedEvent="availabilityChanged",t.PIPE_NAME_PREFIX="win32"===process.platform?"\\\\.\\pipe\\":"/tmp/"},72290:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCredentialsPolicy=void 0,function(e){e[e.requestOverridesDefault=0]="requestOverridesDefault",e[e.filterOverridesRequest=1]="filterOverridesRequest"}(r||(t.ClientCredentialsPolicy=r={}))},69473:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalBrokeredServiceContainer=void 0;const s=o(r(35369)),a=r(4617),c=r(24510),u=r(65834),l=r(9407),d=r(72739),p=r(72290),f=r(91367),h=r(62305),g=r(56154),m=r(94305);class v{static preferredSourceOrderForRemoteServices=[a.ServiceSource.trustedServer,a.ServiceSource.untrustedServer];static preferredSourceOrderForLocalServices=[a.ServiceSource.sameProcess,a.ServiceSource.otherProcessOnSameMachine];remoteSources=s.Map();profferedServiceIndex=s.Map();registeredServices=s.Map();localUserCredentials=s.Map();constructor(){}register(e){let t=this.registeredServices;const r=e.map((e=>({moniker:g.ServiceMonikerValue.from(e.moniker),registration:e.registration})));r.forEach((e=>{if(this.registeredServices.has(e.moniker))throw new Error(`${m.ServiceMoniker.toString(e.moniker)} is already registered.`);t=t.set(e.moniker,e.registration)})),this.registeredServices=t;let n=!1;return{dispose:()=>{n||(r.forEach((e=>this.registeredServices=this.registeredServices.delete(e.moniker))),n=!0)}}}profferServiceFactory(e,t){return this.profferInternal(new u.ProfferedServiceFactory(this,e,t))}profferServiceBroker(e,t){return this.profferInternal(new h.ProfferedServiceBroker(this,e,a.ServiceSource.sameProcess,t))}profferRemoteServiceBroker(e,t,r,n){if(r===a.ServiceSource.sameProcess)throw new Error("Use the proffer method for local services when they are in the same process.");return this.profferInternal(new f.ProfferedRemoteServiceBroker(this,e,t,r,this.getAllowedMonikers(r,n?.map(g.ServiceMonikerValue.from)??null)))}getFullAccessServiceBroker(){return new c.View(this,l.ServiceAudience.process,this.localUserCredentials,p.ClientCredentialsPolicy.requestOverridesDefault)}getLimitedAccessServiceBroker(e,t,r){return new c.View(this,e,t,r)}static isLocalConsumer(e){return(e&~l.ServiceAudience.local)===l.ServiceAudience.none}getSecureServiceBroker(e){return new c.View(this,l.ServiceAudience.process,e?.clientCredentials?s.Map(e.clientCredentials):s.Map(),p.ClientCredentialsPolicy.requestOverridesDefault)}getServiceRegistration(e){let t=this.registeredServices.get(e);if(t)return{registration:t,matchingMoniker:e};if(e.version){const t=new g.ServiceMonikerValue(e.name);return this.getServiceRegistration(t)}return null}async getProfferingSource(e,t){const r=g.ServiceMonikerValue.from(e),{registration:n,matchingMoniker:i}=this.getServiceRegistration(r)||{};if(!n||!i)return{errorCode:d.MissingBrokeredServiceErrorCode.notLocallyRegistered};if(v.isLocalConsumer(t),!n.isExposedTo(t))return{errorCode:d.MissingBrokeredServiceErrorCode.serviceAudienceMismatch};if(n.profferCallback){if("function"==typeof n.profferCallback){const t=n.profferCallback(this,e);n.profferCallback=t||void 0}await n.profferCallback}for(const e of v.preferredSourceOrderForLocalServices){const t=this.profferedServiceIndex.get(e);if(t){const e=t.get(i);if(e)return{proffered:e,errorCode:d.MissingBrokeredServiceErrorCode.noExplanation}}}return{errorCode:d.MissingBrokeredServiceErrorCode.serviceFactoryNotProffered}}removeRegistrations(e){const t=this.profferedServiceIndex;switch(e.source){case a.ServiceSource.sameProcess:case a.ServiceSource.otherProcessOnSameMachine:let t=this.profferedServiceIndex.get(e.source);t&&(t=t.removeAll(e.monikers),this.profferedServiceIndex=this.profferedServiceIndex.set(e.source,t));break;default:this.profferedServiceIndex=this.profferedServiceIndex.remove(e.source),this.remoteSources=this.remoteSources.remove(e.source)}this.onAvailabilityChanged(t,e)}onAvailabilityChanged(e,t,r){}getAllowedMonikers(e,t){const r=v.convertRemoteSourceToLocalAudience(e),n=[];if(null===t)for(let[t,i]of this.registeredServices)(i.audience&r)!==r&&e!==a.ServiceSource.otherProcessOnSameMachine||n.push(t);else for(let i of t){const t=this.registeredServices.get(i);!t||(t.audience&r)!==r&&e!==a.ServiceSource.otherProcessOnSameMachine||n.push(i)}return n}static convertRemoteSourceToLocalAudience(e){switch(e){case a.ServiceSource.otherProcessOnSameMachine:return l.ServiceAudience.local;case a.ServiceSource.trustedServer:case a.ServiceSource.untrustedServer:return l.ServiceAudience.liveShareGuest;default:throw new Error(`Source not recognized: ${e}`)}}profferInternal(e){const t=this.profferedServiceIndex;e.source>a.ServiceSource.otherProcessOnSameMachine&&this.remoteSources.set(e.source,e);let r=this.profferedServiceIndex.get(e.source)??s.Map();const n=[];if(e.monikers.forEach((t=>{if(this.registeredServices.has(t)||n.push(t),r.has(t))throw new Error(`${m.ServiceMoniker.toString(t)} is already proffered.`);r=r.set(t,e)})),n.length>0)throw new Error(`Cannot proffer unregistered service(s): ${n.map((e=>m.ServiceMoniker.toString(e))).join(", ")}`);return this.profferedServiceIndex=this.profferedServiceIndex.set(e.source,r),this.onAvailabilityChanged(t,e),e}}t.GlobalBrokeredServiceContainer=v},72739:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MissingBrokeredServiceErrorCode=void 0,function(e){e[e.noExplanation=0]="noExplanation",e[e.notLocallyRegistered=1]="notLocallyRegistered",e[e.chaosConfigurationDeniedRequest=2]="chaosConfigurationDeniedRequest",e[e.serviceAudienceMismatch=3]="serviceAudienceMismatch",e[e.serviceFactoryNotProffered=4]="serviceFactoryNotProffered",e[e.serviceFactoryReturnedNull=5]="serviceFactoryReturnedNull",e[e.serviceFactoryFault=6]="serviceFactoryFault",e[e.localServiceHiddenOnRemoteClient=7]="localServiceHiddenOnRemoteClient"}(r||(t.MissingBrokeredServiceErrorCode=r={}))},91367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedRemoteServiceBroker=void 0;const n=r(82361),i=r(59200),o=r(56154);class s extends n.EventEmitter{container;remoteServiceBroker;multiplexingStream;source;serviceBroker;monikers;constructor(e,t,r,n,s){super(),this.container=e,this.remoteServiceBroker=t,this.multiplexingStream=r,this.source=n,this.monikers=s.map(o.ServiceMonikerValue.from),this.serviceBroker=new Promise((async(e,n)=>{try{e(r?await i.RemoteServiceBroker.connectToMultiplexingRemoteServiceBroker(t,r):await i.RemoteServiceBroker.connectToRemoteServiceBroker(t))}catch(e){n(e)}})),this.remoteServiceBroker.on("availabilityChanged",this.onAvailabilityChanged)}async getProxy(e,t,r){const n=await this.serviceBroker;return await n.getProxy(e,t,r)}async getPipe(e,t,r){const n=await this.serviceBroker;return await n.getPipe(e,t,r)}handshake(e,t){return this.remoteServiceBroker.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBroker.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBroker.cancelServiceRequest(e,t)}dispose(){this.remoteServiceBroker.off("availabilityChanged",this.onAvailabilityChanged),this.container.removeRegistrations(this)}onAvailabilityChanged(e){this.container.onAvailabilityChanged(null,this,e.impactedServices),this.emit("availabilityChanged",e)}}t.ProfferedRemoteServiceBroker=s},62305:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedServiceBroker=void 0;const n=r(82361),i=r(43305),o=r(56154);class s extends n.EventEmitter{container;serviceBroker;source;monikers;remoteServiceBrokerWrapper;constructor(e,t,r,n){super(),this.container=e,this.serviceBroker=t,this.source=r,this.monikers=n.map(o.ServiceMonikerValue.from),this.serviceBroker.on("availabilityChanged",this.onAvailabilityChanged),this.remoteServiceBrokerWrapper=new i.RemoteServiceBrokerWrapper(this)}getProxy(e,t,r){return this.serviceBroker.getProxy(e,t,r)}getPipe(e,t,r){return this.serviceBroker.getPipe(e,t,r)}handshake(e,t){return this.remoteServiceBrokerWrapper.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBrokerWrapper.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBrokerWrapper.cancelServiceRequest(e,t)}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged),this.container.removeRegistrations(this)}onAvailabilityChanged(e){this.container.onAvailabilityChanged(null,this,e.impactedServices),this.emit("availabilityChanged",e)}}t.ProfferedServiceBroker=s},65834:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedServiceFactory=void 0;const i=n(r(9593)),o=r(82361),s=r(33543),a=r(43305),c=r(56154),u=r(4617);class l extends o.EventEmitter{container;descriptor;factory;source=u.ServiceSource.sameProcess;monikers;remoteServiceBrokerWrapper;constructor(e,t,r){super(),this.container=e,this.descriptor=t,this.factory=r,this.monikers=Object.freeze([new c.ServiceMonikerValue(t.moniker)]),this.remoteServiceBrokerWrapper=new a.RemoteServiceBrokerWrapper(this)}async getProxy(e,t,r){r?.throwIfCancelled();const n=this.container.getSecureServiceBroker(t),o=await this.invokeFactory(n,e.moniker,t??{},r??i.default.CONTINUE);if(!o)return null;switch(typeof o.dispose){case"undefined":o.dispose=function(){};break;case"function":break;default:throw new Error(`Service has a dispose property of type ${typeof o.dispose} instead of a function.`)}return o}async getPipe(e,t,r){r?.throwIfCancelled();const n=s.FullDuplexStream.CreatePair(),o=this.container.getSecureServiceBroker(t),a=this.descriptor.constructRpcConnection(n.first),c=await this.invokeFactory(o,e,t??{},r??i.default.CONTINUE);try{return c?(a.addLocalRpcTarget(c),a.startListening(),n.second):(a.dispose(),null)}catch(e){throw"function"==typeof c?.dispose&&c.dispose(),e}}handshake(e,t){return this.remoteServiceBrokerWrapper.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBrokerWrapper.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBrokerWrapper.cancelServiceRequest(e,t)}dispose(){this.container.removeRegistrations(this)}invokeFactory(e,t,r,n){return this.container.getServiceRegistration(c.ServiceMonikerValue.from(t))?.registration.allowGuestClients,this.factory(t,r,e,n)}}t.ProfferedServiceFactory=l},43305:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceBrokerWrapper=void 0;const n=r(42451);class i extends n.IpcRelayServiceBroker{}t.RemoteServiceBrokerWrapper=i},9407:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceAudience=void 0,function(e){e[e.none=0]="none",e[e.process=1]="process",e[e.local=3]="local",e[e.liveShareGuest=1024]="liveShareGuest",e[e.allClientsIncludingGuests=1027]="allClientsIncludingGuests"}(r||(t.ServiceAudience=r={}))},56154:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceMonikerValue=void 0;const i=n(r(69887));class o{name;version;hash;constructor(e,t){"string"==typeof e?(this.name=e,this.version=t):(this.name=e.name,this.version=e.version)}equals(e){return e&&e.name===this.name&&e.version===this.version}hashCode(){return this.hash??=(0,i.default)(this.name)+(0,i.default)(this.version??""),this.hash}static from(e){return e instanceof o?e:new o(e)}}t.ServiceMonikerValue=o},79713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRegistration=void 0;const n=r(9407);t.ServiceRegistration=class{audience;allowGuestClients;profferCallback;constructor(e,t,r){this.audience=e,this.allowGuestClients=t,this.profferCallback=r}get isExposedLocally(){return(this.audience&n.ServiceAudience.local)!==n.ServiceAudience.none}get isExposedRemotely(){return(this.audience&n.ServiceAudience.liveShareGuest)!==n.ServiceAudience.none}isExposedTo(e){return(e&this.audience)===e}}},4617:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceSource=void 0,function(e){e[e.sameProcess=0]="sameProcess",e[e.otherProcessOnSameMachine=1]="otherProcessOnSameMachine",e[e.trustedServer=2]="trustedServer",e[e.untrustedServer=3]="untrustedServer"}(r||(t.ServiceSource=r={}))},24510:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const n=r(82361),i=r(75374),o=r(72290);class s extends n.EventEmitter{container;audience;clientCredentials;clientCredentialsPolicy;clientCulture;clientUICulture;constructor(e,t,r,n,i,o){super(),this.container=e,this.audience=t,this.clientCredentials=r,this.clientCredentialsPolicy=n,this.clientCulture=i,this.clientUICulture=o}async getProxy(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e.moniker,this.audience);return n?.proffered?await n.proffered.getProxy(e,t,r):null}async getPipe(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e,this.audience);return n?.proffered?await n.proffered.getPipe(e,t,r):null}handshake(e,t){if(!i.RemoteServiceConnections.contains(e.supportedConnections,i.RemoteServiceConnections.IpcPipe))throw new Error("We only support pipes.");return Promise.resolve()}async requestServiceChannel(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e,this.audience);return n?.proffered?n.proffered.requestServiceChannel(e,t,r):Promise.resolve({})}cancelServiceRequest(e,t){throw new Error("Not yet implemented.")}applyOptionsFilter(e){const{...t}=e??{};return this.clientCredentialsPolicy!==o.ClientCredentialsPolicy.filterOverridesRequest&&0!==(t.clientCredentials?.length??0)||(t.clientCredentials=this.clientCredentials.toObject()),t.clientCulture=this.clientCulture,t.clientUICulture=this.clientUICulture,t}}t.View=s},67917:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCredentialsPolicy=t.ServiceSource=t.ServiceRegistration=t.ServiceAudience=t.GlobalBrokeredServiceContainer=void 0;var n=r(69473);Object.defineProperty(t,"GlobalBrokeredServiceContainer",{enumerable:!0,get:function(){return n.GlobalBrokeredServiceContainer}});var i=r(9407);Object.defineProperty(t,"ServiceAudience",{enumerable:!0,get:function(){return i.ServiceAudience}});var o=r(79713);Object.defineProperty(t,"ServiceRegistration",{enumerable:!0,get:function(){return o.ServiceRegistration}});var s=r(4617);Object.defineProperty(t,"ServiceSource",{enumerable:!0,get:function(){return s.ServiceSource}});var a=r(72290);Object.defineProperty(t,"ClientCredentialsPolicy",{enumerable:!0,get:function(){return a.ClientCredentialsPolicy}})},71620:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=t.ServiceRpcDescriptor=t.ServiceMoniker=t.JsonRpcConnection=t.ServiceJsonRpcDescriptor=t.RemoteServiceConnectionInfo=t.RemoteServiceBroker=t.ProtectedOperation=t.MultiplexingRelayServiceBroker=t.RpcMarshalable=t.IpcRelayServiceBroker=t.IDisposable=t.AuthorizationServiceClient=t.RemoteServiceConnections=t.MessageDelimiters=t.Formatters=void 0;var o=r(75374);Object.defineProperty(t,"Formatters",{enumerable:!0,get:function(){return o.Formatters}}),Object.defineProperty(t,"MessageDelimiters",{enumerable:!0,get:function(){return o.MessageDelimiters}}),Object.defineProperty(t,"RemoteServiceConnections",{enumerable:!0,get:function(){return o.RemoteServiceConnections}}),i(r(68444),t);var s=r(69678);Object.defineProperty(t,"AuthorizationServiceClient",{enumerable:!0,get:function(){return s.AuthorizationServiceClient}});var a=r(41429);Object.defineProperty(t,"IDisposable",{enumerable:!0,get:function(){return a.IDisposable}});var c=r(42451);Object.defineProperty(t,"IpcRelayServiceBroker",{enumerable:!0,get:function(){return c.IpcRelayServiceBroker}});var u=r(97403);Object.defineProperty(t,"RpcMarshalable",{enumerable:!0,get:function(){return u.RpcMarshalable}});var l=r(17430);Object.defineProperty(t,"MultiplexingRelayServiceBroker",{enumerable:!0,get:function(){return l.MultiplexingRelayServiceBroker}});var d=r(46836);Object.defineProperty(t,"ProtectedOperation",{enumerable:!0,get:function(){return d.ProtectedOperation}});var p=r(59200);Object.defineProperty(t,"RemoteServiceBroker",{enumerable:!0,get:function(){return p.RemoteServiceBroker}});var f=r(4817);Object.defineProperty(t,"RemoteServiceConnectionInfo",{enumerable:!0,get:function(){return f.RemoteServiceConnectionInfo}});var h=r(44280);Object.defineProperty(t,"ServiceJsonRpcDescriptor",{enumerable:!0,get:function(){return h.ServiceJsonRpcDescriptor}}),Object.defineProperty(t,"JsonRpcConnection",{enumerable:!0,get:function(){return h.JsonRpcConnection}});var g=r(94305);Object.defineProperty(t,"ServiceMoniker",{enumerable:!0,get:function(){return g.ServiceMoniker}});var m=r(78444);Object.defineProperty(t,"ServiceRpcDescriptor",{enumerable:!0,get:function(){return m.ServiceRpcDescriptor}});var v=r(70218);Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return v.Observer}}),i(r(67917),t)},97403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IJsonRpcMarshaledObject=t.MarshaledObjectProxy=t.RpcMarshalable=t.registerReleaseMarshaledObjectCallback=void 0;const n=r(74389),i=r(14107),o="$/releaseMarshaledObject";function s(e,t,r){return void 0===r?`$/invokeProxy/${e}/${t}`:`$/invokeProxy/${e}/${r}.${t}`}var a,c;t.registerReleaseMarshaledObjectCallback=function(e){e.onNotification(o,(t=>{const r=Array.isArray(t)?{handle:t[0],ownedBySender:t[1]}:t,n=e;if(n._marshaledObjectTracker){const e=r.ownedBySender?n._marshaledObjectTracker.theirsByHandle:n._marshaledObjectTracker.ownByHandle;e[r.handle]?.dispose()}}))},function(e){e.is=function(e){const t=e;return"string"==typeof t?._jsonRpcMarshalableLifetime}}(a||(t.RpcMarshalable=a={})),function(e){e.is=function(e){const t=e;return"number"==typeof t?._jsonrpcMarshaledHandle}}(c||(t.MarshaledObjectProxy=c={}));const u={get:(e,t)=>{switch(t.toString()){case"dispose":return e.dispose;case"_jsonrpcMarshaledHandle":return e._jsonrpcMarshaledHandle;case"then":case"toJSON":return;default:return function(){const r=s(e._jsonrpcMarshaledHandle,t.toString());return(0,i.invokeRpc)(r,arguments,e.messageConnection)}}}};function l(e){const t=e;return t._marshaledObjectTracker??={counter:0,ownByHandle:{},theirsByHandle:{},ownTrackedObjectHandles:new WeakMap},t._marshaledObjectTracker}var d;!function(e){e.is=function(e){const t=e;return"number"==typeof t?.__jsonrpc_marshaled&&"number"==typeof t.handle},e.wrap=function(e,t){const r=l(t);if(c.is(e))return{__jsonrpc_marshaled:0,handle:e._jsonrpcMarshaledHandle};{if("call"===e._jsonRpcMarshalableLifetime)throw new Error("Receiving marshaled objects scoped to the lifetime of a single RPC request is not yet supported.");const n=r.ownTrackedObjectHandles.has(e),o=n?r.ownTrackedObjectHandles.get(e):++r.counter;if(!n){r.ownTrackedObjectHandles.set(e,o);const n=(0,i.registerInstanceMethodsAsRpcTargets)(e,t,(e=>s(o,e)));r.ownByHandle[o]={target:e,dispose:()=>{n.dispose(),delete r.ownByHandle[o],r.ownTrackedObjectHandles.delete(e),"dispose"in e&&"function"==typeof e.dispose&&e.dispose()}}}return{__jsonrpc_marshaled:1,handle:o,lifetime:e._jsonRpcMarshalableLifetime,optionalInterfaces:e._jsonRpcOptionalInterfaces}}},e.cancelWrap=function(e,t){const r=l(t).ownByHandle[e.handle];r?.dispose()},e.unwrap=function(e,t){if("call"===e.lifetime)throw new Error("Receiving marshaled objects scoped to the lifetime of a single RPC request is not yet supported.");const r=l(t);switch(e.__jsonrpc_marshaled){case 1:let i=r.theirsByHandle[e.handle]?.proxy;if(!i){const s={messageConnection:t,_jsonrpcMarshaledHandle:e.handle,dispose:()=>{if(r.theirsByHandle[e.handle]){delete r.theirsByHandle[e.handle];const i={handle:e.handle,ownedBySender:!1};t.sendNotification(o,n.ParameterStructures.byName,i)}}};i=new Proxy(s,u),r.theirsByHandle[e.handle]={proxy:i,dispose:()=>{delete r.theirsByHandle[e.handle]}}}return i;case 0:const s=r.ownByHandle[e.handle];if(!s)throw new Error(`Unrecognized handle ${e.handle}`);return s.target;default:throw new Error(`Unsupported value for __jsonrpc_marshaled: ${e.__jsonrpc_marshaled}.`)}}}(d||(t.IJsonRpcMarshaledObject=d={}))},70218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0,t.Observer=class{next;completion;_jsonRpcMarshalableLifetime="explicit";error;get completed(){return void 0!==this.error}constructor(e,t){this.next=e,this.completion=t}onNext(e){this.next(e)}onCompleted(){this.error=null,this.completion&&this.completion(null)}onError(e){this.error=e,this.completion&&this.completion(e)}}},14107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerInstanceMethodsAsRpcTargets=t.invokeRpc=void 0;const n=r(74389),i=r(79819),o=r(97403);function s(e,t){return function(e){for(let t=0;t<e.length;t++)if(void 0===e[t])throw new Error(`Argument at 0-based index ${t} is set as undefined, which is not a valid JSON value.`);return e}(t).map((t=>a(e,t)))}function a(e,t){return o.RpcMarshalable.is(t)||o.MarshaledObjectProxy.is(t)?o.IJsonRpcMarshaledObject.wrap(t,e):t}function c(e,t){const r=Object.getOwnPropertyDescriptor(e,t);return!!r&&"function"==typeof r.value}function u(e,t){return function(e,t){return o.IJsonRpcMarshaledObject.is(t)?o.IJsonRpcMarshaledObject.unwrap(t,e):t}(e,t)}function l(e,t){return function(e){if(e.length>0&&i.CancellationTokenAdapters.isVSCode(e[e.length-1])){const t=i.CancellationTokenAdapters.vscodeToCancellationToken(e[e.length-1]);e[e.length-1]=t}return e}(t).map((t=>u(e,t)))}t.invokeRpc=async function(e,t,r){if(t.length>0){if(n.CancellationToken.is(t[t.length-1])){const i=t[t.length-1],o=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...o,i)}if(i.CancellationTokenAdapters.isCancellationToken(t[t.length-1])){const o=i.CancellationTokenAdapters.cancellationTokenToVSCode(t[t.length-1]),a=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...a,o)}if(void 0===t[t.length-1]){const i=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...i)}}const a=s(r,Array.prototype.slice.call(t));try{const t=await r.sendRequest(e,n.ParameterStructures.byPosition,...a);return u(r,t)}catch(e){for(const e of a)o.IJsonRpcMarshaledObject.is(e)&&o.IJsonRpcMarshaledObject.cancelWrap(e,r);throw e}},t.registerInstanceMethodsAsRpcTargets=function(e,t,r){const i=[];function o(n,o){const s=r?r(n):n;i.push(t.onRequest(s,((...r)=>async function(e,t){return a(e,await t)}(t,o.apply(e,l(t,r)))))),i.push(t.onNotification(s,((...r)=>o.apply(e,l(t,r)))))}return function(e,t){const r=[];let n=Object.getPrototypeOf(e);for(;n&&n!==t;)Object.getOwnPropertyNames(n).forEach((e=>{"constructor"!==e&&c(n,e)&&r.push(e)})),n=Object.getPrototypeOf(n);return r}(e,Object.prototype).forEach((t=>{if("dispose"!==t){const r=e[t];o(t,r);const n="Async";o(t.endsWith(n)?t.substring(0,t.length-n.length):`${t}${n}`,r)}})),n.Disposable.create((()=>i.forEach((e=>e.dispose()))))}},7145:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isChannel=t.clone=t.isReadWriteStream=t.constructMessageConnection=void 0;const i=n(r(39491)),o=r(97403);function s(e){return e&&"unshift"in e}t.constructMessageConnection=function(e,t){let r;return(0,i.default)(e),s(e)?(r=t(e),e.on("close",(()=>{r?.dispose()})),r.onDispose((()=>e.end())),r.onClose((()=>e.end()))):(r=t(e.stream),e.completion.then((()=>{r?.dispose()})),r.onDispose((()=>e.dispose())),r.onClose((()=>e.dispose()))),(0,o.registerReleaseMarshaledObjectCallback)(r),r},t.isReadWriteStream=s,t.clone=function(e){var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},t.isChannel=function(e){return e&&"stream"in e&&"acceptance"in e&&"completion"in e&&"dispose"in e}},5861:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>P,parse:()=>y,stringify:()=>p,v1:()=>v,v3:()=>S,v4:()=>E,v5:()=>b,validate:()=>u,version:()=>T});var n=r(6113),i=r.n(n);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i().randomFillSync(o),s=0),o.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function d(e,t=0){return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]}const p=function(e,t=0){const r=d(e,t);if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let f,h,g=0,m=0;const v=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let o=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=h=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:m+1;const l=c-g+(u-m)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||c>g)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,m=u,h=s,c+=122192928e5;const p=(1e4*(268435455&c)+u)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=255&p;const v=c/4294967296*1e4&268435455;i[n++]=v>>>8&255,i[n++]=255&v,i[n++]=v>>>24&15|16,i[n++]=v>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||d(i)},y=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function _(e,t,r){function n(e,n,i,o){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=a[e];return i}return d(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const S=_("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("md5").update(e).digest()})),w={randomUUID:i().randomUUID},E=function(e,t,r){if(w.randomUUID&&!t&&!e)return w.randomUUID();const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)},b=_("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("sha1").update(e).digest()})),P="00000000-0000-0000-0000-000000000000",T=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},14635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n,i=r(52631),o="constructor",s="prototype",a="function",c="_dynInstFuncs",u="_isDynProxy",l="_dynClass",d="_dynCls$",p="_dynInstChk",f=p,h="_dfOpts",g="_unknown_",m="__proto__",v="_dyn"+m,y="__dynProto$Gbl",_="_dynInstProto",S="useBaseInst",w="setInstFuncs",E=Object,b=E.getPrototypeOf,P=E.getOwnPropertyNames,T=(0,i.Rdr)(),C=T[y]||(T[y]={o:(n={},n[w]=!0,n[S]=!0,n),n:1e3});function I(e){return e&&(e===E[s]||e===Array[s])}function O(e){return I(e)||e===Function[s]}function x(e){var t;if(e){if(b)return b(e);var r=e[m]||e[s]||(e[o]?e[o][s]:null);t=e[v]||r,(0,i.aE6)(e,v)||(delete e[_],t=e[v]=e[_]||e[v],e[_]=r)}return t}function N(e,t){var r=[];if(P)r=P(e);else for(var n in e)"string"==typeof n&&(0,i.aE6)(e,n)&&r.push(n);if(r&&r.length>0)for(var o=0;o<r.length;o++)t(r[o])}function k(e,t,r){return t!==o&&typeof e[t]===a&&(r||(0,i.aE6)(e,t))&&t!==m&&t!==s}function A(e){(0,i.ZU2)("DynamicProto: "+e)}function R(e,t){for(var r=e.length-1;r>=0;r--)if(e[r]===t)return!0;return!1}function D(e,t,r,n,o){if(!I(e)){var s=r[c]=r[c]||(0,i.rkD)(null);if(!I(s)){var d=s[t]=s[t]||(0,i.rkD)(null);!1!==s[f]&&(s[f]=!!o),I(d)||N(r,(function(t){k(r,t,!1)&&r[t]!==n[t]&&(d[t]=r[t],delete r[t],(!(0,i.aE6)(e,t)||e[t]&&!e[t][u])&&(e[t]=function(e,t){var r=function(){var n=function(e,t,r,n){var o=null;if(e&&(0,i.aE6)(r,l)){var s=e[c]||(0,i.rkD)(null);if((o=(s[r[l]]||(0,i.rkD)(null))[t])||A("Missing ["+t+"] "+a),!o[p]&&!1!==s[f]){for(var u=!(0,i.aE6)(e,t),d=x(e),h=[];u&&d&&!O(d)&&!R(h,d);){var g=d[t];if(g){u=g===n;break}h.push(d),d=x(d)}try{u&&(e[t]=o),o[p]=1}catch(e){s[f]=!1}}}return o}(this,t,e,r)||function(e,t,r){var n=t[e];return n===r&&(n=x(t)[e]),typeof n!==a&&A("["+e+"] is not a "+a),n}(t,e,r);return n.apply(this,arguments)};return r[u]=1,r}(e,t)))}))}}}function j(e,t){return(0,i.aE6)(e,s)?e.name||t||g:((e||{})[o]||{}).name||t||g}function M(e,t,r,n){(0,i.aE6)(e,s)||A("theClass is an invalid class definition.");var o=e[s];(function(e,t){if(b){for(var r=[],n=x(t);n&&!O(n)&&!R(r,n);){if(n===e)return!0;r.push(n),n=x(n)}return!1}return!0})(o,t)||A("["+j(e)+"] not in hierarchy of ["+j(t)+"]");var a=null;(0,i.aE6)(o,l)?a=o[l]:(a=d+j(e,"_")+"$"+C.n,C.n++,o[l]=a);var p=M[h],g=!!p[S];g&&n&&void 0!==n[S]&&(g=!!n[S]);var m=function(e){var t=(0,i.rkD)(null);return N(e,(function(r){!t[r]&&k(e,r,!1)&&(t[r]=e[r])})),t}(t),v=function(e,t,r,n){function o(e,t,r){var i=t[r];if(i[u]&&n){var o=e[c]||{};!1!==o[f]&&(i=(o[t[l]]||{})[r]||i)}return function(){return i.apply(e,arguments)}}var s=(0,i.rkD)(null);N(r,(function(e){s[e]=o(t,r,e)}));for(var a=x(e),d=[];a&&!O(a)&&!R(d,a);)N(a,(function(e){!s[e]&&k(a,e,!b)&&(s[e]=o(t,a,e))})),d.push(a),a=x(a);return s}(o,t,m,g);r(t,v);var y=!!b&&!!p[w];y&&n&&(y=!!n[w]),D(o,a,t,m,!1!==y)}M[h]=C.o},31570:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationServiceClient=void 0;const i=n(r(39491)),o=n(r(9593));t.AuthorizationServiceClient=class{authService;ownsAuthService;isDisposed=!1;constructor(e,t=!0){this.authService=e,this.ownsAuthService=t,(0,i.default)(e),this.authService=e}async getCredentials(e=o.default.CONTINUE){if(this.isDisposed)throw new Error("Object is disposed");return await this.authService.getCredentials(e)}async checkAuthorization(e,t=o.default.CONTINUE){if((0,i.default)(e),this.isDisposed)throw new Error("Object is disposed");return await this.authService.checkAuthorization(e,t)}dispose(){this.isDisposed=!0,this.ownsAuthService&&this.authService.dispose()}}},47129:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BE32MessageWriter=t.BE32MessageReader=void 0;const i=r(74389),o=n(r(9593)),s=r(12781),a=r(84017),c=r(17850);class u extends i.AbstractMessageReader{readable;decoder;constructor(e,t){super(),this.readable=e,this.decoder=t}listen(e){this.readable.on("error",(e=>this.fireError(e)));const t=o.default.create();return(async()=>{try{for(;;){const r=await(0,c.getBufferFrom)(this.readable,4,!0,t.token);if(!r)return void this.fireClose();const n=r.readInt32BE(0),i=await(0,c.getBufferFrom)(this.readable,n,!1,t.token),o=await this.decoder(i);e(o)}}catch(e){this.fireError(e)}})(),i.Disposable.create((()=>t.cancel()))}}t.BE32MessageReader=u;class l extends i.AbstractMessageWriter{writable;encoder;semaphore=new a.Semaphore(1);headerBuffer=Buffer.alloc(4);errorCount=0;constructor(e,t){super(),this.writable=e,this.encoder=t,e.on("error",(e=>this.fireError([e,void 0,void 0]))),e.once("close",(()=>this.fireClose()))}async write(e){await this.semaphore.use((async()=>{try{const t=await this.encoder(e);this.headerBuffer.writeInt32BE(t.byteLength,0),this.writable instanceof s.Writable&&this.writable.cork();const r=Promise.all([(0,c.writeAsync)(this.writable,this.headerBuffer),(0,c.writeAsync)(this.writable,t)]);this.writable instanceof s.Writable&&this.writable.uncork(),await r}catch(e){this.errorCount++,this.fireError([d(e),void 0,this.errorCount])}}))}end(){this.writable.end()}}function d(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${"string"==typeof e.message?e.message:"unknown"}`)}t.BE32MessageWriter=l},63736:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenAdapters=void 0;const i=n(r(9593)),o=r(74389);t.CancellationTokenAdapters=class{static isVSCode(e){return o.CancellationToken.is(e)}static isCancellationToken(e){return e&&!function(e){return e&&void 0!==e.ImAProxy}(e)&&"function"==typeof e.throwIfCancelled&&"function"==typeof e.onCancelled&&void 0!==e.isCancelled&&void 0!==e.canBeCancelled}static vscodeToCancellationToken(e){if(e.isCancellationRequested)return i.default.CANCELLED;if(e===o.CancellationToken.None)return i.default.CONTINUE;{const t=i.default.create();return e.onCancellationRequested((e=>t.cancel())),t.token}}static cancellationTokenToVSCode(e){if(e.isCancelled)return o.CancellationToken.Cancelled;if(e.canBeCancelled){const t=new o.CancellationTokenSource;return e.onCancelled((e=>t.cancel())),t.token}return o.CancellationToken.None}}},71911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameworkServices=void 0;const n=r(78952),i=r(18743),o=r(88055);class s{static remoteServiceBroker=Object.freeze(new i.ServiceJsonRpcDescriptor(o.ServiceMoniker.create("RemoteServiceBroker"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static authorization=Object.freeze(new i.ServiceJsonRpcDescriptor(o.ServiceMoniker.create("Microsoft.ServiceHub.Framework.AuthorizationService"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders))}t.FrameworkServices=s},27957:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.IDisposable=void 0,function(e){e.is=function(e){return"function"==typeof e.dispose}}(r||(t.IDisposable=r={}))},85408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcRelayServiceBroker=void 0;const n=r(78952),i=r(82361),o=r(8342),s=r(41808),a=r(71017);class c extends i{serviceBroker;static _rpcEventNames=Object.freeze(["availabilityChanged"]);rpcEventNames=c._rpcEventNames;completion;channelsOfferedToClient={};disposed;constructor(e){super(),this.serviceBroker=e,e.on("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.completion=new Promise((e=>this.disposed=e))}handshake(e,t){if(!n.RemoteServiceConnections.contains(e.supportedConnections,n.RemoteServiceConnections.IpcPipe))throw new Error("The client must support IpcPipe to use this service broker.");return Promise.resolve()}async requestServiceChannel(e,t,r){const i=await this.serviceBroker.getPipe(e,t,r);if(!i)return{};const c=(0,o.v4)(),u=a.join(n.PIPE_NAME_PREFIX,(0,o.v4)()),l=(0,s.createServer)((e=>{delete this.channelsOfferedToClient[c],e.pipe(i),i.pipe(e)}));return l.listen(u),this.channelsOfferedToClient[c]=l,{requestId:c,pipeName:u}}cancelServiceRequest(e,t){const r=this.channelsOfferedToClient[e];return r?(delete this.channelsOfferedToClient[e],r.close(),Promise.resolve()):Promise.reject("Request to cancel a channel that is not awaiting acceptance.")}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged.bind(this));for(const e in this.channelsOfferedToClient)this.channelsOfferedToClient[e].close(),delete this.channelsOfferedToClient[e];this.disposed&&this.disposed()}onAvailabilityChanged(e){this.emit("availabilityChanged",e)}}t.IpcRelayServiceBroker=c},11529:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingRelayServiceBroker=void 0;const i=r(78952),o=r(82361),s=r(33543),a=r(71911),c=n(r(5458)),u=r(8342);class l extends o{serviceBroker;multiplexingStreamWithClient;multiplexingStreamWithRemoteClientOwned;static _rpcEventNames=Object.freeze(["availabilityChanged"]);channelsOfferedToClient={};completion;rpcEventNames=l._rpcEventNames;disposed;constructor(e,t,r){super(),this.serviceBroker=e,this.multiplexingStreamWithClient=t,this.multiplexingStreamWithRemoteClientOwned=r,e.on("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.completion=new Promise((e=>this.disposed=e))}static async connectToServer(e,t,r){try{const n=await s.MultiplexingStream.CreateAsync(t,void 0,r),i=await n.offerChannelAsync("",void 0,r),o=new l(e,n,!0);return a.FrameworkServices.remoteServiceBroker.constructRpc(o,i),o}catch(e){throw t.end(),e}}handshake(e,t){if(!i.RemoteServiceConnections.contains(e.supportedConnections,i.RemoteServiceConnections.Multiplexing))throw new Error("The client must support multiplexing to use this service broker.");return Promise.resolve()}async requestServiceChannel(e,t,r){const n=(0,u.v4)();(t=t?{...t}:{}).multiplexingStream=this.multiplexingStreamWithClient;const i=await this.serviceBroker.getPipe(e,t,r);if(!i)return{};const o=this.multiplexingStreamWithClient.createChannel();return o.stream.pipe(i),i.pipe(o.stream),this.channelsOfferedToClient[n]=o,(0,c.default)(o.acceptance.finally((()=>delete this.channelsOfferedToClient[n]))),{requestId:n,multiplexingChannelId:o.qualifiedId.id}}async cancelServiceRequest(e,t){const r=this.channelsOfferedToClient[e];return r?(r.dispose(),Promise.resolve()):Promise.reject("Request to cancel a channel that is not awaiting acceptance.")}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged.bind(this)),this.multiplexingStreamWithRemoteClientOwned&&this.multiplexingStreamWithClient.dispose(),this.disposed&&this.disposed()}onAvailabilityChanged(e){this.emit("availabilityChanged",e)}}t.MultiplexingRelayServiceBroker=l},83169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStreamMessageWriter=t.NodeStreamMessageReader=void 0;const n=r(74389);class i extends n.ReadableStreamMessageReader{constructor(e,t){super(new s(e),t)}}t.NodeStreamMessageReader=i;class o extends n.WriteableStreamMessageWriter{constructor(e,t){super(new a(e),t)}}t.NodeStreamMessageWriter=o;class s{stream;constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),n.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),n.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),n.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),n.Disposable.create((()=>this.stream.off("data",e)))}}class a{stream;constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),n.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),n.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),n.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((r,n)=>{const i=e=>{null==e?r():n(e)};"string"==typeof e?this.stream.write(e,t,i):this.stream.write(e,i)}))}end(){this.stream.end()}}},83515:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProtectedOperation=void 0;const i=n(r(39491));var o;!function(e){e.create=function(e,t){return Object.freeze({operationMoniker:e,requiredTrustLevel:t})},e.isSupersetOf=function(e,t){return(0,i.default)(e),(0,i.default)(t),e.operationMoniker===t.operationMoniker&&(e.requiredTrustLevel===t.requiredTrustLevel||!!e.requiredTrustLevel&&!!t.requiredTrustLevel&&e.requiredTrustLevel>t.requiredTrustLevel)},e.equals=function(e,t){return e===t||!(!e||!t)&&e.operationMoniker===t.operationMoniker&&e.requiredTrustLevel===t.requiredTrustLevel}}(o||(t.ProtectedOperation=o={}))},33257:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceBroker=void 0;const i=n(r(39491)),o=n(r(9593)),s=r(82361),a=r(33543),c=r(31570),u=r(78952),l=r(87464),d=r(15447),p=r(41808),f=r(71911);class h extends s.EventEmitter{serviceBroker;multiplexingStream;static fullConnectionSupport=u.RemoteServiceConnections.Multiplexing|u.RemoteServiceConnections.IpcPipe;static async connectToDuplex(e,t=o.default.CONTINUE){(0,i.default)(e);const r=f.FrameworkServices.remoteServiceBroker.constructRpc(e);return await h.initializeBrokerConnection(r,t)}static async connectToRemoteServiceBroker(e,t=o.default.CONTINUE){return(0,i.default)(e),await h.initializeBrokerConnection(e,t)}static async connectToMultiplexingDuplex(e,t,r=o.default.CONTINUE){(0,i.default)(e);const n=await a.MultiplexingStream.CreateAsync(e,t,r),s=await n.acceptChannelAsync("",void 0,r),c=f.FrameworkServices.remoteServiceBroker.constructRpc(s.stream),u=await this.connectToMultiplexingRemoteServiceBroker(c,n,r);return u.ownsMxStream=!0,u}static async connectToMultiplexingRemoteServiceBroker(e,t,r=o.default.CONTINUE){(0,i.default)(e),(0,i.default)(t);const n={supportedConnections:h.fullConnectionSupport},s=await h.initializeBrokerConnection(e,r,n,t);return s.ownsMxStream=!1,s}static async initializeBrokerConnection(e,t=o.default.CONTINUE,r,n){if(!r){let e=this.fullConnectionSupport;n||(e&=~u.RemoteServiceConnections.Multiplexing),r={supportedConnections:e}}try{await e.handshake(r,t)}catch(t){const r=e;throw"function"==typeof r.dispose&&r.dispose(),t}return new h(e,r,n)}isDisposed=!1;ownsMxStream=!1;defaultClientCulture="en-US";defaultClientUICulture="en-US";authorizationClient;constructor(e,t,r){super(),this.serviceBroker=e,this.multiplexingStream=r,(0,i.default)(e),(0,i.default)(t),u.RemoteServiceConnections.contains(t.supportedConnections,u.RemoteServiceConnections.Multiplexing)&&(0,i.default)(r),this.serviceBroker.on("availabilityChanged",(e=>{this.emit("availabilityChanged",e)}))}setAuthorizationService(e){(0,i.default)(e),this.authorizationClient?.dispose(),this.authorizationClient=new c.AuthorizationServiceClient(e)}async getProxy(e,t,r=o.default.CONTINUE){let n;(0,i.default)(e),t=t?{...t}:{clientCulture:this.defaultClientCulture,clientUICulture:this.defaultClientUICulture},await this.applyAuthorization(t,r),delete t.multiplexingStream;let s={};try{if(s=await this.serviceBroker.requestServiceChannel(e.moniker,t,r),!s||l.RemoteServiceConnectionInfo.isEmpty(s))return null;if(s.multiplexingChannelId&&this.multiplexingStream)n=await this.multiplexingStream.acceptChannel(s.multiplexingChannelId);else{if(!s.pipeName)throw new Error("Unsupported connection type");{const e="win32"!==process.platform||s.pipeName.startsWith(u.PIPE_NAME_PREFIX)?s.pipeName:u.PIPE_NAME_PREFIX+s.pipeName;n=(0,p.createConnection)(e)}}}catch(e){throw(0,d.isReadWriteStream)(n)?n.end():(0,d.isChannel)(n)&&n.dispose(),s?.requestId&&await this.serviceBroker.cancelServiceRequest(s.requestId,r),e}return e.constructRpc(t?.clientRpcTarget,n)}async getPipe(e,t,r=o.default.CONTINUE){if((0,i.default)(e),t=t?{...t}:{clientCulture:this.defaultClientCulture,clientUICulture:this.defaultClientUICulture},await this.applyAuthorization(t,r),delete t.multiplexingStream,t.clientRpcTarget)throw new Error("Cannot connect pipe to service with client RPC target");let n={},s=null,a=null;try{if(n=await this.serviceBroker.requestServiceChannel(e,t,r),!n||l.RemoteServiceConnectionInfo.isEmpty(n))return null;if(!n.multiplexingChannelId||!this.multiplexingStream)throw n.pipeName?new Error("Cannot connect to named pipe"):new Error("Unsupported connection type");return a=await this.multiplexingStream.acceptChannel(n.multiplexingChannelId),s=a.stream,s}catch(e){throw a?.dispose(),s?.end(),!s&&n?.requestId&&await this.serviceBroker.cancelServiceRequest(n.requestId,r),e}}dispose(){this.isDisposed=!0,this.serviceBroker.removeAllListeners(u.availabilityChangedEvent);const e=this.serviceBroker;"function"==typeof e.dispose&&e.dispose(),this.authorizationClient?.dispose(),this.multiplexingStream&&this.ownsMxStream&&this.multiplexingStream.dispose()}async applyAuthorization(e,t){this.authorizationClient&&!e.clientCredentials&&(e.clientCredentials=await this.authorizationClient.getCredentials(t))}}t.RemoteServiceBroker=h},87464:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceConnectionInfo=void 0,function(e){e.isEmpty=function(e){return!e.multiplexingChannelId&&!e.requestId&&!e.pipeName},e.isOneOf=function(e,t){return!!e.multiplexingChannelId&&t.indexOf("multiplexing")>-1}}(r||(t.RemoteServiceConnectionInfo=r={}))},18743:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcConnection=t.ServiceJsonRpcDescriptor=void 0;const s=r(95028),a=r(78952),c=r(88055),u=r(94815),l=r(15447),d=r(47129),p=o(r(87323)),f=r(33543),h=r(12781),g=r(83169),m=r(67188);class v extends u.ServiceRpcDescriptor{formatter;messageDelimiter;protocol="json-rpc";multiplexingStreamOptions;connectionFactory;constructor(e,t,r,n){let i,o;switch(super(e),this.formatter=t,this.messageDelimiter=r,t){case a.Formatters.Utf8:i=e=>Promise.resolve(Buffer.from(JSON.stringify(e))),o=e=>JSON.parse(e.toString());break;case a.Formatters.MessagePack:i=e=>Promise.resolve(p.encode(e)),o=e=>p.decode(e);break;default:throw new Error(`Unsupported formatter: ${t}.`)}if(this.multiplexingStreamOptions=void 0===n?void 0:Object.freeze(n),r===a.MessageDelimiters.HttpLikeHeaders){if(t!==a.Formatters.Utf8)throw new Error("Utf8 is the only formatter supported while using HttpLikeHeaders.");this.connectionFactory=e=>(0,s.createMessageConnection)(new g.NodeStreamMessageReader(e),new g.NodeStreamMessageWriter(e))}else{if(r!==a.MessageDelimiters.BigEndianInt32LengthHeader)throw new Error(`Unsupported message delimiter: ${r}.`);this.connectionFactory=e=>(0,s.createMessageConnection)(new d.BE32MessageReader(e,o),new d.BE32MessageWriter(e,i))}}constructRpcConnection(e){if(this.multiplexingStreamOptions){const t=this.createSeedChannels();let r=(0,l.isChannel)(e)?e.stream:e;const n=f.MultiplexingStream.Create(r,t),i=n.acceptChannel(0);return i.completion.finally((()=>n.dispose())),new _((0,l.constructMessageConnection)(i,this.connectionFactory))}return new _((0,l.constructMessageConnection)(e,this.connectionFactory))}equals(e){return!!(e&&e instanceof v)&&!!c.ServiceMoniker.equals(e.moniker,this.moniker)&&this.formatter===e.formatter&&this.messageDelimiter===e.messageDelimiter}createSeedChannels(){if(void 0===this.multiplexingStreamOptions)throw new Error("multiplexingStreamOptions unset.");if(void 0===this.multiplexingStreamOptions.seededChannels||0===this.multiplexingStreamOptions.seededChannels.length){const e=(0,l.clone)(this.multiplexingStreamOptions);return e.seededChannels=[{}],e.protocolMajorVersion=3,e}return this.multiplexingStreamOptions}}t.ServiceJsonRpcDescriptor=v;const y={get:(e,t)=>{switch(t.toString()){case"dispose":return function(){e.messageConnection.dispose()};case"_jsonRpc":return e.messageConnection;case"then":return;case"on":return function(t,r){return e.eventEmitter.on(t,r),e};case"once":return function(t,r){return e.eventEmitter.once(t,r),e};case"prependListener":return function(t,r){return e.eventEmitter.prependListener(t,r),e};case"prependOnceListener":return function(t,r){return e.eventEmitter.prependOnceListener(t,r),e};case"addListener":return function(t,r){return e.eventEmitter.addListener(t,r),e};case"rawListeners":return e.eventEmitter.rawListeners;case"removeAllListeners":return function(t){return e.eventEmitter.removeAllListeners(t),e};case"removeListener":return function(t,r){return e.eventEmitter.removeListener(t,r),e};case"off":return function(t,r){return e.eventEmitter.off(t,r),e};case"listenerCount":return e.eventEmitter.listenerCount;case"getMaxListeners":return e.eventEmitter.getMaxListeners;case"setMaxListeners":return function(t){return e.eventEmitter.setMaxListeners(t),e};case"eventNames":return function(){return e.eventEmitter.eventNames(),e};case"emit":return function(t,r){return e.eventEmitter.emit(t,r),e};default:return function(){const r=t.toString();return(0,m.invokeRpc)(r,arguments,e.messageConnection)}}}};class _ extends u.RpcConnection{messageConnection;constructor(e){super(),this.messageConnection=e}addLocalRpcTarget(e){if((0,m.registerInstanceMethodsAsRpcTargets)(e,this.messageConnection),u.RpcConnection.IsRpcEventServer(e))for(let t of e.rpcEventNames)e.on(t,((...e)=>{this.messageConnection.sendNotification(t,s.ParameterStructures.byPosition,...e)}));"function"==typeof e.dispose&&this.messageConnection.onDispose((()=>e.dispose()))}constructRpcClient(){const e={messageConnection:this.messageConnection,eventEmitter:new h.EventEmitter};return this.messageConnection.onNotification(((t,r)=>Array.isArray(r)?e.eventEmitter.emit(t,...r):e.eventEmitter.emit(t,r))),new Proxy(e,y)}startListening(){this.messageConnection?.listen()}dispose(){}}t.JsonRpcConnection=_},88055:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceMoniker=void 0,function(e){function t(e){return e.version?`${e.name} (${e.version})`:e.name}function r(){return t(this)}e.create=function(e,t){if(!e||""===e)throw new Error("name cannot be empty.");return Object.freeze({name:e,version:t,toString:r})},e.equals=function(e,t){return e===t||!(!e||!t)&&e.name===t.name&&e.version===t.version},e.toString=t}(r||(t.ServiceMoniker=r={}))},94815:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RpcConnection=t.ServiceRpcDescriptor=void 0;const i=n(r(39491));t.ServiceRpcDescriptor=class{moniker;constructor(e){this.moniker=e,(0,i.default)(e)}constructRpc(e,t){let r;if(t?r=e:t=e,void 0===t)throw new Error("No pipe supplied.");const n=this.constructRpcConnection(t);void 0!==r&&n.addLocalRpcTarget(r);const i=n.constructRpcClient();return n.startListening(),i}},t.RpcConnection=class{static IsRpcEventServer(e){return e.rpcEventNames&&e.on}}},78952:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.PIPE_NAME_PREFIX=t.availabilityChangedEvent=t.RemoteServiceConnections=t.MessageDelimiters=t.Formatters=void 0,function(e){e[e.Utf8=0]="Utf8",e[e.MessagePack=1]="MessagePack"}(r||(t.Formatters=r={})),function(e){e[e.HttpLikeHeaders=0]="HttpLikeHeaders",e[e.BigEndianInt32LengthHeader=1]="BigEndianInt32LengthHeader"}(n||(t.MessageDelimiters=n={})),function(e){e[e.None=0]="None",e[e.Multiplexing=1]="Multiplexing",e[e.IpcPipe=2]="IpcPipe",e[e.ClrActivation=8]="ClrActivation"}(i||(t.RemoteServiceConnections=i={})),function(e){function t(t){let r=e.None;for(const n of t.split(","))switch(n.trim()){case"None":break;case"Multiplexing":r|=e.Multiplexing;break;case"IpcPipe":r|=e.IpcPipe;break;case"ClrActivation":r|=e.ClrActivation;break;default:throw new Error(`unrecognized element '${n.trim()}'.`)}return r}e.contains=function(e,r){return"string"==typeof e&&(e=t(e)),(e&r)===r},e.parse=t}(i||(t.RemoteServiceConnections=i={})),t.availabilityChangedEvent="availabilityChanged",t.PIPE_NAME_PREFIX="win32"===process.platform?"\\\\.\\pipe\\":"/tmp/"},64245:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCredentialsPolicy=void 0,function(e){e[e.requestOverridesDefault=0]="requestOverridesDefault",e[e.filterOverridesRequest=1]="filterOverridesRequest"}(r||(t.ClientCredentialsPolicy=r={}))},21349:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalBrokeredServiceContainer=void 0;const s=o(r(35369)),a=r(35083),c=r(1067),u=r(69080),l=r(67993),d=r(50707),p=r(64245),f=r(20989),h=r(9793),g=r(17327),m=r(88055);class v{static preferredSourceOrderForRemoteServices=[a.ServiceSource.trustedServer,a.ServiceSource.untrustedServer];static preferredSourceOrderForLocalServices=[a.ServiceSource.sameProcess,a.ServiceSource.otherProcessOnSameMachine];remoteSources=s.Map();profferedServiceIndex=s.Map();registeredServices=s.Map();localUserCredentials=s.Map();constructor(){}register(e){let t=this.registeredServices;const r=e.map((e=>({moniker:g.ServiceMonikerValue.from(e.moniker),registration:e.registration})));r.forEach((e=>{if(this.registeredServices.has(e.moniker))throw new Error(`${m.ServiceMoniker.toString(e.moniker)} is already registered.`);t=t.set(e.moniker,e.registration)})),this.registeredServices=t;let n=!1;return{dispose:()=>{n||(r.forEach((e=>this.registeredServices=this.registeredServices.delete(e.moniker))),n=!0)}}}profferServiceFactory(e,t){return this.profferInternal(new u.ProfferedServiceFactory(this,e,t))}profferServiceBroker(e,t){return this.profferInternal(new h.ProfferedServiceBroker(this,e,a.ServiceSource.sameProcess,t))}profferRemoteServiceBroker(e,t,r,n){if(r===a.ServiceSource.sameProcess)throw new Error("Use the proffer method for local services when they are in the same process.");return this.profferInternal(new f.ProfferedRemoteServiceBroker(this,e,t,r,this.getAllowedMonikers(r,n?.map(g.ServiceMonikerValue.from)??null)))}getFullAccessServiceBroker(){return new c.View(this,l.ServiceAudience.process,this.localUserCredentials,p.ClientCredentialsPolicy.requestOverridesDefault)}getLimitedAccessServiceBroker(e,t,r){return new c.View(this,e,t,r)}static isLocalConsumer(e){return(e&~l.ServiceAudience.local)===l.ServiceAudience.none}getSecureServiceBroker(e){return new c.View(this,l.ServiceAudience.process,e?.clientCredentials?s.Map(e.clientCredentials):s.Map(),p.ClientCredentialsPolicy.requestOverridesDefault)}getServiceRegistration(e){let t=this.registeredServices.get(e);if(t)return{registration:t,matchingMoniker:e};if(e.version){const t=new g.ServiceMonikerValue(e.name);return this.getServiceRegistration(t)}return null}async getProfferingSource(e,t){const r=g.ServiceMonikerValue.from(e),{registration:n,matchingMoniker:i}=this.getServiceRegistration(r)||{};if(!n||!i)return{errorCode:d.MissingBrokeredServiceErrorCode.notLocallyRegistered};if(v.isLocalConsumer(t),!n.isExposedTo(t))return{errorCode:d.MissingBrokeredServiceErrorCode.serviceAudienceMismatch};if(n.profferCallback){if("function"==typeof n.profferCallback){const t=n.profferCallback(this,e);n.profferCallback=t||void 0}await n.profferCallback}for(const e of v.preferredSourceOrderForLocalServices){const t=this.profferedServiceIndex.get(e);if(t){const e=t.get(i);if(e)return{proffered:e,errorCode:d.MissingBrokeredServiceErrorCode.noExplanation}}}return{errorCode:d.MissingBrokeredServiceErrorCode.serviceFactoryNotProffered}}removeRegistrations(e){const t=this.profferedServiceIndex;switch(e.source){case a.ServiceSource.sameProcess:case a.ServiceSource.otherProcessOnSameMachine:let t=this.profferedServiceIndex.get(e.source);t&&(t=t.removeAll(e.monikers),this.profferedServiceIndex=this.profferedServiceIndex.set(e.source,t));break;default:this.profferedServiceIndex=this.profferedServiceIndex.remove(e.source),this.remoteSources=this.remoteSources.remove(e.source)}this.onAvailabilityChanged(t,e)}onAvailabilityChanged(e,t,r){}getAllowedMonikers(e,t){const r=v.convertRemoteSourceToLocalAudience(e),n=[];if(null===t)for(let[t,i]of this.registeredServices)(i.audience&r)!==r&&e!==a.ServiceSource.otherProcessOnSameMachine||n.push(t);else for(let i of t){const t=this.registeredServices.get(i);!t||(t.audience&r)!==r&&e!==a.ServiceSource.otherProcessOnSameMachine||n.push(i)}return n}static convertRemoteSourceToLocalAudience(e){switch(e){case a.ServiceSource.otherProcessOnSameMachine:return l.ServiceAudience.local;case a.ServiceSource.trustedServer:case a.ServiceSource.untrustedServer:return l.ServiceAudience.liveShareGuest;default:throw new Error(`Source not recognized: ${e}`)}}profferInternal(e){const t=this.profferedServiceIndex;e.source>a.ServiceSource.otherProcessOnSameMachine&&this.remoteSources.set(e.source,e);let r=this.profferedServiceIndex.get(e.source)??s.Map();const n=[];if(e.monikers.forEach((t=>{if(this.registeredServices.has(t)||n.push(t),r.has(t))throw new Error(`${m.ServiceMoniker.toString(t)} is already proffered.`);r=r.set(t,e)})),n.length>0)throw new Error(`Cannot proffer unregistered service(s): ${n.map((e=>m.ServiceMoniker.toString(e))).join(", ")}`);return this.profferedServiceIndex=this.profferedServiceIndex.set(e.source,r),this.onAvailabilityChanged(t,e),e}}t.GlobalBrokeredServiceContainer=v},50707:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MissingBrokeredServiceErrorCode=void 0,function(e){e[e.noExplanation=0]="noExplanation",e[e.notLocallyRegistered=1]="notLocallyRegistered",e[e.chaosConfigurationDeniedRequest=2]="chaosConfigurationDeniedRequest",e[e.serviceAudienceMismatch=3]="serviceAudienceMismatch",e[e.serviceFactoryNotProffered=4]="serviceFactoryNotProffered",e[e.serviceFactoryReturnedNull=5]="serviceFactoryReturnedNull",e[e.serviceFactoryFault=6]="serviceFactoryFault",e[e.localServiceHiddenOnRemoteClient=7]="localServiceHiddenOnRemoteClient"}(r||(t.MissingBrokeredServiceErrorCode=r={}))},20989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedRemoteServiceBroker=void 0;const n=r(82361),i=r(33257),o=r(17327);class s extends n.EventEmitter{container;remoteServiceBroker;multiplexingStream;source;serviceBroker;monikers;constructor(e,t,r,n,s){super(),this.container=e,this.remoteServiceBroker=t,this.multiplexingStream=r,this.source=n,this.monikers=s.map(o.ServiceMonikerValue.from),this.serviceBroker=new Promise((async(e,n)=>{try{e(r?await i.RemoteServiceBroker.connectToMultiplexingRemoteServiceBroker(t,r):await i.RemoteServiceBroker.connectToRemoteServiceBroker(t))}catch(e){n(e)}})),this.remoteServiceBroker.on("availabilityChanged",this.onAvailabilityChanged)}async getProxy(e,t,r){const n=await this.serviceBroker;return await n.getProxy(e,t,r)}async getPipe(e,t,r){const n=await this.serviceBroker;return await n.getPipe(e,t,r)}handshake(e,t){return this.remoteServiceBroker.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBroker.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBroker.cancelServiceRequest(e,t)}dispose(){this.remoteServiceBroker.off("availabilityChanged",this.onAvailabilityChanged),this.container.removeRegistrations(this)}onAvailabilityChanged(e){this.container.onAvailabilityChanged(null,this,e.impactedServices),this.emit("availabilityChanged",e)}}t.ProfferedRemoteServiceBroker=s},9793:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedServiceBroker=void 0;const n=r(82361),i=r(55653),o=r(17327);class s extends n.EventEmitter{container;serviceBroker;source;monikers;remoteServiceBrokerWrapper;constructor(e,t,r,n){super(),this.container=e,this.serviceBroker=t,this.source=r,this.monikers=n.map(o.ServiceMonikerValue.from),this.serviceBroker.on("availabilityChanged",this.onAvailabilityChanged),this.remoteServiceBrokerWrapper=new i.RemoteServiceBrokerWrapper(this)}getProxy(e,t,r){return this.serviceBroker.getProxy(e,t,r)}getPipe(e,t,r){return this.serviceBroker.getPipe(e,t,r)}handshake(e,t){return this.remoteServiceBrokerWrapper.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBrokerWrapper.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBrokerWrapper.cancelServiceRequest(e,t)}dispose(){this.serviceBroker.off("availabilityChanged",this.onAvailabilityChanged),this.container.removeRegistrations(this)}onAvailabilityChanged(e){this.container.onAvailabilityChanged(null,this,e.impactedServices),this.emit("availabilityChanged",e)}}t.ProfferedServiceBroker=s},69080:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProfferedServiceFactory=void 0;const i=n(r(9593)),o=r(82361),s=r(33543),a=r(55653),c=r(17327),u=r(35083);class l extends o.EventEmitter{container;descriptor;factory;source=u.ServiceSource.sameProcess;monikers;remoteServiceBrokerWrapper;constructor(e,t,r){super(),this.container=e,this.descriptor=t,this.factory=r,this.monikers=Object.freeze([new c.ServiceMonikerValue(t.moniker)]),this.remoteServiceBrokerWrapper=new a.RemoteServiceBrokerWrapper(this)}async getProxy(e,t,r){r?.throwIfCancelled();const n=this.container.getSecureServiceBroker(t),o=await this.invokeFactory(n,e.moniker,t??{},r??i.default.CONTINUE);if(!o)return null;switch(typeof o.dispose){case"undefined":o.dispose=function(){};break;case"function":break;default:throw new Error(`Service has a dispose property of type ${typeof o.dispose} instead of a function.`)}return o}async getPipe(e,t,r){r?.throwIfCancelled();const n=s.FullDuplexStream.CreatePair(),o=this.container.getSecureServiceBroker(t),a=this.descriptor.constructRpcConnection(n.first),c=await this.invokeFactory(o,e,t??{},r??i.default.CONTINUE);try{return c?(a.addLocalRpcTarget(c),a.startListening(),n.second):(a.dispose(),null)}catch(e){throw"function"==typeof c?.dispose&&c.dispose(),e}}handshake(e,t){return this.remoteServiceBrokerWrapper.handshake(e,t)}requestServiceChannel(e,t,r){return this.remoteServiceBrokerWrapper.requestServiceChannel(e,t,r)}cancelServiceRequest(e,t){return this.remoteServiceBrokerWrapper.cancelServiceRequest(e,t)}dispose(){this.container.removeRegistrations(this)}invokeFactory(e,t,r,n){return this.container.getServiceRegistration(c.ServiceMonikerValue.from(t))?.registration.allowGuestClients,this.factory(t,r,e,n)}}t.ProfferedServiceFactory=l},55653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteServiceBrokerWrapper=void 0;const n=r(85408);class i extends n.IpcRelayServiceBroker{}t.RemoteServiceBrokerWrapper=i},67993:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceAudience=void 0,function(e){e[e.none=0]="none",e[e.process=1]="process",e[e.local=3]="local",e[e.liveShareGuest=1024]="liveShareGuest",e[e.allClientsIncludingGuests=1027]="allClientsIncludingGuests"}(r||(t.ServiceAudience=r={}))},17327:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceMonikerValue=void 0;const i=n(r(69887));class o{name;version;hash;constructor(e,t){"string"==typeof e?(this.name=e,this.version=t):(this.name=e.name,this.version=e.version)}equals(e){return e&&e.name===this.name&&e.version===this.version}hashCode(){return this.hash??=(0,i.default)(this.name)+(0,i.default)(this.version??""),this.hash}static from(e){return e instanceof o?e:new o(e)}}t.ServiceMonikerValue=o},49022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRegistration=void 0;const n=r(67993);t.ServiceRegistration=class{audience;allowGuestClients;profferCallback;constructor(e,t,r){this.audience=e,this.allowGuestClients=t,this.profferCallback=r}get isExposedLocally(){return(this.audience&n.ServiceAudience.local)!==n.ServiceAudience.none}get isExposedRemotely(){return(this.audience&n.ServiceAudience.liveShareGuest)!==n.ServiceAudience.none}isExposedTo(e){return(e&this.audience)===e}}},35083:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceSource=void 0,function(e){e[e.sameProcess=0]="sameProcess",e[e.otherProcessOnSameMachine=1]="otherProcessOnSameMachine",e[e.trustedServer=2]="trustedServer",e[e.untrustedServer=3]="untrustedServer"}(r||(t.ServiceSource=r={}))},1067:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const n=r(82361),i=r(78952),o=r(64245);class s extends n.EventEmitter{container;audience;clientCredentials;clientCredentialsPolicy;clientCulture;clientUICulture;constructor(e,t,r,n,i,o){super(),this.container=e,this.audience=t,this.clientCredentials=r,this.clientCredentialsPolicy=n,this.clientCulture=i,this.clientUICulture=o}async getProxy(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e.moniker,this.audience);return n?.proffered?await n.proffered.getProxy(e,t,r):null}async getPipe(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e,this.audience);return n?.proffered?await n.proffered.getPipe(e,t,r):null}handshake(e,t){if(!i.RemoteServiceConnections.contains(e.supportedConnections,i.RemoteServiceConnections.IpcPipe))throw new Error("We only support pipes.");return Promise.resolve()}async requestServiceChannel(e,t,r){r?.throwIfCancelled(),t=this.applyOptionsFilter(t);const n=await this.container.getProfferingSource(e,this.audience);return n?.proffered?n.proffered.requestServiceChannel(e,t,r):Promise.resolve({})}cancelServiceRequest(e,t){throw new Error("Not yet implemented.")}applyOptionsFilter(e){const{...t}=e??{};return this.clientCredentialsPolicy!==o.ClientCredentialsPolicy.filterOverridesRequest&&0!==(t.clientCredentials?.length??0)||(t.clientCredentials=this.clientCredentials.toObject()),t.clientCulture=this.clientCulture,t.clientUICulture=this.clientUICulture,t}}t.View=s},6333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCredentialsPolicy=t.ServiceSource=t.ServiceRegistration=t.ServiceAudience=t.GlobalBrokeredServiceContainer=void 0;var n=r(21349);Object.defineProperty(t,"GlobalBrokeredServiceContainer",{enumerable:!0,get:function(){return n.GlobalBrokeredServiceContainer}});var i=r(67993);Object.defineProperty(t,"ServiceAudience",{enumerable:!0,get:function(){return i.ServiceAudience}});var o=r(49022);Object.defineProperty(t,"ServiceRegistration",{enumerable:!0,get:function(){return o.ServiceRegistration}});var s=r(35083);Object.defineProperty(t,"ServiceSource",{enumerable:!0,get:function(){return s.ServiceSource}});var a=r(64245);Object.defineProperty(t,"ClientCredentialsPolicy",{enumerable:!0,get:function(){return a.ClientCredentialsPolicy}})},19679:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=t.ServiceRpcDescriptor=t.ServiceMoniker=t.JsonRpcConnection=t.ServiceJsonRpcDescriptor=t.RemoteServiceConnectionInfo=t.RemoteServiceBroker=t.ProtectedOperation=t.MultiplexingRelayServiceBroker=t.RpcMarshalable=t.IpcRelayServiceBroker=t.IDisposable=t.AuthorizationServiceClient=t.RemoteServiceConnections=t.MessageDelimiters=t.Formatters=void 0;var o=r(78952);Object.defineProperty(t,"Formatters",{enumerable:!0,get:function(){return o.Formatters}}),Object.defineProperty(t,"MessageDelimiters",{enumerable:!0,get:function(){return o.MessageDelimiters}}),Object.defineProperty(t,"RemoteServiceConnections",{enumerable:!0,get:function(){return o.RemoteServiceConnections}}),i(r(71911),t);var s=r(31570);Object.defineProperty(t,"AuthorizationServiceClient",{enumerable:!0,get:function(){return s.AuthorizationServiceClient}});var a=r(27957);Object.defineProperty(t,"IDisposable",{enumerable:!0,get:function(){return a.IDisposable}});var c=r(85408);Object.defineProperty(t,"IpcRelayServiceBroker",{enumerable:!0,get:function(){return c.IpcRelayServiceBroker}});var u=r(84008);Object.defineProperty(t,"RpcMarshalable",{enumerable:!0,get:function(){return u.RpcMarshalable}});var l=r(11529);Object.defineProperty(t,"MultiplexingRelayServiceBroker",{enumerable:!0,get:function(){return l.MultiplexingRelayServiceBroker}});var d=r(83515);Object.defineProperty(t,"ProtectedOperation",{enumerable:!0,get:function(){return d.ProtectedOperation}});var p=r(33257);Object.defineProperty(t,"RemoteServiceBroker",{enumerable:!0,get:function(){return p.RemoteServiceBroker}});var f=r(87464);Object.defineProperty(t,"RemoteServiceConnectionInfo",{enumerable:!0,get:function(){return f.RemoteServiceConnectionInfo}});var h=r(18743);Object.defineProperty(t,"ServiceJsonRpcDescriptor",{enumerable:!0,get:function(){return h.ServiceJsonRpcDescriptor}}),Object.defineProperty(t,"JsonRpcConnection",{enumerable:!0,get:function(){return h.JsonRpcConnection}});var g=r(88055);Object.defineProperty(t,"ServiceMoniker",{enumerable:!0,get:function(){return g.ServiceMoniker}});var m=r(94815);Object.defineProperty(t,"ServiceRpcDescriptor",{enumerable:!0,get:function(){return m.ServiceRpcDescriptor}});var v=r(3187);Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return v.Observer}}),i(r(6333),t)},84008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IJsonRpcMarshaledObject=t.MarshaledObjectProxy=t.RpcMarshalable=t.registerReleaseMarshaledObjectCallback=void 0;const n=r(74389),i=r(67188),o="$/releaseMarshaledObject";function s(e,t,r){return void 0===r?`$/invokeProxy/${e}/${t}`:`$/invokeProxy/${e}/${r}.${t}`}var a,c;t.registerReleaseMarshaledObjectCallback=function(e){e.onNotification(o,(t=>{const r=Array.isArray(t)?{handle:t[0],ownedBySender:t[1]}:t,n=e;if(n._marshaledObjectTracker){const e=r.ownedBySender?n._marshaledObjectTracker.theirsByHandle:n._marshaledObjectTracker.ownByHandle;e[r.handle]?.dispose()}}))},function(e){e.is=function(e){const t=e;return"string"==typeof t?._jsonRpcMarshalableLifetime}}(a||(t.RpcMarshalable=a={})),function(e){e.is=function(e){const t=e;return"number"==typeof t?._jsonrpcMarshaledHandle}}(c||(t.MarshaledObjectProxy=c={}));const u={get:(e,t)=>{switch(t.toString()){case"dispose":return e.dispose;case"_jsonrpcMarshaledHandle":return e._jsonrpcMarshaledHandle;case"then":case"toJSON":return;default:return function(){const r=s(e._jsonrpcMarshaledHandle,t.toString());return(0,i.invokeRpc)(r,arguments,e.messageConnection)}}}};function l(e){const t=e;return t._marshaledObjectTracker??={counter:0,ownByHandle:{},theirsByHandle:{},ownTrackedObjectHandles:new WeakMap},t._marshaledObjectTracker}var d;!function(e){e.is=function(e){const t=e;return"number"==typeof t?.__jsonrpc_marshaled&&"number"==typeof t.handle},e.wrap=function(e,t){const r=l(t);if(c.is(e))return{__jsonrpc_marshaled:0,handle:e._jsonrpcMarshaledHandle};{if("call"===e._jsonRpcMarshalableLifetime)throw new Error("Receiving marshaled objects scoped to the lifetime of a single RPC request is not yet supported.");const n=r.ownTrackedObjectHandles.has(e),o=n?r.ownTrackedObjectHandles.get(e):++r.counter;if(!n){r.ownTrackedObjectHandles.set(e,o);const n=(0,i.registerInstanceMethodsAsRpcTargets)(e,t,(e=>s(o,e)));r.ownByHandle[o]={target:e,dispose:()=>{n.dispose(),delete r.ownByHandle[o],r.ownTrackedObjectHandles.delete(e),"dispose"in e&&"function"==typeof e.dispose&&e.dispose()}}}return{__jsonrpc_marshaled:1,handle:o,lifetime:e._jsonRpcMarshalableLifetime,optionalInterfaces:e._jsonRpcOptionalInterfaces}}},e.cancelWrap=function(e,t){const r=l(t).ownByHandle[e.handle];r?.dispose()},e.unwrap=function(e,t){if("call"===e.lifetime)throw new Error("Receiving marshaled objects scoped to the lifetime of a single RPC request is not yet supported.");const r=l(t);switch(e.__jsonrpc_marshaled){case 1:let i=r.theirsByHandle[e.handle]?.proxy;if(!i){const s={messageConnection:t,_jsonrpcMarshaledHandle:e.handle,dispose:()=>{if(r.theirsByHandle[e.handle]){delete r.theirsByHandle[e.handle];const i={handle:e.handle,ownedBySender:!1};t.sendNotification(o,n.ParameterStructures.byName,i)}}};i=new Proxy(s,u),r.theirsByHandle[e.handle]={proxy:i,dispose:()=>{delete r.theirsByHandle[e.handle]}}}return i;case 0:const s=r.ownByHandle[e.handle];if(!s)throw new Error(`Unrecognized handle ${e.handle}`);return s.target;default:throw new Error(`Unsupported value for __jsonrpc_marshaled: ${e.__jsonrpc_marshaled}.`)}}}(d||(t.IJsonRpcMarshaledObject=d={}))},3187:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0,t.Observer=class{next;completion;_jsonRpcMarshalableLifetime="explicit";error;get completed(){return void 0!==this.error}constructor(e,t){this.next=e,this.completion=t}onNext(e){this.next(e)}onCompleted(){this.error=null,this.completion&&this.completion(null)}onError(e){this.error=e,this.completion&&this.completion(e)}}},67188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerInstanceMethodsAsRpcTargets=t.invokeRpc=void 0;const n=r(74389),i=r(63736),o=r(84008);function s(e,t){return function(e){for(let t=0;t<e.length;t++)if(void 0===e[t])throw new Error(`Argument at 0-based index ${t} is set as undefined, which is not a valid JSON value.`);return e}(t).map((t=>a(e,t)))}function a(e,t){return o.RpcMarshalable.is(t)||o.MarshaledObjectProxy.is(t)?o.IJsonRpcMarshaledObject.wrap(t,e):t}function c(e,t){const r=Object.getOwnPropertyDescriptor(e,t);return!!r&&"function"==typeof r.value}function u(e,t){return function(e,t){return o.IJsonRpcMarshaledObject.is(t)?o.IJsonRpcMarshaledObject.unwrap(t,e):t}(e,t)}function l(e,t){return function(e){if(e.length>0&&i.CancellationTokenAdapters.isVSCode(e[e.length-1])){const t=i.CancellationTokenAdapters.vscodeToCancellationToken(e[e.length-1]);e[e.length-1]=t}return e}(t).map((t=>u(e,t)))}t.invokeRpc=async function(e,t,r){if(t.length>0){if(n.CancellationToken.is(t[t.length-1])){const i=t[t.length-1],o=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...o,i)}if(i.CancellationTokenAdapters.isCancellationToken(t[t.length-1])){const o=i.CancellationTokenAdapters.cancellationTokenToVSCode(t[t.length-1]),a=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...a,o)}if(void 0===t[t.length-1]){const i=s(r,Array.prototype.slice.call(t,0,t.length-1));return r.sendRequest(e,n.ParameterStructures.byPosition,...i)}}const a=s(r,Array.prototype.slice.call(t));try{const t=await r.sendRequest(e,n.ParameterStructures.byPosition,...a);return u(r,t)}catch(e){for(const e of a)o.IJsonRpcMarshaledObject.is(e)&&o.IJsonRpcMarshaledObject.cancelWrap(e,r);throw e}},t.registerInstanceMethodsAsRpcTargets=function(e,t,r){const i=[];function o(n,o){const s=r?r(n):n;i.push(t.onRequest(s,((...r)=>async function(e,t){return a(e,await t)}(t,o.apply(e,l(t,r)))))),i.push(t.onNotification(s,((...r)=>o.apply(e,l(t,r)))))}return function(e,t){const r=[];let n=Object.getPrototypeOf(e);for(;n&&n!==t;)Object.getOwnPropertyNames(n).forEach((e=>{"constructor"!==e&&c(n,e)&&r.push(e)})),n=Object.getPrototypeOf(n);return r}(e,Object.prototype).forEach((t=>{if("dispose"!==t){const r=e[t];o(t,r);const n="Async";o(t.endsWith(n)?t.substring(0,t.length-n.length):`${t}${n}`,r)}})),n.Disposable.create((()=>i.forEach((e=>e.dispose()))))}},15447:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isChannel=t.clone=t.isReadWriteStream=t.constructMessageConnection=void 0;const i=n(r(39491)),o=r(84008);function s(e){return e&&"unshift"in e}t.constructMessageConnection=function(e,t){let r;return(0,i.default)(e),s(e)?(r=t(e),e.on("close",(()=>{r?.dispose()})),r.onDispose((()=>e.end())),r.onClose((()=>e.end()))):(r=t(e.stream),e.completion.then((()=>{r?.dispose()})),r.onDispose((()=>e.dispose())),r.onClose((()=>e.dispose()))),(0,o.registerReleaseMarshaledObjectCallback)(r),r},t.isReadWriteStream=s,t.clone=function(e){var t=e.constructor();for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},t.isChannel=function(e){return e&&"stream"in e&&"acceptance"in e&&"completion"in e&&"dispose"in e}},8342:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>P,parse:()=>y,stringify:()=>p,v1:()=>v,v3:()=>S,v4:()=>E,v5:()=>b,validate:()=>u,version:()=>T});var n=r(6113),i=r.n(n);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i().randomFillSync(o),s=0),o.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function d(e,t=0){return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]}const p=function(e,t=0){const r=d(e,t);if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let f,h,g=0,m=0;const v=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let o=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=h=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:m+1;const l=c-g+(u-m)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||c>g)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,m=u,h=s,c+=122192928e5;const p=(1e4*(268435455&c)+u)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=255&p;const v=c/4294967296*1e4&268435455;i[n++]=v>>>8&255,i[n++]=255&v,i[n++]=v>>>24&15|16,i[n++]=v>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||d(i)},y=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function _(e,t,r){function n(e,n,i,o){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=a[e];return i}return d(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const S=_("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("md5").update(e).digest()})),w={randomUUID:i().randomUUID},E=function(e,t,r){if(w.randomUUID&&!t&&!e)return w.randomUUID();const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)},b=_("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("sha1").update(e).digest()})),P="00000000-0000-0000-0000-000000000000",T=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},9742:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAspireEnvironmentVars=t.connectToAspireServer=void 0;const n=r(26474);t.connectToAspireServer=async function(e,t){try{const t=await e.getProxy(n.InternalDescriptors.aspireServer);if(!t)throw new Error("Failed to obtain the AspireServer service proxy.");return t}catch(e){return t.log((()=>`Error connecting to AspireServer: ${e}`)),null}},t.getAspireEnvironmentVars=async function(e){return await e.GetServerConnectionEnvironmentAsync()}},10460:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.buildOnRunIsDisabled=t.buildOnRefreshIsDisabled=t.autoDiscoveryIsDisabled=void 0;const s=o(r(89496));t.autoDiscoveryIsDisabled=()=>s.workspace.getConfiguration("dotnet.testWindow").get("disableAutoDiscovery",!1),t.buildOnRefreshIsDisabled=()=>s.workspace.getConfiguration("dotnet.testWindow").get("disableBuildOnRefresh",!1),t.buildOnRunIsDisabled=()=>s.workspace.getConfiguration("dotnet.testWindow").get("disableBuildOnRun",!1)},24135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RUN_SETTINGS=t.TEST_EXPLORER_DISPLAY_NAME=t.TEST_CONTROLLER_ID=t.VERSIONED_NODE_ID_EXPAND_CHILDREN_VERSION=void 0,t.VERSIONED_NODE_ID_EXPAND_CHILDREN_VERSION=-1,t.TEST_CONTROLLER_ID="csdevkit-test-controller",t.TEST_EXPLORER_DISPLAY_NAME="C# Dev Kit - Test Explorer",t.DEFAULT_RUN_SETTINGS='<?xml version="1.0" encoding="utf-8"?>\n<RunSettings>\n  <RunConfiguration>\n    <CollectSourceInformation>true</CollectSourceInformation>\n  </RunConfiguration>\n  <DataCollectionRunSettings>\n    <DataCollectors/>\n  </DataCollectionRunSettings>\n</RunSettings>'},25880:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoverageManager=void 0;const i=n(r(71017));t.CoverageManager=class{_collectionController;constructor(e){this._collectionController=e}setupCoverageProfile(e){this._collectionController.setupCoverageProfile(e)}startCoverageCollection(e,t,r,n){let o=n.map((e=>i.default.dirname(e.outputPath)));return this._collectionController.start(e,t.runSettings,r,o,[])}stopCoverageCollection(e){return this._collectionController.stop(e)}}},13865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugRefresh=t.debugTestItems=t.debugTestItem=t.debugTestMeta=t.debugTestStructure=t.debugTestNodeNesting=t.debugVersionedId=t.debugTestNodes=t.debugTestNode=void 0,t.debugTestNode=e=>`${e.id}:${e.nodeVersion} ${e.displayName} ${e.isExpandable?"expandable":""} ${e.testCaseRecordId}`,t.debugTestNodes=e=>`\n{${e.map((e=>(0,t.debugTestNode)(e))).join("}\n{")}}`,t.debugVersionedId=e=>`${e.nodeId}:${e.nodeVersion}:${e.collectionVersion}`,t.debugTestNodeNesting=e=>`[${(0,t.debugVersionedId)(e.parentNodeId)}]--${"".concat(...e.childNodeIds.map((e=>`[${(0,t.debugVersionedId)(e)}];`)))}`,t.debugTestStructure=e=>`\n${e.map((e=>(0,t.debugTestNodeNesting)(e))).join("\n")}`,t.debugTestMeta=e=>{let r="";return e.forEach(((e,n)=>{r+=` \n${n} => ${(0,t.debugTestNodeNesting)(e)}`})),r},t.debugTestItem=e=>`${e.id}: '${e.label}' (${e.children.size})`,t.debugTestItems=e=>{let r="";return e.forEach(((e,n)=>{r+=`  \n${n} => ${(0,t.debugTestItem)(e)}`})),r},t.debugRefresh=(e,r)=>`req: ${e.viewId}:${e.viewVersion}\nnodes: [${e.parentNodes.map((e=>(0,t.debugVersionedId)(e))).join(",")}]\nresp: ${r.viewId}:${r.viewVersion}\nstruct: ${(0,t.debugTestStructure)(r.structure)}\nnodes: ${(0,t.debugTestNodes)(r.tests)}`},45800:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FilePoller=void 0;const s=o(r(57147)),a=r(82361),c=r(34388);t.FilePoller=class{uri;pollIntervalMs;_logger;intervalId;lastKnownStat;didCreateEmitter=new a.EventEmitter;didChangeEmitter=new a.EventEmitter;didDeleteEmitter=new a.EventEmitter;constructor(e,t=2500,r){this.uri=e,this.pollIntervalMs=t,this._logger=r,this.startPolling()}onDidCreate(e){this.didCreateEmitter.on("didCreate",e)}onDidChange(e){this.didChangeEmitter.on("didChange",e)}onDidDelete(e){this.didDeleteEmitter.on("didDelete",e)}dispose(){this.intervalId&&clearInterval(this.intervalId),this.didCreateEmitter.removeAllListeners(),this.didChangeEmitter.removeAllListeners(),this.didDeleteEmitter.removeAllListeners()}startPolling(){this.intervalId=setInterval((()=>{this._logger.log((()=>`Polling ${this.uri.fsPath}`),c.VerbosityLevel.Trace),s.stat(this.uri.fsPath,((e,t)=>{e?this.lastKnownStat?(this.lastKnownStat=void 0,this.didDeleteEmitter.emit("didDelete",this.uri)):this._logger.log((()=>`Error polling ${this.uri.fsPath}: ${e.message}`),c.VerbosityLevel.Minimal):this.lastKnownStat?t.mtimeMs!==this.lastKnownStat.mtimeMs&&(this.lastKnownStat=t,this.didChangeEmitter.emit("didChange",this.uri)):(this.lastKnownStat=t,this.didCreateEmitter.emit("didCreate",this.uri))}))}),this.pollIntervalMs)}}},26474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalDescriptors=void 0;const n=r(19679);class i{static testWindowVSCodeServer=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.TestWindow.VSCode.Service","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static projectSystemProviderServer=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.TestWindow.VSCode.ProjectSystemProvider.Service","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static aspireServer=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.AspireRunSettingService","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader))}t.InternalDescriptors=i},34388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.VerbosityLevel=void 0;const n=r(89496),i=r(24135);var o;!function(e){e.Minimal="minimal",e.Diagnostic="diagnostic",e.Trace="trace"}(o=t.VerbosityLevel||(t.VerbosityLevel={})),t.Logger=class{outputChannel;verbosityLevel;constructor(){this.outputChannel=n.window.createOutputChannel(i.TEST_EXPLORER_DISPLAY_NAME),this.verbosityLevel=this.getLogLevelOption(),n.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this)}getLogLevelOption(){return"true"===process.env.CSHARP_TEST_EXPLORER_TRACE?o.Trace:"diagnostic"===n.workspace.getConfiguration("csharp.debug").get("testExplorerVerbosity","minimal")?o.Diagnostic:o.Minimal}onConfigurationChanged(e){e.affectsConfiguration("csharp.debug.testExplorerVerbosity")&&(this.verbosityLevel=this.getLogLevelOption(),this.log((()=>`Log verbosity changed to: ${this.verbosityLevel}`),o.Minimal))}log(e,t=o.Minimal){if(this.shouldLogMessage(t)){const r=e(),n=this.getLogPrefix(t);this.outputChannel.appendLine(n+r)}}shouldLogMessage(e){return this.verbosityLevel===o.Trace||this.verbosityLevel===o.Diagnostic&&e===o.Diagnostic||e===o.Minimal}getLogPrefix(e){switch(e){case o.Diagnostic:return"[diag] ";case o.Trace:return"[trace] ";default:return""}}logAndThrow(e){throw this.log((()=>e)),new Error(e)}get currentVerbosityLevel(){return this.verbosityLevel}}},64558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectSystemMonitor=void 0;const n=r(82361),i=r(26474);t.ProjectSystemMonitor=class{emitter=new n.EventEmitter;logger;projectSystemservice;constructor(e){this.logger=e}notifyProjectsChanged(e){return this.emitter.emit("projectChanged",e),Promise.resolve()}async start(e,t,r){this.projectSystemservice=await t.getProxy(i.InternalDescriptors.projectSystemProviderServer,{clientRpcTarget:this}),this.projectSystemservice?(this.emitter.on("projectChanged",r),await this.projectSystemservice.initialize(),this.logger.log((()=>"Initialized project system provider."))):this.logger.logAndThrow("Error connecting to the project system provider service.")}}},14379:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Strings=void 0;class r{static _strings;static initialize(e){r._strings=e}static get(e){if(!r._strings)return"<< Error loading localized string >>";return r._strings[e]||"<< Error loading localized string >>"}}t.Strings=r},35853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskQueue=void 0;class r{last=Promise.resolve();enqueue(e){return this.last=r.runAfter(this.last,e),this.last}static async runAfter(e,t){return await e,await t()}}t.TaskQueue=r},43578:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEventNames=void 0,t.TelemetryEventNames=class{static ReliabilityTestControllerLoaded="vs/unittest/testwindow/testcontrollerloaded";static ReliabilityTestControllerLoadedVersionProperty="vs.unittest.testwindow.testexplorerversion";static ReliabilityRefreshButtonClicks="vs/unittest/testwindow/refreshbuttonclicks";static ReliabilityRefreshButtonClicksNumberOfTestsProperty="vs.unittest.testwindow.numberoftests";static TimeToPrepareTestRunEvent="vs/unittest/testwindow/timetopreparetestrun";static TestPreparationTimeProperty="vs.unittest.testwindow.preparationtimeinms";static TestBuildKindProperty="vs.unittest.testwindow.buildkind";static IntegrationTestTimeToDiscoverAllTestsEvent="vs/unittest/testwindow/integrationtesttimetodiscoveralltests";static IntegrationTestTimeToRunAllTestsEvent="vs/unittest/testwindow/integrationtesttimetorunalltests";static IntegrationTestKindProperty="vs.unittest.testwindow.integrationtestkind";static IntegrationTestTimeToRunAllTestsProperty="vs.unittest.testwindow.IntegrationTestTimeToRunAllTestsinms";static IntegrationTestTimeToDiscoverAllTestsProperty="vs.unittest.testwindow.IntegrationTestTimeToDiscoverAllTestsinms";static TimeToDiscoverTestsEvent="vs/unittest/testwindow/timetodiscovertests";static DiscoveryTimeProperty="vs.unittest.testwindow.discoverytimeinms";static NumberOfTestProjectsProperty="vs.unittest.testwindow.numtestprojects";static NumberOfTestsProperty="vs.unittest.testwindow.numtests";static IsAbortedProperty="vs.unittest.testwindow.isaborted";static FirstDiscoveryProperty="vs.unittest.testwindow.firstdiscovery"}},83815:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TestOperationScheduler=void 0;const s=o(r(89496)),a=r(35853),c=r(34388);class u{_taskQueue;_logger;discoveryInProgress=new Map;testBuildOrExecutionInProgress=!1;constructor(e){this._logger=e,this._taskQueue=new a.TaskQueue}static async fileStat(e){try{return await s.workspace.fs.stat(e)}catch{return}}static async fileExist(e){try{return await s.workspace.fs.stat(e),!0}catch(e){if(e instanceof s.FileSystemError&&"FileNotFound"===e.code)return!1;throw e}}static async getTimestampedProjects(e){var t=[];for(const r of e){const e=s.Uri.file(r.outputPath),n=await u.fileStat(e);t.push({mtime:n?.mtime??0,...r})}return t}static async getModifiedProjects(e){var t=[];for(const r of e){const e=s.Uri.file(r.outputPath),n=await u.fileStat(e);n&&n.mtime>r.mtime&&t.push(r)}return t}static async getModifiedProjectsSinceLastDiscovery(e){var t=[];for(const r of e){const e=s.Uri.file(r.outputPath),n=await u.fileStat(e);n&&n.mtime>parseInt(r.lastDiscovery??"0")&&t.push(r)}return t}tryScheduleDiscovery(e){const t=this.discoveryInProgress.get(e.outputPath.toLowerCase());if(t&&e.mtime<=t){const t=new Date(e.mtime).toLocaleString();return this._logger.log((()=>`Skipping discovery, already scheduled: ${e.outputPath} [${t}]`)),!1}return this.discoveryInProgress.set(e.outputPath.toLowerCase(),e.mtime),!0}async discoverProjects(e,t){if(!this.testBuildOrExecutionInProgress){var r=[];for(const t of e){const e=s.Uri.file(t.outputPath),n=await u.fileStat(e);if(n){const e={...t,mtime:n.mtime};this.tryScheduleDiscovery(e)&&r.push(e)}else r.push({...t,mtime:0})}if(0!=r.length){for(const e of r)if(0==e.mtime)this._logger.log((()=>`Assembly not found for discovery: ${e.outputPath}. A build is required.`));else{const t=new Date(e.mtime).toLocaleString();this._logger.log((()=>`Scheduling discovery: ${e.outputPath} [Last modified: ${t}]`))}try{return await this._taskQueue.enqueue((()=>t(r)))}finally{for(const e of r)this.discoveryInProgress.delete(e.outputPath.toLowerCase())}}else this._logger.log((()=>"Skipping discovery, no projects to discover"),c.VerbosityLevel.Diagnostic)}}async enqueueOperation(e){try{return this.testBuildOrExecutionInProgress=!0,await this._taskQueue.enqueue((()=>e()))}finally{this.testBuildOrExecutionInProgress=!1}}}t.TestOperationScheduler=u},98998:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TestViewManager=t.RootNodeId=void 0;const s=o(r(89496)),a=o(r(71017)),c=o(r(57147)),u=r(66578),l=r(34388),d=r(24135),p=r(13865),f=r(83815),h=r(61585),g=r(43578),m=r(14379),v=r(35853),y=r(9742),_=r(10460),S=r(96689),w=r(26864);t.RootNodeId=0;const E=()=>Math.trunc(Math.random()*Math.pow(2,31)),b=e=>({parentNodeId:{nodeId:e,nodeVersion:0,collectionVersion:0},childNodeIds:[]});var P;!function(e){e.Refresh="Refresh",e.Run="Run"}(P||(P={})),t.TestViewManager=class{_service;_testController;_logger;_runProfile;_debugProfile;_coverageProfile;_testOperationScheduler;_serviceBroker;_discoverBeforeRunHandler;_existingFilesCache;viewId;viewVersion=0;testItems;testItemsByTestCaseRecordId;testMeta;_telemetryService;_coverageManager;_enableTestExplorerDiff;_aspireServiceInitialized=!1;_aspireService=null;constructor(e,r,n,i,o,a,c,u){this.viewId=E(),this._service=e,this._testOperationScheduler=r,this._logger=i,this._serviceBroker=o,this._telemetryService=a,this._discoverBeforeRunHandler=c,this._coverageManager=u,this._testController=n,this._testController.refreshHandler=this.refreshHandler,this._testController.resolveHandler=this.resolveHandler,this._runProfile=this._testController.createRunProfile("Run",s.TestRunProfileKind.Run,this.runHandler,!0),s.extensions.getExtension("ms-dotnettools.csharp")?this._debugProfile=this._testController.createRunProfile("Debug",s.TestRunProfileKind.Debug,this.debugHandler,!0):this._logger.log((()=>"Please install the C# tools extension, which is required for debugging tests.")),this._coverageProfile=this._testController.createRunProfile("Coverage",s.TestRunProfileKind.Coverage,this.coverageHandler,!0),this._coverageManager.setupCoverageProfile(this._coverageProfile),this.testItems=new Map,this.testItemsByTestCaseRecordId=new Map,this.testMeta=new Map,this.testMeta.set(t.RootNodeId,b(t.RootNodeId)),this._existingFilesCache=new Map,this._enableTestExplorerDiff=this.getEnableDiffOption(),s.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this)}getEnableDiffOption(){return s.workspace.getConfiguration("dotnet.testWindow").get("enableTestExplorerDiff",!0)}onConfigurationChanged(e){e.affectsConfiguration("dotnet.testWindow.enableTestExplorerDiff")&&(this._enableTestExplorerDiff=this.getEnableDiffOption(),this._logger.log((()=>"Diff feature "+(this._enableTestExplorerDiff?"enabled":"disabled")),l.VerbosityLevel.Minimal))}debugHandler=async(e,t)=>{await this.runTestsHelper(e,t,this._service.debugTests,!1)};runHandler=async(e,t)=>{await this.runTestsHelper(e,t,this._service.runTests,!1)};coverageHandler=async(e,t)=>{await this.runTestsHelper(e,t,this._service.runTests,!0)};async runTestsHelper(e,t,r,n){let i={viewId:this.viewId,testNodes:[],runSettings:await this.getRunSettings()};if(e.include){const r=[];for(const t of e.include){const e=parseInt(t.id);r.push(e)}i.testNodes=r,await this.expandNodes(r,t)}else await this.expandAllNodes(t);let o=E().toString();try{this.beforeTestRun(e),t.onCancellationRequested((async()=>{this.activeTestRun?.end();const e=s.debug.activeDebugSession;e&&await s.debug.stopDebugging(e)})),await this._testOperationScheduler.enqueueOperation((async()=>{const a=await this.buildTestsIfNeeded(i,P.Run,t);if(!a.success)return this._logger.log((()=>"Error building your test projects. Please correct the build errors and try again.")),void s.window.showErrorMessage(m.Strings.get("buildFailed"));a.changedProjects.length>0&&await this._discoverBeforeRunHandler(a.changedProjects),n&&(i.runSettings=await this._coverageManager.startCoverageCollection(o,i,this.activeTestRun,a.allProjects),this._logger.log((()=>"Starting coverage collection with run settings: "+i.runSettings),l.VerbosityLevel.Diagnostic)),e.profile?.kind===s.TestRunProfileKind.Debug&&this._isAspireTestProject(a.allProjects)&&(this._aspireServiceInitialized||(this._aspireService=await(0,y.connectToAspireServer)(this._serviceBroker,this._logger),this._aspireServiceInitialized=!0),i.runSettings=await this._updateRunSettings(this._aspireService,i.runSettings));try{await r(i,t)}catch(e){throw this._logger.log((()=>`Error running tests: ${e}`),l.VerbosityLevel.Diagnostic),e}}))}finally{n&&await this._coverageManager.stopCoverageCollection(o),await this.afterTestRun()}}_isAspireTestProject(e){return e.some((e=>e.capabilities.includes("AspireDashboard")))}async _updateRunSettings(e,t){let r=await(0,y.getAspireEnvironmentVars)(e);if(!r||0===Object.keys(r).length)return t;try{let e=(new w.XMLParser).parse(t);e.RunSettings||(e.RunSettings={}),e.RunSettings.RunConfiguration||(e.RunSettings.RunConfiguration={}),e.RunSettings.RunConfiguration.EnvironmentVariables||(e.RunSettings.RunConfiguration.EnvironmentVariables={});for(const[t,n]of Object.entries(r))e.RunSettings.RunConfiguration.EnvironmentVariables[t]=n;let n=new w.XMLBuilder({format:!0,suppressEmptyNode:!0}).build(e);const i='<?xml version="1.0" encoding="utf-8"?>';n=n.replace(/^<\?xml.*?\?>/,i),n.startsWith("<?xml")||(n=`${i}\n${n}`);const o=["DEBUG_SESSION_PORT","DCP_INSTANCE_ID_PREFIX"],s=Object.entries(r).filter((([e])=>o.includes(e))).map((([e,t])=>`${e}=${t}`)).join(", ");return this._logger.log((()=>s?`Updated runSettings with non-sensitive vars: ${s}`:`Updated runSettings with ${Object.keys(r).length} environment variables (no non-sensitive vars present)`),l.VerbosityLevel.Diagnostic),n}catch(e){return this._logger.log((()=>`Failed to update runSettings: ${e}`)),t}}buildTestsIfNeeded=async(e,t,r)=>{const n=performance.now(),i=await this._serviceBroker.getProxy(h.Descriptors.buildService);if(!i)return this._logger.log((()=>"Error connecting to the build service.")),{changedProjects:[],allProjects:[],success:!0};let o="";try{const n=await this._service.getProjectsForTests(e,r),s=await f.TestOperationScheduler.getTimestampedProjects(n),a=new Set(n.map((e=>e.projectPath)));if((0,_.buildOnRefreshIsDisabled)()&&t==P.Refresh||(0,_.buildOnRunIsDisabled)()&&t==P.Run){const e=await f.TestOperationScheduler.getModifiedProjectsSinceLastDiscovery(n);return this._logger.log((()=>`Skipping build and return projects based on last discovery. Projects: ${e.map((e=>e.projectName)).join(", ")}`),l.VerbosityLevel.Diagnostic),{changedProjects:e,allProjects:n,success:!0}}let c=!1;if(1===a.size){o="project";const e=[...a.values()][0];c=await i.build(e)}else o="solution",c=await i.build("");return(0,_.autoDiscoveryIsDisabled)()?(this._logger.log((()=>"Skipping test auto discovery (dotnet.testWindow.disableAutoDiscovery=true) for projects "),l.VerbosityLevel.Diagnostic),{changedProjects:await f.TestOperationScheduler.getModifiedProjectsSinceLastDiscovery(n),allProjects:n,success:!0}):{changedProjects:await f.TestOperationScheduler.getModifiedProjects(s),allProjects:n,success:c}}finally{this._telemetryService.sendTelemetryEvent(g.TelemetryEventNames.TimeToPrepareTestRunEvent,{[g.TelemetryEventNames.TestBuildKindProperty]:o},{[g.TelemetryEventNames.TestPreparationTimeProperty]:performance.now()-n}),i.dispose()}};refreshHandler=async e=>{this._telemetryService.sendTelemetryEvent(g.TelemetryEventNames.ReliabilityRefreshButtonClicks,{[g.TelemetryEventNames.ReliabilityRefreshButtonClicksNumberOfTestsProperty]:this.testItems.size.toString()}),await this._testOperationScheduler.enqueueOperation((async()=>{let t={viewId:this.viewId,testNodes:[],runSettings:await this.getRunSettings()};const r=await this.buildTestsIfNeeded(t,P.Refresh,e);if(!r.success)return this._logger.log((()=>"Error building your test projects. Please correct the build errors and try again.")),void s.window.showErrorMessage(m.Strings.get("buildFailed"));r.changedProjects.length>0&&await this._discoverBeforeRunHandler(r.changedProjects)}))};resolveHandler=async e=>{if(!e)return;const t=parseInt(e.parent?.id??"0"),r=this.testMeta.get(t);if(!r)return;for(const e of r.childNodeIds)this.testMeta.set(e.nodeId,b(e.nodeId));const n=new s.CancellationTokenSource;try{await this.refresh(n.token)}catch(e){this._logger.log((()=>`Error during resolve: ${e}`))}finally{n.dispose()}};addTestItem(e,t){const r=e.sourceFile?s.Uri.file(e.sourceFile):void 0,n=this._testController.createTestItem(e.id.toString(),e.displayName,r);return e.sourceFileLineNumber>0&&(n.range=new s.Range(e.sourceFileLineNumber-1,0,e.sourceFileLineNumber,0)),n.canResolveChildren=e.isExpandable,this.testItems.set(e.id,n),e.testCaseRecordId&&this.testItemsByTestCaseRecordId.set(e.testCaseRecordId,n),t.add(n),n}updateTestItem(e){const t=this.testItems.get(e.id);if(!t)throw new Error("Cannot update find testItem to update");return e.sourceFileLineNumber>0&&(t.range=new s.Range(e.sourceFileLineNumber-1,0,e.sourceFileLineNumber,0)),t.label=e.displayName,t.canResolveChildren=e.isExpandable,t}activeTestRun;beforeTestRun(e){if(this.activeTestRun=this._testController.createTestRun(e,void 0,!0),e.include&&e.include.length>0)for(const t of e.include)this.activeTestRun.enqueued(t);else for(const e of this.testItems.values())this.activeTestRun.enqueued(e)}_testResultNotificationInProgress=Promise.resolve();async notifyTestResult(e,t){this._testResultNotificationInProgress=this.notifyTestResultImpl(e,t),await this._testResultNotificationInProgress}async notifyTestResultImpl(e,t){const r=this.activeTestRun;if(r){for(const e of t){const t=this.testItemsByTestCaseRecordId.get(e);t&&r.started(t)}for(const t of e){const e=this.testItemsByTestCaseRecordId.get(t.testCaseRecordId);if(e){switch(t.outcome){case u.TestOutcome.Failed:let n=null;const i=`${t.errorMessage??"Test Failed."}\r\n${t.errorStackTrace??""}`;let o;o=this._enableTestExplorerDiff&&(n=(0,S.parseExpectedActual)(t.errorMessage??""))?s.TestMessage.diff(i,n.expected,n.actual):new s.TestMessage(i);const a=await this.parseErrorStackTrace(t.errorStackTrace);a.length>0&&(o.stackTrace=a);const c=await this.tryParseStackLocation(e,t.errorStackTrace);c&&(o.location=c),r.failed(e,o,t.duration);break;case u.TestOutcome.Passed:r.passed(e,t.duration);break;case u.TestOutcome.Skipped:r.skipped(e);break;case u.TestOutcome.NotFound:r.errored(e,new s.TestMessage("Test could not be found."),t.duration);break;default:r.errored(e,new s.TestMessage("Test could not be run."),t.duration)}if(t.standardOutput){const n=t.standardOutput.replace(/(?<!\r)\n/g,"\r\n");r.appendOutput(n,void 0,e)}if(t.standardError){const n=t.standardError.replace(/(?<!\r)\n/g,"\r\n");r.appendOutput(n,void 0,e)}}else this._logger.log((()=>`Unable to find a test case with id ${t.testCaseRecordId}`))}}else this._logger.log((()=>"No active test run."))}async parseStackTrace(e){const t=[];if(!e)return t;const r=e.split("\n"),n=/at (.*) in (.*):line (\d*)$/m;for(const e of r){const r=n.exec(e.trim());if(r){const[e,n,i,o]=r,a=s.Uri.file(i),c=new s.Position(parseInt(o)-1,0),u=a.toString();let d;if(this._existingFilesCache.has(u))d=this._existingFilesCache.get(u);else{try{d=await f.TestOperationScheduler.fileExist(a)}catch(e){this._logger.log((()=>`Unknown error accessing file ${u}`),l.VerbosityLevel.Diagnostic),d=!1}this._existingFilesCache.set(u,d)}d&&t.push({label:n,fileUri:a,position:c})}}return t}async parseErrorStackTrace(e){const t=[],r=await this.parseStackTrace(e);for(const e of r)t.push(new s.TestMessageStackFrame(e.label,e.fileUri,e.position));return t}async tryParseStackLocation(e,t){const r=await this.parseStackTrace(t);if(r.length>0){const e=r[0];return new s.Location(e.fileUri,e.position)}this._logger.log((()=>`Could not parse stack location for test item ${e.id}`),l.VerbosityLevel.Diagnostic)}async afterTestRun(){await this._testResultNotificationInProgress,this.activeTestRun?.end(),this.activeTestRun=void 0}testNodesToQuery(){return Array.from(this.testMeta.values()).map((e=>e.parentNodeId))}updateChildItems(e,t,r){t.parentNodeId.collectionVersion;const n=new Set;e.forEach((e=>n.add(parseInt(e.id))));for(const i of t.childNodeIds){const t=r.get(i.nodeId);if(!t)throw new Error(`test node data for ${i.nodeId}:${i.nodeVersion}:${i.collectionVersion} expected but not provided.`);if(e.get(i.nodeId.toString())){let e=this.testMeta.get(i.nodeId);e||(e={parentNodeId:i,childNodeIds:[]},this.testMeta.set(i.nodeId,e)),(i.nodeVersion>e.parentNodeId.nodeVersion||i.collectionVersion>e.parentNodeId.collectionVersion)&&this.updateTestItem(t)}else this.addTestItem(t,e);n.delete(i.nodeId)}for(const t of n)e.delete(t.toString()),this.recursivelyRemoveTestMeta(t)}recursivelyRemoveTestMeta(e){const t=this.testMeta.get(e);if(t)for(const e of t.childNodeIds)this.recursivelyRemoveTestMeta(e.nodeId);this.testMeta.delete(e)}applyTestNodeChanges(e){try{const t=new Map(e.tests.map((e=>[e.id,e])));for(const r of e.structure){const e=this.testItems.get(r.parentNodeId.nodeId),n=e?e.children:this._testController.items;this.updateChildItems(n,r,t),this.testMeta.set(r.parentNodeId.nodeId,r)}for(const t of e.structure)for(const e of t.childNodeIds){const t=this.testMeta.get(e.nodeId);(!t||t.parentNodeId.nodeVersion<e.nodeVersion||t.parentNodeId.collectionVersion<e.collectionVersion)&&this.testMeta.set(e.nodeId,{parentNodeId:e,childNodeIds:[]})}this.viewVersion=e.viewVersion}catch(e){throw this._logger.log((()=>`Error applying test node updates: ${e}`)),e}}debugState(){return this._logger.currentVerbosityLevel!=l.VerbosityLevel.Trace?"":`items:  ${(0,p.debugTestItems)(this.testItems)}\nstruct: ${(0,p.debugTestMeta)(this.testMeta)}`}refreshQueue=new v.TaskQueue;refresh(e){return this.refreshQueue.enqueue((async()=>{const t=this.debugState(),r={viewId:this.viewId,viewVersion:this.viewVersion,parentNodes:this.testNodesToQuery()},n=await this._service.updateView(r,e);this._logger.log((()=>`---------------\n${(0,p.debugRefresh)(r,n)}\n---------------\n`),l.VerbosityLevel.Trace),this.applyTestNodeChanges(n),this._logger.log((()=>`${t}\n--refresh--\n${this.debugState()}\n===========`),l.VerbosityLevel.Trace)}))}expandNodes(e,t){for(const t of e){const e=this.testMeta.get(t);e?e.parentNodeId.collectionVersion=d.VERSIONED_NODE_ID_EXPAND_CHILDREN_VERSION:this._logger.log((()=>`Cannot expand node with of ${t} as it is not found.`))}return this.refresh(t)}expandAllNodes(e){const r=this.testMeta.get(t.RootNodeId);return r?r.parentNodeId.collectionVersion=d.VERSIONED_NODE_ID_EXPAND_CHILDREN_VERSION:this._logger.log((()=>"Cannot find the root node to expand it.")),this.refresh(e)}async runAllTests(){const e=performance.now(),t={include:Array.from(this.testItems.values()),exclude:void 0,profile:void 0,preserveFocus:!1},r=new s.CancellationTokenSource;await this.runTestsHelper(t,r.token,this._service.runTests,!1),this._telemetryService.sendTelemetryEvent(g.TelemetryEventNames.IntegrationTestTimeToRunAllTestsEvent,{[g.TelemetryEventNames.TestBuildKindProperty]:"runAllTests"},{[g.TelemetryEventNames.IntegrationTestTimeToRunAllTestsProperty]:performance.now()-e})}dispose(){this.testItems.clear(),this.testItemsByTestCaseRecordId.clear(),this.testMeta.clear(),this._existingFilesCache.clear(),this._service.closeStore().then((()=>{this._runProfile.dispose(),this._debugProfile&&this._debugProfile.dispose(),this._testController.dispose(),this._coverageProfile.dispose()}))}replaceVariables(e,t){if(!e||!t)return e;const r=t.uri.fsPath,n=t.name;this._logger.log((()=>`Replacing variables using folder: ${r} (basename: ${n})`));const i=(e=(e=e.replace("${workspaceFolder}",r)).replace("${workspaceFolderBasename}",n)).match(/\${[^}]+}/g)||[];return i.length>0&&this._logger.log((()=>`Warning: The following variables are not supported: ${i.join(", ")}. Supported variables: \${workspaceFolder}, \${workspaceFolderBasename}.`)),e}async findRelevantWorkspaceFolder(){const e=s.workspace.workspaceFolders;if(!e||0===e.length)return void this._logger.log((()=>"No workspace folders are open. Cannot determine relevant folder."));if(1===e.length)return this._logger.log((()=>`Only one workspace folder: ${e[0].uri.fsPath}. Using it directly.`)),e[0];for(const t of e)try{const e=c.readdirSync(t.uri.fsPath),r=e.some((e=>e.endsWith(".sln"))),n=e.some((e=>e.endsWith(".csproj")));if(r||n)return this._logger.log((()=>`Selected workspace folder: ${t.uri.fsPath} (contains .sln or .csproj)`)),t}catch(e){this._logger.log((()=>`Error reading folder ${t.uri.fsPath}: ${e}`))}const t=e[0];return this._logger.log((()=>`No folder with .sln or .csproj found. Falling back to first folder: ${t.uri.fsPath}`)),t}async getRunSettings(){const e=s.workspace.getConfiguration().get("dotnet.unitTests.runSettingsPath");if(!e)return this._logger.log((()=>"No runSettingsPath configured. Falling back to default settings.")),d.DEFAULT_RUN_SETTINGS;this._logger.log((()=>`Raw runSettingsPath from configuration: ${e}`));const t=await this.findRelevantWorkspaceFolder();if(!t)return this._logger.log((()=>"No valid workspace folder found. Falling back to default settings.")),d.DEFAULT_RUN_SETTINGS;let r=this.replaceVariables(e,t);this._logger.log((()=>`Resolved runSettingsPath after substitution: ${r}`));let n=r;if(a.isAbsolute(r)||(n=a.join(t.uri.fsPath,r),this._logger.log((()=>`Final absolutePath after path.join: ${n}`))),!c.existsSync(n))return this._logger.log((()=>`Cannot read runsettings file at: ${n}. Falling back to default settings.`)),d.DEFAULT_RUN_SETTINGS;try{this._logger.log((()=>`Using custom runsettings file at: ${n}`));const e=await s.workspace.fs.readFile(s.Uri.file(n));return(new TextDecoder).decode(e)}catch(e){return this._logger.log((()=>`Error reading runsettings file: ${e}. Falling back to default settings.`)),d.DEFAULT_RUN_SETTINGS}}}},46341:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestWindowTestController=void 0;const a=o(r(89496)),c=r(24135),u=r(97690),l=r(26474),d=r(34388),p=r(64558),f=r(83815),h=r(15246),g=r(98998),m=r(80149),v=r(43578),y=s(r(71017)),_=r(10460),S=r(45800),w=r(25880);class E{_context;_controller;_serviceBroker;_testOperationScheduler;_logger;_coverageCollectionController;_callback;_projectSystemMonitor;_testExplorerVersion=13;_testWindowService;_testViewManager;_telemetryService;_testControllerInitialized=!1;_totalDiscoveredSources=0;_discoverProjectsCount=0;_nullDiscoveryResultsCount=0;_totalDiscoveredTests=-1;_totalTestDiscoveredReady=new a.EventEmitter;_firstDiscovery=!0;_startTime=performance.now();_runningOnWindows=!1;_runningOnMacOs=!1;_runningOnLinux=!1;_processArchitecture;_platform="";constructor(e,t,r,n){this._context=e,this._controller=a.tests.createTestController(c.TEST_CONTROLLER_ID,c.TEST_EXPLORER_DISPLAY_NAME),this._serviceBroker=t,this._logger=r,this._coverageCollectionController=n,this._testOperationScheduler=new f.TestOperationScheduler(r),this._projectSystemMonitor=new p.ProjectSystemMonitor(r),this._callback=new m.TestWindowVSCodeServerCallbackService(this._logger),this._telemetryService=new h.TelemetryService(this._context,this._logger)}async initialize(){this._logger.log((()=>`Log verbosity: ${this._logger.currentVerbosityLevel}`));const e=this._context.extension.packageJSON.version;this._logger.log((()=>`C# Dev Kit version: ${e}`),d.VerbosityLevel.Diagnostic),this._logger.log((()=>`Test Explorer version: ${this._testExplorerVersion}`),d.VerbosityLevel.Diagnostic),this._runningOnWindows="win32"===process?.platform,this._runningOnMacOs="darwin"===process?.platform,this._runningOnLinux="linux"===process?.platform,this._platform=process?.platform,this._logger.log((()=>`platform: ${this._platform}`),d.VerbosityLevel.Diagnostic),this._processArchitecture=process?.arch,this._logger.log((()=>`arch: ${this._processArchitecture}`),d.VerbosityLevel.Diagnostic);const t=await this._serviceBroker.getProxy(l.InternalDescriptors.testWindowVSCodeServer,{clientRpcTarget:this._callback});if(!t)return void this._logger.log((()=>"Error connecting to the test window service."));this._testWindowService=t,this._context.subscriptions.push(t),this._testViewManager=new g.TestViewManager(t,this._testOperationScheduler,this._controller,this._logger,this._serviceBroker,this._telemetryService,this.internalInvokeDiscovery,new w.CoverageManager(await this._coverageCollectionController)),this._callback.setTestViewManager(this._testViewManager);const r=!0===a.workspace.getConfiguration("dotnet.testWindow").get("useTestingPlatformProtocol",!0),n=a.workspace.getConfiguration().get("dotnet.dotnetPath"),i=a.workspace?.workspaceFolders??[],o=i[0]?.uri.fsPath??"";await t.initialize({workingDirectory:o,messageLevel:u.MessageLevel.Informational,useTestingPlatformProtocol:r,dotnetPath:n});const s=this._context.storageUri;if(!s)return void this._logger.log((()=>"Workspace storage folder is not available."));await a.workspace.fs.createDirectory(s);const c=s.fsPath;this._logger.log((()=>`Test Store Folder: ${c}`));let p=await t.openStore(c);this._logger.log((()=>"Test Store loaded from persistance: "+(p.loadedFromPersistence?"Yes":"No")),d.VerbosityLevel.Diagnostic),this._projectSystemMonitor.start(this._context,this._serviceBroker,(e=>{this._logger.log((()=>`${e.addedProjects.length} projects added, ${e.changedProjects.length} changed, ${e.removedProjects.length} removed.`)),e.addedProjects.length>0&&this.discoverProjects(e.addedProjects),e.changedProjects.length>0&&this.discoverProjects(e.changedProjects),e.removedProjects.length>0&&this.removeProjects(Array.from(e.removedProjects.map((e=>a.Uri.file(e.outputPath)))))})).then((()=>{this._logger.log((()=>"Waiting for projects to be detected by Project System..."))})),this._testControllerInitialized=!0,this._logger.log((()=>"Test controller initialized.")),this._telemetryService.sendTelemetryEvent(v.TelemetryEventNames.ReliabilityTestControllerLoaded,{[v.TelemetryEventNames.ReliabilityTestControllerLoadedVersionProperty]:this._testExplorerVersion.toString()})}pollers=new Map;watchers=new Map;static relativePattern(e,t){const r=a.workspace.getWorkspaceFolder(e);if(!r){t.log((()=>`Test container is outside of workspace: ${e.fsPath}`),d.VerbosityLevel.Diagnostic);const r=y.default.dirname(e.fsPath),n=y.default.basename(e.fsPath);return new a.RelativePattern(a.Uri.file(r),n)}const n=a.workspace.asRelativePath(e,!1);return new a.RelativePattern(r,n)}watchTestSource(e){const t=a.Uri.file(e.outputPath),r=t.toString(!0);if((0,_.autoDiscoveryIsDisabled)())this._logger.log((()=>`Skipping test auto discovery (dotnet.testWindow.disableAutoDiscovery=true): ${e.outputPath}`));else{if(this._runningOnMacOs){if(this.pollers.has(r))return void this._logger.log((()=>`Already watching this file, abort: ${e.outputPath}`),d.VerbosityLevel.Diagnostic);const n=new S.FilePoller(t,2500,this._logger);this._context.subscriptions.push({dispose:()=>n.dispose()}),n.onDidChange((()=>{this._logger.log((()=>`Tests changed, running test discovery: ${e.outputPath}`)),this.discoverProjects([e])})),n.onDidCreate((()=>{this._logger.log((()=>`Tests are available, running test discovery: ${e.outputPath}`)),this.discoverProjects([e])})),n.onDidDelete((()=>{this._logger.log((()=>`Tests removed: ${t.fsPath}`)),this._testOperationScheduler.testBuildOrExecutionInProgress||this.removeTestSources([t])})),this.pollers.set(r,n)}else{if(this.watchers.has(r))return void this._logger.log((()=>`Already watching this file, abort: ${e.outputPath}`),d.VerbosityLevel.Diagnostic);const n=E.relativePattern(t,this._logger),i=a.workspace.createFileSystemWatcher(n);this._context.subscriptions.push(i),i.onDidChange((t=>{this._logger.log((()=>`Tests changed, running test discovery: ${e.outputPath}`)),this.discoverProjects([e])})),i.onDidCreate((t=>{this._logger.log((()=>`Tests are available, running test discovery: ${e.outputPath}`)),this.discoverProjects([e])})),i.onDidDelete((e=>{this._logger.log((()=>`Tests removed: ${t.fsPath}`)),this._testOperationScheduler.testBuildOrExecutionInProgress||this.removeTestSources([t])})),this.watchers.set(r,i)}this._logger.log((()=>`Watcher added for project: ${e.outputPath}`),d.VerbosityLevel.Diagnostic)}}internalInvokeDiscovery=async e=>{if(!this._testWindowService)return void this._logger.log((()=>"TestWindowService is not available."));if(!this._testViewManager)return void this._logger.log((()=>"TestViewManager is not available."));if(0===e.length)return void this._logger.log((()=>"No projects to discover."));const t={sources:e,discoverySettings:await this._testViewManager.getRunSettings()};return await this._testWindowService.discoverTests(t)};projectIsValidForPlatform(e){const t=new Set(["net11","net20","net35","net40","net403","net45","net451","net452","net46","net461","net462","net47","net471","net472","net48"]),r=e.targetFramework?.toLowerCase()??"";return!(t.has(r)||this._runningOnMacOs&&"arm64"===this._processArchitecture&&(r.startsWith("netcoreapp1")||r.startsWith("netcoreapp2")||r.startsWith("netcoreapp3")||r.startsWith("net5"))||this._runningOnLinux&&"arm64"===this._processArchitecture&&(r.startsWith("netcoreapp1")||r.startsWith("netcoreapp2.0")))}discoverProjects(e){return this._testOperationScheduler.discoverProjects(e,(async e=>{const t=this._firstDiscovery;this._firstDiscovery=!1,this._discoverProjectsCount++;const r=performance.now(),n=[];for(const t of e)if(this.projectIsValidForPlatform(t))this.watchTestSource(t),n.push(t);else{const e=this._processArchitecture||"unknown architecture",r=this._runningOnWindows?"Windows":this._runningOnMacOs?"macOS":this._runningOnLinux?"Linux":"unknown OS";this._logger.log((()=>`Skipping "${t.outputPath}"  this project uses an unsupported target framework.\n\t\t\t\t\t\t .NET Framework projects are not supported. For .NET Core, verify compatibility with ${r} (${e}) at:\n\t\t\t\t\t\t https://dotnet.microsoft.com/en-us/download/dotnet/`))}const i=await this.internalInvokeDiscovery(n);if(!i)return this._logger.log((()=>"Null tests discovery results."),d.VerbosityLevel.Diagnostic),void this._nullDiscoveryResultsCount++;this._telemetryService.sendTelemetryEvent(v.TelemetryEventNames.TimeToDiscoverTestsEvent,{[v.TelemetryEventNames.IsAbortedProperty]:i.isAborted.toString(),[v.TelemetryEventNames.FirstDiscoveryProperty]:t.toString()},{[v.TelemetryEventNames.DiscoveryTimeProperty]:performance.now()-r,[v.TelemetryEventNames.NumberOfTestProjectsProperty]:i.discoveredSources.length,[v.TelemetryEventNames.NumberOfTestsProperty]:i.totalTests}),this._totalDiscoveredSources=i.discoveredSources.length,this._totalDiscoveredTests=i.totalTests,this._totalTestDiscoveredReady.fire(i.totalTests),this._logger.log((()=>`${i.totalTests} tests discovered from ${i.discoveredSources.join(";")} in ${i.elapsedTimeInMs} ms`));const o=new a.CancellationTokenSource;try{this._testViewManager?.expandAllNodes(o.token)}finally{o.dispose()}t&&this.pruneTestSources()}))}async pruneTestSources(){const e=await(this._testWindowService?.getOrphanedTestSources())??[];for(const t of e)this._logger.log((()=>`Pruning orphaned tests: ${t}`));await(this._testWindowService?.removeTestSources(e))}removeTestSources(e){const t=e.map((e=>e.fsPath));return this._testWindowService?.removeTestSources(t)??Promise.resolve()}removeProjects(e){for(const t of e){const e=t.toString(!0);if("darwin"===process.platform){const t=this.pollers.get(e);t&&(this.pollers.delete(e),t.dispose())}else{const t=this.watchers.get(e);t&&(this.watchers.delete(e),t.dispose())}}return this.removeTestSources(e)}dispose(){this._testViewManager?.dispose(),this._controller.dispose(),this._telemetryService.dispose()}isTestControllerInitialized(){return this._testControllerInitialized}totalDiscoveredTestsAsync(){return this._totalDiscoveredTests<=0?new Promise((e=>this._totalTestDiscoveredReady.event(e))):(this._telemetryService.sendTelemetryEvent(v.TelemetryEventNames.IntegrationTestTimeToDiscoverAllTestsEvent,{[v.TelemetryEventNames.TestBuildKindProperty]:"discoverAllTests"},{[v.TelemetryEventNames.IntegrationTestTimeToDiscoverAllTestsProperty]:performance.now()-this._startTime}),Promise.resolve(this._totalDiscoveredTests))}totalDiscoveredProjects(){return this._totalDiscoveredSources}totalExecutionsOfDiscoverProjectsCount(){return this._discoverProjectsCount}getWatchedPaths(){return"darwin"===process.platform?Array.from(this.pollers.keys()):Array.from(this.watchers.keys())}isTestWindowServiceAvailable(){return!!this._testWindowService}isTestViewManagerAvailable(){return!!this._testViewManager}getNullDiscoveryResultsCount(){return this._nullDiscoveryResultsCount}getControllerItems(){return this._controller.items}runAllTests(){return this._testViewManager?.runAllTests()??Promise.resolve()}async expandAllNodesInTestExplorer(){const e=(new a.CancellationTokenSource).token;await(this._testViewManager?.expandAllNodes(e))}}t.TestWindowTestController=E},80149:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TestWindowVSCodeServerCallbackService=void 0;const s=o(r(89496)),a=r(34388),c=r(6113);class u{logger;testViewManager;constructor(e){this.logger=e}buildDebugConfiguration(e){const t=s.workspace.getConfiguration().get("dotnet.unitTestDebuggingOptions");return{...t,type:t?.type||"coreclr",name:".NET Test Attach",request:"attach",processId:e}}async attachDebuggerToProcess(e,t){let r=this.buildDebugConfiguration(e);r.attachRequestId=(0,c.randomUUID)();let n=this.waitForDebuggerAttachComplete(r.attachRequestId);try{await s.debug.startDebugging(void 0,r)||this.logger.log((()=>"Unable to start debugging session."))}catch(e){return this.logger.log((()=>`Error starting debugging session: ${e}`)),!1}return await n}async launchProcessUnderDebugger(e,t,r,n,i){const o=u.parseArgs(t),a={type:"coreclr",request:"launch",name:".NET Test Host Debug",program:e,args:o,cwd:r,env:n,console:"integratedTerminal",stopAtEntry:!1};return await s.debug.startDebugging(void 0,a)||this.logger.log((()=>`Failed to start debugging session for filePath=${e}`)),-1}waitForDebuggerAttachComplete(e){return new Promise((t=>{let r=null,n=null,i=!1;const o=e=>{!1===i&&(i=!0,r?.dispose(),n?.dispose(),t(e))};r=s.debug.onDidTerminateDebugSession((t=>{t.configuration.attachRequestId===e&&(this.logger.log((()=>"Debug session terminated")),o(!1))})),n=s.debug.onDidReceiveDebugSessionCustomEvent((t=>{t.session.configuration.attachRequestId===e&&"attachComplete"===t.event&&(this.logger.log((()=>"Debugger attached")),o(!0))}))}))}setTestViewManager(e){this.testViewManager=e}log(e){return new Promise((t=>{this.logger.log((()=>e.message)),t()}))}notifyTestsChanged(e,t){return this.testViewManager?this.testViewManager.refresh(t):Promise.resolve()}async getDotnetPath(e,t){const r=await this.tryFindDotnet(e,t);return void 0===r?(this.logger.log((()=>`Failed to find dotnet.exe for SDK version: ${e}, requirement: ${t}`),a.VerbosityLevel.Diagnostic),""):(this.logger.log((()=>`Found dotnet.exe at: ${r}`),a.VerbosityLevel.Diagnostic),r)}async tryFindDotnet(e,t){try{const r={acquireContext:{version:e,requestingExtensionId:"ms-dotnettools.csdevkit",architecture:process?.arch,mode:"sdk",installType:"global"},versionSpecRequirement:t,rejectPreviews:!1};this.logger.log((()=>`Calling dotnet.findPath with context: ${JSON.stringify(r)}`),a.VerbosityLevel.Diagnostic);const n=await s.commands.executeCommand("dotnet.findPath",r);if(n){let e;if("string"==typeof n)e=n;else{if(!n||"object"!=typeof n||!("dotnetPath"in n))return void this.logger.log((()=>`Unexpected result from dotnet.findPath: ${JSON.stringify(n)}`),a.VerbosityLevel.Diagnostic);e=n.dotnetPath}return e}return void this.logger.log((()=>`No .NET SDK matching version ${e} (${t}) found by dotnet.findPath.`),a.VerbosityLevel.Diagnostic)}catch(e){return void this.logger.log((()=>`Error calling dotnet.findPath: ${e}`),a.VerbosityLevel.Diagnostic)}}notifyNewTestResults(e,t,r){return this.testViewManager?.notifyTestResult(e,t)??Promise.resolve()}static parseArgs(e){return e.split(" ")}}t.TestWindowVSCodeServerCallbackService=u},66578:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOutcome=void 0,(r=t.TestOutcome||(t.TestOutcome={}))[r.None=0]="None",r[r.Passed=1]="Passed",r[r.Failed=2]="Failed",r[r.Skipped=3]="Skipped",r[r.NotFound=4]="NotFound"},97690:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.LogVisibility=t.MessageLevel=void 0,(n=t.MessageLevel||(t.MessageLevel={}))[n.None=0]="None",n[n.Error=1]="Error",n[n.Warning=2]="Warning",n[n.Informational=3]="Informational",n[n.Diagnostic=4]="Diagnostic",n[n.Trace=5]="Trace",(r=t.LogVisibility||(t.LogVisibility={}))[r.All=0]="All",r[r.UserOnly=1]="UserOnly",r[r.DevOnly=2]="DevOnly"},96689:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseExpectedActual=void 0,t.parseExpectedActual=function(e){const t=e.includes("\r\n")?"\r\n":"\n",r=e.replace(/\r\n/g,"\n"),n=new RegExp(["Assert\\.AreEqual failed\\.\\s*","Expected a difference no greater than <(?<tolerance>[^>]+)>","\\s+between\\s+expected\\s+value\\s+<(?<expectedVal>[^>]+)>","\\s+and\\s+actual\\s+value\\s+<(?<actualVal>[^>]+)>","\\.?"].join(""),"m"),i=new RegExp(["CollectionAssert\\.AreEquivalent failed\\.","[^]*?","The expected collection contains\\s+(?<expectedCount>\\d+)\\s+occurrence\\(s\\)\\s+of <(?<missingItem>[^>]+)>\\.","\\s+","The actual collection contains\\s+(?<actualCount>\\d+)\\s+occurrence\\(s\\)\\."].join(""),"m"),o=new RegExp(["Assert\\.Equal\\(\\) Failure:.*?","(?:\\n.*?)*?","\\nExpected:\\s*(?<expected>[^\\n]+)","\\nActual:\\s*(?<actual>[^\\n]+)"].join(""),"m"),s=new RegExp(["Assert\\.NotEqual\\(\\) Failure:.*?","(?:\\n.*?)*?","\\nExpected:\\s*(?<expected>[^\\n]+)","\\nActual:\\s*(?<actual>[^\\n]+)"].join(""),"m"),a=new RegExp(["Expected:<(?<expected>[^>]+)>","[.,]?\\s*","[\\n]?","Actual:<(?<actual>[^>]+)>"].join(""),"m"),c=new RegExp(["Expected:\\s*(?<expected>[^\n]*)","[\\s\\n]+","Actual:(?<actual>[\\s\\S]+)"].join(""),"m"),u=new RegExp(["Expected:\\s*(?<expected>[^\n]+)","(?:\\s+|\\n)","But\\s+was:\\s*(?<actual>[^\n]+)"].join(""),"m");let l=null;{const e=/Values differ at index \[(\d+)\]/.exec(r);e&&(l=parseInt(e[1],10))}const d=[{name:"1) MSTest numeric tolerance",regex:n,parseFn:e=>{const{tolerance:t,expectedVal:r,actualVal:n}=e.groups??{};return t&&r&&n?{expected:`a difference no greater than ${t.trim()} from ${r.trim()}`,actual:n.trim()}:null}},{name:"2) MSTest AreEquivalent",regex:i,parseFn:e=>{const{expectedCount:t,missingItem:r,actualCount:n}=e.groups??{};return t&&r&&n?{expected:`${t} ${1===parseInt(t,10)?"occurrence":"occurrences"} of <${r}>`,actual:`${n} ${1===parseInt(n,10)?"occurrence":"occurrences"} of <${r}>`}:null}},{name:"3) MSTest AreEqual index mismatch",regex:/CollectionAssert\.AreEqual failed\.\s*\((?<detail>Element at index \d+ do not match\.)\)/m,parseFn:e=>{const t=e.groups?.detail?.trim();return t?{expected:"all values to match",actual:t}:null}},{name:"4) MSTest AreNotEqual",regex:/Expected any value except:<(?<notVal>[^>]+)>.\s*Actual:<(?<actual>[^>]+)>/m,parseFn:e=>{const t=e.groups?.notVal?.trim(),r=e.groups?.actual?.trim();return t&&r?{expected:`any value except: ${t}`,actual:r}:null}},{name:"4.5) MSTest AreNotSame",regex:/Assert\.AreNotSame failed\.\s*$/m,parseFn:e=>({expected:"different references",actual:"the same reference"})},{name:"4.6) MSTest AreSame",regex:/Assert\.AreSame failed\.\s*$/m,parseFn:e=>({expected:"the same reference",actual:"different references"})},{name:"4.7) xUnit Assert.NotSame",regex:/Assert\.NotSame\(\) Failure: Values are the same instance/m,parseFn:e=>({expected:"different references",actual:"the same reference"})},{name:"4.8) xUnit Assert.Equal() Failure",regex:o,parseFn:e=>({expected:e.groups?.expected?.trim()??"",actual:e.groups?.actual?.trim()??""})},{name:"4.9) xUnit Assert.NotEqual() Failure",regex:s,parseFn:e=>({expected:e.groups?.expected?.trim()??"",actual:e.groups?.actual?.trim()??""})},{name:"5) Original C# style",regex:a,parseFn:e=>({expected:e.groups?.expected?.trim()??"",actual:e.groups?.actual?.trim()??""})},{name:'6) Generic multiline "Expected: x Actual: y"',regex:c,parseFn:e=>{let r=e.groups?.expected??"",n=e.groups?.actual??"";return r=r.trim(),n.startsWith("\n")||(n=n.trim()),"\r\n"===t&&(r=r.replace(/\n/g,"\r\n"),n=n.replace(/\n/g,"\r\n")),{expected:r,actual:n}}},{name:'7) NUnit style "Expected: x ... But was: y"',regex:u,parseFn:e=>{let t=e.groups?.expected?.trim()??"",r=e.groups?.actual?.trim()??"";return null!==l&&(t+=` at index [${l}]`,r+=` at index [${l}]`),{expected:t,actual:r}}}];for(const e of d){const t=e.regex.exec(r);if(!t)continue;const n=e.parseFn(t);if(n)return n}return null}},61585:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Descriptors=void 0;const n=r(19679);class i{static buildService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.BuildService","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static environmentService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.NoDelay.EnvironmentService","0.1"),n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}));static projectQueryExecutionService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.Query.Remoting.QueryExecutionService","0.2"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders))}t.Descriptors=i},15246:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryService=void 0;const i=n(r(92291));t.TelemetryService=class{_telemetryReporter;_telemetryLogger;_loggingEnabled;constructor(e,t,r=!1){this._loggingEnabled=r,this._telemetryLogger=t;try{this._telemetryReporter=new i.default(e.extension.packageJSON.aiKey),e.subscriptions.push(this._telemetryReporter)}catch(e){this._loggingEnabled&&this._telemetryLogger.log((()=>`Failed to create TelemetryReporter due to ${e}`)),this._telemetryReporter=void 0}}sendTelemetryEvent(e,t,r){this.outputTelemetryToLog(e,t,r),this._telemetryReporter?.sendTelemetryEvent(e,t,r)}sendTelemetryErrorEvent(e,t,r){this._telemetryReporter?.sendTelemetryErrorEvent(e,t,r)}outputTelemetryToLog(e,t,r){if(this._loggingEnabled){if(this._telemetryLogger.log((()=>`Event: ${e}`)),void 0!==t){this._telemetryLogger.log((()=>"Properties"));for(const e in t)this._telemetryLogger.log((()=>`  ${e}: ${t[e]}`))}if(void 0!==r){this._telemetryLogger.log((()=>"Measurements"));for(const e in r)this._telemetryLogger.log((()=>`  ${e}: ${r[e]}`))}this._telemetryLogger.log((()=>""))}}async dispose(){if(void 0!==this._telemetryReporter)return await this._telemetryReporter.dispose()}}},89244:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getTestController=t.createAndRegisterTestController=void 0;const s=o(r(89496)),a=r(34388),c=r(46341),u=r(14379),l=new s.EventEmitter,d=new Promise((e=>l.event(e)));t.createAndRegisterTestController=async function(e,t,r,n){const i=new a.Logger;try{u.Strings.initialize(n);const o=new c.TestWindowTestController(e,t,i,r);i.log((()=>"Created Test Controller")),await o.initialize(),l.fire(o),e.subscriptions.push(o)}catch(e){i.log((()=>`unable to create test controller for c# extension: ${e}`))}},t.getTestController=function(){return d}},90862:(e,t,r)=>{"use strict";r.d(t,{PC:()=>O,Tp:()=>k,Zm:()=>u,Zu:()=>A,wv:()=>N});var n,i,o,s=r(52631),a="Promise",c="rejected";function u(e,t){return l(e,(function(e){return t?t({status:"fulfilled",rejected:!1,value:e}):e}),(function(e){return t?t({status:c,rejected:!0,reason:e}):e}))}function l(e,t,r,n){var i=e;try{if((0,s.y8_)(e))(t||r)&&(i=e.then(t,r));else try{t&&(i=t(e))}catch(e){if(!r)throw e;i=r(e)}}finally{n&&function(e,t){var r=e;t&&((0,s.y8_)(e)?r=e.finally?e.finally(t):e.then((function(e){return t(),e}),(function(e){throw t(),e})):t())}(i,n)}return i}var d,p=!1,f=["pending","resolving","resolved",c],h="dispatchEvent";function g(e){var t;return e&&e.createEvent&&(t=e.createEvent("Event")),!!t&&t.initEvent}var m,v,y,_,S="unhandledRejection",w=S.toLowerCase(),E=[],b=0,P=10;function T(e){return(0,s.mf2)(e)?e.toString():(0,s.eUe)(e)}function C(e,t,r){var c,u,l=(0,s.K7g)(arguments,3),v=0,y=!1,_=[],C=b++,I=E.length>0?E[E.length-1]:void 0,O=!1,x=null;function N(t,r){try{return E.push(C),O=!0,x&&x.cancel(),x=null,e((function(e,n){_.push((function(){try{var i=2===v?t:r,o=(0,s.o8e)(i)?c:(0,s.mf2)(i)?i(c):i;(0,s.y8_)(o)?o.then(e,n):i?e(o):3===v?n(o):e(o)}catch(e){n(e)}})),y&&A()}),l)}finally{E.pop()}}function k(){return f[v]}function A(){if(_.length>0){var e=_.slice();_=[],O=!0,x&&x.cancel(),x=null,t(e)}}function R(e,t){return function(r){if(v===t){if(2===e&&(0,s.y8_)(r))return v=1,void r.then(R(2,1),R(3,1));v=e,y=!0,c=r,A(),O||3!==e||x||(x=(0,s.tXR)(D,P))}}}function D(){if(!O)if(O=!0,(0,s.UGU)())process.emit(S,c,u);else{var e=(0,s.Jj3)()||(0,s.Rdr)();!m&&(m=(0,s.mPP)((0,s.TwK)(s.vsb,[a+"RejectionEvent"]).v)),function(e,t,r,n){var i=(0,s.MeC)();!d&&(d=(0,s.mPP)(!!(0,s.TwK)(g,[i]).v));var o=d.v?i.createEvent("Event"):n?new Event(t):{};if(r&&r(o),d.v&&o.initEvent(t,!1,!0),o&&e[h])e[h](o);else{var a=e["on"+t];if(a)a(o);else{var c=(0,s.vsb)("console");c&&(c.error||c.log)(t,(0,s.eUe)(o))}}}(e,w,(function(e){return(0,s.g$V)(e,"promise",{g:function(){return u}}),e.reason=c,e}),!!m.v)}}return u={then:N,catch:function(e){return N(void 0,e)},finally:function(e){var t=e,r=e;return(0,s.mf2)(e)&&(t=function(t){return e&&e(),t},r=function(t){throw e&&e(),t}),N(t,r)}},(0,s.iUz)(u,"state",{get:k}),p&&function(e,t,r,a){i=i||{toString:function(){return"[[PromiseResult]]"}},o=o||{toString:function(){return"[[PromiseIsHandled]]"}};var u={};u[n=n||{toString:function(){return"[[PromiseState]]"}}]={get:t},u[i]={get:function(){return(0,s.MuE)(c)}},u[o]={get:function(){return O}},(0,s.HMQ)(e,u)}(u,k),(0,s.xBc)()&&(u[(0,s.Wb9)(11)]="IPromise"),u.toString=function(){return"IPromise"+(p?"["+C+((0,s.o8e)(I)?"":":"+I)+"]":"")+" "+k()+(y?" - "+T(c):"")},function(){(0,s.mf2)(r)||(0,s.ZU2)(a+": executor is not a function - "+T(r));var e=R(3,0);try{r.call(u,R(2,0),e)}catch(t){e(t)}}(),u}function I(e){return function(t){var r=(0,s.K7g)(arguments,1);return e((function(e,r){try{var n=[],i=1;(0,s.lbl)(t,(function(t,o){t&&(i++,l(t,(function(t){n[o]=t,0==--i&&e(n)}),r))})),0==--i&&e(n)}catch(e){r(e)}}),r)}}function O(e,t){return C(O,function(e){var t=(0,s.hj$)(e)?e:0;return function(e){(0,s.tXR)((function(){!function(e){(0,s.tOU)(e,(function(e){try{e()}catch(e){}}))}(e)}),t)}}(t),e,t)}function x(e,t){!v&&(v=(0,s.mPP)((0,s.TwK)(s.vsb,[a]).v||null));var r=v.v;if(!r)return O(e);(0,s.mf2)(e)||(0,s.ZU2)(a+": executor is not a function - "+(0,s.eUe)(e));var n=0,i=new r((function(t,r){e((function(e){n=2,t(e)}),(function(e){n=3,r(e)}))}));return(0,s.iUz)(i,"state",{get:function(){return f[n]}}),i}function N(e,t){return!y&&(y=(0,s.mPP)(x)),y.v.call(this,e,t)}var k=I(N);function A(e,t){return!_&&(r=N,_=(0,s.mPP)((function(e){var t=(0,s.K7g)(arguments,1);return r((function(t,r){var n=[],i=1;function o(e,r){i++,u(e,(function(e){e.rejected?n[r]={status:c,reason:e.reason}:n[r]={status:"fulfilled",value:e.value},0==--i&&t(n)}))}try{(0,s.kJL)(e)?(0,s.tOU)(e,o):(0,s.TWG)(e)?(0,s.lbl)(e,o):(0,s.ZU2)("Input is not an iterable"),0==--i&&t(n)}catch(e){r(e)}}),t)}))),_.v(e,t);var r}(0,s.Wb9)(11)},52631:(e,t,r)=>{"use strict";function n(e,t){return e||t}function i(e,t){return e[t]}r.d(t,{$KD:()=>M,$S8:()=>Se,FL5:()=>ve,FYL:()=>ge,Faf:()=>W,FkI:()=>It,Ggd:()=>Dt,HD0:()=>L,HMQ:()=>re,Hef:()=>me,IdH:()=>Yt,J_U:()=>V,Jj3:()=>et,Jjf:()=>Qt,K7g:()=>Pt,Kn2:()=>U,MLb:()=>er,MeC:()=>Ye,Mrq:()=>bt,MuE:()=>A,Nvg:()=>Qe,Oz1:()=>Ee,POo:()=>Vt,Rdr:()=>Xe,Sn2:()=>K,TWG:()=>vt,TwK:()=>x,UAM:()=>Et,UGU:()=>ct,VZO:()=>H,W5k:()=>St,Wb9:()=>ft,XCJ:()=>ae,Xiq:()=>ye,XzL:()=>Ot,YmZ:()=>R,Ymo:()=>Ze,ZBL:()=>Gt,ZU2:()=>de,_HB:()=>ur,_w8:()=>lr,_yM:()=>le,aE6:()=>X,cHs:()=>Rt,d$o:()=>He,d6F:()=>tt,dvW:()=>gt,eML:()=>ht,eUe:()=>ue,fEe:()=>nt,fQg:()=>G,g$V:()=>ie,hj$:()=>$,iUz:()=>te,jWD:()=>rt,jnD:()=>q,k4L:()=>Re,kJL:()=>B,lH9:()=>Me,l_T:()=>ne,lbl:()=>yt,lep:()=>j,mPP:()=>ze,mf2:()=>F,ndY:()=>Bt,o8e:()=>D,rWU:()=>Y,ra_:()=>Jt,rkD:()=>xt,s1E:()=>De,s1z:()=>at,tOU:()=>wt,tXR:()=>cr,vsb:()=>Je,wj3:()=>J,xAH:()=>Xt,xBc:()=>dt,xee:()=>tr,y8_:()=>z});var o,s=void 0,a=null,c="",u="function",l="object",d="prototype",p="__proto__",f="undefined",h="constructor",g="Symbol",m="_polyfill",v="length",y="name",_="call",S="toString",w=n(Object),E=i(w,d),b=n(String),P=i(b,d),T=n(Math),C=n(Array),I=i(C,d),O=i(I,"slice");function x(e,t){try{return{v:e.apply(this,t)}}catch(e){return{e}}}function N(e){return function(t){return typeof t===e}}function k(e){var t="[object "+e+"]";return function(e){return!(!e||A(e)!==t)}}function A(e){return E[S].call(e)}function R(e,t){return typeof e===t}function D(e){return typeof e===f||e===f}function j(e){return e===a||D(e)}function M(e){return!!e||e!==s}var L=N("string"),F=N(u);function U(e){return!(!e&&j(e)||!e||typeof e!==l)}var B=i(C,"isArray"),V=k("Date"),$=N("number"),q=N("boolean"),H=k("Error");function z(e){return!!(e&&e.then&&F(e.then))}function W(e){return!e||!G(e)}function G(e){return!(!e||(t=function(){return!(e&&0+e)},r=!e,n=x(t),n.e?r:n.v));var t,r,n}var K=i(w,"getOwnPropertyDescriptor");function X(e,t){return!!e&&E.hasOwnProperty[_](e,t)}var J=n(i(w,"hasOwn"),Q);function Q(e,t){return X(e,t)||!!K(e,t)}function Y(e,t,r){if(e&&U(e))for(var n in e)if(J(e,n)&&-1===t[_](r||e,n,e[n]))break}var Z={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ee(e){var t={};if(t[Z.c]=!0,t[Z.e]=!0,e.l){t.get=function(){return e.l.v};var r=K(e.l,"v");r&&r.set&&(t.set=function(t){e.l.v=t})}return Y(e,(function(e,r){t[Z[e]]=D(r)?t[Z[e]]:r})),t}var te=i(w,"defineProperty"),re=i(w,"defineProperties");function ne(e,t,r,n,i,o){var s={e:o,c:i};return r&&(s.g=r),n&&(s.s=n),te(e,t,ee(s))}function ie(e,t,r){return te(e,t,ee(r))}function oe(e,t,r,n,i){var o={};return Y(e,(function(e,n){se(o,e,t?n:e,i),se(o,n,r?n:e,i)})),n?n(o):o}function se(e,t,r,n){te(e,t,{value:r,enumerable:!0,writable:!!n})}var ae=n(b),ce="[object Error]";function ue(e,t){var r=c,n=E[S][_](e);n===ce&&(e={stack:ae(e.stack),message:ae(e.message),name:ae(e.name)});try{r=(r=JSON.stringify(e,a,t?"number"==typeof t?t:4:s))&&r.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: ")||ae(e)}catch(e){r=" - "+ue(e,t)}return n+": "+r}function le(e){throw new Error(e)}function de(e){throw new TypeError(e)}var pe=i(w,"freeze");function fe(e){return e}function he(e){return e[p]||a}var ge=i(w,"keys");function me(e){return pe&&Y(e,(function(e,t){(B(t)||U(t))&&me(t)})),ve(e)}var ve=n(pe,fe),ye=n(i(w,"seal"),fe),_e=n(i(w,"getPrototypeOf"),he);function Se(e){return oe(e,1,0,ve)}function we(e){return oe(e,0,0,ve)}function Ee(e){return function(e){var t={};return Y(e,(function(e,r){se(t,e,r[1]),se(t,r[0],r[1])})),ve(t)}(e)}var be,Pe=we({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Te="__tsUtils$gblCfg";function Ce(){var e;return typeof globalThis!==f&&(e=globalThis),e||typeof self===f||(e=self),e||typeof window===f||(e=window),e||typeof global===f||(e=global),e}function Ie(){if(!be){var e=x(Ce).v||{};be=e[Te]=e[Te]||{}}return be}var Oe=xe;function xe(e,t,r){var n=t&&t[e];return function(t){var i=t&&t[e]||n;if(i||r){var o=arguments;return(i||r).apply(t,i?O[_](o,1):o)}de('"'+ae(e)+'" not defined for '+ue(t))}}function Ne(e){return function(t){return t[e]}}var ke=i(T,"max"),Ae=Oe("slice",P),Re=Oe("substring",P),De=xe("substr",P,je);function je(e,t,r){return j(e)&&de("Invalid "+ue(e)),r<0?c:((t=t||0)<0&&(t=ke(t+e[v],0)),D(r)?Ae(e,t):Ae(e,t,t+r))}function Me(e,t){return Re(e,0,t)}var Le,Fe,Ue,Be="_urid";function Ve(e){var t={description:ae(e),toString:function(){return g+"("+e+")"}};return t[m]=!0,t}function $e(e){var t=function(){if(!Le){var e=Ie();Le=e.gblSym=e.gblSym||{k:{},s:{}}}return Le}();if(!J(t.k,e)){var r=Ve(e),n=ge(t.s).length;r[Be]=function(){return n+"_"+r[S]()},t.k[e]=r,t.s[r[Be]()]=ae(e)}return t.k[e]}function qe(){Ue=Ie()}function He(e){var t={};return!Ue&&qe(),t.b=Ue.lzy,te(t,"v",{configurable:!0,get:function(){var r=e();return Ue.lzy||te(t,"v",{value:r}),t.b=Ue.lzy,r}}),t}function ze(e){return te({toJSON:function(){return e}},"v",{value:e})}var We,Ge="window";function Ke(e,t){var r;return function(){return!Ue&&qe(),(!r||Ue.lzy)&&(r=ze(x(e,t).v)),r.v}}function Xe(e){return!Ue&&qe(),(!We||!1===e||Ue.lzy)&&(We=ze(x(Ce).v||a)),We.v}function Je(e,t){var r=We&&!1!==t?We.v:Xe(t);return r&&r[e]?r[e]:e===Ge?et():a}function Qe(){return!!Ye()}var Ye=Ke(Je,["document"]);function Ze(){return!!et()}var et=Ke(Je,[Ge]);function tt(){return!!rt()}var rt=Ke(Je,["navigator"]);function nt(){return!!at()}var it,ot,st,at=Ke(Je,["history"]),ct=Ke((function(){return!!x((function(){return process&&(process.versions||{}).node})).v}));function ut(){return it=ze(x(Je,[g]).v)}function lt(e){var t=(Ue.lzy?0:it)||ut();return t.v?t.v[e]:s}function dt(){return!!pt()}function pt(){return!Ue&&qe(),((Ue.lzy?0:it)||ut()).v}function ft(e,t){var r=Pe[e];!Ue&&qe();var n=(Ue.lzy?0:it)||ut();return n.v?n.v[r||e]:t?s:function(e){var t;!Fe&&(Fe={});var r=Pe[e];return r&&(t=Fe[r]=Fe[r]||Ve(g+"."+r)),t}(e)}function ht(e,t){!Ue&&qe();var r=(Ue.lzy?0:it)||ut();return r.v?r.v(e):t?a:Ve(e)}function gt(e){return!Ue&&qe(),((ot=(Ue.lzy?0:ot)||ze(x(lt,["for"]).v)).v||$e)(e)}function mt(e){return!!e&&F(e.next)}function vt(e){return!function(e){return e===a||!M(e)}(e)&&F(e[ft(3)])}function yt(e,t,r){if(e&&(mt(e)||(!st&&(st=ze(ft(3))),e=e[st.v]?e[st.v]():null),mt(e))){var n=s,i=s;try{for(var o=0;!(i=e.next()).done&&-1!==t[_](r||e,i.value,o,e);)o++}catch(t){n={e:t},e.throw&&(i=a,e.throw(n))}finally{try{i&&!i.done&&e.return&&e.return(i)}finally{if(n)throw n.e}}}}function _t(e,t,r){return e.apply(t,r)}function St(e,t){return!D(t)&&e&&(B(t)?_t(e.push,e,t):mt(t)||vt(t)?yt(t,(function(t){e.push(t)})):e.push(t)),e}function wt(e,t,r){if(e)for(var n=e[v]>>>0,i=0;i<n&&(!(i in e)||-1!==t[_](r||e,e[i],i,e));i++);}var Et=Oe("indexOf",I),bt=Oe("map",I);function Pt(e,t,r){return(e&&e.slice||O).apply(e,O[_](arguments,1))}function Tt(e,t,r){return-1!==Et(e,t,r)}var Ct,It=xe("includes",I,Tt),Ot=Oe("reduce",I),xt=n(i(w,"create"),Nt);function Nt(e){if(!e)return{};var t=typeof e;function r(){}return t!==l&&t!==u&&de("Prototype must be an Object or function: "+ue(e)),r[d]=e,new r}function kt(e,t){return(w.setPrototypeOf||function(e,t){var r;!Ct&&(Ct=ze(((r={})[p]=[],r instanceof Array))),Ct.v?e[p]=t:Y(t,(function(t,r){return e[t]=r}))})(e,t)}function At(e,t){t&&(e[y]=t)}function Rt(e,t,r){var n=r||Error,i=n[d][y],o=Error.captureStackTrace;return function(e,t,r){function n(){this[h]=t,x(ie,[this,y,{v:e,c:!0,e:!1}])}return x(ie,[t,y,{v:e,c:!0,e:!1}]),(t=kt(t,r))[d]=r===a?xt(r):(n[d]=r[d],new n),t}(e,(function(){var r=this,s=arguments;try{x(At,[n,e]);var a=_t(n,r,O[_](s))||r;if(a!==r){var c=_e(r);c!==_e(a)&&kt(a,c)}return o&&o(a,r[h]),t&&t(a,s),a}finally{x(At,[n,i])}}),n)}function Dt(){return(Date.now||jt)()}function jt(){return(new Date).getTime()}function Mt(e){return function(t){return j(t)&&de("strTrim called ["+ue(t)+"]"),t&&t.replace&&(t=t.replace(e,c)),t}}var Lt,Ft,Ut,Bt=xe("trim",P,Mt(/^\s+|(?=\s)\s+$/g));function Vt(e){if(!e||typeof e!==l)return!1;Ut||(Ut=!Ze()||et());var t=!1;if(e!==Ut){Ft||(Lt=Function[d][S],Ft=Lt[_](w));try{var r=_e(e);(t=!r)||(X(r,h)&&(r=r[h]),t=r&&typeof r===u&&Lt[_](r)===Ft)}catch(e){}}return t}function $t(e){return e.value&&Wt(e),!0}var qt=[function(e){var t=e.value;if(B(t)){var r=e.result=[];return r.length=t.length,e.copyTo(r,t),!0}return!1},Wt,function(e){return e.type===u},function(e){var t=e.value;return!!V(t)&&(e.result=new Date(t.getTime()),!0)}];function Ht(e,t,r,n){var i=r.handler,s=r.path?n?r.path.concat(n):r.path:[],c={handler:r.handler,src:r.src,path:s},u=typeof t,d=!1,p=!1;t&&u===l?d=Vt(t):p=t===a||function(e){return!o&&(o=["string","number","boolean",f,"symbol","bigint"]),e!==l&&-1!==o.indexOf(e)}(u);var h={type:u,isPrim:p,isPlain:d,value:t,result:t,path:s,origin:r.src,copy:function(t,n){return Ht(e,t,n?c:r,n)},copyTo:function(t,r){return zt(e,t,r,c)}};return h.isPrim?i&&i[_](r,h)?h.result:t:function(e,t,n,o){var s;return wt(e,(function(e){if(e.k===t)return s=e,-1})),s||(s={k:t,v:t},e.push(s),function(e){ie(h,"result",{g:function(){return e.v},s:function(t){e.v=t}});for(var t=0,n=i;!(n||(t<qt.length?qt[t++]:$t))[_](r,h);)n=a}(s)),s.v}(e,t)}function zt(e,t,r,n){if(!j(r))for(var i in r)t[i]=Ht(e,r[i],n,i);return t}function Wt(e){var t=e.value;if(t&&e.isPlain){var r=e.result={};return e.copyTo(r,t),!0}return!1}function Gt(e,t,r,n,i,o,s){return function(e,t){return wt(t,(function(t){!function(e,t,r){zt([],e,t,{handler:void 0,src:t,path:[]})}(e,t)})),e}(Ht([],a=e,{handler:undefined,src:a})||{},O[_](arguments));var a}var Kt,Xt=Ne(v);function Jt(){return!Ue&&qe(),(!Kt||Ue.lzy)&&(Kt=ze(x(Je,["performance"]).v)),Kt.v}function Qt(){var e=Jt();return e&&e.now?e.now():Dt()}dt();var Yt=xe("endsWith",P,Zt);function Zt(e,t,r){L(e)||de("'"+ue(e)+"' is not a string");var n=L(t)?t:ae(t),i=!D(r)&&r<e[v]?r:e[v];return Re(e,i-n[v],i)===n}var er=Oe("indexOf",P),tr=xe("startsWith",P,rr);function rr(e,t,r){L(e)||de("'"+ue(e)+"' is not a string");var n=L(t)?t:ae(t),i=r>0?r:0;return Re(e,i,i+n[v])===n}var nr="ref",ir="unref",or="hasRef",sr="enabled";function ar(e,t,r){var n=B(t),i=n?t.length:0,o=(i>0?t[0]:n?s:t)||setTimeout,c=(i>1?t[1]:s)||clearTimeout,u=r[0];r[0]=function(){l.dn(),_t(u,s,O[_](arguments))};var l=function(e,t,r){var n,i=!0,o=e?t(a):a;function s(){return i=!1,o&&o[ir]&&o[ir](),n}function c(){o&&r(o),o=a}function u(){return o=t(o),i||s(),n}return(n={cancel:c,refresh:u})[or]=function(){return o&&o[or]?o[or]():i},n[nr]=function(){return i=!0,o&&o[nr]&&o[nr](),n},n[ir]=s,{h:n=te(n,sr,{get:function(){return!!o},set:function(e){!e&&o&&c(),e&&!o&&u()}}),dn:function(){o=a}}}(e,(function(e){if(e){if(e.refresh)return e.refresh(),e;_t(c,s,[e])}return _t(o,s,r)}),(function(e){_t(c,s,[e])}));return l.h}function cr(e,t){return ar(!0,s,O[_](arguments))}function ur(e,t,r){return ar(!0,e,O[_](arguments,1))}function lr(e,t){return ar(!1,s,O[_](arguments))}},37073:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceId=void 0;const s=r(47909),a=o(r(87870));t.getDeviceId=async function(){let e;try{e=await a.getDeviceId()}catch(e){}if(e)return e;{const e=(0,s.v4)().toLowerCase();return await a.setDeviceId(e),e}}},40946:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};if(Object.defineProperty(t,"__esModule",{value:!0}),"win32"!==process.platform&&"darwin"!==process.platform&&"linux"!==process.platform)throw new Error("Unsupported platform");i(r(37073),t)},87870:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.setDeviceId=t.getDeviceId=void 0;const s=o(r(71017)),a=o(r(55674)),c="win32"===process.platform?r(28865):null;function u(){let e;if(!process.env.HOME)throw new Error("Home directory not found");if("darwin"===process.platform)e=s.join(process.env.HOME,"Library","Application Support");else{if("linux"!==process.platform)throw new Error("Unsupported platform");e=process.env.XDG_CACHE_HOME??s.join(process.env.HOME,".cache")}return s.join(e,"Microsoft","DeveloperTools")}function l(){return s.join(u(),"deviceid")}t.getDeviceId=async function(){return"win32"===process.platform?c?.GetDeviceId():a.existsSync(l())?a.readFile(l(),"utf8"):void 0},t.setDeviceId=async function(e){"win32"===process.platform?c?.SetDeviceId(e):(await a.ensureDir(u()),await a.writeFile(l(),e,"utf8"))}},47909:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>P,parse:()=>y,stringify:()=>p,v1:()=>v,v3:()=>S,v4:()=>E,v5:()=>b,validate:()=>u,version:()=>T});var n=r(6113),i=r.n(n);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i().randomFillSync(o),s=0),o.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function d(e,t=0){return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]}const p=function(e,t=0){const r=d(e,t);if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let f,h,g=0,m=0;const v=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let o=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=h=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:m+1;const l=c-g+(u-m)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||c>g)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,m=u,h=s,c+=122192928e5;const p=(1e4*(268435455&c)+u)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=255&p;const v=c/4294967296*1e4&268435455;i[n++]=v>>>8&255,i[n++]=255&v,i[n++]=v>>>24&15|16,i[n++]=v>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||d(i)},y=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function _(e,t,r){function n(e,n,i,o){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=a[e];return i}return d(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const S=_("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("md5").update(e).digest()})),w={randomUUID:i().randomUUID},E=function(e,t,r){if(w.randomUUID&&!t&&!e)return w.randomUUID();const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)},b=_("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("sha1").update(e).digest()})),P="00000000-0000-0000-0000-000000000000",T=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},40725:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,n)=>{let i=await(async(e,t,n)=>{const i=await Promise.resolve().then((()=>o(r(22303)))),s=await Promise.resolve().then((()=>o(r(7453)))),a=new i.AppInsightsCore,c=new s.PostChannel,u={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(n){u.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:n};u.extensionConfig[c.identifier]=e}const l=t.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(u,[]),a.addTelemetryInitializer((e=>{e.ext=e.ext??{},e.ext.web=e.ext.web??{},e.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),a})(e,t,n);return{logEvent:(e,t)=>{try{i?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{return new Promise(((e,t)=>{i?i.flush(!0,(e=>{e||t("Failed to flush app 1DS!")})):e()}))}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}},dispose:async()=>new Promise((e=>{i?i.unload(!1,(()=>{e(),i=void 0}),1e3):e()}))}}},73959:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.appInsightsClientFactory=void 0;const s=r(13238),a=r(95888);t.appInsightsClientFactory=async(e,t,n)=>{let i;try{const n=await Promise.resolve().then((()=>o(r(34843)))),a={};if(t){const e={alwaysUseXhrOverride:!0,httpXHROverride:t};a[s.BreezeChannelIdentifier]=e}i=new n.ApplicationInsights({instrumentationKey:e,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:a})}catch(e){return Promise.reject(e)}return{logEvent:(e,t)=>{const r={...t?.properties,...t?.measurements};n?.length&&a.TelemetryUtil.applyReplacements(r,n),i?.track({name:e,data:r,baseType:"EventData",baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})},flush:async()=>{i?.flush(!1)},dispose:async()=>new Promise((e=>{i?.unload(!0,(()=>{e(),i=void 0}),1e3)}))}}},33456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,r){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,r,n){n?this.telemetrySender.sendEventData(e,{properties:t,measurements:r}):this.telemetryLogger.logUsage(e,{properties:t,measurements:r})}sendTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!1)}sendRawTelemetryEvent(e,t,r){const n={...t};for(const e of Object.keys(n??{})){const t=n[e];"string"==typeof e&&void 0!==t&&(n[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,n,r)}sendDangerousTelemetryEvent(e,t,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,r,!0)}internalSendTelemetryErrorEvent(e,t,r,n){n?this.telemetrySender.sendEventData(e,{properties:t,measurements:r}):this.telemetryLogger.logError(e,{properties:t,measurements:r})}sendTelemetryErrorEvent(e,t,r){this.internalSendTelemetryErrorEvent(e,t,r,!1)}sendDangerousTelemetryErrorEvent(e,t,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}},12015:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(r||(r={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=r.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==r.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==r.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const n={stack:e.stack,message:e.message,name:e.name};if(t){const e=t.properties||t;t.properties={...e,...n}}else t={properties:n};this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===r.NOT_INSTANTIATED&&(this._instantiationStatus=r.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=r.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=r.INSTANTIATED})))}}},95888:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class r{static applyReplacements(e,t){for(const r of Object.keys(e))for(const n of t)n.lookup.test(r)&&(void 0!==n.replacementString?e[r]=n.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.6"}}static getInstance(){return r._instance||(r._instance=new r),r._instance}}t.TelemetryUtil=r},92291:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(22037)),a=o(r(89496)),c=o(r(95687)),u=r(33456),l=r(12015),d=r(95888),p=r(40725),f=r(73959);function h(){return{sendPOST:(e,t)=>{const r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const n=c.request(e.urlString,r,(e=>{e.on("data",(function(r){t(e.statusCode??200,e.headers,r.toString())})),e.on("error",(function(){t(0,{})}))}));n.write(e.data,(e=>{e&&t(0,{})})),n.end()}catch{t(0,{})}}}}class g extends u.BaseTelemetryReporter{constructor(e,t){let r=e=>(0,f.appInsightsClientFactory)(e,h(),t);d.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(r=e=>(0,p.oneDataSystemClientFactory)(e,a,h()));const n={release:s.release(),platform:s.platform(),architecture:s.arch()},i=new l.BaseTelemetrySender(e,r);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,a,{additionalCommonProperties:d.TelemetryUtil.getAdditionalCommonProperties(n)})}}t.default=g},22303:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppInsightsCore:()=>ie,BaseTelemetryPlugin:()=>ge.i,DiagnosticLogger:()=>u.AQ,EventLatency:()=>ae,EventPersistence:()=>ue,EventPropertyType:()=>ce,EventsDiscardedReason:()=>ve.h,FullVersionString:()=>k,InternalAppInsightsCore:()=>l.F,LoggingSeverity:()=>fe,MinChannelPriorty:()=>pe,NotificationManager:()=>he.f,PerfEvent:()=>a.zn,PerfManager:()=>a.Jk,ProcessTelemetryContext:()=>me.Vi,SenderPostManager:()=>Ie.s,TraceLevel:()=>le,Undefined:()=>m.jA,ValueKind:()=>se,ValueSanitizer:()=>de,Version:()=>N,_InternalLogMessage:()=>u.lQ,__getRegisteredEvents:()=>ye.um,_appendHeader:()=>_e.F3,_getAllResponseHeaders:()=>_e.Fz,_logInternalMessage:()=>u.L4,_testHookMaxUnloadHooksCb:()=>xe.f,_throwInternal:()=>u.kP,_warnToConsole:()=>u.jV,addEventHandler:()=>ye.Ib,addEventListeners:()=>ye.yw,addPageHideEventListener:()=>ye.TJ,addPageShowEventListener:()=>ye.nD,addPageUnloadEventListener:()=>ye.c9,areCookiesSupported:()=>Ee.p7,arrForEach:()=>s.tOU,arrIndexOf:()=>s.UAM,arrMap:()=>s.Mrq,arrReduce:()=>s.XzL,attachEvent:()=>ye.pZ,blockDynamicConversion:()=>Ce.qx,convertAllHeadersToMap:()=>_e.XE,cookieAvailable:()=>Ee.p7,createCookieMgr:()=>Ee.Nz,createDynamicConfig:()=>c.o,createEnumStyle:()=>oe.B,createGuid:()=>G,createProcessTelemetryContext:()=>me.CD,createTraceParent:()=>Te.SU,createUniqueNamespace:()=>be.J,createUnloadHandlerContainer:()=>Pe.Y,dateNow:()=>s.Ggd,detachEvent:()=>ye.pD,disallowsSameSiteNone:()=>Ee.UY,doPerf:()=>a.Lm,dumpObj:()=>s.eUe,eventOff:()=>ye.QY,eventOn:()=>ye.XO,extend:()=>K,findW3cTraceParent:()=>Te.lq,forceDynamicConversion:()=>Ce.sP,formatErrorMessageXdr:()=>_e.Np,formatErrorMessageXhr:()=>_e.An,formatTraceParent:()=>Te.aR,generateW3CId:()=>g.DO,getCommonSchemaMetaData:()=>z,getConsole:()=>h.dr,getCookieValue:()=>W,getCrypto:()=>h.MX,getDocument:()=>s.MeC,getDynamicConfigHandler:()=>Ce.Rw,getExceptionName:()=>_e.jj,getFieldValueType:()=>Z,getGlobal:()=>we.Rd,getGlobalInst:()=>s.vsb,getHistory:()=>s.s1z,getIEVersion:()=>h.sA,getISOString:()=>_e.Y6,getJSON:()=>h.xA,getLocation:()=>h.k$,getMsCrypto:()=>h.gz,getNavigator:()=>s.jWD,getPerformance:()=>s.ra_,getResponseText:()=>_e.tV,getSetValue:()=>_e.qK,getTenantId:()=>V,getTime:()=>X,getWindow:()=>s.Jj3,hasDocument:()=>s.Nvg,hasHistory:()=>s.fEe,hasJSON:()=>h.nS,hasNavigator:()=>s.d6F,hasOwnProperty:()=>s.aE6,hasWindow:()=>s.Ymo,isArray:()=>s.kJL,isArrayValid:()=>Q,isBeaconsSupported:()=>h.MF,isBoolean:()=>s.jnD,isChromium:()=>ee,isDate:()=>s.J_U,isDocumentObjectAvailable:()=>F,isError:()=>s.VZO,isFetchSupported:()=>h.JO,isFunction:()=>s.mf2,isGreaterThanZero:()=>re,isIE:()=>h.w1,isLatency:()=>q,isNotTruthy:()=>s.Faf,isNullOrUndefined:()=>s.lep,isNumber:()=>s.hj$,isObject:()=>s.Kn2,isReactNative:()=>h.b$,isSampledFlag:()=>Te.Pn,isString:()=>s.HD0,isTruthy:()=>s.fQg,isTypeof:()=>s.YmZ,isUint8ArrayAvailable:()=>$,isUndefined:()=>s.o8e,isValidSpanId:()=>Te.Lc,isValidTraceId:()=>Te.jN,isValidTraceParent:()=>Te.J6,isValueAssigned:()=>B,isValueKind:()=>J,isWindowObjectAvailable:()=>U,isXhrSupported:()=>h.Z3,mergeEvtNamespace:()=>ye.jU,newGuid:()=>g.GW,newId:()=>Se.pZ,normalizeJsName:()=>_e.Gf,objDefineAccessors:()=>s.l_T,objForEachKey:()=>s.rWU,objFreeze:()=>s.FL5,objKeys:()=>s.FYL,objSeal:()=>s.Xiq,onConfigChange:()=>c.k,openXhr:()=>te,optimizeObject:()=>_e.Ax,parseResponse:()=>Oe.L,parseTraceParent:()=>Te.j_,perfNow:()=>s.Jjf,prependTransports:()=>_e.fM,proxyAssign:()=>_e.cf,proxyFunctionAs:()=>_e.Oi,proxyFunctions:()=>_e.Vb,random32:()=>Se._l,randomValue:()=>Se.az,removeEventHandler:()=>ye.C1,removeEventListeners:()=>ye.nJ,removePageHideEventListener:()=>ye.C9,removePageShowEventListener:()=>ye.Yl,removePageUnloadEventListener:()=>ye.JA,safeGetCookieMgr:()=>Ee.JP,safeGetLogger:()=>u.vH,sanitizeProperty:()=>H,setEnableEnvMocks:()=>h.dI,setProcessTelemetryTimings:()=>Y,setValue:()=>_e.sO,strContains:()=>_e._Q,strEndsWith:()=>s.IdH,strFunction:()=>m.cb,strObject:()=>m.fK,strPrototype:()=>m.hB,strStartsWith:()=>s.xee,strTrim:()=>s.ndY,strUndefined:()=>m.jA,throwError:()=>s._yM,toISOString:()=>_e.Y6,useXDomainRequest:()=>h.cp});var n,i=r(2012),o=r(14635),s=r(52631),a=r(27019),c=r(21328),u=r(38942),l=r(69451),d="",p="version",f="properties",h=r(49233),g=r(49187),m=r(13107),v="initialize",y="logger",_="indexOf",S="timings",w="pollInternalLogs",E="value",b="kind",P="length",T="processTelemetryStart",C="handleField",I="rmSanitizer",O="rmFieldSanitizer",x="canHandle",N="4.3.0",k="1DS-Web-JS-"+N,A=m.V4.hasOwnProperty,R="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",D="withCredentials",j="timeout",M=((n={})[0]=0,n[2]=6,n[1]=1,n[3]=7,n[4098]=6,n[4097]=1,n[4099]=7,n),L=null,F=(0,s.Nvg)(),U=(0,s.Ymo)();function B(e){return!(e===d||(0,s.lep)(e))}function V(e){if(e){var t=(0,s.MLb)(e,"-");if(t>-1)return(0,s.lH9)(e,t)}return d}function $(){return null===L&&(L=!(0,s.o8e)(Uint8Array)&&!function(){var e=(0,s.jWD)();if(!(0,s.o8e)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t[_]("safari")>=0||t[_]("firefox")>=0)&&t[_]("chrome")<0)return!0}return!1}()&&!(0,h.b$)()),L}function q(e){return!!(e&&(0,s.hj$)(e)&&e>=1&&e<=4)}function H(e,t,r){if(!t&&!B(t)||"string"!=typeof e)return null;var n=typeof t;if("string"===n||"number"===n||"boolean"===n||(0,s.kJL)(t))t={value:t};else if("object"!==n||A.call(t,"value")){if((0,s.lep)(t[E])||t[E]===d||!(0,s.HD0)(t[E])&&!(0,s.hj$)(t[E])&&!(0,s.jnD)(t[E])&&!(0,s.kJL)(t[E]))return null}else t={value:r?JSON.stringify(t):t};if((0,s.kJL)(t[E])&&!Q(t[E]))return null;if(!(0,s.lep)(t[b])){if((0,s.kJL)(t[E])||!J(t[b]))return null;t[E]=t[E].toString()}return t}function z(e,t,r){var n=-1;if(!(0,s.o8e)(e))if(t>0&&(32===t?n=8192:t<=13&&(n=t<<5)),function(e){return e>=0&&e<=9}(r))-1===n&&(n=0),n|=r;else{var i=M[Z(e)]||-1;-1!==n&&-1!==i?n|=i:6===i&&(n=i)}return n}function W(e,t,r){var n;return void 0===r&&(r=!0),e&&(n=e.get(t),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||d}function G(e){void 0===e&&(e="D");var t=(0,g.GW)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,d)),t}function K(e,t,r,n,i){var o={},a=!1,c=0,u=arguments[P],l=arguments;for((0,s.jnD)(l[0])&&(a=l[0],c++);c<u;c++)e=l[c],(0,s.rWU)(e,(function(e,t){a&&t&&(0,s.Kn2)(t)?(0,s.kJL)(t)?(o[e]=o[e]||[],(0,s.tOU)(t,(function(t,r){t&&(0,s.Kn2)(t)?o[e][r]=K(!0,o[e][r],t):o[e][r]=t}))):o[e]=K(!0,o[e],t):o[e]=t}));return o}var X=s.Jjf;function J(e){return 0===e||e>0&&e<=13||32===e}function Q(e){return e[P]>0}function Y(e,t){var r=e;r[S]=r[S]||{},r[S][T]=r[S][T]||{},r[S][T][t]=X()}function Z(e){var t=0;if(null!=e){var r=typeof e;"string"===r?t=1:"number"===r?t=2:"boolean"===r?t=3:r===m.fK&&(t=4,(0,s.kJL)(e)?(t=4096,e[P]>0&&(t|=Z(e[0]))):A.call(e,"value")&&(t=8192|Z(e[E])))}return t}function ee(){return!!(0,s.vsb)("chrome")}function te(e,t,r,n,i,o){function s(e,t,r){try{e[t]=r}catch(e){}}void 0===n&&(n=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return n&&s(a,R,n),r&&s(a,D,r),a.open(e,t,!i),r&&s(a,D,r),!i&&o&&s(a,j,o),a}function re(e){return e>0}var ne=(0,s.Hef)({endpointUrl:"https://browser.events.data.microsoft.com/OneCollector/1.0/",propertyStorageOverride:{isVal:function(e){return!e||e.getProperty&&e.setProperty||(0,s._yM)("Invalid property storage override passed."),!0}}}),ie=function(e){function t(){var r=e.call(this)||this;return(0,o.Z)(t,r,(function(e,t){e[v]=function(r,n,i,o){(0,a.Lm)(e,(function(){return"AppInsightsCore.initialize"}),(function(){try{t[v]((0,c.o)(r,ne,i||e[y],!1).cfg,n,i,o)}catch(t){var a=e[y],l=(0,s.eUe)(t);-1!==l[_]("channels")&&(l+="\n - Channels must be provided through config.channels only!"),(0,u.kP)(a,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}}),(function(){return{config:r,extensions:n,logger:i,notificationManager:o}}))},e.track=function(r){(0,a.Lm)(e,(function(){return"AppInsightsCore.track"}),(function(){var n=r;if(n){n[S]=n[S]||{},n[S].trackStart=X(),q(n.latency)||(n.latency=1);var i=n.ext=n.ext||{};i.sdk=i.sdk||{},i.sdk.ver=k;var o=n.baseData=n.baseData||{};o[f]=o[f]||{};var s=o[f];s[p]=s[p]||e.pluginVersionString||d}t.track(n)}),(function(){return{item:r}}),!r.sync)},e[w]=function(e){return t[w](e||"InternalLog")}})),r}return(0,i.ne)(t,e),t.__ieDyn=1,t}(l.F),oe=r(20488),se=(0,oe.B)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),ae=(0,oe.B)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),ce=(0,oe.B)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),ue=(0,oe.B)({Normal:1,Critical:2}),le=(0,oe.B)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),de=function(){function e(e){var t=this,r={},n=[],i=[];function o(e,t){var o,a=r[e];if(a&&(o=a[t]),!o&&null!==o){if((0,s.HD0)(e)&&(0,s.HD0)(t))if(i[P]>0){for(var c=0;c<i[P];c++)if(i[c][C](e,t)){o={canHandle:!0,fieldHandler:i[c]};break}}else 0===n[P]&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,c=0;c<n[P];c++)if(n[c][C](e,t)){o={canHandle:!0,handler:n[c],fieldHandler:null};break}a||(a=r[e]={}),a[t]=o}return o}function a(e,t,r,n,i,o){if(e.handler)return e.handler.property(t,r,i,o);if(!(0,s.lep)(i[b])){if(4096==(4096&n)||!J(i[b]))return null;i[E]=i[E].toString()}return u(e.fieldHandler,t,r,n,i)}function c(e,t,r){return B(r)?{value:r}:null}function u(e,r,n,i,o){if(o&&e){var a=e.getSanitizer(r,n,i,o[b],o.propertyType);if(a)if(4===i){var l={},d=o[E];(0,s.rWU)(d,(function(t,i){var o=r+"."+n;if(B(i)){var s=c(0,0,i);(s=u(e,o,t,Z(i),s))&&(l[t]=s[E])}})),o[E]=l}else{var p={path:r,name:n,type:i,prop:o,sanitizer:t};o=a.call(t,p)}}return o}e&&i.push(e),t.clearCache=function(){r={}},t.addSanitizer=function(e){e&&((0,s.FkI)(n,e)||n.push(e),r={})},t.addFieldSanitizer=function(e){e&&((0,s.FkI)(i,e)||i.push(e),r={})},t[I]=function(e){if(e){var t=(0,s.UAM)(n,e);-1!==t&&(n.splice(t,1),r={}),(0,s.tOU)(n,(function(t){t&&t[I]&&t[I](e)}))}},t[O]=function(e){if(e){var t=(0,s.UAM)(i,e);-1!==t&&(i.splice(t,1),r={}),(0,s.tOU)(n,(function(t){t&&t[O]&&t[O](e)}))}},t.isEmpty=function(){return(0,s.xAH)(n)+(0,s.xAH)(i)===0},t[C]=function(e,t){var r=o(e,t);return!!r&&r[x]},t[E]=function(e,t,r,n){var i=o(e,t);if(i&&i[x]){if(!i||!i[x])return null;if(i.handler)return i.handler[E](e,t,r,n);if(!(0,s.HD0)(t)||(0,s.lep)(r)||r===d)return null;var u=null,l=Z(r);if(8192==(8192&l)){var p=-8193&l;if(!B((u=r)[E])||1!==p&&2!==p&&3!==p&&4096!=(4096&p))return null}else 1===l||2===l||3===l||4096==(4096&l)?u=c(0,0,r):4===l&&(u=c(0,0,n?JSON.stringify(r):r));if(u)return a(i,e,t,l,u,n)}return null},t.property=function(e,t,r,n){var i=o(e,t);if(!i||!i[x])return null;if(!(0,s.HD0)(t)||(0,s.lep)(r)||!B(r[E]))return null;var c=Z(r[E]);return 0===c?null:a(i,e,t,c,r,n)}}return e.getFieldType=Z,e}(),pe=100,fe=(0,oe.B)({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),he=r(51016),ge=r(18264),me=r(38570),ve=r(13657),ye=r(33668),_e=r(98769),Se=r(25778),we=r(88363),Ee=r(42450),be=r(73831),Pe=r(46096),Te=r(33866),Ce=r(60388),Ie=r(68224),Oe=r(87781),xe=r(19925)},50579:(e,t,r)=>{"use strict";var n=r(89134),i=[];function o(){this.task=null,this.domain=null}e.exports=function(e){var t;(t=i.length?i.pop():new o).task=e,t.domain=process.domain,n(t)},o.prototype.call=function(){this.domain&&this.domain.enter();var e=!0;try{this.task.call(),e=!1,this.domain&&this.domain.exit()}finally{e&&n.requestFlush(),this.task=null,this.domain=null,i.push(this)}}},89134:(e,t,r)=>{"use strict";var n,i="function"==typeof setImmediate;function o(e){s.length||(d(),a=!0),s[s.length]=e}e.exports=o;var s=[],a=!1,c=0,u=1024;function l(){for(;c<s.length;){var e=c;if(c+=1,s[e].call(),c>u){for(var t=0,r=s.length-c;t<r;t++)s[t]=s[t+c];s.length-=c,c=0}}s.length=0,c=0,a=!1}function d(){var e=process.domain;e&&(n||(n=r(13639)),n.active=process.domain=null),a&&i?setImmediate(l):process.nextTick(l),e&&(n.active=process.domain=e)}o.requestFlush=d},84017:(e,t)=>{"use strict";class r{constructor(e){this.tasks=[],this.count=e}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let e=this.tasks.shift();if(void 0===e)throw"Unexpected undefined value in tasks list";e()}}acquire(){return new Promise(((e,t)=>{this.tasks.push((()=>{var t=!1;e((()=>{t||(t=!0,this.count++,this.sched())}))})),process&&process.nextTick?process.nextTick(this.sched.bind(this)):setImmediate(this.sched.bind(this))}))}use(e){return this.acquire().then((t=>e().then((e=>(t(),e))).catch((e=>{throw t(),e}))))}}t.Semaphore=r,t.Mutex=class extends r{constructor(){super(1)}}},80144:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(){},o=function(){function e(e,t){this._isCancelled=e,this.canBeCancelled=t,this._callbacks=new Set}return Object.defineProperty(e.prototype,"isCancelled",{get:function(){return this._isCancelled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){if(this.isCancelled)return this._reason;throw new Error("This token is not cancelled.")},enumerable:!1,configurable:!0}),e.prototype.racePromise=function(t){var r=this;return this.canBeCancelled?new Promise((function(n,i){var o=r.onCancelled((function(t){return i(new e.CancellationError(t))}));t.then((function(e){n(e),o()}),(function(e){i(e),o()}))})):t},e.prototype.throwIfCancelled=function(){if(this._isCancelled)throw new e.CancellationError(this._reason)},e.prototype.onCancelled=function(e){var t,r=this;return this.canBeCancelled?this.isCancelled?(e(this.reason),i):(null===(t=this._callbacks)||void 0===t||t.add(e),function(){var t;return null===(t=r._callbacks)||void 0===t?void 0:t.delete(e)}):i},e.create=function(){var t=new e(!1,!0);return{token:t,cancel:function(e){var r;t._isCancelled||(t._isCancelled=!0,t._reason=e,null===(r=t._callbacks)||void 0===r||r.forEach((function(t){return t(e)})),delete t._callbacks)}}},e.timeout=function(t){var r=e.create(),n=r.token,i=r.cancel,o=setTimeout((function(){return i(e.timeout)}),t);return{token:n,cancel:function(e){n._isCancelled||(clearTimeout(o),i(e))}}},e.all=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.some((function(e){return!e.canBeCancelled})))return e.CONTINUE;var n=e.create(),i=t.length,o=function(){if(0==--i){var e=t.map((function(e){return e._reason}));n.cancel(e)}};return t.forEach((function(e){return e.onCancelled(o)})),n.token},e.race=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o._isCancelled)return o}var s,a=e.create(),c=function(e){s.forEach((function(e){return e()})),a.cancel(e)};return s=t.map((function(e){return e.onCancelled(c)})),a.token},e.CANCELLED=new e(!0,!0),e.CONTINUE=new e(!1,!1),e}();!function(e){var t=function(e){function t(r){var n=e.call(this,"Operation cancelled")||this;return n.reason=r,Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(Error);e.CancellationError=t}(o||(o={})),t.default=o},9593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(80144);t.default=n.default},5458:e=>{"use strict";var t;e.exports=(t=()=>{},e=>(e.catch(t),e))},73258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return s(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,s(r,e).push(n),r;function n(){o.call(r,e,n),t.apply(this,arguments)}},off:o,emit:function(e,t){var r=this,n=s(r,e,!0);if(!n)return!1;var i=arguments.length;if(1===i)n.forEach((function(e){e.call(r)}));else if(2===i)n.forEach((function(e){e.call(r,t)}));else{var o=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,o)}))}return!!n.length}};function i(e){for(var t in n)e[t]=n[t];return e}function o(e,t){var n,i=this;if(arguments.length){if(t){if(n=s(i,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return o.call(i,e);i[r][e]=n}}else if((n=i[r])&&(delete n[e],!Object.keys(n).length))return o.call(i)}else delete i[r];return i}function s(e,t,n){if(!n||e[r]){var i=e[r]||(e[r]={});return i[t]||(i[t]=[])}}i(t.prototype),t.mixin=i}((function e(){if(!(this instanceof e))return new e}))},83873:(e,t,r)=>{"use strict";const n=r(20077),i=r(71017),o=r(11381).mkdirsSync,s=r(80318).utimesMillisSync,a=r(42733);function c(e,t,r,o){const s=(o.dereference?n.statSync:n.lstatSync)(t);if(s.isDirectory())return function(e,t,r,i,o){return t?d(r,i,o):function(e,t,r,i){return n.mkdirSync(r),d(t,r,i),l(r,e)}(e.mode,r,i,o)}(s,e,t,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return function(e,t,r,i,o){return t?function(e,t,r,i){if(i.overwrite)return n.unlinkSync(r),u(e,t,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,i,o):u(e,r,i,o)}(s,e,t,r,o);if(s.isSymbolicLink())return function(e,t,r,o){let s=n.readlinkSync(t);if(o.dereference&&(s=i.resolve(process.cwd(),s)),e){let e;try{e=n.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlinkSync(s,r);throw e}if(o.dereference&&(e=i.resolve(process.cwd(),e)),a.isSrcSubdir(s,e))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${e}'.`);if(a.isSrcSubdir(e,s))throw new Error(`Cannot overwrite '${e}' with '${s}'.`);return function(e,t){return n.unlinkSync(t),n.symlinkSync(e,t)}(s,r)}return n.symlinkSync(s,r)}(e,t,r,o);if(s.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(s.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function u(e,t,r,i){return n.copyFileSync(t,r),i.preserveTimestamps&&function(e,t,r){(function(e){return 0==(128&e)})(e)&&function(e,t){l(e,128|t)}(r,e),function(e,t){const r=n.statSync(e);s(t,r.atime,r.mtime)}(t,r)}(e.mode,t,r),l(r,e.mode)}function l(e,t){return n.chmodSync(e,t)}function d(e,t,r){n.readdirSync(e).forEach((n=>function(e,t,r,n){const o=i.join(t,e),s=i.join(r,e);if(n.filter&&!n.filter(o,s))return;const{destStat:u}=a.checkPathsSync(o,s,"copy",n);return c(u,o,s,n)}(n,e,t,r)))}e.exports=function(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:s,destStat:u}=a.checkPathsSync(e,t,"copy",r);if(a.checkParentPathsSync(e,s,t,"copy"),r.filter&&!r.filter(e,t))return;const l=i.dirname(t);return n.existsSync(l)||o(l),c(u,e,t,r)}},67189:(e,t,r)=>{"use strict";const n=r(67749),i=r(71017),{mkdirs:o}=r(11381),{pathExists:s}=r(99257),{utimesMillis:a}=r(80318),c=r(42733);async function u(e,t,r){return!r.filter||r.filter(e,t)}async function l(e,t,r,o){const s=o.dereference?n.stat:n.lstat,a=await s(t);if(a.isDirectory())return async function(e,t,r,o,s){t||await n.mkdir(o);const a=await n.readdir(r);await Promise.all(a.map((async e=>{const t=i.join(r,e),n=i.join(o,e);if(!await u(t,n,s))return;const{destStat:a}=await c.checkPaths(t,n,"copy",s);return l(a,t,n,s)}))),t||await n.chmod(o,e.mode)}(a,e,t,r,o);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return async function(e,t,r,i,o){if(!t)return d(e,r,i,o);if(o.overwrite)return await n.unlink(i),d(e,r,i,o);if(o.errorOnExist)throw new Error(`'${i}' already exists`)}(a,e,t,r,o);if(a.isSymbolicLink())return async function(e,t,r,o){let s=await n.readlink(t);if(o.dereference&&(s=i.resolve(process.cwd(),s)),!e)return n.symlink(s,r);let a=null;try{a=await n.readlink(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlink(s,r);throw e}if(o.dereference&&(a=i.resolve(process.cwd(),a)),c.isSrcSubdir(s,a))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${a}'.`);if(c.isSrcSubdir(a,s))throw new Error(`Cannot overwrite '${a}' with '${s}'.`);return await n.unlink(r),n.symlink(s,r)}(e,t,r,o);if(a.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(a.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}async function d(e,t,r,i){if(await n.copyFile(t,r),i.preserveTimestamps){0==(128&e.mode)&&await function(e,t){return n.chmod(e,128|t)}(r,e.mode);const i=await n.stat(t);await a(r,i.atime,i.mtime)}return n.chmod(r,e.mode)}e.exports=async function(e,t,r={}){"function"==typeof r&&(r={filter:r}),r.clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:n,destStat:a}=await c.checkPaths(e,t,"copy",r);if(await c.checkParentPaths(e,n,t,"copy"),!await u(e,t,r))return;const d=i.dirname(t);await s(d)||await o(d),await l(a,e,t,r)}},66464:(e,t,r)=>{"use strict";const n=r(38981).fromPromise;e.exports={copy:n(r(67189)),copySync:r(83873)}},15590:(e,t,r)=>{"use strict";const n=r(38981).fromPromise,i=r(67749),o=r(71017),s=r(11381),a=r(54542),c=n((async function(e){let t;try{t=await i.readdir(e)}catch{return s.mkdirs(e)}return Promise.all(t.map((t=>a.remove(o.join(e,t)))))}));function u(e){let t;try{t=i.readdirSync(e)}catch{return s.mkdirsSync(e)}t.forEach((t=>{t=o.join(e,t),a.removeSync(t)}))}e.exports={emptyDirSync:u,emptydirSync:u,emptyDir:c,emptydir:c}},36530:(e,t,r)=>{"use strict";const n=r(38981).fromPromise,i=r(71017),o=r(67749),s=r(11381);e.exports={createFile:n((async function(e){let t;try{t=await o.stat(e)}catch{}if(t&&t.isFile())return;const r=i.dirname(e);let n=null;try{n=await o.stat(r)}catch(t){if("ENOENT"===t.code)return await s.mkdirs(r),void await o.writeFile(e,"");throw t}n.isDirectory()?await o.writeFile(e,""):await o.readdir(r)})),createFileSync:function(e){let t;try{t=o.statSync(e)}catch{}if(t&&t.isFile())return;const r=i.dirname(e);try{o.statSync(r).isDirectory()||o.readdirSync(r)}catch(e){if(!e||"ENOENT"!==e.code)throw e;s.mkdirsSync(r)}o.writeFileSync(e,"")}}},21720:(e,t,r)=>{"use strict";const{createFile:n,createFileSync:i}=r(36530),{createLink:o,createLinkSync:s}=r(54147),{createSymlink:a,createSymlinkSync:c}=r(83635);e.exports={createFile:n,createFileSync:i,ensureFile:n,ensureFileSync:i,createLink:o,createLinkSync:s,ensureLink:o,ensureLinkSync:s,createSymlink:a,createSymlinkSync:c,ensureSymlink:a,ensureSymlinkSync:c}},54147:(e,t,r)=>{"use strict";const n=r(38981).fromPromise,i=r(71017),o=r(67749),s=r(11381),{pathExists:a}=r(99257),{areIdentical:c}=r(42733);e.exports={createLink:n((async function(e,t){let r,n;try{r=await o.lstat(t)}catch{}try{n=await o.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}if(r&&c(n,r))return;const u=i.dirname(t);await a(u)||await s.mkdirs(u),await o.link(e,t)})),createLinkSync:function(e,t){let r;try{r=o.lstatSync(t)}catch{}try{const t=o.lstatSync(e);if(r&&c(t,r))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=i.dirname(t);return o.existsSync(n)||s.mkdirsSync(n),o.linkSync(e,t)}}},6072:(e,t,r)=>{"use strict";const n=r(71017),i=r(67749),{pathExists:o}=r(99257),s=r(38981).fromPromise;e.exports={symlinkPaths:s((async function(e,t){if(n.isAbsolute(e)){try{await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:e}}const r=n.dirname(t),s=n.join(r,e);if(await o(s))return{toCwd:s,toDst:e};try{await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:n.relative(r,e)}})),symlinkPathsSync:function(e,t){if(n.isAbsolute(e)){if(!i.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const r=n.dirname(t),o=n.join(r,e);if(i.existsSync(o))return{toCwd:o,toDst:e};if(!i.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:n.relative(r,e)}}}},89259:(e,t,r)=>{"use strict";const n=r(67749),i=r(38981).fromPromise;e.exports={symlinkType:i((async function(e,t){if(t)return t;let r;try{r=await n.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"})),symlinkTypeSync:function(e,t){if(t)return t;let r;try{r=n.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}}},83635:(e,t,r)=>{"use strict";const n=r(38981).fromPromise,i=r(71017),o=r(67749),{mkdirs:s,mkdirsSync:a}=r(11381),{symlinkPaths:c,symlinkPathsSync:u}=r(6072),{symlinkType:l,symlinkTypeSync:d}=r(89259),{pathExists:p}=r(99257),{areIdentical:f}=r(42733);e.exports={createSymlink:n((async function(e,t,r){let n;try{n=await o.lstat(t)}catch{}if(n&&n.isSymbolicLink()){const[r,n]=await Promise.all([o.stat(e),o.stat(t)]);if(f(r,n))return}const a=await c(e,t);e=a.toDst;const u=await l(a.toCwd,r),d=i.dirname(t);return await p(d)||await s(d),o.symlink(e,t,u)})),createSymlinkSync:function(e,t,r){let n;try{n=o.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const r=o.statSync(e),n=o.statSync(t);if(f(r,n))return}const s=u(e,t);e=s.toDst,r=d(s.toCwd,r);const c=i.dirname(t);return o.existsSync(c)||a(c),o.symlinkSync(e,t,r)}}},67749:(e,t,r)=>{"use strict";const n=r(38981).fromCallback,i=r(20077),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof i[e]));Object.assign(t,i),o.forEach((e=>{t[e]=n(i[e])})),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise((t=>i.exists(e,t)))},t.read=function(e,t,r,n,o,s){return"function"==typeof s?i.read(e,t,r,n,o,s):new Promise(((s,a)=>{i.read(e,t,r,n,o,((e,t,r)=>{if(e)return a(e);s({bytesRead:t,buffer:r})}))}))},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?i.write(e,t,...r):new Promise(((n,o)=>{i.write(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesWritten:t,buffer:r})}))}))},t.readv=function(e,t,...r){return"function"==typeof r[r.length-1]?i.readv(e,t,...r):new Promise(((n,o)=>{i.readv(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesRead:t,buffers:r})}))}))},t.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?i.writev(e,t,...r):new Promise(((n,o)=>{i.writev(e,t,...r,((e,t,r)=>{if(e)return o(e);n({bytesWritten:t,buffers:r})}))}))},"function"==typeof i.realpath.native?t.realpath.native=n(i.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")},55674:(e,t,r)=>{"use strict";e.exports={...r(67749),...r(66464),...r(15590),...r(21720),...r(46573),...r(11381),...r(80530),...r(54670),...r(99257),...r(54542)}},46573:(e,t,r)=>{"use strict";const n=r(38981).fromPromise,i=r(7183);i.outputJson=n(r(43508)),i.outputJsonSync=r(39578),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},7183:(e,t,r)=>{"use strict";const n=r(96813);e.exports={readJson:n.readFile,readJsonSync:n.readFileSync,writeJson:n.writeFile,writeJsonSync:n.writeFileSync}},39578:(e,t,r)=>{"use strict";const{stringify:n}=r(96780),{outputFileSync:i}=r(54670);e.exports=function(e,t,r){const o=n(t,r);i(e,o,r)}},43508:(e,t,r)=>{"use strict";const{stringify:n}=r(96780),{outputFile:i}=r(54670);e.exports=async function(e,t,r={}){const o=n(t,r);await i(e,o,r)}},11381:(e,t,r)=>{"use strict";const n=r(38981).fromPromise,{makeDir:i,makeDirSync:o}=r(18233),s=n(i);e.exports={mkdirs:s,mkdirsSync:o,mkdirp:s,mkdirpSync:o,ensureDir:s,ensureDirSync:o}},18233:(e,t,r)=>{"use strict";const n=r(67749),{checkPath:i}=r(33468),o=e=>"number"==typeof e?e:{mode:511,...e}.mode;e.exports.makeDir=async(e,t)=>(i(e),n.mkdir(e,{mode:o(t),recursive:!0})),e.exports.makeDirSync=(e,t)=>(i(e),n.mkdirSync(e,{mode:o(t),recursive:!0}))},33468:(e,t,r)=>{"use strict";const n=r(71017);e.exports.checkPath=function(e){if("win32"===process.platform&&/[<>:"|?*]/.test(e.replace(n.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},80530:(e,t,r)=>{"use strict";const n=r(38981).fromPromise;e.exports={move:n(r(436)),moveSync:r(43736)}},43736:(e,t,r)=>{"use strict";const n=r(20077),i=r(71017),o=r(66464).copySync,s=r(54542).removeSync,a=r(11381).mkdirpSync,c=r(42733);function u(e,t,r){try{n.renameSync(e,t)}catch(n){if("EXDEV"!==n.code)throw n;return function(e,t,r){return o(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),s(e)}(e,t,r)}}e.exports=function(e,t,r){const o=(r=r||{}).overwrite||r.clobber||!1,{srcStat:l,isChangingCase:d=!1}=c.checkPathsSync(e,t,"move",r);return c.checkParentPathsSync(e,l,t,"move"),function(e){const t=i.dirname(e);return i.parse(t).root===t}(t)||a(i.dirname(t)),function(e,t,r,i){if(i)return u(e,t,r);if(r)return s(t),u(e,t,r);if(n.existsSync(t))throw new Error("dest already exists.");return u(e,t,r)}(e,t,o,d)}},436:(e,t,r)=>{"use strict";const n=r(67749),i=r(71017),{copy:o}=r(66464),{remove:s}=r(54542),{mkdirp:a}=r(11381),{pathExists:c}=r(99257),u=r(42733);e.exports=async function(e,t,r={}){const l=r.overwrite||r.clobber||!1,{srcStat:d,isChangingCase:p=!1}=await u.checkPaths(e,t,"move",r);await u.checkParentPaths(e,d,t,"move");const f=i.dirname(t);return i.parse(f).root!==f&&await a(f),async function(e,t,r,i){if(!i)if(r)await s(t);else if(await c(t))throw new Error("dest already exists.");try{await n.rename(e,t)}catch(n){if("EXDEV"!==n.code)throw n;await async function(e,t,r){const n={overwrite:r,errorOnExist:!0,preserveTimestamps:!0};return await o(e,t,n),s(e)}(e,t,r)}}(e,t,l,p)}},54670:(e,t,r)=>{"use strict";const n=r(38981).fromPromise,i=r(67749),o=r(71017),s=r(11381),a=r(99257).pathExists;e.exports={outputFile:n((async function(e,t,r="utf-8"){const n=o.dirname(e);return await a(n)||await s.mkdirs(n),i.writeFile(e,t,r)})),outputFileSync:function(e,...t){const r=o.dirname(e);i.existsSync(r)||s.mkdirsSync(r),i.writeFileSync(e,...t)}}},99257:(e,t,r)=>{"use strict";const n=r(38981).fromPromise,i=r(67749);e.exports={pathExists:n((function(e){return i.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:i.existsSync}},54542:(e,t,r)=>{"use strict";const n=r(20077),i=r(38981).fromCallback;e.exports={remove:i((function(e,t){n.rm(e,{recursive:!0,force:!0},t)})),removeSync:function(e){n.rmSync(e,{recursive:!0,force:!0})}}},42733:(e,t,r)=>{"use strict";const n=r(67749),i=r(71017),o=r(38981).fromPromise;function s(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function a(e,t){const r=i.resolve(e).split(i.sep).filter((e=>e)),n=i.resolve(t).split(i.sep).filter((e=>e));return r.every(((e,t)=>n[t]===e))}function c(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:o((async function(e,t,r,o){const{srcStat:u,destStat:l}=await function(e,t,r){const i=r.dereference?e=>n.stat(e,{bigint:!0}):e=>n.lstat(e,{bigint:!0});return Promise.all([i(e),i(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}(e,t,o);if(l){if(s(u,l)){const n=i.basename(e),o=i.basename(t);if("move"===r&&n!==o&&n.toLowerCase()===o.toLowerCase())return{srcStat:u,destStat:l,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(u.isDirectory()&&!l.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!u.isDirectory()&&l.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(u.isDirectory()&&a(e,t))throw new Error(c(e,t,r));return{srcStat:u,destStat:l}})),checkPathsSync:function(e,t,r,o){const{srcStat:u,destStat:l}=function(e,t,r){let i;const o=r.dereference?e=>n.statSync(e,{bigint:!0}):e=>n.lstatSync(e,{bigint:!0}),s=o(e);try{i=o(t)}catch(e){if("ENOENT"===e.code)return{srcStat:s,destStat:null};throw e}return{srcStat:s,destStat:i}}(e,t,o);if(l){if(s(u,l)){const n=i.basename(e),o=i.basename(t);if("move"===r&&n!==o&&n.toLowerCase()===o.toLowerCase())return{srcStat:u,destStat:l,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(u.isDirectory()&&!l.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!u.isDirectory()&&l.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(u.isDirectory()&&a(e,t))throw new Error(c(e,t,r));return{srcStat:u,destStat:l}},checkParentPaths:o((async function e(t,r,o,a){const u=i.resolve(i.dirname(t)),l=i.resolve(i.dirname(o));if(l===u||l===i.parse(l).root)return;let d;try{d=await n.stat(l,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(s(r,d))throw new Error(c(t,o,a));return e(t,r,l,a)})),checkParentPathsSync:function e(t,r,o,a){const u=i.resolve(i.dirname(t)),l=i.resolve(i.dirname(o));if(l===u||l===i.parse(l).root)return;let d;try{d=n.statSync(l,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(s(r,d))throw new Error(c(t,o,a));return e(t,r,l,a)},isSrcSubdir:a,areIdentical:s}},80318:(e,t,r)=>{"use strict";const n=r(67749),i=r(38981).fromPromise;e.exports={utimesMillis:i((async function(e,t,r){const i=await n.open(e,"r+");let o=null;try{await n.futimes(i,t,r)}finally{try{await n.close(i)}catch(e){o=e}}if(o)throw o})),utimesMillisSync:function(e,t,r){const i=n.openSync(e,"r+");return n.futimesSync(i,t,r),n.closeSync(i)}}},66458:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:t(e)};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})),r};var t=Object.getPrototypeOf||function(e){return e.__proto__}},20077:(e,t,r)=>{var n,i,o=r(57147),s=r(72161),a=r(78520),c=r(66458),u=r(73837);function l(e,t){Object.defineProperty(e,n,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(n=Symbol.for("graceful-fs.queue"),i=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",i="___graceful-fs.previous");var d,p=function(){};if(u.debuglog?p=u.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(p=function(){var e=u.format.apply(u,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!o[n]){var f=global[n]||[];l(o,f),o.close=function(e){function t(t,r){return e.call(o,t,(function(e){e||m(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,i,{value:e}),t}(o.close),o.closeSync=function(e){function t(t){e.apply(o,arguments),m()}return Object.defineProperty(t,i,{value:e}),t}(o.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){p(o[n]),r(39491).equal(o[n].length,0)}))}function h(e){s(e),e.gracefulify=h,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){return"function"==typeof r&&(n=r,r=null),function e(r,n,i,o){return t(r,n,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof i&&i.apply(this,arguments):g([e,[r,n,i],t,o||Date.now(),Date.now()])}))}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,i){return"function"==typeof n&&(i=n,n=null),function e(t,n,i,o,s){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):g([e,[t,n,i,o],r,s||Date.now(),Date.now()])}))}(e,t,n,i)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,i){return"function"==typeof r&&(i=r,r=null),function e(t,r,i,o,s){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof o&&o.apply(this,arguments):g([e,[t,r,i,o],n,s||Date.now(),Date.now()])}))}(e,t,r,i)});var i=e.copyFile;i&&(e.copyFile=function(e,t,r,n){return"function"==typeof r&&(n=r,r=0),function e(t,r,n,o,s){return i(t,r,n,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):g([e,[t,r,n,o],i,s||Date.now(),Date.now()])}))}(e,t,r,n)});var o=e.readdir;e.readdir=function(e,t,r){"function"==typeof t&&(r=t,t=null);var n=c.test(process.version)?function(e,t,r,n){return o(e,i(e,t,r,n))}:function(e,t,r,n){return o(e,t,i(e,t,r,n))};return n(e,t,r);function i(e,t,r,i){return function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"==typeof r&&r.call(this,o,s)):g([n,[e,t,r],o,i||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var u=a(e);m=u.ReadStream,v=u.WriteStream}var l=e.ReadStream;l&&(m.prototype=Object.create(l.prototype),m.prototype.open=function(){var e=this;_(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var d=e.WriteStream;d&&(v.prototype=Object.create(d.prototype),v.prototype.open=function(){var e=this;_(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return m},set:function(e){m=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return v},set:function(e){v=e},enumerable:!0,configurable:!0});var p=m;Object.defineProperty(e,"FileReadStream",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0});var f=v;function m(e,t){return this instanceof m?(l.apply(this,arguments),this):m.apply(Object.create(m.prototype),arguments)}function v(e,t){return this instanceof v?(d.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return f},set:function(e){f=e},enumerable:!0,configurable:!0});var y=e.open;function _(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,i,o){return y(t,r,n,(function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof i&&i.apply(this,arguments):g([e,[t,r,n,i],s,o||Date.now(),Date.now()])}))}(e,t,r,n)}return e.open=_,e}function g(e){p("ENQUEUE",e[0].name,e[1]),o[n].push(e),v()}function m(){for(var e=Date.now(),t=0;t<o[n].length;++t)o[n][t].length>2&&(o[n][t][3]=e,o[n][t][4]=e);v()}function v(){if(clearTimeout(d),d=void 0,0!==o[n].length){var e=o[n].shift(),t=e[0],r=e[1],i=e[2],s=e[3],a=e[4];if(void 0===s)p("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-s>=6e4){p("TIMEOUT",t.name,r);var c=r.pop();"function"==typeof c&&c.call(null,i)}else{var u=Date.now()-a,l=Math.max(a-s,1);u>=Math.min(1.2*l,100)?(p("RETRY",t.name,r),t.apply(null,r.concat([s]))):o[n].push(e)}void 0===d&&(d=setTimeout(v,0))}}global[n]||l(global,o[n]),e.exports=h(c(o)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!o.__patched&&(e.exports=h(o),o.__patched=!0)},78520:(e,t,r)=>{var n=r(12781).Stream;e.exports=function(e){return{ReadStream:function t(r,i){if(!(this instanceof t))return new t(r,i);n.call(this);var o=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var s=Object.keys(i),a=0,c=s.length;a<c;a++){var u=s[a];this[u]=i[u]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()})):process.nextTick((function(){o._read()}))},WriteStream:function t(r,i){if(!(this instanceof t))return new t(r,i);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},72161:(e,t,r)=>{var n=r(22057),i=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=i.call(process)),o};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var a=process.chdir;process.chdir=function(e){o=null,a.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,a)}e.exports=function(e){function t(t){return t?function(r,n,i){return t.call(e,r,n,(function(e){u(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function r(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!u(e))throw e}}:t}function i(t){return t?function(r,n,i,o){return t.call(e,r,n,i,(function(e){u(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function o(t){return t?function(r,n,i){try{return t.call(e,r,n,i)}catch(e){if(!u(e))throw e}}:t}function a(t){return t?function(r,n,i){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof n&&(i=n,n=null),n?t.call(e,r,n,o):t.call(e,r,o)}:t}function c(t){return t?function(r,n){var i=n?t.call(e,r,n):t.call(e,r);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:t}function u(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}var l;n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,i){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){t?i&&i(t):e.fchmod(n,r,(function(t){e.close(n,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(t,r){var i,o=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),s=!0;try{i=e.fchmodSync(o,r),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}}(e),e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,r,i,o){e.open(t,n.O_SYMLINK,(function(t,n){t?o&&o(t):e.futimes(n,r,i,(function(t){e.close(n,(function(e){o&&o(t||e)}))}))}))},e.lutimesSync=function(t,r,i){var o,s=e.openSync(t,n.O_SYMLINK),a=!0;try{o=e.futimesSync(s,r,i),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):e.futimes&&(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=r(e.chmodSync),e.fchmodSync=r(e.fchmodSync),e.lchmodSync=r(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){}),"win32"===s&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function r(r,n,i){var o=Date.now(),s=0;t(r,n,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code||"EBUSY"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(n,(function(e,o){e&&"ENOENT"===e.code?t(r,n,a):i(c)}))}),s),void(s<100&&(s+=10));i&&i(c)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.rename)),e.read="function"!=typeof e.read?e.read:function(t){function r(r,n,i,o,s,a){var c;if(a&&"function"==typeof a){var u=0;c=function(l,d,p){if(l&&"EAGAIN"===l.code&&u<10)return u++,t.call(e,r,n,i,o,s,c);a.apply(this,arguments)}}return t.call(e,r,n,i,o,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(l=e.readSync,function(t,r,n,i,o){for(var s=0;;)try{return l.call(e,t,r,n,i,o)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}})}},80645:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?i-1:0,p=r?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=u}return(f?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,h=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+f]=255&a,f+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+f]=255&s,f+=h,s/=256,u-=8);e[r+f-h]|=128*g}},35369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Collection:()=>T,Iterable:()=>On,List:()=>cr,Map:()=>Ft,OrderedMap:()=>Er,OrderedSet:()=>ln,PairSorting:()=>gn,Range:()=>Wr,Record:()=>mn,Repeat:()=>bn,Seq:()=>Q,Set:()=>Ur,Stack:()=>Or,default:()=>xn,fromJS:()=>Pn,get:()=>ct,getIn:()=>Gr,has:()=>at,hasIn:()=>Xr,hash:()=>ve,is:()=>fe,isAssociative:()=>P,isCollection:()=>_,isImmutable:()=>R,isIndexed:()=>b,isKeyed:()=>w,isList:()=>ar,isMap:()=>le,isOrdered:()=>j,isOrderedMap:()=>de,isOrderedSet:()=>jr,isPlainObject:()=>it,isRecord:()=>A,isSeq:()=>N,isSet:()=>Dr,isStack:()=>Ir,isValueObject:()=>pe,merge:()=>Pt,mergeDeep:()=>Ct,mergeDeepWith:()=>It,mergeWith:()=>Tt,remove:()=>lt,removeIn:()=>mt,set:()=>dt,setIn:()=>ht,update:()=>yt,updateIn:()=>pt,version:()=>In});var n="delete",i=5,o=1<<i,s=o-1,a={};function c(e){e&&(e.value=!0)}function u(){}function l(e){return void 0===e.size&&(e.size=e.__iterate(p)),e.size}function d(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?l(e)+t:t}function p(){return!0}function f(e,t,r){return(0===e&&!v(e)||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function h(e,t){return m(e,t,0)}function g(e,t){return m(e,t,t)}function m(e,t,r){return void 0===e?r:v(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function v(e){return e<0||0===e&&1/e==-1/0}var y="@@__IMMUTABLE_ITERABLE__@@";function _(e){return Boolean(e&&e[y])}var S="@@__IMMUTABLE_KEYED__@@";function w(e){return Boolean(e&&e[S])}var E="@@__IMMUTABLE_INDEXED__@@";function b(e){return Boolean(e&&e[E])}function P(e){return w(e)||b(e)}var T=function(e){return _(e)?e:Q(e)},C=function(e){function t(e){return w(e)?e:Y(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(T),I=function(e){function t(e){return b(e)?e:Z(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(T),O=function(e){function t(e){return _(e)&&!P(e)?e:ee(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(T);T.Keyed=C,T.Indexed=I,T.Set=O;var x="@@__IMMUTABLE_SEQ__@@";function N(e){return Boolean(e&&e[x])}var k="@@__IMMUTABLE_RECORD__@@";function A(e){return Boolean(e&&e[k])}function R(e){return _(e)||A(e)}var D="@@__IMMUTABLE_ORDERED__@@";function j(e){return Boolean(e&&e[D])}var M=0,L=1,F=2,U="function"==typeof Symbol&&Symbol.iterator,B="@@iterator",V=U||B,$=function(e){this.next=e};function q(e,t,r,n){var i=0===e?t:1===e?r:[t,r];return n?n.value=i:n={value:i,done:!1},n}function H(){return{value:void 0,done:!0}}function z(e){return!!Array.isArray(e)||!!K(e)}function W(e){return e&&"function"==typeof e.next}function G(e){var t=K(e);return t&&t.call(e)}function K(e){var t=e&&(U&&e[U]||e[B]);if("function"==typeof t)return t}$.prototype.toString=function(){return"[Iterator]"},$.KEYS=M,$.VALUES=L,$.ENTRIES=F,$.prototype.inspect=$.prototype.toSource=function(){return this.toString()},$.prototype[V]=function(){return this};var X=Object.prototype.hasOwnProperty;function J(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var Q=function(e){function t(e){return null==e?oe():R(e)?e.toSeq():function(e){var t,r,n=ce(e);if(n)return(r=K(t=e))&&r===t.entries?n.fromEntrySeq():function(e){var t=K(e);return t&&t===e.keys}(e)?n.toSetSeq():n;if("object"==typeof e)return new re(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[t?n-++i:i++];if(!1===e(o[1],o[0],this))break}return i}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var r=this._cache;if(r){var n=r.length,i=0;return new $((function(){if(i===n)return{value:void 0,done:!0};var o=r[t?n-++i:i++];return q(e,o[0],o[1])}))}return this.__iteratorUncached(e,t)},t}(T),Y=function(e){function t(e){return null==e?oe().toKeyedSeq():_(e)?w(e)?e.toSeq():e.fromEntrySeq():A(e)?e.toSeq():se(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Q),Z=function(e){function t(e){return null==e?oe():_(e)?w(e)?e.entrySeq():e.toIndexedSeq():A(e)?e.toSeq().entrySeq():ae(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Q),ee=function(e){function t(e){return(_(e)&&!P(e)?e:Z(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Q);Q.isSeq=N,Q.Keyed=Y,Q.Set=ee,Q.Indexed=Z,Q.prototype[x]=!0;var te=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[d(this,e)]:t},t.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length,i=0;i!==n;){var o=t?n-++i:i++;if(!1===e(r[o],o,this))break}return i},t.prototype.__iterator=function(e,t){var r=this._array,n=r.length,i=0;return new $((function(){if(i===n)return{value:void 0,done:!0};var o=t?n-++i:i++;return q(e,o,r[o])}))},t}(Z),re=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return X.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var s=n[t?i-++o:o++];if(!1===e(r[s],s,this))break}return o},t.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,i=n.length,o=0;return new $((function(){if(o===i)return{value:void 0,done:!0};var s=n[t?i-++o:o++];return q(e,s,r[s])}))},t}(Y);re.prototype[D]=!0;var ne,ie=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=G(this._collection),n=0;if(W(r))for(var i;!(i=r.next()).done&&!1!==e(i.value,n++,this););return n},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=G(this._collection);if(!W(r))return new $(H);var n=0;return new $((function(){var t=r.next();return t.done?t:q(e,n++,t.value)}))},t}(Z);function oe(){return ne||(ne=new te([]))}function se(e){var t=ce(e);if(t)return t.fromEntrySeq();if("object"==typeof e)return new re(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function ae(e){var t=ce(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function ce(e){return J(e)?new te(e):z(e)?new ie(e):void 0}var ue="@@__IMMUTABLE_MAP__@@";function le(e){return Boolean(e&&e[ue])}function de(e){return le(e)&&j(e)}function pe(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function fe(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(pe(e)&&pe(t)&&e.equals(t))}var he="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function ge(e){return e>>>1&1073741824|3221225471&e}var me=Object.prototype.valueOf;function ve(e){if(null==e)return ye(e);if("function"==typeof e.hashCode)return ge(e.hashCode(e));var t,r,n,i=(t=e).valueOf!==me&&"function"==typeof t.valueOf?t.valueOf(t):t;if(null==i)return ye(i);switch(typeof i){case"boolean":return i?1108378657:1108378656;case"number":return function(e){if(e!=e||e===1/0)return 0;var t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return ge(t)}(i);case"string":return i.length>Oe?(void 0===(n=ke[r=i])&&(n=_e(r),Ne===xe&&(Ne=0,ke={}),Ne++,ke[r]=n),n):_e(i);case"object":case"function":return function(e){var t;if(Pe&&void 0!==(t=be.get(e)))return t;if(void 0!==(t=e[Ie]))return t;if(!we){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ie]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=Ee(),Pe)be.set(e,t);else{if(void 0!==Se&&!1===Se(e))throw new Error("Non-extensible objects are not allowed as keys.");if(we)Object.defineProperty(e,Ie,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ie]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ie]=t}}return t}(i);case"symbol":return function(e){var t=Te[e];return void 0!==t||(t=Ee(),Te[e]=t),t}(i);default:if("function"==typeof i.toString)return _e(i.toString());throw new Error("Value type "+typeof i+" cannot be hashed.")}}function ye(e){return null===e?1108378658:1108378659}function _e(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return ge(t)}var Se=Object.isExtensible,we=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function Ee(){var e=++Ce;return 1073741824&Ce&&(Ce=0),e}var be,Pe="function"==typeof WeakMap;Pe&&(be=new WeakMap);var Te=Object.create(null),Ce=0,Ie="__immutablehash__";"function"==typeof Symbol&&(Ie=Symbol(Ie));var Oe=16,xe=255,Ne=0,ke={},Ae=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=Fe(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var r=this,n=Le(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t,n){return e(t,n,r)}),t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(Y);Ae.prototype[D]=!0;var Re=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return t&&l(this),this._iter.__iterate((function(i){return e(i,t?r.size-++n:n++,r)}),t)},t.prototype.__iterator=function(e,t){var r=this,n=this._iter.__iterator(L,t),i=0;return t&&l(this),new $((function(){var o=n.next();return o.done?o:q(e,t?r.size-++i:i++,o.value,o)}))},t}(Z),De=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){return e(t,t,r)}),t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t);return new $((function(){var t=r.next();return t.done?t:q(e,t.value,t.value,t)}))},t}(ee),je=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){if(t){Ke(t);var n=_(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}}),t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t);return new $((function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){Ke(n);var i=_(n);return q(e,i?n.get(0):n[0],i?n.get(1):n[1],t)}}}))},t}(Y);function Me(e){var t=Je(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Qe,t.__iterateUncached=function(t,r){var n=this;return e.__iterate((function(e,r){return!1!==t(r,e,n)}),r)},t.__iteratorUncached=function(t,r){if(t===F){var n=e.__iterator(t,r);return new $((function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===L?M:L,r)},t}function Le(e,t,r){var n=Je(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,i){var o=e.get(n,a);return o===a?i:t.call(r,o,n,e)},n.__iterateUncached=function(n,i){var o=this;return e.__iterate((function(e,i,s){return!1!==n(t.call(r,e,i,s),i,o)}),i)},n.__iteratorUncached=function(n,i){var o=e.__iterator(F,i);return new $((function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return q(n,a,t.call(r,s[1],a,e),i)}))},n}function Fe(e,t){var r=this,n=Je(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Me(e);return t.reverse=function(){return e.flip()},t}),n.get=function(r,n){return e.get(t?r:-1-r,n)},n.has=function(r){return e.has(t?r:-1-r)},n.includes=function(t){return e.includes(t)},n.cacheResult=Qe,n.__iterate=function(r,n){var i=this,o=0;return n&&l(e),e.__iterate((function(e,s){return r(e,t?s:n?i.size-++o:o++,i)}),!n)},n.__iterator=function(n,i){var o=0;i&&l(e);var s=e.__iterator(F,!i);return new $((function(){var e=s.next();if(e.done)return e;var a=e.value;return q(n,t?a[0]:i?r.size-++o:o++,a[1],e)}))},n}function Ue(e,t,r,n){var i=Je(e);return n&&(i.has=function(n){var i=e.get(n,a);return i!==a&&!!t.call(r,i,n,e)},i.get=function(n,i){var o=e.get(n,a);return o!==a&&t.call(r,o,n,e)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return e.__iterate((function(e,o,c){if(t.call(r,e,o,c))return a++,i(e,n?o:a-1,s)}),o),a},i.__iteratorUncached=function(i,o){var s=e.__iterator(F,o),a=0;return new $((function(){for(;;){var o=s.next();if(o.done)return o;var c=o.value,u=c[0],l=c[1];if(t.call(r,l,u,e))return q(i,n?u:a++,l,o)}}))},i}function Be(e,t,r,n){var i=e.size;if(f(t,r,i))return e;var o=h(t,i),s=g(r,i);if(o!=o||s!=s)return Be(e.toSeq().cacheResult(),t,r,n);var a,c=s-o;c==c&&(a=c<0?0:c);var u=Je(e);return u.size=0===a?a:e.size&&a||void 0,!n&&N(e)&&a>=0&&(u.get=function(t,r){return(t=d(this,t))>=0&&t<a?e.get(t+o,r):r}),u.__iterateUncached=function(t,r){var i=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(t,r);var s=0,c=!0,u=0;return e.__iterate((function(e,r){if(!c||!(c=s++<o))return u++,!1!==t(e,n?r:u-1,i)&&u!==a})),u},u.__iteratorUncached=function(t,r){if(0!==a&&r)return this.cacheResult().__iterator(t,r);if(0===a)return new $(H);var i=e.__iterator(t,r),s=0,c=0;return new $((function(){for(;s++<o;)i.next();if(++c>a)return{value:void 0,done:!0};var e=i.next();return n||t===L||e.done?e:q(t,c-1,t===M?void 0:e.value[1],e)}))},u}function Ve(e,t,r,n){var i=Je(e);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,c=0;return e.__iterate((function(e,o,u){if(!a||!(a=t.call(r,e,o,u)))return c++,i(e,n?o:c-1,s)})),c},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=e.__iterator(F,o),c=!0,u=0;return new $((function(){var e,o,l;do{if((e=a.next()).done)return n||i===L?e:q(i,u++,i===M?void 0:e.value[1],e);var d=e.value;o=d[0],l=d[1],c&&(c=t.call(r,l,o,s))}while(c);return i===F?e:q(i,o,l,e)}))},i}function $e(e,t,r){var n=Je(e);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var s=0,a=!1;return function e(c,u){c.__iterate((function(o,c){return(!t||u<t)&&_(o)?e(o,u+1):(s++,!1===i(o,r?c:s-1,n)&&(a=!0)),!a}),o)}(e,0),s},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=e.__iterator(n,i),s=[],a=0;return new $((function(){for(;o;){var e=o.next();if(!1===e.done){var c=e.value;if(n===F&&(c=c[1]),t&&!(s.length<t)||!_(c))return r?e:q(n,a++,c,e);s.push(o),o=c.__iterator(n,i)}else o=s.pop()}return{value:void 0,done:!0}}))},n}function qe(e,t,r){t||(t=Ye);var n=w(e),i=0,o=e.toSeq().map((function(t,n){return[n,t,i++,r?r(t,n,e):t]})).valueSeq().toArray();return o.sort((function(e,r){return t(e[3],r[3])||e[2]-r[2]})).forEach(n?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),n?Y(o):b(e)?Z(o):ee(o)}function He(e,t,r){if(t||(t=Ye),r){var n=e.toSeq().map((function(t,n){return[t,r(t,n,e)]})).reduce((function(e,r){return ze(t,e[1],r[1])?r:e}));return n&&n[0]}return e.reduce((function(e,r){return ze(t,e,r)?r:e}))}function ze(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function We(e,t,r,n){var i=Je(e),o=new te(r).map((function(e){return e.size}));return i.size=n?o.max():o.min(),i.__iterate=function(e,t){for(var r,n=this.__iterator(L,t),i=0;!(r=n.next()).done&&!1!==e(r.value,i++,this););return i},i.__iteratorUncached=function(e,i){var o=r.map((function(e){return e=T(e),G(i?e.reverse():e)})),s=0,a=!1;return new $((function(){var r;return a||(r=o.map((function(e){return e.next()})),a=n?r.every((function(e){return e.done})):r.some((function(e){return e.done}))),a?{value:void 0,done:!0}:q(e,s++,t.apply(null,r.map((function(e){return e.value}))))}))},i}function Ge(e,t){return e===t?e:N(e)?t:e.constructor(t)}function Ke(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Xe(e){return w(e)?C:b(e)?I:O}function Je(e){return Object.create((w(e)?Y:b(e)?Z:ee).prototype)}function Qe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Q.prototype.cacheResult.call(this)}function Ye(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function Ze(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),i=0;i<r;i++)n[i]=e[i+t];return n}function et(e,t){if(!e)throw new Error(t)}function tt(e){et(e!==1/0,"Cannot perform this action with an infinite size.")}function rt(e){if(J(e)&&"string"!=typeof e)return e;if(j(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}Re.prototype.cacheResult=Ae.prototype.cacheResult=De.prototype.cacheResult=je.prototype.cacheResult=Qe;var nt=Object.prototype.toString;function it(e){if(!e||"object"!=typeof e||"[object Object]"!==nt.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t,n=Object.getPrototypeOf(t);null!==n;)r=n,n=Object.getPrototypeOf(r);return r===t}function ot(e){return"object"==typeof e&&(R(e)||Array.isArray(e)||it(e))}function st(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function at(e,t){return R(e)?e.has(t):ot(e)&&X.call(e,t)}function ct(e,t,r){return R(e)?e.get(t,r):at(e,t)?"function"==typeof e.get?e.get(t):e[t]:r}function ut(e){if(Array.isArray(e))return Ze(e);var t={};for(var r in e)X.call(e,r)&&(t[r]=e[r]);return t}function lt(e,t){if(!ot(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(R(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!X.call(e,t))return e;var r=ut(e);return Array.isArray(r)?r.splice(t,1):delete r[t],r}function dt(e,t,r){if(!ot(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(R(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,r)}if(X.call(e,t)&&r===e[t])return e;var n=ut(e);return n[t]=r,n}function pt(e,t,r,n){n||(n=r,r=void 0);var i=ft(R(e),e,rt(t),0,r,n);return i===a?r:i}function ft(e,t,r,n,i,o){var s=t===a;if(n===r.length){var c=s?i:t,u=o(c);return u===c?t:u}if(!s&&!ot(t))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(st)+"]: "+t);var l=r[n],d=s?a:ct(t,l,a),p=ft(d===a?e:R(d),d,r,n+1,i,o);return p===d?t:p===a?lt(t,l):dt(s?e?Jt():{}:t,l,p)}function ht(e,t,r){return pt(e,t,a,(function(){return r}))}function gt(e,t){return ht(this,e,t)}function mt(e,t){return pt(e,t,(function(){return a}))}function vt(e){return mt(this,e)}function yt(e,t,r,n){return pt(e,[t],r,n)}function _t(e,t,r){return 1===arguments.length?e(this):yt(this,e,t,r)}function St(e,t,r){return pt(this,e,t,r)}function wt(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return bt(this,e)}function Et(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return bt(this,t,e)}function bt(e,t,r){for(var n=[],i=0;i<t.length;i++){var o=C(t[i]);0!==o.size&&n.push(o)}return 0===n.length?e:0!==e.toSeq().size||e.__ownerID||1!==n.length?e.withMutations((function(e){for(var t=r?function(t,n){yt(e,n,a,(function(e){return e===a?t:r(e,t,n)}))}:function(t,r){e.set(r,t)},i=0;i<n.length;i++)n[i].forEach(t)})):e.constructor(n[0])}function Pt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return xt(e,t)}function Tt(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return xt(t,r,e)}function Ct(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Ot(e,t)}function It(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return Ot(t,r,e)}function Ot(e,t,r){return xt(e,t,function(e){return function t(r,n,i){return ot(r)&&ot(n)&&(o=n,s=Q(r),a=Q(o),b(s)===b(a)&&w(s)===w(a))?xt(r,[n],t):e?e(r,n,i):n;var o,s,a}}(r))}function xt(e,t,r){if(!ot(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(R(e))return"function"==typeof r&&e.mergeWith?e.mergeWith.apply(e,[r].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var n=Array.isArray(e),i=e,o=n?I:C,s=n?function(t){i===e&&(i=ut(i)),i.push(t)}:function(t,n){var o=X.call(i,n),s=o&&r?r(i[n],t,n):t;o&&s===i[n]||(i===e&&(i=ut(i)),i[n]=s)},a=0;a<t.length;a++)o(t[a]).forEach(s);return i}function Nt(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Ot(this,e)}function kt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Ot(this,t,e)}function At(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return pt(this,e,Jt(),(function(e){return xt(e,t)}))}function Rt(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return pt(this,e,Jt(),(function(e){return Ot(e,t)}))}function Dt(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function jt(){return this.__ownerID?this:this.__ensureOwner(new u)}function Mt(){return this.__ensureOwner()}function Lt(){return this.__altered}var Ft=function(e){function t(t){return null==t?Jt():le(t)&&!j(t)?t:Jt().withMutations((function(r){var n=e(t);tt(n.size),n.forEach((function(e,t){return r.set(t,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Jt().withMutations((function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}}))},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return Qt(this,e,t)},t.prototype.remove=function(e){return Qt(this,e,a)},t.prototype.deleteAll=function(e){var t=T(e);return 0===t.size?this:this.withMutations((function(e){t.forEach((function(t){return e.remove(t)}))}))},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Jt()},t.prototype.sort=function(e){return Er(qe(this,e))},t.prototype.sortBy=function(e,t){return Er(qe(this,t,e))},t.prototype.map=function(e,t){var r=this;return this.withMutations((function(n){n.forEach((function(i,o){n.set(o,e.call(t,i,o,r))}))}))},t.prototype.__iterator=function(e,t){return new Wt(this,e,t)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate((function(t){return n++,e(t[1],t[0],r)}),t),n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Xt(this.size,this._root,e,this.__hash):0===this.size?Jt():(this.__ownerID=e,this.__altered=!1,this)},t}(C);Ft.isMap=le;var Ut=Ft.prototype;Ut[ue]=!0,Ut[n]=Ut.remove,Ut.removeAll=Ut.deleteAll,Ut.setIn=gt,Ut.removeIn=Ut.deleteIn=vt,Ut.update=_t,Ut.updateIn=St,Ut.merge=Ut.concat=wt,Ut.mergeWith=Et,Ut.mergeDeep=Nt,Ut.mergeDeepWith=kt,Ut.mergeIn=At,Ut.mergeDeepIn=Rt,Ut.withMutations=Dt,Ut.wasAltered=Lt,Ut.asImmutable=Mt,Ut["@@transducer/init"]=Ut.asMutable=jt,Ut["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},Ut["@@transducer/result"]=function(e){return e.asImmutable()};var Bt=function(e,t){this.ownerID=e,this.entries=t};Bt.prototype.get=function(e,t,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(fe(r,i[o][0]))return i[o][1];return n},Bt.prototype.update=function(e,t,r,n,i,o,s){for(var l=i===a,d=this.entries,p=0,f=d.length;p<f&&!fe(n,d[p][0]);p++);var h=p<f;if(h?d[p][1]===i:l)return this;if(c(s),(l||!h)&&c(o),!l||1!==d.length){if(!h&&!l&&d.length>=nr)return function(e,t,r,n){e||(e=new u);for(var i=new Ht(e,ve(r),[r,n]),o=0;o<t.length;o++){var s=t[o];i=i.update(e,0,void 0,s[0],s[1])}return i}(e,d,n,i);var g=e&&e===this.ownerID,m=g?d:Ze(d);return h?l?p===f-1?m.pop():m[p]=m.pop():m[p]=[n,i]:m.push([n,i]),g?(this.entries=m,this):new Bt(e,m)}};var Vt=function(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r};Vt.prototype.get=function(e,t,r,n){void 0===t&&(t=ve(r));var o=1<<((0===e?t:t>>>e)&s),a=this.bitmap;return 0==(a&o)?n:this.nodes[tr(a&o-1)].get(e+i,t,r,n)},Vt.prototype.update=function(e,t,r,n,c,u,l){void 0===r&&(r=ve(n));var d=(0===t?r:r>>>t)&s,p=1<<d,f=this.bitmap,h=0!=(f&p);if(!h&&c===a)return this;var g=tr(f&p-1),m=this.nodes,v=h?m[g]:void 0,y=Yt(v,e,t+i,r,n,c,u,l);if(y===v)return this;if(!h&&y&&m.length>=ir)return function(e,t,r,n,i){for(var s=0,a=new Array(o),c=0;0!==r;c++,r>>>=1)a[c]=1&r?t[s++]:void 0;return a[n]=i,new $t(e,s+1,a)}(e,m,f,d,y);if(h&&!y&&2===m.length&&Zt(m[1^g]))return m[1^g];if(h&&y&&1===m.length&&Zt(y))return y;var _=e&&e===this.ownerID,S=h?y?f:f^p:f|p,w=h?y?rr(m,g,y,_):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var i=new Array(n),o=0,s=0;s<n;s++)s===t&&(o=1),i[s]=e[s+o];return i}(m,g,_):function(e,t,r,n){var i=e.length+1;if(n&&t+1===i)return e[t]=r,e;for(var o=new Array(i),s=0,a=0;a<i;a++)a===t?(o[a]=r,s=-1):o[a]=e[a+s];return o}(m,g,y,_);return _?(this.bitmap=S,this.nodes=w,this):new Vt(e,S,w)};var $t=function(e,t,r){this.ownerID=e,this.count=t,this.nodes=r};$t.prototype.get=function(e,t,r,n){void 0===t&&(t=ve(r));var o=(0===e?t:t>>>e)&s,a=this.nodes[o];return a?a.get(e+i,t,r,n):n},$t.prototype.update=function(e,t,r,n,o,c,u){void 0===r&&(r=ve(n));var l=(0===t?r:r>>>t)&s,d=o===a,p=this.nodes,f=p[l];if(d&&!f)return this;var h=Yt(f,e,t+i,r,n,o,c,u);if(h===f)return this;var g=this.count;if(f){if(!h&&--g<or)return function(e,t,r,n){for(var i=0,o=0,s=new Array(r),a=0,c=1,u=t.length;a<u;a++,c<<=1){var l=t[a];void 0!==l&&a!==n&&(i|=c,s[o++]=l)}return new Vt(e,i,s)}(e,p,g,l)}else g++;var m=e&&e===this.ownerID,v=rr(p,l,h,m);return m?(this.count=g,this.nodes=v,this):new $t(e,g,v)};var qt=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r};qt.prototype.get=function(e,t,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(fe(r,i[o][0]))return i[o][1];return n},qt.prototype.update=function(e,t,r,n,i,o,s){void 0===r&&(r=ve(n));var u=i===a;if(r!==this.keyHash)return u?this:(c(s),c(o),er(this,e,t,r,[n,i]));for(var l=this.entries,d=0,p=l.length;d<p&&!fe(n,l[d][0]);d++);var f=d<p;if(f?l[d][1]===i:u)return this;if(c(s),(u||!f)&&c(o),u&&2===p)return new Ht(e,this.keyHash,l[1^d]);var h=e&&e===this.ownerID,g=h?l:Ze(l);return f?u?d===p-1?g.pop():g[d]=g.pop():g[d]=[n,i]:g.push([n,i]),h?(this.entries=g,this):new qt(e,this.keyHash,g)};var Ht=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r};Ht.prototype.get=function(e,t,r,n){return fe(r,this.entry[0])?this.entry[1]:n},Ht.prototype.update=function(e,t,r,n,i,o,s){var u=i===a,l=fe(n,this.entry[0]);return(l?i===this.entry[1]:u)?this:(c(s),u?void c(o):l?e&&e===this.ownerID?(this.entry[1]=i,this):new Ht(e,this.keyHash,[n,i]):(c(o),er(this,e,t,ve(n),[n,i])))},Bt.prototype.iterate=qt.prototype.iterate=function(e,t){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===e(r[t?i-n:n]))return!1},Vt.prototype.iterate=$t.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[t?i-n:n];if(o&&!1===o.iterate(e,t))return!1}},Ht.prototype.iterate=function(e,t){return e(this.entry)};var zt,Wt=function(e){function t(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Kt(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,i=void 0;if(r.entry){if(0===n)return Gt(e,r.entry)}else if(r.entries){if(n<=(i=r.entries.length-1))return Gt(e,r.entries[this._reverse?i-n:n])}else if(n<=(i=r.nodes.length-1)){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return Gt(e,o.entry);t=this._stack=Kt(o,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}($);function Gt(e,t){return q(e,t[0],t[1])}function Kt(e,t){return{node:e,index:0,__prev:t}}function Xt(e,t,r,n){var i=Object.create(Ut);return i.size=e,i._root=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Jt(){return zt||(zt=Xt(0))}function Qt(e,t,r){var n,i;if(e._root){var o={value:!1},s={value:!1};if(n=Yt(e._root,e.__ownerID,0,void 0,t,r,o,s),!s.value)return e;i=e.size+(o.value?r===a?-1:1:0)}else{if(r===a)return e;i=1,n=new Bt(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=i,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?Xt(i,n):Jt()}function Yt(e,t,r,n,i,o,s,u){return e?e.update(t,r,n,i,o,s,u):o===a?e:(c(u),c(s),new Ht(t,n,[i,o]))}function Zt(e){return e.constructor===Ht||e.constructor===qt}function er(e,t,r,n,o){if(e.keyHash===n)return new qt(t,n,[e.entry,o]);var a,c=(0===r?e.keyHash:e.keyHash>>>r)&s,u=(0===r?n:n>>>r)&s,l=c===u?[er(e,t,r+i,n,o)]:(a=new Ht(t,n,o),c<u?[e,a]:[a,e]);return new Vt(t,1<<c|1<<u,l)}function tr(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,127&(e+=e>>8)+(e>>16)}function rr(e,t,r,n){var i=n?e:Ze(e);return i[t]=r,i}var nr=o/4,ir=o/2,or=o/4,sr="@@__IMMUTABLE_LIST__@@";function ar(e){return Boolean(e&&e[sr])}var cr=function(e){function t(t){var r=gr();if(null==t)return r;if(ar(t))return t;var n=e(t),s=n.size;return 0===s?r:(tt(s),s>0&&s<o?hr(0,s,i,null,new lr(n.toArray())):r.withMutations((function(e){e.setSize(s),n.forEach((function(t,r){return e.set(r,t)}))})))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=d(this,e))>=0&&e<this.size){var r=yr(this,e+=this._origin);return r&&r.array[e&s]}return t},t.prototype.set=function(e,t){return function(e,t,r){if((t=d(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?_r(e,t).set(0,r):_r(e,0,t+1).set(t,r)}));t+=e._origin;var n=e._tail,i=e._root,o={value:!1};return t>=Sr(e._capacity)?n=mr(n,e.__ownerID,0,t,r,o):i=mr(i,e.__ownerID,e._level,t,r,o),o.value?e.__ownerID?(e._root=i,e._tail=n,e.__hash=void 0,e.__altered=!0,e):hr(e._origin,e._capacity,e._level,i,n):e}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=i,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):gr()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(r){_r(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])}))},t.prototype.pop=function(){return _r(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){_r(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])}))},t.prototype.shift=function(){return _r(this,1)},t.prototype.concat=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++){var i=t[n],o=e("string"!=typeof i&&z(i)?i:[i]);0!==o.size&&r.push(o)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(e){r.forEach((function(t){return t.forEach((function(t){return e.push(t)}))}))})):this.constructor(r[0])},t.prototype.setSize=function(e){return _r(this,0,e)},t.prototype.map=function(e,t){var r=this;return this.withMutations((function(n){for(var i=0;i<r.size;i++)n.set(i,e.call(t,n.get(i),i,r))}))},t.prototype.slice=function(e,t){var r=this.size;return f(e,t,r)?this:_r(this,h(e,r),g(t,r))},t.prototype.__iterator=function(e,t){var r=t?this.size:0,n=fr(this,t);return new $((function(){var i=n();return i===pr?{value:void 0,done:!0}:q(e,t?--r:r++,i)}))},t.prototype.__iterate=function(e,t){for(var r,n=t?this.size:0,i=fr(this,t);(r=i())!==pr&&!1!==e(r,t?--n:n++,this););return n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?hr(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?gr():(this.__ownerID=e,this.__altered=!1,this)},t}(I);cr.isList=ar;var ur=cr.prototype;ur[sr]=!0,ur[n]=ur.remove,ur.merge=ur.concat,ur.setIn=gt,ur.deleteIn=ur.removeIn=vt,ur.update=_t,ur.updateIn=St,ur.mergeIn=At,ur.mergeDeepIn=Rt,ur.withMutations=Dt,ur.wasAltered=Lt,ur.asImmutable=Mt,ur["@@transducer/init"]=ur.asMutable=jt,ur["@@transducer/step"]=function(e,t){return e.push(t)},ur["@@transducer/result"]=function(e){return e.asImmutable()};var lr=function(e,t){this.array=e,this.ownerID=t};lr.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&s;if(n>=this.array.length)return new lr([],e);var o,a=0===n;if(t>0){var c=this.array[n];if((o=c&&c.removeBefore(e,t-i,r))===c&&a)return this}if(a&&!o)return this;var u=vr(this,e);if(!a)for(var l=0;l<n;l++)u.array[l]=void 0;return o&&(u.array[n]=o),u},lr.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,o=r-1>>>t&s;if(o>=this.array.length)return this;if(t>0){var a=this.array[o];if((n=a&&a.removeAfter(e,t-i,r))===a&&o===this.array.length-1)return this}var c=vr(this,e);return c.array.splice(o+1),n&&(c.array[o]=n),c};var dr,pr={};function fr(e,t){var r=e._origin,n=e._capacity,s=Sr(n),a=e._tail;return function e(c,u,l){return 0===u?function(e,i){var c=i===s?a&&a.array:e&&e.array,u=i>r?0:r-i,l=n-i;return l>o&&(l=o),function(){if(u===l)return pr;var e=t?--l:u++;return c&&c[e]}}(c,l):function(s,a,c){var u,l=s&&s.array,d=c>r?0:r-c>>a,p=1+(n-c>>a);return p>o&&(p=o),function(){for(;;){if(u){var r=u();if(r!==pr)return r;u=null}if(d===p)return pr;var n=t?--p:d++;u=e(l&&l[n],a-i,c+(n<<a))}}}(c,u,l)}(e._root,e._level,0)}function hr(e,t,r,n,i,o,s){var a=Object.create(ur);return a.size=t-e,a._origin=e,a._capacity=t,a._level=r,a._root=n,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function gr(){return dr||(dr=hr(0,0,i))}function mr(e,t,r,n,o,a){var u,l=n>>>r&s,d=e&&l<e.array.length;if(!d&&void 0===o)return e;if(r>0){var p=e&&e.array[l],f=mr(p,t,r-i,n,o,a);return f===p?e:((u=vr(e,t)).array[l]=f,u)}return d&&e.array[l]===o?e:(a&&c(a),u=vr(e,t),void 0===o&&l===u.array.length-1?u.array.pop():u.array[l]=o,u)}function vr(e,t){return t&&e&&t===e.ownerID?e:new lr(e?e.array.slice():[],t)}function yr(e,t){if(t>=Sr(e._capacity))return e._tail;if(t<1<<e._level+i){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&s],n-=i;return r}}function _r(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new u,o=e._origin,a=e._capacity,c=o+t,l=void 0===r?a:r<0?a+r:o+r;if(c===o&&l===a)return e;if(c>=l)return e.clear();for(var d=e._level,p=e._root,f=0;c+f<0;)p=new lr(p&&p.array.length?[void 0,p]:[],n),f+=1<<(d+=i);f&&(c+=f,o+=f,l+=f,a+=f);for(var h=Sr(a),g=Sr(l);g>=1<<d+i;)p=new lr(p&&p.array.length?[p]:[],n),d+=i;var m=e._tail,v=g<h?yr(e,l-1):g>h?new lr([],n):m;if(m&&g>h&&c<a&&m.array.length){for(var y=p=vr(p,n),_=d;_>i;_-=i){var S=h>>>_&s;y=y.array[S]=vr(y.array[S],n)}y.array[h>>>i&s]=m}if(l<a&&(v=v&&v.removeAfter(n,0,l)),c>=g)c-=g,l-=g,d=i,p=null,v=v&&v.removeBefore(n,0,c);else if(c>o||g<h){for(f=0;p;){var w=c>>>d&s;if(w!==g>>>d&s)break;w&&(f+=(1<<d)*w),d-=i,p=p.array[w]}p&&c>o&&(p=p.removeBefore(n,d,c-f)),p&&g<h&&(p=p.removeAfter(n,d,g-f)),f&&(c-=f,l-=f)}return e.__ownerID?(e.size=l-c,e._origin=c,e._capacity=l,e._level=d,e._root=p,e._tail=v,e.__hash=void 0,e.__altered=!0,e):hr(c,l,d,p,v)}function Sr(e){return e<o?0:e-1>>>i<<i}var wr,Er=function(e){function t(e){return null==e?Pr():de(e)?e:Pr().withMutations((function(t){var r=C(e);tt(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Pr()},t.prototype.set=function(e,t){return Tr(this,e,t)},t.prototype.remove=function(e){return Tr(this,e,a)},t.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],r)}),t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?br(t,r,e,this.__hash):0===this.size?Pr():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=r,this)},t}(Ft);function br(e,t,r,n){var i=Object.create(Er.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Pr(){return wr||(wr=br(Jt(),gr()))}function Tr(e,t,r){var n,i,s=e._map,c=e._list,u=s.get(t),l=void 0!==u;if(r===a){if(!l)return e;c.size>=o&&c.size>=2*s.size?(n=(i=c.filter((function(e,t){return void 0!==e&&u!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(n.__ownerID=i.__ownerID=e.__ownerID)):(n=s.remove(t),i=u===c.size-1?c.pop():c.set(u,void 0))}else if(l){if(r===c.get(u)[1])return e;n=s,i=c.set(u,[t,r])}else n=s.set(t,c.size),i=c.set(c.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=i,e.__hash=void 0,e.__altered=!0,e):br(n,i)}Er.isOrderedMap=de,Er.prototype[D]=!0,Er.prototype[n]=Er.prototype.remove;var Cr="@@__IMMUTABLE_STACK__@@";function Ir(e){return Boolean(e&&e[Cr])}var Or=function(e){function t(e){return null==e?Ar():Ir(e)?e:Ar().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var r=this._head;for(e=d(this,e);r&&e--;)r=r.next;return r?r.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:e[n],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):kr(t,r)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&Ir(t))return t;tt(t.size);var r=this.size,n=this._head;return t.__iterate((function(e){r++,n={value:e,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):kr(r,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ar()},t.prototype.slice=function(t,r){if(f(t,r,this.size))return this;var n=h(t,this.size);if(g(r,this.size)!==this.size)return e.prototype.slice.call(this,t,r);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):kr(i,o)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?kr(this.size,this._head,e,this.__hash):0===this.size?Ar():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var r=this;if(t)return new te(this.toArray()).__iterate((function(t,n){return e(t,n,r)}),t);for(var n=0,i=this._head;i&&!1!==e(i.value,n++,this);)i=i.next;return n},t.prototype.__iterator=function(e,t){if(t)return new te(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new $((function(){if(n){var t=n.value;return n=n.next,q(e,r++,t)}return{value:void 0,done:!0}}))},t}(I);Or.isStack=Ir;var xr,Nr=Or.prototype;function kr(e,t,r,n){var i=Object.create(Nr);return i.size=e,i._head=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Ar(){return xr||(xr=kr(0))}Nr[Cr]=!0,Nr.shift=Nr.pop,Nr.unshift=Nr.push,Nr.unshiftAll=Nr.pushAll,Nr.withMutations=Dt,Nr.wasAltered=Lt,Nr.asImmutable=Mt,Nr["@@transducer/init"]=Nr.asMutable=jt,Nr["@@transducer/step"]=function(e,t){return e.unshift(t)},Nr["@@transducer/result"]=function(e){return e.asImmutable()};var Rr="@@__IMMUTABLE_SET__@@";function Dr(e){return Boolean(e&&e[Rr])}function jr(e){return Dr(e)&&j(e)}function Mr(e,t){if(e===t)return!0;if(!_(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||w(e)!==w(t)||b(e)!==b(t)||j(e)!==j(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!P(e);if(j(e)){var n=e.entries();return t.every((function(e,t){var i=n.next().value;return i&&fe(i[1],e)&&(r||fe(i[0],t))}))&&n.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var o=e;e=t,t=o}var s=!0,c=t.__iterate((function(t,n){if(r?!e.has(t):i?!fe(t,e.get(n,a)):!fe(e.get(n,a),t))return s=!1,!1}));return s&&e.size===c}function Lr(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function Fr(e){if(!e||"object"!=typeof e)return e;if(!_(e)){if(!ot(e))return e;e=Q(e)}if(w(e)){var t={};return e.__iterate((function(e,r){t[r]=Fr(e)})),t}var r=[];return e.__iterate((function(e){r.push(Fr(e))})),r}var Ur=function(e){function t(t){return null==t?Hr():Dr(t)&&!j(t)?t:Hr().withMutations((function(r){var n=e(t);tt(n.size),n.forEach((function(e){return r.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(C(e).keySeq())},t.intersect=function(e){return(e=T(e).toArray()).length?Vr.intersect.apply(t(e.pop()),e):Hr()},t.union=function(e){return(e=T(e).toArray()).length?Vr.union.apply(t(e.pop()),e):Hr()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return $r(this,this._map.set(e,e))},t.prototype.remove=function(e){return $r(this,this._map.remove(e))},t.prototype.clear=function(){return $r(this,this._map.clear())},t.prototype.map=function(e,t){var r=this,n=!1,i=$r(this,this._map.mapEntries((function(i){var o=i[1],s=e.call(t,o,o,r);return s!==o&&(n=!0),[s,s]}),t));return n?i:this},t.prototype.union=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(r){for(var n=0;n<t.length;n++)"string"==typeof t[n]?r.add(t[n]):e(t[n]).forEach((function(e){return r.add(e)}))})):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var n=[];return this.forEach((function(e){t.every((function(t){return t.includes(e)}))||n.push(e)})),this.withMutations((function(e){n.forEach((function(t){e.remove(t)}))}))},t.prototype.subtract=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map((function(t){return e(t)}));var n=[];return this.forEach((function(e){t.some((function(t){return t.includes(e)}))&&n.push(e)})),this.withMutations((function(e){n.forEach((function(t){e.remove(t)}))}))},t.prototype.sort=function(e){return ln(qe(this,e))},t.prototype.sortBy=function(e,t){return ln(qe(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate((function(t){return e(t,t,r)}),t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(O);Ur.isSet=Dr;var Br,Vr=Ur.prototype;function $r(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function qr(e,t){var r=Object.create(Vr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Hr(){return Br||(Br=qr(Jt()))}Vr[Rr]=!0,Vr[n]=Vr.remove,Vr.merge=Vr.concat=Vr.union,Vr.withMutations=Dt,Vr.asImmutable=Mt,Vr["@@transducer/init"]=Vr.asMutable=jt,Vr["@@transducer/step"]=function(e,t){return e.add(t)},Vr["@@transducer/result"]=function(e){return e.asImmutable()},Vr.__empty=Hr,Vr.__make=qr;var zr,Wr=function(e){function t(e,r,n){if(!(this instanceof t))return new t(e,r,n);if(et(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<e&&(n=-n),this._start=e,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-e)/n-1)+1),0===this.size){if(zr)return zr;zr=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+d(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,r){return f(e,r,this.size)?this:(e=h(e,this.size),(r=g(r,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(r,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var r=this.size,n=this._step,i=t?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==e(i,t?r-++o:o++,this);)i+=t?-n:n;return o},t.prototype.__iterator=function(e,t){var r=this.size,n=this._step,i=t?this._start+(r-1)*n:this._start,o=0;return new $((function(){if(o===r)return{value:void 0,done:!0};var s=i;return i+=t?-n:n,q(e,t?r-++o:o++,s)}))},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:Mr(this,e)},t}(Z);function Gr(e,t,r){for(var n=rt(t),i=0;i!==n.length;)if((e=ct(e,n[i++],a))===a)return r;return e}function Kr(e,t){return Gr(this,e,t)}function Xr(e,t){return Gr(e,t,a)!==a}function Jr(){tt(this.size);var e={};return this.__iterate((function(t,r){e[r]=t})),e}T.isIterable=_,T.isKeyed=w,T.isIndexed=b,T.isAssociative=P,T.isOrdered=j,T.Iterator=$,Lr(T,{toArray:function(){tt(this.size);var e=new Array(this.size||0),t=w(this),r=0;return this.__iterate((function(n,i){e[r++]=t?[i,n]:n})),e},toIndexedSeq:function(){return new Re(this)},toJS:function(){return Fr(this)},toKeyedSeq:function(){return new Ae(this,!0)},toMap:function(){return Ft(this.toKeyedSeq())},toObject:Jr,toOrderedMap:function(){return Er(this.toKeyedSeq())},toOrderedSet:function(){return ln(w(this)?this.valueSeq():this)},toSet:function(){return Ur(w(this)?this.valueSeq():this)},toSetSeq:function(){return new De(this)},toSeq:function(){return b(this)?this.toIndexedSeq():w(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Or(w(this)?this.valueSeq():this)},toList:function(){return cr(w(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Ge(this,function(e,t){var r=w(e),n=[e].concat(t).map((function(e){return _(e)?r&&(e=C(e)):e=r?se(e):ae(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===n.length)return e;if(1===n.length){var i=n[0];if(i===e||r&&w(i)||b(e)&&b(i))return i}var o=new te(n);return r?o=o.toKeyedSeq():b(e)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce((function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}}),0),o}(this,e))},includes:function(e){return this.some((function(t){return fe(t,e)}))},entries:function(){return this.__iterator(F)},every:function(e,t){tt(this.size);var r=!0;return this.__iterate((function(n,i,o){if(!e.call(t,n,i,o))return r=!1,!1})),r},filter:function(e,t){return Ge(this,Ue(this,e,t,!0))},partition:function(e,t){return function(e,t,r){var n=w(e),i=[[],[]];e.__iterate((function(o,s){i[t.call(r,o,s,e)?1:0].push(n?[s,o]:o)}));var o=Xe(e);return i.map((function(t){return Ge(e,o(t))}))}(this,e,t)},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return tt(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){tt(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate((function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""})),t},keys:function(){return this.__iterator(M)},map:function(e,t){return Ge(this,Le(this,e,t))},reduce:function(e,t,r){return tn(this,e,t,r,arguments.length<2,!1)},reduceRight:function(e,t,r){return tn(this,e,t,r,arguments.length<2,!0)},reverse:function(){return Ge(this,Fe(this,!0))},slice:function(e,t){return Ge(this,Be(this,e,t,!0))},some:function(e,t){tt(this.size);var r=!1;return this.__iterate((function(n,i,o){if(e.call(t,n,i,o))return r=!0,!1})),r},sort:function(e){return Ge(this,qe(this,e))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return l(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=Ft().asMutable();return e.__iterate((function(i,o){n.update(t.call(r,i,o,e),0,(function(e){return e+1}))})),n.asImmutable()}(this,e,t)},equals:function(e){return Mr(this,e)},entrySeq:function(){var e=this;if(e._cache)return new te(e._cache);var t=e.toSeq().map(nn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(on(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate((function(r,i,o){if(e.call(t,r,i,o))return n=[i,r],!1})),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(p,null,e)},flatMap:function(e,t){return Ge(this,function(e,t,r){var n=Xe(e);return e.toSeq().map((function(i,o){return n(t.call(r,i,o,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return Ge(this,$e(this,e,!0))},fromEntrySeq:function(){return new je(this)},get:function(e,t){return this.find((function(t,r){return fe(r,e)}),void 0,t)},getIn:Kr,groupBy:function(e,t){return function(e,t,r){var n=w(e),i=(j(e)?Er():Ft()).asMutable();e.__iterate((function(o,s){i.update(t.call(r,o,s,e),(function(e){return(e=e||[]).push(n?[s,o]:o),e}))}));var o=Xe(e);return i.map((function(t){return Ge(e,o(t))})).asImmutable()}(this,e,t)},has:function(e){return this.get(e,a)!==a},hasIn:function(e){return Xr(this,e)},isSubset:function(e){return e="function"==typeof e.includes?e:T(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:T(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return fe(t,e)}))},keySeq:function(){return this.toSeq().map(rn).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return He(this,e)},maxBy:function(e,t){return He(this,t,e)},min:function(e){return He(this,e?sn(e):cn)},minBy:function(e,t){return He(this,t?sn(t):cn,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return Ge(this,Ve(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(on(e),t)},sortBy:function(e,t){return Ge(this,qe(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return Ge(this,function(e,t,r){var n=Je(e);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var s=0;return e.__iterate((function(e,i,a){return t.call(r,e,i,a)&&++s&&n(e,i,o)})),s},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var s=e.__iterator(F,i),a=!0;return new $((function(){if(!a)return{value:void 0,done:!0};var e=s.next();if(e.done)return e;var i=e.value,c=i[0],u=i[1];return t.call(r,u,c,o)?n===F?e:q(n,c,u,e):(a=!1,{value:void 0,done:!0})}))},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(on(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=j(e),r=w(e),n=t?1:0;return function(e,t){return t=he(t,3432918353),t=he(t<<15|t>>>-15,461845907),t=he(t<<13|t>>>-13,5),t=he((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=ge((t=he(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(r?t?function(e,t){n=31*n+un(ve(e),ve(t))|0}:function(e,t){n=n+un(ve(e),ve(t))|0}:t?function(e){n=31*n+ve(e)|0}:function(e){n=n+ve(e)|0}),n)}(this))}});var Qr=T.prototype;Qr[y]=!0,Qr[V]=Qr.values,Qr.toJSON=Qr.toArray,Qr.__toStringMapper=st,Qr.inspect=Qr.toSource=function(){return this.toString()},Qr.chain=Qr.flatMap,Qr.contains=Qr.includes,Lr(C,{flip:function(){return Ge(this,Me(this))},mapEntries:function(e,t){var r=this,n=0;return Ge(this,this.toSeq().map((function(i,o){return e.call(t,[o,i],n++,r)})).fromEntrySeq())},mapKeys:function(e,t){var r=this;return Ge(this,this.toSeq().flip().map((function(n,i){return e.call(t,n,i,r)})).flip())}});var Yr=C.prototype;Yr[S]=!0,Yr[V]=Qr.entries,Yr.toJSON=Jr,Yr.__toStringMapper=function(e,t){return st(t)+": "+st(e)},Lr(I,{toKeyedSeq:function(){return new Ae(this,!1)},filter:function(e,t){return Ge(this,Ue(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Ge(this,Fe(this,!1))},slice:function(e,t){return Ge(this,Be(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(t||0,0),0===r||2===r&&!t)return this;e=h(e,e<0?this.count():this.size);var n=this.slice(0,e);return Ge(this,1===r?n:n.concat(Ze(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Ge(this,$e(this,e,!1))},get:function(e,t){return(e=d(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,r){return r===e}),void 0,t)},has:function(e){return(e=d(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Ge(this,function(e,t){var r=Je(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return e.__iterate((function(e){return(!o||!1!==r(t,o++,i))&&!1!==r(e,o++,i)}),n),o},r.__iteratorUncached=function(r,n){var i,o=e.__iterator(L,n),s=0;return new $((function(){return(!i||s%2)&&(i=o.next()).done?i:s%2?q(r,s++,t):q(r,s++,i.value,i)}))},r}(this,e))},interleave:function(){var e=[this].concat(Ze(arguments)),t=We(this.toSeq(),Z.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),Ge(this,r)},keySeq:function(){return Wr(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return Ge(this,Ve(this,e,t,!1))},zip:function(){return Ge(this,We(this,an,[this].concat(Ze(arguments))))},zipAll:function(){return Ge(this,We(this,an,[this].concat(Ze(arguments)),!0))},zipWith:function(e){var t=Ze(arguments);return t[0]=this,Ge(this,We(this,e,t))}});var Zr=I.prototype;Zr[E]=!0,Zr[D]=!0,Lr(O,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var en=O.prototype;function tn(e,t,r,n,i,o){return tt(e.size),e.__iterate((function(e,o,s){i?(i=!1,r=e):r=t.call(n,r,e,o,s)}),o),r}function rn(e,t){return t}function nn(e,t){return[t,e]}function on(e){return function(){return!e.apply(this,arguments)}}function sn(e){return function(){return-e.apply(this,arguments)}}function an(){return Ze(arguments)}function cn(e,t){return e<t?1:e>t?-1:0}function un(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}en.has=Qr.includes,en.contains=en.includes,en.keys=en.values,Lr(Y,Yr),Lr(Z,Zr),Lr(ee,en);var ln=function(e){function t(e){return null==e?hn():jr(e)?e:hn().withMutations((function(t){var r=O(e);tt(r.size),r.forEach((function(e){return t.add(e)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(C(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(Ur);ln.isOrderedSet=jr;var dn,pn=ln.prototype;function fn(e,t){var r=Object.create(pn);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function hn(){return dn||(dn=fn(Pr()))}pn[D]=!0,pn.zip=Zr.zip,pn.zipWith=Zr.zipWith,pn.zipAll=Zr.zipAll,pn.__empty=hn,pn.__make=fn;var gn={LeftThenRight:-1,RightThenLeft:1},mn=function(e,t){var r;!function(e){if(A(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(R(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!=typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var n=function(o){var s=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var a=Object.keys(e),c=i._indices={};i._name=t,i._keys=a,i._defaultValues=e;for(var u=0;u<a.length;u++){var l=a[u];c[l]=u,i[l]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+_n(this)+' with property "'+l+'" since that property name is part of the Record API.'):wn(i,l)}}return this.__ownerID=void 0,this._values=cr().withMutations((function(e){e.setSize(s._keys.length),C(o).forEach((function(t,r){e.set(s._indices[r],t===s._defaultValues[r]?void 0:t)}))})),this},i=n.prototype=Object.create(vn);return i.constructor=n,t&&(n.displayName=t),n};mn.prototype.toString=function(){for(var e,t=_n(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)t+=(n?", ":"")+(e=r[n])+": "+st(this.get(e));return t+" }"},mn.prototype.equals=function(e){return this===e||A(e)&&Sn(this).equals(Sn(e))},mn.prototype.hashCode=function(){return Sn(this).hashCode()},mn.prototype.has=function(e){return this._indices.hasOwnProperty(e)},mn.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._indices[e],n=this._values.get(r);return void 0===n?this._defaultValues[e]:n},mn.prototype.set=function(e,t){if(this.has(e)){var r=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(r!==this._values&&!this.__ownerID)return yn(this,r)}return this},mn.prototype.remove=function(e){return this.set(e)},mn.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:yn(this,e)},mn.prototype.wasAltered=function(){return this._values.wasAltered()},mn.prototype.toSeq=function(){return Sn(this)},mn.prototype.toJS=function(){return Fr(this)},mn.prototype.entries=function(){return this.__iterator(F)},mn.prototype.__iterator=function(e,t){return Sn(this).__iterator(e,t)},mn.prototype.__iterate=function(e,t){return Sn(this).__iterate(e,t)},mn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?yn(this,t,e):(this.__ownerID=e,this._values=t,this)},mn.isRecord=A,mn.getDescriptiveName=_n;var vn=mn.prototype;function yn(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._values=t,n.__ownerID=r,n}function _n(e){return e.constructor.displayName||e.constructor.name||"Record"}function Sn(e){return se(e._keys.map((function(t){return[t,e.get(t)]})))}function wn(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){et(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}vn[k]=!0,vn[n]=vn.remove,vn.deleteIn=vn.removeIn=vt,vn.getIn=Kr,vn.hasIn=Qr.hasIn,vn.merge=wt,vn.mergeWith=Et,vn.mergeIn=At,vn.mergeDeep=Nt,vn.mergeDeepWith=kt,vn.mergeDeepIn=Rt,vn.setIn=gt,vn.update=_t,vn.updateIn=St,vn.withMutations=Dt,vn.asMutable=jt,vn.asImmutable=Mt,vn[V]=vn.entries,vn.toJSON=vn.toObject=Qr.toObject,vn.inspect=vn.toSource=function(){return this.toString()};var En,bn=function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this._value=e,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(En)return En;En=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(e,t){return this.has(e)?this._value:t},t.prototype.includes=function(e){return fe(this._value,e)},t.prototype.slice=function(e,r){var n=this.size;return f(e,r,n)?this:new t(this._value,g(r,n)-h(e,n))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(e){return fe(this._value,e)?0:-1},t.prototype.lastIndexOf=function(e){return fe(this._value,e)?this.size:-1},t.prototype.__iterate=function(e,t){for(var r=this.size,n=0;n!==r&&!1!==e(this._value,t?r-++n:n++,this););return n},t.prototype.__iterator=function(e,t){var r=this,n=this.size,i=0;return new $((function(){return i===n?{value:void 0,done:!0}:q(e,t?n-++i:i++,r._value)}))},t.prototype.equals=function(e){return e instanceof t?fe(this._value,e._value):Mr(e)},t}(Z);function Pn(e,t){return Tn([],t||Cn,e,"",t&&t.length>2?[]:void 0,{"":e})}function Tn(e,t,r,n,i,o){if("string"!=typeof r&&!R(r)&&(J(r)||z(r)||it(r))){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),i&&""!==n&&i.push(n);var s=t.call(o,n,Q(r).map((function(n,o){return Tn(e,t,n,o,i,r)})),i&&i.slice());return e.pop(),i&&i.pop(),s}return r}function Cn(e,t){return b(t)?t.toList():w(t)?t.toMap():t.toSet()}var In="4.3.4",On=T;const xn={version:In,Collection:T,Iterable:T,Seq:Q,Map:Ft,OrderedMap:Er,List:cr,Stack:Or,Set:Ur,OrderedSet:ln,PairSorting:gn,Record:mn,Range:Wr,Repeat:bn,is:fe,fromJS:Pn,hash:ve,isImmutable:R,isCollection:_,isKeyed:w,isIndexed:b,isAssociative:P,isOrdered:j,isValueObject:pe,isPlainObject:it,isSeq:N,isList:ar,isMap:le,isOrderedMap:de,isStack:Ir,isSet:Dr,isOrderedSet:jr,isRecord:A,get:ct,getIn:Gr,has:at,hasIn:Xr,merge:Pt,mergeDeep:Ct,mergeWith:Tt,mergeDeepWith:It,remove:lt,removeIn:mt,set:dt,setIn:ht,update:yt,updateIn:pt}},61166:function(e,t){!function(e){var t,r="undefined",n=r!==typeof Buffer&&Buffer,i=r!==typeof Uint8Array&&Uint8Array,o=r!==typeof ArrayBuffer&&ArrayBuffer,s=[0,0,0,0,0,0,0,0],a=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},c=4294967296;function u(a,u,S){var w=u?0:4,E=u?4:0,b=u?0:3,P=u?1:2,T=u?2:1,C=u?3:0,I=u?m:y,O=u?v:_,x=A.prototype,N="is"+a,k="_"+N;return x.buffer=void 0,x.offset=0,x[k]=!0,x.toNumber=R,x.toString=function(e){var t=this.buffer,r=this.offset,n=j(t,r+w),i=j(t,r+E),o="",s=!S&&2147483648&n;for(s&&(n=~n,i=c-i),e=e||10;;){var a=n%e*c+i;if(n=Math.floor(n/e),i=Math.floor(a/e),o=(a%e).toString(e)+o,!n&&!i)break}return s&&(o="-"+o),o},x.toJSON=R,x.toArray=l,n&&(x.toBuffer=d),i&&(x.toArrayBuffer=p),A[N]=function(e){return!(!e||!e[k])},e[a]=A,A;function A(e,n,a,u){return this instanceof A?function(e,n,a,u,l){i&&o&&(n instanceof o&&(n=new i(n)),u instanceof o&&(u=new i(u))),n||a||u||t?(f(n,a)||(l=a,u=n,a=0,n=new(t||Array)(8)),e.buffer=n,e.offset=a|=0,r!==typeof u&&("string"==typeof u?function(e,t,r,n){var i=0,o=r.length,s=0,a=0;"-"===r[0]&&i++;for(var u=i;i<o;){var l=parseInt(r[i++],n);if(!(l>=0))break;a=a*n+l,s=s*n+Math.floor(a/c),a%=c}u&&(s=~s,a?a=c-a:s++),D(e,t+w,s),D(e,t+E,a)}(n,a,u,l||10):f(u,l)?h(n,a,u,l):"number"==typeof l?(D(n,a+w,u),D(n,a+E,l)):u>0?I(n,a,u):u<0?O(n,a,u):h(n,a,s,0))):e.buffer=g(s,0)}(this,e,n,a,u):new A(e,n,a,u)}function R(){var e=this.buffer,t=this.offset,r=j(e,t+w),n=j(e,t+E);return S||(r|=0),r?r*c+n:n}function D(e,t,r){e[t+C]=255&r,r>>=8,e[t+T]=255&r,r>>=8,e[t+P]=255&r,r>>=8,e[t+b]=255&r}function j(e,t){return 16777216*e[t+b]+(e[t+P]<<16)+(e[t+T]<<8)+e[t+C]}}function l(e){var r=this.buffer,n=this.offset;return t=null,!1!==e&&0===n&&8===r.length&&a(r)?r:g(r,n)}function d(e){var r=this.buffer,i=this.offset;if(t=n,!1!==e&&0===i&&8===r.length&&Buffer.isBuffer(r))return r;var o=new n(8);return h(o,0,r,i),o}function p(e){var r=this.buffer,n=this.offset,s=r.buffer;if(t=i,!1!==e&&0===n&&s instanceof o&&8===s.byteLength)return s;var a=new i(8);return h(a,0,r,n),a.buffer}function f(e,t){var r=e&&e.length;return t|=0,r&&t+8<=r&&"string"!=typeof e[t]}function h(e,t,r,n){t|=0,n|=0;for(var i=0;i<8;i++)e[t++]=255&r[n++]}function g(e,t){return Array.prototype.slice.call(e,t,t+8)}function m(e,t,r){for(var n=t+8;n>t;)e[--n]=255&r,r/=256}function v(e,t,r){var n=t+8;for(r++;n>t;)e[--n]=255&-r^255,r/=256}function y(e,t,r){for(var n=t+8;t<n;)e[t++]=255&r,r/=256}function _(e,t,r){var n=t+8;for(r++;t<n;)e[t++]=255&-r^255,r/=256}u("Uint64BE",!0,!0),u("Int64BE",!0,!1),u("Uint64LE",!1,!0),u("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})},96813:(e,t,r)=>{let n;try{n=r(20077)}catch(e){n=r(57147)}const i=r(38981),{stringify:o,stripBom:s}=r(96780),a={readFile:i.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,o=!("throws"in t)||t.throws;let a,c=await i.fromCallback(r.readFile)(e,t);c=s(c);try{a=JSON.parse(c,t?t.reviver:null)}catch(t){if(o)throw t.message=`${e}: ${t.message}`,t;return null}return a})),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,i=!("throws"in t)||t.throws;try{let n=r.readFileSync(e,t);return n=s(n),JSON.parse(n,t.reviver)}catch(t){if(i)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:i.fromPromise((async function(e,t,r={}){const s=r.fs||n,a=o(t,r);await i.fromCallback(s.writeFile)(e,a,r)})),writeFileSync:function(e,t,r={}){const i=r.fs||n,s=o(t,r);return i.writeFileSync(e,s,r)}};e.exports=a},96780:e=>{e.exports={stringify:function(e,{EOL:t="\n",finalEOL:r=!0,replacer:n=null,spaces:i}={}){const o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},47031:(e,t,r)=>{"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(50579),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._executor=t}return n(e,[{key:"then",value:function(e,t){var r=this;return this._result||(this._result=new Promise((function(e,t){i((function(){try{r._executor(e,t)}catch(e){t(e)}}))}))),this._result.then(e,t)}},{key:"catch",value:function(e){return this.then(void 0,e)}}]),e}();t.default=o,Object.setPrototypeOf?(Object.setPrototypeOf(o.prototype,Promise.prototype),Object.setPrototypeOf(o,Promise)):(o.prototype.__proto__=Promise.prototype,o.__proto__=Promise),e.exports=o,e.exports.default=o},39593:(e,t,r)=>{"use strict";const n=r(34411),i=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),u=Symbol("dispose"),l=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),h=()=>1,g=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(m(e,t)){if(y(e,n),!e[a])return}else r&&(e[f]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},v=e=>{if(e[o]>e[i])for(let t=e[d].tail;e[o]>e[i]&&null!==t;){const r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){const r=t.value;e[u]&&e[u](r.key,r.value),e[o]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class _{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const S=(e,t,r,n)=>{let i=r.value;m(e,i)&&(y(e,r),e[a]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||h;if(this[s]="function"!=typeof t?h:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[u]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,v(this)}get max(){return this[i]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,v(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[s]&&(this[s]=e,this[o]=0,this[d].forEach((e=>{e.length=this[s](e.value,e.key),this[o]+=e.length}))),v(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const n=r.prev;S(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const n=r.next;S(this,e,r,t),r=n}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach((e=>this[u](e.key,e.value))),this[p]=new Map,this[d]=new n,this[o]=0}dump(){return this[d].map((e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[s](t,e);if(this[p].has(e)){if(a>this[i])return y(this,this[p].get(e)),!1;const s=this[p].get(e).value;return this[u]&&(this[l]||this[u](e,s.value)),s.now=n,s.maxAge=r,s.value=t,this[o]+=a-s.length,s.length=a,this.get(e),v(this),!0}const f=new _(e,t,a,n,r);return f.length>this[i]?(this[u]&&this[u](e,t),!1):(this[o]+=f.length,this[d].unshift(f),this[p].set(e,this[d].head),v(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach(((e,t)=>g(this,t,!1)))}}},87323:(e,t,r)=>{t.encode=r(41764).encode,t.decode=r(65299).decode,t.Encoder=r(12883).Encoder,t.Decoder=r(17441).Decoder,t.createEncodeStream=r(47621).createEncodeStream,t.createDecodeStream=r(75636).createDecodeStream,t.createCodec=r(27832).createCodec,t.codec=r(95766).codec},49679:function(e){function t(e){return e&&e.isBuffer&&e}e.exports=t("undefined"!=typeof Buffer&&Buffer)||t(this.Buffer)||t("undefined"!=typeof window&&window.Buffer)||this.Buffer},1947:(e,t)=>{t.copy=function(e,t,r,n){var i;r||(r=0),n||0===n||(n=this.length),t||(t=0);var o=n-r;if(e===this&&r<t&&t<n)for(i=o-1;i>=0;i--)e[i+t]=this[i+r];else for(i=0;i<o;i++)e[i+t]=this[i+r];return o},t.toString=function(e,t,r){var n=this,i=0|t;r||(r=n.length);for(var o="",s=0;i<r;)(s=n[i++])<128?o+=String.fromCharCode(s):(192==(224&s)?s=(31&s)<<6|63&n[i++]:224==(240&s)?s=(15&s)<<12|(63&n[i++])<<6|63&n[i++]:240==(248&s)&&(s=(7&s)<<18|(63&n[i++])<<12|(63&n[i++])<<6|63&n[i++]),s>=65536?(s-=65536,o+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):o+=String.fromCharCode(s));return o},t.write=function(e,t){for(var r=this,n=t||(t|=0),i=e.length,o=0,s=0;s<i;)(o=e.charCodeAt(s++))<128?r[n++]=o:o<2048?(r[n++]=192|o>>>6,r[n++]=128|63&o):o<55296||o>57343?(r[n++]=224|o>>>12,r[n++]=128|o>>>6&63,r[n++]=128|63&o):(o=65536+(o-55296<<10|e.charCodeAt(s++)-56320),r[n++]=240|o>>>18,r[n++]=128|o>>>12&63,r[n++]=128|o>>>6&63,r[n++]=128|63&o);return n-t}},52683:(e,t,r)=>{var n=r(6895),i=e.exports=o(0);function o(e){return new Array(e)}i.alloc=o,i.concat=n.concat,i.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(i,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},44580:(e,t,r)=>{var n=r(6895),i=n.global,o=e.exports=n.hasBuffer?s(0):[];function s(e){return new i(e)}o.alloc=n.hasBuffer&&i.alloc||s,o.concat=n.concat,o.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(o,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(e):new i(e)}},53190:(e,t,r)=>{var n,i=r(1947);t.copy=u,t.slice=l,t.toString=function(e,t,r){return(!a&&o.isBuffer(this)?this.toString:i.toString).apply(this,arguments)},t.write=(n="write",function(){return(this[n]||i[n]).apply(this,arguments)});var o=r(6895),s=o.global,a=o.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s,c=a&&!s.TYPED_ARRAY_SUPPORT;function u(e,t,r,n){var s=o.isBuffer(this),a=o.isBuffer(e);if(s&&a)return this.copy(e,t,r,n);if(c||s||a||!o.isView(this)||!o.isView(e))return i.copy.call(this,e,t,r,n);var u=r||null!=n?l.call(this,r,n):this;return e.set(u,t),u.length}function l(e,t){var r=this.slice||!c&&this.subarray;if(r)return r.call(this,e,t);var n=o.alloc.call(this,t-e);return u.call(this,n,0,e,t),n}},28553:(e,t,r)=>{var n=r(6895),i=e.exports=n.hasArrayBuffer?o(0):[];function o(e){return new Uint8Array(e)}i.alloc=o,i.concat=n.concat,i.from=function(e){if(n.isView(e)){var t=e.byteOffset,r=e.byteLength;(e=e.buffer).byteLength!==r&&(e.slice?e=e.slice(t,t+r):(e=new Uint8Array(e)).byteLength!==r&&(e=Array.prototype.slice.call(e,t,t+r)))}else{if("string"==typeof e)return n.from.call(i,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},6895:(e,t,r)=>{var n=t.global=r(49679),i=t.hasBuffer=n&&!!n.isBuffer,o=t.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=t.isArray=r(7732);t.isArrayBuffer=o?function(e){return e instanceof ArrayBuffer||h(e)}:v;var a=t.isBuffer=i?n.isBuffer:v,c=t.isView=o?ArrayBuffer.isView||y("ArrayBuffer","buffer"):v;t.alloc=f,t.concat=function(e,r){r||(r=0,Array.prototype.forEach.call(e,(function(e){r+=e.length})));var n=this!==t&&this||e[0],i=f.call(n,r),o=0;return Array.prototype.forEach.call(e,(function(e){o+=p.copy.call(e,i,o)})),i},t.from=function(e){return"string"==typeof e?g.call(this,e):m(this).from(e)};var u=t.Array=r(52683),l=t.Buffer=r(44580),d=t.Uint8Array=r(28553),p=t.prototype=r(53190);function f(e){return m(this).alloc(e)}var h=y("ArrayBuffer");function g(e){var t=3*e.length,r=f.call(this,t),n=p.write.call(r,e);return t!==n&&(r=p.slice.call(r,0,n)),r}function m(e){return a(e)?l:c(e)?d:s(e)?u:i?l:o?d:u}function v(){return!1}function y(e,t){return e="[object "+e+"]",function(r){return null!=r&&{}.toString.call(t?r[t]:r)===e}}},1877:(e,t,r)=>{var n=r(7732);t.createCodec=a,t.install=function(e){for(var t in e)o.prototype[t]=s(o.prototype[t],e[t])},t.filter=function(e){return n(e)?function(e){return e=e.slice(),function(r){return e.reduce(t,r)};function t(e,t){return t(e)}}(e):e};var i=r(6895);function o(e){if(!(this instanceof o))return new o(e);this.options=e,this.init()}function s(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function a(e){return new o(e)}o.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=i.Uint8Array),this},t.preset=a({preset:!0})},95766:(e,t,r)=>{r(7350),r(5312),t.codec={preset:r(1877).preset}},98170:(e,t,r)=>{t.T=i;var n=r(7350).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}r(16822).k.mixin(i.prototype),i.prototype.codec=n,i.prototype.fetch=function(){return this.codec.decode(this)}},75636:(e,t,r)=>{t.createDecodeStream=a;var n=r(73837),i=r(12781).Transform,o=r(98170).T;n.inherits(a,i);var s={objectMode:!0};function a(e){if(!(this instanceof a))return new a(e);e?e.objectMode=!0:e=s,i.call(this,e);var t=this;(this.decoder=new o(e)).push=function(e){t.push(e)}}a.prototype._transform=function(e,t,r){this.decoder.write(e),this.decoder.flush(),r&&r()}},65299:(e,t,r)=>{t.decode=function(e,t){var r=new n(t);return r.write(e),r.read()};var n=r(98170).T},17441:(e,t,r)=>{t.Decoder=o;var n=r(73258),i=r(98170).T;function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}o.prototype=new i,n.mixin(o.prototype),o.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},o.prototype.push=function(e){this.emit("data",e)},o.prototype.end=function(e){this.decode(e),this.emit("end")}},2517:(e,t,r)=>{t.F=i;var n=r(5312).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}r(16822).I.mixin(i.prototype),i.prototype.codec=n,i.prototype.write=function(e){this.codec.encode(this,e)}},47621:(e,t,r)=>{t.createEncodeStream=a;var n=r(73837),i=r(12781).Transform,o=r(2517).F;n.inherits(a,i);var s={objectMode:!0};function a(e){if(!(this instanceof a))return new a(e);e?e.objectMode=!0:e=s,i.call(this,e);var t=this;(this.encoder=new o(e)).push=function(e){t.push(e)}}a.prototype._transform=function(e,t,r){this.encoder.write(e),r&&r()},a.prototype._flush=function(e){this.encoder.flush(),e&&e()}},41764:(e,t,r)=>{t.encode=function(e,t){var r=new n(t);return r.write(e),r.read()};var n=r(2517).F},12883:(e,t,r)=>{t.Encoder=o;var n=r(73258),i=r(2517).F;function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}o.prototype=new i,n.mixin(o.prototype),o.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},o.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},66083:(e,t,r)=>{t.S=function e(t,r){if(!(this instanceof e))return new e(t,r);this.buffer=n.from(t),this.type=r};var n=r(6895)},99431:(e,t,r)=>{t.setExtPackers=function(e){e.addExtPacker(14,Error,[d,c]),e.addExtPacker(1,EvalError,[d,c]),e.addExtPacker(2,RangeError,[d,c]),e.addExtPacker(3,ReferenceError,[d,c]),e.addExtPacker(4,SyntaxError,[d,c]),e.addExtPacker(5,TypeError,[d,c]),e.addExtPacker(6,URIError,[d,c]),e.addExtPacker(10,RegExp,[l,c]),e.addExtPacker(11,Boolean,[u,c]),e.addExtPacker(12,String,[u,c]),e.addExtPacker(13,Date,[Number,c]),e.addExtPacker(15,Number,[u,c]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,s),e.addExtPacker(18,Uint8Array,s),e.addExtPacker(19,Int16Array,s),e.addExtPacker(20,Uint16Array,s),e.addExtPacker(21,Int32Array,s),e.addExtPacker(22,Uint32Array,s),e.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,s),e.addExtPacker(26,ArrayBuffer,s),e.addExtPacker(29,DataView,s)),i.hasBuffer&&e.addExtPacker(27,o,i.from)};var n,i=r(6895),o=i.global,s=i.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function c(e){return n||(n=r(41764).encode),n(e)}function u(e){return e.valueOf()}function l(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function d(e){var t={};for(var r in a)t[r]=e[r];return t}},6600:(e,t,r)=>{t.setExtUnpackers=function(e){e.addExtUnpacker(14,[a,u(Error)]),e.addExtUnpacker(1,[a,u(EvalError)]),e.addExtUnpacker(2,[a,u(RangeError)]),e.addExtUnpacker(3,[a,u(ReferenceError)]),e.addExtUnpacker(4,[a,u(SyntaxError)]),e.addExtUnpacker(5,[a,u(TypeError)]),e.addExtUnpacker(6,[a,u(URIError)]),e.addExtUnpacker(10,[a,c]),e.addExtUnpacker(11,[a,l(Boolean)]),e.addExtUnpacker(12,[a,l(String)]),e.addExtUnpacker(13,[a,l(Date)]),e.addExtUnpacker(15,[a,l(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,l(Int8Array)),e.addExtUnpacker(18,l(Uint8Array)),e.addExtUnpacker(19,[d,l(Int16Array)]),e.addExtUnpacker(20,[d,l(Uint16Array)]),e.addExtUnpacker(21,[d,l(Int32Array)]),e.addExtUnpacker(22,[d,l(Uint32Array)]),e.addExtUnpacker(23,[d,l(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[d,l(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,l(Uint8ClampedArray)),e.addExtUnpacker(26,d),e.addExtUnpacker(29,[d,l(DataView)])),i.hasBuffer&&e.addExtUnpacker(27,l(o))};var n,i=r(6895),o=i.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(e){return n||(n=r(65299).decode),n(e)}function c(e){return RegExp.apply(null,e)}function u(e){return function(t){var r=new e;for(var n in s)r[n]=t[n];return r}}function l(e){return function(t){return new e(t)}}function d(e){return new Uint8Array(e).buffer}},27832:(e,t,r)=>{r(7350),r(5312),t.createCodec=r(1877).createCodec},16822:(e,t,r)=>{t.k=o,t.I=s;var n=r(6895),i="BUFFER_SHORTAGE";function o(){if(!(this instanceof o))return new o}function s(){if(!(this instanceof s))return new s}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function c(e){(this.buffers||(this.buffers=[])).push(e)}function u(e){return function(t){for(var r in e)t[r]=e[r];return t}}o.mixin=u({bufferish:n,write:function(e){var t=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:function(){throw new Error("method not implemented: fetch()")},flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&e.message!=i)throw e;this.offset=t;break}this.push(e)}},push:c,pull:function(){return(this.buffers||(this.buffers=[])).shift()},read:a,reserve:function(e){var t=this.offset,r=t+e;if(r>this.buffer.length)throw new Error(i);return this.offset=r,t},offset:0}),o.mixin(o.prototype),s.mixin=u({bufferish:n,write:function(){throw new Error("method not implemented: write()")},fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return n.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:c,pull:function(){var e=this.buffers||(this.buffers=[]),t=e.length>1?this.bufferish.concat(e):e[0];return e.length=0,t},read:a,reserve:function(e){var t=0|e;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+t;if(i<r)return this.offset=i,n;this.flush(),e=Math.max(e,Math.min(2*r,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var r=this.reserve(t);n.prototype.copy.call(e,this.buffer,r)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),s.mixin(s.prototype)},7350:(e,t,r)=>{var n=r(66083).S,i=r(6600),o=r(6076).readUint8,s=r(85738),a=r(1877);function c(){var e=this.options;return this.decode=function(e){var t=s.getReadToken(e);return function(e){var r=o(e),n=t[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(e)}}(e),e&&e.preset&&i.setExtUnpackers(this),this}a.install({addExtUnpacker:function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=a.filter(t)},getExtUnpacker:function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new n(t,e)}},init:c}),t.preset=c.call(a.preset)},6076:(e,t,r)=>{var n=r(80645),i=r(61166),o=i.Uint64BE,s=i.Int64BE;t.getReadFormat=function(e){var t=a.hasArrayBuffer&&e&&e.binarraybuffer,r=e&&e.int64;return{map:u&&e&&e.usemap?p:d,array:f,str:h,bin:t?m:g,ext:v,uint8:y,uint16:S,uint32:E,uint64:P(8,r?I:T),int8:_,int16:w,int32:b,int64:P(8,r?O:C),float32:P(4,x),float64:P(8,N)}},t.readUint8=y;var a=r(6895),c=r(53190),u="undefined"!=typeof Map,l=!0;function d(e,t){var r,n={},i=new Array(t),o=new Array(t),s=e.codec.decode;for(r=0;r<t;r++)i[r]=s(e),o[r]=s(e);for(r=0;r<t;r++)n[i[r]]=o[r];return n}function p(e,t){var r,n=new Map,i=new Array(t),o=new Array(t),s=e.codec.decode;for(r=0;r<t;r++)i[r]=s(e),o[r]=s(e);for(r=0;r<t;r++)n.set(i[r],o[r]);return n}function f(e,t){for(var r=new Array(t),n=e.codec.decode,i=0;i<t;i++)r[i]=n(e);return r}function h(e,t){var r=e.reserve(t),n=r+t;return c.toString.call(e.buffer,"utf-8",r,n)}function g(e,t){var r=e.reserve(t),n=r+t,i=c.slice.call(e.buffer,r,n);return a.from(i)}function m(e,t){var r=e.reserve(t),n=r+t,i=c.slice.call(e.buffer,r,n);return a.Uint8Array.from(i).buffer}function v(e,t){var r=e.reserve(t+1),n=e.buffer[r++],i=r+t,o=e.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(c.slice.call(e.buffer,r,i))}function y(e){var t=e.reserve(1);return e.buffer[t]}function _(e){var t=e.reserve(1),r=e.buffer[t];return 128&r?r-256:r}function S(e){var t=e.reserve(2),r=e.buffer;return r[t++]<<8|r[t]}function w(e){var t=e.reserve(2),r=e.buffer,n=r[t++]<<8|r[t];return 32768&n?n-65536:n}function E(e){var t=e.reserve(4),r=e.buffer;return 16777216*r[t++]+(r[t++]<<16)+(r[t++]<<8)+r[t]}function b(e){var t=e.reserve(4),r=e.buffer;return r[t++]<<24|r[t++]<<16|r[t++]<<8|r[t]}function P(e,t){return function(r){var n=r.reserve(e);return t.call(r.buffer,n,l)}}function T(e){return new o(this,e).toNumber()}function C(e){return new s(this,e).toNumber()}function I(e){return new o(this,e)}function O(e){return new s(this,e)}function x(e){return n.read(this,e,!1,23,4)}function N(e){return n.read(this,e,!1,52,8)}},85738:(e,t,r)=>{var n=r(6076);function i(e){var t,r=new Array(256);for(t=0;t<=127;t++)r[t]=o(t);for(t=128;t<=143;t++)r[t]=a(t-128,e.map);for(t=144;t<=159;t++)r[t]=a(t-144,e.array);for(t=160;t<=191;t++)r[t]=a(t-160,e.str);for(r[192]=o(null),r[193]=null,r[194]=o(!1),r[195]=o(!0),r[196]=s(e.uint8,e.bin),r[197]=s(e.uint16,e.bin),r[198]=s(e.uint32,e.bin),r[199]=s(e.uint8,e.ext),r[200]=s(e.uint16,e.ext),r[201]=s(e.uint32,e.ext),r[202]=e.float32,r[203]=e.float64,r[204]=e.uint8,r[205]=e.uint16,r[206]=e.uint32,r[207]=e.uint64,r[208]=e.int8,r[209]=e.int16,r[210]=e.int32,r[211]=e.int64,r[212]=a(1,e.ext),r[213]=a(2,e.ext),r[214]=a(4,e.ext),r[215]=a(8,e.ext),r[216]=a(16,e.ext),r[217]=s(e.uint8,e.str),r[218]=s(e.uint16,e.str),r[219]=s(e.uint32,e.str),r[220]=s(e.uint16,e.array),r[221]=s(e.uint32,e.array),r[222]=s(e.uint16,e.map),r[223]=s(e.uint32,e.map),t=224;t<=255;t++)r[t]=o(t-256);return r}function o(e){return function(){return e}}function s(e,t){return function(r){var n=e(r);return t(r,n)}}function a(e,t){return function(r){return t(r,e)}}t.getReadToken=function(e){var t=n.getReadFormat(e);return e&&e.useraw?function(e){var t,r=i(e).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],t=160;t<=191;t++)r[t]=a(t-160,e.bin);return r}(t):i(t)}},5312:(e,t,r)=>{var n=r(66083).S,i=r(99431),o=r(5943),s=r(1877);function a(){var e=this.options;return this.encode=function(e){var t=o.getWriteType(e);return function(e,r){var n=t[typeof r];if(!n)throw new Error('Unsupported type "'+typeof r+'": '+r);n(e,r)}}(e),e&&e.preset&&i.setExtPackers(this),this}s.install({addExtPacker:function(e,t,r){r=s.filter(r);var i=t.name;function o(t){return r&&(t=r(t)),new n(t,e)}i&&"Object"!==i?(this.extPackers||(this.extPackers={}))[i]=o:(this.extEncoderList||(this.extEncoderList=[])).unshift([t,o])},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),r=e.constructor,n=r&&r.name&&t[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(r===a[0])return a[1]}},init:a}),t.preset=a.call(s.preset)},51598:(e,t,r)=>{var n=r(80645),i=r(61166),o=i.Uint64BE,s=i.Int64BE,a=r(9370).w,c=r(6895),u=c.global,l=c.hasBuffer&&"TYPED_ARRAY_SUPPORT"in u&&!u.TYPED_ARRAY_SUPPORT,d=c.hasBuffer&&u.prototype||{};function p(){var e=a.slice();return e[196]=f(196),e[197]=h(197),e[198]=g(198),e[199]=f(199),e[200]=h(200),e[201]=g(201),e[202]=m(202,4,d.writeFloatBE||_,!0),e[203]=m(203,8,d.writeDoubleBE||S,!0),e[204]=f(204),e[205]=h(205),e[206]=g(206),e[207]=m(207,8,v),e[208]=f(208),e[209]=h(209),e[210]=g(210),e[211]=m(211,8,y),e[217]=f(217),e[218]=h(218),e[219]=g(219),e[220]=h(220),e[221]=g(221),e[222]=h(222),e[223]=g(223),e}function f(e){return function(t,r){var n=t.reserve(2),i=t.buffer;i[n++]=e,i[n]=r}}function h(e){return function(t,r){var n=t.reserve(3),i=t.buffer;i[n++]=e,i[n++]=r>>>8,i[n]=r}}function g(e){return function(t,r){var n=t.reserve(5),i=t.buffer;i[n++]=e,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function m(e,t,r,n){return function(i,o){var s=i.reserve(t+1);i.buffer[s++]=e,r.call(i.buffer,o,s,n)}}function v(e,t){new o(this,t,e)}function y(e,t){new s(this,t,e)}function _(e,t){n.write(this,e,t,!1,23,4)}function S(e,t){n.write(this,e,t,!1,52,8)}t.getWriteToken=function(e){return e&&e.uint8array?((t=p())[202]=m(202,4,_),t[203]=m(203,8,S),t):l||c.hasBuffer&&e&&e.safe?function(){var e=a.slice();return e[196]=m(196,1,u.prototype.writeUInt8),e[197]=m(197,2,u.prototype.writeUInt16BE),e[198]=m(198,4,u.prototype.writeUInt32BE),e[199]=m(199,1,u.prototype.writeUInt8),e[200]=m(200,2,u.prototype.writeUInt16BE),e[201]=m(201,4,u.prototype.writeUInt32BE),e[202]=m(202,4,u.prototype.writeFloatBE),e[203]=m(203,8,u.prototype.writeDoubleBE),e[204]=m(204,1,u.prototype.writeUInt8),e[205]=m(205,2,u.prototype.writeUInt16BE),e[206]=m(206,4,u.prototype.writeUInt32BE),e[207]=m(207,8,v),e[208]=m(208,1,u.prototype.writeInt8),e[209]=m(209,2,u.prototype.writeInt16BE),e[210]=m(210,4,u.prototype.writeInt32BE),e[211]=m(211,8,y),e[217]=m(217,1,u.prototype.writeUInt8),e[218]=m(218,2,u.prototype.writeUInt16BE),e[219]=m(219,4,u.prototype.writeUInt32BE),e[220]=m(220,2,u.prototype.writeUInt16BE),e[221]=m(221,4,u.prototype.writeUInt32BE),e[222]=m(222,2,u.prototype.writeUInt16BE),e[223]=m(223,4,u.prototype.writeUInt32BE),e}():p();var t}},5943:(e,t,r)=>{var n=r(7732),i=r(61166),o=i.Uint64BE,s=i.Int64BE,a=r(6895),c=r(53190),u=r(51598),l=r(9370).w,d=r(66083).S,p="undefined"!=typeof Uint8Array,f="undefined"!=typeof Map,h=[];h[1]=212,h[2]=213,h[4]=214,h[8]=215,h[16]=216,t.getWriteType=function(e){var t,r=u.getWriteToken(e),i=e&&e.useraw,g=p&&e&&e.binarraybuffer,m=g?a.isArrayBuffer:a.isBuffer,v=g?function(e,t){w(e,new Uint8Array(t))}:w,y=f&&e&&e.usemap?function(e,t){if(!(t instanceof Map))return E(e,t);var n=t.size;r[n<16?128+n:n<=65535?222:223](e,n);var i=e.codec.encode;t.forEach((function(t,r,n){i(e,r),i(e,t)}))}:E;return{boolean:function(e,t){r[t?195:194](e,t)},function:S,number:function(e,t){var n=0|t;t===n?r[-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210](e,n):r[203](e,t)},object:i?function(e,t){if(m(t))return function(e,t){var n=t.length;r[n<32?160+n:n<=65535?218:219](e,n),e.send(t)}(e,t);_(e,t)}:_,string:(t=i?function(e){return e<32?1:e<=65535?3:5}:function(e){return e<32?1:e<=255?2:e<=65535?3:5},function(e,n){var i=n.length,o=5+3*i;e.offset=e.reserve(o);var s=e.buffer,a=t(i),u=e.offset+a;i=c.write.call(s,n,u);var l=t(i);if(a!==l){var d=u+l-a,p=u+i;c.copy.call(s,s,d,u,p)}r[1===l?160+i:l<=3?215+l:219](e,i),e.offset+=i}),symbol:S,undefined:S};function _(e,t){if(null===t)return S(e,t);if(m(t))return v(e,t);if(n(t))return function(e,t){var n=t.length;r[n<16?144+n:n<=65535?220:221](e,n);for(var i=e.codec.encode,o=0;o<n;o++)i(e,t[o])}(e,t);if(o.isUint64BE(t))return function(e,t){r[207](e,t.toArray())}(e,t);if(s.isInt64BE(t))return function(e,t){r[211](e,t.toArray())}(e,t);var i=e.codec.getExtPacker(t);if(i&&(t=i(t)),t instanceof d)return function(e,t){var n=t.buffer,i=n.length,o=h[i]||(i<255?199:i<=65535?200:201);r[o](e,i),l[t.type](e),e.send(n)}(e,t);y(e,t)}function S(e,t){r[192](e,t)}function w(e,t){var n=t.length;r[n<255?196:n<=65535?197:198](e,n),e.send(t)}function E(e,t){var n=Object.keys(t),i=n.length;r[i<16?128+i:i<=65535?222:223](e,i);var o=e.codec.encode;n.forEach((function(r){o(e,r),o(e,t[r])}))}}},9370:(e,t)=>{for(var r=t.w=new Array(256),n=0;n<=255;n++)r[n]=i(n);function i(e){return function(t){var r=t.reserve(1);t.buffer[r]=e}}},7732:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},1588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelClass=t.Channel=void 0;const n=r(9593),i=r(12781),o=r(75011),s=r(1216),a=r(69454),c=r(57312),u=r(17528),l=r(5458);class d{get id(){return this.qualifiedId.id}constructor(e){this._isDisposed=!1,this.qualifiedId=e}get isDisposed(){return this._isDisposed}dispose(e){this._isDisposed=!0}}t.Channel=d,t.ChannelClass=class extends d{constructor(e,t,r){super(t),this._acceptance=new s.Deferred,this._completion=new s.Deferred,this.remoteWindowFilled=0;const n=this;switch(this.name=r.name,t.source){case u.ChannelSource.Local:this.localWindowSize=r.remoteWindowSize;break;case u.ChannelSource.Remote:this.remoteWindowSize=r.remoteWindowSize;break;case u.ChannelSource.Seeded:this.remoteWindowSize=r.remoteWindowSize,this.localWindowSize=r.remoteWindowSize;break;default:throw new Error("Channel source not recognized.")}this._multiplexingStream=e,this.remoteWindowHasCapacity=new s.Deferred,this._multiplexingStream.backpressureSupportEnabled&&!this.remoteWindowSize||this.remoteWindowHasCapacity.resolve(),this._duplex=new i.Duplex({async write(r,i,s){let u;try{let i=Buffer.from(r);for(;i.length>0;){let r=Math.min(i.length,c.MultiplexingStream.framePayloadMaxLength);if(n._multiplexingStream.backpressureSupportEnabled){if(await n.remoteWindowHasCapacity.promise,!n.remoteWindowSize)throw new Error("Remote window size unknown.");r=Math.min(n.remoteWindowSize-n.remoteWindowFilled,r)}n.onTransmittingBytes(r);const s=new a.FrameHeader(o.ControlCode.content,t);await e.sendFrameAsync(s,i.slice(0,r)),i=i.slice(r)}}catch(e){u=e}s&&s(u)},async final(t){let r;try{await e.onChannelWritingCompleted(n)}catch(e){r=e}t&&t(r)},read(){}})}get stream(){return this._duplex}get acceptance(){return this._acceptance.promise}get isAccepted(){return this._acceptance.isResolved}get isRejectedOrCanceled(){return this._acceptance.isRejected}get completion(){return this._completion.promise}tryAcceptOffer(e){return!!this._acceptance.resolve()&&(this.localWindowSize=void 0!==(null==e?void 0:e.channelReceivingWindowSize)?Math.max(this._multiplexingStream.defaultChannelReceivingWindowSize,null==e?void 0:e.channelReceivingWindowSize):this._multiplexingStream.defaultChannelReceivingWindowSize,!0)}tryCancelOffer(e){const t=new n.default.CancellationError(e);this._acceptance.reject(t),this._completion.reject(t),l(this._completion.promise),this.dispose()}onAccepted(e){return this._multiplexingStream.backpressureSupportEnabled&&(this.remoteWindowSize=e.remoteWindowSize,this.remoteWindowHasCapacity.resolve()),this._acceptance.resolve()}onContent(e){const t=this._duplex.readableFlowing;this._duplex.push(e),t&&!1===this._duplex.readableFlowing&&this._duplex.resume(),this._multiplexingStream.backpressureSupportEnabled&&e&&this._multiplexingStream.localContentExamined(this,e.length)}onContentProcessed(e){if(e<0)throw new Error("A non-negative number is required.");if(e>this.remoteWindowFilled)throw new Error("More bytes processed than we thought were in the window.");if(void 0===this.remoteWindowSize)throw new Error("Unexpected content processed message given we don't know the remote window size.");this.remoteWindowFilled-=e,this.remoteWindowFilled<this.remoteWindowSize&&this.remoteWindowHasCapacity.resolve()}dispose(e){this.isDisposed||(super.dispose(),this._acceptance.reject(new n.default.CancellationError("disposed"))&&l(this.acceptance),this._duplex.end(),this._duplex.push(null),e?this._completion.reject(e):this._completion.resolve(),l(this._multiplexingStream.onChannelDisposed(this,null!=e?e:null)))}onTransmittingBytes(e){if(this._multiplexingStream.backpressureSupportEnabled){if(e<0)throw new Error("Negative byte count transmitted.");this.remoteWindowFilled+=e,this.remoteWindowFilled===this.remoteWindowSize&&(this.remoteWindowHasCapacity=new s.Deferred)}}}},75011:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ControlCode=void 0,function(e){e[e.offer=0]="offer",e[e.offerAccepted=1]="offerAccepted",e[e.content=2]="content",e[e.contentWritingCompleted=3]="contentWritingCompleted",e[e.channelTerminated=4]="channelTerminated",e[e.contentProcessed=5]="contentProcessed"}(r||(t.ControlCode=r={}))},1216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=class{constructor(e){this.state=e,this._isResolved=!1,this._isRejected=!1,this.promise=new Promise(((e,t)=>{this.resolvePromise=e,this.rejectPromise=t}))}get isCompleted(){return this._isResolved||this._isRejected}get isResolved(){return this._isResolved}get isRejected(){return this._isRejected}get error(){return this._error}resolve(e){return!this.isCompleted&&(this.resolvePromise(e),this._isResolved=!0,!0)}reject(e){return!this.isCompleted&&(this.rejectPromise(e),this._error=e,this._isRejected=!0,!0)}}},69454:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameHeader=void 0;const n=r(17850);t.FrameHeader=class{constructor(e,t){this.code=e,t&&(0,n.requireInteger)("channelId",t.id,4,"signed"),this.code=e,this._channel=t}get channel(){return this._channel}get requiredChannel(){if(this.channel)return this.channel;throw new Error("Expected channel not present in frame header.")}flipChannelPerspective(){this._channel&&(this._channel={id:this._channel.id,source:-1*this._channel.source})}}},47900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FullDuplexStream=void 0;const n=r(12781);class i{static CreatePair(){const e=new n.PassThrough,t=new n.PassThrough;return{first:i.Splice(e,t),second:i.Splice(t,e)}}static Splice(e,t){const r=new n.Duplex({write(e,r,n){t.write(e,r,n)},final(e){t.end(e)}});return r.read=e.read.bind(e),r.on=e.on.bind(e),r}}t.FullDuplexStream=i},57312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingStreamClass=t.MultiplexingStream=void 0;const n=r(84017),i=r(9593),o=r(82361),s=r(1588),a=r(75011),c=r(1216),u=r(69454),l=r(99574);r(53527);const d=r(17528),p=r(17850),f=r(5458);class h{get disposalToken(){return this.disposalTokenSource.token}get completion(){return this._completionSource.promise}get isDisposed(){return this.disposalTokenSource.token.isCancelled}static async CreateAsync(e,t,r=i.default.CONTINUE){var n;if(!e)throw new Error("stream must be specified.");if(null!==(n=(t=t||{}).protocolMajorVersion)&&void 0!==n||(t.protocolMajorVersion=1),t.defaultChannelReceivingWindowSize=t.defaultChannelReceivingWindowSize||h.recommendedDefaultChannelReceivingWindowSize,t.protocolMajorVersion<3&&t.seededChannels&&t.seededChannels.length>0)throw new Error("Seeded channels require v3 of the protocol at least.");const o=1===t.protocolMajorVersion?new l.MultiplexingStreamV1Formatter(e):2===t.protocolMajorVersion?new l.MultiplexingStreamV2Formatter(e):3===t.protocolMajorVersion?new l.MultiplexingStreamV3Formatter(e):void 0;if(!o)throw new Error(`Protocol major version ${t.protocolMajorVersion} is not supported.`);const s=await o.writeHandshakeAsync(),a=await o.readHandshakeAsync(s,r);return o.isOdd=a.isOdd,new g(o,a.isOdd,t)}static Create(e,t){var r;null!=t||(t={protocolMajorVersion:3}),null!==(r=t.protocolMajorVersion)&&void 0!==r||(t.protocolMajorVersion=3);const n=3===t.protocolMajorVersion?new l.MultiplexingStreamV3Formatter(e):void 0;if(!n)throw new Error(`Protocol major version ${t.protocolMajorVersion} is not supported. Try CreateAsync instead.`);return new g(n,void 0,t)}constructor(e,t,r){var n,a,u;if(this.formatter=e,this.isOdd=t,this._completionSource=new c.Deferred,this.seededOpenChannels={},this.locallyOfferedOpenChannels={},this.remotelyOfferedOpenChannels={},this.channelsOfferedByThemByName={},this.acceptingChannels={},this.eventEmitter=new o.EventEmitter,this.disposalTokenSource=i.default.create(),this.defaultChannelReceivingWindowSize=null!==(n=r.defaultChannelReceivingWindowSize)&&void 0!==n?n:h.recommendedDefaultChannelReceivingWindowSize,this.protocolMajorVersion=null!==(a=r.protocolMajorVersion)&&void 0!==a?a:1,r.seededChannels)for(let e=0;e<r.seededChannels.length;e++){const t=r.seededChannels[e],n={id:e,source:d.ChannelSource.Seeded};this.setOpenChannel(new s.ChannelClass(this,n,{name:"",remoteWindowSize:null!==(u=t.channelReceivingWindowSize)&&void 0!==u?u:this.defaultChannelReceivingWindowSize}))}}createChannel(e){var t;const r={name:"",remoteWindowSize:null!==(t=null==e?void 0:e.channelReceivingWindowSize)&&void 0!==t?t:this.defaultChannelReceivingWindowSize},n=this.formatter.serializeOfferParameters(r),i=new s.ChannelClass(this,{id:this.getUnusedChannelId(),source:d.ChannelSource.Local},r);return this.setOpenChannel(i),this.rejectOnFailure(this.sendFrameAsync(new u.FrameHeader(a.ControlCode.offer,i.qualifiedId),n,this.disposalToken)),i}acceptChannel(e,t){const r=this.remotelyOfferedOpenChannels[e]||this.seededOpenChannels[e];if(!r)throw new Error("No channel with ID "+e);return this.removeChannelFromOfferedQueue(r),this.acceptChannelOrThrow(r,t),r}rejectChannel(e){const t=this.remotelyOfferedOpenChannels[e];if(!t)throw new Error("No channel with that ID found.");(0,p.removeFromQueue)(t,this.channelsOfferedByThemByName[t.name]),f(t.acceptance),f(t.completion),t.dispose()}async offerChannelAsync(e,t,r=i.default.CONTINUE){var n;if(null==e)throw new Error("Name must be specified (but may be empty).");r.throwIfCancelled(),(0,p.throwIfDisposed)(this);const o={name:e,remoteWindowSize:null!==(n=null==t?void 0:t.channelReceivingWindowSize)&&void 0!==n?n:this.defaultChannelReceivingWindowSize},c=this.formatter.serializeOfferParameters(o),l=new s.ChannelClass(this,{id:this.getUnusedChannelId(),source:d.ChannelSource.Local},o);this.setOpenChannel(l);const h=new u.FrameHeader(a.ControlCode.offer,l.qualifiedId),g=r.onCancelled((e=>this.offerChannelCanceled(l,e)));try{return f(l.acceptance),await this.sendFrameAsync(h,c,r),await l.acceptance,l}finally{g()}}async acceptChannelAsync(e,t,r=i.default.CONTINUE){if(null==e)throw new Error("Name must be specified (but may be empty).");let n,o;r.throwIfCancelled(),(0,p.throwIfDisposed)(this);const s=this.channelsOfferedByThemByName[e];if(s)for(;void 0===n&&s.length>0;)n=s.shift(),(n.isAccepted||n.isRejectedOrCanceled)&&(n=void 0);if(void 0===n){let r=this.acceptingChannels[e];r||(this.acceptingChannels[e]=r=[]),o=new c.Deferred(t),r.push(o)}if(void 0!==n)return this.acceptChannelOrThrow(n,t),n;{const t=r.onCancelled((t=>this.acceptChannelCanceled(o,e,t)));try{return await o.promise}finally{t()}}}dispose(){this.disposeCore(!1)}disposeCore(e){this.disposalTokenSource.cancel(),this._completionSource.resolve(),this.formatter.end(),[this.locallyOfferedOpenChannels,this.remotelyOfferedOpenChannels].forEach((e=>{for(const t in e)if(e.hasOwnProperty(t)){const r=e[t];f(r.acceptance),r.dispose()}}));const t=e?"The remote party has disconnected.":"The stream is being disposed locally.";for(const e in this.acceptingChannels)if(this.acceptingChannels.hasOwnProperty(e)){const r=this.acceptingChannels[e];for(const e of r)e.reject(new Error(t));delete this.acceptingChannels[e]}}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}once(e,t){this.eventEmitter.once(e,t)}raiseChannelOffered(e,t,r){const n={id:e,isAccepted:r,name:t};try{this.eventEmitter.emit("channelOffered",n)}catch(e){this._completionSource.reject(e)}}acceptChannelOrThrow(e,t){var r,n;if(!e.tryAcceptOffer(t))throw e.isAccepted?new Error("Channel is already accepted."):e.isRejectedOrCanceled?new Error("Channel is no longer available for acceptance."):new Error("Channel could not be accepted.");{const i={remoteWindowSize:null!==(n=null!==(r=null==t?void 0:t.channelReceivingWindowSize)&&void 0!==r?r:e.localWindowSize)&&void 0!==n?n:this.defaultChannelReceivingWindowSize};if(i.remoteWindowSize<this.defaultChannelReceivingWindowSize&&(i.remoteWindowSize=this.defaultChannelReceivingWindowSize),e.qualifiedId.source!==d.ChannelSource.Seeded){const t=this.formatter.serializeAcceptanceParameters(i);this.rejectOnFailure(this.sendFrameAsync(new u.FrameHeader(a.ControlCode.offerAccepted,e.qualifiedId),t,this.disposalToken))}}}async rejectOnFailure(e){try{await e}catch(e){this._completionSource.reject(e)}}removeChannelFromOfferedQueue(e){e.name&&(0,p.removeFromQueue)(e,this.channelsOfferedByThemByName[e.name])}getOpenChannel(e){return this.getChannelCollection(e.source)[e.id]}setOpenChannel(e){this.getChannelCollection(e.qualifiedId.source)[e.qualifiedId.id]=e}deleteOpenChannel(e){delete this.getChannelCollection(e.source)[e.id]}getChannelCollection(e){switch(e){case d.ChannelSource.Local:return this.locallyOfferedOpenChannels;case d.ChannelSource.Remote:return this.remotelyOfferedOpenChannels;case d.ChannelSource.Seeded:return this.seededOpenChannels}}acceptChannelCanceled(e,t,r){e.reject(new i.default.CancellationError(r))&&(0,p.removeFromQueue)(e,this.acceptingChannels[t])}offerChannelCanceled(e,t){e.tryCancelOffer(t)}getUnusedChannelId(){return this.lastOfferedChannelId+=void 0!==this.isOdd?2:1}}t.MultiplexingStream=h,h.framePayloadMaxLength=20480,h.recommendedDefaultChannelReceivingWindowSize=5*h.framePayloadMaxLength,h.defaultChannelOptions={},h.ControlFrameEncoding="utf-8";class g extends h{constructor(e,t,r){var i,o;super(e,t,r),this.sendingSemaphore=new n.Semaphore(1),this.lastOfferedChannelId=t?-1:0,this.lastOfferedChannelId+=null!==(o=null===(i=r.seededChannels)||void 0===i?void 0:i.length)&&void 0!==o?o:0,this.readFromStream(this.disposalToken).catch((e=>this._completionSource.reject(e)))}get backpressureSupportEnabled(){return this.protocolMajorVersion>1}async sendFrameAsync(e,t,r=i.default.CONTINUE){if(!e)throw new Error("Header is required.");await this.sendingSemaphore.use((async()=>{r.throwIfCancelled(),(0,p.throwIfDisposed)(this),await this.formatter.writeFrameAsync(e,t)}))}async sendFrame(e,t){try{if(this._completionSource.isCompleted)return;const r=new u.FrameHeader(e,t);await this.sendFrameAsync(r)}catch(e){this._completionSource.reject(e)}}onChannelWritingCompleted(e){!e.isDisposed&&this.getOpenChannel(e.qualifiedId)&&this.sendFrame(a.ControlCode.contentWritingCompleted,e.qualifiedId)}async onChannelDisposed(e,t){if(!this._completionSource.isCompleted)try{const r=this.protocolMajorVersion>1&&t?this.formatter.serializeException(t):Buffer.alloc(0),n=new u.FrameHeader(a.ControlCode.channelTerminated,e.qualifiedId);await this.sendFrameAsync(n,r)}catch(e){if(this.isDisposed)return;throw e}}localContentExamined(e,t){const r=this.formatter.serializeContentProcessed(t);this.rejectOnFailure(this.sendFrameAsync(new u.FrameHeader(a.ControlCode.contentProcessed,e.qualifiedId),r))}async readFromStream(e){for(;!this.isDisposed;){const t=await this.formatter.readFrameAsync(e);if(null===t)break;switch(t.header.flipChannelPerspective(),t.header.code){case a.ControlCode.offer:this.onOffer(t.header.requiredChannel,t.payload);break;case a.ControlCode.offerAccepted:this.onOfferAccepted(t.header.requiredChannel,t.payload);break;case a.ControlCode.content:this.onContent(t.header.requiredChannel,t.payload);break;case a.ControlCode.contentProcessed:this.onContentProcessed(t.header.requiredChannel,t.payload);break;case a.ControlCode.contentWritingCompleted:this.onContentWritingCompleted(t.header.requiredChannel);break;case a.ControlCode.channelTerminated:this.onChannelTerminated(t.header.requiredChannel,t.payload)}}this.disposeCore(!0)}onOffer(e,t){const r=this.formatter.deserializeOfferParameters(t),n=new s.ChannelClass(this,e,r);let i,o,a=!1;if(void 0!==(o=this.acceptingChannels[r.name]))for(;o.length>0;){const e=o.shift();if(e.resolve(n)){a=!0,i=e.state;break}}if(!a){let e;(e=this.channelsOfferedByThemByName[r.name])||(this.channelsOfferedByThemByName[r.name]=e=[]),e.push(n)}this.setOpenChannel(n),a&&this.acceptChannelOrThrow(n,i),this.raiseChannelOffered(n.id,n.name,a)}onOfferAccepted(e,t){if(e.source!==d.ChannelSource.Local)throw new Error("Remote party tried to accept a channel that they offered.");const r=this.formatter.deserializeAcceptanceParameters(t),n=this.getOpenChannel(e);if(!n)throw new Error(`Unexpected channel created with ID ${d.QualifiedChannelId.toString(e)}`);n.onAccepted(r)}onContent(e,t){const r=this.getOpenChannel(e);if(!r)throw new Error(`No channel with id ${e} found.`);r.onContent(t)}onContentProcessed(e,t){const r=this.getOpenChannel(e);if(!r)throw new Error(`No channel with id ${e} found.`);const n=this.formatter.deserializeContentProcessed(t);r.onContentProcessed(n)}onContentWritingCompleted(e){const t=this.getOpenChannel(e);if(!t)throw new Error(`No channel with id ${e} found.`);t.onContent(null)}onChannelTerminated(e,t){const r=this.getOpenChannel(e);if(r){this.deleteOpenChannel(e),this.removeChannelFromOfferedQueue(r);const n=this.protocolMajorVersion>1?this.formatter.deserializeException(t):null;r.dispose(n)}}}t.MultiplexingStreamClass=g},99574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingStreamV3Formatter=t.MultiplexingStreamV2Formatter=t.MultiplexingStreamV1Formatter=t.MultiplexingStreamFormatter=void 0;const n=r(57312),i=r(17850),o=r(87323),s=r(1216),a=r(69454),c=r(17528);class u{static getIsOddRandomData(){const e=Buffer.alloc(16);for(let t=0;t<16;t++)e[t]=Math.floor(256*Math.random());return e}static isOdd(e,t){let r;for(let n=0;n<e.length;n++){const i=e[n],o=t[n];if(i>o){r=!0;break}if(i<o){r=!1;break}}if(void 0===r)throw new Error("Unable to determine even/odd party.");return r}createFrameHeader(e,t){if(!t)return new a.FrameHeader(e);const r=t%2==1===this.isOdd?c.ChannelSource.Remote:c.ChannelSource.Local;return new a.FrameHeader(e,{id:t,source:r})}}t.MultiplexingStreamFormatter=u;class l extends u{constructor(e){super(),this.stream=e}end(){this.stream.end()}async writeHandshakeAsync(){const e=u.getIsOddRandomData(),t=Buffer.concat([l.protocolMagicNumber,e]);return await(0,i.writeAsync)(this.stream,t),e}async readHandshakeAsync(e,t){const r=e,n=await(0,i.getBufferFrom)(this.stream,l.protocolMagicNumber.length+16,!1,t);for(let e=0;e<l.protocolMagicNumber.length;e++){const t=l.protocolMagicNumber[e],r=n.readUInt8(e);if(t!==r)throw new Error(`Protocol magic number mismatch. Expected ${t} but was ${r}.`)}return{isOdd:u.isOdd(r,n.slice(l.protocolMagicNumber.length)),protocolVersion:{major:1,minor:0}}}async writeFrameAsync(e,t){var r;const n=Buffer.alloc(7);n.writeInt8(e.code,0),n.writeUInt32BE((null===(r=e.channel)||void 0===r?void 0:r.id)||0,1),n.writeUInt16BE((null==t?void 0:t.length)||0,5),await(0,i.writeAsync)(this.stream,n),t&&t.length>0&&await(0,i.writeAsync)(this.stream,t)}async readFrameAsync(e){if(void 0===this.isOdd)throw new Error("isOdd must be set first.");const t=await(0,i.getBufferFrom)(this.stream,7,!0,e);if(null===t)return null;const r=this.createFrameHeader(t.readInt8(0),t.readUInt32BE(1)),n=t.readUInt16BE(5);return{header:r,payload:await(0,i.getBufferFrom)(this.stream,n)}}serializeOfferParameters(e){const t=Buffer.from(e.name,n.MultiplexingStream.ControlFrameEncoding);if(t.length>n.MultiplexingStream.framePayloadMaxLength)throw new Error("Name is too long.");return t}deserializeOfferParameters(e){return{name:e.toString(n.MultiplexingStream.ControlFrameEncoding)}}serializeAcceptanceParameters(e){return Buffer.from([])}deserializeAcceptanceParameters(e){return{}}serializeContentProcessed(e){throw new Error("Not supported in the V1 protocol.")}deserializeContentProcessed(e){throw new Error("Not supported in the V1 protocol.")}}t.MultiplexingStreamV1Formatter=l,l.protocolMagicNumber=Buffer.from([47,223,29,80]);class d extends u{constructor(e){super(),this.reader=o.createDecodeStream(),e.pipe(this.reader),this.writer=e}end(){this.writer.end()}async writeHandshakeAsync(){const e=u.getIsOddRandomData(),t=[[d.protocolVersion.major,d.protocolVersion.minor],e];return await(0,i.writeAsync)(this.writer,o.encode(t)),e}async readHandshakeAsync(e,t){if(!e)throw new Error("Provide the result of writeHandshakeAsync as a first argument.");const r=await this.readMessagePackAsync(t);if(null===r)throw new Error("No data received during handshake.");return{isOdd:u.isOdd(e,r[1]),protocolVersion:{major:r[0][0],minor:r[0][1]}}}async writeFrameAsync(e,t){var r;const n=[e.code];if(null===(r=e.channel)||void 0===r?void 0:r.id)n.push(e.channel.id),t&&t.length>0&&n.push(t);else if(t&&t.length>0)throw new Error("A frame may not contain payload without a channel ID.");await(0,i.writeAsync)(this.writer,o.encode(n))}async readFrameAsync(e){if(void 0===this.isOdd)throw new Error("isOdd must be set first.");const t=await this.readMessagePackAsync(e);return null===t?null:{header:this.createFrameHeader(t[0],t[1]),payload:t[2]||Buffer.from([])}}serializeOfferParameters(e){const t=[e.name];return e.remoteWindowSize&&t.push(e.remoteWindowSize),o.encode(t)}deserializeOfferParameters(e){const t=o.decode(e);return{name:t[0],remoteWindowSize:t[1]}}serializeAcceptanceParameters(e){const t=[];return e.remoteWindowSize&&t.push(e.remoteWindowSize),o.encode(t)}deserializeAcceptanceParameters(e){return{remoteWindowSize:o.decode(e)[0]}}serializeContentProcessed(e){return o.encode([e])}deserializeContentProcessed(e){return o.decode(e)[0]}serializeException(e){if(!e)return Buffer.alloc(0);const t=[`${e.name}: ${e.message}`];return o.encode(t)}deserializeException(e){if(0===e.length)return null;const t=o.decode(e);if(!t||0===t.length)return null;let r=o.decode(e)[0];return r=`Received error from remote side: ${r}`,new Error(r)}async readMessagePackAsync(e){const t=new s.Deferred;for(;;){const r=this.reader.read();if(null===r){const r=new s.Deferred,n=r.resolve.bind(r),i=t.resolve.bind(t);this.reader.once("readable",n),this.reader.once("end",i);const o=Promise.race([r.promise,t.promise]);if(await(e?e.racePromise(o):o),this.reader.removeListener("readable",n),this.reader.removeListener("end",i),r.isCompleted)continue;return null}return r}}}t.MultiplexingStreamV2Formatter=d,d.protocolVersion={major:2,minor:0};class p extends d{writeHandshakeAsync(){return Promise.resolve(null)}readHandshakeAsync(){return Promise.resolve({protocolVersion:p.protocolV3Version})}async writeFrameAsync(e,t){const r=[e.code];if(e.channel)r.push(e.channel.id),r.push(e.channel.source),t&&t.length>0&&r.push(t);else if(t&&t.length>0)throw new Error("A frame may not contain payload without a channel ID.");await(0,i.writeAsync)(this.writer,o.encode(r))}async readFrameAsync(e){const t=await this.readMessagePackAsync(e);return null===t?null:{header:new a.FrameHeader(t[0],t.length>1?{id:t[1],source:t[2]}:void 0),payload:t[3]||Buffer.from([])}}}t.MultiplexingStreamV3Formatter=p,p.protocolV3Version={major:2,minor:0}},53527:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},17528:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.QualifiedChannelId=t.ChannelSource=void 0,function(e){e[e.Local=1]="Local",e[e.Remote=-1]="Remote",e[e.Seeded=0]="Seeded"}(r||(t.ChannelSource=r={})),function(e){e.toString=function(e){const t=e.source===r.Local?"local":e.source===r.Remote?"remote":e.source===r.Seeded?"seeded":"unknown";return`${e.id} (${t})`}}(n||(t.QualifiedChannelId=n={}))},17850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFromQueue=t.requireInteger=t.throwIfDisposed=t.getBufferFrom=t.readSubstream=t.writeSubstream=t.writeAsync=void 0;const n=r(12781),i=r(1216);async function o(e,t){return new Promise(((r,n)=>{e.write(t,(e=>{e?n(e):r()}))}))}async function s(e,t,r=!1,n){const o=new i.Deferred;if(0===t)return Buffer.from([]);let s=null,a=0;for(;t>0;){null==n||n.throwIfCancelled();let c=e.readableLength;if(c)c>t&&(c=t);else{if(e.readableEnded||o.isCompleted){if(!r)throw new Error("Stream terminated before required bytes were read.");return null===s?null:s.subarray(0,a)}c=t}const u=e.read(c);if(u){if(u.length<c&&!r)throw new Error("Stream terminated before required bytes were read.");if(null===s){if(c===t||u.length<c)return u;s=Buffer.alloc(t)}u.copy(s,a),t-=u.length,a+=u.length}if(t>0){const t=new i.Deferred,r=t.resolve.bind(t),s=o.resolve.bind(o);e.once("readable",r),e.once("end",s);try{const e=Promise.race([t.promise,o.promise]);await(n?n.racePromise(e):e)}finally{e.removeListener("readable",r),e.removeListener("end",s)}}}return s}t.writeAsync=o,t.writeSubstream=function(e){return new n.Writable({async write(t,r,n){try{const r=new DataView(new ArrayBuffer(4));r.setUint32(0,t.length,!1),await o(e,Buffer.from(r.buffer)),await o(e,t),n()}catch(e){n(e)}},final(t){e.write(new Uint8Array(4),t)}})},t.readSubstream=function(e){return new n.Readable({async read(t){const r=await s(e,4),n=new DataView(r.buffer,r.byteOffset,r.length).getUint32(0,!1);if(0===n)return void this.push(null);const i=await s(e,n);this.push(i)}})},t.getBufferFrom=s,t.throwIfDisposed=function(e){if(e.isDisposed)throw new Error("disposed")},t.requireInteger=function(e,t,r,n="signed"){if(!Number.isInteger(t))throw new Error(`${e} must be an integer.`);let i=8*r;"signed"===n&&i--;const o=Math.pow(2,i)-1,s="signed"===n?-Math.pow(2,i):0;if(t>o||t<s)throw new Error(`${e} must be in the range ${s}-${o}.`)},t.removeFromQueue=function(e,t){if(t){const r=t.indexOf(e);r>=0&&t.splice(r,1)}}},33543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelSource=t.QualifiedChannelId=t.readSubstream=t.writeSubstream=t.MultiplexingStream=t.FullDuplexStream=t.Channel=void 0;var n=r(1588);Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return n.Channel}});var i=r(47900);Object.defineProperty(t,"FullDuplexStream",{enumerable:!0,get:function(){return i.FullDuplexStream}});var o=r(57312);Object.defineProperty(t,"MultiplexingStream",{enumerable:!0,get:function(){return o.MultiplexingStream}});var s=r(17850);Object.defineProperty(t,"writeSubstream",{enumerable:!0,get:function(){return s.writeSubstream}}),Object.defineProperty(t,"readSubstream",{enumerable:!0,get:function(){return s.readSubstream}});var a=r(17528);Object.defineProperty(t,"QualifiedChannelId",{enumerable:!0,get:function(){return a.QualifiedChannelId}}),Object.defineProperty(t,"ChannelSource",{enumerable:!0,get:function(){return a.ChannelSource}})},28865:(e,t,r)=>{e=r.nmd(e);try{process.dlopen(e,__dirname+r(71017).sep+r.p+"./node_modules/deviceid/build/Release/windows.node")}catch(e){throw new Error("node-loader:\n"+e)}},22257:(e,t,r)=>{const n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new l(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const o=r(12893),{safeRe:s,t:a}=r(55765),c=r(7539),u=r(74225),l=r(26376),d=r(66902)},66902:(e,t,r)=>{class n{constructor(e,t){if(t=o(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!m(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,o=n?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,x(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],d),a("comparator trim",e),e=e.replace(u[l.TILDETRIM],p),a("tilde trim",e),e=e.replace(u[l.CARETTRIM],f),a("caret trim",e);let c=e.split(" ").map((e=>_(e,this.options))).join(" ").split(/\s+/).map((e=>O(e,this.options)));n&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE]))))),a("range list",c);const v=new Map,y=c.map((e=>new s(e,this.options)));for(const e of y){if(m(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const S=[...v.values()];return i.set(t,S),S}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(N(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const i=new(r(39593))({max:1e3}),o=r(12893),s=r(22257),a=r(74225),c=r(26376),{safeRe:u,t:l,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=r(55765),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=r(83295),m=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},_=(e,t)=>(a("comp",e,t),e=b(e,t),a("caret",e),e=w(e,t),a("tildes",e),e=T(e,t),a("xrange",e),e=I(e,t),a("stars",e),e),S=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{const r=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(r,((t,r,n,i,o)=>{let s;return a("tilde",e,t,r,n,i,o),S(r)?s="":S(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:S(i)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,a("tilde return",s),s}))},b=(e,t)=>e.trim().split(/\s+/).map((e=>P(e,t))).join(" "),P=(e,t)=>{a("caret",e,t);const r=t.loose?u[l.CARETLOOSE]:u[l.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,o,s)=>{let c;return a("caret",e,t,r,i,o,s),S(r)?c="":S(i)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:S(o)?c="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===r?"0"===i?`>=${r}.${i}.${o}-${s} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${s} <${+r+1}.0.0-0`):(a("no pr"),c="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),a("caret return",c),c}))},T=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>C(e,t))).join(" ")),C=(e,t)=>{e=e.trim();const r=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(r,((r,n,i,o,s,c)=>{a("xRange",e,r,n,i,o,s,c);const u=S(i),l=u||S(o),d=l||S(s),p=d;return"="===n&&p&&(n=""),c=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(l&&(o=0),s=0,">"===n?(n=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),"<"===n&&(c="-0"),r=`${n+i}.${o}.${s}${c}`):l?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),a("xRange return",r),r}))},I=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),O=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),x=e=>(t,r,n,i,o,s,a,c,u,l,d,p,f)=>`${r=S(n)?"":S(i)?`>=${n}.0.0${e?"-0":""}`:S(o)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=S(u)?"":S(l)?`<${+u+1}.0.0-0`:S(d)?`<${u}.${+l+1}.0-0`:p?`<=${u}.${l}.${d}-${p}`:e?`<${u}.${l}.${+d+1}-0`:`<=${c}`}`.trim(),N=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(a(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},26376:(e,t,r)=>{const n=r(74225),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(83295),{safeRe:s,t:a}=r(55765),c=r(12893),{compareIdentifiers:u}=r(86742);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},13507:(e,t,r)=>{const n=r(33959);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},7539:(e,t,r)=>{const n=r(58718),i=r(81194),o=r(71312),s=r(25903),a=r(21544),c=r(12056);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return i(e,r,u);case">":return o(e,r,u);case">=":return s(e,r,u);case"<":return a(e,r,u);case"<=":return c(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},99038:(e,t,r)=>{const n=r(26376),i=r(33959),{safeRe:o,t:s}=r(55765);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=o[s.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),o[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;o[s.COERCERTL].lastIndex=-1}else r=e.match(o[s.COERCE]);return null===r?null:i(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},88880:(e,t,r)=>{const n=r(26376);e.exports=(e,t,r)=>{const i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},27880:(e,t,r)=>{const n=r(46269);e.exports=(e,t)=>n(e,t,!0)},46269:(e,t,r)=>{const n=r(26376);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},62378:(e,t,r)=>{const n=r(33959);e.exports=(e,t)=>{const r=n(e,null,!0),i=n(t,null,!0),o=r.compare(i);if(0===o)return null;const s=o>0,a=s?r:i,c=s?i:r,u=!!a.prerelease.length;if(c.prerelease.length&&!u)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=u?"pre":"";return r.major!==i.major?l+"major":r.minor!==i.minor?l+"minor":r.patch!==i.patch?l+"patch":"prerelease"}},58718:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>0===n(e,t,r)},71312:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(e,t,r)>0},25903:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(e,t,r)>=0},20253:(e,t,r)=>{const n=r(26376);e.exports=(e,t,r,i,o)=>{"string"==typeof r&&(o=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,o).version}catch(e){return null}}},21544:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(e,t,r)<0},12056:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(e,t,r)<=0},38679:(e,t,r)=>{const n=r(26376);e.exports=(e,t)=>new n(e,t).major},87789:(e,t,r)=>{const n=r(26376);e.exports=(e,t)=>new n(e,t).minor},81194:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>0!==n(e,t,r)},33959:(e,t,r)=>{const n=r(26376);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},52358:(e,t,r)=>{const n=r(26376);e.exports=(e,t)=>new n(e,t).patch},57559:(e,t,r)=>{const n=r(33959);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},79795:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(t,e,r)},63657:(e,t,r)=>{const n=r(88880);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},45712:(e,t,r)=>{const n=r(66902);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},21100:(e,t,r)=>{const n=r(88880);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},76397:(e,t,r)=>{const n=r(33959);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},81249:(e,t,r)=>{const n=r(55765),i=r(83295),o=r(26376),s=r(86742),a=r(33959),c=r(76397),u=r(13507),l=r(20253),d=r(62378),p=r(38679),f=r(87789),h=r(52358),g=r(57559),m=r(46269),v=r(79795),y=r(27880),_=r(88880),S=r(21100),w=r(63657),E=r(71312),b=r(21544),P=r(58718),T=r(81194),C=r(25903),I=r(12056),O=r(7539),x=r(99038),N=r(22257),k=r(66902),A=r(45712),R=r(51042),D=r(85775),j=r(71657),M=r(95316),L=r(89042),F=r(6826),U=r(97606),B=r(50032),V=r(82937),$=r(17908),q=r(50799);e.exports={parse:a,valid:c,clean:u,inc:l,diff:d,major:p,minor:f,patch:h,prerelease:g,compare:m,rcompare:v,compareLoose:y,compareBuild:_,sort:S,rsort:w,gt:E,lt:b,eq:P,neq:T,gte:C,lte:I,cmp:O,coerce:x,Comparator:N,Range:k,satisfies:A,toComparators:R,maxSatisfying:D,minSatisfying:j,minVersion:M,validRange:L,outside:F,gtr:U,ltr:B,intersects:V,simplifyRange:$,subset:q,SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},83295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},74225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},86742:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},12893:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},55765:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(83295),s=r(74225),a=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let d=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[p,i]],h=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=d++;s(e,i,t),l[e]=i,u[i]=t,a[i]=new RegExp(t,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),h("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${p}+`),h("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),h("FULL",`^${u[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),h("LOOSE",`^${u[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),h("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",u[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},97606:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,">",r)},82937:(e,t,r)=>{const n=r(66902);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},50032:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,"<",r)},85775:(e,t,r)=>{const n=r(26376),i=r(66902);e.exports=(e,t,r)=>{let o=null,s=null,a=null;try{a=new i(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new n(o,r)))})),o}},71657:(e,t,r)=>{const n=r(26376),i=r(66902);e.exports=(e,t,r)=>{let o=null,s=null,a=null;try{a=new i(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new n(o,r)))})),o}},95316:(e,t,r)=>{const n=r(26376),i=r(66902),o=r(71312);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let s=null;i.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||r&&!o(r,s)||(r=s)}return r&&e.test(r)?r:null}},6826:(e,t,r)=>{const n=r(26376),i=r(22257),{ANY:o}=i,s=r(66902),a=r(45712),c=r(71312),u=r(21544),l=r(12056),d=r(25903);e.exports=(e,t,r,p)=>{let f,h,g,m,v;switch(e=new n(e,p),t=new s(t,p),r){case">":f=c,h=l,g=u,m=">",v=">=";break;case"<":f=u,h=d,g=c,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,a=null;if(n.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,f(e.semver,s.semver,p)?s=e:g(e.semver,a.semver,p)&&(a=e)})),s.operator===m||s.operator===v)return!1;if((!a.operator||a.operator===m)&&h(e,a.semver))return!1;if(a.operator===v&&g(e,a.semver))return!1}return!0}},17908:(e,t,r)=>{const n=r(45712),i=r(46269);e.exports=(e,t,r)=>{const o=[];let s=null,a=null;const c=e.sort(((e,t)=>i(e,t,r)));for(const e of c)n(e,t,r)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},50799:(e,t,r)=>{const n=r(66902),i=r(22257),{ANY:o}=i,s=r(45712),a=r(46269),c=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],l=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?c:u}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=u}const n=new Set;let i,l,f,h,g,m,v;for(const t of e)">"===t.operator||">="===t.operator?i=d(i,t,r):"<"===t.operator||"<="===t.operator?l=p(l,t,r):n.add(t.semver);if(n.size>1)return null;if(i&&l){if(f=a(i.semver,l.semver,r),f>0)return null;if(0===f&&(">="!==i.operator||"<="!==l.operator))return null}for(const e of n){if(i&&!s(e,String(i),r))return null;if(l&&!s(e,String(l),r))return null;for(const n of t)if(!s(e,String(n),r))return!1;return!0}let y=!(!l||r.includePrerelease||!l.semver.prerelease.length)&&l.semver,_=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;y&&1===y.prerelease.length&&"<"===l.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,i)if(_&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===_.major&&e.semver.minor===_.minor&&e.semver.patch===_.patch&&(_=!1),">"===e.operator||">="===e.operator){if(h=d(i,e,r),h===e&&h!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(e),r))return!1;if(l)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(g=p(l,e,r),g===e&&g!==l)return!1}else if("<="===l.operator&&!s(l.semver,String(e),r))return!1;if(!e.operator&&(l||i)&&0!==f)return!1}return!(i&&m&&!l&&0!==f||l&&v&&!i&&0!==f||_||y)},d=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(const n of e.set){for(const e of t.set){const t=l(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},51042:(e,t,r)=>{const n=r(66902);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},89042:(e,t,r)=>{const n=r(66902);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},69887:e=>{"use strict";e.exports=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}},14802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationService=void 0;var n=r(26363);Object.defineProperty(t,"ExperimentationService",{enumerable:!0,get:function(){return n.ExperimentationService}})},26363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationService=void 0;const n=r(34067),i=r(93299),o=r(15975);class s extends o.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],null!=e.refetchInterval?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new n.TasApiFeatureProvider(new i.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}t.ExperimentationService=s,s.REFRESH_RATE_IN_MINUTES=30},15975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationServiceAutoPolling=void 0;const n=r(23663),i=r(73334);class o extends n.ExperimentationServiceBase{constructor(e,t,r,n,o,s,a){if(super(e,n,o,s,a),this.telemetry=e,this.filterProviders=t,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=o,this.storageKey=s,this.storage=a,r<1e3&&0!==r)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new i.PollingService(r),this.pollingService.OnPollTick((async()=>{await super.getFeaturesAsync()})))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let t=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),t}return await super.getFeaturesAsync(e)}}t.ExperimentationServiceAutoPolling=o},23663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationServiceBase=void 0;const n=r(17002);t.ExperimentationServiceBase=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,t,r,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=t,this.telemetryEventName=r,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new n.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise(((e,t)=>{this.resolveInitialFetchPromise=e}))}async getFeaturesAsync(e=!1){if(null!=this.fetchPromise){try{await this.fetchPromise}catch(e){}return this.features}if(!this.featureProviders||0===this.featureProviders.length)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map((async e=>await e.getFeatures())));const t=await this.fetchPromise;this.updateFeatures(t,e)}catch(e){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,t=!1){let r={features:[],assignmentContext:"",configs:[]};for(let t of e){for(let e of t.features)r.features.includes(e)||r.features.push(e);for(let e of t.configs){const t=r.configs.find((t=>t.Id===e.Id));t?t.Parameters=Object.assign(Object.assign({},t.Parameters),e.Parameters):r.configs.push(e)}r.assignmentContext+=t.assignmentContext}!t&&this.featuresConsumed||(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),void 0!==e&&void 0===e.configs&&(e.configs=[])),0===this.features.features.length&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){const t=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),t.features.includes(e)}getTreatmentVariable(e,t){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${t}`);const r=this.features.configs.find((t=>t.Id===e));return null==r?void 0:r.Parameters[t]}async getTreatmentVariableAsync(e,t,r){if(r){const r=this.featuresConsumed,n=this.getTreatmentVariable(e,t);if(void 0!==n)return n;this.featuresConsumed=r}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,t)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(null!=e&&null!=this.featureProviders)for(let t of e)this.featureProviders.push(t)}}},60069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureProvider=void 0,t.BaseFeatureProvider=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}}},94e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilteredFeatureProvider=void 0;const n=r(60069);class i extends n.BaseFeatureProvider{constructor(e,t){super(e),this.telemetry=e,this.filterProviders=t,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let t of this.filterProviders){let r=t.getFilters();for(let t of r.keys()){let n=r.get(t);e.set(t,n)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;const t=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",t]])),this.cachedTelemetryEvents.push(e)}}t.FilteredFeatureProvider=i},34067:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TasApiFeatureProvider=t.TASAPI_FETCHERROR_EVENTNAME=void 0;const n=r(94e3);t.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";const i="ErrorType";class o extends n.FilteredFeatureProvider{constructor(e,t,r){super(t,r),this.httpClient=e,this.telemetry=t,this.filterProviders=r}async fetch(){let e,r=this.getFilters(),n={};for(let e of r.keys()){const t=r.get(e);n[e]=t}try{e=await this.httpClient.get({headers:n})}catch(e){const r=e,n=new Map;r.responseReceived&&!r.responseOk?n.set(i,"ServerError"):!1===r.responseReceived?n.set(i,"NoResponse"):n.set(i,"GenericError"),this.telemetry.postEvent(t.TASAPI_FETCHERROR_EVENTNAME,n)}if(!e)throw Error(t.TASAPI_FETCHERROR_EVENTNAME);r.keys.length>0&&this.PostEventToTelemetry(n);const o=e.data;let s=o.Configs,a=[];for(let e of s)if(e.Parameters)for(let t of Object.keys(e.Parameters)){const r=t+(e.Parameters[t]?"":"cf");a.includes(r)||a.push(r)}return{features:a,assignmentContext:o.AssignmentContext,configs:s}}}t.TasApiFeatureProvider=o},93299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=t.FetchError=void 0;class r extends Error{constructor(e,t,r){super(e),this.responseReceived=t,this.responseOk=r}}t.FetchError=r,t.HttpClient=class{constructor(e){this.endpoint=e}async get(e){const t=await fetch(this.endpoint,{method:"GET",headers:null==e?void 0:e.headers});if(!t)throw new r("No response received",!1);if(!t.ok)throw new r("Response not ok",!0,!1);const n=await t.json();if(!n)throw new r("No data received",!1);return{data:n}}}},17002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryKeyValueStorage=void 0,t.MemoryKeyValueStorage=class{constructor(){this.storage=new Map}async getValue(e,t){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(t||void 0)}setValue(e,t){this.storage.set(e,t)}}},73334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollingService=void 0,t.PollingService=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),null!=this.onTick&&(e&&this.onTick().then((()=>{})).catch((()=>{})),this.intervalHandle=setInterval((async()=>{await this.onTick()}),this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}},38981:(e,t)=>{"use strict";t.fromCallback=function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise(((r,n)=>{t.push(((e,t)=>null!=e?n(e):r(t))),e.apply(this,t)}));e.apply(this,t)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(...t){const r=t[t.length-1];if("function"!=typeof r)return e.apply(this,t);t.pop(),e.apply(this,t).then((e=>r(null,e)),r)}),"name",{value:e.name})}},42600:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>P,parse:()=>y,stringify:()=>p,v1:()=>v,v3:()=>S,v4:()=>E,v5:()=>b,validate:()=>u,version:()=>T});var n=r(6113),i=r.n(n);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i().randomFillSync(o),s=0),o.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function d(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}const p=function(e,t=0){const r=d(e,t);if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let f,h,g=0,m=0;const v=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let o=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=h=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:m+1;const l=c-g+(u-m)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||c>g)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,m=u,h=s,c+=122192928e5;const p=(1e4*(268435455&c)+u)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=255&p;const v=c/4294967296*1e4&268435455;i[n++]=v>>>8&255,i[n++]=255&v,i[n++]=v>>>24&15|16,i[n++]=v>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||d(i)},y=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function _(e,t,r){function n(e,n,i,o){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=a[e];return i}return d(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const S=_("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("md5").update(e).digest()})),w={randomUUID:i().randomUUID},E=function(e,t,r){if(w.randomUUID&&!t&&!e)return w.randomUUID();const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)},b=_("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("sha1").update(e).digest()})),P="00000000-0000-0000-0000-000000000000",T=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},73384:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.MeasurementEntries=t.DimensionEntries=t.ErrorType=t.ErrorCodes=t.EventName=void 0,(i=t.EventName||(t.EventName={})).ERROR="error",i.INFO="info",i.OPERATION_START="opStart",i.OPERATION_END="opEnd",i.OPERATION_STEP="opStep",(n=t.ErrorCodes||(t.ErrorCodes={})).NO_ERROR=0,n.GENERAL_ERROR=1,(r=t.ErrorType||(t.ErrorType={})).USER_ERROR="userError",r.SYSTEM_ERROR="systemError",t.DimensionEntries=["operationId","operationName","errorCode","errorType","message","stack","stepName"],t.MeasurementEntries=["duration"]},86800:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.addReplacementRule=t.addContextProperty=t.dispose=t.createUuid=t.instrumentOperationStep=t.sendInfo=t.sendOperationError=t.sendError=t.sendOperationEnd=t.sendOperationStart=t.instrumentOperationAsVsCodeCommand=t.instrumentSimpleOperation=t.instrumentOperation=t.setErrorCode=t.setUserError=t.initialize=t.initializeFromJsonFile=void 0;const i=r(57147),o=r(69183),s=r(89496),a=r(75683),c=r(73384),u=r(75005);let l,d=!1;const p={},f=[],h=[c.EventName.ERROR,c.EventName.OPERATION_END,c.EventName.OPERATION_STEP];function g(e,t,r,n){if(l)throw new Error("TelemetryReporter already initialized.");if(r){const i=n&&n.firstParty;l=r instanceof Array?r.map((r=>new a.default(e,t,r,i))):[new a.default(e,t,r,i)]}u.Output.setExtensionId(e),d=!(!n||!n.debug)||"true"===process.env.DEBUG_TELEMETRY}function m(e,t,r){return(...i)=>n(this,void 0,void 0,(function*(){let n;const o=w(),s=Date.now();try{return y(o,e),yield t.apply(r,[o,...i])}catch(t){n=t,S(o,e,n)}finally{const t=Date.now()-s;_(o,e,t,n)}}))}function v(e,t,r){return m(e,((e,...i)=>n(this,void 0,void 0,(function*(){return yield t.apply(r,i)}))),r)}function y(e,t){b({eventName:c.EventName.OPERATION_START,operationId:e,operationName:t})}function _(e,t,r,n){b(Object.assign({eventName:c.EventName.OPERATION_END,operationId:e,operationName:t,duration:r},E(n)))}function S(e,t,r){b(Object.assign({eventName:c.EventName.ERROR,operationId:e,operationName:t},E(r)))}function w(){return o.v4()}function E(e){if(!e)return{errorCode:c.ErrorCodes.NO_ERROR};const t=e;return{errorCode:t.errorCode||c.ErrorCodes.GENERAL_ERROR,errorType:t.isUserError?c.ErrorType.USER_ERROR:c.ErrorType.SYSTEM_ERROR,message:e.message,stack:e.stack}}function b(e){if(!l)return void console.warn("TelemetryReporter not initialized.");const t={};for(const r of c.DimensionEntries){const n=e[r];void 0!==n&&(t[r]=String(n))}const r={};for(const t of c.MeasurementEntries){const n=e[t];void 0!==n&&(r[t]=n)}P(e.eventName,t,r)}function P(e,t,r){if(l){t=null!=t?t:{};for(const e of Object.keys(t))t[e]=T(f,t[e]);t=Object.assign(Object.assign({},p),t),e in h?l.forEach((n=>{n.sendTelemetryErrorEvent(e,t,r)})):l.forEach((n=>{n.sendTelemetryEvent(e,t,r)})),d&&(u.Output.getInstance().appendLine(`>> ${(new Date).toISOString()}`),u.Output.getInstance().appendLine(JSON.stringify({eventName:e,dimensions:t,measurements:r},null,2)))}else console.warn("TelemetryReporter not initialized.")}function T(e,t){for(const r of e)t=t.replace(r.pattern,r.replace);return t}t.initializeFromJsonFile=function(e,t){return n(this,void 0,void 0,(function*(){try{yield i.promises.access(e);const{publisher:r,name:n,version:o,aiKey:s}=JSON.parse(i.readFileSync(e,"utf-8"));g(`${r}.${n}`,o,s,t)}catch(t){throw new Error(`The JSON file '${e}' does not exist.`)}}))},t.initialize=g,t.setUserError=function(e){e.isUserError=!0},t.setErrorCode=function(e,t){e.errorCode=t},t.instrumentOperation=m,t.instrumentSimpleOperation=v,t.instrumentOperationAsVsCodeCommand=function(e,t,r){return s.commands.registerCommand(e,v(e,t,r))},t.sendOperationStart=y,t.sendOperationEnd=_,t.sendError=function(e){b(Object.assign({eventName:c.EventName.ERROR},E(e)))},t.sendOperationError=S,t.sendInfo=function(e,t,r){if(!l)return void console.warn("TelemetryReporter not initialized.");let n,i;if(r)n=t,i=r;else{n={},i={};for(const e in t)"string"==typeof t[e]?n[e]=t[e]:"number"==typeof t[e]&&(i[e]=t[e])}P(c.EventName.INFO,Object.assign(Object.assign({},n),{operationId:e}),i)},t.instrumentOperationStep=function(e,t,r){return(...i)=>n(this,void 0,void 0,(function*(){let n;const o=Date.now();try{return yield r(...i)}catch(e){throw n=e,e}finally{b(Object.assign({eventName:c.EventName.OPERATION_STEP,operationId:e,stepName:t,duration:Date.now()-o},E(n)))}}))},t.createUuid=w,t.dispose=function(){return n(this,void 0,void 0,(function*(){if(l)return yield Promise.all(l.map((e=>e.dispose())))}))},t.addContextProperty=function(e,t){p[e]=t},t.addReplacementRule=function(e,t){f.push({pattern:e,replace:null!=t?t:""})}},75005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Output=void 0;const n=r(89496);class i{constructor(){}static getInstance(){return this.INSTANCE||(this.INSTANCE=n.window.createOutputChannel(`Telemetry Wrapper (${i.extensionId})`)),this.INSTANCE}static setExtensionId(e){i.extensionId=e}}t.Output=i},75683:(e,t,r)=>{var n,i=Object.create,o=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(l)for(var r of l(t))f.call(t,r)&&h(e,r,t[r]);return e},m=(e,t)=>s(e,c(t)),v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),y=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of u(t))!p.call(e,i)&&i!==r&&o(e,i,{get:()=>t[i],enumerable:!(n=a(t,i))||n.enumerable});return e},_=(e,t,r)=>(r=null!=e?i(d(e)):{},y(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),S=v(((e,t)=>{"use strict";var r=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();t.exports=r})),w=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var n=vn(),i=r(82361),o=function(){function e(){}return e.prototype.active=function(){var e=this,r=n.CorrelationContextManager.getCurrentContext();return t(t({},r),{getValue:function(t){return e._activeSymbol?t===e._activeSymbol&&r:(e._activeSymbol=t,r)},setValue:function(){}})},e.prototype.with=function(t,r){var i=t.parentSpanId,o=t.name,s=e._spanToContext(t,i,o);return n.CorrelationContextManager.runWithContext(s,r)()},e.prototype.bind=function(e){return"function"==typeof e?n.CorrelationContextManager.wrapCallback(e):(e instanceof i.EventEmitter&&n.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return n.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return n.CorrelationContextManager.disable(),this},e._spanToContext=function(e,r,i){var o=r?"|"+e.spanContext().traceId+"."+r+".":e.spanContext().traceId,s=t(t({},e.spanContext()),{traceFlags:e.spanContext().traceFlags});return n.CorrelationContextManager.spanToContextObject(s,o,i)},e}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o})),E=v(((e,t)=>{var r;e=t.exports=G,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=a++;s[f]="(?:"+s[c]+"|"+s[l]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var m=a++;s[m]="(?:-?("+s[h]+"(?:\\."+s[h]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var _=a++,S="v?"+s[d]+s[g]+"?"+s[y]+"?";s[_]="^"+S+"$";var w="[v=\\s]*"+s[p]+s[m]+"?"+s[y]+"?",E=a++;s[E]="^"+w+"$";var b=a++;s[b]="((?:<|>)?=?)";var P=a++;s[P]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var C=a++;s[C]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var I=a++;s[I]="[v=\\s]*("+s[P]+")(?:\\.("+s[P]+")(?:\\.("+s[P]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var O=a++;s[O]="^"+s[b]+"\\s*"+s[C]+"$";var x=a++;s[x]="^"+s[b]+"\\s*"+s[I]+"$";var N=a++;s[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var k=a++;s[k]="(?:~>?)";var A=a++;s[A]="(\\s*)"+s[k]+"\\s+",o[A]=new RegExp(s[A],"g");var R=a++;s[R]="^"+s[k]+s[C]+"$";var D=a++;s[D]="^"+s[k]+s[I]+"$";var j=a++;s[j]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[j]+"\\s+",o[M]=new RegExp(s[M],"g");var L=a++;s[L]="^"+s[j]+s[C]+"$";var F=a++;s[F]="^"+s[j]+s[I]+"$";var U=a++;s[U]="^"+s[b]+"\\s*("+w+")$|^$";var B=a++;s[B]="^"+s[b]+"\\s*("+S+")$|^$";var V=a++;s[V]="(\\s*)"+s[b]+"\\s*("+w+"|"+s[C]+")",o[V]=new RegExp(s[V],"g");var $=a++;s[$]="^\\s*("+s[C]+")\\s+-\\s+("+s[C]+")\\s*$";var q=a++;s[q]="^\\s*("+s[I]+")\\s+-\\s+("+s[I]+")\\s*$";var H,z=a++;for(s[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)r(H,s[H]),o[H]||(o[H]=new RegExp(s[H]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof G)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?o[E]:o[_]).test(e))return null;try{return new G(e,t)}catch{return null}}function G(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof G){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof G))return new G(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[E]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var r=W(e,t);return r?r.version:null},e.clean=function(e,t){var r=W(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof G||(e=new G(e,this.options)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return X(n,i)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new G(e,r).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=W(e),n=W(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new G(e,r).compare(new G(t,r))}function Q(e,t,r){return J(e,t,r)>0}function Y(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function ee(e,t,r){return 0!==J(e,t,r)}function te(e,t,r){return J(e,t,r)>=0}function re(e,t,r){return J(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return Q(e,r,n);case">=":return te(e,r,n);case"<":return Y(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new G(e,t).major},e.minor=function(e,t){return new G(e,t).minor},e.patch=function(e,t){return new G(e,t).patch},e.compare=J,e.compareLoose=function(e,t){return J(e,t,!0)},e.rcompare=function(e,t,r){return J(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=Q,e.lt=Y,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=ie;var oe={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,i,o,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch{return!1}return t.test(e)}function de(e,t,r,n){var i,o,s,a,c;switch(e=new G(e,n),t=new se(t,n),r){case">":i=Q,o=re,s=Y,a=">",c=">=";break;case"<":i=Y,o=te,s=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[U]:o[B],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new G(r[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new G(e,this.options)),ne(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[q]:o[$];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(o[V],"$1$2$3"),r("comparator trim",e,o[V]),e=(e=(e=e.replace(o[A],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[U]:o[B],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[F]:o[L];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[D]:o[R];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[x]:o[O];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(o=0),s=0,">"===n?(n=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",u?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[z],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new ie(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||-1===i.compare(e))&&(i=new G(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||1===i.compare(e))&&(i=new G(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new G("0.0.0");if(e.test(r)||(r=new G("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new G(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||Q(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=W(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(o[N]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),b=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=r(71017),n=E(),i=r(98188),o=Object.keys(process.binding("natives")),s=i.prototype.require;e.makePatchingRequire=function(e){var r={};return function(a){var c=s.apply(this,arguments);if(e[a]){var u=i._resolveFilename(a,this);if(r.hasOwnProperty(u))return r[u];var l=void 0;if(o.indexOf(a)<0)try{l=s.call(this,t.join(a,"package.json")).version}catch{return c}else l=process.version.substring(1);var d=l.indexOf("-");d>=0&&(l=l.substring(0,d));for(var p=c,f=0,h=e[a];f<h.length;f++){var g=h[f];n.satisfies(l,g.versionSpecifier)&&(p=g.patch(p,u))}return r[u]=p}return c}}})),P=v(((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}})),T=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=b(),n=b();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return n.makePatchingRequire}});var i=function(e){return!0},o=function(){function e(){this.version=P().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var r=this.subscribers[e];if(r){var n={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,r.forEach((function(e){var t=e.listener,r=e.filter;try{r&&r(!0)&&t(n)}catch{}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,r){void 0===r&&(r=i),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:r})},e.prototype.unsubscribe=function(e,t,r){void 0===r&&(r=i);var n=this.subscribers[e];if(n)for(var o=0;o<n.length;++o)if(n[o].listener===t&&n[o].filter===r)return n.splice(o,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(r){return e(t(r))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new o,r(98188).prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),e.channel=global.diagnosticsSource})),C=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),I=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis="object"==typeof globalThis?globalThis:global})),O=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(I(),e)})),x=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(O(),e)})),N=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"})),k=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=N(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(e){var t=new Set([e]),n=new Set,i=e.match(r);if(!i)return function(){return!1};var o=+i[1],s=+i[2],a=+i[3];if(null!=i[4])return function(t){return t===e};function c(e){return n.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var i=e.match(r);if(!i)return c(e);var l=+i[1],d=+i[2],p=+i[3];return null!=i[4]||o!==l?c(e):0===o?s===d&&a<=p?u(e):c(e):s<=d?u(e):c(e)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)})),A=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=x(),r=N(),n=k(),i=r.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=t._globalThis;e.registerGlobal=function(e,t,n,i){var a;void 0===i&&(i=!1);var c=s[o]=null!==(a=s[o])&&void 0!==a?a:{version:r.VERSION};if(!i&&c[e]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(u.stack||u.message),!1}return c.version!==r.VERSION?(u=new Error("@opentelemetry/api: All API registration versions must match"),n.error(u.stack||u.message),!1):(c[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+r.VERSION+"."),!0)},e.getGlobal=function(e){var t,r,i=null===(t=s[o])||void 0===t?void 0:t.version;if(i&&n.isCompatible(i))return null===(r=s[o])||void 0===r?void 0:r[e]},e.unregisterGlobal=function(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+r.VERSION+".");var n=s[o];n&&delete n[e]}})),R=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=A(),r=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("verbose",this._namespace,e)},e}();function n(e,r,n){var i=t.getGlobal("diag");if(i)return n.unshift(r),i[e].apply(i,n)}e.DiagComponentLogger=r})),D=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(t=e.DiagLogLevel||(e.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})),j=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=D();e.createLogLevelDiagLogger=function(e,r){function n(t,n){var i=r[t];return"function"==typeof i&&e>=n?i.bind(r):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),r=r||{},{error:n("error",t.DiagLogLevel.ERROR),warn:n("warn",t.DiagLogLevel.WARN),info:n("info",t.DiagLogLevel.INFO),debug:n("debug",t.DiagLogLevel.DEBUG),verbose:n("verbose",t.DiagLogLevel.VERBOSE)}}})),M=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=R(),r=j(),n=D(),i=A(),o=function(){function e(){function e(e){return function(){var t=i.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var o=this;o.setLogger=function(e,t){var s,a;if(void 0===t&&(t=n.DiagLogLevel.INFO),e===o){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return o.error(null!==(s=c.stack)&&void 0!==s?s:c.message),!1}var u=i.getGlobal("diag"),l=r.createLogLevelDiagLogger(t,e);if(u){var d=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),l.warn("Current logger will overwrite one already registered from "+d)}return i.registerGlobal("diag",l,o,!0)},o.disable=function(){i.unregisterGlobal("diag",o)},o.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},o.verbose=e("verbose"),o.debug=e("debug"),o.info=e("info"),o.warn=e("warn"),o.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.DiagAPI=o})),L=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),i=0,o=t;i<o.length;i++){var s=o[i];n._entries.delete(s)}return n},e.prototype.clear=function(){return new e},e}();e.BaggageImpl=t})),F=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")})),U=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=M(),r=L(),n=F(),i=t.DiagAPI.instance();e.createBaggage=function(e){return void 0===e&&(e={}),new r.BaggageImpl(new Map(Object.entries(e)))},e.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(i.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return e}}}})),B=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),V=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];e.DiagConsoleLogger=function(){function e(e){return function(){var t=arguments;if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var r=0;r<t.length;r++)this[t[r].n]=e(t[r].c)}})),q=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r($(),e),r(D(),e)})),H=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},e.defaultTextMapSetter={set:function(e,t,r){null!=e&&(e[t]=r)}}})),z=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),W=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),G=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(e){return Symbol.for(e)};e.ROOT_CONTEXT=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var i=new e(r._currentContext);return i._currentContext.set(t,n),i},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}}})),K=v((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=G(),n=function(){function e(){}return e.prototype.active=function(){return r.ROOT_CONTEXT},e.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,t([n],i))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();e.NoopContextManager=n})),X=v((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=K(),n=A(),i=M(),o="context",s=new r.NoopContextManager,a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return n.registerGlobal(o,e,i.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,t([e,r,n],o))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return n.getGlobal(o)||s},e.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(o,i.DiagAPI.instance())},e}();e.ContextAPI=a})),J=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(t=e.TraceFlags||(e.TraceFlags={}))[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})),Q=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=J();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}})),Y=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=Q(),r=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();e.NonRecordingSpan=r})),Z=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=G(),r=Y(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function i(e){return e.getValue(n)||void 0}function o(e,t){return e.setValue(n,t)}e.getSpan=i,e.setSpan=o,e.deleteSpan=function(e){return e.deleteValue(n)},e.setSpanContext=function(e,t){return o(e,new r.NonRecordingSpan(t))},e.getSpanContext=function(e){var t;return null===(t=i(e))||void 0===t?void 0:t.spanContext()}})),ee=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=Q(),r=Y(),n=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(e){return n.test(e)&&e!==t.INVALID_TRACEID}function s(e){return i.test(e)&&e!==t.INVALID_SPANID}e.isValidTraceId=o,e.isValidSpanId=s,e.isSpanContextValid=function(e){return o(e.traceId)&&s(e.spanId)},e.wrapSpanContext=function(e){return new r.NonRecordingSpan(e)}})),te=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=X(),r=Z(),n=Y(),i=ee(),o=t.ContextAPI.getInstance(),s=function(){function e(){}return e.prototype.startSpan=function(e,t,o){if(Boolean(null==t?void 0:t.root))return new n.NonRecordingSpan;var s=o&&r.getSpanContext(o);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(s)&&i.isSpanContextValid(s)?new n.NonRecordingSpan(s):new n.NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,n,i){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(s=t,c=n):(s=t,a=n,c=i);var u=a??o.active(),l=this.startSpan(e,s,u),d=r.setSpan(u,l);return o.with(d,c,void 0,l)}},e}();e.NoopTracer=s})),re=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=new(te().NoopTracer),r=function(){function e(e,t,r){this._provider=e,this.name=t,this.version=r}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):t},e}();e.ProxyTracer=r})),ne=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=te(),r=function(){function e(){}return e.prototype.getTracer=function(e,r){return new t.NoopTracer},e}();e.NoopTracerProvider=r})),ie=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=re(),r=new(ne().NoopTracerProvider),n=function(){function e(){}return e.prototype.getTracer=function(e,r){var n;return null!==(n=this.getDelegateTracer(e,r))&&void 0!==n?n:new t.ProxyTracer(this,e,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:r},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t)},e}();e.ProxyTracerProvider=n})),oe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),se=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(t=e.SamplingDecision||(e.SamplingDecision={}))[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})),ae=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ce=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(t=e.SpanKind||(e.SpanKind={}))[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})),ue=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),le=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),de=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(t=e.SpanStatusCode||(e.SpanStatusCode={}))[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})),pe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),fe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),he=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ge=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),me=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=A(),r=ie(),n=ee(),i=Z(),o=M(),s="trace",a=function(){function e(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var r=t.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},e.prototype.getTracerProvider=function(){return t.getGlobal(s)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){t.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},e}();e.TraceAPI=a})),ve=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();e.NoopTextMapPropagator=t})),ye=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=G().createContextKey("OpenTelemetry Baggage Key");e.getBaggage=function(e){return e.getValue(t)||void 0},e.setBaggage=function(e,r){return e.setValue(t,r)},e.deleteBaggage=function(e){return e.deleteValue(t)}})),_e=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=A(),r=ve(),n=H(),i=ye(),o=U(),s=M(),a="propagation",c=new r.NoopTextMapPropagator,u=function(){function e(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return t.registerGlobal(a,e,s.DiagAPI.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=n.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=n.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){t.unregisterGlobal(a,s.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},e}();e.PropagationAPI=u})),Se=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,r(C(),e);var n=U();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(B(),e),r(V(),e),r(q(),e),r(H(),e),r(z(),e),r(W(),e),r(re(),e),r(ie(),e),r(oe(),e),r(se(),e),r(ae(),e),r(ce(),e),r(ue(),e),r(le(),e),r(de(),e),r(J(),e),r(pe(),e),r(fe(),e),r(he(),e);var i=ee();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}});var o=Q();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return o.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return o.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return o.INVALID_SPAN_CONTEXT}}),r(G(),e),r(ge(),e);var s=X();e.context=s.ContextAPI.getInstance();var a=me();e.trace=a.TraceAPI.getInstance();var c=_e();e.propagation=c.PropagationAPI.getInstance();var u=M();e.diag=u.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}})),we=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=Se().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");e.suppressTracing=function(e){return e.setValue(t,!0)},e.unsuppressTracing=function(e){return e.deleteValue(t)},e.isTracingSuppressed=function(e){return!0===e.getValue(t)}})),Ee=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192})),be=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=Se(),r=Ee();e.serializeKeyPairs=e=>e.reduce(((e,t)=>{let n=`${e}${""!==e?r.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return n.length>r.BAGGAGE_MAX_TOTAL_LENGTH?e:n}),""),e.getKeyPairs=e=>e.getAllEntries().map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`)),e.parsePairKeyValue=e=>{let n=e.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(n.length<=0)return;let i=n.shift();if(!i)return;let o=i.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==o.length)return;let s,a=decodeURIComponent(o[0].trim()),c=decodeURIComponent(o[1].trim());return n.length>0&&(s=t.baggageEntryMetadataFromString(n.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:a,value:c,metadata:s}},e.parseKeyPairsIntoRecord=t=>"string"!=typeof t||0===t.length?{}:t.split(r.BAGGAGE_ITEMS_SEPARATOR).map((t=>e.parsePairKeyValue(t))).filter((e=>void 0!==e&&e.value.length>0)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})})),Pe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=Se(),r=we(),n=Ee(),i=be();e.HttpBaggagePropagator=class{inject(e,o,s){let a=t.propagation.getBaggage(e);if(!a||r.isTracingSuppressed(e))return;let c=i.getKeyPairs(a).filter((e=>e.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=i.serializeKeyPairs(c);u.length>0&&s.set(o,n.BAGGAGE_HEADER,u)}extract(e,r,o){let s=o.get(r,n.BAGGAGE_HEADER);if(!s)return e;let a={};return 0===s.length||(s.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{let t=i.parsePairKeyValue(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),a[t.key]=e}})),0===Object.entries(a).length)?e:t.propagation.setBaggage(e,t.propagation.createBaggage(a))}fields(){return[n.BAGGAGE_HEADER]}}})),Te=v((e=>{"use strict";function t(e){return null==e||(Array.isArray(e)?function(e){let t;for(let n of e)if(null!=n){if(!t){if(r(n)){t=typeof n;continue}return!1}if(typeof n!==t)return!1}return!0}(e):r(e))}function r(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0,e.sanitizeAttributes=function(e){let r={};if(null==e||"object"!=typeof e)return r;for(let[n,i]of Object.entries(e))t(i)&&(Array.isArray(i)?r[n]=i.slice():r[n]=i);return r},e.isAttributeValue=t})),Ce=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=Se();e.loggingErrorHandler=function(){return e=>{t.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){let t={},r=e;for(;null!==r;)Object.getOwnPropertyNames(r).forEach((e=>{if(t[e])return;let n=r[e];n&&(t[e]=String(n))})),r=Object.getPrototypeOf(r);return t}(e))}(e))}}})),Ie=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=Ce().loggingErrorHandler();e.setGlobalErrorHandler=function(e){t=e},e.globalErrorHandler=e=>{try{t(e)}catch{}}})),Oe=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})),xe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=Se(),r=Oe(),n=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function i(e){return n.indexOf(e)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function s(e){return o.indexOf(e)>-1}function a(e,t,r,n=-1/0,i=1/0){if(typeof r[e]<"u"){let o=Number(r[e]);isNaN(o)||(t[e]=o<n?n:o>i?i:o)}}function c(e,t,r,n=","){let i=r[e];"string"==typeof i&&(t[e]=i.split(n).map((e=>e.trim())))}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var u={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function l(e,t,r){let n=r[e];if("string"==typeof n){let r=u[n.toUpperCase()];null!=r&&(t[e]=r)}}e.parseEnvironment=function(t){let r={};for(let n in e.DEFAULT_ENVIRONMENT){let e=n;if("OTEL_LOG_LEVEL"===e)l(e,r,t);else if(i(e))a(e,r,t);else if(s(e))c(e,r,t);else{let n=t[e];typeof n<"u"&&null!==n&&(r[e]=String(n))}}return r}})),Ne=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=r(22037),n=xe();e.getEnv=function(){let e=n.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},n.DEFAULT_ENVIRONMENT,e)}})),ke=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0,e.hexToBase64=function(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let t=e.substring(n,n+2),i=parseInt(t,16);r+=String.fromCharCode(i)}return Buffer.from(r,"ascii").toString("base64")}})),Ae=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0,e.RandomIdGenerator=class{constructor(){this.generateTraceId=r(16),this.generateSpanId=r(8)}};var t=Buffer.allocUnsafe(16);function r(e){return function(){for(let r=0;r<e/4;r++)t.writeUInt32BE(Math.random()*2**32>>>0,4*r);for(let r=0;r<e&&!(t[r]>0);r++)r===e-1&&(t[e-1]=1);return t.toString("hex",0,e)}}})),Re=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=r(4074);e.otperformance=t.performance})),De=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"})),je=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(t=e.DbSystemValues||(e.DbSystemValues={})).OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch",t.MEMCACHED="memcached",t.COCKROACHDB="cockroachdb",function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"}(e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={})),function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"}(e.FaasTriggerValues||(e.FaasTriggerValues={})),function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"}(e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={})),function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"}(e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={})),function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"}(e.NetTransportValues||(e.NetTransportValues={})),function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"}(e.HttpFlavorValues||(e.HttpFlavorValues={})),function(e){e.QUEUE="queue",e.TOPIC="topic"}(e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={})),function(e){e.RECEIVE="receive",e.PROCESS="process"}(e.MessagingOperationValues||(e.MessagingOperationValues={})),function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))})),Me=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(je(),e)})),Le=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(t=e.CloudProviderValues||(e.CloudProviderValues={})).AWS="aws",t.AZURE="azure",t.GCP="gcp",function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"}(e.CloudPlatformValues||(e.CloudPlatformValues={})),function(e){e.EC2="ec2",e.FARGATE="fargate"}(e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={})),function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"}(e.HostArchValues||(e.HostArchValues={})),function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"}(e.OsTypeValues||(e.OsTypeValues={})),function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"}(e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))})),Fe=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Le(),e)})),Ue=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Me(),e),r(Fe(),e)})),Be=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=De(),r=Ue();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}})),Ve=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0,e.unrefTimer=function(e){e.unref()}})),$e=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ne(),e),r(ke(),e),r(Ae(),e),r(Re(),e),r(Be(),e),r(Ve(),e)})),qe=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r($e(),e)})),He=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=qe(),r=9,n=Math.pow(10,r);function i(e){let t=e/1e3,i=Math.trunc(t);return[i,Number((t-i).toFixed(r))*n]}function o(){let e=t.otperformance.timeOrigin;if("number"!=typeof e){let r=t.otperformance;e=r.timing&&r.timing.fetchStart}return e}function s(e){let r=i(o()),s=i("number"==typeof e?e:t.otperformance.now()),a=r[0]+s[0],c=r[1]+s[1];return c>n&&(c-=n,a+=1),[a,c]}function a(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}e.hrTime=s,e.timeInputToHrTime=function(e){if(a(e))return e;if("number"==typeof e)return e<o()?s(e):i(e);if(e instanceof Date)return i(e.getTime());throw TypeError("Invalid input type")},e.hrTimeDuration=function(e,t){let r=t[0]-e[0],i=t[1]-e[1];return i<0&&(r-=1,i+=n),[r,i]},e.hrTimeToTimeStamp=function(e){let t=r,n=`${"0".repeat(t)}${e[1]}Z`,i=n.substr(n.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",i)},e.hrTimeToNanoseconds=function(e){return e[0]*n+e[1]},e.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},e.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},e.isTimeInputHrTime=a,e.isTimeInput=function(e){return a(e)||"number"==typeof e||e instanceof Date}})),ze=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),We=v((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0,(t=e.ExportResultCode||(e.ExportResultCode={}))[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})),Ge=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=Se();e.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((e=>"function"==typeof e.fields?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,r,n){for(let i of this._propagators)try{i.inject(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}}extract(e,r,n){return this._propagators.reduce(((e,i)=>{try{return i.extract(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}})),Ke=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=new RegExp(`^(?:[a-z]${t}{0,255}|[a-z0-9]${t}{0,240}@[a-z]${t}{0,13})$`),n=/^[ -~]{0,255}[!-~]$/,i=/,|=/;e.validateKey=function(e){return r.test(e)},e.validateValue=function(e){return n.test(e)&&!i.test(e)}})),Xe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=Ke(),r=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,r)=>{let n=r.trim(),i=n.indexOf("=");if(-1!==i){let o=n.slice(0,i),s=n.slice(i+1,r.length);t.validateKey(o)&&t.validateValue(s)&&e.set(o,s)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new r;return e._internalState=new Map(this._internalState),e}};e.TraceState=r})),Je=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=Se(),r=we(),n=Xe();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var i=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function o(e){let t=i.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}e.parseTraceParent=o,e.HttpTraceContextPropagator=class{inject(n,i,o){let s=t.trace.getSpanContext(n);if(!s||r.isTracingSuppressed(n)||!t.isSpanContextValid(s))return;let a=`00-${s.traceId}-${s.spanId}-0${Number(s.traceFlags||t.TraceFlags.NONE).toString(16)}`;o.set(i,e.TRACE_PARENT_HEADER,a),s.traceState&&o.set(i,e.TRACE_STATE_HEADER,s.traceState.serialize())}extract(r,i,s){let a=s.get(i,e.TRACE_PARENT_HEADER);if(!a)return r;let c=Array.isArray(a)?a[0]:a;if("string"!=typeof c)return r;let u=o(c);if(!u)return r;u.isRemote=!0;let l=s.get(i,e.TRACE_STATE_HEADER);if(l){let e=Array.isArray(l)?l.join(","):l;u.traceState=new n.TraceState("string"==typeof e?e:void 0)}return t.trace.setSpanContext(r,u)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}}})),Qe=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ye=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=Se().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(e.RPCType||(e.RPCType={})).HTTP="http",e.setRPCMetadata=function(e,r){return e.setValue(t,r)},e.deleteRPCMetadata=function(e){return e.deleteValue(t)},e.getRPCMetadata=function(e){return e.getValue(t)}})),Ze=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=Se();e.AlwaysOffSampler=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}})),et=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=Se();e.AlwaysOnSampler=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}})),tt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=Se(),r=Ie(),n=Ze(),i=et();e.ParentBasedSampler=class{constructor(e){var t,o,s,a;this._root=e.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new i.AlwaysOnSampler,this._remoteParentNotSampled=null!==(o=e.remoteParentNotSampled)&&void 0!==o?o:new n.AlwaysOffSampler,this._localParentSampled=null!==(s=e.localParentSampled)&&void 0!==s?s:new i.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new n.AlwaysOffSampler}shouldSample(e,r,n,i,o,s){let a=t.trace.getSpanContext(e);return a&&t.isSpanContextValid(a)?a.isRemote?a.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s):this._root.shouldSample(e,r,n,i,o,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}})),rt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=Se();e.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,r){return{decision:t.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){let n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t}}})),nt=v((e=>{"use strict";function t(e,t){return"string"==typeof t?e===t:t.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0,e.urlMatches=t,e.isUrlIgnored=function(e,r){if(!r)return!1;for(let n of r)if(t(e,n))return!0;return!1}})),it=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0,e.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}})),ot=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r(Pe(),e),r(Te(),e),r(Ie(),e),r(Ce(),e),r(He(),e),r(ze(),e),r(We(),e),r(De(),e),e.baggageUtils=be(),r(qe(),e),r(Ge(),e),r(Je(),e),r(Qe(),e),r(Ye(),e),r(Ze(),e),r(et(),e),r(tt(),e),r(rt(),e),r(we(),e),r(Xe(),e),r(xe(),e),r(Oe(),e),r(nt(),e),r(it(),e),r(De(),e)})),st=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"})),at=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=Se(),r=ot(),n=Ue(),i=st();e.Span=class{constructor(e,n,i,o,s,a,c=[],u=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=i,this._spanContext=o,this.parentSpanId=a,this.kind=s,this.links=c,this.startTime=r.timeInputToHrTime(u),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}spanContext(){return this._spanContext}setAttribute(e,n){return null==n||this._isSpanEnded()?this:0===e.length?(t.diag.warn(`Invalid attribute key: ${e}`),this):r.isAttributeValue(n)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=n),this):(t.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[t,r]of Object.entries(e))this.setAttribute(t,r);return this}addEvent(e,n,i){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(n)&&(typeof i>"u"&&(i=n),n=void 0),typeof i>"u"&&(i=r.hrTime()),this.events.push({name:e,attributes:n,time:r.timeInputToHrTime(i)})),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e=r.hrTime()){this._isSpanEnded()?t.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=r.timeInputToHrTime(e),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,o=r.hrTime()){let s={};"string"==typeof e?s[n.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?s[n.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(s[n.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(s[n.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(s[n.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),s[n.SemanticAttributes.EXCEPTION_TYPE]||s[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,s,o):t.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}})),ct=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=Se(),r=ot(),n=r.getEnv(),i=r.TracesSamplerValues.AlwaysOn;function o(e=r.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(e));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(e))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new r.AlwaysOnSampler}}e.DEFAULT_CONFIG={sampler:o(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},e.buildSamplerFromEnv=o;var s=1;function a(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let r=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(r)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):r<0||r>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):r}})),ut=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=ct();e.mergeConfig=function(e){let r={sampler:t.buildSamplerFromEnv()},n=Object.assign({},t.DEFAULT_CONFIG,r,e);return n.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),n}})),lt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=Se(),r=ot(),n=at(),i=ut();e.Tracer=class{constructor(e,t,n){this._tracerProvider=n;let o=i.mergeConfig(t);this._sampler=o.sampler,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new r.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=e}startSpan(e,i={},o=t.context.active()){var s,a;if(r.isTracingSuppressed(o))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let c,u,l,d=function(e,r){if(!e.root)return t.trace.getSpanContext(r)}(i,o),p=this._idGenerator.generateSpanId();d&&t.trace.isSpanContextValid(d)?(c=d.traceId,u=d.traceState,l=d.spanId):c=this._idGenerator.generateTraceId();let f=null!==(s=i.kind)&&void 0!==s?s:t.SpanKind.INTERNAL,h=null!==(a=i.links)&&void 0!==a?a:[],g=r.sanitizeAttributes(i.attributes),m=this._sampler.shouldSample(i.root?t.trace.setSpanContext(o,t.INVALID_SPAN_CONTEXT):o,c,e,f,g,h),v={traceId:c,spanId:p,traceFlags:m.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,traceState:u};if(m.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(v);let y=new n.Span(this,o,e,v,f,l,h,i.startTime);return y.setAttributes(Object.assign(g,m.attributes)),y}startActiveSpan(e,r,n,i){let o,s,a;if(arguments.length<2)return;2===arguments.length?a=r:3===arguments.length?(o=r,a=n):(o=r,s=n,a=i);let c=s??t.context.active(),u=this.startSpan(e,o,c),l=t.trace.setSpan(c,u);return t.context.with(l,a,void 0,u)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}})),dt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0,e.defaultServiceName=function(){return`unknown_service:${process.argv0}`}})),pt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=yt(),n=Se(),i=r(73837);e.detectResources=async(e={})=>{let r=Object.assign(e),i=await Promise.all((r.detectors||[]).map((async e=>{try{let t=await e.detect(r);return n.diag.debug(`${e.constructor.name} found resource.`,t),t}catch(r){return n.diag.debug(`${e.constructor.name} failed: ${r.message}`),t.Resource.empty()}})));return o(i),i.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};var o=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){let t=i.inspect(e.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});n.diag.verbose(t)}}))}})),ft=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=Se(),r=ot(),n=Ue(),i=wt();e.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){let o={},s=r.getEnv(),a=s.OTEL_RESOURCE_ATTRIBUTES,c=s.OTEL_SERVICE_NAME;if(a)try{let e=this._parseResourceAttributes(a);Object.assign(o,e)}catch(e){t.diag.debug(`EnvDetector failed: ${e.message}`)}return c&&(o[n.ResourceAttributes.SERVICE_NAME]=c),new i.Resource(o)}_parseResourceAttributes(e){if(!e)return{};let t={},r=e.split(this._COMMA_SEPARATOR,-1);for(let e of r){let r=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==r.length)continue;let[n,i]=r;if(n=n.trim(),i=i.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(n))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(i))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[n]=i}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let t=0;t<e.length;t++){let r=e.charAt(t);if(r<=" "||r>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}})),ht=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=Se(),r=Ue(),n=wt();e.processDetector=new class{async detect(e){let t={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,i){return""===e[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[r.ResourceAttributes.PROCESS_COMMAND]||""===e[r.ResourceAttributes.PROCESS_COMMAND_LINE]?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},e))}}})),gt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(ft(),e),r(ht(),e)})),mt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(dt(),e),r(pt(),e),r(gt(),e)})),vt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(mt(),e)})),yt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=Ue(),r=ot(),n=vt(),i=class{constructor(e){this.attributes=e}static empty(){return i.EMPTY}static default(){return new i({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let t=Object.assign({},this.attributes,e.attributes);return new i(t)}};e.Resource=i,i.EMPTY=new i({})})),_t=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),St=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),wt=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(yt(),e),r(vt(),e),r(_t(),e),r(St(),e)})),Et=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=ot();e.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise((r=>{Promise.all(e).then((()=>{r()})).catch((e=>{t.globalErrorHandler(e||new Error("MultiSpanProcessor: forceFlush failed")),r()}))}))}onStart(e,t){for(let r of this._spanProcessors)r.onStart(e,t)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise(((t,r)=>{Promise.all(e).then((()=>{t()}),r)}))}}})),bt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0,e.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}})),Pt=v(((e,t)=>{var r="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Null]",u="[object Object]",l="[object Proxy]",d="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[i]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h[s]=h["[object Map]"]=h["[object Number]"]=h[u]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1;var g,m="object"==typeof global&&global&&global.Object===Object&&global,v="object"==typeof self&&self&&self.Object===Object&&self,y=m||v||Function("return this")(),_="object"==typeof e&&e&&!e.nodeType&&e,S=_&&"object"==typeof t&&t&&!t.nodeType&&t,w=S&&S.exports===_,E=w&&m.process,b=function(){try{return S&&S.require&&S.require("util").types||E&&E.binding&&E.binding("util")}catch{}}(),P=b&&b.isTypedArray,T=Array.prototype,C=Function.prototype,I=Object.prototype,O=y["__core-js_shared__"],x=C.toString,N=I.hasOwnProperty,k=(g=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",A=I.toString,R=x.call(Object),D=RegExp("^"+x.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=w?y.Buffer:void 0,M=y.Symbol,L=y.Uint8Array,F=(j&&j.allocUnsafe,function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object)),U=Object.create,B=I.propertyIsEnumerable,V=T.splice,$=M?M.toStringTag:void 0,q=function(){try{var e=le(Object,"defineProperty");return e({},"",{}),e}catch{}}(),H=j?j.isBuffer:void 0,z=Math.max,W=Date.now,G=le(y,"Map"),K=le(Object,"create"),X=function(){function e(){}return function(t){if(!Ee(t))return{};if(U)return U(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function J(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=this.__data__=new Q(e);this.size=t.size}function ee(e,t,r){(void 0!==r&&!ge(e[t],r)||void 0===r&&!(t in e))&&ne(e,t,r)}function te(e,t,r){var n=e[t];(!N.call(e,t)||!ge(n,r)||void 0===r&&!(t in e))&&ne(e,t,r)}function re(e,t){for(var r=e.length;r--;)if(ge(e[r][0],t))return r;return-1}function ne(e,t,r){"__proto__"==t&&q?q(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}J.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},J.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},J.prototype.get=function(e){var t=this.__data__;if(K){var n=t[e];return n===r?void 0:n}return N.call(t,e)?t[e]:void 0},J.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:N.call(t,e)},J.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=K&&void 0===t?r:t,this},Q.prototype.clear=function(){this.__data__=[],this.size=0},Q.prototype.delete=function(e){var t=this.__data__,r=re(t,e);return!(r<0||(r==t.length-1?t.pop():V.call(t,r,1),--this.size,0))},Q.prototype.get=function(e){var t=this.__data__,r=re(t,e);return r<0?void 0:t[r][1]},Q.prototype.has=function(e){return re(this.__data__,e)>-1},Q.prototype.set=function(e,t){var r=this.__data__,n=re(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(G||Q),string:new J}},Y.prototype.delete=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return ue(this,e).get(e)},Y.prototype.has=function(e){return ue(this,e).has(e)},Y.prototype.set=function(e,t){var r=ue(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Z.prototype.clear=function(){this.__data__=new Q,this.size=0},Z.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Z.prototype.get=function(e){return this.__data__.get(e)},Z.prototype.has=function(e){return this.__data__.has(e)},Z.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Q){var n=r.__data__;if(!G||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Y(n)}return r.set(e,t),this.size=r.size,this};var ie=function(e,t,r){for(var n=-1,i=Object(e),o=r(e),s=o.length;s--;){var a=o[++n];if(!1===t(i[a],a,i))break}return e};function oe(e){return null==e?void 0===e?d:c:$&&$ in Object(e)?function(e){var t=N.call(e,$),r=e[$];try{e[$]=void 0;var n=!0}catch{}var i=A.call(e);return n&&(t?e[$]=r:delete e[$]),i}(e):function(e){return A.call(e)}(e)}function se(e){return be(e)&&oe(e)==i}function ae(e,t,r,n,i){e!==t&&ie(t,(function(o,s){if(i||(i=new Z),Ee(o))!function(e,t,r,n,i,o,s){var a=fe(e,r),c=fe(t,r),l=s.get(c);if(l)ee(e,r,l);else{var d=o?o(a,c,r+"",e,t,s):void 0,p=void 0===d;if(p){var f=ve(c),h=!f&&_e(c),g=!f&&!h&&Pe(c);d=c,f||h||g?ve(a)?d=a:function(e){return be(e)&&ye(e)}(a)?d=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(a):h?(p=!1,d=function(e,t){return e.slice()}(c)):g?(p=!1,d=function(e,t){var r=function(e){var t=new e.constructor(e.byteLength);return new L(t).set(new L(e)),t}(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}(c)):d=[]:function(e){if(!be(e)||oe(e)!=u)return!1;var t=F(e);if(null===t)return!0;var r=N.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&x.call(r)==R}(c)||me(c)?(d=a,me(a)?d=function(e){return function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=void 0;void 0===c&&(c=e[a]),i?ne(r,a,c):te(r,a,c)}return r}(e,Te(e))}(a):(!Ee(a)||Se(a))&&(d=function(e){return"function"!=typeof e.constructor||pe(e)?{}:X(F(e))}(c))):p=!1}p&&(s.set(c,d),i(d,c,n,o,s),s.delete(c)),ee(e,r,d)}}(e,t,s,r,ae,n,i);else{var a=n?n(fe(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),ee(e,s,a)}}),Te)}var ce=q?function(e,t){return q(e,"toString",{configurable:!0,enumerable:!1,value:Ie(t),writable:!0})}:Oe;function ue(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function le(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ee(e)||function(e){return!!k&&k in e}(e))&&(Se(e)?D:p).test(function(e){if(null!=e){try{return x.call(e)}catch{}try{return e+""}catch{}}return""}(e))}(r)?r:void 0}function de(e,t){var r=typeof e;return!!(t=t??n)&&("number"==r||"symbol"!=r&&f.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}function fe(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var he=function(e){var t=0,r=0;return function(){var n=W(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ce);function ge(e,t){return e===t||e!=e&&t!=t}var me=se(function(){return arguments}())?se:function(e){return be(e)&&N.call(e,"callee")&&!B.call(e,"callee")},ve=Array.isArray;function ye(e){return null!=e&&we(e.length)&&!Se(e)}var _e=H||function(){return!1};function Se(e){if(!Ee(e))return!1;var t=oe(e);return t==s||t==a||t==o||t==l}function we(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function Ee(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function be(e){return null!=e&&"object"==typeof e}var Pe=P?function(e){return function(t){return e(t)}}(P):function(e){return be(e)&&we(e.length)&&!!h[oe(e)]};function Te(e){return ye(e)?function(e,t){var r=ve(e),n=!r&&me(e),i=!r&&!n&&_e(e),o=!r&&!n&&!i&&Pe(e),s=r||n||i||o,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)(t||N.call(e,u))&&(!s||!("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||de(u,c)))&&a.push(u);return a}(e,!0):function(e){if(!Ee(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=pe(e),r=[];for(var n in e)"constructor"==n&&(t||!N.call(e,n))||r.push(n);return r}(e)}var Ce=function(e){return function(e,t){return he(function(e,t,r){return t=z(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=z(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,a)}}(e,t,Oe),e+"")}((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&function(e,t,r){if(!Ee(r))return!1;var n=typeof t;return!!("number"==n?ye(r)&&de(t,r.length):"string"==n&&t in r)&&ge(r[t],e)}(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n)}return t}))}((function(e,t,r){ae(e,t,r)}));function Ie(e){return function(){return e}}function Oe(e){return e}t.exports=Ce})),Tt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=Se(),r=ot();e.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=r.getEnv();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{let r=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)r.push(this._flushOneBatch());Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,n)=>{let i=setTimeout((()=>{n(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),(()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),(t=>{var o;clearTimeout(i),t.code===r.ExportResultCode.SUCCESS?e():n(null!==(o=t.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{r.globalErrorHandler(e)}))}),this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}})),Ct=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=Tt(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r})),It=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ct(),e)})),Ot=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(It(),e)})),xt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t,r,n=Se(),i=ot(),o=wt(),s=Ft(),a=ct(),c=Et(),u=bt(),l=Pt(),d=Ot();(r=t=e.ForceFlushState||(e.ForceFlushState={}))[r.resolved=0]="resolved",r[r.timeout=1]="timeout",r[r.error=2]="error",r[r.unresolved=3]="unresolved";var p=class{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;let r=l({},a.DEFAULT_CONFIG,e);this.resource=null!==(t=r.resource)&&void 0!==t?t:o.Resource.empty(),this.resource=o.Resource.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});let n=this._buildExporterFromEnv();if(void 0!==n){let e=new d.BatchSpanProcessor(n);this.activeSpanProcessor=e}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(e,t){let r=`${e}@${t||""}`;return this._tracers.has(r)||this._tracers.set(r,new s.Tracer({name:e,version:t},this._config,this)),this._tracers.get(r)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>n.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){n.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&n.context.setGlobalContextManager(e.contextManager),e.propagator&&n.propagation.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map((r=>new Promise((n=>{let i,o=setTimeout((()=>{n(new Error(`Span processor did not completed within timeout period of ${e} ms`)),i=t.timeout}),e);r.forceFlush().then((()=>{clearTimeout(o),i!==t.timeout&&(i=t.resolved,n(i))})).catch((e=>{clearTimeout(o),i=t.error,n(e)}))}))));return new Promise(((e,n)=>{Promise.all(r).then((r=>{let i=r.filter((e=>e!==t.resolved));i.length>0?n(i):e()})).catch((e=>n([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=p._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=p._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){let e=Array.from(new Set(i.getEnv().OTEL_PROPAGATORS)),t=e.map((e=>{let t=this._getPropagator(e);return t||n.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);if(0!==t.length)return 1===e.length?t[0]:new i.CompositePropagator({propagators:t})}_buildExporterFromEnv(){let e=i.getEnv().OTEL_TRACES_EXPORTER;if("none"===e)return;let t=this._getSpanExporter(e);return t||n.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}};e.BasicTracerProvider=p,p._registeredPropagators=new Map([["tracecontext",()=>new i.HttpTraceContextPropagator],["baggage",()=>new i.HttpBaggagePropagator]]),p._registeredExporters=new Map})),Nt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=ot();e.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:t.hrTimeToMicroseconds(e.startTime),duration:t.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,r){for(let t of e)console.log(this._exportInfo(t));if(r)return r({code:t.ExportResultCode.SUCCESS})}}})),kt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=ot();e.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,r){if(this._stopped)return r({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>r({code:t.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}})),At=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Rt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=Se(),r=ot();e.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),(()=>{this._exporter.export([e],(e=>{var t;e.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))}))}))}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}}})),Dt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),jt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Lt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ft=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(lt(),e),r(xt(),e),r(Ot(),e),r(Nt(),e),r(kt(),e),r(At(),e),r(Rt(),e),r(Dt(),e),r(bt(),e),r(at(),e),r(jt(),e),r(Mt(),e),r(Lt(),e)})),Ut=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=T();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1;e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(n){if(r)return n;try{var i=Ft(),o=Se(),s=(new i.BasicTracerProvider).getTracer("applicationinsights tracer"),a=n.setTracer;n.setTracer=function(r){var n=r.startSpan;r.startSpan=function(e,r,i){var o=n.call(this,e,r,i),s=o.end;return o.end=function(){var e=s.apply(this,arguments);return t.channel.publish("azure-coretracing",o),e},o},r[e.AzureMonitorSymbol]=!0,a.call(this,r)},o.trace.getSpan(o.context.active()),n.setTracer(s),r=!0}catch{}return n}},e.enable=function(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}})),Bt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=T();e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var r=e.prototype._emit;return e.prototype._emit=function(e,n){var i=r.apply(this,arguments);if(!n){var o=i;o||(o=r.call(this,e,!0)),t.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},e.enable=function(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}})),Vt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=T(),n=r(12781);e.console={versionSpecifier:">= 4.0.0",patch:function(e){var r=new n.Writable,i=new n.Writable;r.write=function(e){if(!e)return!0;var r=e.toString();return t.channel.publish("console",{message:r}),!0},i.write=function(e){if(!e)return!0;var r=e.toString();return t.channel.publish("console",{message:r,stderr:!0}),!0};for(var o=new e.Console(r,i),s=function(t){var r=e[t];r&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch{}return r.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},e.enable=function(){t.channel.registerMonkeyPatch("console",e.console),r(96206)}})),$t=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=T();e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var r=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=r.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=t.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=t.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},e.enable=function(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}})),qt=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=T();e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var n=e.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext((function(e){return e()}))}}}),i={};return n.on("started",(function(e){i[e.requestId]||(i[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),n.on("failed",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var n=e.instrument(),i={},o={};return n.on("started",(function(e){i[e.requestId]||(o[e.requestId]=r.channel.bindToContext((function(e){return e()})),i[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),n.on("failed",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e}}(e);var t=e.instrument(),n={},i={};return t.on("started",(function(e){n[e.requestId]||(i[e.requestId]=r.channel.bindToContext((function(e){return e()})),n[e.requestId]=e)})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},e.enable=function(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}})),Ht=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=T(),n=r(71017);e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,i){var o=function(e,r){return function(r,n){var i=e[r];i&&(e[r]=function(){for(var e=arguments.length-1,r=arguments.length-1;r>=0;--r){if("function"==typeof arguments[r]){e=r;break}if(typeof arguments[r]<"u")break}var o=arguments[e],s={result:null,startTime:null,startDate:null};"function"==typeof o&&(n?(s.startTime=process.hrtime(),s.startDate=new Date,arguments[e]=t.channel.bindToContext(n(s,o))):arguments[e]=t.channel.bindToContext(o));var a=i.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=r(70852)(n.dirname(i)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return s(a)(e)})),o(a)("createQuery",(function(e,r){return function(n){var i=process.hrtime(e.startTime),o=1e3*i[0]+i[1]/1e6|0;t.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:o,time:e.startDate}),r.apply(this,arguments)}}));var c=r(41024)(n.dirname(i)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return s(c)(e)})),e}},e.enable=function(){t.channel.registerMonkeyPatch("mysql",e.mysql)}})),zt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=T();e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var r=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=t.channel.bindToContext(e)),r.apply(this,arguments)},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}})),Wt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=T(),n=r(82361);e.postgres6={versionSpecifier:"6.*",patch:function(e,r){var i=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,r,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime();function l(e){e&&e[o]&&(e=e[o]);var r=t.channel.bindToContext((function(r,i){var o=process.hrtime(u);if(c.result=i&&{rowCount:i.rowCount,command:i.command},c.error=r,c.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",c),r){if(e)return e.apply(this,arguments);a&&a instanceof n.EventEmitter&&a.emit("error",r)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(r,o,{value:e}),r}catch{return e}}try{"string"==typeof e?r instanceof Array?(c.query.preparable={text:e,args:r},s=l(s)):(c.query.text=e,s?s=l(s):r=l(r)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=l(s):r?r=l(r):e.callback=l(e.callback))}catch{return i.apply(this,arguments)}return arguments[0]=e,arguments[1]=r,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=i.apply(this,arguments)},e}},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,r){var i=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,r,s){var a,c=this,u=!!s,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime();function p(e){e&&e[o]&&(e=e[o]);var r=t.channel.bindToContext((function(r,i){var o=process.hrtime(d);if(l.result=i&&{rowCount:i.rowCount,command:i.command},l.error=r,l.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",l),r){if(e)return e.apply(this,arguments);a&&a instanceof n.EventEmitter&&a.emit("error",r)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(r,o,{value:e}),r}catch{return e}}try{"string"==typeof e?r instanceof Array?(l.query.preparable={text:e,args:r},s=(u="function"==typeof s)?p(s):s):(l.query.text=e,s?s=(u="function"==typeof s)?p(s):s:r=(u="function"==typeof r)?p(r):r):("string"==typeof e.name?l.query.plan=e.name:e.values instanceof Array?l.query.preparable={text:e.text,args:e.values}:l.query.text=e.text,s?(u="function"==typeof s,s=p(s)):r?r=(u="function"==typeof r)?p(r):r:(u="function"==typeof e.callback,e.callback=u?p(e.callback):e.callback))}catch{return i.apply(this,arguments)}return arguments[0]=e,arguments[1]=r,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=i.apply(this,arguments),u?a:a.then((function(e){return p()(void 0,e),new c._Promise((function(t,r){t(e)}))})).catch((function(e){return p()(e,void 0),new c._Promise((function(t,r){r(e)}))}))},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}})),Gt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=T();e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var r=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;e.callback=t.channel.bindToContext((function(r,a){var c=process.hrtime(o),u=1e3*c[0]+c[1]/1e6|0;t.channel.publish("redis",{duration:u,address:i,commandObj:e,err:r,result:a,time:s}),"function"==typeof n&&n.apply(this,arguments)})),e.callback.pubsubBound=!0}}return r.call(this,e)},e}},e.enable=function(){t.channel.registerMonkeyPatch("redis",e.redis)}})),Kt=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=T();e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var n=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){var e,i,o,s=arguments[0];arguments[0].callback=(e=s.callback,i=process.hrtime(),o={query:{},database:{host:null,port:null},result:null,error:null,duration:0},r.channel.bindToContext((function(n,s,a){var c=process.hrtime(i);o=t(t({},o),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!n&&{rowCount:s,rows:a},query:{text:this.parametersByName.statement.value},error:n,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),r.channel.publish("tedious",o),e.call(this,n,s,a)}))),n.apply(this,arguments)},e}},e.enable=function(){r.channel.registerMonkeyPatch("tedious",e.tedious)}})),Xt=v((e=>{"use strict";var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),n=e&&e.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var i=T();e.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,r){var n=e.call(this,r)||this;return n.winston=t,n}return r(t,e),t.prototype.log=function(e,t){var r=e.message,o=e.level,s=e.meta,a=n(e,["message","level","meta"]);o="function"==typeof Symbol.for?e[Symbol.for("level")]:o,r=e instanceof Error?e:r;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,o);for(var u in s=s||{},a)a.hasOwnProperty(u)&&(s[u]=a[u]);i.channel.publish("winston",{message:r,level:o,levelKind:c,meta:s}),t()},t}(e.Transport);function o(){var r,n=arguments[0].levels||e.config.npm.levels;for(var i in n)n.hasOwnProperty(i)&&(r=void 0===r||n[i]>n[r]?i:r);this.add(new t(e,{level:r}))}var s=e.createLogger;e.createLogger=function(){var r,n=arguments[0].levels||e.config.npm.levels;for(var i in n)n.hasOwnProperty(i)&&(r=void 0===r||n[i]>n[r]?i:r);var a=s.apply(this,arguments);a.add(new t(e,{level:r}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),o.apply(this,arguments)},a};var a=e.configure;return e.configure=function(){a.apply(this,arguments),o.apply(this,arguments)},e.add(new t(e)),e}},e.winston2={versionSpecifier:"2.x",patch:function(e){var t,r=e.Logger.prototype.log,n=function(r,n,o){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",i.channel.publish("winston",{level:r,message:n,meta:o,levelKind:s}),n};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter((function(e){return e!==n})),this.filters.push(n)):this.filters=[n],r.apply(this,arguments)},e}},e.enable=function(){i.channel.registerMonkeyPatch("winston",e.winston2),i.channel.registerMonkeyPatch("winston",e.winston3)}})),Jt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=Ut();e.azuresdk=t;var r=Bt();e.bunyan=r;var n=Vt();e.console=n;var i=$t();e.mongodbCore=i;var o=qt();e.mongodb=o;var s=Ht();e.mysql=s;var a=zt();e.pgPool=a;var c=Wt();e.pg=c;var u=Gt();e.redis=u;var l=Kt();e.tedious=l;var d=Xt();e.winston=d,e.enable=function(){r.enable(),n.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),u.enable(),d.enable(),t.enable(),l.enable()}})),Qt=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=w(),r=S();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n,i,o,s,a="DiagnosticChannel";if(e.IsInitialized){for(s in n=Jt(),i=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),o={bunyan:n.bunyan,console:n.console,mongodb:n.mongodb,mongodbCore:n.mongodbCore,mysql:n.mysql,redis:n.redis,pg:n.pg,pgPool:n.pgPool,winston:n.winston,azuresdk:n.azuresdk})-1===i.indexOf(s)&&(o[s].enable(),r.info(a,"Subscribed to "+s+" events"));i.length>0&&r.info(a,"Some modules will not be patched",i)}else r.info(a,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");e.registerContextPreservation=function(r){if(e.IsInitialized){var n=T();n.channel.addContextPreservation(r),n.channel.spanContextPropagator=t.AsyncScopeManager}}})),Yt=v(((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}})),Zt=v(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=r(13685),o=r(95687),s=r(57310),a=r(22057),c=S(),u=Yt(),l=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&"string"==typeof r)for(var i=t+"=",o=r.split(";"),s=0;s<o.length;s++)if(r=o[s],(r=e.trim(r))&&0===r.indexOf(i)){n=r.substring(i.length,o[s].length);break}return n},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},r=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),n=(Buffer.from?Buffer.from(r,"binary"):new Buffer(r,"binary")).toString("base64");return n.substr(0,n.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",i=0;i<4;i++)n+=r[15&(t=e.random32())]+r[t>>4&15]+r[t>>8&15]+r[t>>12&15]+r[t>>16&15]+r[t>>20&15]+r[t>>24&15]+r[t>>28&15];var o=r[8+4*Math.random()|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+o+n.substr(16,3)+n.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),r=""+Math.floor(e/6e4)%60,n=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,r=r.length<2?"0"+r:r,(i>0?i+".":"")+(n=n.length<2?"0"+n:n)+":"+r+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var r={};for(var n in t){var i="",o=t[n],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(null===o||"undefined"===s)i="";else{if("function"===s){c.info("key: "+n+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{i=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){i=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return r}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var r=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!r||0==r.length||!t)return!0;for(var n=0;n<r.length;n++)if(new RegExp(r[n].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1;return!0},e.getCorrelationContextTarget=function(e,t){var r=e.headers&&e.headers[u.requestContextHeader];if(r)for(var n=r.split(","),i=0;i<n.length;++i){var o=n[i].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,r,a,u){r&&0===r.indexOf("//")&&(r="https:"+r);var l=s.parse(r),d=n(n({},a),{host:l.hostname,port:l.port,path:l.pathname}),p=void 0;if("https:"===l.protocol&&(p=t.proxyHttpsUrl||void 0),"http:"===l.protocol&&(p=t.proxyHttpUrl||void 0),p){0===p.indexOf("//")&&(p="http:"+p);var f=s.parse(p);"https:"===f.protocol?(c.info("Proxies that use HTTPS are not supported"),p=void 0):d=n(n({},d),{host:f.hostname,port:f.port||"80",path:r,headers:n(n({},d.headers),{Host:l.hostname})})}var h="https:"===l.protocol&&!p;return h&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:h||void 0===t.httpAgent?h&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,h?o.request(d,u):i.request(d,u)},e.safeIncludeCorrelationHeader=function(t,r,n){var i;if("string"==typeof n)i=n;else if(n instanceof Array)i=n.join(",");else if(n&&"function"==typeof n.toString)try{i=n.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,n)}i?e.addCorrelationIdHeaderFromString(t,r,i):r.setHeader(u.requestContextHeader,u.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":JSON.stringify(e))},e.addCorrelationIdHeaderFromString=function(e,t,r){var n=r.split(","),i=u.requestContextSourceKey+"=";n.some((function(e){return e.substring(0,i.length)===i}))||t.setHeader(u.requestContextHeader,r+","+u.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();t.exports=l})),er=v(((e,t)=>{"use strict";var r=Zt(),n=S(),i=function(){function e(){}return e.queryCorrelationId=function(t,i){var o=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(o))i(e.completedLookups[o]);else if(e.pendingLookups[o])e.pendingLookups[o].push(i);else{e.pendingLookups[o]=[i];var s=function(){if(e.pendingLookups[o]){var i={method:"GET",disableAppInsightsAutoCollection:!0};n.info(e.TAG,i);var a=r.makeRequest(t,o,i,(function(r){if(200===r.statusCode){var i="";r.setEncoding("utf-8"),r.on("data",(function(e){i+=e})),r.on("end",(function(){n.info(e.TAG,i);var t=e.correlationIdPrefix+i;e.completedLookups[o]=t,e.pendingLookups[o]&&e.pendingLookups[o].forEach((function(e){return e(t)})),delete e.pendingLookups[o]}))}else r.statusCode>=400&&r.statusCode<500?(e.completedLookups[o]=void 0,delete e.pendingLookups[o]):setTimeout(s,t.correlationIdRetryIntervalMs)}));a&&(a.on("error",(function(t){n.warn(e.TAG,t)})),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[n];i&&(e.pendingLookups[n]=i.filter((function(e){return e!=r})),0==e.pendingLookups[n].length&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var r="|"===e[0]?1:0;return e.substring(r,t)},e.generateRootId=function(){return"|"+r.w3cTraceId()+"."},e.appendSuffix=function(t,n,i){if(t.length+n.length<e.requestIdMaxLength)return t+n+i;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(n=r.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,o)+n+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=r.randomu32(),e}();t.exports=i})),tr=v(((e,t)=>{"use strict";var r=Zt(),n=er(),i=function(){function e(t,i){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var o=t.trim().split("-"),s=o.length;s>=4?(this.version=o[0],this.traceId=o[1],this.spanId=o[2],this.traceFlag=o[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(i){this.parentId=i.slice();var a=n.getRootId(i);e.isValidTraceId(a)||(this.legacyRootId=a,a=r.w3cTraceId()),-1!==i.indexOf("|")&&(i=i.substring(1+i.substring(0,i.length-1).lastIndexOf("."),i.length-1)),this.traceId=a,this.spanId=i}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();t.exports=i})),rr=v(((e,t)=>{"use strict";var r=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var r=t[0].trim(),n=t[1].trim(),i=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return i&&o}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var r=[],n={},i=t.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length||!e.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=!0,r.push(a)}}return r},e.strict=!0,e}();t.exports=r})),nr=v(((e,t)=>{"use strict";t.exports=function(){}})),ir=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=i})),or=v(((e,t)=>{"use strict";t.exports=function(){}})),sr=v(((e,t)=>{"use strict";t.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}})),ar=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){return e.call(this)||this}return n(t,e),t}(or());t.exports=i})),cr=v(((e,t)=>{"use strict";var r,n;(n=r||(r={}))[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation",t.exports=r})),ur=v(((e,t)=>{"use strict";var r=cr();t.exports=function(){this.kind=r.Measurement}})),lr=v(((e,t)=>{"use strict";t.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}})),dr=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=i})),pr=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=i})),fr=v(((e,t)=>{"use strict";t.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}})),hr=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return n(t,e),t}(nr());t.exports=i})),gr=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return n(t,e),t}(nr());t.exports=i})),mr=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(dr());t.exports=i})),vr=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=i})),yr=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(nr());t.exports=i})),_r=v(((e,t)=>{"use strict";var r,n;(n=r||(r={}))[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical",t.exports=r})),Sr=v(((e,t)=>{"use strict";t.exports=function(){}})),wr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=ir(),e.Base=or(),e.ContextTagKeys=sr(),e.Data=ar(),e.DataPoint=ur(),e.DataPointType=cr(),e.Domain=nr(),e.Envelope=lr(),e.EventData=dr(),e.ExceptionData=pr(),e.ExceptionDetails=fr(),e.MessageData=hr(),e.MetricData=gr(),e.PageViewData=mr(),e.RemoteDependencyData=vr(),e.RequestData=yr(),e.SeverityLevel=_r(),e.StackFrame=Sr()})),Er=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=wr(),r=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();e.RemoteDependencyDataConstants=r,e.domainSupportsProperties=function(e){return"properties"in e||e instanceof t.EventData||e instanceof t.ExceptionData||e instanceof t.MessageData||e instanceof t.MetricData||e instanceof t.PageViewData||e instanceof t.RemoteDependencyData||e instanceof t.RequestData}})),br=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Pr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Tr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Cr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ir=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Or=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),xr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Nr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),kr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ar=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Rr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Dr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),jr=v((e=>{"use strict";var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0,e.telemetryTypeToBaseType=function(e){switch(e){case t.Event:return"EventData";case t.Exception:return"ExceptionData";case t.Trace:return"MessageData";case t.Metric:return"MetricData";case t.Request:return"RequestData";case t.Dependency:return"RemoteDependencyData";case t.Availability:return"AvailabilityData";case t.PageView:return"PageViewData"}},e.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return t.Event;case"ExceptionData":return t.Exception;case"MessageData":return t.Trace;case"MetricData":return t.Metric;case"RequestData":return t.Request;case"RemoteDependencyData":return t.Dependency;case"AvailabilityData":return t.Availability;case"PageViewData":return t.PageView}},e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(r=t=e.TelemetryType||(e.TelemetryType={}))[r.Event=0]="Event",r[r.Exception=1]="Exception",r[r.Trace=2]="Trace",r[r.Metric=3]="Metric",r[r.Request=4]="Request",r[r.Dependency=5]="Dependency",r[r.Availability=6]="Availability",r[r.PageView=7]="PageView"})),Mr=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(br(),e),r(Pr(),e),r(Tr(),e),r(Cr(),e),r(Ir(),e),r(Or(),e),r(xr(),e),r(Nr(),e),r(kr(),e),r(Ar(),e),r(Rr(),e),r(Dr(),e),r(jr(),e)})),Lr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Fr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ur=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Br=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Vr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$r=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),qr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Hr=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),zr=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Lr(),e),r(Fr(),e),r(Ur(),e),r(Br(),e),r(Vr(),e),r($r(),e),r(qr(),e),r(Hr(),e)})),Wr=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Er(),e),r(wr(),e),r(Mr(),e),r(zr(),e)})),Gr=v(((e,t)=>{"use strict";var r=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var r=+new Date;this.duration=r-this.startTime,this.statusCode=e;var n=this.properties||{};if(t)if("string"==typeof t)n.error=t;else if(t instanceof Error)n.error=t.message;else if("object"==typeof t)for(var i in t)n[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=n},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();t.exports=r})),Kr=v(((e,t)=>{"use strict";var n,i=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r(57310),s=Wr(),a=Zt(),c=Yt(),u=Gr(),l=er(),d=rr(),p=tr(),f=function(e){function t(t,r){var n=e.call(this)||this;return t&&(n.method=t.method,n.url=n._getAbsoluteUrl(t),n.startTime=+new Date,n.socketRemoteAddress=t.socket&&t.socket.remoteAddress,n.parseHeaders(t,r),t.connection&&(n.connectionRemoteAddress=t.connection.remoteAddress,n.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),n}return i(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?t.time=e.time:this.startTime&&(t.time=new Date(this.startTime)),e){for(var r in e)t[r]||(t[r]=e[r]);if(e.properties)for(var r in e.properties)t.properties[r]=e.properties[r]}return t},t.prototype.getRequestTags=function(e){var r={};for(var n in e)r[n]=e[n];return r[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),r[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),r[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),r[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),r[t.keys.operationName]=this.getOperationName(e),r[t.keys.operationParentId]=this.getOperationParentId(e),r[t.keys.operationId]=this.getOperationId(e),r},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+o.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,r=o.parse(e.url),n=r.pathname,i=r.search,s=t||"https"==e.headers["x-forwarded-proto"]?"https":"http";return o.format({protocol:s,host:e.headers.host,pathname:n,search:i})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var r=e.exec(t);if(r)return r[0]},r=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!r&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(r="127.0.0.1"),r},t.prototype._getId=function(e){var r=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,r))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var r=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,n=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,i=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,o=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,s=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,l.w3cEnabled&&(n||r)?(this.traceparent=new p(n?n.toString():null),this.tracestate=n&&r&&new d(r?r.toString():null),this.setBackCompatFromThisTraceContext()):i?l.w3cEnabled?(this.traceparent=new p(null,i),this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=l.generateRequestId(this.parentId),this.operationId=l.getRootId(this.requestId)):l.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=o,this.traceparent.legacyRootId=s||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=l.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=l.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=l.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(u);t.exports=f})),Xr=v(((e,t)=>{var r;e=t.exports=G,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=a++;s[f]="(?:"+s[c]+"|"+s[l]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var m=a++;s[m]="(?:-?("+s[h]+"(?:\\."+s[h]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var _=a++,S="v?"+s[d]+s[g]+"?"+s[y]+"?";s[_]="^"+S+"$";var w="[v=\\s]*"+s[p]+s[m]+"?"+s[y]+"?",E=a++;s[E]="^"+w+"$";var b=a++;s[b]="((?:<|>)?=?)";var P=a++;s[P]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var C=a++;s[C]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var I=a++;s[I]="[v=\\s]*("+s[P]+")(?:\\.("+s[P]+")(?:\\.("+s[P]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var O=a++;s[O]="^"+s[b]+"\\s*"+s[C]+"$";var x=a++;s[x]="^"+s[b]+"\\s*"+s[I]+"$";var N=a++;s[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var k=a++;s[k]="(?:~>?)";var A=a++;s[A]="(\\s*)"+s[k]+"\\s+",o[A]=new RegExp(s[A],"g");var R=a++;s[R]="^"+s[k]+s[C]+"$";var D=a++;s[D]="^"+s[k]+s[I]+"$";var j=a++;s[j]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[j]+"\\s+",o[M]=new RegExp(s[M],"g");var L=a++;s[L]="^"+s[j]+s[C]+"$";var F=a++;s[F]="^"+s[j]+s[I]+"$";var U=a++;s[U]="^"+s[b]+"\\s*("+w+")$|^$";var B=a++;s[B]="^"+s[b]+"\\s*("+S+")$|^$";var V=a++;s[V]="(\\s*)"+s[b]+"\\s*("+w+"|"+s[C]+")",o[V]=new RegExp(s[V],"g");var $=a++;s[$]="^\\s*("+s[C]+")\\s+-\\s+("+s[C]+")\\s*$";var q=a++;s[q]="^\\s*("+s[I]+")\\s+-\\s+("+s[I]+")\\s*$";var H,z=a++;for(s[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)r(H,s[H]),o[H]||(o[H]=new RegExp(s[H]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof G)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?o[E]:o[_]).test(e))return null;try{return new G(e,t)}catch{return null}}function G(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof G){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof G))return new G(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[E]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var r=W(e,t);return r?r.version:null},e.clean=function(e,t){var r=W(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof G||(e=new G(e,this.options)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return X(n,i)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new G(e,r).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=W(e),n=W(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new G(e,r).compare(new G(t,r))}function Q(e,t,r){return J(e,t,r)>0}function Y(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function ee(e,t,r){return 0!==J(e,t,r)}function te(e,t,r){return J(e,t,r)>=0}function re(e,t,r){return J(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return Q(e,r,n);case">=":return te(e,r,n);case"<":return Y(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new G(e,t).major},e.minor=function(e,t){return new G(e,t).minor},e.patch=function(e,t){return new G(e,t).patch},e.compare=J,e.compareLoose=function(e,t){return J(e,t,!0)},e.rcompare=function(e,t,r){return J(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=Q,e.lt=Y,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=ie;var oe={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,i,o,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch{return!1}return t.test(e)}function de(e,t,r,n){var i,o,s,a,c;switch(e=new G(e,n),t=new se(t,n),r){case">":i=Q,o=re,s=Y,a=">",c=">=";break;case"<":i=Y,o=te,s=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[U]:o[B],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new G(r[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new G(e,this.options)),ne(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[q]:o[$];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(o[V],"$1$2$3"),r("comparator trim",e,o[V]),e=(e=(e=e.replace(o[A],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[U]:o[B],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[F]:o[L];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[D]:o[R];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[x]:o[O];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(o=0),s=0,">"===n?(n=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",u?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[z],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new ie(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||-1===i.compare(e))&&(i=new G(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||1===i.compare(e))&&(i=new G(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new G("0.0.0");if(e.test(r)||(r=new G("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new G(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||Q(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=W(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(o[N]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),Jr=v(((e,t)=>{"use strict";function r(e){return"function"==typeof e}var n=console.error.bind(console);function i(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function o(e){e&&e.logger&&(r(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function s(e,t,o){if(e&&e[t]){if(!o)return n("no wrapper function"),void n((new Error).stack);if(r(e[t])&&r(o)){var s=e[t],a=o(s,t);return i(a,"__original",s),i(a,"__unwrap",(function(){e[t]===a&&i(e,t,s)})),i(a,"__wrapped",!0),i(e,t,a),a}n("original object and wrapper must be functions")}else n("no original function "+t+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}o.wrap=s,o.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},o.unwrap=a,o.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):n("must provide one or more functions to unwrap on modules")},t.exports=o})),Qr=v(((e,t)=>{"use strict";var r=Jr(),n=r.wrap,i=r.unwrap,o="wrap@before";function s(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function a(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r=r?[r]:[]),r}function c(e,t){if(e){var r=e;if("function"==typeof e)r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}t.exports=function(e,t,r){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!r)throw new Error("must have function to wrap listeners when emitting");function u(e){return function(t,r){var i=a(this,t).slice();try{var s=e.call(this,t,r);return function(e,t,r){var n=a(e,t).filter((function(e){return-1===r.indexOf(e)}));n.length>0&&function(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n],s=e[o];if("function"==typeof s)s(i);else if(Array.isArray(s))for(var a=s.length,c=0;c<a;c++)s[c](i)}}(e,n)}(this,t,i),s}finally{this.on.__wrapped||n(this,"on",u),this.addListener.__wrapped||n(this,"addListener",u)}}}e[o]?"function"==typeof e[o]?s(e,o,[e[o],t]):Array.isArray(e[o])&&e[o].push(t):s(e,o,t),e.__wrapped||(n(e,"addListener",u),n(e,"on",u),n(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var o=this._events[t];n(this,"removeListener",(function(e){return function(){this._events[t]=o;try{return e.apply(this,arguments)}finally{o=this._events[t],this._events[t]=c(o,r)}}}));try{return this._events[t]=c(o,r),e.apply(this,arguments)}finally{i(this,"removeListener"),this._events[t]=o}}})),s(e,"__unwrap",(function(){i(e,"addListener"),i(e,"on"),i(e,"emit"),delete e[o],delete e.__wrapped})),s(e,"__wrapped",!0))}})),Yr=v(((e,t)=>{"use strict";var n=r(73837),i=r(39491),o=Qr(),s=r(50852),a="cls@contexts",c="error@context",u=process.env.DEBUG_CLS_HOOKED,l=-1;function d(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function p(e){return process.namespaces[e]}function f(e){let t=p(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function h(...e){u&&process._rawDebug(`${n.format(...e)}`)}t.exports={getNamespace:p,createNamespace:function(e){i.ok(e,"namespace must be given a name."),u&&h(`NS-CREATING NAMESPACE (${e})`);let t=new d(e);return t.id=l,s.createHook({init(r,i,o,a){if(l=s.executionAsyncId(),t.active)t._contexts.set(r,t.active),u&&h(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${i}] (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`);else if(0===l){let o=s.triggerAsyncId(),c=t._contexts.get(o);c?(t._contexts.set(r,c),u&&h(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)):u&&h(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}if(u&&"PROMISE"===i){h(n.inspect(a,{showHidden:!0}));let s=a.parentId;h(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${s} asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(r){let i;if(l=s.executionAsyncId(),i=t._contexts.get(r)||t._contexts.get(l),i){if(u){let o=s.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(i)}`),t._indent+=2}t.enter(i)}else if(u){let i=s.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${n.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(r){let i;if(l=s.executionAsyncId(),i=t._contexts.get(r)||t._contexts.get(l),i){if(u){let o=s.triggerAsyncId();t._indent-=2,h(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(i)}`)}t.exit(i)}else if(u){let o=s.triggerAsyncId();t._indent-=2,h(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(i)}`)}},destroy(r){if(l=s.executionAsyncId(),u){let i=s.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${l} asyncId:${r} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(t._contexts.get(l))}`)}t._contexts.delete(r)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:f,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){f(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},d.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,u&&h(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+l+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},d.prototype.get=function(e){if(this.active){if(u){let t=s.executionAsyncId(),r=s.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);h(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+l+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),h(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} active:${n.inspect(this.active)}`)}return this.active[e]}if(u){let t=s.currentId(),r=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length}`)}},d.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=l,u){let t=s.executionAsyncId(),r=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} context:${n.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},d.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(u){let e=s.triggerAsyncId(),r=s.executionAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} context:${n.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(u){let e=s.triggerAsyncId(),r=s.executionAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} ${n.inspect(t)}`)}this.exit(t)}},d.prototype.runAndReturn=function(e){let t;return this.run((function(r){t=e(r)})),t},d.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return u&&h("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(u&&h("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,u&&h("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},d.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{r.exit(t)}}},d.prototype.enter=function(e){if(i.ok(e,"context must be provided for entering"),u){let t=s.executionAsyncId(),r=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}this._set.push(this.active),this.active=e},d.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),u){let t=s.executionAsyncId(),r=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}if(this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(u&&h("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},d.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;o(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,r=e[a];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},d.prototype.fromException=function(e){return e[c]},process.namespaces={}})),Zr=v(((e,t)=>{"use strict";function r(){}t.exports=function(){let e=this._hooks,t=this._state,n=process.nextTick;process.nextTick=function(){if(!t.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let e=0;e<arguments.length;e++)i[e]=arguments[e];let o=i[0];if("function"!=typeof o)throw new TypeError("callback is not a function");let s=new r,a=--t.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}})),en=v(((e,t)=>{"use strict";function r(){}t.exports=function(){let e=this._hooks,t=this._state,n=global.Promise,i=n.prototype.then;function o(t,r,n,i){return"function"!=typeof t?i?function(t){return function(r){return e.destroy.call(null,t),r}}(n):function(t){return function(r){throw e.destroy.call(null,t),r}}(n):function(){e.pre.call(r,n);try{return t.apply(this,arguments)}finally{e.post.call(r,n,!1),e.destroy.call(null,n)}}}n.prototype.then=function(n,s){if(!t.enabled)return i.call(this,n,s);let a=new r,c=--t.counter;return e.init.call(a,c,0,null,null),i.call(this,o(n,a,c,!0),o(s,a,c,!1))}}})),tn=v(((e,t)=>{"use strict";var n=r(39512);function i(){}function o(){}function s(){}var a=new Map,c=new Map,u=new Map,l=null,d=!1;function p(e,t,r,i,o,s,a){let c=n[r],u=n[i];n[r]=function(){if(!t.enabled)return c.apply(n,arguments);let r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];let i=r[0];if("function"!=typeof i)throw new TypeError('"callback" argument must be a function');let u,p=new o,f=--t.counter;return e.init.call(p,f,0,null,null),r[0]=function(){l=u,e.pre.call(p,f);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(p,f,!0),s.delete(u),e.destroy.call(null,f)}))}e.post.call(p,f,!1),l=null,(a||d)&&(d=!1,s.delete(u),e.destroy.call(null,f))},u=c.apply(n,r),s.set(u,f),u},n[i]=function(t){if(l===t&&null!==t)d=!0;else if(s.has(t)){let r=s.get(t);s.delete(t),e.destroy.call(null,r)}u.apply(n,arguments)}}t.exports=function(){p(this._hooks,this._state,"setTimeout","clearTimeout",i,a,!0),p(this._hooks,this._state,"setInterval","clearInterval",o,c,!1),p(this._hooks,this._state,"setImmediate","clearImmediate",s,u,!0),global.setTimeout=n.setTimeout,global.setInterval=n.setInterval,global.setImmediate=n.setImmediate,global.clearTimeout=n.clearTimeout,global.clearInterval=n.clearInterval,global.clearImmediate=n.clearImmediate}})),rn=v(((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}})),nn=v(((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,i={nextTick:Zr(),promise:en(),timers:tn()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],i=this.destroyFns=[];this.init=function(t,r,i,s){if(r!==n)for(let n of e)n(t,this,r,i,s);else o.add(t)},this.pre=function(e){if(!o.has(e))for(let r of t)r(e,this)},this.post=function(e,t){if(!o.has(e))for(let n of r)n(e,this,t)},this.destroy=function(e){if(o.has(e))o.delete(e);else for(let t of i)t(e)}}function c(e,t){let r=e.indexOf(t);-1!==r&&e.splice(r,1)}function u(){this._state=new s,this._hooks=new a,this.version=rn().version,this.providers=r.Providers;for(let e of Object.keys(i))i[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}a.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},a.prototype.remove=function(e){e.init&&c(this.initFns,e.init),e.pre&&c(this.preFns,e.pre),e.post&&c(this.postFns,e.post),e.destroy&&c(this.destroyFns,e.destroy)},t.exports=u,u.prototype.addHooks=function(e){this._hooks.add(e)},u.prototype.removeHooks=function(e){this._hooks.remove(e)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}})),on=v(((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}})),sn=v(((e,t)=>{t.exports=function(e,t){var r=[];r.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}(e));for(var n=0;n<t.length;n++){var i,o=t[n];try{i=o.toString()}catch(e){try{i="<error: "+e+">"}catch{i="<error>"}}r.push("    at "+i)}return r.join("\n")}})),an=v(((e,t)=>{var r=sn();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=on().version}var i=!1;n.prototype.callSite=function e(t){t||(t={}),i=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return i=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var o=new n;function s(){this._modifiers=[]}function a(){this._formater=r,this._previous=void 0}s.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t},s.prototype.attach=function(e){this._modifiers.push(e)},s.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},a.prototype.replace=function(e){e?this._formater=e:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function u(e,t){if(i)return t;if(c)return r(e,t);var n=t.concat();n=o.extend._modify(e,n),n=(n=o.filter._modify(e,n)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:n}),c=!0;var s=o.format._formater(e,n);return c=!1,s}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(e){e===u?o.format._roolback():(o.format._backup(),o.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),t.exports=o})),cn=v(((e,t)=>{if(global._stackChain){if(global._stackChain.version!==on().version)throw new Error("Conflicting version of stack-chain found");t.exports=global._stackChain}else t.exports=global._stackChain=an()})),un=v(((e,t)=>{"use strict";var r=nn();if(global._asyncHook){if(global._asyncHook.version!==rn().version)throw new Error("Conflicting version of async-hook-jl found");t.exports=global._asyncHook}else cn().filter.attach((function(e,t){return t.filter((function(e){let t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),t.exports=global._asyncHook=new r})),ln=v(((e,t)=>{"use strict";var n=r(73837),i=r(39491),o=Qr(),s=un(),a="cls@contexts",c="error@context",u=[];for(let e in s.providers)u[s.providers[e]]=e;var l,d,p=process.env.DEBUG_CLS_HOOKED,f=-1;function h(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function g(e){return process.namespaces[e]}function m(e){let t=g(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function v(e){process.env.DEBUG&&process._rawDebug(e)}function y(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(t.exports={getNamespace:g,createNamespace:function(e){i.ok(e,"namespace must be given a name."),p&&v("CREATING NAMESPACE "+e);let t=new h(e);return t.id=f,s.addHooks({init(r,i,o,s,a){f=r,s?(t._contexts.set(r,t._contexts.get(s)),p&&v("PARENTID: "+e+" uid:"+r+" parent:"+s+" provider:"+o)):t._contexts.set(f,t.active),p&&v("INIT "+e+" uid:"+r+" parent:"+s+" provider:"+u[o]+" active:"+n.inspect(t.active,!0))},pre(r,i){f=r;let o=t._contexts.get(r);o?(p&&v(" PRE "+e+" uid:"+r+" handle:"+y(i)+" context:"+n.inspect(o)),t.enter(o)):p&&v(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+y(i))},post(r,i){f=r;let o=t._contexts.get(r);o?(p&&v(" POST "+e+" uid:"+r+" handle:"+y(i)+" context:"+n.inspect(o)),t.exit(o)):p&&v(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+y(i))},destroy(r){f=r,p&&v("DESTROY "+e+" uid:"+r+" context:"+n.inspect(t._contexts.get(f))+" active:"+n.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t},destroyNamespace:m,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){m(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},h.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return p&&v("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+f+" active:"+n.inspect(this.active,!0)),this.active[e]=t,t},h.prototype.get=function(e){if(this.active)return p&&v("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+f+" active:"+n.inspect(this.active,!0)),this.active[e];p&&v("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+f+" active:"+n.inspect(this.active,!0))},h.prototype.createContext=function(){p&&v("   CREATING Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  active:"+n.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=f,p&&v("   CREATED Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  context:"+n.inspect(e,!0,2,!0)),e},h.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return p&&v(" BEFORE RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{p&&v(" AFTER RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t)}},h.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},h.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return p&&v(" BEFORE runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(p&&v(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,p&&v(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},h.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{r.exit(t)}}},h.prototype.enter=function(e){i.ok(e,"context must be provided for entering"),p&&v("  ENTER "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+n.inspect(e)),this._set.push(this.active),this.active=e},h.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),p&&v("  EXIT "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+n.inspect(e)),this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(p&&v("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},h.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;o(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,r=e[a];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},h.prototype.fromException=function(e){return e[c]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),p)for(d in(l=cn()).filter._modifiers)l.filter.deattach(d)})),dn=v(((e,t)=>{"use strict";var r=Xr();process&&r.gte(process.versions.node,"8.0.0")?t.exports=Yr():t.exports=ln()})),pn=v(((e,t)=>{var r;e=t.exports=G,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var f=a++;s[f]="(?:"+s[c]+"|"+s[l]+")";var h=a++;s[h]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var m=a++;s[m]="(?:-?("+s[h]+"(?:\\."+s[h]+")*))";var v=a++;s[v]="[0-9A-Za-z-]+";var y=a++;s[y]="(?:\\+("+s[v]+"(?:\\."+s[v]+")*))";var _=a++,S="v?"+s[d]+s[g]+"?"+s[y]+"?";s[_]="^"+S+"$";var w="[v=\\s]*"+s[p]+s[m]+"?"+s[y]+"?",E=a++;s[E]="^"+w+"$";var b=a++;s[b]="((?:<|>)?=?)";var P=a++;s[P]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var C=a++;s[C]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[g]+")?"+s[y]+"?)?)?";var I=a++;s[I]="[v=\\s]*("+s[P]+")(?:\\.("+s[P]+")(?:\\.("+s[P]+")(?:"+s[m]+")?"+s[y]+"?)?)?";var O=a++;s[O]="^"+s[b]+"\\s*"+s[C]+"$";var x=a++;s[x]="^"+s[b]+"\\s*"+s[I]+"$";var N=a++;s[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var k=a++;s[k]="(?:~>?)";var A=a++;s[A]="(\\s*)"+s[k]+"\\s+",o[A]=new RegExp(s[A],"g");var R=a++;s[R]="^"+s[k]+s[C]+"$";var D=a++;s[D]="^"+s[k]+s[I]+"$";var j=a++;s[j]="(?:\\^)";var M=a++;s[M]="(\\s*)"+s[j]+"\\s+",o[M]=new RegExp(s[M],"g");var L=a++;s[L]="^"+s[j]+s[C]+"$";var F=a++;s[F]="^"+s[j]+s[I]+"$";var U=a++;s[U]="^"+s[b]+"\\s*("+w+")$|^$";var B=a++;s[B]="^"+s[b]+"\\s*("+S+")$|^$";var V=a++;s[V]="(\\s*)"+s[b]+"\\s*("+w+"|"+s[C]+")",o[V]=new RegExp(s[V],"g");var $=a++;s[$]="^\\s*("+s[C]+")\\s+-\\s+("+s[C]+")\\s*$";var q=a++;s[q]="^\\s*("+s[I]+")\\s+-\\s+("+s[I]+")\\s*$";var H,z=a++;for(s[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)r(H,s[H]),o[H]||(o[H]=new RegExp(s[H]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof G)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?o[E]:o[_]).test(e))return null;try{return new G(e,t)}catch{return null}}function G(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof G){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof G))return new G(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?o[E]:o[_]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var r=W(e,t);return r?r.version:null},e.clean=function(e,t){var r=W(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof G||(e=new G(e,this.options)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return X(n,i)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new G(e,r).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=W(e),n=W(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new G(e,r).compare(new G(t,r))}function Q(e,t,r){return J(e,t,r)>0}function Y(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function ee(e,t,r){return 0!==J(e,t,r)}function te(e,t,r){return J(e,t,r)>=0}function re(e,t,r){return J(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return Q(e,r,n);case">=":return te(e,r,n);case"<":return Y(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new G(e,t).major},e.minor=function(e,t){return new G(e,t).minor},e.patch=function(e,t){return new G(e,t).patch},e.compare=J,e.compareLoose=function(e,t){return J(e,t,!0)},e.rcompare=function(e,t,r){return J(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=Q,e.lt=Y,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=ie;var oe={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,i,o,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(i)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==oe&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch{return!1}return t.test(e)}function de(e,t,r,n){var i,o,s,a,c;switch(e=new G(e,n),t=new se(t,n),r){case">":i=Q,o=re,s=Y,a=">",c=">=";break;case"<":i=Y,o=te,s=Q,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===oe&&(e=new ie(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?o[U]:o[B],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new G(r[2],this.options.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new G(e,this.options)),ne(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[q]:o[$];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(o[V],"$1$2$3"),r("comparator trim",e,o[V]),e=(e=(e=e.replace(o[A],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[U]:o[B],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[F]:o[L];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[D]:o[R];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),ae(n)?a="":ae(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[x]:o[O];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(o=0),s=0,">"===n?(n=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",u?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[z],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new ie(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||-1===i.compare(e))&&(i=new G(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new se(t,r)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||1===i.compare(e))&&(i=new G(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new G("0.0.0");if(e.test(r)||(r=new G("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new G(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||Q(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=W(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(o[N]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),fn=v(((e,t)=>{var r,n,i,o,s,a=Jr().wrap,c=1,u=2,l=4,d=8,p=[],f=0,h=!1,g=[];function m(e,t){var r=e.length,n=t.length,i=[];if(0===r&&0===n)return i;for(var o=0;o<r;o++)i[o]=e[o];if(0===n)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&i.push(t[s])}return i}function v(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=c),"function"==typeof e.before&&(this.before=e.before,this.flags|=u),"function"==typeof e.after&&(this.after=e.after,this.flags|=l),"function"==typeof e.error&&(this.error=e.error,this.flags|=d),this.uid=++f,this.data=void 0===t?null:t}function y(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof v?e:new v(e,t)}process._fatalException?(i=!1,r=function(e){var t=p.length;if(i||0===t)return!1;var r=!1;i=!0;for(var n=0;n<t;++n){var s=p[n];if(0!=(s.flags&d)){var a=o&&o[s.uid];r=s.error(a,e)||r}}return i=!1,g.length>0&&(p=g.pop()),o=void 0,r&&!h},n=function(e,t,r){var n=[];h=!0;for(var i=0;i<r;++i){var s=t[i];if(n[s.uid]=s.data,0!=(s.flags&c)){var a=s.create(s.data);void 0!==a&&(n[s.uid]=a)}}return h=!1,function(){o=n,g.push(p),p=m(t,p),h=!0;for(var i=0;i<r;++i)(t[i].flags&u)>0&&t[i].before(this,n[t[i].uid]);h=!1;var s=e.apply(this,arguments);for(h=!0,i=0;i<r;++i)(t[i].flags&l)>0&&t[i].after(this,n[t[i].uid]);return h=!1,p=g.pop(),o=void 0,s}},a(process,"_fatalException",(function(e){return function(t){return r(t)||e(t)}}))):(s=!1,r=function(e){if(s)throw e;for(var t=!1,r=p.length,n=0;n<r;++n){var i=p[n];0!=(i.flags&d)&&(t=i.error(null,e)||t)}if(!t&&h)throw e},n=function(e,t,n){var i=[];h=!0;for(var o=0;o<n;++o){var a=t[o];if(i[a.uid]=a.data,0!=(a.flags&c)){var f=a.create(a.data);void 0!==f&&(i[a.uid]=f)}}return h=!1,function(){var o,a=!1,c=!1;g.push(p),p=m(t,p),h=!0;for(var f=0;f<n;++f)(t[f].flags&u)>0&&t[f].before(this,i[t[f].uid]);h=!1;try{o=e.apply(this,arguments)}catch(e){for(a=!0,f=0;f<n;++f)if(0!=(p[f].flags&d))try{c=p[f].error(i[t[f].uid],e)||c}catch(e){throw s=!0,e}if(!c)throw process.removeListener("uncaughtException",r),process._originalNextTick((function(){process.addListener("uncaughtException",r)})),e}finally{if(!a||c){for(h=!0,f=0;f<n;++f)(t[f].flags&l)>0&&t[f].after(this,i[t[f].uid]);h=!1}p=g.pop()}return o}},process.addListener("uncaughtException",r)),v.prototype.create=void 0,v.prototype.before=void 0,v.prototype.after=void 0,v.prototype.error=void 0,v.prototype.data=void 0,v.prototype.uid=0,v.prototype.flags=0,process.createAsyncListener=y,process.addAsyncListener=function(e,t){var r;r=e instanceof v?e:y(e,t);for(var n=!1,i=0;i<p.length;i++)if(r===p[i]){n=!0;break}return n||p.push(r),r},process.removeAsyncListener=function(e){for(var t=0;t<p.length;t++)if(e===p[t]){p.splice(t,1);break}},t.exports=function(e){var t=p.length;if(0===t)return e;for(var r=p.slice(),i=0;i<t;++i)if(r[i].flags>0)return n(e,r,t);return function(e,t,r){h=!0;for(var n=0;n<r;++n){var i=t[n];i.create&&i.create(i.data)}return h=!1,function(){g.push(p),p=m(t,p);var r=e.apply(this,arguments);return p=g.pop(),r}}(e,r,t)}})),hn=v(((e,t)=>{"use strict";t.exports=(e,t)=>class extends e{constructor(e){var r,n;super((function(e,o){r=this,n=[function(r){return t(i,!1),e(r)},function(e){return t(i,!1),o(e)}]}));var i=this;try{e.apply(r,n)}catch(e){n[1](e)}return i}}})),gn=v((()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=Jr(),t=pn(),n=e.wrap,i=e.massWrap,o=fn(),s=r(73837),a=t.gte(process.version,"6.0.0"),c=t.gte(process.version,"7.0.0"),u=t.gte(process.version,"8.0.0"),l=t.gte(process.version,"11.0.0"),d=r(41808);function p(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=o(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function f(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=o(t._originalOnread)}}c&&!d._normalizeArgs?d._normalizeArgs=function(e){if(0===e.length)return[{},null];var t=e[0],r={};"object"==typeof t&&null!==t?r=t:function(e){return"string"==typeof e&&!1===function(e){return(e=Number(e))>=0&&e}(e)}(t)?r.path=t:(r.port=t,e.length>1&&"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"!=typeof n?[r,null]:[r,n]}:!c&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(e){var t,r={};"object"==typeof e[0]&&null!==e[0]?r=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?r.path=e[0]:(r.port=e[0],"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"==typeof n?[r,n]:[r]}),"_setUpListenHandle"in d.Server.prototype?n(d.Server.prototype,"_setUpListenHandle",p):n(d.Server.prototype,"_listen2",p),n(d.Socket.prototype,"connect",(function(e){return function(){var t;(t=u&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:c?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments))[1]&&(t[1]=o(t[1]));var r=e.apply(this,t);return f(this),r}}));var h=r(13685);n(h.Agent.prototype,"addRequest",(function(e){return function(t){var r=t.onSocket;return t.onSocket=o((function(e){return f(e),r.apply(this,arguments)})),e.apply(this,arguments)}}));var g=r(32081);function m(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=o(e._handle.onread),n(e._handle,"close",N))})),e._handle&&(e._handle.onexit=o(e._handle.onexit))}g.ChildProcess?n(g.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return m(this),t}})):i(g,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return m(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var v=[];process._nextDomainTick&&v.push("_nextDomainTick"),process._tickDomainCallback&&v.push("_tickDomainCallback"),i(process,v,x),n(process,"nextTick",N);var y=["setTimeout","setInterval"];global.setImmediate&&y.push("setImmediate");var _=r(39512),S=global.setTimeout===_.setTimeout;i(_,y,N),S&&i(global,y,N);var w=r(9523);i(w,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],x),w.resolveNaptr&&n(w,"resolveNaptr",x);var E,b,P,T=r(57147);i(T,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],x),T.lchown&&n(T,"lchown",x),T.lchmod&&n(T,"lchmod",x),T.ftruncate&&n(T,"ftruncate",x);try{E=r(59796)}catch{}E&&E.Deflate&&E.Deflate.prototype&&((b=Object.getPrototypeOf(E.Deflate.prototype))._transform?n(b,"_transform",x):b.write&&b.flush&&b.end&&i(b,["write","flush","end"],x));try{P=r(6113)}catch{}P&&(C=["pbkdf2","randomBytes"],l||C.push("pseudoRandomBytes"),i(P,C,x));var C,I,O=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function x(e){var t=function(){var t,r=arguments.length-1;if("function"==typeof arguments[r]){t=Array(arguments.length);for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n];t[r]=o(arguments[r])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,r,n))};case 3:return function(r,n,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,r,n,i))};case 4:return function(r,n,i,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=o(s)),e.call(this,r,n,i,s))};case 5:return function(r,n,i,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=o(a)),e.call(this,r,n,i,s,a))};case 6:return function(r,n,i,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=o(c)),e.call(this,r,n,i,s,a,c))};default:return t}}function N(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=o(arguments[0]);for(var r=1;r<arguments.length;r++)t[r]=arguments[r]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n))};case 3:return function(r,n,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n,i))};case 4:return function(r,n,i,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n,i,s))};case 5:return function(r,n,i,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n,i,s,a))};case 6:return function(r,n,i,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,r,n,i,s,a,c))};default:return t}}O&&(I=process.addAsyncListener({create:function(){O=!1}}),global.Promise.resolve(!0).then((function(){O=!1})),process.removeAsyncListener(I)),O&&function(){var e=global.Promise;function t(n){if(!(this instanceof t))return e(n);if("function"!=typeof n)return new e(n);var i,o,s=new e((function(e,t){i=this,o=[function(t){return r(s,!1),e(t)},function(e){return r(s,!1),t(e)}]}));s.__proto__=t.prototype;try{n.apply(i,o)}catch(e){o[1](e)}return s}function r(e,t){(!e.__asl_wrapper||t)&&(e.__asl_wrapper=o(i))}function i(t,n,o,s){var a;try{return{returnVal:a=n.call(t,o),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){return(a.__asl_wrapper||i).apply(this,arguments)}:r(s,!0)}}function c(e){return function(){var t=this,r=e.apply(t,Array.prototype.map.call(arguments,(function(e){return"function"!=typeof e?e:o((function(n){var o=(t.__asl_wrapper||i)(this,e,n,r);if(o.error)throw o.errorVal;return o.returnVal}))})));return r.__asl_wrapper=function(e,n,o,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,r),r.__asl_wrapper(e,n,o,s)):i(e,n,o,s)},r}}s.inherits(t,e),n(e.prototype,"then",c),e.prototype.chain&&n(e.prototype,"chain",c),a?global.Promise=hn()(e,r):(["all","race","reject","resolve","accept","defer"].forEach((function(r){"function"==typeof e[r]&&(t[r]=e[r])})),global.Promise=t)}()})),mn=v(((e,t)=>{"use strict";var n=r(39491),i=Qr(),o="cls@contexts",s="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function u(e){var t=c(e);n.ok(t,"can't delete nonexistent namespace!"),n.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function l(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){u(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||gn(),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{r.exit(t)}}},a.prototype.enter=function(e){n.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(n.ok(e,"context must be provided for exiting"),this.active===e)return n.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);n.ok(t>=0,"context not currently entered; can't exit"),n.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){n.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;i(e,(function(e){!e||(e[o]||(e[o]=Object.create(null)),e[o][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[o])return e;var t=e,r=e[o];return Object.keys(r).forEach((function(e){var n=r[e];t=n.namespace.bind(t,n.context)})),t}))},a.prototype.fromException=function(e){return e[s]},process.namespaces||l(),t.exports={getNamespace:c,createNamespace:function(e){n.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,r){r&&t.enter(r)},after:function(e,r){r&&t.exit(r)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:u,reset:l}})),vn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=S(),r=Qt(),n=tr(),i=rr(),o=Kr(),s=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,r,n,i,o){return t=t||e,this.enabled?{operation:{name:r,id:e,parentId:t,traceparent:i,tracestate:o},customProperties:new a(n)}:null},e.spanToContextObject=function(t,r,i){var o=new n;return o.traceId=t.traceId,o.spanId=t.spanId,o.traceFlag=n.formatOpenTelemetryTraceFlags(t.traceFlags)||n.DEFAULT_TRACE_FLAG,o.parentId=r,e.generateContextObject(o.traceId,o.parentId,i,null,o)},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,((n={})[e.CONTEXT_NAME]=t,n))():r()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?((n={})[e.CONTEXT_NAME]=r,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls>"u"&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=dn():this.cls=mn()),e.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0}},e.startOperation=function(r,s){var a=r&&r.traceContext||null,c=r&&r.traceId?r:null,u=r&&r.headers;if(c){var l=new n("00-"+c.traceId+"-"+c.spanId+"-01"),d=new i(c.traceState?c.traceState.serialize():null);return e.generateContextObject(c.traceId,"|"+c.traceId+"."+c.spanId+".","string"==typeof s?s:"",void 0,l,d)}if(a){l=new n(a.traceparent),d=new i(a.tracestate);var p="object"==typeof s?new o(s):null;return e.generateContextObject(l.traceId,l.parentId,"string"==typeof s?s:p.getOperationName({}),p&&p.getCorrelationContextHeader()||void 0,l,d)}return u?(l=new n(u.traceparent?u.traceparent.toString():null),d=new i(u.tracestate?u.tracestate.toString():null),p=new o(r),e.generateContextObject(l.traceId,l.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),l,d)):(t.warn("startOperation was called with invalid arguments",arguments),null)},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,r=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,n=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&r)&&n},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();e.CorrelationContextManager=s;var a=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var r=this.props[t];if(r.key===e)return r.value}},e.prototype.setProperty=function(r,n){if(e.bannedCharacters.test(r)||e.bannedCharacters.test(n))t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+r+" and value: "+n);else{for(var i=0;i<this.props.length;++i){var o=this.props[i];if(o.key===r)return void(o.value=n)}this.props.push({key:r,value:n})}},e.bannedCharacters=/[,=]/,e}()})),yn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Wr(),r=T(),n=[],i=function(e){var r=e.data.message;n.forEach((function(n){r instanceof Error?n.trackException({exception:r}):(r.lastIndexOf("\n")==r.length-1&&(r=r.substring(0,r.length-1)),n.trackTrace({message:r,severity:e.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("console",i),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("console",i)},e.dispose=function(){r.channel.unsubscribe("console",i),n=[]}})),_n=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Wr(),r=T(),n=[],i={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},o=function(e){var t=e.data.result;n.forEach((function(r){var n=i[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("bunyan",o),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("bunyan",o)},e.dispose=function(){r.channel.unsubscribe("bunyan",o),n=[]}})),Sn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Wr(),r=T(),n=[],i={syslog:function(e){var r={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return void 0===r[e]?t.SeverityLevel.Information:r[e]},npm:function(e){var r={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return void 0===r[e]?t.SeverityLevel.Information:r[e]},unknown:function(e){return t.SeverityLevel.Information}},o=function(e){var t=e.data.message;n.forEach((function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=i[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("winston",o),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("winston",o)},e.dispose=function(){r.channel.unsubscribe("winston",o),n=[]}})),wn=v(((e,t)=>{"use strict";var r=Qt(),n=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){r.IsInitialized&&(yn().enable(e&&t,this._client),_n().enable(e,this._client),Sn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();t.exports=n})),En=v(((e,t)=>{"use strict";var r=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||13===parseInt(r[0])&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(t,n,i){void 0===i&&(i=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:i}),r._client.flush({isAppCrashing:!0}),t&&n&&1===process.listeners(n).length&&(console.error(i),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();t.exports=r})),bn=v((e=>{"use strict";var t,r,n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(n=r=e.QuickPulseCounter||(e.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",n.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",n.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",n.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",n.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",n.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",n.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",n.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",n.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(i=e.PerformanceCounter||(e.PerformanceCounter={})),function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"}(e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=((t={})[i.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[i.REQUEST_RATE]=r.REQUEST_RATE,t[i.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"})),Pn=v(((e,t)=>{"use strict";var n=r(22037),i=bn(),o=function(){function e(t,r,n){void 0===r&&(r=6e4),void 0===n&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var i=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=n.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval((function(){return i.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalRequestExecutionTime+=n,!1===r&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalDependencyExecutionTime+=n,!1===r&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=n.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,r=0,o=0,s=0,a=0,c=0;e&&c<e.length;c++){var u=e[c],l=this._lastCpus[c],d=(u.model,u.speed,u.times),p=l.times;t+=d.user-p.user||0,r+=d.sys-p.sys||0,o+=d.nice-p.nice||0,s+=d.idle-p.idle||0,a+=d.irq-p.irq||0}var f=void 0;if("function"==typeof process.cpuUsage){var h=process.cpuUsage(),g=process.hrtime(),m=h.user-this._lastAppCpuUsage.user+(h.system-this._lastAppCpuUsage.system)||0;typeof this._lastHrtime<"u"&&2===this._lastHrtime.length&&(f=100*m/((1e6*(g[0]-this._lastHrtime[0])+(g[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=h,this._lastHrtime=g}var v=t+r+o+s+a||1;this._client.trackMetric({name:i.PerformanceCounter.PROCESSOR_TIME,value:(v-s)/v*100}),this._client.trackMetric({name:i.PerformanceCounter.PROCESS_TIME,value:f||t/v*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=n.freemem(),t=process.memoryUsage().rss,r=n.totalmem()-e;this._client.trackMetric({name:i.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:i.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.COMMITTED_BYTES,value:r})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,o=r.totalFailedRequestCount-t.totalFailedRequestCount||0,s=r.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var u=n/a,l=o/a;this._client.trackMetric({name:i.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:i.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.REQUEST_FAILURE_RATE,value:l})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,o=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=r.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var u=n/a,l=o/a;this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:l}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,o=r.time-t.time;if(o>0){var s=n/(o/1e3);this._client.trackMetric({name:i.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();t.exports=o})),Tn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;e.AggregatedMetricCounter=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}})),Cn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}})),In=v(((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},n=bn(),i=Tn(),o=Cn(),s=function(){function e(t,r){void 0===r&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r}return e.prototype.enable=function(e,t){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return r.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,r){if(e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._requestCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}i.intervalExecutionTime+=n,i.totalCount++}},e.countDependency=function(t,r){if(e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._dependencyCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}i.intervalExecutionTime+=n,i.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var r=!1,n=0;n<t.length;n++){if(e===t[n].dimensions)return t[n];if(Object.keys(e).length===Object.keys(t[n].dimensions).length){for(var o in e)if(e[o]!=t[n].dimensions[o]){r=!0;break}if(!r)return t[n];r=!1}}var s=new i.AggregatedMetricCounter(e);return t.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date;var i=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/i||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:s,count:i,aggregationInterval:o,metricType:n.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date;var i=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/i||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:s,count:i,aggregationInterval:o,metricType:n.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],i=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:i,count:i,aggregationInterval:o,metricType:n.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],i=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:i,count:i,aggregationInterval:o,metricType:n.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var n in e.dimensions)t[o.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];t=r(r({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();t.exports=s})),On=v(((e,t)=>{"use strict";var n=r(22037),i=r(57147),o=r(71017),s=Wr(),a=S(),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(i.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.appVersion[t]=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=n&&n.hostname(),this.tags[this.keys.deviceOSVersion]=n&&n.type()+" "+n.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=n&&n.arch(),this.tags["ai.device.osPlatform"]=n&&n.platform()},e.prototype._loadInternalContext=function(){var t=o.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(i.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.sdkVersion=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();t.exports=c})),xn=v(((e,t)=>{"use strict";var n,i=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r(57310),s=Wr(),a=Zt(),c=Yt(),u=Gr(),l=er(),d=function(e){function t(r,n){var i=e.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=t._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return i(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var r=o.parse(this.url);r.search=void 0,r.hash=void 0;var n=this.method.toUpperCase()+" "+r.pathname,i=s.RemoteDependencyDataConstants.TYPE_HTTP,a=r.hostname;r.port&&(a+=":"+r.port),this.correlationId?(i=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==l.correlationIdPrefix&&(a+=" | "+this.correlationId)):i=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:n,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:i,target:a};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var u in e)c[u]||(c[u]=e[u]);if(e.properties)for(var u in e.properties)c.properties[u]=e.properties[u]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))e=o.parse(e);else{var r=o.parse(e);e="443"===r.host?o.parse("https://"+e):o.parse("http://"+e)}else{if(e&&"function"==typeof o.URL&&e instanceof o.URL)return o.format(e);var n=e;e={},n&&Object.keys(n).forEach((function(t){e[t]=n[t]}))}if(e.path){var i=o.parse(e.path);e.pathname=i.pathname,e.search=i.search}return e.host&&e.port&&!o.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host),e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(u);t.exports=d})),Nn=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=Se(),n=bn();function i(e){var r=t({},e);return Object.keys(n.SpanAttribute).forEach((function(e){delete r[e]})),r}e.spanToTelemetryContract=function(e){var o="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",s=Math.round(1e3*e._duration[0]+e._duration[1]/1e6),a=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",c=e.attributes.component?e.attributes.component.toString():"",u=c.toUpperCase()===n.DependencyTypeName.Http||!!e.attributes[n.SpanAttribute.HttpUrl],l=c.toLowerCase()===n.DependencyTypeName.Grpc;if(u){var d=e.attributes[n.SpanAttribute.HttpMethod]||"GET",p=new URL(e.attributes[n.SpanAttribute.HttpUrl].toString()),f=e.attributes[n.SpanAttribute.HttpHost]||p.host,h=e.attributes[n.SpanAttribute.HttpPort]||p.port||null,g=d+" "+(p.pathname||"/"),m=n.DependencyTypeName.Http,v=h?(f+":"+h).toString():f.toString(),y=p.toString(),_=e.attributes[n.SpanAttribute.HttpStatusCode]||e.status.code||0;return{id:o,name:g,dependencyTypeName:m,target:v,data:y,success:_<400,duration:s,url:y,resultCode:String(_),properties:i(e.attributes)}}if(l){d=e.attributes[n.SpanAttribute.GrpcMethod]||"rpc";var S=e.attributes[n.SpanAttribute.GrpcService],w=S?d+" "+S:e.name;return{id:o,duration:s,name:w,target:S.toString(),data:S.toString()||w,url:S.toString()||w,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:0===e.status.code,properties:i(e.attributes)}}var E=e.name,b=e.links&&e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return{id:o,duration:s,name:E,target:a,data:a||E,url:a||E,dependencyTypeName:e.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:c||e.name,resultCode:String(e.status.code||0),success:0===e.status.code,properties:t(t({},i(e.attributes)),{"_MS.links":b||void 0})}}})),kn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Se(),r=T(),n=tr(),i=Nn(),o=w(),s=[];e.subscriber=function(e){var r=e.data,a=i.spanToTelemetryContract(r),c=r.spanContext(),u=new n;u.traceId=c.traceId,u.spanId=c.spanId,u.traceFlag=n.formatOpenTelemetryTraceFlags(c.traceFlags),u.parentId=r.parentSpanId?"|"+c.traceId+"."+r.parentSpanId+".":null,o.AsyncScopeManager.with(r,(function(){s.forEach((function(e){r.kind===t.SpanKind.SERVER?e.trackRequest(a):(r.kind===t.SpanKind.CLIENT||r.kind===t.SpanKind.INTERNAL)&&e.trackDependency(a)}))}))},e.enable=function(t,n){t?(0===s.length&&r.channel.subscribe("azure-coretracing",e.subscriber),s.push(n)):0===(s=s.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("azure-coretracing",e.subscriber)}})),An=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=T(),r=[];e.subscriber=function(e){"ismaster"!==e.data.event.commandName&&r.forEach((function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},e.enable=function(n,i){n?(0===r.length&&t.channel.subscribe("mongodb",e.subscriber),r.push(i)):0===(r=r.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("mongodb",e.subscriber)}})),Rn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=T(),r=[];e.subscriber=function(e){r.forEach((function(t){var r=e.data.query||{},n=r.sql||"Unknown query",i=!e.data.err,o=(r._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},e.enable=function(n,i){n?(0===r.length&&t.channel.subscribe("mysql",e.subscriber),r.push(i)):0===(r=r.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("mysql",e.subscriber)}})),Dn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=T(),r=[];e.subscriber=function(e){r.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},e.enable=function(n,i){n?(0===r.length&&t.channel.subscribe("redis",e.subscriber),r.push(i)):0===(r=r.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("redis",e.subscriber)}})),jn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=T(),r=[];e.subscriber=function(e){r.forEach((function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},e.enable=function(n,i){n?(0===r.length&&t.channel.subscribe("postgres",e.subscriber),r.push(i)):0===(r=r.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("postgres",e.subscriber)}})),Mn=v(((e,t)=>{"use strict";var n=e&&e.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},i=r(13685),o=r(95687),s=S(),a=Zt(),c=Yt(),u=xn(),l=vn(),d=er(),p=tr(),f=Qt(),h=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(kn().enable(!0,this._client),An().enable(e,this._client),Rn().enable(e,this._client),Dn().enable(e,this._client),jn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=i.request,s=o.request,a=function(r,n){var i=!n[e.disableCollectionRequestOption]&&!r[e.alreadyAutoCollectedFlag];n.headers&&n.headers["user-agent"]&&-1!==n.headers["user-agent"].toString().indexOf("azsdk-js")&&(i=!1),r[e.alreadyAutoCollectedFlag]=!0,r&&n&&i&&(l.CorrelationContextManager.wrapEmitter(r),e.trackRequest(t._client,{options:n,request:r}))};i.request=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var s=r.call.apply(r,n([i,e],t));return a(s,e),s},o.request=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=s.call.apply(s,n([o,e],t));return a(i,e),i},i.get=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=(t=i.request).call.apply(t,n([i,e],r));return s.end(),s},o.get=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(t=o.request).call.apply(t,n([o,e],r));return s.end(),s}},e.trackRequest=function(t,r){if(r.options&&r.request&&t){var n,i,o=new u(r.options,r.request),f=l.CorrelationContextManager.getCurrentContext();if(f&&f.operation&&f.operation.traceparent&&p.isValidTraceId(f.operation.traceparent.traceId)?(f.operation.traceparent.updateSpanId(),n=f.operation.traceparent.getBackCompatRequestId()):d.w3cEnabled?(i=(g=new p).toString(),n=g.getBackCompatRequestId()):n=f&&f.operation&&f.operation.parentId+e.requestNumber+++".",a.canIncludeCorrelationHeader(t,o.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var h=r.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,r.request,h)}catch(e){s.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(f&&f.operation)try{if(r.request.setHeader(c.requestIdHeader,n),t.config.ignoreLegacyHeaders||(r.request.setHeader(c.parentIdHeader,f.operation.id),r.request.setHeader(c.rootIdHeader,n)),i||f.operation.traceparent)r.request.setHeader(c.traceparentHeader,i||f.operation.traceparent.toString());else if(d.w3cEnabled){var g=(new p).toString();r.request.setHeader(c.traceparentHeader,g)}if(f.operation.tracestate){var m=f.operation.tracestate.toString();m&&r.request.setHeader(c.traceStateHeader,m)}var v=f.customProperties.serializeToHeader();v&&r.request.setHeader(c.correlationContextHeader,v)}catch(e){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}r.request.on&&(r.request.on("response",(function(e){o.onResponse(e);var i=o.getDependencyTelemetry(r,n);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=r.options,i.contextObjects["http.ClientRequest"]=r.request,i.contextObjects["http.ClientResponse"]=e,t.trackDependency(i)})),r.request.on("error",(function(e){o.onError(e);var i=o.getDependencyTelemetry(r,n);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=r.options,i.contextObjects["http.ClientRequest"]=r.request,i.contextObjects.Error=e,t.trackDependency(i)})),r.request.on("abort",(function(){o.onError(new Error);var e=o.getDependencyTelemetry(r,n);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=r.options,e.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(e)})))}else s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=h})),Ln=v(((e,t)=>{"use strict";var n=r(22037),i=bn(),o=Zt(),s=On(),a=Mn(),c=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e,t){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return r.trackHeartBeat(t,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var r=this,o=!1,a={},c=s.sdkVersion;a.sdk=c,a.osType=n.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(void 0===this._isVM?(o=!0,this._getAzureComputeMetadata(e,(function(){r._isVM&&Object.keys(r._vmData).length>0&&(a.azInst_vmId=r._vmData.vmId||"",a.azInst_subscriptionId=r._vmData.subscriptionId||"",a.azInst_osType=r._vmData.osType||"",r._azInst_vmId=r._vmData.vmId||"",r._azInst_subscriptionId=r._vmData.subscriptionId||"",r._azInst_osType=r._vmData.osType||""),r._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:a}),t()}))):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),o||(this._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:a}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(e,t){var r,n=this,i=((r={method:"GET"})[a.disableCollectionRequestOption]=!0,r.headers={Metadata:"True"},r),s=o.makeRequest(e,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",i,(function(e){if(200===e.statusCode){n._isVM=!0;var r="";e.on("data",(function(e){r+=e})),e.on("end",(function(){n._vmData=n._isJSON(r)?JSON.parse(r):{},t()}))}else t()}));s&&(s.on("error",(function(e){e&&e.message&&e.message.indexOf("ENETUNREACH")>-1&&(n._isVM=!1),t()})),s.end())},e.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch{return!1}},e}();t.exports=c})),Fn=v(((e,t)=>{"use strict";var n=r(13685),i=r(95687),o=S(),s=Zt(),a=Yt(),c=Kr(),u=vn(),l=Pn(),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?u.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&u.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(r){if(r){if("function"!=typeof r)throw new Error("onRequest handler must be a function");return function(n,i){u.CorrelationContextManager.wrapEmitter(n),u.CorrelationContextManager.wrapEmitter(i);var o=n&&!n[e.alreadyAutoCollectedFlag];if(n&&o){var s=new c(n),a=t._generateCorrelationContext(s);u.CorrelationContextManager.runWithContext(a,(function(){t._isEnabled&&(n[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:n,response:i},s)),"function"==typeof r&&r(n,i)}))}else"function"==typeof r&&r(n,i)}}},o=function(e){var t=e.addListener.bind(e);e.addListener=function(e,n){switch(e){case"request":case"checkContinue":return t(e,r(n));default:return t(e,n)}},e.on=e.addListener},s=n.createServer;n.createServer=function(e,t){if(t&&"function"==typeof t){var n=s(e,r(t));return o(n),n}return n=s(r(e)),o(n),n};var a=i.createServer;i.createServer=function(e,t){var n=a(e,r(t));return o(n),n}},e.trackRequestSync=function(t,r){if(r.request&&r.response&&t){e.addResponseCorrelationIdHeader(t,r.response);var n=u.CorrelationContextManager.getCurrentContext(),i=new c(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(t.context.tags)||n.operation.id,n.operation.name=i.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,r,r.duration,r.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t)},e.trackRequest=function(t,r,n){if(r.request&&r.response&&t){var i=u.CorrelationContextManager.getCurrentContext(),a=n||new c(r.request,i&&i.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),i&&!n&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",(function(){e.endRequest(t,a,r,null,null)})),r.request.on&&r.request.on("error",(function(n){e.endRequest(t,a,r,null,n)})),r.request.on&&r.request.on("aborted",(function(){e.endRequest(t,a,r,null,"The request has been aborted and the network socket has closed.")}))}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var r=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,r)}},e.endRequest=function(e,t,r,n,i){i?t.onError(i,n):t.onResponse(r.response,n);var o=t.getRequestTelemetry(r);if(o.tagOverrides=t.getRequestTags(e.context.tags),r.tagOverrides)for(var s in r.tagOverrides)o.tagOverrides[s]=r.tagOverrides[s];var a=t.getLegacyRootId();a&&(o.properties.ai_legacyRootId=a),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=r.request,o.contextObjects["http.ServerResponse"]=r.response,e.trackRequest(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,u.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=d})),Un=v(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=r(22037),o=Wr(),s=bn(),a=Zt(),c=S(),u=a.w3cTraceId(),l=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,r,n){var o=i&&"function"==typeof i.hostname&&i.hostname()||"Unknown",s=n.tags&&n.keys&&n.keys.cloudRoleInstance&&n.tags[n.keys.cloudRoleInstance]||o,a=n.tags&&n.keys&&n.keys.cloudRole&&n.tags[n.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:r.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:n.tags[n.keys.internalSdkVersion],StreamId:u,MachineName:o,Instance:s,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case o.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case o.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case o.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case o.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case o.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData.name;return n(n({},r),{Name:i})},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData.severityLevel||0;return n(n({},r),{Message:t.data.baseData.message,SeverityLevel:o.SeverityLevel[i]})},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData.exceptions,o="",s="",a="";return i&&i.length>0&&(i[0].parsedStack&&i[0].parsedStack.length>0?i[0].parsedStack.forEach((function(e){o+=e.assembly+"\n"})):i[0].stack&&i[0].stack.length>0&&(o=i[0].stack),s=i[0].message,a=i[0].typeName),n(n({},r),{Exception:o,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData;return n(n({},r),{Name:i.name,Success:i.success,Duration:i.duration,ResponseCode:i.responseCode,OperationName:i.name})},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),i=t.data.baseData;return n(n({},r),{Name:i.name,Target:i.target,Success:i.success,Duration:i.duration,ResultCode:i.resultCode,CommandName:i.data,OperationName:r.OperationId,DependencyTypeName:i.type})},e.createQuickPulseDocument=function(t){var r,n;return t.data.baseType?(n=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:r,__type:n,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],r=e.data.baseData.measurements||{};for(var n in r)if(r.hasOwnProperty(n)){var i={key:n,value:r[n]};t.push(i)}var o=e.data.baseData.properties||{};for(var n in o)o.hasOwnProperty(n)&&(i={key:n,value:o[n]},t.push(i));return t},e.keys=new o.ContextTagKeys,e}();t.exports=l})),Bn=v(((e,t)=>{"use strict";t.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}})),Vn=v(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=r(95687),s=Mn(),a=S(),c=Bn(),u=Zt(),l="x-ms-qps-service-polling-interval-hint",d="x-ms-qps-service-endpoint-redirect",p=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t,r){var n=[{name:"x-ms-qps-stream-id",value:e.StreamId},{name:"x-ms-qps-machine-name",value:e.MachineName},{name:"x-ms-qps-role-name",value:e.RoleName},{name:"x-ms-qps-instance-name",value:e.Instance},{name:"x-ms-qps-invariant-version",value:e.InvariantVersion.toString()}];this._submitData(e,t,r,"ping",n)},e.prototype.post=function(e,t,r){return n(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this._submitData([e],t,r,"post")];case 1:return n.sent(),[2]}}))}))},e.prototype._submitData=function(e,t,r,a,p){return n(this,void 0,void 0,(function(){var n,f,h,g,m,v=this;return i(this,(function(i){return n=JSON.stringify(e),(g={})[s.disableCollectionRequestOption]=!0,g.host=t&&t.length>0?t:this._config.quickPulseHost,g.method="POST",g.path="/QuickPulseService.svc/"+a+"?ikey="+this._config.instrumentationKey,g.headers=((m={Expect:"100-continue"})["x-ms-qps-transmission-time"]=c.getTransmissionTime(),m["Content-Type"]="application/json",m["Content-Length"]=Buffer.byteLength(n),m),f=g,p&&p.length>0&&p.forEach((function(e){return f.headers[e.name]=e.value})),this._config.httpsAgent?f.agent=this._config.httpsAgent:f.agent=u.tlsRestrictedAgent,(h=o.request(f,(function(e){if(200==e.statusCode){var t="true"===e.headers["x-ms-qps-subscribed"],n=e.headers[d]?e.headers[d].toString():null,i=e.headers[l]?parseInt(e.headers[l].toString()):null;v._consecutiveErrors=0,r(t,e,n,i)}else v._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),r()}))).on("error",(function(e){v._onError(e),r()})),h.write(n),h.end(),[2]}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,r,t)):a.info(e.TAG,r,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();t.exports=p})),$n=v(((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=S(),o=Un(),s=Vn(),a=bn(),c=On(),u=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new c,this._sender=new s(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=o.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,r=e.count||1,n=a.PerformanceToQuickPulseCounter[e.name];n&&(this._metrics[n]?(this._metrics[n].Value=(this._metrics[n].Value*this._metrics[n].Weight+t*r)/(this._metrics[n].Weight+r),this._metrics[n].Weight+=r):(this._metrics[n]=o.createQuickPulseMetric(e),this._metrics[n].Name=n,this._metrics[n].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return r(this,void 0,void 0,(function(){var t,r,i,s,a=this;return n(this,(function(n){switch(n.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),r=o.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return n.sent(),[3,3];case 2:this._ping(r),n.label=3;case 3:return i=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,s=this._isCollectingData?e.POST_INTERVAL:i,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,s=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(s=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),s),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,r,n){null!=e?(this._isCollectingData!==e&&(i.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,r&&r.length>0&&(this._redirectedHost=r,i.info("Redirecting endpoint to: ",r)),n&&n>0&&(this._pollingIntervalHint=n),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();t.exports=u})),qn=v(((e,t)=>{"use strict";var r=bn(),n=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR).reduce((function(t,r){var n=r.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===n.length){var i=n[0].toLowerCase(),o=n[1];t[i]=o}return t}),{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();t.exports=n})),Hn=v(((e,t)=>{"use strict";var n=er(),i=qn(),o=(S(),bn()),s=r(57310),a=function(){function e(t){var r=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],a=i.parse(t),c=i.parse(n),u=!a.instrumentationkey&&Object.keys(a).length>0?null:t;this.instrumentationKey=a.instrumentationkey||u||c.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(a.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return r.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=a.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=a.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){n.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=n.correlationIdPrefix,n.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();t.exports=a})),zn=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var n=Hn(),i=On(),o=S(),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,n,i){var s=this;if(void 0===n&&(n={}),void 0===i&&(i=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=r(89166);e._emitter=new a,e._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch{return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=n,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,i),this._handle||(this._handle=setInterval((function(){return s._trackNativeMetrics()}),i),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var r=process.env[n.ENV_nativeMetricsDisableAll],i=process.env[n.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++)s[c[a]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:t(t({},e),s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var o=r[n].metrics,s=n+" Garbage Collection Duration",a=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:s,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData().loopUsage;if(0!=r.count){var n=Math.sqrt(r.sumSquares/r.count-Math.pow(r.total/r.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:r.total,count:r.count,min:r.min,max:r.max,stdDev:n,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,r;if(!this._disabledMetrics.heap){var n=process.memoryUsage(),o=n.heapUsed,s=n.heapTotal,a=n.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,r)})}},e}();e.AutoCollectNativePerformance=s})),Wn=v(((e,t)=>{"use strict";var r=S(),n=function(){function e(e,t,r,n){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=r,this._sender=n}return e.prototype.setUseDiskRetryCaching=function(e,t,r){this._sender.setDiskRetryMode(e,t,r)},e.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e)return void r.warn("Cannot send null/undefined telemetry");if(this._buffer.push(e),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(e,t){var r=this._buffer.length<1;r||(e?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,r&&"function"==typeof t&&t("no data to send")},e}();t.exports=n})),Gn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0,e.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}})),Kn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=Wr();function r(e){var t=2147483647,r=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)r=((r<<5)+r|0)+e.charCodeAt(n)|0;return(r=r<=-2147483648?t:Math.abs(r))/t*100}e.samplingTelemetryProcessor=function(e,n){var i=e.sampleRate;return!!(null==i||i>=100||e.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(e.data.baseType))||(n.correlationContext&&n.correlationContext.operation?r(n.correlationContext.operation.id)<i:100*Math.random()<i)},e.getSamplingHashCode=r})),Xn=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=Pn(),r=Wr();e.performanceMetricsTelemetryProcessor=function(e,n){switch(n&&n.addDocument(e),e.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var i=e.data.baseData;t.countRequest(i.duration,i.success);break;case r.TelemetryTypeString.Dependency:var o=e.data.baseData;t.countDependency(o.duration,o.success)}return!0}})),Jn=v((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=Wr(),n=In(),i=Wr();e.preAggregatedMetricsTelemetryProcessor=function(e,o){if(n.isEnabled())switch(e.data.baseType){case i.TelemetryTypeString.Exception:var s=e.data.baseData;s.properties=t(t({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole]};n.countException(a);break;case i.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[c.severity]};n.countTrace(u);break;case i.TelemetryTypeString.Request:var l=e.data.baseData;l.properties=t(t({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var d={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],requestSuccess:l.success,requestResultCode:l.responseCode};n.countRequest(l.duration,d);break;case i.TelemetryTypeString.Dependency:var p=e.data.baseData;p.properties=t(t({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var f={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],dependencySuccess:p.success,dependencyType:p.type,dependencyTarget:p.target,dependencyResultCode:p.resultCode};n.countDependency(p.duration,f)}return!0}})),Qn=v((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Gn(),e),r(Kn(),e),r(Xn(),e),r(Jn(),e)})),Yn=v(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=r(57147),s=r(22037),a=r(71017),c=r(59796),u=r(32081),l=S(),d=Mn(),p=Zt(),f=function(){function e(t,r,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=a.join(s.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=o.existsSync(e.ICACLS_PATH)}catch{}e.OS_PROVIDES_FILE_PROTECTION||l.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof r&&r>=0&&(this._resendInterval=Math.floor(r)),"number"==typeof n&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){i._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,r){return n(this,void 0,void 0,(function(){var n,o,s,a,u=this;return i(this,(function(i){return t&&(n=this._redirectedHost||this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s="",t.forEach((function(e){var t=u._stringify(e);"string"==typeof t&&(s+=t+"\n")})),s.length>0&&(s=s.substring(0,s.length-1)),a=Buffer.from?Buffer.from(s):new Buffer(s),c.gzip(a,(function(i,s){var c=s;i?(l.warn(i),c=a,o.headers["Content-Length"]=a.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=s.length.toString()),l.info(e.TAG,o),o[d.disableCollectionRequestOption]=!0;var f=p.makeRequest(u._config,n,o,(function(n){n.setEncoding("utf-8");var i="";n.on("data",(function(e){i+=e})),n.on("end",(function(){if(u._numConsecutiveFailures=0,u._enableDiskRetryMode)if(200===n.statusCode)u._resendTimer||(u._resendTimer=setTimeout((function(){u._resendTimer=null,u._sendFirstFileOnDisk()}),u._resendInterval),u._resendTimer.unref());else if(u._isRetriable(n.statusCode))try{var o=JSON.parse(i),s=[];o.errors.forEach((function(e){u._isRetriable(e.statusCode)&&s.push(t[e.index])})),s.length>0&&u._storeToDisk(s)}catch{u._storeToDisk(t)}if(307===n.statusCode||308===n.statusCode)if(u._numConsecutiveRedirects++,u._numConsecutiveRedirects<10){var a=n.headers.location?n.headers.location.toString():null;a&&(u._redirectedHost=a,u.send(t,r))}else"function"==typeof r&&r("Error sending telemetry because of circular redirects.");else u._numConsecutiveRedirects=0,"function"==typeof r&&r(i),l.info(e.TAG,i),"function"==typeof u._onSuccess&&u._onSuccess(i)}))}));f.on("error",(function(n){if(u._numConsecutiveFailures++,!u._enableDiskRetryMode||u._numConsecutiveFailures>0&&u._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var i="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";u._enableDiskRetryMode&&(i="Ingestion endpoint could not be reached "+u._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(e.TAG,i,p.dumpObj(n))}else i="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",l.info(e.TAG,i,p.dumpObj(n));u._onErrorHelper(n),"function"==typeof r&&(n&&r(p.dumpObj(n)),r("Error sending telemetry")),u._enableDiskRetryMode&&u._storeToDisk(t)})),f.write(c),f.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(e))},e.prototype._isRetriable=function(e){return 206===e||408===e||429===e||439===e||500===e||503===e},e.prototype._runICACLS=function(t,r){var n=u.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",(function(e){return r(e)})),n.on("close",(function(e,t){return r(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!u.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var r=u.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(0!==r.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=u.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",(function(e){return n+=e})),r.on("error",(function(e){return t(e,null)})),r.on("close",(function(r,i){return e.ACL_IDENTITY=n&&n.trim(),t(0===r?null:new Error("Getting ACL identity did not succeed (PS returned code "+r+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(u.spawnSync){var t=u.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(i,o){if(i)return e.ACLED_DIRECTORIES[t]=!1,r(i);n._runICACLS(n._getACLArguments(t,o),(function(n){return e.ACLED_DIRECTORIES[t]=!n,r(n)}))}))):r(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var r=this;o.lstat(e,(function(n,i){n&&"ENOENT"===n.code?o.mkdir(e,(function(n){n&&"EEXIST"!==n.code?t(n):r._applyACLRules(e,t)})):!n&&i.isDirectory()?r._applyACLRules(e,t):t(n||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){o.readdir(e,(function(r,n){if(r)return t(r,-1);var i=null,s=0,c=0;if(0!==n.length)for(var u=0;u<n.length;u++)o.stat(a.join(e,n[u]),(function(e,r){c++,e?i=e:r.isFile()&&(s+=r.size),c===n.length&&t(i,i?-1:s)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=o.readdirSync(e),r=0,n=0;n<t.length;n++)r+=o.statSync(a.join(e,t[n])).size;return r},e.prototype._storeToDisk=function(t){var r=this;l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(n){if(n)return l.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),void r._onErrorHelper(n);r._getShallowDirectorySize(r._tempDir,(function(n,i){if(n||i<0)return l.warn(e.TAG,"Error while checking directory size: "+(n&&n.message)),void r._onErrorHelper(n);if(i>r._maxBytesOnDisk)l.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+i);else{var s=(new Date).getTime()+".ai.json",c=a.join(r._tempDir,s);l.info(e.TAG,"saving data to disk at: "+c),o.writeFile(c,r._stringify(t),{mode:384},(function(e){return r._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){try{l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk)return void l.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);var n=(new Date).getTime()+".ai.json",i=a.join(this._tempDir,n);l.info(e.TAG,"saving data before crash to disk at: "+i),o.writeFileSync(i,t,{mode:384})}catch(t){l.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var e=this;o.exists(this._tempDir,(function(t){t&&o.readdir(e._tempDir,(function(t,r){if(t)e._onErrorHelper(t);else if((r=r.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0){var n=r[0],i=a.join(e._tempDir,n);o.readFile(i,(function(t,r){t?e._onErrorHelper(t):o.unlink(i,(function(t){if(t)e._onErrorHelper(t);else try{var n=JSON.parse(r.toString());e.send(n)}catch(e){l.warn("Failed to read persisted file",e)}}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){l.warn("Failed to serialize payload",t,e)}},e.prototype._fileCleanupTask=function(){var t=this;o.exists(this._tempDir,(function(r){r&&o.readdir(t._tempDir,(function(r,n){r?t._onErrorHelper(r):(n=n.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0&&n.forEach((function(r){var n=new Date(parseInt(r.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>n){var i=a.join(t._tempDir,r);o.unlink(i,(function(e){e&&t._onErrorHelper(e)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===s.type(),e}();t.exports=f})),Zn=v(((e,t)=>{"use strict";var r=Wr(),n=Zt(),i=vn(),o=function(){function e(){}return e.createEnvelope=function(t,i,o,s,a){var c=null;switch(i){case r.TelemetryType.Trace:c=e.createTraceData(t);break;case r.TelemetryType.Dependency:c=e.createDependencyData(t);break;case r.TelemetryType.Event:c=e.createEventData(t);break;case r.TelemetryType.Exception:c=e.createExceptionData(t);break;case r.TelemetryType.Request:c=e.createRequestData(t);break;case r.TelemetryType.Metric:c=e.createMetricData(t);break;case r.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case r.TelemetryType.PageView:c=e.createPageViewData(t)}if(o&&r.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var u in o)c.baseData.properties[u]||(c.baseData.properties[u]=o[u]);else c.baseData.properties=o;c.baseData.properties=n.validateStringMap(c.baseData.properties)}var l=a&&a.instrumentationKey||"",d=new r.Envelope;return d.data=c,d.iKey=l,d.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),d.tags=this.getTags(s,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,i===r.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new r.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Information:t.severityLevel=e.severity;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new r.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=n.w3cTraceId();var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),i.baseData=t,i},e.createEventData=function(e){var t=new r.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new r.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var i=e.exception.stack,o=new r.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(i),o.hasFullStack=n.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new r.RequestData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=n.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),i.baseData=t,i},e.createMetricData=function(e){var t=new r.MetricData;t.metrics=[];var n=new r.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=r.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),i.baseData=t,i},e.createAvailabilityData=function(e){var t=new r.AvailabilityData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),i.baseData=t,i},e.createPageViewData=function(e){var t=new r.PageViewData;t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),i.baseData=t,i},e.getTags=function(e,t){var r=i.CorrelationContextManager.getCurrentContext(),n={};if(e&&e.tags)for(var o in e.tags)n[o]=e.tags[o];if(t)for(var o in t)n[o]=t[o];return r&&(n[e.keys.operationId]=n[e.keys.operationId]||r.operation.id,n[e.keys.operationName]=n[e.keys.operationName]||r.operation.name,n[e.keys.operationParentId]=n[e.keys.operationParentId]||r.operation.parentId),n},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var r=e.split("\n");t=[];for(var n=0,i=0,o=0;o<=r.length;o++){var a=r[o];if(s.regex.test(a)){var c=new s(r[o],n++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var u=0,l=t.length-1,d=0,p=u,f=l;u<l;){if((d+=t[u].sizeInBytes+t[l].sizeInBytes)>32768){var h=f-p+1;t.splice(p,h);break}p=u,f=l,u++,l--}}return t},e}(),s=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=n.trim(t);var i=t.match(e.regex);i&&i.length>=5&&(this.method=n.trim(i[2])||this.method,this.fileName=n.trim(i[4])||"<no_filename>",this.line=parseInt(i[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();t.exports=o})),ei=v(((e,t)=>{"use strict";var n=r(57310),i=Hn(),o=On(),s=Wr(),a=Wn(),c=Qn(),u=vn(),l=Yn(),d=Zt(),p=S(),f=Zn(),h=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new i(e);this.config=t,this.context=new o,this.commonProperties={};var r=new l(this.config);this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),r)}return e.prototype.trackAvailability=function(e){this.track(e,s.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,s.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=n.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var r=f.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(r.time=e.time.toISOString()),this._enableAzureProperties&&c.azureRoleEnvironmentTelemetryProcessor(r,this.context);var n=this.runTelemetryProcessors(r,e.contextObjects);n=n&&c.samplingTelemetryProcessor(r,{correlationContext:u.CorrelationContextManager.getCurrentContext()}),c.preAggregatedMetricsTelemetryProcessor(r,this.context),n&&(c.performanceMetricsTelemetryProcessor(r,this.quickPulseClient),this.channel.send(r))}else p.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var r=!0,n=this._telemetryProcessors.length;if(0===n)return r;(t=t||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var i=0;i<n;++i)try{var o=this._telemetryProcessors[i];if(o&&!1===o.apply(null,[e,t])){r=!1;break}}catch(t){r=!0,p.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return r&&(e&&e.tags&&(e.tags=d.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=d.validateStringMap(e.data.baseData.properties))),r},e}();t.exports=h})),ti=v(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=ei(),o=Fn(),s=Mn(),a=S(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?o.trackRequestSync(this,e):a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?o.trackRequest(this,e):a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?s.trackRequest(this,e):a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(i);t.exports=c})),ri=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ni=v((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t,r,n=vn(),i=wn(),o=En(),s=Pn(),a=In(),c=Ln(),u=Mn(),l=Fn(),d=er(),p=S(),f=$n(),h=zn();e.TelemetryClient=ti(),e.Contracts=Wr(),e.azureFunctionsTypes=ri(),(r=t=e.DistributedTracingModes||(e.DistributedTracingModes={}))[r.AI=0]="AI",r[r.AI_AND_W3C=1]="AI_AND_W3C";var g,m,v,y,_,w,E,b,P,T,C,I=!0,O=!1,x=!0,N=!0,k=!0,A=!1,R=!0,D=!0,j=!0,M=!0,L=!1,F=!0,U=void 0,B=void 0,V=!1;function $(){return e.defaultClient?(V=!0,v.enable(I,O),y.enable(x),_.enable(N),w.enable(k),E.enable(A,e.defaultClient.config),b.enable(F,m),P.useAutoCorrelation(M,g),P.enable(R),T.enable(D),e.liveMetricsClient&&L&&e.liveMetricsClient.enable(L)):p.warn("Start cannot be called before setup"),q}e.setup=function(t){return e.defaultClient?p.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(t),v=new i(e.defaultClient),y=new o(e.defaultClient),_=new s(e.defaultClient),w=new a(e.defaultClient),E=new c(e.defaultClient),P=new l(e.defaultClient),T=new u(e.defaultClient),b||(b=new h.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(j,U,B),q},e.start=$,e.getCorrelationContext=function(){return M?n.CorrelationContextManager.getCurrentContext():null},e.startOperation=function(e,t){return n.CorrelationContextManager.startOperation(e,t)},e.wrapWithCorrelationContext=function(e,t){return n.CorrelationContextManager.wrapCallback(e,t)};var q=function(){function r(){}return r.setDistributedTracingMode=function(e){return d.w3cEnabled=e===t.AI_AND_W3C,r},r.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),I=e,O=t,V&&v.enable(e,t),r},r.setAutoCollectExceptions=function(e){return x=e,V&&y.enable(e),r},r.setAutoCollectPerformance=function(e,t){void 0===t&&(t=!0),N=e;var n=h.AutoCollectNativePerformance.parseEnabled(t);return F=n.isEnabled,m=n.disabledMetrics,V&&(_.enable(e),b.enable(n.isEnabled,n.disabledMetrics)),r},r.setAutoCollectPreAggregatedMetrics=function(e){return k=e,V&&w.enable(e),r},r.setAutoCollectHeartbeat=function(t){return A=t,V&&E.enable(t,e.defaultClient.config),r},r.setAutoCollectRequests=function(e){return R=e,V&&P.enable(e),r},r.setAutoCollectDependencies=function(e){return D=e,V&&T.enable(e),r},r.setAutoDependencyCorrelation=function(e,t){return M=e,g=t,V&&P.useAutoCorrelation(e,t),r},r.setUseDiskRetryCaching=function(t,n,i){return j=t,U=n,B=i,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(t,n,i),r},r.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),p.enableDebug=e,p.disableWarnings=!t,r},r.setSendLiveMetrics=function(t){return void 0===t&&(t=!1),e.defaultClient?(!e.liveMetricsClient&&t?(e.liveMetricsClient=new f(e.defaultClient.config,null),C=new s(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(C),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(t),L=t,r):(p.warn("Live metrics client cannot be setup without the default client"),r)},r.start=$,r}();e.Configuration=q,e.dispose=function(){d.w3cEnabled=!0,e.defaultClient=null,V=!1,v&&v.dispose(),y&&y.dispose(),_&&_.dispose(),w&&w.dispose(),E&&E.dispose(),b&&b.dispose(),P&&P.dispose(),T&&T.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),L=!1,e.liveMetricsClient=void 0)}})),ii={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(ii,{default:()=>li}),e.exports=(n=ii,y(o({},"__esModule",{value:!0}),n));var oi=_(r(22037)),si=_(r(89496)),ai=_(r(95687)),ci=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){try{let e=this.vscodeAPI.env.telemetryConfiguration;return e.isUsageEnabled&&e.isErrorsEnabled&&e.isCrashEnabled?"on":e.isErrorsEnabled&&e.isCrashEnabled?"error":"off"}catch{return void 0!==this.vscodeAPI.env.isTelemetryEnabled?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration("telemetry").get("enableTelemetry")?"on":"off"}}static applyReplacements(e,t){for(let r of Object.keys(e))for(let n of t)n.lookup.test(r)&&(void 0!==n.replacementString?e[r]=n.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getInstance(e){return ci._instance||(ci._instance=new ci(e)),ci._instance}},ui=class{constructor(e,t,r,n,i,o){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.vscodeAPI=i,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),void 0!==i.env.onDidChangeTelemetryEnabled?(this.disposables.push(i.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(i.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(i.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=ci.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn="on"===e,this.errorOptIn="error"===e||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach((r=>{0===e.indexOf(`${r}`)&&(t=r)})),t}get extension(){return void 0===this._extension&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return!(!1===this.errorOptIn||this.firstParty&&this.vscodeAPI.env.remoteName&&"other"===this.cleanRemoteName(this.vscodeAPI.env.remoteName))}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(null==e)return"";let n=[];""!==this.vscodeAPI.env.appRoot&&n.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=e;if(t){let t=[];for(let i of n)for(;(r=i.exec(e))&&r;)t.push([r.index,i.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(i="";(r=s.exec(e))&&r;)r[0]&&!o.test(r[0])&&t.every((([e,t])=>r.index<e||r.index>=t))&&(i+=e.substring(a,r.index)+"<REDACTED: user-file-path>",a=s.lastIndex);a<e.length&&(i+=e.substr(a))}for(let e of n)i=i.replace(e,"");return i}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t={};for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/.test(n.toLowerCase())?t[r]="<REDACTED: secret>":i.test(n)?t[r]="<REDACTED: email>":o.test(n)?t[r]="<REDACTED: token>":t[r]=n}return t}get telemetryLevel(){switch(ci.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,r,n,i){if((this.userOptIn||i)&&""!==e){if(t=g(g({},t),this.getCommonProperties()),n){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},r=r??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:r})}}sendTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!0,!1)}sendRawTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!1,!1)}sendDangerousTelemetryEvent(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,r,n,!0)}internalSendTelemetryErrorEvent(e,t,r,n,i){if((this.shouldSendErrorTelemetry()||i)&&""!==e){if(t=g(g({},t),this.getCommonProperties()),n){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},r=r??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:r})}}sendTelemetryErrorEvent(e,t,r){this.internalSendTelemetryErrorEvent(e,t,r,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,r,n,!0)}internalSendTelemetryException(e,t,r,n,i){if((this.shouldSendErrorTelemetry()||i)&&e){if(t=g(g({},t),this.getCommonProperties()),n){let r=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(r)}t=t??{},r=r??{},this.telemetryAppender.logException(e,{properties:t,measurements:r})}}sendTelemetryException(e,t,r){this.internalSendTelemetryException(e,t,r,!0,!1)}sendDangerousTelemetryException(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,r,n,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}},li=class extends ui{constructor(e,t,n,i,o){let s=e=>(async(e,t)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let t=await Promise.resolve().then((()=>_(ni())));t.defaultClient?(r=new t.TelemetryClient(e),r.channel.setUseDiskRetryCaching(!0)):(t.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),r=t.defaultClient),si&&si.env&&(r.context.tags[r.context.keys.userId]=si.env.machineId,r.context.tags[r.context.keys.sessionId]=si.env.sessionId,r.context.tags[r.context.keys.cloudRole]=si.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=si.env.appName),e&&0===e.indexOf("AIF-")&&(r.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(e){return Promise.reject("Failed to initialize app insights!\n"+e.message)}return null!=t&&t.length&&function(e,t){e.addTelemetryProcessor((e=>(Array.isArray(e.tags)?e.tags.forEach((e=>ci.applyReplacements(e,t))):e.tags&&ci.applyReplacements(e.tags,t),e.data.baseData&&ci.applyReplacements(e.data.baseData,t),!0)))}(r,t),{logEvent:(e,t)=>{try{null==r||r.trackEvent({name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{try{null==r||r.trackException({exception:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log exception to app insights!\n"+e.message)}},flush:async()=>{try{null==r||r.flush()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,o);ci.shouldUseOneDataSystemSDK(n)&&(s=e=>(async(e,t,n)=>{let i=await(async(e,t,n)=>{let i=await Promise.all([r.e(844),r.e(779)]).then(r.bind(r,50779)),o=await Promise.all([r.e(844),r.e(172)]).then(r.bind(r,21172)),s=new i.AppInsightsCore,a=new o.PostChannel,c={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[a]]};if(n){c.extensionConfig={};let e={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[a.identifier]=e}let u=t.workspace.getConfiguration("telemetry").get("internalTesting");return s.initialize(c,[]),s.addTelemetryInitializer((e=>{!u||(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),s})(e,t,n);return{logEvent:(e,t)=>{try{null==i||i.track({name:e,baseData:{name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{null==i||i.unload()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,si,{sendPOST:(e,t)=>{let r={method:"POST",headers:m(g({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let n=ai.request(e.urlString,r,(e=>{e.on("data",(function(r){t(e.statusCode??200,e.headers,r.toString())})),e.on("error",(function(){t(0,{})}))}));n.write(e.data),n.end()}catch{t(0,{})}}}));let a=new class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):2!==this._instantiationStatus&&this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):2!==this._instantiationStatus&&this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){0===this._instantiationStatus&&(this._instantiationStatus=1,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=2})))}}(n,s);n&&(0===n.indexOf("AIF-")||ci.shouldUseOneDataSystemSDK(n))&&(i=!0),super(e,t,a,{release:oi.release(),platform:oi.platform(),architecture:oi.arch()},si,i)}}},70852:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=70852,e.exports=t},41024:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=41024,e.exports=t},69183:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>E,parse:()=>v,stringify:()=>d,v1:()=>m,v3:()=>_,v4:()=>S,v5:()=>w,validate:()=>u,version:()=>b});var n=r(6113),i=r.n(n);const o=new Uint8Array(256);let s=o.length;function a(){return s>o.length-16&&(i().randomFillSync(o),s=0),o.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).substr(1));const d=function(e,t=0){const r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let p,f,h=0,g=0;const m=function(e,t,r){let n=t&&r||0;const i=t||new Array(16);let o=(e=e||{}).node||p,s=void 0!==e.clockseq?e.clockseq:f;if(null==o||null==s){const t=e.random||(e.rng||a)();null==o&&(o=p=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=f=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:g+1;const l=c-h+(u-g)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||c>h)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,g=u,f=s,c+=122192928e5;const m=(1e4*(268435455&c)+u)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=255&m;const v=c/4294967296*1e4&268435455;i[n++]=v>>>8&255,i[n++]=255&v,i[n++]=v>>>24&15|16,i[n++]=v>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(let e=0;e<6;++e)i[n+e]=o[e];return t||d(i)},v=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function y(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=v(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=r(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=s[e];return i}return d(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const _=y("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("md5").update(e).digest()})),S=function(e,t,r){const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)},w=y("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i().createHash("sha1").update(e).digest()})),E="00000000-0000-0000-0000-000000000000",b=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},23870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=void 0;const n=r(20839);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return n.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return n.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return n.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return n.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return n.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return n.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return n.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return n.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return n.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return n.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return n.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return n.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return n.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return n.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return n.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return n.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return n.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return n.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return n.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return n.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return n.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return n.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return n.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return n.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return n.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return n.ParameterStructures}});const i=r(96184);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return i.Touch}});const o=r(83911);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=r(27135);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=r(13881);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=r(98211);Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return c.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return c.SharedArrayReceiverStrategy}});const u=r(56525);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return u.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return u.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return u.ReadableStreamMessageReader}});const l=r(96654);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const d=r(75530);Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return d.AbstractMessageBuffer}});const p=r(61343);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return p.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return p.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return p.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return p.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return p.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return p.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return p.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return p.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return p.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return p.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return p.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return p.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return p.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return p.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return p.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return p.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return p.MessageStrategy}});const f=r(30147);t.RAL=f.default},13881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const n=r(30147),i=r(67574),o=r(27135);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const r=t;return r&&(r===e.None||r===e.Cancelled||i.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const r=(0,n.default)().timer.setTimeout(e.bind(t),0);return{dispose(){r.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},61343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const n=r(30147),i=r(67574),o=r(20839),s=r(96184),a=r(27135),c=r(13881);var u,l,d,p,f,h,g,m,v,y,_,S,w,E,b,P,T,C;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(u||(u={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(l=t.ProgressToken||(t.ProgressToken={})),function(e){e.type=new o.NotificationType("$/progress")}(d||(d={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(p||(p={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(f=t.Trace||(t.Trace={})),(C=t.TraceValues||(t.TraceValues={})).Off="off",C.Messages="messages",C.Compact="compact",C.Verbose="verbose",function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(f=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return i.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(g=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(v=t.ConnectionErrors||(t.ConnectionErrors={}));class I extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,I.prototype)}}t.ConnectionError=I,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(y=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.is=function(e){const t=e;return t&&(void 0===t.kind||"id"===t.kind)&&i.func(t.createCancellationTokenSource)&&(void 0===t.dispose||i.func(t.dispose))}}(_=t.IdCancellationReceiverStrategy||(t.IdCancellationReceiverStrategy={})),function(e){e.is=function(e){const t=e;return t&&"request"===t.kind&&i.func(t.createCancellationTokenSource)&&(void 0===t.dispose||i.func(t.dispose))}}(S=t.RequestCancellationReceiverStrategy||(t.RequestCancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){return _.is(e)||S.is(e)}}(w=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(u.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(E=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:w.Message,sender:E.Message}),e.is=function(e){const t=e;return t&&w.is(t.receiver)&&E.is(t.sender)}}(b=t.CancellationStrategy||(t.CancellationStrategy={})),function(e){e.is=function(e){const t=e;return t&&i.func(t.handleMessage)}}(P=t.MessageStrategy||(t.MessageStrategy={})),(t.ConnectionOptions||(t.ConnectionOptions={})).is=function(e){const t=e;return t&&(b.is(t.cancellationStrategy)||y.is(t.connectionStrategy)||P.is(t.messageStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(T||(T={})),t.createMessageConnection=function(e,r,y,S){const w=void 0!==y?y:t.NullLogger;let E=0,C=0,O=0;const x="2.0";let N;const k=new Map;let A;const R=new Map,D=new Map;let j,M,L=new s.LinkedMap,F=new Map,U=new Set,B=new Map,V=f.Off,$=h.Text,q=T.New;const H=new a.Emitter,z=new a.Emitter,W=new a.Emitter,G=new a.Emitter,K=new a.Emitter,X=S&&S.cancellationStrategy?S.cancellationStrategy:b.Message;function J(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function Q(e){}function Y(){return q===T.Listening}function Z(){return q===T.Closed}function ee(){return q===T.Disposed}function te(){q!==T.New&&q!==T.Listening||(q=T.Closed,z.fire(void 0))}function re(){j||0===L.size||(j=(0,n.default)().timer.setImmediate((()=>{j=void 0,function(){if(0===L.size)return;const e=L.shift();try{const t=S?.messageStrategy;P.is(t)?t.handleMessage(e,ne):ne(e)}finally{re()}}()})))}function ne(e){o.Message.isRequest(e)?function(e){if(ee())return;function t(t,n,i){const s={jsonrpc:x,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,se(s,n,i),r.write(s).catch((()=>w.error("Sending response failed.")))}function n(t,n,i){const o={jsonrpc:x,id:e.id,error:t.toJson()};se(o,n,i),r.write(o).catch((()=>w.error("Sending response failed.")))}!function(e){if(V!==f.Off&&M)if($===h.Text){let t;V!==f.Verbose&&V!==f.Compact||!e.params||(t=`Params: ${oe(e.params)}\n\n`),M.log(`Received request '${e.method} - (${e.id})'.`,t)}else ce("receive-request",e)}(e);const s=k.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const u=Date.now();if(c||N){const s=e.id??String(Date.now()),l=_.is(X.receiver)?X.receiver.createCancellationTokenSource(s):X.receiver.createCancellationTokenSource(e);null!==e.id&&U.has(e.id)&&l.cancel(),null!==e.id&&B.set(s,l);try{let d;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void n(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,u);d=c(l.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void n(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,u);d=c(...e.params,l.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void n(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,u);d=c(e.params,l.token)}else N&&(d=N(e.method,e.params,l.token));const p=d;d?p.then?p.then((r=>{B.delete(s),t(r,e.method,u)}),(t=>{B.delete(s),t instanceof o.ResponseError?n(t,e.method,u):t&&i.string(t.message)?n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(B.delete(s),t(d,e.method,u)):(B.delete(s),function(t,n,i){void 0===t&&(t=null);const o={jsonrpc:x,id:e.id,result:t};se(o,n,i),r.write(o).catch((()=>w.error("Sending response failed.")))}(d,e.method,u))}catch(r){B.delete(s),r instanceof o.ResponseError?t(r,e.method,u):r&&i.string(r.message)?n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${r.message}`),e.method,u):n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else n(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):o.Message.isNotification(e)?function(e){if(ee())return;let t,r;if(e.method===u.type.method){const t=e.params.id;return U.delete(t),void ae(e)}{const n=R.get(e.method);n&&(r=n.handler,t=n.type)}if(r||A)try{if(ae(e),r)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),r();else if(Array.isArray(e.params)){const n=e.params;e.method===d.type.method&&2===n.length&&l.is(n[0])?r({token:n[0],value:n[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${n.length} arguments`)),r(...n))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&w.error(`Notification ${e.method} defines parameters by position but received parameters by name`),r(e.params);else A&&A(e.method,e.params)}catch(t){t.message?w.error(`Notification handler '${e.method}' failed with message: ${t.message}`):w.error(`Notification handler '${e.method}' failed unexpectedly.`)}else W.fire(e)}(e):o.Message.isResponse(e)?function(e){if(!ee())if(null===e.id)e.error?w.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):w.error("Received response message without id. No further error information provided.");else{const t=e.id,r=F.get(t);if(function(e,t){if(V!==f.Off&&M)if($===h.Text){let r;if(V!==f.Verbose&&V!==f.Compact||(e.error&&e.error.data?r=`Error data: ${oe(e.error.data)}\n\n`:e.result?r=`Result: ${oe(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),t){const n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";M.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,r)}else M.log(`Received response ${e.id} without active response promise.`,r)}else ce("receive-response",e)}(e,r),void 0!==r){F.delete(t);try{if(e.error){const t=e.error;r.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?w.error(`Response handler '${r.method}' failed with message: ${e.message}`):w.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void w.error("Received empty message.");w.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=t.id,r=F.get(e);r&&r.reject(new Error("The received response has neither a result nor an error property."))}}(e)}e.onClose(te),e.onError((function(e){H.fire([e,void 0,void 0])})),r.onClose(te),r.onError((function(e){H.fire(e)}));const ie=e=>{try{if(o.Message.isNotification(e)&&e.method===u.type.method){const t=e.params.id,n=J(t),i=L.get(n);if(o.Message.isRequest(i)){const o=S?.connectionStrategy,s=o&&o.cancelUndispatched?o.cancelUndispatched(i,Q):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return L.delete(n),B.delete(t),s.id=i.id,se(s,e.method,Date.now()),void r.write(s).catch((()=>w.error("Sending response for canceled message failed.")))}const s=B.get(t);if(void 0!==s)return s.cancel(),void ae(e);U.add(t)}!function(e,t){var r;o.Message.isRequest(t)?e.set(J(t.id),t):o.Message.isResponse(t)?e.set(null===(r=t.id)?"res-unknown-"+(++O).toString():"res-"+r.toString(),t):e.set("not-"+(++C).toString(),t)}(L,e)}finally{re()}};function oe(e){if(null!=e)switch(V){case f.Verbose:return JSON.stringify(e,null,4);case f.Compact:return JSON.stringify(e);default:return}}function se(e,t,r){if(V!==f.Off&&M)if($===h.Text){let n;V!==f.Verbose&&V!==f.Compact||(e.error&&e.error.data?n=`Error data: ${oe(e.error.data)}\n\n`:e.result?n=`Result: ${oe(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),M.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-r}ms`,n)}else ce("send-response",e)}function ae(e){if(V!==f.Off&&M&&e.method!==m.type.method)if($===h.Text){let t;V!==f.Verbose&&V!==f.Compact||(t=e.params?`Params: ${oe(e.params)}\n\n`:"No parameters provided.\n\n"),M.log(`Received notification '${e.method}'.`,t)}else ce("receive-notification",e)}function ce(e,t){if(!M||V===f.Off)return;const r={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};M.log(r)}function ue(){if(Z())throw new I(v.Closed,"Connection is closed.");if(ee())throw new I(v.Disposed,"Connection is disposed.")}function le(e){return void 0===e?null:e}function de(e){return null===e?void 0:e}function pe(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function fe(e,t){switch(e){case o.ParameterStructures.auto:return pe(t)?de(t):[le(t)];case o.ParameterStructures.byName:if(!pe(t))throw new Error("Received parameters by name but param is not an object literal.");return de(t);case o.ParameterStructures.byPosition:return[le(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function he(e,t){let r;const n=e.numberOfParams;switch(n){case 0:r=void 0;break;case 1:r=fe(e.parameterStructures,t[0]);break;default:r=[];for(let e=0;e<t.length&&e<n;e++)r.push(le(t[e]));if(t.length<n)for(let e=t.length;e<n;e++)r.push(null)}return r}const ge={sendNotification:(e,...t)=>{let n,s;if(ue(),i.string(e)){n=e;const r=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(r)&&(i=1,a=r);let c=t.length;const u=c-i;switch(u){case 0:s=void 0;break;case 1:s=fe(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${u} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map((e=>le(e)))}}else{const r=t;n=e.method,s=he(e,r)}const a={jsonrpc:x,method:n,params:s};return function(e){if(V!==f.Off&&M)if($===h.Text){let t;V!==f.Verbose&&V!==f.Compact||(t=e.params?`Params: ${oe(e.params)}\n\n`:"No parameters provided.\n\n"),M.log(`Sending notification '${e.method}'.`,t)}else ce("send-notification",e)}(a),r.write(a).catch((e=>{throw w.error("Sending notification failed."),e}))},onNotification:(e,t)=>{let r;return ue(),i.func(e)?A=e:t&&(i.string(e)?(r=e,R.set(e,{type:void 0,handler:t})):(r=e.method,R.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==r?R.delete(r):A=void 0}}},onProgress:(e,t,r)=>{if(D.has(t))throw new Error(`Progress handler for token ${t} already registered`);return D.set(t,r),{dispose:()=>{D.delete(t)}}},sendProgress:(e,t,r)=>ge.sendNotification(d.type,{token:t,value:r}),onUnhandledProgress:G.event,sendRequest:(e,...t)=>{let n,s,a;if(ue(),function(){if(!Y())throw new Error("Call listen() first.")}(),i.string(e)){n=e;const r=t[0],i=t[t.length-1];let u=0,l=o.ParameterStructures.auto;o.ParameterStructures.is(r)&&(u=1,l=r);let d=t.length;c.CancellationToken.is(i)&&(d-=1,a=i);const p=d-u;switch(p){case 0:s=void 0;break;case 1:s=fe(l,t[u]);break;default:if(l===o.ParameterStructures.byName)throw new Error(`Received ${p} parameters for 'by Name' request parameter structure.`);s=t.slice(u,d).map((e=>le(e)))}}else{const r=t;n=e.method,s=he(e,r);const i=e.numberOfParams;a=c.CancellationToken.is(r[i])?r[i]:void 0}const u=E++;let l;a&&(l=a.onCancellationRequested((()=>{const e=X.sender.sendCancellation(ge,u);return void 0===e?(w.log(`Received no promise from cancellation strategy when cancelling id ${u}`),Promise.resolve()):e.catch((()=>{w.log(`Sending cancellation messages for id ${u} failed`)}))})));const d={jsonrpc:x,id:u,method:n,params:s};return function(e){if(V!==f.Off&&M)if($===h.Text){let t;V!==f.Verbose&&V!==f.Compact||!e.params||(t=`Params: ${oe(e.params)}\n\n`),M.log(`Sending request '${e.method} - (${e.id})'.`,t)}else ce("send-request",e)}(d),"function"==typeof X.sender.enableCancellation&&X.sender.enableCancellation(d),new Promise((async(e,t)=>{const i={method:n,timerStart:Date.now(),resolve:t=>{e(t),X.sender.cleanup(u),l?.dispose()},reject:e=>{t(e),X.sender.cleanup(u),l?.dispose()}};try{await r.write(d),F.set(u,i)}catch(e){throw w.error("Sending request failed."),i.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),e}}))},onRequest:(e,t)=>{ue();let r=null;return p.is(e)?(r=void 0,N=e):i.string(e)?(r=null,void 0!==t&&(r=e,k.set(e,{handler:t,type:void 0}))):void 0!==t&&(r=e.method,k.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==r&&(void 0!==r?k.delete(r):N=void 0)}}},hasPendingResponse:()=>F.size>0,trace:async(e,t,r)=>{let n=!1,o=h.Text;void 0!==r&&(i.boolean(r)?n=r:(n=r.sendNotification||!1,o=r.traceFormat||h.Text)),V=e,$=o,M=V===f.Off?void 0:t,!n||Z()||ee()||await ge.sendNotification(g.type,{value:f.toString(e)})},onError:H.event,onClose:z.event,onUnhandledNotification:W.event,onDispose:K.event,end:()=>{r.end()},dispose:()=>{if(ee())return;q=T.Disposed,K.fire(void 0);const t=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of F.values())e.reject(t);F=new Map,B=new Map,U=new Set,L=new s.LinkedMap,i.func(r.dispose)&&r.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{ue(),function(){if(Y())throw new I(v.AlreadyListening,"Connection is already listening")}(),q=T.Listening,e.listen(ie)},inspect:()=>{(0,n.default)().console.log("inspect")}};return ge.onNotification(m.type,(e=>{if(V===f.Off||!M)return;const t=V===f.Verbose||V===f.Compact;M.log(e.message,t?e.verbose:void 0)})),ge.onNotification(d.type,(e=>{const t=D.get(e.token);t?t(e.value):G.fire(e)})),ge}},83911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},27135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const n=r(30147);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{t.push(r[o].apply(i[o],e))}catch(e){(0,n.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const n={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),n.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(n),n}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},67574:(e,t)=>{"use strict";function r(e){return"string"==typeof e||e instanceof String}function n(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=n,t.stringArray=function(e){return n(e)&&e.every((e=>r(e)))}},96184:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(n=t.Touch||(t.Touch={}));class i{constructor(){this[r]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=n.None){const r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const r=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let t=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return r}[(r=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,r)=>{e.push([r,t])})),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}}t.LinkedMap=i,t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},75530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(0===this._chunks.length)return;let t=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){const e=this._chunks[r];for(n=0;n<e.length;){switch(e[n]){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,n++;break e;default:t=0}break;default:t=0}n++}i+=e.byteLength,r++}if(4!==t)return;const o=this._read(i+n),s=new Map,a=this.toString(o,"ascii").split("\r\n");if(a.length<2)return s;for(let t=0;t<a.length-2;t++){const r=a[t],n=r.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const i=r.substr(0,n),o=r.substr(n+1).trim();s.set(e?i.toLowerCase():i,o)}return s}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],r=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,r}const t=this.allocNative(e);let r=0;for(;e>0;){const n=this._chunks[0];if(n.byteLength>e){const i=n.slice(0,e);t.set(i,r),r+=e,this._chunks[0]=n.slice(e),this._totalLength-=e,e-=e}else t.set(n,r),r+=n.byteLength,this._chunks.shift(),this._totalLength-=n.byteLength,e-=n.byteLength}return t}}},56525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const n=r(30147),i=r(67574),o=r(27135),s=r(80142);var a;(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)};class c{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=c,function(e){e.fromOptions=function(e){let t,r;const i=new Map;let o;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(r=e.contentDecoder,i.set(r.name,r)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=(0,n.default)().applicationJson.decoder,s.set(o.name,o)),{charset:t,contentDecoder:r,contentDecoders:i,contentTypeDecoder:o,contentTypeDecoders:s}}}(a||(a={})),t.ReadableStreamMessageReader=class extends c{constructor(e,t){super(),this.readable=e,this.options=a.fromOptions(t),this.buffer=(0,n.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new s.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders(!0);if(!e)return;const t=e.get("content-length");if(!t)return void this.fireError(new Error("Header must provide a Content-Length property."));const r=parseInt(t);if(isNaN(r))return void this.fireError(new Error("Content-Length value must be a number."));this.nextMessageLength=r}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock((async()=>{const t=void 0!==this.options.contentDecoder?await this.options.contentDecoder.decode(e):e,r=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(r)})).catch((e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,n.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},96654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const n=r(30147),i=r(67574),o=r(80142),s=r(27135);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)};class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,n.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,n.default)().applicationJson.encoder}}}(a||(a={})),t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const r=[];return r.push("Content-Length: ",t.byteLength.toString(),"\r\n"),r.push("\r\n"),this.doWrite(e,r,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},20839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const n=r(67574);var i,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(i=t.ErrorCodes||(t.ErrorCodes={}));class s extends Error{constructor(e,t,r){super(t),this.code=n.number(e)?e:i.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c,t.RequestType0=class extends c{constructor(e){super(e,0)}},t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends c{constructor(e){super(e,2)}},t.RequestType3=class extends c{constructor(e){super(e,3)}},t.RequestType4=class extends c{constructor(e){super(e,4)}},t.RequestType5=class extends c{constructor(e){super(e,5)}},t.RequestType6=class extends c{constructor(e){super(e,6)}},t.RequestType7=class extends c{constructor(e){super(e,7)}},t.RequestType8=class extends c{constructor(e){super(e,8)}},t.RequestType9=class extends c{constructor(e){super(e,9)}},t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends c{constructor(e){super(e,0)}},t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends c{constructor(e){super(e,2)}},t.NotificationType3=class extends c{constructor(e){super(e,3)}},t.NotificationType4=class extends c{constructor(e){super(e,4)}},t.NotificationType5=class extends c{constructor(e){super(e,5)}},t.NotificationType6=class extends c{constructor(e){super(e,6)}},t.NotificationType7=class extends c{constructor(e){super(e,7)}},t.NotificationType8=class extends c{constructor(e){super(e,8)}},t.NotificationType9=class extends c{constructor(e){super(e,9)}},(o=t.Message||(t.Message={})).isRequest=function(e){const t=e;return t&&n.string(t.method)&&(n.string(t.id)||n.number(t.id))},o.isNotification=function(e){const t=e;return t&&n.string(t.method)&&void 0===e.id},o.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(n.string(t.id)||n.number(t.id)||null===t.id)}},30147:(e,t)=>{"use strict";let r;function n(){if(void 0===r)throw new Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");r=e}}(n||(n={})),t.default=n},80142:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const n=r(30147);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,n.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},98211:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=void 0;const n=r(13881);var i;!function(e){e.Continue=0,e.Cancelled=1}(i||(i={})),t.SharedArraySenderStrategy=class{constructor(){this.buffers=new Map}enableCancellation(e){if(null===e.id)return;const t=new SharedArrayBuffer(4);new Int32Array(t,0,1)[0]=i.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){const r=this.buffers.get(t);if(void 0===r)return;const n=new Int32Array(r,0,1);Atomics.store(n,0,i.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};class o{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===i.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class s{constructor(e){this.token=new o(e)}cancel(){}dispose(){}}t.SharedArrayReceiverStrategy=class{constructor(){this.kind="request"}createCancellationTokenSource(e){const t=e.$cancellationData;return void 0===t?new n.CancellationTokenSource:new s(t)}}},74389:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.PortMessageWriter=t.PortMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const o=r(23034);o.default.install();const s=r(71017),a=r(22037),c=r(6113),u=r(41808),l=r(23870);i(r(23870),t);class d extends l.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){return this.process.on("message",e),l.Disposable.create((()=>this.process.off("message",e)))}}t.IPCMessageReader=d;class p extends l.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;const t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,(t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0})),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=p;class f extends l.AbstractMessageReader{constructor(e){super(),this.onData=new l.Emitter,e.on("close",(()=>this.fireClose)),e.on("error",(e=>this.fireError(e))),e.on("message",(e=>{this.onData.fire(e)}))}listen(e){return this.onData.event(e)}}t.PortMessageReader=f;class h extends l.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",(()=>this.fireClose())),e.on("error",(e=>this.fireError(e)))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.PortMessageWriter=h;class g extends l.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,o.default)().stream.asReadableStream(e),t)}}t.SocketMessageReader=g;class m extends l.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=m;class v extends l.ReadableStreamMessageReader{constructor(e,t){super((0,o.default)().stream.asReadableStream(e),t)}}t.StreamMessageReader=v;class y extends l.WriteableStreamMessageWriter{constructor(e,t){super((0,o.default)().stream.asWritableStream(e),t)}}t.StreamMessageWriter=y;const _=process.env.XDG_RUNTIME_DIR,S=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){const e=(0,c.randomBytes)(21).toString("hex");if("win32"===process.platform)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=_?s.join(_,`vscode-ipc-${e}.sock`):s.join(a.tmpdir(),`vscode-${e}.sock`);const r=S.get(process.platform);return void 0!==r&&t.length>r&&(0,o.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t},t.createClientPipeTransport=function(e,t="utf-8"){let r;const n=new Promise(((e,t)=>{r=e}));return new Promise(((i,o)=>{let s=(0,u.createServer)((e=>{s.close(),r([new g(e,t),new m(e,t)])}));s.on("error",o),s.listen(e,(()=>{s.removeListener("error",o),i({onConnected:()=>n})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const r=(0,u.createConnection)(e);return[new g(r,t),new m(r,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let r;const n=new Promise(((e,t)=>{r=e}));return new Promise(((i,o)=>{const s=(0,u.createServer)((e=>{s.close(),r([new g(e,t),new m(e,t)])}));s.on("error",o),s.listen(e,"127.0.0.1",(()=>{s.removeListener("error",o),i({onConnected:()=>n})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const r=(0,u.createConnection)(e,"127.0.0.1");return[new g(r,t),new m(r,t)]},t.createMessageConnection=function(e,t,r,n){r||(r=l.NullLogger);const i=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new v(e):e,o=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new y(t):t;return l.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,l.createMessageConnection)(i,o,r,n)}},23034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(73837),i=r(23870);class o extends i.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return o.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new n.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}o.emptyBuffer=Buffer.allocUnsafe(0);class s{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),i.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),i.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),i.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),i.Disposable.create((()=>this.stream.off("data",e)))}}class a{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),i.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),i.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),i.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((r,n)=>{const i=e=>{null==e?r():n(e)};"string"==typeof e?this.stream.write(e,t,i):this.stream.write(e,i)}))}end(){this.stream.end()}}const c=Object.freeze({messageBuffer:Object.freeze({create:e=>new o(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new n.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new s(e),asWritableStream:e=>new a(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){const n=setTimeout(e,t,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(e,...t){const r=setImmediate(e,...t);return{dispose:()=>clearImmediate(r)}},setInterval(e,t,...r){const n=setInterval(e,t,...r);return{dispose:()=>clearInterval(n)}}})});function u(){return c}!function(e){e.install=function(){i.RAL.install(c)}}(u||(u={})),t.default=u},95028:(e,t,r)=>{"use strict";e.exports=r(74389)},69279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AZUREFUNCTION_EXTENSION_API_REQUIRED_VERSION=t.AZUREFUNCTION_EXTENSION_REQUIRED_VERSION=t.AZUREFUNCTION_EXTENSION_ID=t.MAUI_WORKLOAD_URL=t.MAUI_EXTENSION_URL=t.MAUI_EXTENSION_ID=t.NET_SDK_VERSION_SUPPORTING_SLNX=t.NET_SDK_MIMIMUM_SUPPORTED_VERSION=t.NET_SDK_SUPPORTED_PREVIEW_RUNTIME_MIN_VERSION=t.NET_RUNTIME_VERSION_PATCH=t.NET_RUNTIME_VERSION=t.CSHARP_EXTENSION_AZ_FUNCTIONS_REQUIRED_VERSION=t.CSHARP_EXTENSION_BLAZORWASM_REQUIRED_VERSION=t.CSHARP_EXTENSION_SUPPORTS_DEFERRAL_VERSION=t.CSHARP_EXTENSION_REQUIRED_VERSION=t.CSHARP_EXTENSION_ID=t.LICENSE_URL=t.EXTENSION_ID=void 0,t.EXTENSION_ID="ms-dotnettools.csdevkit",t.LICENSE_URL="https://marketplace.visualstudio.com/items/ms-dotnettools.csdevkit/license",t.CSHARP_EXTENSION_ID="ms-dotnettools.csharp",t.CSHARP_EXTENSION_REQUIRED_VERSION="2.0.0",t.CSHARP_EXTENSION_SUPPORTS_DEFERRAL_VERSION="2.4.0",t.CSHARP_EXTENSION_BLAZORWASM_REQUIRED_VERSION="2.0.2",t.CSHARP_EXTENSION_AZ_FUNCTIONS_REQUIRED_VERSION="2.55.0",t.NET_RUNTIME_VERSION="9.0",t.NET_RUNTIME_VERSION_PATCH="2",t.NET_SDK_SUPPORTED_PREVIEW_RUNTIME_MIN_VERSION="9.0.200",t.NET_SDK_MIMIMUM_SUPPORTED_VERSION="6.0",t.NET_SDK_VERSION_SUPPORTING_SLNX="9.0.200",t.MAUI_EXTENSION_ID="ms-dotnettools.dotnet-maui",t.MAUI_EXTENSION_URL="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.dotnet-maui",t.MAUI_WORKLOAD_URL="https://learn.microsoft.com/dotnet/maui/get-started/installation?tabs=visual-studio-code#install-net-and-net-maui-workloads",t.AZUREFUNCTION_EXTENSION_ID="ms-azuretools.vscode-azurefunctions",t.AZUREFUNCTION_EXTENSION_REQUIRED_VERSION="1.15.5",t.AZUREFUNCTION_EXTENSION_API_REQUIRED_VERSION="^1.10.0"},76051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomBuildTaskTerminal=void 0;const n=r(89496),i=r(32081),o=r(88242),s=r(22037);t.CustomBuildTaskTerminal=class{command;args;cwd;writeEmitter=new n.EventEmitter;onDidWrite=this.writeEmitter.event;closeEmitter=new n.EventEmitter;onDidClose=this.closeEmitter.event;constructor(e,t,r){this.command=e,this.args=t,this.cwd=r}async open(e){await this.executeBuild()}close(){}async executeBuild(){let e="dotnet "+this.args.join(" ");this.writeEmitter.fire(e+" \r\n"),(0,o.startBuild)();let t="",r="";const n=i.spawn(this.command,this.args,{cwd:this.cwd});n.stdout.on("data",(e=>{t=t.concat(e);let r=this.formatResult(e);this.writeEmitter.fire(r)})),n.stderr.on("data",(e=>{r=r.concat(e);let t=this.formatResult(e);this.writeEmitter.fire(t)})),n.on("close",(e=>{(0,o.reportBuildResultsToCSharpExtension)(t),this.closeEmitter.fire(e??1)})),n.on("error",(e=>{console.log(`child process exited with code ${e}`)}))}formatResult(e){return e.toString().replaceAll(s.EOL,"\n\r")}}},49397:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dotnetSolutionBuildActionUsingTask=t.getAllProjects=t.getOpenedWorkspaceHelper=t.DotnetTaskProvider=void 0;const n=r(89496),i=r(65300),o=r(20695),s=r(7195),a=r(73228),c=r(76051),u=r(88242),l="watch",d="rebuild",p="--no-incremental",f="AnyCPU",h="Any CPU";class g{static dotnetType="dotnet";cachedTasks=void 0;cachedTasksNames=new Set;lastOpenedSolution=void 0;autoDetect=m.on;constructor(){n.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this),this.onConfigurationChanged()}async provideTasks(){if(this.autoDetect===m.off)return;const e=await(0,i.getOpenedSolution)();if(this.lastOpenedSolution!==e){this.lastOpenedSolution=e,this.cachedTasks=await async function(){const e=n.workspace.workspaceFolders,t=[];if(!e||0===e.length)return t;const r=await(0,i.getOpenedSolution)(),s=_();if(r&&s){const e=await v(s,o.BUILD,r,{taskGroup:n.TaskGroup.Build,persistFilePath:!1});e&&t.push(e);const i=await v(s,o.CLEAN,r,{taskGroup:n.TaskGroup.Clean,persistFilePath:!1});i&&t.push(i);const a=await S();a&&a.forEach((async e=>{const r=await v(s,`${l} ${e.Name}`,e.Path,{action:l});r&&t.push(r)}))}return t}(),this.cachedTasksNames.clear();for(const e of this.cachedTasks)this.cachedTasksNames.add(e.name)}return this.cachedTasks}async resolveTask(e){if(e.definition.task){const t=e.definition;if(t.task.startsWith(l)&&t.file)return v(e.scope??n.TaskScope.Workspace,e.name,t.file,{taskGroup:e.group,action:l,persistFilePath:!0,taskDefinition:t});if(t.task.startsWith(o.BUILD)||t.task.startsWith(o.CLEAN)||t.task.startsWith(d)){const r=await(0,i.getOpenedSolution)(),o=_();if(r&&o){const i=t?.file??r;return v(e.scope??n.TaskScope.Workspace,e.name,i,{taskGroup:e.group,persistFilePath:!1,taskDefinition:t})}}}}onConfigurationChanged(){const e=n.workspace.getConfiguration("dotnet").get("autoDetect");this.autoDetect=void 0===e?m.on:e}cacheNewTask(e){if(e.definition.type!==g.dotnetType)throw new Error(`Error: Trying to cache a task that is not ${g.dotnetType}. Actual type ${e.definition.type}`);this.cachedTasks?this.cachedTasksNames.has(e.name)||(this.cachedTasksNames.add(e.name),this.cachedTasks.push(e)):(this.cachedTasksNames.add(e.name),this.cachedTasks=[e])}}var m;async function v(e,t,r,i){var a;if(i.action)a=i.action;else switch(i.taskGroup?.id){case n.TaskGroup.Build.id:case n.TaskGroup.Rebuild.id:a=o.BUILD;break;case n.TaskGroup.Clean.id:a=o.CLEAN;break;default:return}const l=i?.taskDefinition??{type:g.dotnetType,task:t,file:i.persistFilePath??1?r:void 0},d=_();if(!d)return void s.logger.log("Cannot find the current workspace folder. The build operation is aborted.");let p;if(await(0,u.isCSharpExtensionBuildResultServiceAvailable)()){const o=new n.CustomExecution((async e=>{const t=e.file??r,n=await y(t,a,i.taskGroup,i.projectTarget);return new c.CustomBuildTaskTerminal("dotnet",n,d.uri.fsPath)}));p=new n.Task(l,e,t,"dotnet",o)}else{s.logger.log("Microsoft.VisualStudio.CSharpExtension.BuildResultService not found.");const o={env:{DOTNET_CLI_UI_LANGUAGE:n.env.language},cwd:d.uri.fsPath},c=await y(r,a,i.taskGroup,i.projectTarget),u=new n.ProcessExecution("dotnet",c,o);p=new n.Task(l,e,t,"dotnet",u),p.problemMatchers=["$msCompile"]}return p.group=i.taskGroup,p}async function y(e,t,r,o){let c;const u=function(){const e=s.environmentStateManager?.getLatestEnvironmentState()?.configuration;if("string"!=typeof e)return{configurationName:void 0,platformName:void 0};const t=e.split("|",2);return{configurationName:t[0]||void 0,platformName:t[1]||void 0}}(),d=u.platformName?(g=u.platformName)===h?f:g:void 0;var g;if(t===l)c=[t,"--project",e];else if((r?.id===n.TaskGroup.Rebuild.id||r?.id===n.TaskGroup.Build.id)&&(0,a.endsWithInvariantIgnoreCase)(e,".csproj")&&o){const s=await(0,i.getOpenedSolution)();r?.id===n.TaskGroup.Rebuild.id&&(o+=":rebuild"),c=s?[t,s,o,"/property:GenerateFullPaths=true","/consoleloggerparameters:NoSummary"]:[t,e,p,"/property:GenerateFullPaths=true","/consoleloggerparameters:NoSummary"],u.configurationName&&c.push(`/p:Configuration=${u.configurationName}`);const a=s?u.platformName:d;a&&c.push(`/p:Platform="${a}"`)}else if(c=r?.id===n.TaskGroup.Rebuild.id?[t,e,p,"/property:GenerateFullPaths=true","/consoleloggerparameters:NoSummary"]:[t,e,"/property:GenerateFullPaths=true","/consoleloggerparameters:NoSummary"],r?.id===n.TaskGroup.Rebuild.id||r?.id===n.TaskGroup.Build.id||r?.id===n.TaskGroup.Clean.id){u.configurationName&&c.push(`/p:Configuration=${u.configurationName}`);const t=(0,a.endsWithInvariantIgnoreCase)(e,".csproj")?d:u.platformName;t&&c.push(`/p:Platform="${t}"`)}return c}function _(){if(n.workspace.workspaceFolders&&n.workspace.workspaceFolders.length>=1)return s.environmentStateManager?.getActiveWorkspace()}async function S(){const e={context:"Projects",query:{$properties:["Name","Path"],$filter:{ProjectsByCapabilities:["!SharedAssetsProject"]}}};return await s.logger.watch("Query for all projects",(async()=>{const t=await s.projectQueryableSpace.executeQuery(e),r=[];return t&&t.Items?.forEach((e=>{e&&r.push(e)})),r}),{catchUnhandledErrors:!0})}t.DotnetTaskProvider=g,function(e){e.on="on",e.off="off"}(m||(m={})),t.getOpenedWorkspaceHelper=_,t.getAllProjects=S,t.dotnetSolutionBuildActionUsingTask=async function(e,t,r,a,c){const u=n.workspace.workspaceFolders;if(!u||0===u.length||!u[0])return{success:Promise.resolve(!1)};var l=void 0,p=e;e===o.BUILD?r?(l=n.TaskGroup.Rebuild,p=d):l=n.TaskGroup.Build:e===o.CLEAN&&(l=n.TaskGroup.Clean);var f=void 0;const h=t.toUpperCase(),m={type:g.dotnetType},y=await n.tasks.fetchTasks(m),S=s.environmentStateManager?.getOpenedSolutionExt();for(const e of y){const t=e.definition;if(t&&t.task.startsWith(p)&&(t.file?.toUpperCase()===h||void 0===t.file&&S&&h.endsWith(S.toUpperCase()))){if(void 0===t.file){const e=await(0,i.getOpenedSolution)();if(e?.toUpperCase()!==h)continue}f=e;break}}if(!f){const e=_();if(e&&(f=await v(e,`${p} ${t}`,t,{taskGroup:l,projectTarget:a}))&&c){if(!s.dotnetTaskProvider)return{success:Promise.resolve(!1)};s.dotnetTaskProvider.cacheNewTask(f)}}return f?{taskName:`${f.definition.type}: ${f.name}`,success:new Promise((async(e,t)=>{const r=n.tasks.onDidEndTaskProcess((t=>{t.execution.task===f&&(r.dispose(),e(0===t.exitCode))}));try{await n.tasks.executeTask(f)}catch(e){r.dispose(),t(e)}}))}:{success:Promise.resolve(!1)}}},81297:(e,t)=>{"use strict";function r(e){const t=()=>{if(void 0===t.value&&t.loader&&(t.value=t.loader()),void 0===t.value)throw new Error("No loader o value was supplied.");return t.value};return t.loader=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setLazyLoadMutable=t.delayedLoadMutable=t.lazyLoadNotImplemented=t.lazyLoadMutable=t.lazyLoad=void 0,t.lazyLoad=function(e){let t;return(r=!0)=>void 0!==t?t:r?t=e():void 0},t.lazyLoadMutable=r,t.lazyLoadNotImplemented=function(){throw new Error("Dependencies: Instance not provided.")},t.delayedLoadMutable=function(e){return r((()=>{throw Error(`Dependencies: ${e} is not yet initialized`)}))},t.setLazyLoadMutable=function(e,t){return"function"==typeof t&&(e.loader=t),e}},89781:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonOutputMonitor=t.OutputMonitor=t.StepProgressLogger=t.NuGetLogger=t.Logger=t.LoggerBase=t.LogImportance=void 0;const n=r(89496),i=r(30077),o=r(22677);var s;!function(e){e[e.low=0]="low",e[e.normal=1]="normal",e[e.high=2]="high"}(s||(t.LogImportance=s={}));class a{async watch(e,t,r){const n=r?.importance;this.log(`Starting ${e}...`,n);const o=performance.now();try{const r=await t(),i=performance.now();return this.log(`Completed ${e} (${(i-o).toFixed()}ms)`,n),r}catch(t){const s=performance.now();if(this.log(`Failed at '${e}' (${(s-o).toFixed()}ms) with error: ${t}`,n),r?.telemetry?.addOrUpdateProperties({succeeded:String(!1),error:t instanceof Error?t.name:"error"}),r?.telemetry?.addOrUpdateMeasurements({errorCode:t instanceof i.ErrorCodeError?t.errorCode:void 0}),!r?.catchUnhandledErrors)throw t}}}t.LoggerBase=a;class c extends a{outputChannel;level;constructor(e){switch(super(),this.outputChannel="string"==typeof e?n.window.createOutputChannel(e):e,this.level=s.normal,process.env.MINIMUM_LOG_LEVEL?.toLowerCase()){case"low":this.level=s.low;break;case"normal":this.level=s.normal;break;case"high":this.level=s.high}}log(e,t){(void 0===t||t>=this.level)&&("object"==typeof e?this.outputChannel.appendLine(JSON.stringify(e,null,2)):void 0===e||this.outputChannel.appendLine(e))}reportExceptionTelemetryAndLog(e,t,r,n,i,o){let a=null,c=n;c&&(a=c.stack??null);let u={methodName:e,fault:t=t??"(missing)",errorName:r??""};a&&(u.exceptionStack=a),i?.sendTelemetryErrorEvent(c,{...u,...o}),this.log("Error occurred in "+e+": "+n,s.high)}show(){this.outputChannel.show()}}t.Logger=c;class u extends c{static userInteractionRequiredMessage="[CredentialProvider]ATTENTION: User interaction required.";log(e,t){super.log(e,t),e.includes(u.userInteractionRequiredMessage)&&n.window.showWarningMessage(o.NuGet.requiresCredentialsMessage,o.NuGet.showDeviceCodeLoginInfo).then((e=>{e===o.NuGet.showDeviceCodeLoginInfo&&this.outputChannel.show()}))}}t.NuGetLogger=u,t.StepProgressLogger=class{logger;name;constructor(e,t){this.logger=e,this.name=t}report(e){this.logger.log(`${this.name}: Step ${e.currentStep} of ${e.totalSteps}.`)}};class l extends a{outputLog;constructor(){super(),this.outputLog=[]}log(e){this.outputLog.push(e)}getOutput(){return this.outputLog.join("")}clearOutput(){this.outputLog=[]}}t.OutputMonitor=l,t.JsonOutputMonitor=class extends l{logger;constructor(e){super(),this.logger=e}log(e){super.log(e),this.logger.log(e)}getOutput(){const e=super.getOutput();return this.extractJson(e)}extractJson(e){const t=e.indexOf("{"),r=e.lastIndexOf("}");if(-1===t||-1===r)throw new Error("No valid JSON object found in the output");return e.slice(t,r+1)}}},78343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareBrokeredServices=void 0;const n=r(19679),i=r(73292),o=r(89496),s=r(7631),a=r(89781),c=r(61925),u=r(75056),l=r(11694),d=r(65979),p=r(22485),f=r(15158),h=r(72902),g=r(8240),m=r(22743),v=r(73228),y=r(39491),_=r(71017),S=r(81855),w=r(31467),E=r(98349),b=r(90965),P=r(42300),T=r(57787),C=r(50979),I=r(6315),O=r(22188),x=r(277),N=r(55825),k=r(69751),A=r(17407),R=r(58305),D=r(60700),j=r(28510),M=r(69279),L=r(98387);function F(e,t){return async function(r,i){await e.watch(`JIT proffering for ${n.ServiceMoniker.toString(i)} is awaiting for the .NET server`,(async function(){await t}),{importance:a.LogImportance.low})}}function U(e,t,r){const i=[],o=new n.ServiceRegistration(n.ServiceAudience.local,!1,(()=>t));for(const t of e)i.push({moniker:t.moniker,registration:o,serviceHub:{serviceModuleInfo:t.serviceModuleInfo,baseDir:t.baseDir}}),r.log(`Registered ServiceHub-hosted brokered service ${n.ServiceMoniker.toString(t.moniker)}.`,a.LogImportance.low);return i}async function B(e){const t=(await(0,i.readdir)(e)).filter((e=>e.endsWith(".servicehub.service.json")));let r=[];for(const i of t){const t=n.ServiceMoniker.create(i.slice(0,i.length-24)),o=await(0,v.readJsonFile)(_.join(e,i));r.push({moniker:t,serviceModuleInfo:o,baseDir:e})}return r}async function V(e){const t=_.join(e,"platforms"),r=await(0,i.readdir)(t,{withFileTypes:!0});let n=[];for(const e of r)if(e.isDirectory()){const r=_.join(t,e.name);if((await(0,i.readdir)(_.join(r))).indexOf("node_modules")>=0){const e=await(0,E.getPackageInfo)(r);for(const t of e){const e=_.resolve(r,"node_modules",t.fullName);n.push(...await B(e))}}}return n}t.prepareBrokeredServices=async function(e,t,r){const E=!o.workspace.workspaceFolders,$=new n.GlobalBrokeredServiceContainer,q=$.getFullAccessServiceBroker();let H=!1,z=new o.EventEmitter;const W=(0,v.lazyPromiseLambda)((()=>(H=!0,z.fire(),r.watch("Spawn .NET server",(()=>(0,c.launchDotNetServer)(e,t,$))))));let G,K=!1;const X=(0,v.lazyPromiseLambda)((()=>(K=!0,r.watch("Register services with .NET server",(async()=>{await async function(e,t){const r=await t.getProxy(d.default.outOfProcServiceRegistration);try{y(r);for(const{moniker:t,serviceHub:n}of e)n?await r.registerServiceHubService(t,n.serviceModuleInfo,n.baseDir):await r.registerParentProcessService(t)}finally{r?.dispose()}}(G,q)}),{importance:a.LogImportance.low}))));G=await async function(e,t,r,i,o,c){const u=await(0,s.loadOrCreateCachedValue)(e,"brokered-services-from-components",(async()=>{const e={dotNetServerBrokeredServices:[],serviceHubServices:{}};for(const t in r){const o=r[t],s=await B(o);s.length>0&&(e.serviceHubServices[t]=s);const u=await(0,v.readJsonFile)(_.join(o,"package.json"));if(u.brokeredServices)for(const r of u.brokeredServices){const o=new n.ServiceRegistration(r.audience??n.ServiceAudience.local,r.allowGuestClients??!1,F(c,i)),s=".NET runtime";if(Array.isArray(r.moniker))for(const i of r.moniker)e.dotNetServerBrokeredServices.push({moniker:i,registration:o}),c.log(`Registered ${s}-hosted brokered service ${n.ServiceMoniker.toString(i)} from component ${t}.`,a.LogImportance.low);else e.dotNetServerBrokeredServices.push({moniker:r.moniker,registration:o}),c.log(`Registered ${s}-hosted brokered service ${n.ServiceMoniker.toString(r.moniker)} from extension ${t}.`,a.LogImportance.low)}}return e})),l=[];if(!o)for(const e in u.serviceHubServices)l.push(...U(u.serviceHubServices[e],i,c));return l.push(...u.dotNetServerBrokeredServices.map((e=>({...e,registration:new n.ServiceRegistration(e.registration.audience,e.registration.allowGuestClients,(()=>i))})))),t.register(l),l}(e,$,t,X,E,r),G.push(...await async function(e,t,r,s,c){const u=b.idsOfExtensionsAllowedToExtendCsDevKit.map((e=>o.extensions.getExtension(e))),l=[];for(const o of u)if(o&&(!s||o.id===M.EXTENSION_ID))try{const u=o.packageJSON;if(u.brokeredServices){const i=(0,v.lazyPromiseLambda)((async()=>{await c.watch(`JIT proffering brokered services from the '${o.id}' extension `,(async function(){await o.activate(),o.exports.profferBrokeredServices&&o.exports.profferBrokeredServices(e)}),{importance:a.LogImportance.low})}));for(const e of u.brokeredServices){let s,u;e.serviceHub?(s=Array.isArray(e.moniker)||e.moniker.name!==d.default.outOfProcServiceRegistration.moniker.name?F(c,r):async function(e,r){await t},u=".NET runtime"):(s=(e,t)=>i,u="Extension Host");const p=new n.ServiceRegistration(e.audience??n.ServiceAudience.local,e.allowGuestClients??!1,s);if(Array.isArray(e.moniker))for(const t of e.moniker)l.push({moniker:t,registration:p,isInProcVsServer:!!e.serviceHub}),c.log(`Registered ${u}-hosted brokered service ${n.ServiceMoniker.toString(t)} from extension ${o.id}.`,a.LogImportance.low);else l.push({moniker:e.moniker,registration:p,isInProcVsServer:!!e.serviceHub}),c.log(`Registered ${u}-hosted brokered service ${n.ServiceMoniker.toString(e.moniker)} from extension ${o.id}.`,a.LogImportance.low)}}if(!s&&u.serviceHubServiceDirectories)for(const e of u.serviceHubServiceDirectories){const t=_.join(o.extensionPath,e);let n=await B(t);(await(0,i.readdir)(t)).indexOf("platforms")>=0&&n.push(...await V(t));for(const e of U(n,r,c))l.push({...e,isInProcVsServer:!1})}}catch(e){c.log(`Error trying to register services from extension ${o.id}: ${e}`)}return e.register(l),o.extensions.onDidChange((()=>{})),l.filter((e=>!e.isInProcVsServer))}($,W,X,E,r)),y(!K);const J={serviceBroker:q,getBrokeredServiceServerPipeName:async()=>(await W).brokeredServiceServerPipeName,hasServerProcessLoaded:()=>H,serverProcessLoaded:z.event};return function(e,t,r,n){e.subscriptions.push(t.profferServiceFactory(d.default.helloWorld.extensionHost,((e,t,r)=>new f.HelloWorld(r)))),e.subscriptions.push(t.profferServiceFactory(d.default.tokenAcquisitionService,((e,t,r)=>new h.TokenAcquisitionService))),e.subscriptions.push(t.profferServiceFactory(d.default.errorReportingService,((t,r,n)=>new p.ErrorReportingService(e)))),e.subscriptions.push(t.profferServiceFactory(d.default.activeDocumentsInformationService,((e,t,r)=>new u.ActiveDocumentsInformationService))),e.subscriptions.push(t.profferServiceFactory(d.default.buildService,((e,t,r)=>new S.BuildService)));const i=(0,v.lazyPromiseLambda)((()=>l.ComponentExportsState.create(e,r)));e.subscriptions.push(t.profferServiceFactory(d.default.componentExportsService,(async()=>new l.ComponentExportsService(await i)))),e.subscriptions.push(t.profferServiceFactory(d.default.vsCodeFileWatcherService,((e,t,r)=>new O.VsCodeFileWatcherService(t))));const s=new w.BrokeredServiceExportsRegistrarState;e.subscriptions.push(t.profferServiceFactory(d.default.brokeredServiceExportsRegistrar,(()=>new w.BrokeredServiceExportsRegistrar(s))));const a=(0,v.lazyPromiseLambda)((async()=>o.window.createOutputChannel("NuGet"))),c=(0,v.lazyPromiseLambda)((async()=>g.NuGetSolutionRestoreState.create(await a)));e.subscriptions.push(t.profferServiceFactory(d.default.nugetSolutionRestoreService,(async(e,t,r)=>new g.NuGetSolutionRestoreService(await c,t))));const y=(0,v.lazyPromiseLambda)((async()=>m.LogOutputChannelState.create()));e.subscriptions.push(t.profferServiceFactory(d.default.logOutputChannelService,(async(e,t,r)=>(await y).createOutputChannel(t)))),e.subscriptions.push(t.profferServiceFactory(d.default.hotReloadLogger,((e,t,r)=>P.hotReloadLogger))),e.subscriptions.push(t.profferServiceFactory(d.default.hotReloadClientListener,((e,t,r)=>new T.HotReloadClientListener))),e.subscriptions.push(t.profferServiceFactory(d.default.hotReloadOptionService,((e,t,r)=>C.hotReloadOptionService))),e.subscriptions.push(t.profferServiceFactory(d.default.dotnetDebugConfigurationService,((e,t,r)=>new I.DotnetDebugConfigurationService(r,n)))),e.subscriptions.push(t.profferServiceFactory(d.default.dotnetDebugLaunchService,((e,t,r)=>new D.DotnetDebugLaunchService(n)))),e.subscriptions.push(t.profferServiceFactory(d.default.nugetCommandsService,((e,t,r)=>new x.NuGetDotnetCommandsService(a)))),e.subscriptions.push(t.profferServiceFactory(d.default.workspaceConfigurationOptionsService,((e,t,r)=>N.workspaceConfigurationOptionsService))),e.subscriptions.push(t.profferServiceFactory(d.default.vscodeAzureFunctionExtensionService,((e,t,r)=>j.vsCodeAzureFunctionExtensionService)));const _=(0,v.lazyPromiseLambda)((async()=>k.OutputChannelState.create()));e.subscriptions.push(t.profferServiceFactory(d.default.outputChannelService,(async(e,t,r)=>(await _).createOutputChannel(t)))),e.subscriptions.push(t.profferServiceFactory(d.default.startupProjectService,((e,t,r)=>new R.FilteredStartupProjectService(A.startupProjectService)))),e.subscriptions.push(t.profferServiceFactory(d.default.aspireCopilotService,((e,t,r)=>new L.AspireCopilotService(t))))}(e,$,t,J),J}},7631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCacheDirectory=t.loadOrCreateCachedValue=t.isCacheEnabled=void 0;const n=r(57147),i=r(73292),o=r(89496),s=r(71017),a="utf8";function c(e){return e.extensionMode===o.ExtensionMode.Production||false}let u;function l(e){return s.join(e.extensionPath,"cache")}function d(e){return s.join(l(e),"discovery.json")}t.isCacheEnabled=c,t.loadOrCreateCachedValue=async function(e,t,r){let o;if(c(e)&&(u??=async function(e){const t=d(e);try{const e=(0,n.readFileSync)(t);return JSON.parse(e.toString(a))}catch{return{}}}(e),o=await u,t in o))return o[t];const l=await r();return o&&(o[t]=l,await async function(e,t){const r=d(e);await(0,i.mkdir)(s.dirname(r),{recursive:!0}),await(0,i.writeFile)(r,JSON.stringify(t),{encoding:a})}(e,o)),JSON.parse(JSON.stringify(l))},t.getCacheDirectory=l},11144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkHostApp=void 0;const n=r(89496);r(71017),r(6113),["You may install and use any number of copies of the software only with Microsoft Visual Studio,","Visual Studio for Mac, Visual Studio Code, Azure DevOps, Team Foundation Server, and successor Microsoft products","and services (collectively, the Visual Studio Products and Services) to develop and test your applications.","The software is licensed, not sold. This agreement only gives you some rights to use the software. Microsoft reserves all other rights.","You may not:","work around any technical limitations in the software that only allow you to use it in certain ways;","reverse engineer, decompile or disassemble the software, or otherwise attempt to derive the source code for the software,","except and to the extent required by third party licensing terms governing use of certain open source components that may be included in the software;","remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;","use the software in any way that is against the law or to create or propagate malware; or","share, publish, distribute, or lease the software (except for any distributable code, subject to the terms above),","provide the software as a stand-alone offering for others to use, or transfer the software or this agreement to any third party."].join(" "),t.checkHostApp=function(){return!!["Visual Studio Code","Visual Studio Code - Insiders","Visual Studio Code - Exploration","Visual Studio Code @ Meta","Visual Studio Code @ Meta - Insiders"].includes(n.env.appName)}},65131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAspireOrchestration=void 0;const n=r(89496),i=r(71017),o=r(22677),s=r(65300),a=r(79994),c=r(77867),u=r(30077),l=r(76925),d=r(49397);async function p(e,t,r,n){await(0,c.dotnetCommand)(u.DotnetCommand.newProject,e,["new",r,"-n",n]),await a.addProjectToSolution(e,t,i.join(e,n),void 0,!0)}t.addAspireOrchestration=async function(){const e=await(0,s.getOpenedSolution)();if(!e)return;const t=await async function(){const e=await(0,d.getAllProjects)();if(e){const t=e.map((e=>({path:e.Path,label:e.Name})));return 0===t.length&&n.window.showErrorMessage(o.addAspireOrchestrationUiStrings.noProjectsError),t.sort(((e,t)=>e.label.localeCompare(t.label))),await n.window.showQuickPick(t,{placeHolder:o.addAspireOrchestrationUiStrings.selectProjectsPrompt,canPickMany:!0})}}();if(!t||0===t.length)return;const r=await n.window.showInputBox({prompt:o.addAspireOrchestrationUiStrings.appHostNamePrompt,placeHolder:"AppHost",value:"AppHost"});if(!r)return;const c=await n.window.showInputBox({prompt:o.addAspireOrchestrationUiStrings.serviceDefaultsNamePrompt,placeHolder:"ServiceDefaults",value:"ServiceDefaults"});if(!c)return;const f=await async function(e){const t=e,r=o.addAspireOrchestrationUiStrings.projectCreatedIn(i.join(t)),s=[{label:o.addAspireOrchestrationUiStrings.defaultDirectory,id:"default",description:r},{label:o.addAspireOrchestrationUiStrings.chooseDirectory,id:"picker"}],a=await n.window.showQuickPick(s,{title:o.addAspireOrchestrationUiStrings.locationForNewProject,placeHolder:r});if(!a)return;if("default"===a.id)return t;const c=await n.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:o.addAspireOrchestrationUiStrings.projectLocation,defaultUri:n.Uri.file(t)});return c?c[0].fsPath:void 0}(a.getActiveWorkspaceRoot());if(f)try{await p(f,e,"aspire-apphost",r),await p(f,e,"aspire-servicedefaults",c),await(0,s.reloadSolution)(e);const n=i.join(f,r,`${r}.csproj`),o=i.join(f,c,`${c}.csproj`);for(const e of t){var h=e.path;(0,l.addProjectReferenceByProjectPath)(n,h),(0,l.addProjectReferenceByProjectPath)(h,o)}}catch(e){e instanceof u.DotnetCommandError?n.window.showWarningMessage(e.message):n.window.showWarningMessage(String(e))}}},2155:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(92181),o=r(69279),s=r(65300),a=r(7195),c=r(65979),u=r(79994),l=r(71017),d=r(2906),p=r(22677),f=r(75010),h=r(73228);t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension");if(e.contextValue===i.contextValues.solutionFolder){const r=t.exports.serviceBroker,i=await(0,s.getOpenedSolution)(),o=u.getActiveWorkspaceRoot();let g=o;i&&(0,h.containsFileOrFolder)(o,i)&&(g=l.dirname(i));const m=await n.window.showOpenDialog({canSelectFolders:!1,canSelectFiles:!0,canSelectMany:!1,title:p.promptStrings.addExistingFile,openLabel:p.promptStrings.selectFile,defaultUri:n.Uri.file(g)});if(!m)return;const v=m[0].fsPath,y=l.parse(v).base,_=l.relative(l.dirname(i),v),S=new f.TelemetryActivity("add-existing-file",a.telemetryService),w=await r.getProxy(c.default.solutionFileService);try{await a.logger.watch("Add an existing solution file.",(async function(){let t=e.node.ProjectGuid;t&&0!==t.length||(t=u.emptyGuid),await(w?.addSolutionItem(t,_)),n.window.showTextDocument(n.Uri.file(v)),(0,d.expandToNewNode)(e,y)}),{telemetry:S,catchUnhandledErrors:!0})}finally{S.end(),S.sendTelemetry(),w?.dispose()}e&&(0,a.sendFirstInteractionWithExplorerTelemetry)()}}},92614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addProjectFromWorkspace=void 0;const n=r(89496),i=r(7195),o=r(65979),s=r(22677),a=r(65300),c=r(79994),u=r(79994),l=r(71017);async function d(e,t,r,n){await i.logger.watch("Add existing project",(async()=>{const i=l.parse(t).name;if(!await(0,u.doesSolutionContainProject)(i)){await c.addProjectToSolution(e,r,t,n),await(0,a.reloadSolution)(r);const i=c.getExtensionBrokerService(),s=await i.getProxy(o.default.solutionFileService);try{await(s?.addProjectToFilter(t))}finally{s?.dispose()}}}))}t.default=async function(e){const t=await(0,a.getOpenedSolution)(),r=c.getActiveWorkspaceRoot(),o=c.parseSolutionFolderFromContextMenu(e),u={};u[s.promptStrings.projectFilesFilterName]=["csproj"];const l=await n.window.showOpenDialog({canSelectFolders:!1,canSelectFiles:!0,canSelectMany:!1,title:s.promptStrings.addExistingProject,filters:u,openLabel:s.promptStrings.chooseProjectFileLabel,defaultUri:n.Uri.file(r)});l&&(await d(r,l[0].fsPath,t,o),e&&(0,i.sendFirstInteractionWithExplorerTelemetry)())},t.addProjectFromWorkspace=async function(e){const t=await(0,a.getOpenedSolution)(),r=c.getActiveWorkspaceRoot();await d(r,e,t)}},81106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNewFile=t.addNewFileFromNewFileMenu=void 0;const n=r(57147),i=r(89496),o=r(7195),s=r(65979),a=r(22677),c=r(75010),u=r(73228),l=r(92181),d=r(2906),p=r(65300),f=r(79994),h=r(79994),g=r(71017),m=r(60279),v=r(55471);async function y(e,t){if(t??=e?v.InvocationSource.solutionExplorer:v.InvocationSource.commandPalette,!e)return void await async function(e){const t=new c.TelemetryActivity("add-untitled-file",o.telemetryService);t.addOrUpdateProperties({invocationSource:String(v.InvocationSource[e])});try{await o.logger.watch("create new file in buffer",(async function(){await i.commands.executeCommand("workbench.action.files.newUntitledFile");const e=i.window.activeTextEditor;if(!e)return;await i.languages.setTextDocumentLanguage(e.document,"csharp");e.insertSnippet(new i.SnippetString("namespace ${3:ConsoleApp1};\n\npublic ${1|class,interface,enum,record,struct|} ${2:Class1}\n{\n\t${0}\n}\n"))}),{telemetry:t})}finally{t.end(),t.sendTelemetry()}}(t);if(e.contextValue!==l.contextValues.solutionFolder&&e.contextValue!==l.contextValues.project&&e.contextValue!==l.contextValues.folder)return;const r=await(0,m.getTemplateService)();if(!r)return;const y=e.contextValue===l.contextValues.solutionFolder;var P=await async function(e,t){if(t){const e=f.getActiveWorkspaceRoot(),t=await(0,p.getOpenedSolution)();return t&&(0,u.containsFileOrFolder)(e,t)?g.dirname(t):e}return e.contextValue===l.contextValues.project?g.dirname(e.node.Path):e.node.Path}(e,y);if(!(0,h.isWorkingDirectoryInWorkspace)(P))return void o.logger.log(`The selected node's path is located outside the workspace. ${P}`);const T=y?void 0:_(e),C=await async function(e,t){const r=t?await e.getProjectItemTemplates(t):await e.getSolutionItemTemplates();if(!r)throw new Error("Unable to fetch item templates");const n=r.map((e=>({label:e.name,defaultName:e.defaultName,groupIdentity:e.groupIdentity,fixedFile:e.fixedFile,fileExtension:e.fileExtension}))).concat({label:a.addNewItemUiStrings.custom,defaultName:"",groupIdentity:"custom",fixedFile:!1,fileExtension:""});return n.sort(((e,t)=>e.label.localeCompare(t.label))),await i.window.showQuickPick(n,{title:a.addNewItemUiStrings.createNewFile,placeHolder:a.addNewItemUiStrings.searchForTemplates})}(r,T);if(!C)return;var I=C.defaultName;if(C.fixedFile&&b(P,I,C.fileExtension)){const r=y?a.addNewItemUiStrings.addExistingFileToSolutionFolder(I):a.addNewItemUiStrings.addExistingFileToProject(I);if(await i.window.showQuickPick([a.addNewItemUiStrings.yes,a.addNewItemUiStrings.cancel],{placeHolder:r})!==a.addNewItemUiStrings.yes)return;const n=new c.TelemetryActivity("add-new-file",o.telemetryService);n.addOrUpdateProperties({solutionExplorerNodeType:e.node.NodeType,existingFileAdded:"true",templateGroupIdentity:C.groupIdentity,invocationSource:String(v.InvocationSource[t])});const u=f.getExtensionBrokerService(),l=await u.getProxy(s.default.solutionFileService);try{await o.logger.watch("Add a file to project/solution folder",(async function(){const t=I+(C.fileExtension?"."+C.fileExtension:""),r=g.join(P,t);if(y){const r=o.environmentStateManager?.getLatestEnvironmentState();if(r?.containsTemporarySolutionFile)return void i.window.showErrorMessage(a.promptStrings.addSolutionItemNotSupportedSolutionless);await w(l,e,t)}else await S(e,r);i.window.showTextDocument(i.Uri.file(r)),(0,d.expandToNewNode)(e,t)}),{telemetry:n})}finally{n.end(),n.sendTelemetry(),l?.dispose()}return void(e&&(0,o.sendFirstInteractionWithExplorerTelemetry)())}if(!C.fixedFile){const e=await async function(e,t){const r="custom"!==e.groupIdentity&&null!==e.fileExtension&&void 0!==e.fileExtension;let n=e.defaultName,o=n;if(r){""===n&&(n=g.parse(t).base,o=n);let r=1;do{o=n+r.toString(),r++}while(b(t,o,e.fileExtension))}const s=await i.window.showInputBox({title:a.addNewItemUiStrings.nameNewFile,value:o,validateInput:async function(r){if(!r||0===r.length||0===r.trim().length)return a.addNewItemUiStrings.noFileName;if("custom"===e.groupIdentity){const e=r.lastIndexOf(".");if(-1!==e&&(0===r.substring(0,e).trim().length||0===r.substring(e+1).trim().length))return a.addNewItemUiStrings.noFileName}return g.isAbsolute(r)?a.addNewItemUiStrings.onlyRelative:g.parse(g.normalize(r)).dir.startsWith("..")?a.addNewItemUiStrings.outsideDirectory:(r=E(r,e.fileExtension),b(t,r,e.fileExtension))}});return s?E(s,e.fileExtension):s}(C,P);if(!e)return;const t=g.join(P,e);I=g.basename(t),P=g.dirname(t)}const O=f.getExtensionBrokerService(),x=await O.getProxy(s.default.solutionFileService),N=new c.TelemetryActivity("add-new-file",o.telemetryService);if(N.addOrUpdateProperties({solutionExplorerNodeType:e.node.NodeType,templateGroupIdentity:C.groupIdentity,invocationSource:String(v.InvocationSource[t])}),!y){const e=-1!==g.extname(T).localeCompare(".shproj",void 0,{sensitivity:"base"});N.addOrUpdateProperties({projectType:e?"SharedProject":"CSharpProject"})}try{await o.logger.watch("Add a new file"+("custom"===C.groupIdentity?"":" using template: "+C.label),(async function(){const t=I+(C.fileExtension?"."+C.fileExtension:""),s=g.join(P,t);if("custom"===C.groupIdentity)(0,n.writeFile)(g.join(P,I),"",(e=>{if(e)throw e}));else{let e;if(y){const t=o.environmentStateManager?.getLatestEnvironmentState();if(t?.containsTemporarySolutionFile)return void i.window.showErrorMessage(a.promptStrings.addSolutionItemNotSupportedSolutionless);e=await r.createSolutionItem(C.groupIdentity,I,P)}else e=await r.createProjectItem(C.groupIdentity,I,P,T);if(e.errorMessage)return void i.window.showErrorMessage(e.errorMessage)}y?await w(x,e,t):await S(e,s),i.window.showTextDocument(i.Uri.file(s)),(0,d.expandToNewNode)(e,t)}),{telemetry:N})}finally{N.end(),N.sendTelemetry(),x?.dispose()}}function _(e){return e.contextValue===l.contextValues.project?e.node.Path:_(e.parentNode)}async function S(e,t){const r={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"]}},steps:[{AddFiles:{ItemsPath:[t]}}]}},n=await o.projectQueryableSpace.executeAction(r);n.Errors&&n.Errors.forEach((e=>{o.logger.log(e.Message)}))}async function w(e,t,r){let n=t.node.ProjectGuid;n&&0!==n.length||(n=f.emptyGuid),await(e?.addSolutionItem(n,r))}function E(e,t){return t&&e.length>t.length&&e.substring(e.length-t.length).toLowerCase()===t?e.substring(0,e.length-t.length-1):e}function b(e,t,r){const i=r?t+"."+r:t;return(0,n.existsSync)(g.join(e,i))?a.addNewItemUiStrings.fileExists:null}t.addNewFileFromNewFileMenu=async function(){await y(void 0,v.InvocationSource.newFileMenu)},t.addNewFile=y},17702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNewProject=t.addNewProjectFromNewFileMenu=void 0;const n=r(57147),i=r(73292),o=r(89496),s=r(7195),a=r(65979),c=r(60279),u=r(22677),l=r(75010),d=r(73228),p=r(2906),f=r(65300),h=r(79994),g=r(79994),m=r(71017),v=r(55471),y=r(69279),_=r(30077),S=r(77867);async function w(e,t,r){const a=new l.TelemetryActivity("AddNewProject/show-list-of-templates",s.telemetryService);r??=t?v.InvocationSource.solutionExplorer:v.InvocationSource.commandPalette;const p=o.extensions.getExtension(y.EXTENSION_ID);if(!p)throw new Error("Unable to find the extension");const g=p.exports.hasServerProcessLoaded();a.addOrUpdateProperties({serverProcessLoaded:String(!g),templateServiceInitialized:String(!c.isTemplateServiceInitialized)});const _=g?null:o.window.setStatusBarMessage(u.addNewItemUiStrings.waitingTemplateService);let S=null;try{if(S=await(0,c.getTemplateService)(),!S)return}finally{_?.dispose()}const w=await async function(e,t){const r=await e.getProjectTemplates();if(!r)throw new Error("Unable to fetch project templates");const n=r.filter((e=>"Microsoft.Maui.MultiProjectApp"!==e.groupIdentity)).map((e=>({label:e.name,defaultName:e.defaultName,groupIdentity:e.groupIdentity,detail:e.description})));return n.sort(((e,t)=>e.label.localeCompare(t.label))),t.sendTelemetry(),await o.window.showQuickPick(n,{title:u.addNewItemUiStrings.createNewProject,placeHolder:u.addNewItemUiStrings.searchForTemplates})}(S,a);if(!w)return;w.groupIdentity.startsWith("Microsoft.Maui")&&(o.extensions.getExtension(y.MAUI_EXTENSION_ID)||o.window.showWarningMessage(u.addNewItemUiStrings.mauiExtensionNotFound,u.addNewItemUiStrings.installMaui).then((e=>{e===u.addNewItemUiStrings.installMaui&&o.env.openExternal(o.Uri.parse(y.MAUI_EXTENSION_URL))})));const P=await async function(e,t,r){const s=o.workspace.workspaceFolders;if(s&&0!==s.length){const n=h.getActiveWorkspaceRoot();let i=await(0,f.getOpenedSolution)();const s=void 0!==i;a=i&&(0,d.containsFileOrFolder)(n,i)?m.dirname(i):n;const l=h.parseSolutionFolderFromContextMenu(r),{solutionFolder:p,projectName:g}=await E(a,e,void 0!==i,l);if(!g)return;const v=await async function(e,t,r){const n=m.join(e,t??"."),i=u.addNewItemUiStrings.projectCreatedIn(m.join(n,r)),s=[{label:u.addNewItemUiStrings.defaultDirectory,id:"default",description:i},{label:u.addNewItemUiStrings.chooseDirectory,id:"picker"}],a=await o.window.showQuickPick(s,{title:u.addNewItemUiStrings.locationForNewProject,placeHolder:i});if(!a)return;if("default"===a.id)return n;const c=await o.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:u.addNewItemUiStrings.projectLocation,defaultUri:o.Uri.file(n)});return c?c[0].fsPath:void 0}(a,p,g);if(!v)return;if(!i){const e=await c(a);if(!e)return;const t=m.parse(g).name+e;i=m.join(a,t)}return{templateGroupIdentity:e.groupIdentity,projectName:g,rootDirectory:a,projectLocation:v,solutionFolder:p,fullSolutionPath:i,openFolder:!1,invocationSource:t,inOpenSolution:s}}{const r=await async function(){const e=await o.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:u.addNewItemUiStrings.projectLocation});if(e)return e[0].fsPath}();if(!r)return;const{solutionFolder:s,projectName:l}=await E(r,e,!0);if(!l)return;var a=r;!(0,n.existsSync)(a)||b(a)||(a=m.join(a,l),await(0,i.mkdir)(a,{recursive:!0}));const d=await c(a);if(!d)return;const p=m.join(a,m.parse(a).name)+d,f=m.join(a,s??".");return{templateGroupIdentity:e.groupIdentity,projectName:l,rootDirectory:a,solutionFolder:s,fullSolutionPath:p,projectLocation:f,openFolder:!0,invocationSource:t,inOpenSolution:!1}}async function c(e){if(!e)return;let t;return t=await(0,f.isSlnxSupportedInWorkspace)(e)?await o.window.showQuickPick([u.addNewItemUiStrings.slnFileFormat,u.addNewItemUiStrings.slnxFileFormat],{placeHolder:u.addNewItemUiStrings.selectSolutionFileFormat}):".sln",t}}(w,r,t);P&&(await async function(e,t,r,n){const i=u.addNewItemUiStrings.projectCreatedIn(m.join(t.projectLocation,t.projectName)),s={label:u.addNewItemUiStrings.createProject,description:i,id:0},a={label:u.addNewItemUiStrings.showTemplateOptions,id:1},c=await o.window.showQuickPick([s,a],{title:u.addNewItemUiStrings.createProjectOrViewOptions,placeHolder:i});if(!c)return;if(0===c.id)return void await C(r,e,t,n,void 0);const l=await e.getProjectParameters(t.templateGroupIdentity);await T(e,t,l,r,n)}(S,P,e,t),t&&(0,s.sendFirstInteractionWithExplorerTelemetry)())}async function E(e,t,r,n){let i,s=1;do{i=t.defaultName+s.toString(),n&&(i=m.join(n,i)),s++}while(await P(e,i,r));const a=(await o.window.showInputBox({title:u.addNewItemUiStrings.nameNewProject,value:i,validateInput:async function(t){return t&&0!==t.length?(t=t.trim(),m.isAbsolute(t)?u.addNewItemUiStrings.onlyRelative:m.parse(m.normalize(t)).dir.startsWith("..")?u.addNewItemUiStrings.outsideDirectory:await P(e,t,r)):u.addNewItemUiStrings.noProjectName}}))?.trim();if(a){const e=m.normalize(a),t=m.dirname(e),r=m.basename(e);return t&&"."!==t?{solutionFolder:t,projectName:r}:{projectName:r}}return{}}function b(e){try{return 0===(0,n.readdirSync)(e).length}catch{return!1}}async function P(e,t,r){for(const e of'"*<>:|?')if(-1!==t.indexOf(e))return u.addNewItemUiStrings.pathInvalidChars;if(e.length+3*t.length>240)return u.addNewItemUiStrings.pathTooLong;const i=m.resolve(e,t);return(0,n.existsSync)(i)&&!b(i)?u.addNewItemUiStrings.projectDirectoryExists:!r&&await(0,g.doesSolutionContainProject)(t,!0)?u.addNewItemUiStrings.solutionContainsItem(t):null}async function T(e,t,r,n,i){const s=u.addNewItemUiStrings.projectCreatedIn(m.join(t.projectLocation,t.projectName)),a=[{label:u.addNewItemUiStrings.createProject,description:s,id:0},{label:u.addNewItemUiStrings.templateOptions,kind:o.QuickPickItemKind.Separator,id:-1}];var c=0;const l={};for(const e of r){c++;const t=e.selectedValue??e.defaultValue;var d=!0;if(e.visibilityConditions)for(const t of e.visibilityConditions){if(!(t.parameterId in l)){d=!1;break}var p=t.values.includes(l[t.parameterId]);if(t.negated&&(p=!p),!p){d=!1;break}}if(!d)continue;l[e.id]=t;const r=e.values?.find((e=>e.value===t))?.displayName??t,n={label:e.displayName,description:r??t,id:c};a.push(n)}const f=await o.window.showQuickPick(a,{placeHolder:u.addNewItemUiStrings.selectOption,title:u.addNewItemUiStrings.selectOptionToConfigure});f&&(0!==f.id?(await async function(e){const t=e.dataType??"choice";if("choice"===t){const t=[];for(const r of e.values)t.push({label:r.displayName,id:r.value,description:I(e,r.value)});const r=await o.window.showQuickPick(t,{title:u.addNewItemUiStrings.configureOption(e.displayName),placeHolder:u.addNewItemUiStrings.specifyValue(e.displayName)});r&&(e.selectedValue=r.id)}else if("bool"===t){const t=[{label:u.addNewItemUiStrings.trueValue,id:"true",description:I(e,"true")},{label:u.addNewItemUiStrings.falseValue,id:"false",description:I(e,"false")}],r=await o.window.showQuickPick(t,{title:u.addNewItemUiStrings.configureOption(e.displayName),placeHolder:u.addNewItemUiStrings.specifyValue(e.displayName)});r&&(e.selectedValue=r.id)}}(r[f.id-1]),await T(e,t,r,n,i)):await C(n,e,t,i,r))}async function C(e,t,r,i,c){await async function(e,t,r,i){const c=new l.TelemetryActivity("add-project",s.telemetryService);c.addOrUpdateProperties({openFolder:String(r.openFolder),templateGroupIdentity:r.templateGroupIdentity,invocationSource:String(v.InvocationSource[r.invocationSource]),inOpenSolution:String(r.inOpenSolution)});try{await s.logger.watch("Add a new project",(async()=>{const s="Aspire.Empty"===r.templateGroupIdentity||"Aspire.Starter"===r.templateGroupIdentity||"Aspire.Empty.9"===r.templateGroupIdentity||"Aspire.Starter.9"===r.templateGroupIdentity?r.projectLocation:m.join(r.projectLocation,r.projectName),c=function(e){const t={};if(e)for(const r of e)r.selectedValue&&("bool"===r.dataType&&r.invertBoolean?t[r.name]="true"===r.selectedValue?"false":"true":t[r.name]=r.selectedValue);return t}(i),u=await t.createProject(r.templateGroupIdentity,r.projectName,s,c);if(u.errorMessage)return void o.window.showErrorMessage(u.errorMessage);const l=r.fullSolutionPath;if(!(0,n.existsSync)(l)){const t=m.parse(r.fullSolutionPath);if(".sln"===t.ext?await(0,S.dotnetCommand)(_.DotnetCommand.newSln,t.dir,["new","sln","-n",t.name]):".slnx"===t.ext&&await(0,S.dotnetCommand)(_.DotnetCommand.newSln,t.dir,["new","sln","-n",t.name,"-f","slnx"]),!r.openFolder){const t=o.workspace.asRelativePath(l);await o.workspace.getConfiguration("dotnet").update("defaultSolution",t),await(0,f.default)(e,l)}}if(u.primaryOutputPaths){const e=h.getExtensionBrokerService(),t=await e.getProxy(a.default.solutionFileService);try{let e=!1;for(const n of u.primaryOutputPaths){const i=m.join(s,n);".csproj"===m.extname(i).toLowerCase()&&(e=!0,await h.addProjectToSolution(r.rootDirectory,l,i,r.solutionFolder),await(0,f.reloadSolution)(l),await(t?.addProjectToFilter(i)))}if(!e){const e=(0,n.readdirSync)(s);for(const n of e){const e=m.join(s,n);".csproj"===m.extname(e).toLowerCase()&&(await h.addProjectToSolution(r.rootDirectory,l,e,r.solutionFolder),await(0,f.reloadSolution)(l),await(t?.addProjectToFilter(e)))}}}finally{t?.dispose()}}r.openFolder||await(0,f.reloadSolution)(l)}),{telemetry:c})}finally{c.end(),c.sendTelemetry()}r.openFolder&&await o.commands.executeCommand("vscode.openFolder",o.Uri.file(r.rootDirectory))}(e,t,r,c),i instanceof o.TreeItem&&(0,p.expandToNewNode)(i,r.projectName)}function I(e,t){var r=void 0;return t===e.defaultValue&&(r=u.addNewItemUiStrings.default),t===e.selectedValue&&(r=u.addNewItemUiStrings.selected),r}t.addNewProjectFromNewFileMenu=async function(e){await w(e,void 0,v.InvocationSource.newFileMenu)},t.addNewProject=w},44462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(68489),o=r(69279),s=r(7195),a=r(65979),c=r(22677),u=r(98986),l=r(79994),d=r(16260),p=r(29047),f=r(75010),h=r(39058);t.default=async function(e){const t=n.extensions.getExtension(o.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");const r=t.exports.serviceBroker,g=u.NuGetAction.add,m=new d.TelemetryEvent("nuget/add-nuget-package",s.telemetryService);try{const t=new h.NuGetConfigurationSettings;(0,p.addIncludePrereleaseTelemetry)(m,t.includePrerelease);const d=(0,l.getActiveWorkspaceRoot)(),v=await(0,u.verifyServicePrerequisites)(g,d,r,m);if(!v||!v.isPrerequisiteMet)return void(0,p.cancelAtStepTelemetry)(m,"verify-prerequisites");const y=(0,u.getProjectFromContext)(e);y?(0,p.addEntrypointTelemetry)(m,"project-context-menu"):(0,p.addEntrypointTelemetry)(m,"command-palette");const _=y??await(0,u.showProjectPicker)(g,m);if(!_)return void(0,p.cancelAtStepTelemetry)(m,"project-picker");const S=await async function(e,{title:t,value:r,prompt:i,placeholder:u},l,d,h){const g=n.extensions.getExtension(o.EXTENSION_ID);if(!g)throw new Error("Unable to find the extension.");const m=[],v=g.exports.serviceBroker,y=await v.getProxy(a.default.nugetCommandsService);y&&m.push(y);try{return await new Promise((o=>{const a=n.window.createInputBox();a.title=t,a.value=r,a.prompt=i,a.placeholder=u;let g=0;m.push(a.onDidAccept((async()=>{a.validationMessage="";const t=a.value;let r;a.enabled=!1,a.busy=!0,g++;const n=new f.TelemetryActivity("nuget/search-nuget-packages",s.telemetryService);try{r=await s.logger.watch("Search NuGet packages",(async function(){return n.start(),r=await(0,p.runWithDurationTelemetry)((async()=>await(y?.packageSearch(e,t,d.includePrerelease))),l,"packageSearch"),n.end(),r}),{telemetry:n,catchUnhandledErrors:!1})}finally{const e=r?.length??0;0===e?a.validationMessage=c.nugetStrings.noPackagesFoundError:o(r),a.busy=!1,a.enabled=!0,l.addOrUpdateMeasurements({numberOfSearches:g}),(0,p.addResultsCountTelemetry)(l,e,"packageSearch"),n.addOrUpdateMeasurements({searchTermLength:t.length}),(0,p.addResultsCountTelemetry)(n,e,"packageSearch"),(0,p.addDotnetSdkTelemetry)(n,h),n.sendTelemetry()}})),a.onDidChangeValue((async()=>{a.validationMessage=""})),a.onDidHide((()=>{o(void 0)})),a),a.show()}))}finally{m.forEach((e=>e.dispose()))}}(_.fullPath,{title:c.nugetStrings.addPackageTitle,value:"",placeholder:(0,u.getPrereleaseStatusPlaceholder)(t.includePrerelease,c.nugetStrings.packageSearchPlacholder)},m,t,v.value);if(void 0===S)return void(0,p.cancelAtStepTelemetry)(m,"package-search");const w=await async function(e,t){let r;const o=await n.window.showQuickPick(e?.map((e=>new i.NuGetPackageSearchQuickPick(e))),{title:c.nugetStrings.addPackageTitle,placeHolder:(0,u.getPrereleaseStatusPlaceholder)(t.includePrerelease,c.nugetStrings.packagePickerPlaceholder)});return o&&(r=o.info),r}(S,t);if(!w)return void(0,p.cancelAtStepTelemetry)(m,"package-picker");const E=await(0,u.showVersionPicker)(g,w,(0,u.retrievePackageVersions)(_.fullPath,w.id,t.includePrerelease,r,m),t);if(!E)return void(0,p.cancelAtStepTelemetry)(m,"version-picker");await s.logger.watch("Add NuGet package",(async function(){const e=await r.getProxy(a.default.nugetCommandsService);try{const t=await(0,p.runWithDurationTelemetry)((async()=>await(e?.addPackage(_.fullPath,w.id,E.version))),m,"addPackage");m.addOrUpdateProperties({succeeded:String(t)})}finally{e?.dispose(),(0,p.addCompletedTelemetry)(m)}}),{telemetry:m,catchUnhandledErrors:!0})}finally{m.sendTelemetry(),e&&(0,s.sendFirstInteractionWithExplorerTelemetry)()}}},76925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addProjectReferenceByProjectPath=t.addProjectReferenceByProjectGuid=void 0;const n=r(89496),i=r(7195),o=r(22677),s=r(75010),a=r(92181),c=r(71017);async function u(e,t){const r={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e]]},$properties:["Id"]}},steps:[{AddProjectReferenceByPath:{ReferencedProjectPath:t,ReferenceType:"ProjectReference"}}]}},n=await i.projectQueryableSpace.executeAction(r);n.Errors&&n.Errors.forEach((e=>{i.logger.log(e.Message)}))}t.default=async function(e){let t;if(e?.contextValue===a.contextValues.project&&e.node.Path&&e.node.ProjectGuid){if(r=e.node.Path,-1!==c.extname(r).localeCompare(".shproj",void 0,{sensitivity:"base"}))return void n.window.showWarningMessage(o.errorStrings.addProjectReferenceOnSharedProject,{modal:!0});t={path:e.node.Path,label:e.node.Name,guid:e.node.ProjectGuid}}var r;if(!t&&(t=await async function(){const e=await i.projectQueryableSpace.executeQuery({context:"Projects",query:{$properties:["Name","Path","Id"],$filter:{ProjectsByCapabilities:["!SharedAssetsProject"]}}});if(!e.Items?.length)return void n.window.showWarningMessage(o.errorStrings.addProjectReferenceNoProjects,{modal:!0});const t=e.Items.filter((e=>e.Path&&e.Name&&e.Id?.ProjectGuid)).map((e=>({path:e.Path,label:e.Name,guid:e.Id.ProjectGuid})));return t.sort(((e,t)=>e.label.localeCompare(t.label))),await n.window.showQuickPick(t,{placeHolder:o.promptStrings.selectProject})}(),!t))return;const l=await async function(e,t,r){return await i.logger.watch("Get project to add reference to.",(async()=>{const e={context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[r]]},$properties:["ProjectReferences"],ProjectReferences:{$properties:["ReferencedProjectPath"]}}},s=await i.projectQueryableSpace.executeQuery(e),a=[];s.Items?.[0]?.ProjectReferences&&s.Items[0].ProjectReferences.forEach((e=>{e.ReferencedProjectPath&&a.push(e.ReferencedProjectPath)}));const c={context:"Projects",query:{$filter:{ProjectsByCapabilities:["!SharedAssetsProject"]},$where:{"!=":[{".":"Name"},t]},$properties:["Name","Path"]}},u=await i.projectQueryableSpace.executeQuery(c);if(u.Items){const e=u.Items.filter((e=>e.Path&&!a.includes(e.Path))).map((e=>({path:e.Path,label:e.Name})));return 0===e.length?void n.window.showWarningMessage(o.errorStrings.addProjectReferenceNoProjects,{modal:!0}):(e.sort(((e,t)=>e.label.localeCompare(t.label))),(await n.window.showQuickPick(e,{placeHolder:o.promptStrings.selectReferenceProject}))?.path)}}),{catchUnhandledErrors:!1})}(t.path,t.label,t.guid);if(!l)return;const d=new s.TelemetryActivity("add-project-reference",i.telemetryService);try{await i.logger.watch("Add project reference",(async()=>{await u(t.guid,l)}),{telemetry:d,catchUnhandledErrors:!1})}finally{d.end(),d.sendTelemetry()}(0,i.sendFirstInteractionWithExplorerTelemetry)()},t.addProjectReferenceByProjectGuid=u,t.addProjectReferenceByProjectPath=async function(e,t){const r={update:{target:{context:"Projects",query:{$filter:{ProjectsByPath:[[e]]},$properties:["Id"]}},steps:[{AddProjectReferenceByPath:{ReferencedProjectPath:t,ReferenceType:"ProjectReference"}}]}},n=await i.projectQueryableSpace.executeAction(r);n.Errors&&n.Errors.forEach((e=>{i.logger.log(e.Message)}))}},26686:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7195),i=r(20695);t.default=async function(e){return e&&(0,n.sendFirstInteractionWithExplorerTelemetry)(),(0,i.setSolutionBuildAction)(new i.BuildActionOptions(i.BUILD),e)}},33771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7195),i=r(20695);t.default=async function(e){return e&&(0,n.sendFirstInteractionWithExplorerTelemetry)(),(0,i.setSolutionBuildAction)(new i.BuildActionOptions(i.CLEAN),e)}},50031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyRelativePath=t.copyPath=void 0;const n=r(89496),i=r(65300),o=r(71017),s=r(7195);t.copyPath=async function(e){await n.env.clipboard.writeText(e.node.Path),e&&(0,s.sendFirstInteractionWithExplorerTelemetry)()},t.copyRelativePath=async function(e){const t=await(0,i.getOpenedSolution)();if(t){const r=o.relative(o.dirname(t),e.node.Path);await n.env.clipboard.writeText(r),e&&(0,s.sendFirstInteractionWithExplorerTelemetry)()}}},40799:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(22677),s=r(82269),a=r(75010),c=r(7195),u=r(6315),l=r(71017);t.default=async function(e,t){const r=n.extensions.getExtension(i.EXTENSION_ID);if(!r)throw new Error("Unable to find the extension.");if(!n.workspace.workspaceFolders||n.workspace.workspaceFolders.length<1)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoOpenFolder);const d=n.workspace.workspaceFolders[0];if(!d)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoOpenFolder);const p=e?.fsPath;if(!p)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoProjectFound);const f=l.extname(p).toLowerCase();if(".cs"!==f)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.notSupportedFileExtension(p,f));const h=await async function(e){const t=[],r={context:"Projects",query:{$properties:["Id","Path","Files"],Files:{$properties:["Id","Path"],$filter:{FilesByPath:[[e]]}},$where:{any:{".":"Files"}}}},n=await c.projectQueryableSpace.executeQuery(r);return n&&n.Items?.forEach((e=>{e&&e.Path&&t.push(e.Path)})),t}(p);if(h&&h.length>0){let e;if(1===h.length)e=h[0];else{const t=await n.window.showQuickPick(h,{title:o.debugProjectLaunchStrings.selectProject});if(!t)return void n.window.showWarningMessage(o.debugProjectLaunchStrings.warnNoProjectSelected);e=t}await(0,s.debugLaunch)(e,d,t,r.exports.serviceBroker,"debugFileLaunch")}else{n.window.showWarningMessage(o.debugProjectLaunchStrings.errorNoProjectForFile(p));const e=new a.TelemetryActivity("debugFileLaunch",c.telemetryService);e.addOrUpdateProperties({succeeded:String(!1)}),e.addOrUpdateMeasurements({telemetryCode:u.DebugTelemetryCode.failedToFindProjectForFile}),e.sendTelemetry()}}},79053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(22677),s=r(82269),a=r(7195);t.default=async function(e,t){const r=n.extensions.getExtension(i.EXTENSION_ID);if(!r)throw new Error("Unable to find the extension.");if(!n.workspace.workspaceFolders||n.workspace.workspaceFolders.length<1)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoOpenFolder);const c=n.workspace.workspaceFolders[0];if(!c)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoOpenFolder);const u=e?.node?.Path;u?(await(0,s.debugLaunch)(u,c,t,r.exports.serviceBroker,"debugProjectLaunch"),e&&(0,a.sendFirstInteractionWithExplorerTelemetry)()):n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoProjectFound)}},758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(7195),o=r(65979),s=r(22677),a=r(92181),c=r(2906),u=r(79994);async function l(e){await n.window.showErrorMessage(s.errorStrings.deleteOperationFailed(e))}t.default=async function(e,t){const d=u.getExtensionBrokerService();if((e=e??await(0,c.getSelectedSolutionTreeNodeInExplorer)())&&e.node){if(!t&&!await n.window.showWarningMessage(s.promptStrings.deleteConfirmation(e.node.Name),{modal:!0},s.promptStrings.yes))return;void 0!==e.parentNode&&e.parentNode.node.NodeType===a.nodeTypes.solutionFolder?await async function(e,t){await i.logger.watch("Delete file in a solution folder",(async function(){const n=await t.getProxy(o.default.solutionFileService);try{if(null!==n&&e.parentNode){const t=e.parentNode.node.ProjectGuid;if(t&&e.node.Path){const i=await u.getRelativePathToSolution(e.node.Path);await(n?.removeSolutionItem(t,i)),r(57147).unlinkSync(e.node.Path)}}}finally{n?.dispose()}}),{catchUnhandledErrors:!0})}(e,d):e.node.NodeType===a.nodeTypes.file?await async function(e){const t={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"],$get:{Files:{$filter:{FilesByPath:[[e.node.Path]]},$properties:["Id","Path"]}}}},steps:["Delete"]}};await i.logger.watch("Delete file in a project",(async()=>{const r=await i.projectQueryableSpace.executeAction(t);r.Errors&&(await l(e.node.Name),r.Errors.forEach((e=>{i.logger.log(e.Message)})))}),{catchUnhandledErrors:!0})}(e):e.node.NodeType===a.nodeTypes.folder?await async function(e){const t={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"],$get:{Folders:{$filter:{FoldersByPath:[[e.node.Path]]},$properties:["Id"]}}}},steps:["Delete"]}};await i.logger.watch("Delete folders in a project",(async()=>{const r=await i.projectQueryableSpace.executeAction(t);r.Errors&&(await l(e.node.Name),r.Errors.forEach((e=>{i.logger.log(e.Message)})))}),{catchUnhandledErrors:!0})}(e):await l(e.node.Name),e&&(0,i.sendFirstInteractionWithExplorerTelemetry)()}}},66716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showHotReloadPanel=t.hotReload=void 0;const n=r(69279),i=r(65979),o=r(28457),s=r(42300),a=r(22677),c=r(89496);t.hotReload=async function(){const e=c.extensions.getExtension(n.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const t=e.exports.serviceBroker,r=await t.getProxy(i.default.hotReloadService);let u=o.HotReloadResult.applyUpdatesFailure;try{if(null===r)return void await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.minimal,a.hotReloadStrings.serviceNotFound));u=await r.applyChanges()}catch(e){let t=a.hotReloadStrings.exceptionWhenApplying+e;await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.detailed,t))}finally{r?.dispose()}},t.showHotReloadPanel=async function(e){await s.hotReloadLogger.outputChannel().show()}},24138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.helperOpenUrl=t.webviewRunCommand=t.installDotnetSdkFromWalkthrough=t.installDotnetSdk=t.selectLaunchTargetFramework=t.selectLaunchConfiguration=t.selectStartupProject=t.noDebugFileLaunch=t.debugFileLaunch=t.stepIntoProjectLaunch=t.noDebugProjectLaunch=t.debugProjectLaunch=t.showHotReloadPanel=t.hotReload=t.openDevKitOutputWindow=t.openProjectsLogsView=t.removeItem=t.newFolder=t.removeSolutionFolder=t.renameSolutionFolder=t.newSolutionFolder=t.revealFileInOS=t.copyRelativePath=t.copyPath=t.rename=t.removeProjectReference=t.addProjectReference=t.addExistingFile=t.addNewFileFromNewFileMenu=t.addNewFile=t.deleteItem=t.searchFromCommandPalette=t.searchOpenFromCommandPalette=t.searchProjectFromCommandPalette=t.signIntoVsAccount=t.removeProject=t.cleanSolution=t.rebuildSolution=t.buildSolution=t.addExistingProject=t.openInTerminal=t.showEntitlementsStatus=t.removeNuGetPackage=t.updateNuGetPackage=t.addNuGetPackage=t.addNewProjectFromNewFileMenu=t.addNewProject=t.addAspireOrchestration=t.closeSolution=t.openSolution=void 0,t.manageUserSecrets=t.saveSolutionFile=t.openCoverageReport=t.selectActiveConfiguration=t.syncWithActiveItem=void 0;const n="csdevkit",i=r(22037).platform().toLowerCase().replace(/[0-9]/g,"").replace("darwin","mac").replace("win","windows");t.openSolution=`${n}.openSolution`,t.closeSolution=`${n}.closeSolution`,t.addAspireOrchestration=`${n}.addAspireOrchestration`,t.addNewProject=`${n}.addNewProject`,t.addNewProjectFromNewFileMenu=`${n}.addNewProjectFromNewFileMenu`,t.addNuGetPackage=`${n}.addNuGetPackage`,t.updateNuGetPackage=`${n}.updateNuGetPackage`,t.removeNuGetPackage=`${n}.removeNuGetPackage`,t.showEntitlementsStatus=`${n}.showEntitlementsStatus`,t.openInTerminal=`${n}.openInTerminal`,t.addExistingProject=`${n}.addExistingProject`,t.buildSolution=`${n}.buildSolution`,t.rebuildSolution=`${n}.rebuildSolution`,t.cleanSolution=`${n}.cleanSolution`,t.removeProject=`${n}.removeProject`,t.signIntoVsAccount=`${n}.signIntoVsAccount`,t.searchProjectFromCommandPalette=`${n}.searchProjectFromCommandPalette`,t.searchOpenFromCommandPalette=`${n}.searchOpenFromCommandPalette`,t.searchFromCommandPalette=`${n}.searchFromCommandPalette`,t.deleteItem=`${n}.deleteItem`,t.addNewFile=`${n}.addNewFile`,t.addNewFileFromNewFileMenu=`${n}.addNewFileFromNewFileMenu`,t.addExistingFile=`${n}.addExistingFile`,t.addProjectReference=`${n}.addProjectReference`,t.removeProjectReference=`${n}.removeProjectReference`,t.rename=`${n}.rename`,t.copyPath=`${n}.copyPath`,t.copyRelativePath=`${n}.copyRelativePath`,t.revealFileInOS=`${n}.revealFileInOS.${i}`,t.newSolutionFolder=`${n}.newSolutionFolder`,t.renameSolutionFolder=`${n}.renameSolutionFolder`,t.removeSolutionFolder=`${n}.removeSolutionFolder`,t.newFolder=`${n}.newFolder`,t.removeItem=`${n}.removeItem`,t.openProjectsLogsView=`${n}.openProjectsLogsView`,t.openDevKitOutputWindow=`${n}.openDevKitOutputWindow`,t.hotReload=`${n}.debug.hotReload`,t.showHotReloadPanel=`${n}.debug.showHotReloadPanel`,t.debugProjectLaunch=`${n}.debug.projectDebugLaunch`,t.noDebugProjectLaunch=`${n}.debug.noDebugProjectLaunch`,t.stepIntoProjectLaunch=`${n}.debug.stepIntoProjectLaunch`,t.debugFileLaunch=`${n}.debug.fileLaunch`,t.noDebugFileLaunch=`${n}.debug.noDebugFileLaunch`,t.selectStartupProject=`${n}.debug.selectStartupProject`,t.selectLaunchConfiguration=`${n}.debug.selectLaunchConfiguration`,t.selectLaunchTargetFramework=`${n}.debug.selectLaunchTargetFramework`,t.installDotnetSdk=`${n}.installDotnetSdk`,t.installDotnetSdkFromWalkthrough=`${n}.installDotnetSdk.fromWalkthrough`,t.webviewRunCommand=`${n}.webview.runCommand`,t.helperOpenUrl=`${n}.helper.openUrl`,t.syncWithActiveItem=`${n}.syncWithActiveItem`,t.selectActiveConfiguration=`${n}.selectActiveConfiguration`,t.openCoverageReport=`${n}.openCoverageReport`,t.saveSolutionFile=`${n}.saveSolutionFile`,t.manageUserSecrets=`${n}.manageUserSecrets`},97475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.manageUserSecrets=void 0;const n=r(89496),i=r(71017),o=r(22037),s=r(57147),a=r(32081),c=(0,r(73837).promisify)(a.exec);t.manageUserSecrets=async function(e){let t="";if(e)t=e instanceof n.Uri?e.fsPath:e.node.Path||"";else{const e=n.window.activeTextEditor;e&&".csproj"===i.extname(e.document.uri.fsPath)&&(t=e.document.uri.fsPath)}if(t&&".csproj"===i.extname(t))try{const e=await async function(e){try{const t=(await s.promises.readFile(e,"utf8")).match(/<UserSecretsId>(.*?)<\/UserSecretsId>/);if(t)return t[1];const{stdout:r,stderr:i}=await c(`dotnet user-secrets init --project "${e}"`);if(i)return n.window.showErrorMessage(`Failed to initialize user secrets. Make sure you have the required permissions and .NET SDK installed.\nError: ${i}`),null;const o=(await s.promises.readFile(e,"utf8")).match(/<UserSecretsId>(.*?)<\/UserSecretsId>/);return o?o[1]:null}catch(e){throw new Error(`Failed to get/create user secrets ID: ${e instanceof Error?e.message:String(e)}`)}}(t);if(!e)return void n.window.showErrorMessage("Failed to get or create user secrets ID");const r=function(e){return"win32"===o.platform()?i.join(o.homedir(),"AppData","Roaming","Microsoft","UserSecrets",e,"secrets.json"):i.join(o.homedir(),".microsoft","usersecrets",e,"secrets.json")}(e);await async function(e){try{await s.promises.mkdir(i.dirname(e),{recursive:!0}),s.existsSync(e)||await s.promises.writeFile(e,"{\n\n}","utf8")}catch(e){throw new Error(`Failed to create secrets file: ${e instanceof Error?e.message:String(e)}`)}}(r);const a=await n.workspace.openTextDocument(r);await n.window.showTextDocument(a)}catch(e){n.window.showErrorMessage("Error opening user secrets file")}else n.window.showErrorMessage("Please select a .csproj file")}},90126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newFolderActionAsync=void 0;const n=r(57147),i=r(71017),o=r(89496),s=r(49397),a=r(79994),c=r(79994),u=r(7195),l=r(22677),d=r(92181),p=r(71017);async function f(e,t,r){await u.logger.watch("Add a new folder in a project",(async function(){if(e.node.ProjectGuid!==a.emptyGuid){const n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"]}},steps:[{CreateFolder:{FolderPath:p.join(t,r)}}]}},i=await u.projectQueryableSpace.executeAction(n);i.Errors&&(await o.window.showErrorMessage(l.errorStrings.newFolderFailed(e.node.Name)),i.Errors.forEach((e=>{u.logger.log(e.Message)})))}}),{catchUnhandledErrors:!0})}t.default=async function(e){if(!(0,c.isWorkingDirectoryInWorkspace)(e.node.Path))return void u.logger.log(`The selected node's path is located outside the workspace. ${e.node.Path} not in ${(0,s.getOpenedWorkspaceHelper)()?.uri.fsPath}`);if(!e.node.Path)return await o.window.showErrorMessage(l.errorStrings.newFolderFailed(e.node.Name)),void u.logger.log(`The selected node doesn't contain a valid path. ${e.node}`);const t=e.node.NodeType===d.nodeTypes.folder?e.node.Path:(0,i.dirname)(e.node.Path),r=function(e){return(0,n.readdirSync)(e,{withFileTypes:!0}).filter((e=>e.isDirectory())).map((e=>e.name))}(p.dirname(e.node.Path)),a=(0,c.calculateDefaultFolderName)(r),h=await o.window.showInputBox({title:l.promptStrings.newFolderName,value:a,validateInput:async function(e){return e&&0!==e.length?(0,n.existsSync)(p.join(t,e))?l.errorStrings.fileOrFolderAlreadyExists:void 0:l.errorStrings.noName}});h&&(await f(e,t,h),e&&(0,u.sendFirstInteractionWithExplorerTelemetry)())},t.newFolderActionAsync=f},71181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(79994),o=r(79994),s=r(7195),a=r(65979),c=r(22677),u=r(1639);t.default=async function(e){const t=i.getExtensionBrokerService(),r=await(0,u.getExistingChildrenNodesNames)(t,e.node);let l,d=await t.getProxy(a.default.solutionFileService);try{l=await(d?.getSolutionFolders())}finally{d?.dispose()}let p=(0,o.calculateDefaultFolderName)(r);p=(0,o.updateDefaultName)(p,l);const f=(await n.window.showInputBox({title:c.promptStrings.newSolutionFolder,value:p,validateInput:e=>(0,u.validateSolutionFolderName)(e,r,l)}))?.trim();f&&await s.logger.watch("Add a new solution folder",(async function(){try{let r=e.node.ProjectGuid;r&&0!==r.length||(r=i.emptyGuid),d=await t.getProxy(a.default.solutionFileService),await(d?.addSolutionFolder(f,r))}finally{d?.dispose()}e&&(0,s.sendFirstInteractionWithExplorerTelemetry)()}),{catchUnhandledErrors:!0})}},83661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(83176);t.default=async function(){let e=await(0,n.getReportController)();await e.openCoverageReport()}},9786:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7195);t.default=function(){n.logger.show()}},64424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(57147),i=r(89496),o=r(7195),s=r(79994),a=r(71017);t.default=async function(e){let t=e?.resourceUri?.fsPath;o.environmentStateManager?.isSolutionGeneratedOutsideWorkspace()&&(t=(0,s.getActiveWorkspaceRoot)()),t&&!(0,n.existsSync)(t)&&(t=void 0),t&&(0,n.lstatSync)(t).isFile()&&(t=a.dirname(t));const r={cwd:t};i.window.createTerminal(r).show(),e&&(0,o.sendFirstInteractionWithExplorerTelemetry)()}},24593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(65979);t.default=async function(){const e=n.extensions.getExtension(i.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const t=e.exports.serviceBroker,r=await t.getProxy(o.default.logOutputChannelService,{activationArguments:{outputChannelName:"Projects"}});r&&r.show()}},65300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOpenedSolution=t.reloadSolution=t.closeSolution=t.isSlnxSupportedInWorkspace=t.openDefaultSolution=t.openDefaultSolutionInWorkspace=t.vscodeWorkspaceFileWatcher=void 0;const n=r(57147),i=r(89496),o=r(69279),s=r(89781),a=r(30077),c=r(7195),u=r(65979),l=r(22677),d=r(75010),p=r(16260),f=r(73228),h=r(2906),g=r(79994),m=r(49411),v=r(81249),y=r(72639),_="<CreateNew>";async function S(e){if(!m.isAbsolute(e)){const r=i.workspace.workspaceFolders;if(r&&r.length>0){if(1===r.length)return m.join(r[0].uri.fsPath,e);for(var t=0;t<r.length;t++)if(e.startsWith(r[t].name+"/")){const n=m.join(r[t].uri.fsPath,e.substring(r[t].name.length+1));if(await(0,f.fileOrDirectoryExists)(n))return n}for(t=0;t<r.length;t++){const n=m.join(r[t].uri.fsPath,e);if(await(0,f.fileOrDirectoryExists)(n))return n}}}return e}async function w(e){const t=b(),r=new d.TelemetryActivity("open-solution",c.telemetryService),n=await P(),o=await async function(e,t=!1){const r=t?"**/*.{sln,slnx}":"**/*.sln";return await i.workspace.findFiles(r,"**/{node_modules,obj,bin}/**",e)}(void 0,n);if(o){if(1===o.length)return I(t),c.firstExplorerInteractionTelemetry?.addOrUpdateProperties({noSolution:"false"}),await T(e,o[0],t,r);if(o.length>1)return I(t),c.logger.log("More than one solution files in the workspace. Waiting for the developer to make a choice."),await async function(e){const t=await i.window.showInformationMessage(l.promptStrings.chooseProjectToOpen,l.promptStrings.chooseToOpen,l.promptStrings.doNotOpenSolution);if(t)return t===l.promptStrings.doNotOpenSolution&&t!==l.promptStrings.chooseToOpen?void await e.workspaceState.update("defaultSolution","disable"):await E(e)}(e);if(await C()){const n=i.workspace.workspaceFolders;if(n&&n.length>=1)return c.firstExplorerInteractionTelemetry?.addOrUpdateProperties({noSolution:"true"}),await T(e,_,t,r)}else c.logger.log("No C# project is found in the workspace.")}}async function E(e,t){const r=b(),n=new d.TelemetryActivity("open-solution",c.telemetryService);if(I(r),t)return c.firstExplorerInteractionTelemetry?.addOrUpdateProperties({noSolution:"false"}),await T(e,t,r,n);const o=await P(),s=await async function(e,t=!1){const r=t?"**/*.{sln,slnx,slnf}":"**/*.{sln,slnf}";return await i.workspace.findFiles(r,"**/{node_modules,obj,bin}/**",e)}(void 0,o);let a=!1;const u=i.workspace.workspaceFolders;if(!s)throw new Error("No workspace is opened");if(0===s.length){if(!(await C()&&u&&u.length>=1))throw new Error(l.errorStrings.noSolutionInWorkspace);t=_}else if(1===s.length&&".slnf"!==m.extname(s[0].toString()))t=s[0];else{let e;if(u&&1===u.length){const t=u[0].uri.fsPath;e=s.map((e=>m.relative(t,e.fsPath)))}else e=s.map((e=>e.fsPath));if(!(t=await i.window.showQuickPick(e.sort(),{placeHolder:l.chooseSolutionToOpen})))return;a=!0}return n.addOrUpdateProperties({showedSolutionPicker:String(a)}),e&&(c.firstExplorerInteractionTelemetry?.addOrUpdateProperties({noSolution:"true"}),(0,c.sendFirstInteractionWithExplorerTelemetry)()),await T(e,t,r,n)}function b(){const e=i.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");return e.exports.serviceBroker}async function P(e=void 0){const t=i.workspace.getConfiguration("dotnet").get("preview.enableSupportForSlnx",!1),r=v.parse(`${o.NET_SDK_VERSION_SUPPORTING_SLNX}`);if(!t||!r)return await i.commands.executeCommand("setContext","isSlnxSupported",!1),!1;if(e){if(await n(e))return await i.commands.executeCommand("setContext","isSlnxSupported",!0),!0}else if(i.workspace.workspaceFolders&&i.workspace.workspaceFolders.length>0)for(const e of i.workspace.workspaceFolders)if(await n(e.uri.fsPath))return await i.commands.executeCommand("setContext","isSlnxSupported",!0),!0;return await i.commands.executeCommand("setContext","isSlnxSupported",!1),!1;async function n(e){const t=await(c.dotnetVersionManager?.getDotnetVersion(e,c.logger));return(t&&t.compareMain(r)>=0)??!1}}async function T(e,r,o,d,f){if(c.environmentStateManager)return await c.environmentStateManager.runOperation((async()=>c.logger.watch("opening a solution",(()=>async function(e,r,o,d){d.start();try{if(c.environmentStateManager){const a="string"==typeof r?r===_?null:await S(r):r.fsPath,l=c.environmentStateManager.getOpenedSolution();if(l&&l.toLowerCase()===a?.toLowerCase())return void c.logger.log("Solution is already opened.");const w=e.workspaceState.get("configSetting",null),E=await c.logger.watch(null!==a?`processing the solution file "${a}" in Dev Kit server`:"collecting .csproj files in the workspace in Dev Kit Server",(async function(){if(c.environmentStateManager){c.environmentStateManager.getLatestEnvironmentState()&&await c.logger.watch("closing any previously opened solution",(async()=>await c.environmentStateManager.closeSolution()));const r=i.workspace.workspaceFolders;let u=[];if(r)for(let e=0;e<r?.length;e++){const t=r[e].uri;"file"===t.scheme&&t.fsPath&&u.push(t.fsPath)}0===u.length&&c.logger.log("Fail to locate workspace root folder.",s.LogImportance.high);let l,d=a??void 0;if(a?l=await c.environmentStateManager.setSolutionAndFolderWorkspace(a,u,w):(l=await async function(e,r,o,a){const u=i.workspace.getConfiguration("dotnet").get("previewSolution-freeWorkspaceMode",!1),l=i.workspace.getConfiguration("dotnet").get("automaticallyCreateSolutionInWorkspace",!0),d=new p.TelemetryEvent("generate-sln",c.telemetryService);d.addOrUpdateProperties({outside:String(!l)}),d.sendTelemetry();let f=null;return!u&&l||(f=e.storageUri?.fsPath??null,c.logger.log(`Generate solution file outside of the workspace at ${f}`,s.LogImportance.low)),u&&(new p.TelemetryEvent("sln-less-experience",c.telemetryService).sendTelemetry(),await async function(e){const t=function(e){let t=e;for(;;){const e=m.join(t,"global.json");if(n.existsSync(e))return e;const r=m.dirname(t);if(r===t)return;t=r}}((0,g.getActiveWorkspaceRoot)());if(t){c.logger.log(`global.json found at ${t}`);try{const r=m.join(e,"global.json");await n.promises.copyFile(t,r)}catch(e){c.logger.log(e)}}}(f),t.vscodeWorkspaceFileWatcher=new y.WorkspaceFileWatcher(e),e.subscriptions.push(t.vscodeWorkspaceFileWatcher)),await r.openNoSolutionWorkspace(o,f,a)}(e,c.environmentStateManager,u,w),f=l.containsTemporarySolutionFile),1===l.solutions.length&&(c.projectInitializationStatus&&(c.projectInitializationStatus.init(o).catch((e=>c.logger.log(e))),c.projectInitializationStatus.onEnvironmentUpdate(l.version,l.solutions.length,l.errors)),d=l.solutions[0],!f&&r)){let t=d;r.length>0&&(t=i.workspace.asRelativePath(t),"win32"!==process.platform||m.isAbsolute(t)||(t=t.replace(/\\/g,"/"))),e&&await e.workspaceState.update("defaultSolution",t)}return l}return null}),{telemetry:d}),P=1===E?.solutions.length?E.solutions[0]:void 0;if(P){await async function(){await i.commands.executeCommand("setContext","solutionOpened",!0),await i.commands.executeCommand("setContext","solutionExplorerVisible",!0),c.firstExplorerInteractionTelemetry&&await(0,h.autoExpandSolutionExplorerAsync)(),async function(){const e=c.environmentStateManager?.getLatestEnvironmentState();e&&await c.logger.watch("restoring NuGet packages",(async()=>{const t=b(),r=await t.getProxy(u.default.nugetSolutionRestoreService);r&&(r.setState(),e.projects.length>0&&await r.restoreSolution(),r.dispose())}),{catchUnhandledErrors:!0})}().catch()}();var v=c.environmentStateManager?.getLatestEnvironmentState()?.configuration;const e=w??"<Default>";c.logger.log(`Selected configuration: ${e}, active configuration: ${v}`)}return P}}catch(e){if(e instanceof Error&&r.toString().endsWith(".slnf"))return e.message.includes("JSON")?void i.window.showErrorMessage(l.errorStrings.openSolutionFilterFailed):void i.window.showErrorMessage(l.errorStrings.errorNoSolutionDectectedForFilter(r.toString()));throw await i.commands.executeCommand("setContext","solutionOpened",!1),new a.SolutionOpenError(l.errorStrings.errorDuringOpenSolution(e?.toString()))}finally{d.end(),d.sendTelemetry()}}(e,r,o,d)))));c.logger.log("Open solution missing environmentStateManager")}async function C(){const e=await i.workspace.findFiles("**/*.csproj","**/{node_modules,obj,bin}/**",1);return e&&e.length>0&&e[0]}function I(e){c.solutionExplorerProvider?c.solutionExplorerProvider.prepareOpenSolution():async function(e){try{const t=await e.getProxy(u.default.projectQueryExecutionService);t?.dispose()}catch(e){c.logger.log("Failed to get project service"+e)}}(e).catch((e=>{}))}t.openDefaultSolutionInWorkspace=async function(e,t){if(t){if("disable"===t)return void c.logger.log("Opening solution file is disabled in the current workspace.");let r=!0;if(".slnx"===m.extname(t)&&(await P()||(r=!1)),r){const r=b();if(I(r),t=await S(t),await(0,f.fileOrDirectoryExists)(t))try{const n=new d.TelemetryActivity("open-solution",c.telemetryService);return c.firstExplorerInteractionTelemetry?.addOrUpdateProperties({noSolution:"false"}),void await T(e,t,r,n,!0)}catch(r){c.logger.log(`Failed to open solution '${t}': ${r}`),await e.workspaceState.update("defaultSolution",void 0)}}}await w(e)},t.openDefaultSolution=w,t.default=E,t.isSlnxSupportedInWorkspace=P,t.closeSolution=async function(e){const r=new d.TelemetryActivity("close-solution",c.telemetryService);await c.logger.watch("Close a solution",(async function(){try{if(c.environmentStateManager){await c.logger.watch("Close a solution with environment service",(async function(){await c.environmentStateManager.closeSolution()}),{telemetry:r}),await e.workspaceState.update("defaultSolution","disable");const t=c.environmentStateManager.getLatestEnvironmentState();t&&c.projectInitializationStatus?.onEnvironmentUpdate(t.version,t.solutions.length,t.errors)}}catch(e){throw new a.SolutionCloseError(l.errorStrings.errorDuringCloseSolution(e?.toString()))}finally{r.end(),r.sendTelemetry(),t.vscodeWorkspaceFileWatcher?.dispose(),(0,c.sendFirstInteractionWithExplorerTelemetry)()}}),{importance:s.LogImportance.low,telemetry:r}),await i.commands.executeCommand("setContext","solutionOpened",!1)},t.reloadSolution=async function(e){c.logger.log("reload solution"),await c.logger.watch("Reload a solution",(async function(){try{c.environmentStateManager&&await c.logger.watch("Reload a solution with environment service",(async function(){const t=await c.environmentStateManager.loadSolution(e);c.projectInitializationStatus?.onEnvironmentUpdate(t.version,t.solutions.length,t.errors)}))}catch(e){throw new a.SolutionReloadError(l.errorStrings.errorDuringReloadSolution(e?.toString()))}}))},t.getOpenedSolution=async function(){return c.environmentStateManager?.getOpenedSolution()}},61120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7195),i=r(20695);t.default=async function(e){return e&&(0,n.sendFirstInteractionWithExplorerTelemetry)(),(0,i.setSolutionBuildAction)(new i.BuildActionOptions(i.BUILD,!0),e)}},82070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(7195),s=r(92181),a=r(74939),c=r(2906),u=r(22677);async function l(e){await n.window.showErrorMessage(u.errorStrings.removeOperationFailed(e))}t.default=async function(e){if(!n.extensions.getExtension(i.EXTENSION_ID))throw new Error("Unable to find the extension.");(e=e??await(0,c.getSelectedSolutionTreeNodeInExplorer)())&&e.node&&await n.window.showWarningMessage(u.promptStrings.removeItemConfirmation(e.node.Name),{modal:!0},u.promptStrings.ok)&&(e.node.NodeType===s.nodeTypes.file&&e.node.Flags?.includes(a.TreeFlags.linkedItem)?await async function(e){await o.logger.watch("Remove file from a project",(async()=>{const t={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"],$get:{Files:{$filter:{FilesByPath:[[e.node.Path]]},$properties:["Id","Path"]}}}},steps:["Exclude"]}},r=await o.projectQueryableSpace.executeAction(t);r.Errors&&(await l(e.node.Name),r.Errors.forEach((e=>{o.logger.log(e.Message)})))}),{catchUnhandledErrors:!0})}(e):await l(e.node.Name),e&&(0,o.sendFirstInteractionWithExplorerTelemetry)())}},10976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(7195),s=r(65979),a=r(98986),c=r(79994),u=r(16260),l=r(29047);t.default=async function(e){const t=n.extensions.getExtension(i.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");const r=t.exports.serviceBroker,d=a.NuGetAction.remove,p=new u.TelemetryEvent("nuget/remove-nuget-package",o.telemetryService);try{const t=(0,c.getActiveWorkspaceRoot)(),n=await(0,a.verifyServicePrerequisites)(d,t,r,p);if(!n||!n.isPrerequisiteMet)return void(0,l.cancelAtStepTelemetry)(p,"verify-prerequisites");const i=(0,a.getProjectFromContext)(e),u=(0,a.getPackageFromContext)(e);u?(0,l.addEntrypointTelemetry)(p,"package-dependency-context-menu"):(0,l.addEntrypointTelemetry)(p,"command-palette");const f=i??await(0,a.showProjectPicker)(d,p);if(!f)return void(0,l.cancelAtStepTelemetry)(p,"project-picker");const h=u??await(0,a.showPackagePickerFromPromise)(d,(0,a.retrieveInstalledPackages)(f.fullPath,r,p));if(!h)return void(0,l.cancelAtStepTelemetry)(p,"package-picker");await o.logger.watch("Remove NuGet package",(async function(){const e=await r.getProxy(s.default.nugetCommandsService);try{const t=await(0,l.runWithDurationTelemetry)((async()=>await(e?.removePackage(f.fullPath,h.id))),p,"removePackage");p.addOrUpdateProperties({succeeded:String(t)})}finally{e?.dispose(),(0,l.addCompletedTelemetry)(p)}}),{telemetry:p,catchUnhandledErrors:!0})}finally{p.sendTelemetry()}e&&o.sendFirstInteractionWithExplorerTelemetry}},6923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(7195),s=r(65979),a=r(22677),c=r(75010),u=r(2906);t.default=async function(e,t,r=!1){if(!(t=t??await(0,u.getSelectedSolutionTreeNodeInExplorer)())||!t.node)return;if(!r&&!await n.window.showWarningMessage(a.promptStrings.removeItemConfirmation(t.node.Name),{modal:!0},a.promptStrings.ok))return;const l=n.extensions.getExtension(i.EXTENSION_ID);if(!l)throw new Error("Unable to find the extension.");const d=l.exports.serviceBroker;await async function(e,t){const r=new c.TelemetryActivity("remove-project",o.telemetryService),n=await t.getProxy(s.default.solutionFileService);try{await o.logger.watch("Remove project",(async()=>{e.node.ProjectGuid&&await(n?.removeProject(e.node.ProjectGuid))}),{telemetry:r})}finally{n?.dispose(),r.end(),r.sendTelemetry()}}(t,d),t&&o.sendFirstInteractionWithExplorerTelemetry}},20481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeProjectReferenceByProjectPath=t.removeProjectReferenceByProjectGuid=void 0;const n=r(89496),i=r(7195),o=r(22677),s=r(75010),a=r(92181);async function c(e,t){const r={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e]]},$get:{ProjectReferences:{$where:{"==":[{".":"ReferencedProjectPath"},t]}}}}},steps:["Delete"]}},n=await i.projectQueryableSpace.executeAction(r);n.Errors&&n.Errors.forEach((e=>{i.logger.log(e.Message)}))}t.default=async function(e){let t;if(e?.contextValue===a.contextValues.project&&e.node.Path&&e.node.ProjectGuid&&(t={path:e.node.Path,label:e.node.Name,guid:e.node.ProjectGuid}),!t&&(t=await async function(){const e=await i.projectQueryableSpace.executeQuery({context:"Projects",query:{$properties:["Name","Path","Id"],$filter:{ProjectsByCapabilities:["!SharedAssetsProject"]}}});if(!e.Items?.length)return void n.window.showWarningMessage(o.errorStrings.addProjectReferenceNoProjects,{modal:!0});const t=e.Items.filter((e=>e.Path&&e.Name&&e.Id?.ProjectGuid)).map((e=>({path:e.Path,label:e.Name,guid:e.Id.ProjectGuid})));return t.sort(((e,t)=>e.label.localeCompare(t.label))),await n.window.showQuickPick(t,{placeHolder:o.promptStrings.selectSourceProject})}(),!t))return;const r=await async function(e){return await i.logger.watch("Get project to add reference to.",(async()=>{const t={context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e]]},$get:{ProjectReferences:{}},$properties:["Name","Path","Id"]}},r=await i.projectQueryableSpace.executeQuery(t);if(r.Items){const e=r.Items.map((e=>({path:e.ReferencedProjectPath,label:e.ReferencedProjectPath})));return 0===e.length?void n.window.showWarningMessage(o.errorStrings.removeProjectReferenceNoProjects,{modal:!0}):(e.sort(((e,t)=>e.label.localeCompare(t.label))),(await n.window.showQuickPick(e,{placeHolder:o.promptStrings.selectReferenceToRemove}))?.path)}}),{catchUnhandledErrors:!1})}(t.guid);if(!r)return;const u=new s.TelemetryActivity("remove-project-reference",i.telemetryService);try{await i.logger.watch("Remove project reference",(async()=>{await c(t.guid,r)}),{telemetry:u,catchUnhandledErrors:!1})}finally{u.end(),u.sendTelemetry()}e&&(0,i.sendFirstInteractionWithExplorerTelemetry)()},t.removeProjectReferenceByProjectGuid=c,t.removeProjectReferenceByProjectPath=async function(e,t){const r={update:{target:{context:"Projects",query:{$filter:{ProjectsByPath:[[e]]},$get:{ProjectReferences:{$where:{"==":[{".":"ReferencedProjectPath"},t]}}}}},steps:["Delete"]}},n=await i.projectQueryableSpace.executeAction(r);n.Errors&&n.Errors.forEach((e=>{i.logger.log(e.Message)}))}},84611:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(7195),s=r(65979),a=r(2906),c=r(22677);t.default=async function(e){const t=n.extensions.getExtension(i.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");if(!(e=e??await(0,a.getSelectedSolutionTreeNodeInExplorer)())||!e.node)return;if(!await n.window.showWarningMessage(c.promptStrings.removeItemConfirmation(e.node.Name),{modal:!0},c.promptStrings.ok))return;const r=t.exports.serviceBroker;await o.logger.watch("Remove a solution folder",(async function(){const t=await r.getProxy(s.default.solutionFileService);try{e.node.ProjectGuid&&await(t?.removeProject(e.node.ProjectGuid))}finally{t?.dispose()}}),{catchUnhandledErrors:!0}),e&&(0,o.sendFirstInteractionWithExplorerTelemetry)()}},61574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(7195),s=r(65979),a=r(92181),c=r(2906),u=r(79994),l=r(27619),d=r(71017),p=r(22677);function f(e){if(e)throw e.forEach((e=>{o.logger.log(e.Message)})),new Error}async function h(e){await n.window.showErrorMessage(p.errorStrings.renameOperationFailed(e))}t.default=async function(e){const t=n.extensions.getExtension(i.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");if(!(e=e??await(0,c.getSelectedSolutionTreeNodeInExplorer)())||!e.node)return;const r=t.exports.serviceBroker;var g=void 0;const m=e.node.Name.lastIndexOf(".");m>0&&(g=[0,m]);const v=await n.window.showInputBox({title:p.promptStrings.newName,value:e.node.Name,valueSelection:g,validateInput:async function(e){if(!e||0===e.length)return p.errorStrings.noName}});v&&v!==e.node.Name&&(e.node.NodeType===a.nodeTypes.project?await async function(e,t,r){if(!e.node.Path||!e.node.ProjectGuid)return void await h(e.node.Name);const n=t+d.extname(e.node.Path);try{await async function(e,t,r){const n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[t]]},$properties:["Id"]}},steps:[{RenameProject:{NewName:e}}]}};f((await r.executeAction(n)).Errors)}(t,e.node.ProjectGuid,o.projectQueryableSpace),await async function(e,t,r){await o.logger.watch("Rename Project in Solution File",(async function(){const n=await t.getProxy(s.default.solutionFileService);if(n)try{if(r.node.ProjectGuid&&r.node.Path){const t=d.dirname(r.node.Path),i=d.join(t,e),o=await u.getRelativePathToSolution(i);await(n?.moveProject(r.node.ProjectGuid,o))}}catch(e){throw o.logger.log(`Error renaming project in solution file with error: ${e}`),e}finally{n?.dispose()}}))}(n,r,e),await async function(e,t,r){const n={context:"Projects",query:{$properties:["Path"],ProjectReferences:{$properties:["ReferencedProjectPath"],$where:{"==":[{".":"ReferencedProjectPath"},t]}},$where:{any:{".":"ProjectReferences"}}}},i=await r.executeQuery(n);if(i.Items&&i.Items.length>0){const n=i.Items.filter((e=>e.Path)).map((e=>e.Path)),o=d.dirname(t),s={update:{target:{context:"Projects",query:{$properties:["Path"],$filter:{ProjectsByPath:[n]}}},steps:[{AddProjectReferenceByPath:{ReferenceType:"Reference",ReferencedProjectPath:d.join(o,e)}}]}};f((await r.executeAction(s)).Errors),await async function(e,t){const r={update:{target:{context:"Projects",query:{$get:{ProjectReferences:{$where:{"==":[{".":"ReferencedProjectPath"},t]}}}}},steps:["Delete"]}};f((await e.executeAction(r)).Errors)}(r,t)}}(n,e.node.Path,o.projectQueryableSpace)}catch(t){t instanceof Error&&o.logger.log(t.message),await h(e.node.Name)}}(e,v,r):e.parentNode&&e.parentNode.node.NodeType===a.nodeTypes.solutionFolder?await async function(e,t,r){const i=e.parentNode;i?await o.logger.watch("Rename a file in a solution folder",(async function(){const a=await r.getProxy(s.default.solutionFileService);if(a)try{const r=i.node.ProjectGuid;if(void 0!==r&&e.node.Path){const i=d.dirname(e.node.Path),o=await u.getRelativePathToSolution(e.node.Path),s=d.join(i,t),c=await u.getRelativePathToSolution(s);await(a?.removeSolutionItem(r,o));const l=new n.WorkspaceEdit;l.renameFile(n.Uri.file(e.node.Path),n.Uri.file(s)),await n.workspace.applyEdit(l),await(a?.addSolutionItem(r,c))}}finally{a?.dispose()}else await h(e.node.Name),o.logger.log("Error renaming item in Solution Folder with error: SolutionFileServiceProxy is null")}),{catchUnhandledErrors:!0}):await h(e.node.Name)}(e,v,r):e.node.NodeType===a.nodeTypes.file?await async function(e,t){await o.logger.watch("Rename file in project",(async()=>{const r=await(0,l.saveAndCloseFile)(e.node.Path),i={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"]}},steps:[{RenameFile:{FilePath:e.node.Path,NewName:t}}]}},s=await o.projectQueryableSpace.executeAction(i);if(s.Errors&&(await n.window.showErrorMessage(p.errorStrings.renameOperationFailed(e.node.Name)),s.Errors.forEach((e=>{o.logger.log(e.Message)}))),r){const r=d.join(d.dirname(e.node.Path),t);(0,l.openFileInWorkspace)(r)}}),{catchUnhandledErrors:!0})}(e,v):e.node.NodeType===a.nodeTypes.folder?await async function(e,t){await o.logger.watch("Rename folder in project",(async()=>{const r=await(0,l.saveAndCloseFilesInDirectory)(e.node.Path),n={update:{target:{context:"Projects",query:{$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$properties:["Id"]}},steps:[{RenameFolder:{FolderPath:e.node.Path,NewName:t}}]}},i=await o.projectQueryableSpace.executeAction(n);if(i.Errors&&(await h(e.node.Name),i.Errors.forEach((e=>{o.logger.log(e.Message)}))),r){const n=e.node.Path,i=d.join(d.dirname(n),t)+d.sep;for(const e of r){const t=e.replace(n,i);(0,l.openFileInWorkspace)(t)}}}),{catchUnhandledErrors:!0})}(e,v):h(e.node.Name),e&&(0,o.sendFirstInteractionWithExplorerTelemetry)())}},29235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(79994),s=r(7195),a=r(65979),c=r(22677),u=r(2906),l=r(1639);t.default=async function(e){const t=n.extensions.getExtension(i.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");if(!(e=e??await(0,u.getSelectedSolutionTreeNodeInExplorer)())||!e.node)return;const r=t.exports.serviceBroker,d=e.parentNode?await(0,l.getExistingChildrenNodesNames)(r,e.parentNode.node):[],p=(await n.window.showInputBox({title:c.promptStrings.newSolutionFolder,value:e.node.Name,validateInput:t=>(0,l.validateSolutionFolderName)(t,d,[],e.node.Name)}))?.trim();p&&p!==e.node.Name&&(await s.logger.watch("Rename a solution folder",(async function(){const t=await r.getProxy(a.default.solutionFileService);try{let r=e.node.ProjectGuid;r&&0!==r.length||(r=o.emptyGuid),e.node.ProjectGuid&&await(t?.renameSolutionFolder(e.node.ProjectGuid,p))}finally{t?.dispose()}}),{catchUnhandledErrors:!0}),e&&(0,s.sendFirstInteractionWithExplorerTelemetry)())}},69658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7195),i=r(92181),o=r(71017);function s(e,t){var s="";const a=r(22037).platform().toLowerCase().replace(/[0-9]/g,"").replace("darwin","macos");switch(a){case"win":s="explorer";break;case"linux":s="xdg-open";break;case"macos":s="open"}const c=r(32081);let u;switch(e){case i.nodeTypes.file:case i.nodeTypes.project:case i.nodeTypes.solution:u="win"===a?c.spawn(s,["/e,/select,",t]):"macos"===a?c.spawn(s,["-R",t]):c.spawn(s,[o.dirname(t)]);break;case i.nodeTypes.folder:"win"===a&&(t=t.substring(0,t.length-1)),u=c.spawn(s,[t]);break;default:u=c.spawn(s,[o.dirname(t)])}u.on("error",(e=>{n.logger.log(`Error executing Reveal In Explorer for ${t} ${e}`),u.kill()}))}t.default=async function(e){const t=e.node.Path;if(t){const o=r(57147);try{if(await o.promises.access(t),void 0!==e.contextValue)if(n.environmentStateManager?.isSolutionGeneratedOutsideWorkspace()&&e.contextValue===i.nodeTypes.solution){const t=n.environmentStateManager?.getActiveWorkspaceRoot();if(!t)return;s(e.contextValue,t)}else s(e.contextValue,t)}catch(e){return}}e&&(0,n.sendFirstInteractionWithExplorerTelemetry)()}},77855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(57147),i=r(89496),o=r(7195),s=r(65979),a=r(22677),c=r(16260),u=r(65300),l=r(79994),d=r(71017);t.default=async function(){const e=o.environmentStateManager?.getActiveWorkspace();if(!o.environmentStateManager?.isSolutionGeneratedOutsideWorkspace()||!e)return;const t=e.uri.fsPath,r=await async function(e){const t=[{label:a.addNewItemUiStrings.defaultDirectory,id:"default",description:e},{label:a.addNewItemUiStrings.chooseDirectory,id:"picker"}],r=await i.window.showQuickPick(t,{title:a.addNewItemUiStrings.locationForNewSolutionFile,placeHolder:e});if(!r)return;if("default"===r.id)return e;const n=await i.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:a.addNewItemUiStrings.projectLocation,defaultUri:i.Uri.file(e)});return n?n[0].fsPath:void 0}(t);if(!r)return;const p=await async function(e){const t=await(0,u.getOpenedSolution)(),r=d.parse(t).name;let o=(await i.window.showInputBox({title:a.addNewItemUiStrings.newSolutionFileName,value:r,validateInput:async function(t){return t&&0!==t.length?await async function(e,t){if(!e||0===e.length)return a.errorStrings.noName;for(const t of'"*<>:|?/\\')if(-1!==e.indexOf(t))return a.addNewItemUiStrings.pathInvalidChars;return e.length>50?a.addNewItemUiStrings.pathTooLong:n.existsSync(d.join(t,`${e}.sln`))?a.addNewItemUiStrings.solutionAlreadyExists:null}(t,e):a.addNewItemUiStrings.newSolutionFileName}}))?.trim();return o}(r);if(!p)return;const f=`${p}.sln`,h=l.getExtensionBrokerService(),g=await h.getProxy(s.default.solutionFileService);let m;try{m=await(g?.saveSolutionFileInWorkspace(t,r,f))}catch(e){i.window.showErrorMessage(a.errorStrings.errorSaveSolutionFile(e))}finally{g?.dispose()}if(!m||0===m.length)return;const v=o.environmentStateManager.getLatestEnvironmentState();await o.environmentStateManager.setSolutionAndFolderWorkspace(m,v.folders,v.configuration),u.vscodeWorkspaceFileWatcher?.dispose(),new c.TelemetryEvent("sln-less-solution-creation",o.telemetryService).sendTelemetry()}},92624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchFromCommandPalette=t.searchOpenFromCommandPalette=t.searchProjectFromCommandPalette=void 0;const n=r(89496);function i(e){n.commands.executeCommand("workbench.action.quickOpen",">"+e)}t.searchProjectFromCommandPalette=function(){i(".NET: Project")},t.searchOpenFromCommandPalette=function(){i(".NET: Open")},t.searchFromCommandPalette=function(){i(".NET:")}},95113:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(65979),s=r(7195),a=r(22677),c=r(7195);n.extensions.getExtension(i.EXTENSION_ID),t.default=async function(e){const t=c.environmentStateManager?.getLatestEnvironmentState()?.configuration;if(!t)return;const r=await async function(){const e=n.extensions.getExtension(i.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const t=e.exports.serviceBroker,r=await t.getProxy(o.default.solutionFileService);try{return await(r?.getSolutionConfigurations())}catch(e){return void s.logger.log(`Error fetching the solution configurations: ${e}`)}finally{r?.dispose()}}();if(r){const i=function(e){const t=new Set,r=new Set;return e.forEach((e=>{if(e){var n=e.split("|");n.length>=1&&t.add(n[0].trim()),n.length>=2&&r.add(n[1].trim())}})),{configurationNames:t,platformNames:r}}(r);let o=await n.window.showQuickPick(Array.from(i.configurationNames),{placeHolder:a.promptStrings.selectConfiguration});if(o){let r;if(i.platformNames.size>1){const e=await n.window.showQuickPick(Array.from(i.platformNames),{placeHolder:a.promptStrings.selectPlatform});e&&(r=e)}if(r=r||t.split("|")[1],o=`${o}|${r}`,t!==o){e.workspaceState.update("configSetting",o);const t="workbench.action.reloadWindow",r={title:a.promptStrings.reloadWindow,isCloseAffordance:!1};n.window.showInformationMessage(a.promptStrings.reloadOnConfigurationChange,r).then((e=>e===r&&n.commands.executeCommand(t)))}}}}},87211:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(22677),o=r(29758);t.default=async function(){n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience",!0)?(0,o.getActiveDebugTargetFrameworkService)().pickDebugTargetFramework():n.window.showErrorMessage(i.debugProjectLaunchStrings.errorImprovedLaunchExperienceNotEnabled)}},35199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(22677),o=r(58741);t.default=async function(){n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience",!0)?(0,o.getActiveLaunchConfigurationService)().pickLaunchConfiguration():n.window.showErrorMessage(i.debugProjectLaunchStrings.errorImprovedLaunchExperienceNotEnabled)}},49546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(17407),s=r(22677);t.default=async function(){if(!n.extensions.getExtension(i.EXTENSION_ID))throw new Error("Unable to find the extension.");n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience",!0)?o.startupProjectService.pickStartupProject():n.window.showErrorMessage(s.debugProjectLaunchStrings.errorImprovedLaunchExperienceNotEnabled)}},20695:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSolutionBuildAction=t.BuildActionOptions=t.SOLUTION_BUILD_AVAILABLE=t.solutionBuildContextVisible=t.NO_SOLUTION_BUILD_FLAG=t.CLEAN=t.BUILD=void 0;const n=r(89496),i=r(69279),o=r(49397),s=r(7195),a=r(75010),c=r(92181),u=r(65300);t.BUILD="build",t.CLEAN="clean",t.NO_SOLUTION_BUILD_FLAG="",t.solutionBuildContextVisible="solutionBuildContextVisible",t.SOLUTION_BUILD_AVAILABLE=!0;const l=new class{cachedPromise};t.BuildActionOptions=class{action;flag;noSolution;constructor(e,t){this.action=e,this.flag=t}},t.setSolutionBuildAction=async function(e,r){if(!n.extensions.getExtension(i.EXTENSION_ID))throw new Error("Unable to find the extension.");const d=await(0,u.getOpenedSolution)();e.noSolution=void 0===d;let p,f="string"==typeof r?r:r?.resourceUri?.fsPath;if(d&&void 0!==r&&"string"!=typeof r&&r.contextValue===c.contextValues.project&&!s.environmentStateManager?.isSolutionGeneratedOutsideWorkspace()){p=r.label?.toString();let e=r.parentNode;for(;e&&e.contextValue===c.contextValues.solutionFolder;)p=`${e.label}\\${p}`,e=e.parentNode;p=`/target:${p?.replace(/[%$@;.()']/g,"_")}`}if(!f){if(e.noSolution)return!1;f=d}return await async function(e,r,i,c){const u=new a.TelemetryActivity("invoke-solution-build",s.telemetryService);return u.start(),await s.logger.watch("Solution Build Action",(async()=>{try{if(void 0!==l.cachedPromise)return!1;t.SOLUTION_BUILD_AVAILABLE=!1,await n.commands.executeCommand("setContext",t.solutionBuildContextVisible,t.SOLUTION_BUILD_AVAILABLE),n.workspace.saveAll(!1);const s=await(0,o.dotnetSolutionBuildActionUsingTask)(e,r,i,c);return l.cachedPromise??=s.success,await l.cachedPromise}catch(e){return!1}finally{l.cachedPromise=void 0,t.SOLUTION_BUILD_AVAILABLE=!0,await n.commands.executeCommand("setContext",t.solutionBuildContextVisible,t.SOLUTION_BUILD_AVAILABLE),u.end(),u.sendTelemetry()}}))}(e.action,f,e.flag,p)}},1639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSolutionFolderName=t.getExistingChildrenNodesNames=void 0;const n=r(7195),i=r(65979),o=r(22677),s=r(73228),a=r(92181);t.getExistingChildrenNodesNames=async function(e,t){var r=[];return await n.logger.watch("Get existing items",(async function(){const n=await e.getProxy(i.default.solutionExplorerService);try{const e=t.NodeType===a.nodeTypes.solution?await(n?.getRootNodes()):await(n?.getChildrenNodes(t));e&&(r=e?.map((e=>e.Name)))}finally{n?.dispose()}}),{catchUnhandledErrors:!0}),r},t.validateSolutionFolderName=function(e,t,r,n){if(!e||0===e.length)return o.errorStrings.noName;if(e.length>260)return o.errorStrings.pathTooLong;for(const t of'"*<>:|?\\/')if(-1!==e.indexOf(t))return o.errorStrings.pathInvalidChars;if(r.includes(e))return o.errorStrings.solutionContainsItem(e);if(e=e.trim(),!n||!(0,s.equalsInvariantIgnoreCase)(n,e))for(const r of t)if((0,s.equalsInvariantIgnoreCase)(e,r))return o.errorStrings.folderContainsItem(e)}},79994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionBrokerService=t.updateDefaultName=t.calculateDefaultFolderName=t.doesSolutionContainProject=t.isWorkingDirectoryInWorkspace=t.getRelativePathToSolution=t.parseSolutionFolderFromContextMenu=t.getActiveWorkspaceRoot=t.addProjectToSolution=t.emptyGuid=void 0;const n=r(57147),i=r(89496),o=r(69279),s=r(49397),a=r(30077),c=r(7195),u=r(77867),l=r(22677),d=r(73228),p=r(92181),f=r(65300),h=r(71017);t.emptyGuid="00000000-0000-0000-0000-000000000000",t.addProjectToSolution=async function(e,t,r,n,o){try{n?await(0,u.dotnetCommand)(a.DotnetCommand.slnAddIntoFolder,e,["sln",t,"add",r,"--solution-folder",n]):o?await(0,u.dotnetCommand)(a.DotnetCommand.slnAdd,e,["sln",t,"add",r,"--in-root"]):await(0,u.dotnetCommand)(a.DotnetCommand.slnAdd,e,["sln",t,"add",r])}catch(e){if(!(e instanceof a.DotnetCommandError))throw e;t.endsWith(".slnx")&&i.window.showInformationMessage(l.promptStrings.addProjectIsNotSupportedForSlnx)}},t.getActiveWorkspaceRoot=function(){let e=c.environmentStateManager?.getActiveWorkspaceRoot();if(!e||!(0,n.existsSync)(e))throw new Error(l.errorStrings.noSolution);return e},t.parseSolutionFolderFromContextMenu=function(e){let t;return e?.contextValue===p.contextValues.solutionFolder&&(t=e.path),t},t.getRelativePathToSolution=async function(e){const t=await(0,f.getOpenedSolution)();if(t)return h.relative(h.dirname(t),e);throw new Error(l.errorStrings.noSolution)},t.isWorkingDirectoryInWorkspace=function(e){const t=(0,s.getOpenedWorkspaceHelper)(),r=t?.uri.fsPath,n=(0,d.containsFileOrFolder)(r,e);return n||i.window.showWarningMessage(l.errorStrings.addingOutsideWorkspace(e,r),{modal:!0}),n},t.doesSolutionContainProject=async function(e,t){const r=await(0,s.getAllProjects)(),n=r?.map((e=>e.Name)),o=void 0!==n?.find((t=>(0,d.equalsInvariantIgnoreCase)(t,e)));return o&&!t&&i.window.showWarningMessage(l.errorStrings.solutionContainsItem(e),{modal:!0}),o},t.calculateDefaultFolderName=function(e){const t="NewFolder";var r=[];if(e)for(const n of e)if((0,d.startsWithInvariantIgnoreCase)(n,t)){const e=n.substring(9),t=Number.parseInt(e);t&&t>=1&&r.push(t)}const n=r.sort();var i=1;for(const e of n)if(i===e)i++;else if(e>i)break;return`${t}${i}`},t.updateDefaultName=function e(t,r){return r.includes(t)?e("NewFolder"+(parseInt(t.substring(9))+1),r):t},t.getExtensionBrokerService=function(){const e=i.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension");return e.exports.serviceBroker}},34586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(65979),o=r(2906),s=r(79994),a=r(71017),c=r(7195);t.default=async function(e){const t=function(){const e=n.window.activeTextEditor?.document;return void 0!==e?.fileName?e.fileName:""}();let r;const u=c.environmentStateManager?.getOpenedSolutionExt();if(u&&a.extname(t)===u)r=[];else{const e=await async function(e){let t;t=".csproj"===a.extname(e)||".shproj"===a.extname(e)?{context:"Projects",query:{$properties:["Id","Path","Guid"],$filter:{ProjectsByPath:[[e]]}}}:{context:"Projects",query:{$properties:["Id","Files"],Files:{$properties:["Id"],$filter:{FilesByPath:[[e]]}},$where:{any:{".":"Files"}}}};const r=await c.projectQueryableSpace.executeQuery(t);return r.Items?.[0]}(t);if(!e)return;const n=s.getExtensionBrokerService(),o=await n.getProxy(i.default.solutionFileService);try{r=await(o?.findActiveItemGuidsPath(e.Id.ProjectGuid))}finally{o?.dispose()}}e?.isCancellationRequested||void 0===r||await(0,o.expandToLocation)(t,r,e)}},27619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openFileInWorkspace=t.saveAndCloseFilesInDirectory=t.saveAndCloseFile=void 0;const n=r(89496),i=r(71017),o=r(7195);async function s(e){try{await e.save()}catch{}let t=!1;for(;await a(e);)t=!0;return t}async function a(e){for(const t of n.window.tabGroups.all)for(const r of t.tabs)if(r.input instanceof n.TabInputText&&r.input.uri.fsPath===e.fileName)try{return await n.window.tabGroups.close(r),!0}catch{}return!1}t.saveAndCloseFile=async function(e){return!(!e||0===e.length)&&await o.logger.watch("Save and close opened files",(async()=>{const t=n.workspace.textDocuments.find((t=>t.fileName===e));return!(!t||!await s(t))}),{catchUnhandledErrors:!0})},t.saveAndCloseFilesInDirectory=async function(e){if(e&&0!==e.length)return await o.logger.watch("Save and close opended files in directory",(async()=>{let t=[];for(const i of n.workspace.textDocuments)r(i.fileName,e)&&await s(i)&&t.push(i.fileName);if(t.length>0)return t;function r(e,t){return e.length>=t.length&&!i.relative(t,e).startsWith("..")}}),{catchUnhandledErrors:!0})},t.openFileInWorkspace=async function(e){await o.logger.watch("Open file in workspace",(async()=>{const t=await n.workspace.openTextDocument(n.Uri.file(e));await n.window.showTextDocument(t)}),{catchUnhandledErrors:!0})}},85970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(89496),i=r(69279),o=r(7195),s=r(65979),a=r(98986),c=r(79994),u=r(16260),l=r(29047),d=r(39058);t.default=async function(e){const t=n.extensions.getExtension(i.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");const r=t.exports.serviceBroker,p=a.NuGetAction.update,f=new u.TelemetryEvent("nuget/update-nuget-package",o.telemetryService);try{const t=new d.NuGetConfigurationSettings;(0,l.addIncludePrereleaseTelemetry)(f,t.includePrerelease);const n=(0,c.getActiveWorkspaceRoot)(),i=await(0,a.verifyServicePrerequisites)(p,n,r,f);if(!i||!i.isPrerequisiteMet)return void(0,l.cancelAtStepTelemetry)(f,"verify-prerequisites");const u=(0,a.getProjectFromContext)(e),h=(0,a.getPackageFromContext)(e);h?(0,l.addEntrypointTelemetry)(f,"package-dependency-context-menu"):(0,l.addEntrypointTelemetry)(f,"command-palette");const g=u??await(0,a.showProjectPicker)(p,f);if(!g)return void(0,l.cancelAtStepTelemetry)(f,"project-picker");const m=h??await(0,a.showPackagePickerFromPromise)(p,(0,a.retrieveOutdatedPackages)(g.fullPath,t.includePrerelease,r,f),t);if(!m)return void(0,l.cancelAtStepTelemetry)(f,"package-picker");const v=await(0,a.showVersionPicker)(p,m,(0,a.retrievePackageVersions)(g.fullPath,m.id,t.includePrerelease,r,f),t);if(!v||v.version===m.version)return void(0,l.cancelAtStepTelemetry)(f,"version-picker");await o.logger.watch("Update NuGet package",(async function(){const e=await r.getProxy(s.default.nugetCommandsService);try{const t=await(0,l.runWithDurationTelemetry)((async()=>await(e?.updatePackage(g.fullPath,m.id,v.version))),f,"updatePackage");f.addOrUpdateProperties({succeeded:String(t)})}finally{e?.dispose(),(0,l.addCompletedTelemetry)(f)}}),{telemetry:f,catchUnhandledErrors:!0})}finally{f.sendTelemetry()}e&&(0,o.sendFirstInteractionWithExplorerTelemetry)()}},98349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePackageInfo=t.getPackageInfo=void 0;const n=r(71017),i=r(73292);t.getPackageInfo=async function(e){let t=null;try{t=await(0,i.readFile)(n.join(e,"package.json"),"utf-8")}catch{}let r=[];if(t){const e=JSON.parse(t);if(e.dependencies)for(const t in e.dependencies)r.push(s(t))}return r};const o=/^(?<name>.*?)(?:\.(?<target>\w+-\w+))?$/;function s(e){const t=o.exec(e);if(!t?.groups)throw new Error("Unrecognized package id pattern: "+e);return{fullName:e,name:t.groups.name,target:t.groups.target}}t.parsePackageInfo=s},93197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllComponentsMap=void 0;const n=r(73292),i=r(71017),o=r(98349);t.getAllComponentsMap=async function(e){const t=await async function(e){const t={},r=await(0,n.readdir)(e,{withFileTypes:!0});for(const s of r)if(s.isDirectory()){const a=i.join(e,s.name);if(await c(a),(await(0,n.readdir)(a)).indexOf("platforms")>=0){const u=i.join(a,"platforms"),l=await(0,n.readdir)(u,{withFileTypes:!0});for(const d of l)if(d.isDirectory()){const p=i.join(u,d.name);(await(0,n.readdir)(i.join(p))).indexOf("node_modules")>=0&&await c(i.join(u,d.name))}}async function c(e){const r=await(0,o.getPackageInfo)(e);for(const n of r)t[n.name]=i.resolve(e,"node_modules",n.fullName)}}return t}(e),r=await async function(e){try{const t=await(0,n.readFile)(i.join(e,"package.dev.json"),"utf-8"),r=JSON.parse(t),s={};if(r.dependencies)for(const t in r.dependencies)s[(0,o.parsePackageInfo)(t).name]=i.resolve(e,r.dependencies[t]);return s}catch{return{}}}(e);return Object.freeze({...t,...r})}},29758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveDebugTargetFrameworkService=t.setupActiveDebugTargetFrameworkService=t.ActiveDebugTargetFrameworkService=void 0;const n=r(89496),i=r(48182),o=r(22677),s=r(17407);class a{debugTargetFrameworkInfoObserver;startupProjectLaunchInfo;targetFrameworkInfos;currentStartupProjectDebugTargetFrameworkInfo;observers;unsubscribeFromStartupProjectObservable;unsubscribeFromDebugTargetFrameworkInfoObserver;constructor(e,t){this.debugTargetFrameworkInfoObserver=t,this.startupProjectLaunchInfo=void 0,this.targetFrameworkInfos=[],this.observers=[],this.unsubscribeFromStartupProjectObservable=e.subscribe(this.startupProjectObserver),this.unsubscribeFromDebugTargetFrameworkInfoObserver=t.subscribe(this.targetFrameworkInfoObserver)}dispose(){this.unsubscribeFromStartupProjectObservable(),this.unsubscribeFromDebugTargetFrameworkInfoObserver()}subscribe(e){return this.observers.push(e),e.onNext(this.currentStartupProjectDebugTargetFrameworkInfo),()=>{this.observers=this.observers.filter((t=>t!==e))}}async pickDebugTargetFramework(){if(!this.startupProjectLaunchInfo)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoStartupProjectSelected);if(!this.currentStartupProjectDebugTargetFrameworkInfo)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoTargetFrameworksAvailable);const e=await n.window.showQuickPick(this.currentStartupProjectDebugTargetFrameworkInfo.availableTargetFrameworks.map((e=>new u(e))),{title:o.debugProjectLaunchStrings.selectLaunchTargetFramework});if(e){this.debugTargetFrameworkInfoObserver.setDebugTargetFrameworkInfo(this.startupProjectLaunchInfo.fullPath,e.info.framework),this.currentStartupProjectDebugTargetFrameworkInfo.debugTargetFramework=e.info.framework;for(const e of this.observers)e.onNext(this.currentStartupProjectDebugTargetFrameworkInfo)}}getCurrentProjectTargetFrameworkInfo(){return this.currentStartupProjectDebugTargetFrameworkInfo}onNextStartupProject(e){this.startupProjectLaunchInfo=e,this.handleNewState()}onNextDebugTargetFrameworkInfos(e){this.targetFrameworkInfos=e,this.handleNewState()}handleNewState(){let e;if(e=this.startupProjectLaunchInfo?this.targetFrameworkInfos.find((e=>e.fullPath===this.startupProjectLaunchInfo.fullPath)):void 0,e!==this.currentStartupProjectDebugTargetFrameworkInfo){this.currentStartupProjectDebugTargetFrameworkInfo=e;for(const e of this.observers)e.onNext(this.currentStartupProjectDebugTargetFrameworkInfo)}}handleObservableCompletion(){for(const e of this.observers)e.onCompleted();this.observers=[]}handleObservableError(e){for(const t of this.observers)t.onError(e);this.observers=[]}startupProjectObserver=new class{service;constructor(e){this.service=e}onNext(e){this.service.onNextStartupProject(e)}onCompleted(){this.service.handleObservableCompletion()}onError(e){this.service.handleObservableError(e)}}(this);targetFrameworkInfoObserver=new class{service;constructor(e){this.service=e}onNext(e){this.service.onNextDebugTargetFrameworkInfos(e)}onCompleted(){this.service.handleObservableCompletion()}onError(e){this.service.handleObservableError(e)}}(this)}let c;t.ActiveDebugTargetFrameworkService=a,t.setupActiveDebugTargetFrameworkService=function(e){if(!c){const t=s.startupProjectService,r=(0,i.getDebugTargetFrameworkInfoObserver)(),n=new a(t,r);e.subscriptions.push(n),c=n}},t.getActiveDebugTargetFrameworkService=function(){if(!c)throw new Error("ActiveDebugTargetFrameworkService has not been initialized");return c};class u{info;label;constructor(e){this.info=e,this.label=e.displayName}}},58741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveLaunchConfigurationService=t.setupActiveLaunchConfigurationService=t.LaunchConfigurationQuickPick=t.ActiveLaunchConfigurationService=void 0;const n=r(89496),i=r(49230),o=r(22677),s=r(17407),a=r(98455);class c{name;items;constructor(e,t){this.name=e,this.items=t}}class u{projectStateObserver;startupProjectService;constructor(e,t){this.projectStateObserver=e,this.startupProjectService=t}dispose(){this.startupProjectService?.dispose(),this.projectStateObserver?.dispose()}async pickLaunchConfiguration(){const e=await this.startupProjectService.getOrPickCurrentStartupProject();if(!e)return;const t=this.projectStateObserver.getCurrentProjects().find((t=>t.fullPath===e.fullPath));if(!t)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorStartupProjectNotFound);const r=this.createQuickPickItems(t),i=await n.window.showQuickPick(r,{title:o.debugProjectLaunchStrings.selectLaunchConfiguration});return i?(await this.projectStateObserver.setActiveLaunchConfiguration(e.fullPath,i.info.id),i.info.id):void 0}createQuickPickItems(e){const t=[new c("",[])];return e.launchConfigurations.reduce(((e,t)=>{const r=t.groupDisplayName||"";let n=e.find((e=>e.name===r));return n||(n=new c(r,[]),e.push(n)),n.items.push(t),e}),t).flatMap((e=>{let t=[];return""!==e.name&&t.push({label:e.name,kind:n.QuickPickItemKind.Separator}),e.items.forEach((e=>{t.push(new l(e))})),t}))}async getLaunchConfiguration(){const e=await this.startupProjectService.getCurrentStartupProject();if(!e)return;const t=this.projectStateObserver.getCurrentProjects().find((t=>t.fullPath===e.fullPath));return t?t.activeLaunchConfigurationId:void 0}}t.ActiveLaunchConfigurationService=u;class l{info;label;description;detail;iconPath;constructor(e){this.info=e,this.label=e.displayName,this.description=e.description,this.detail=e.details,this.iconPath=(0,a.getIconPath)(e.icon)}}let d;t.LaunchConfigurationQuickPick=l,t.setupActiveLaunchConfigurationService=function(e){if(!d){const t=(0,i.getLaunchableProjectInfoObserver)(),r=new u(t,s.startupProjectService);e.subscriptions.push(r),d=r}},t.getActiveLaunchConfigurationService=function(){if(!d)throw new Error("ActiveLaunchConfigurationService has not been initialized");return d}},48182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupDebugTargetFrameworkInfoObserver=t.getDebugTargetFrameworkInfoObserver=t.DebugTargetFrameworkInfoObserver=void 0;const n=r(65979),i=r(3187),o=r(7195);class s extends i.Observer{projects;isSubscribed;debugTargetFrameworkService;observers;constructor(){super((()=>this.onNext)),this.projects=[],this.isSubscribed=!1,this.observers=[]}dispose(){this.debugTargetFrameworkService?.dispose()}subscribe(e){return this.observers.push(e),e.onNext(this.projects),()=>{this.observers=this.observers.filter((t=>t!==e))}}async subscribeToTargetFrameworkService(e){let t;try{const r=await e.serviceBroker.getProxy(n.default.debugTargetFrameworkService);if(!r)throw new Error("Could not get the IDebugTargetFrameworkService proxy to call subscribe.");t=await r.subscribe(this),this.isSubscribed=!0,this.debugTargetFrameworkService=r}catch(e){this.isSubscribed=!1}return t}async setDebugTargetFrameworkInfo(e,t,r){if(!this.isSubscribed)throw new Error("DebugTargetFrameworkInfoObserver has not been subscribed to an IDebugTargetFrameworkService");return await this.debugTargetFrameworkService.setDebugTargetFramework(e,t)}getCurrentProjects(){if(!this.isSubscribed)throw new Error("DebugTargetFrameworkInfoObserver has not been subscribed to an IDebugTargetFrameworkService");return this.projects}onNext(e){this.projects=e;for(const t of this.observers)t.onNext(e)}onCompleted(){this.debugTargetFrameworkService?.dispose();for(const e of this.observers)e.onCompleted();this.observers=[]}}let a,c,u;async function l(e,t,r){c=await t.serviceBroker.getProxy(n.default.projectInitializationStatusService),c?(u=new i.Observer((n=>{!async function(e,t,r){const n=await r.subscribeToTargetFrameworkService(t);n&&e.subscriptions.push(n)}(e,t,r)}),(e=>{e&&o.logger.log(e)})),await c.subscribeInitializationCompletion(u)):o.logger.log("Failed to obtain IProjectInitializationStatusService proxy")}t.DebugTargetFrameworkInfoObserver=s,t.getDebugTargetFrameworkInfoObserver=function(){if(!a)throw new Error("DebugTargetFrameworkInfoObserver has not been initialized");return a},t.setupDebugTargetFrameworkInfoObserver=function(e,t){if(!a){let r=new s;t.hasServerProcessLoaded()?l(e,t,r):t.serverProcessLoaded((async()=>l(e,t,r))),a=r}}},66862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DotnetDynamicConfigurationProvider=void 0;const n=r(89496),i=r(7195),o=r(65979),s=r(6315),a=r(22677),c=r(75010),u=r(73228),l=r(81433),d=r(81249),p=r(71017);class f{info;label;description;constructor(e){this.info=e,this.label=e.displayName,this.description=e.fullPath}}class h{brokeredServiceHost;projectStateObserver;static type="dotnet";launchConfigurationService;constructor(e,t){this.brokeredServiceHost=e,this.projectStateObserver=t,this.launchConfigurationService=(0,u.lazyPromiseLambda)((()=>this.initLaunchConfigurationServiceProxy()))}async dispose(){(await this.launchConfigurationService)?.dispose(),this.projectStateObserver?.dispose()}async provideDebugConfigurations(e,t){const r=new c.TelemetryActivity("DotnetDynamicConfigurationProvider/provideDebugConfigurations",i.telemetryService);try{if(await this.launchConfigurationService){if(n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience",!0)){let e=[];if(this.projectStateObserver.getCurrentProjects().length>0){let t={name:a.debugProjectLaunchStrings.startupProjectLaunchConfigName,type:h.type,request:"launch"};e.push(t)}return e}{let t=0,n=[];if(e?.uri?.fsPath&&this.projectStateObserver){const r=e.uri.fsPath.replace(/[\\/]+/g,"/"),i=this.projectStateObserver.getCurrentProjects();for(let e of i){let i=e.fullPath;const o=i.replace(/[\\/]+/g,"/"),s=i.includes("/")?"/":"\\";if(o.startsWith(r+"/"))i="${workspaceFolder}"+i.substring(r.length);else{let e=p.relative(r,i);e?i="${workspaceFolder}"+s+e:t++}n=n.concat(this.createDebugConfigurations(e.displayName,i,e.launchConfigurations))}}return 0===n.length&&0===t||(r.addOrUpdateMeasurements({generatedConfigurationCount:n.length,ignoredProjectCount:t}),r.sendTelemetry()),n}}}catch(e){let t="";"string"==typeof e?t=e.toUpperCase():e instanceof Error&&(t=e.message),r.addOrUpdateProperties({succeeded:"false"}),r.sendTelemetry(),n.window.showErrorMessage(`${l.errorStrings.failProvideDebugConfigurations}${t}`)}return[]}async resolveDebugConfiguration(e,t,r){return void 0===t.type?this.runAndDebug(t,r):t}static configurationPrefix="C#: ";static createDebugConfigurationName(e){return`${h.configurationPrefix}${e}`}createDebugConfigurations(e,t,r){let n=[];r.length>1&&n.push(this.createDebugConfiguration(h.createDebugConfigurationName(`${e} [Default Configuration]`),t,void 0));for(let i of r){const o=h.createDebugConfigurationName(`${e}${r.length>1?` [${i.displayName}]`:""}`);n.push(this.createDebugConfiguration(o,t,i.id))}return n}createDebugConfiguration(e,t,r){let n={name:e,type:h.type,request:"launch",projectPath:t};return r&&(n.launchConfigurationId=r),n}async runAndDebug(e,t){const r=new c.TelemetryActivity("runAndDebug",i.telemetryService),u=await this.brokeredServiceHost.serviceBroker.getProxy(o.default.dotnetDebugConfigurationService);try{if(!u)throw r.addOrUpdateProperties({succeeded:String(!1)}),r.sendTelemetry(),new Error;{const i=this.projectStateObserver.getCurrentProjects();if(!(i&&i.length>0))throw r.addOrUpdateProperties({succeeded:String(!1)}),r.sendTelemetry(),new Error;if(d.compareIdentifiers(n.version,"1.89.0")>=0)return void await n.commands.executeCommand("workbench.action.debug.selectandstart",h.type,{noDebug:e.noDebug});{let o;if(1===i.length&&1===i[0]?.launchConfigurations?.length)o=i[0];else{const e=await n.window.showQuickPick(i.map((e=>new f(e))),{title:a.debugProjectLaunchStrings.selectProject});if(!e)return void n.window.showWarningMessage(a.debugProjectLaunchStrings.warnNoProjectSelected);o=e.info}if(o){const n=await u.resolveDebugConfigurationWithLaunchConfigurationService(o.fullPath,{...e,name:h.createDebugConfigurationName(o.displayName),request:"launch",type:"dotnet",launchConfigurationId:o.activeLaunchConfigurationId},t),i=s.IDotnetDebugConfigurationServiceResultResolver.resolve(n);return i?(r.addOrUpdateProperties({succeeded:String(!0)}),r.sendTelemetry(),i):void 0}}}}catch(e){const t={title:a.promptStrings.moreInformation};n.window.showErrorMessage(a.debugProjectLaunchStrings.errorNoProjectFound,t).then((async e=>{if(e===t){const e="https://aka.ms/vscode/dotnet/debug";n.env.openExternal(n.Uri.parse(e))}}))}finally{u?.dispose()}}async initLaunchConfigurationServiceProxy(){const e=await this.brokeredServiceHost.serviceBroker.getProxy(o.default.launchConfigurationService);if(!e)throw new Error("Could not get the ILaunchConfigurationService proxy.");return e}}t.DotnetDynamicConfigurationProvider=h},37224:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareHotReload=t.hotReloadTracker=t.HotReloadTracker=void 0;const n=r(69279),i=r(65979),o=r(57787),s=r(42300),a=r(66716),c=r(50979),u=r(28457),l=r(22677),d=r(89496),p=r(24138);class f{hotReloadIcon;initialized=!1;enabled=!1;hasPossibleChange=!1;onChangeListener;onSaveListener;async startHotReload(e,t){await this.onHotReloadAvailabilityChanged(e,t)}async onHotReloadAvailabilityChanged(e,t){let r;switch(e.status){case o.ManagedHotReloadAvailabilityStatus.available:return void this.enable();case o.ManagedHotReloadAvailabilityStatus.disabled:r=l.hotReloadStrings.disabledInSettingsStatus;break;default:r=l.hotReloadStrings.notSupportedForSessionStatus}this.disable(r);let n=l.hotReloadStrings.disabledResult;null!==e.localizedMessage&&(n+=" "+e.localizedMessage),await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.minimal,n))}async endHotReload(e){await d.commands.executeCommand("setContext","hotReloadEnabled",!1),this.hotReloadIcon?.hide(),this.enabled=!1,this.onChangeListener?.dispose(),this.onSaveListener?.dispose(),this.onChangeListener=void 0,this.onSaveListener=void 0}async reportHotReloadResult(e){let t=null,r=!0;switch(e){case u.HotReloadResult.applyUpdatesFailure:t=l.hotReloadStrings.applyUpdatesFailureResult;break;case u.HotReloadResult.errorEdits:case u.HotReloadResult.restartRequired:break;case u.HotReloadResult.noChanges:this.hasPossibleChange=!1,r=!1;break;case u.HotReloadResult.applied:case u.HotReloadResult.partiallyApplied:this.hasPossibleChange=!1}null!==t&&await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.minimal,t)),r&&(0,a.showHotReloadPanel)()}hasPossibleChanges(){return this.hasPossibleChange}initialize(){this.initialized||(this.hotReloadIcon=function(){const e=d.window.createStatusBarItem("csdevkit.hotreload",d.StatusBarAlignment.Right,1);return e.text="$(flame)",e.command=p.showHotReloadPanel,e}(),this.initialized=!0)}async enable(){this.enabled||(await d.commands.executeCommand("setContext","hotReloadEnabled",!0),this.enabled=!0),this.initialize(),this.onChangeListener||(this.onChangeListener=d.workspace.onDidChangeTextDocument((e=>this.onPossibleChange(e))),this.onSaveListener=d.workspace.onWillSaveTextDocument((e=>this.applyOnSave(e)))),this.hotReloadIcon.show(),this.hotReloadIcon.tooltip=l.hotReloadStrings.availableStatus}async disable(e){this.enabled&&(await d.commands.executeCommand("setContext","hotReloadEnabled",!1),this.enabled=!1),this.hotReloadIcon.tooltip=e}async applyOnSave(e){if(this.enabled&&c.hotReloadOptionService.getIsHotReloadOnSave()&&e.reason===d.TextDocumentSaveReason.Manual)return(0,a.hotReload)()}async onPossibleChange(e){if(!this.enabled||this.hasPossibleChange)return;if("csharp"!==e.document.languageId)return;if(0===e.contentChanges.length)return;const t=d.extensions.getExtension(n.EXTENSION_ID);if(!t)throw new Error("Unable to find the extension.");const r=t.exports.serviceBroker,o=await r.getProxy(i.default.hotReloadService);null!==o&&(this.hasPossibleChange=!0,await o.onChanges()),await s.hotReloadLogger.log(new s.HotReloadLogMessage(s.HotReloadVerbosity.minimal,l.hotReloadStrings.changesDetected))}}t.HotReloadTracker=f,t.hotReloadTracker=new f,t.prepareHotReload=async function(e){e.subscriptions.push(d.commands.registerCommand(p.hotReload,a.hotReload)),e.subscriptions.push(d.commands.registerCommand(p.showHotReloadPanel,a.showHotReloadPanel)),(0,c.listenToHotReloadConfigUpdates)()}},98455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIconPath=void 0;const n=r(89496),i=r(26199),o=/^catalog:\/\/(.+):(.+)/,s=/^icon:\/\/(.+)/;t.getIconPath=function(e){if(!e)return;const t=o.exec(e);if(t){let e=(0,i.getImageCatalog)();if(e){let r=t[1],i=parseInt(t[2]),o=e.getIcon(r,i);if(o)return{light:n.Uri.file(o.light),dark:n.Uri.file(o.dark)}}return}const r=s.exec(e);return r?new n.ThemeIcon(r[1]):void 0}},21232:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupLanguageStatusItems=void 0;const n=r(89496),i=r(17407),o=r(22677),s=r(24138),a=r(29758);class c{id;name;commandId;title;tooltip;initialText;documentSelectors=[];languageStatusItems=[];constructor(e,t,r,n,i,o){this.id=e,this.name=t,this.commandId=r,this.title=n,this.tooltip=i,this.initialText=o,this.documentSelectors=this.getDefaultDocumentSelectors()}getDefaultDocumentSelectors(){let e=[];return e.push({language:"csharp",pattern:"**/*.cs"}),e.push({language:"XAML",pattern:"**/*.xaml"}),e.push({language:"xml",pattern:"**/*.{csproj,xml,plist}"}),e.push({language:"plaintext",pattern:"**/*.{sln, slnx}"}),e.push({language:"css",pattern:"**/*.css"}),e.push({language:"aspnetcorerazor",pattern:"**/*.razor"}),e}deactivate(){this.languageStatusItems.forEach((e=>{e.dispose()})),this.languageStatusItems=[]}activate(){this.deactivate();const e={title:this.title,tooltip:this.tooltip,command:this.commandId};let t=0;this.documentSelectors.forEach((r=>{const n=`${this.id}.${t}}`,i=this.createLanguageStatusItem(n,this.name,r,e,this.initialText);this.languageStatusItems.push(i),t++}))}updateStatus(e){this.initialText=e,this.languageStatusItems.forEach((t=>{t.text=e??this.initialText}))}createLanguageStatusItem(e,t,r,i,o){let s=n.languages.createLanguageStatusItem(e,r);return s.name=t,s.command=i,s.text=o,s}setBusy(e){this.languageStatusItems.forEach((t=>{t.busy=e}))}setSeverity(e){this.languageStatusItems.forEach((t=>{t.severity=e}))}setCommand(e,t,r=void 0){this.commandId=e,this.tooltip=t,r&&(this.title=r);const n={title:this.title,tooltip:this.tooltip,command:this.commandId};this.languageStatusItems.forEach((e=>{e.command=n}))}}class u{languageStatusItem;unsubscribe;constructor(e){this.languageStatusItem=new c("csdevkit.debug.selectStartupProjectLanguageStatusItem",o.debugProjectLaunchStrings.selectStartupProject,s.selectStartupProject,o.debugProjectLaunchStrings.startupProjectTitle,o.debugProjectLaunchStrings.startupProjectTooltip,o.debugProjectLaunchStrings.noProjectPlaceholder),this.unsubscribe=e.subscribe(this),this.languageStatusItem.activate()}dispose(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),this.languageStatusItem?.deactivate(),this.languageStatusItem=void 0}onNext(e){e?this.languageStatusItem?.updateStatus(e.displayName):this.languageStatusItem?.updateStatus(o.debugProjectLaunchStrings.noProjectPlaceholder)}onCompleted(){}onError(e){}}class l{languageStatusItem;unsubscribe;constructor(e){this.languageStatusItem=new c("csdevkit.debug.selectTargetFrameworkLanguageStatusItem",o.debugProjectLaunchStrings.selectLaunchTargetFramework,s.selectLaunchTargetFramework,o.debugProjectLaunchStrings.debugTargetFrameworkTitle,o.debugProjectLaunchStrings.debugTargetFrameworkTooltip,o.debugProjectLaunchStrings.noProjectPlaceholder),this.unsubscribe=e.subscribe(this),this.languageStatusItem.activate()}dispose(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),this.languageStatusItem?.deactivate(),this.languageStatusItem=void 0}onNext(e){e?this.languageStatusItem?.updateStatus(e.debugTargetFramework??o.debugProjectLaunchStrings.noProjectPlaceholder):this.languageStatusItem?.updateStatus(o.debugProjectLaunchStrings.noProjectPlaceholder)}onCompleted(){}onError(e){}}class d{languageStatusItem;unsubscribe;constructor(e){this.languageStatusItem=new c("csdevkit.debug.selectLaunchConfigurationLanguageStatusItem",o.debugProjectLaunchStrings.selectLaunchConfiguration,s.selectLaunchConfiguration,o.debugProjectLaunchStrings.launchConfigurationTitle,o.debugProjectLaunchStrings.launchConfigurationTooltip,o.debugProjectLaunchStrings.noProjectPlaceholder),this.unsubscribe=e.subscribe(this),this.languageStatusItem.activate()}dispose(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),this.languageStatusItem?.deactivate(),this.languageStatusItem=void 0}onNext(e){if(e){let t=e.launchConfigurations.find((t=>t.id===e.activeLaunchConfigurationId));t?this.languageStatusItem?.updateStatus(t.displayName):this.languageStatusItem?.updateStatus(o.debugProjectLaunchStrings.noProjectPlaceholder)}else this.languageStatusItem?.updateStatus(o.debugProjectLaunchStrings.noProjectPlaceholder)}onCompleted(){}onError(e){}}t.setupLanguageStatusItems=function(e){let t=(0,a.getActiveDebugTargetFrameworkService)(),r=new u(i.startupProjectService);e.subscriptions.push(r);let n=new l(t);e.subscriptions.push(n);let o=new d(i.startupProjectService);e.subscriptions.push(o)}},49230:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupLaunchableProjectInfoObserver=t.getLaunchableProjectInfoObserver=t.LaunchableProjectInfoObserver=void 0;const n=r(65979),i=r(3187);class o extends i.Observer{projects;isSubscribed;launchConfigurationService;observers;constructor(){super((()=>this.onNext)),this.projects=[],this.isSubscribed=!1,this.observers=[]}dispose(){this.launchConfigurationService?.dispose()}subscribe(e){return this.observers.push(e),e.onNext(this.projects),()=>{this.observers=this.observers.filter((t=>t!==e))}}async subscribeToLaunchConfigurationService(e){let t;try{const r=await e.serviceBroker.getProxy(n.default.launchConfigurationService);if(!r)throw new Error("Could not get the ILaunchConfigurationService proxy to call subscribe.");t=await r.subscribe(this),this.isSubscribed=!0,this.launchConfigurationService=r}catch(e){this.isSubscribed=!1}return t}async setActiveLaunchConfiguration(e,t,r){if(!this.isSubscribed)throw new Error("LaunchableProjectInfoObserver has not been subscribed to an ILaunchConfigurationService");return await this.launchConfigurationService.setActiveLaunchConfiguration(e,t,r)}getCurrentProjects(){if(!this.isSubscribed)throw new Error("LaunchableProjectInfoObserver has not been subscribed to an ILaunchConfigurationService");return this.projects}onNext(e){this.projects=e;for(const t of this.observers)t.onNext(e)}onCompleted(){this.launchConfigurationService?.dispose();for(const e of this.observers)e.onCompleted();this.observers=[]}}let s;async function a(e,t,r){const n=await r.subscribeToLaunchConfigurationService(t);n&&e.subscriptions.push(n)}t.LaunchableProjectInfoObserver=o,t.getLaunchableProjectInfoObserver=function(){if(!s)throw new Error("LaunchableProjectInfoObserver has not been initialized");return s},t.setupLaunchableProjectInfoObserver=function(e,t){if(!s){let r=new o;t.hasServerProcessLoaded()?a(e,t,r):t.serverProcessLoaded((async()=>a(e,t,r))),s=r}}},17407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeStartupProjectService=t.startupProjectService=t.StartupProjectService=void 0;const n=r(89496),i=r(49230),o=r(22677),s=r(98455);class a{projectStateObserver;storage;unsubscribeFromProjectStateObserver;constructor(e,t,r){this.projectStateObserver=e,this.storage=t,this.unsubscribeFromProjectStateObserver=r}}class c{state;startupProject;observers;startupProjectStorageKey="csdevkit.debug.startupProject";constructor(){this.observers=[]}initialize(e,t){if(this.state)throw new Error("StartupProjectService is already initialized");this.state=new a(e,t,void 0),this.state.unsubscribeFromProjectStateObserver=e.subscribe(this)}subscribe(e){return this.observers.push(e),e.onNext(this.startupProject),()=>{this.observers=this.observers.filter((t=>t!==e))}}onNext(e){if(!this.state)throw new Error("StartupProjectService has not been initialized");let t;if(this.startupProject&&(t=e.find((e=>e.fullPath===this.startupProject?.fullPath))),!t){let r=this.state.storage.get(this.startupProjectStorageKey);r&&(t=e.find((e=>e.fullPath===r)))}this.startupProject=t;for(const e of this.observers)e.onNext(this.startupProject)}onCompleted(){if(!this.state)throw new Error("StartupProjectService has not been initialized");for(const e of this.observers)e.onCompleted();this.observers=[]}onError(e){if(!this.state)throw new Error("StartupProjectService has not been initialized");for(const t of this.observers)t.onError(e);this.observers=[]}dispose(){this.state&&(this.state.unsubscribeFromProjectStateObserver&&this.state.unsubscribeFromProjectStateObserver(),this.state.projectStateObserver.dispose(),this.state=void 0)}async pickStartupProject(){if(!this.state)throw new Error("StartupProjectService has not been initialized");let e=this.state.projectStateObserver.getCurrentProjects();if(0===e.length)return void n.window.showErrorMessage(o.debugProjectLaunchStrings.errorNoLaunchableProjects);const t=await n.window.showQuickPick(e.map((e=>new u(e))),{title:o.debugProjectLaunchStrings.selectStartupProject});if(t){this.startupProject=t.info,this.state.storage.update(this.startupProjectStorageKey,this.startupProject.fullPath);for(const e of this.observers)e.onNext(this.startupProject)}return t?.info}getCurrentStartupProject(){return this.startupProject}async getOrPickCurrentStartupProject(){return this.startupProject||(this.startupProject=await this.pickStartupProject()),this.startupProject}isInitialized(){return void 0!==this.state}}t.StartupProjectService=c,t.startupProjectService=new c,t.initializeStartupProjectService=function(e){if(!t.startupProjectService.isInitialized()){const r=(0,i.getLaunchableProjectInfoObserver)();t.startupProjectService.initialize(r,e.workspaceState),e.subscriptions.push(t.startupProjectService)}};class u{info;label;description;detail;iconPath;constructor(e){this.info=e,this.label=e.displayName,this.description=e.description,this.detail=e.details,this.iconPath=(0,s.getIconPath)(e.icon)}}},46342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerDynamicDotnetConfigurationProvider=void 0;const n=r(89496),i=r(49230),o=r(66862);t.registerDynamicDotnetConfigurationProvider=function(e,t){const r=(0,i.getLaunchableProjectInfoObserver)(),s=new o.DotnetDynamicConfigurationProvider(t,r);return e.subscriptions.push(s),e.subscriptions.push(n.debug.registerDebugConfigurationProvider(o.DotnetDynamicConfigurationProvider.type,s,n.DebugConfigurationProviderTriggerKind.Dynamic)),{configurationProvider:s,launchableProjectInfoObserver:r}}},82269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLaunch=void 0;const n=r(57147),i=r(71017),o=r(89496),s=r(69279),a=r(89781),c=r(30077),u=r(7195),l=r(77867),d=r(65979),p=r(6315),f=r(22677),h=r(75010),g=r(66862);t.debugLaunch=async function(e,t,r,m,v){const y=new h.TelemetryActivity(v,u.telemetryService);r.noDebug&&y.addOrUpdateProperties({noDebug:String(!0)}),r.stopAtEntry&&y.addOrUpdateProperties({stopAtEntry:String(!0)});let _=!1,S=!1;if(n.readFileSync(e).includes("<UseMaui>true</UseMaui>")){if(!o.extensions.getExtension(s.MAUI_EXTENSION_ID)){_=!0;const e="Install the .NET MAUI extension";o.window.showErrorMessage(f.errorStrings.mauiExtensionNotFound,e).then((t=>{t===e&&o.env.openExternal(o.Uri.parse(s.MAUI_EXTENSION_URL))}))}let e=new a.OutputMonitor;if(await(0,l.dotnetCommand)(c.DotnetCommand.checkMauiWorkloads,void 0,["workload","list"],e),0===e.getOutput().match(/maui.\*/g)?.length){S=!0;const e="Install the .NET MAUI workloads";o.window.showErrorMessage(f.errorStrings.mauiWorkloadNotFound,e).then((t=>{t===e&&o.env.openExternal(o.Uri.parse(s.MAUI_WORKLOAD_URL))}))}if(_||S)return!1}const w=await m.getProxy(d.default.dotnetDebugConfigurationService);if(!w)throw new Error("Unable to obtain IDotnetDebugConfigurationService");try{const n=i.basename(e,".csproj"),s=await w.resolveDebugConfigurationWithLaunchConfigurationService(e,{name:g.DotnetDynamicConfigurationProvider.createDebugConfigurationName(n),type:"dotnet",request:"launch",...r},void 0),a=p.IDotnetDebugConfigurationServiceResultResolver.resolve(s);a?(y.addOrUpdateProperties({succeeded:String(!0)}),y.sendTelemetry(),o.debug.startDebugging(t,a,void 0)):null===a&&(y.addOrUpdateProperties({succeeded:String(!1)}),y.sendTelemetry())}finally{w?.dispose()}}},81433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorStrings=void 0;const n=r(89496),i=r(18472);i.config({bundleFormat:i.BundleFormat.standalone,locale:n.env.language,messageFormat:i.MessageFormat.both});const o=i.loadMessageBundle(r(71017).join(__dirname,"debugger\\strings.ts"));t.errorStrings={failProvideDebugConfigurations:o(0,null)}},26674:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DotnetVersionManager=void 0;const n=r(81249),i=r(89781),o=r(84832);t.DotnetVersionManager=class{cacheTimeoutInMilliSecs=3e4;versionCache={};async getDotnetVersion(e=process.cwd(),t,r=i.LogImportance.low){const n=this.versionCache[e];if(n&&Date.now()-n.timestamp<this.cacheTimeoutInMilliSecs)return n.version;const o=await this.getDotnetVersionImpl(e,t,r);return o&&(this.versionCache[e]={version:o,timestamp:Date.now()}),o}async getDotnetVersionImpl(e,t,r){try{const r=await(0,o.execChildProcess)("dotnet",["--version"],e,{...process.env});return t.log(`dotnet --version\n${r}`,i.LogImportance.low),n.parse(r.replace(/[\r\n]/gm,""))}catch(n){return t.log(`dotnet --version failed on ${e}:\n\t${n}`,r),null}}}},46429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentStateManager=void 0;const n=r(19679),i=r(82361),o=r(7195),s=r(65979),a=r(75010),c=r(73228),u=r(89496),l=r(71017),d=r(89496),p=r(89496),f=r(24138),h=r(22677);class g extends i.EventEmitter{brokeredServiceHost;environmentService;environmentServiceSubscriber;operationInProgress;isDisposing=!1;environmentStateObserver;openedSolutionPath;openedSolutionExtension;constructor(e){super(),this.brokeredServiceHost=e,this.environmentService=(0,c.lazyPromiseLambda)((()=>this.initEnvironmentServiceProxy()))}async dispose(){this.isDisposing=!0;try{if(this.environmentServiceSubscriber){const e=await this.environmentService;this.environmentServiceSubscriber?.dispose(),e.dispose()}}catch(e){}}getLatestEnvironmentState(){return this.environmentStateObserver?.getLatestEnvironmentState()}getOpenedSolution(){const e=this.environmentStateObserver?.getLatestEnvironmentState();return e?.solutions[0]}getOpenedSolutionExt(){const e=this.getOpenedSolution();return e!==this.openedSolutionPath&&(this.openedSolutionPath=e,e&&(this.openedSolutionExtension=l.extname(e))),this.openedSolutionExtension}getActiveWorkspace(){const e=u.workspace.workspaceFolders;if(e&&e.length>0){if(1===e.length)return e[0];{const t=this.environmentStateObserver?.getLatestEnvironmentState();if(t){const r=t.solutions[0];if(t.containsTemporarySolutionFile)return e[0];if(r){const e=u.workspace.getWorkspaceFolder(u.Uri.file(r));if(e)return e}for(let e=0;e<t.projects.length;e++){const r=t.projects[e].projectId.fullPath;if(r){const e=u.workspace.getWorkspaceFolder(u.Uri.file(r));if(e)return e}}}return e[0]}}}getActiveWorkspaceRoot(){const e=this.getActiveWorkspace();if(e)return e.uri.fsPath;const t=this.getOpenedSolution();return t?l.dirname(t):void 0}isSolutionGeneratedOutsideWorkspace(){return this.environmentStateObserver?.getLatestEnvironmentState()?.containsTemporarySolutionFile??!1}async closeSolution(){const e=await this.environmentService;await e.clear()}async setSolutionAndFolderWorkspace(e,t,r){const n=await this.environmentService,i=await n.setSolutionWorkspace(e,r,t);return this.environmentStateObserver.updateEnvironmentStateIfNeeded(i)}async openNoSolutionWorkspace(e,t,r){const n=await this.environmentService,i=await n.openNoSolutionWorkspace(e,t,r);return this.environmentStateObserver.updateEnvironmentStateIfNeeded(i)}async loadSolution(e){const t=await this.environmentService,r=await t.refreshSolutionContent(e);return this.environmentStateObserver.updateEnvironmentStateIfNeeded(r)}async runOperation(e){for(;this.operationInProgress;)await this.operationInProgress.catch((()=>{}));const t=e();this.operationInProgress=t.then((()=>this.operationInProgress=void 0));try{return await t}finally{this.operationInProgress=void 0}}async initEnvironmentServiceProxy(){const e=new a.TelemetryActivity("environment-service-initialization",o.telemetryService);let t=performance.now();const r=await this.brokeredServiceHost.serviceBroker.getProxy(s.default.environmentService);let n=performance.now();if(e.addOrUpdateMeasurements({getProxy:n-t}),!r)throw new Error("Could not get the IEnvironmentService proxy.");return t=performance.now(),this.environmentStateObserver=new m((e=>this.emit("environmentStateChanged",e))),r&&(this.environmentServiceSubscriber=await r.subscribe(this.environmentStateObserver)),n=performance.now(),e.addOrUpdateMeasurements({registerObserver:n-t}),this.isDisposing&&this.environmentServiceSubscriber?.dispose(),e.sendTelemetry(),r}}t.EnvironmentStateManager=g;class m extends n.Observer{onUpdateEnvironmentStateCallback;latestEnvironmentState;configurationStatusBarItem;latestConfiguration;isEnvironmentPreviouslyValid;getLatestEnvironmentState(){return this.latestEnvironmentState}constructor(e){super((()=>this.onNext)),this.onUpdateEnvironmentStateCallback=e}onNext(e){this.updateEnvironmentStateIfNeeded(e)}updateEnvironmentStateIfNeeded(e){if(!this.latestEnvironmentState||e.version>this.latestEnvironmentState.version){this.latestEnvironmentState=e,0===this.latestEnvironmentState.solutions.length?d.commands.executeCommand("setContext","solutionOpened",!1):d.commands.executeCommand("setContext","solutionOpened",!0),this.latestEnvironmentState.containsTemporarySolutionFile?d.commands.executeCommand("setContext","generatedSlnOutsideWorkspace",!0):d.commands.executeCommand("setContext","generatedSlnOutsideWorkspace",!1),this.onUpdateEnvironmentStateCallback(this.latestEnvironmentState),o.projectInitializationStatus?.onEnvironmentUpdate(this.latestEnvironmentState.version,this.latestEnvironmentState.solutions.length,this.latestEnvironmentState.errors);const t=!(this.latestEnvironmentState.errors&&this.latestEnvironmentState.errors.length>0);if(this.isEnvironmentPreviouslyValid!==t&&(this.isEnvironmentPreviouslyValid=t,d.commands.executeCommand("setContext","isValidSolution",t)),t){this.configurationStatusBarItem||(this.configurationStatusBarItem=p.window.createStatusBarItem("csdevkit.configuration",p.StatusBarAlignment.Left,11),this.configurationStatusBarItem.name=h.messageStrings.configurationStatusName,this.configurationStatusBarItem.command=f.selectActiveConfiguration,this.configurationStatusBarItem.tooltip=h.messageStrings.configurationTooltip);const e=this.latestEnvironmentState.configuration;e?(e!==this.latestConfiguration&&(this.configurationStatusBarItem.text=e.replace(/\|/g," "),this.latestConfiguration=e),this.configurationStatusBarItem.show()):this.configurationStatusBarItem.hide()}else this.configurationStatusBarItem?.hide();this.latestEnvironmentState.containsTemporarySolutionFile=e.containsTemporarySolutionFile}return this.latestEnvironmentState}}},30077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DotnetCommandError=t.DotnetCommand=t.SolutionCloseError=t.SolutionOpenError=t.SolutionReloadError=t.ExitCodeError=t.ErrorCodeError=void 0;class r extends Error{errorCode;constructor(e,t){super(t),this.errorCode=e,this.name="ErrorCodeError",this.errorCode=e}}t.ErrorCodeError=r;class n extends r{constructor(e,t){super(e,t),this.name="ExitCodeError"}}t.ExitCodeError=n;class i extends Error{constructor(e){super(e),this.name="SolutionReloadError"}}t.SolutionReloadError=i;class o extends Error{constructor(e){super(e),this.name="SolutionOpenError"}}t.SolutionOpenError=o;class s extends Error{constructor(e){super(e),this.name="SolutionCloseError"}}var a;t.SolutionCloseError=s,function(e){e[e.checkMauiWorkloads=0]="checkMauiWorkloads",e[e.newSln=1]="newSln",e[e.newProject=2]="newProject",e[e.slnAddIntoFolder=3]="slnAddIntoFolder",e[e.slnAdd=4]="slnAdd",e[e.slnRemoveProject=5]="slnRemoveProject",e[e.restore=6]="restore",e[e.updateReference=7]="updateReference",e[e.info=8]="info",e[e.sdkCheck=9]="sdkCheck",e[e.dotnetVersion=10]="dotnetVersion",e[e.nugetAddPackage=11]="nugetAddPackage",e[e.nugetUpdatePackage=12]="nugetUpdatePackage",e[e.nugetRemovePackage=13]="nugetRemovePackage",e[e.nugetPackageSearch=14]="nugetPackageSearch",e[e.nugetGetVersions=15]="nugetGetVersions",e[e.nugetListInstalledPackages=16]="nugetListInstalledPackages",e[e.nugetListOutdatedPackages=17]="nugetListOutdatedPackages"}(a||(t.DotnetCommand=a={}));class c extends n{constructor(e,t,r){super(t,r);const n=c.getCommandName(e);this.name="DotnetCommand"+n+"Error"}static getCommandName(e){switch(e){case a.checkMauiWorkloads:return"CheckMauiWorkloads";case a.newSln:return"NewSln";case a.newProject:return"NewProject";case a.slnAddIntoFolder:return"SlnAddIntoFolder";case a.slnAdd:return"SlnAdd";case a.slnRemoveProject:return"SlnRemoveProject";case a.restore:return"Restore";case a.updateReference:return"UpdateReference";case a.info:return"Info";case a.sdkCheck:return"SdkCheck";case a.dotnetVersion:return"DotnetVersion";case a.nugetAddPackage:return"NuGetAddPackage";case a.nugetUpdatePackage:return"NuGetUpdatePackage";case a.nugetRemovePackage:return"NuGetRemovePackage";case a.nugetPackageSearch:return"NuGetPackageSearch";case a.nugetGetVersions:return"NuGetGetVersions";case a.nugetListInstalledPackages:return"NuGetListInstalledPackages";case a.nugetListOutdatedPackages:return"NuGetListOutdatedPackages";default:return""}}}t.DotnetCommandError=c},90965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPackageJsonWithCsDevKitExports=t.idsOfExtensionsAllowedToExtendCsDevKit=void 0;const n=r(69279);var i;t.idsOfExtensionsAllowedToExtendCsDevKit=[n.EXTENSION_ID,n.CSHARP_EXTENSION_ID,"ms-dotnettools.dotnet-maui","ms-dotnettools.vscodeintellicode-csharp","ms-dotnettools.vscode-diagnosticshub"],function(e){e.is=function(e){return e&&!!e.csdevkitExports}}(i||(t.IPackageJsonWithCsDevKitExports=i={}))},7195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDotNetSdkPath=t.sendFirstInteractionWithExplorerTelemetry=t.deactivate=t.activate=t.dotnetSdkPath=t.dotnetVersionManager=t.firstExplorerInteractionTelemetry=t.dotnetTaskProvider=t.projectInitializationStatus=t.projectQueryableSpace=t.environmentStateManager=t.solutionExplorerTreeView=t.solutionExplorerProvider=t.experimentationService=t.telemetryService=t.logger=void 0;const n=r(83176),i=r(89244),o=r(89496),s=r(86800),a=r(59035),c=r(78343),u=r(7631),l=r(24138),d=r(2155),p=r(92614),f=r(81106),h=r(17702),g=r(44462),m=r(76925),v=r(20481),y=r(26686),_=r(33771),S=r(50031),w=r(40799),E=r(79053),b=r(758),P=r(90126),T=r(71181),C=r(64424),I=r(24593),O=r(65300),x=r(61120),N=r(82070),k=r(10976),A=r(6923),R=r(84611),D=r(61574),j=r(29235),M=r(69658),L=r(92624),F=r(35199),U=r(49546),B=r(34586),V=r(85970),$=r(93197),q=r(69279),H=r(46342),z=r(58741),W=r(37224),G=r(21232),K=r(49230),X=r(17407),J=r(49397),Q=r(46429),Y=r(14918),Z=r(14145),ee=r(54062),te=r(89781),re=r(6460),ne=r(49998),ie=r(22677),oe=r(75010),se=r(36661),ae=r(92181),ce=r(2906),ue=r(57147),le=r(22037),de=r(71017),pe=r(65131),fe=r(83661),he=r(9786),ge=r(77855),me=r(95113),ve=r(87211),ye=r(29758),_e=r(48182),Se=r(42300),we=r(60519),Ee=r(45723),be=r(26674),Pe=r(97475),Te=r(11144);let Ce,Ie,Oe;function xe(e,t){e.subscriptions.push(o.commands.registerCommand(l.openSolution,(t=>(0,O.default)(e,t)))),e.subscriptions.push(o.commands.registerCommand(l.closeSolution,(()=>(0,O.closeSolution)(e)))),e.subscriptions.push(o.commands.registerCommand(l.addAspireOrchestration,(()=>(0,pe.addAspireOrchestration)()))),e.subscriptions.push(o.commands.registerCommand(l.addNewProject,(t=>(0,h.addNewProject)(e,t)))),e.subscriptions.push(o.commands.registerCommand(l.addNewProjectFromNewFileMenu,(()=>(0,h.addNewProjectFromNewFileMenu)(e)))),e.subscriptions.push(o.commands.registerCommand(l.addExistingProject,(e=>(0,p.default)(e)))),e.subscriptions.push(o.commands.registerCommand(l.removeProject,(t=>(0,A.default)(e,t)))),e.subscriptions.push(o.commands.registerCommand(l.buildSolution,y.default)),e.subscriptions.push(o.commands.registerCommand(l.rebuildSolution,x.default)),e.subscriptions.push(o.commands.registerCommand(l.cleanSolution,_.default)),e.subscriptions.push(o.commands.registerCommand(l.showEntitlementsStatus,ne.showEntitlementsStatusCommand)),e.subscriptions.push(o.commands.registerCommand(l.openInTerminal,C.default)),e.subscriptions.push(o.commands.registerCommand(l.signIntoVsAccount,ne.signInCommand)),e.subscriptions.push(o.commands.registerCommand(l.searchProjectFromCommandPalette,L.searchProjectFromCommandPalette)),e.subscriptions.push(o.commands.registerCommand(l.searchOpenFromCommandPalette,L.searchOpenFromCommandPalette)),e.subscriptions.push(o.commands.registerCommand(l.searchFromCommandPalette,L.searchFromCommandPalette)),e.subscriptions.push(o.commands.registerCommand(l.revealFileInOS,M.default)),e.subscriptions.push(o.commands.registerCommand(l.deleteItem,b.default)),e.subscriptions.push(o.commands.registerCommand(l.addNewFile,f.addNewFile)),e.subscriptions.push(o.commands.registerCommand(l.addNewFileFromNewFileMenu,f.addNewFileFromNewFileMenu)),e.subscriptions.push(o.commands.registerCommand(l.addExistingFile,d.default)),e.subscriptions.push(o.commands.registerCommand(l.addProjectReference,m.default)),e.subscriptions.push(o.commands.registerCommand(l.removeProjectReference,v.default)),e.subscriptions.push(o.commands.registerCommand(l.rename,D.default)),e.subscriptions.push(o.commands.registerCommand(l.copyPath,S.copyPath)),e.subscriptions.push(o.commands.registerCommand(l.copyRelativePath,S.copyRelativePath)),e.subscriptions.push(o.commands.registerCommand(l.newSolutionFolder,T.default)),e.subscriptions.push(o.commands.registerCommand(l.renameSolutionFolder,j.default)),e.subscriptions.push(o.commands.registerCommand(l.removeSolutionFolder,R.default)),e.subscriptions.push(o.commands.registerCommand(l.newFolder,P.default)),e.subscriptions.push(o.commands.registerCommand(l.removeItem,N.default)),e.subscriptions.push(o.commands.registerCommand(l.openProjectsLogsView,I.default)),e.subscriptions.push(o.commands.registerCommand(l.openDevKitOutputWindow,he.default)),e.subscriptions.push(o.commands.registerCommand(l.debugProjectLaunch,(e=>(0,E.default)(e,{})))),e.subscriptions.push(o.commands.registerCommand(l.noDebugProjectLaunch,(e=>(0,E.default)(e,{noDebug:!0})))),e.subscriptions.push(o.commands.registerCommand(l.stepIntoProjectLaunch,(e=>(0,E.default)(e,{stopAtEntry:!0})))),e.subscriptions.push(o.commands.registerCommand(l.debugFileLaunch,(e=>(0,w.default)(e,{})))),e.subscriptions.push(o.commands.registerCommand(l.noDebugFileLaunch,(e=>(0,w.default)(e,{noDebug:!0})))),e.subscriptions.push(o.commands.registerCommand(l.selectStartupProject,U.default)),e.subscriptions.push(o.commands.registerCommand(l.selectLaunchConfiguration,F.default)),e.subscriptions.push(o.commands.registerCommand(l.selectLaunchTargetFramework,ve.default)),e.subscriptions.push(o.commands.registerCommand(l.installDotnetSdk,(()=>(0,Z.showInstallDotnetSdkWebview)(e)))),e.subscriptions.push(o.commands.registerCommand(l.installDotnetSdkFromWalkthrough,(()=>function(e){(0,Z.showInstallDotnetSdkWebviewBeside)(e)}(e)))),e.subscriptions.push(o.commands.registerCommand(l.helperOpenUrl,(t=>(0,Z.openUrlCmdHandler)(e,"OpenUrl",t)))),e.subscriptions.push(o.commands.registerCommand(l.syncWithActiveItem,B.default)),e.subscriptions.push(o.commands.registerCommand(l.selectActiveConfiguration,(()=>(0,me.default)(e)))),e.subscriptions.push(o.commands.registerCommand(l.saveSolutionFile,ge.default)),e.subscriptions.push(o.commands.registerCommand(l.manageUserSecrets,Pe.manageUserSecrets)),e.subscriptions.push((0,s.instrumentOperationAsVsCodeCommand)(l.webviewRunCommand,ee.webviewCmdLinkHandler)),e.subscriptions.push(o.commands.registerCommand(l.addNuGetPackage,g.default)),e.subscriptions.push(o.commands.registerCommand(l.updateNuGetPackage,V.default)),e.subscriptions.push(o.commands.registerCommand(l.removeNuGetPackage,k.default)),e.subscriptions.push(o.commands.registerCommand(l.openCoverageReport,fe.default))}function Ne(e,r,s=!1){if(e.subscriptions.push(o.window.registerWebviewPanelSerializer(l.installDotnetSdk,new Z.InstallDotnetSdkViewSerializer(e))),s)return;t.environmentStateManager=new Q.EnvironmentStateManager(r),t.solutionExplorerProvider=new ae.SolutionExplorerProvider(e,r,t.environmentStateManager),t.projectInitializationStatus=new Ee.ProjectInitializationStatus;const a=o.window.registerTreeDataProvider("solutionExplorer",t.solutionExplorerProvider);return t.solutionExplorerTreeView=o.window.createTreeView("solutionExplorer",{treeDataProvider:t.solutionExplorerProvider,dragAndDropController:t.solutionExplorerProvider}),(0,ce.subscribeToSolutionTreeEvents)(),e.subscriptions.push(a,t.solutionExplorerProvider,t.solutionExplorerTreeView,t.projectInitializationStatus),ke(r,(()=>(0,n.createCoverageControllers)(e,r.serviceBroker,ie.codeCoverageStrings))),ke(r,(()=>(0,i.createAndRegisterTestController)(e,r.serviceBroker,(0,n.getCollectionController)(),ie.testExplorerStrings))),{solutionExplorerProvider:t.solutionExplorerProvider}}async function ke(e,r){e.hasServerProcessLoaded()?await r():e.serverProcessLoaded((async function(){try{await r()}catch(e){t.logger.log("Server process spawn handler failed: "+e,te.LogImportance.high)}}))}function Ae(e,t){return(0,re.addDotNetDumpCreationEnvironmentValues)(t),(0,se.writeCommonPropsToFileAsync)(e)}t.activate=async function(e){let r=null;async function n(e,t){r=e;try{const e=await t();return r+=" (succeeded)",e}catch(e){throw r+=" (failed)",e}}t.logger=new te.Logger(e.extension.packageJSON.displayName);const s=e.logUri.fsPath;try{await n("initializeTelemetryAsync",(()=>async function(e){t.telemetryService=new se.TelemetryService(e);try{await t.telemetryService.saveVSCodePropsAsync(e)}catch(e){t.logger.log("Saving VSCode common properties failed: "+e,te.LogImportance.high)}}(e))),await n("initializeExperimentationServiceAsync",(()=>async function(e){const r=q.EXTENSION_ID,n=e.extension.packageJSON.version;let i;switch(o.env.uriScheme){case"vscode":default:i=a.TargetPopulation.Public;break;case"vscode-insiders":i=a.TargetPopulation.Insiders;break;case"vscode-exploration":i=a.TargetPopulation.Internal;break;case"code-oss":i=a.TargetPopulation.Team}try{const o=t.telemetryService?.getExperimentationTelemetryReporter();o&&(t.experimentationService=await(0,a.getExperimentationServiceAsync)(r,n,i,o,e.globalState),await t.experimentationService.initializePromise,await t.experimentationService.initialFetch)}catch(e){t.logger.log("Experimentation service initialization failed: "+e)}}(e)));const r=new oe.TelemetryActivity("extension-activation",t.telemetryService);if(t.firstExplorerInteractionTelemetry=new oe.TelemetryActivity("first-interaction-with-explorer",t.telemetryService),t.firstExplorerInteractionTelemetry.start(),!(0,Te.checkHostApp)())throw o.window.showErrorMessage(`${ie.licenseViolationMessage}.`,ie.promptStrings.moreInformation).then((e=>{e===ie.promptStrings.moreInformation&&o.env.openExternal(o.Uri.parse(q.LICENSE_URL))})),new Error(ie.licenseViolationMessage);const l=!o.workspace.workspaceFolders;await o.commands.executeCommand("setContext","solutionExplorerVisible",!1);const d=await n("loadOrCreateCachedValue->getAllComponentsMap",(()=>(0,u.loadOrCreateCachedValue)(e,"components",(()=>(0,$.getAllComponentsMap)(e.asAbsolutePath("components")))))),p=await n("prepareBrokeredServices",(()=>(0,c.prepareBrokeredServices)(e,d,t.logger)));let f;t.dotnetVersionManager=new be.DotnetVersionManager;let h=null;const g=!l&&o.workspace.getConfiguration("dotnet").get("preferCSharpExtension");l?(xe(e,p.serviceBroker),f=Ne(e,p,!0)):g&&(0,Y.doesCSharpExtensionSupportDeferral)()?(t.logger.log("C# Dev Kit extension is disabled because the setting 'dotnet.preferCSharpExtension' is set to 'true'"),r.addOrUpdateProperties({disabled:String(!0)})):await(0,Y.checkCSharpExtensionVersionCompatibility)(e)&&(xe(e,p.serviceBroker),f=Ne(e,p),t.projectQueryableSpace=new we.ProjectQueryableSpace(p.serviceBroker),(o.workspace.workspaceFolders&&o.workspace.workspaceFolders.length>0?o.workspace.workspaceFolders[0].uri.fsPath:null)&&(t.dotnetTaskProvider=new J.DotnetTaskProvider,Ce=o.tasks.registerTaskProvider(J.DotnetTaskProvider.dotnetType,t.dotnetTaskProvider),(0,ce.showSolutionExplorer)(e)),(0,K.setupLaunchableProjectInfoObserver)(e,p),o.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience",!0)&&((0,X.initializeStartupProjectService)(e),(0,z.setupActiveLaunchConfigurationService)(e),(0,_e.setupDebugTargetFrameworkInfoObserver)(e,p),(0,ye.setupActiveDebugTargetFrameworkService)(e),(0,G.setupLanguageStatusItems)(e)),h=await n("registerDynamicDotnetConfigurationProvider",(()=>(0,H.registerDynamicDotnetConfigurationProvider)(e,p))),(0,W.prepareHotReload)(e)),l||o.window.onDidChangeActiveTextEditor((e=>{let r=o.workspace.getConfiguration("dotnet").get("automaticallySyncWithActiveItem");if(e&&r&&t.solutionExplorerTreeView.visible)try{Oe&&Oe.cancel(),Oe=new o.CancellationTokenSource,(0,B.default)(Oe.token)}catch(e){}}));const[m,v]=await n("registerIdentityService",(()=>(0,ne.registerIdentityService)(e)));t.telemetryService?.registerForTelLevelChangeEvent(p,e),t.telemetryService?.registerUpdateIsMicrosoftInternal(m,e),r.end(),r.sendTelemetry(),Ie=se.TelemetryService.getSessionId(o.env.sessionId),t.telemetryService?.sendTelemetryEvent("CSDevKit/Extension/Start");const y={outputChannel:Se.hotReloadLogger.outputChannel};return{serviceBroker:p.serviceBroker,getBrokeredServiceServerPipeName:p.getBrokeredServiceServerPipeName,components:d,hasServerProcessLoaded:p.hasServerProcessLoaded,serverProcessLoaded:p.serverProcessLoaded,writeCommonPropsAsync:se.writeCommonPropsToFileAsync,setupTelemetryAsync:Ae,setupTelemetryEnvironmentAsync:t=>(0,se.writeCommonPropsToFileAsync)(e,t),launchChildProcessAsync:(e,t,r,n)=>async function(e,t,r,n,i){return(0,re.launchChildProcess)(e,t,r,n,i)}(d,e,t,r,n),testHooks:f?{views:f,telemetryService:t.telemetryService,identityTestHooks:v,getTestController:i.getTestController,logDirectory:s,debuggerTestExports:h,hotReloadTestExports:y}:void 0}}catch(e){throw t.logger.reportExceptionTelemetryAndLog("activate",r,"",e,t.telemetryService),e}},t.deactivate=function(){let e="CsDevKit/Extension/Exit",r="deactivate: start";t.telemetryService?.sendTelemetryEvent(e+"/Begin");try{t.logger.log("C# Dev Kit deactivate() is now executing..."),r="deactivate: write session deactivated file",ue.writeFile(de.join(function(){let e=de.join(le.tmpdir(),"csdevkit","sessions","deactivated");try{ue.existsSync(e)||ue.mkdirSync(e,{recursive:!0})}catch(r){t.logger.log(`Failed to create deactivated sessions folder path ${e} due to ${r}`),e=le.tmpdir()}return e}(),Ie?.toLowerCase()+".txt"),"",(e=>{})),r="deactivate: dispose environmentStateManager",t.environmentStateManager?.dispose(),r="deactivate: dispose dotnetTaskProvider",r=Ce?.dispose(),r="deactivate: dispose projectQueryableSpace",t.projectQueryableSpace?.dispose(),t.telemetryService?.sendTelemetryEvent(e,{shutdownReason:"Normal"})}catch(e){throw t.logger.reportExceptionTelemetryAndLog("deactivate",r,"",e,t.telemetryService,{shutdownReason:"Abnormal"}),e}finally{t.telemetryService?.dispose(),t.telemetryService=null}},t.sendFirstInteractionWithExplorerTelemetry=function(){t.firstExplorerInteractionTelemetry&&(t.firstExplorerInteractionTelemetry.end(),t.firstExplorerInteractionTelemetry.sendTelemetry(),t.firstExplorerInteractionTelemetry=void 0)},t.setDotNetSdkPath=function(e){t.dotnetSdkPath=e}},14918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesCSharpExtensionSupportDeferral=t.checkCSharpExtensionVersionCompatibility=void 0;const n=r(69279),i=r(7195),o=r(81249),s=r(89496),a=r(18472),c=r(16260);a.config({bundleFormat:a.BundleFormat.standalone,locale:s.env.language,messageFormat:a.MessageFormat.both});const u=a.loadMessageBundle(r(71017).join(__dirname,"extensionDependenciesChecks.ts"));t.checkCSharpExtensionVersionCompatibility=async function(e){const t=s.extensions.getExtension(n.CSHARP_EXTENSION_ID),r=t?.packageJSON.version;let a=!0;if(r?o.lt(r,n.CSHARP_EXTENSION_REQUIRED_VERSION)&&(i.logger.log(`The C# extension is installed, but has version ${r} which is incompatible with C# Dev Kit.`),async function(){const t=e.extension.packageJSON.displayName,r=u(0,null,t,n.CSHARP_EXTENSION_REQUIRED_VERSION,n.CSHARP_EXTENSION_ID),i=u(1,null);if(await s.window.showWarningMessage(r,i)===i){const e=s.extensions.getExtension(n.EXTENSION_ID)?.packageJSON.preview;e||s.extensions.getExtension(n.CSHARP_EXTENSION_ID)?.packageJSON.preview?await s.commands.executeCommand("workbench.extensions.action.switchToPreReleaseVersion",n.CSHARP_EXTENSION_ID):await s.commands.executeCommand("workbench.extensions.action.switchToReleaseVersion",n.CSHARP_EXTENSION_ID),await s.commands.executeCommand("workbench.action.reloadWindow")}}().catch((()=>{})),a=!1):(i.logger.log("The C# extension is missing."),a=!1),!a){let e=new c.TelemetryEvent("dependency-update-needed",i.telemetryService);e.addOrUpdateProperties({csharpExtensionCurrentVersion:r,csharpExtensionRequiredVersion:n.CSHARP_EXTENSION_REQUIRED_VERSION}),e.sendTelemetry()}return a},t.doesCSharpExtensionSupportDeferral=function(){const e=s.extensions.getExtension(n.CSHARP_EXTENSION_ID),t=e?.packageJSON.version;return!!t&&o.gte(t,n.CSHARP_EXTENSION_SUPPORTS_DEFERRAL_VERSION)}},70336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXTENSION_ID=t.RECOMMENDED_VERSION_API_OLD=t.DOTNET_INSTALL_TOOL_EXTENSION_ID=t.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE=t.FIND_PATH_API=t.ACQUIRE_SDK_GLOBAL_API=t.AVAILABLE_VERSIONS_API=t.RECOMMENDED_VERSION_API=t.WEBVIEW_ID=void 0,t.WEBVIEW_ID="csdevkit.installDotnetSdk",t.RECOMMENDED_VERSION_API="dotnet.recommendedVersion",t.AVAILABLE_VERSIONS_API="dotnet.listVersions",t.ACQUIRE_SDK_GLOBAL_API="dotnet.acquireGlobalSDK",t.FIND_PATH_API="dotnet.findPath",t.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE="dotnet.acquireStatus/options",t.DOTNET_INSTALL_TOOL_EXTENSION_ID="ms-dotnettools.vscode-dotnet-runtime",t.RECOMMENDED_VERSION_API_OLD="placeholder.dotnet.oldApiCallWhichNoLongerExists",t.EXTENSION_ID="ms-dotnettools.csdevkit"},54249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllSuggestedSDKVersions=t.acquireSDK=t.getAlternativeRecommendedVersions=t.getRecommendedVersion=t.apiIsAvailable=void 0;const n=r(70336),i=r(89496);function o(e){const t=i.extensions?.getExtension(n.DOTNET_INSTALL_TOOL_EXTENSION_ID),r=t?.packageJSON.version;if(!r)return!1;switch(e){case n.RECOMMENDED_VERSION_API:return r>="2.0.3";case n.AVAILABLE_VERSIONS_API:return r>="2.0.2";case n.ACQUIRE_SDK_GLOBAL_API:return r>="2.2.8";case n.RECOMMENDED_VERSION_API_OLD:return r>="2.0.2";case n.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE:return r>="2.0.9";case n.FIND_PATH_API:return r>="2.2.3";default:return!1}}t.apiIsAvailable=o;const s={version:"8.0.100",channelVersion:"8.0",supportStatus:"lts",supportPhase:"active"};async function a(){const e={listRuntimes:!1};if(o(n.RECOMMENDED_VERSION_API)){const t=await i.commands.executeCommand(n.RECOMMENDED_VERSION_API,e);if(t&&t.at(0))return t.at(0)}else if(o(n.RECOMMENDED_VERSION_API_OLD)){const t=await i.commands.executeCommand(n.RECOMMENDED_VERSION_API,e);if(t)return{version:t,channelVersion:`${t.split(".").at(0)}.${t.split(".").at(1)}`,supportStatus:Number(t.charAt(0))%2==0?"lts":"sts",supportPhase:"eol"}}return i.window.showWarningMessage("Unable to get latest .NET Installation Data: Please update the .NET Install Tool to version 2.0.2 or later."),s}async function c(){const e={listRuntimes:!1};if(o(n.AVAILABLE_VERSIONS_API)){const t=(await i.commands.executeCommand(n.AVAILABLE_VERSIONS_API,e)).filter((e=>"maintenance"===e.supportPhase||"active"===e.supportPhase)).slice(1,3);if(t)return t}return i.window.showWarningMessage("Unable to get latest .NET Installation Data: Please update the .NET Install Tool to version 2.0.2 or later."),[s,s]}function u(e){return i.window.showErrorMessage(e.message),null}t.getRecommendedVersion=a,t.getAlternativeRecommendedVersions=c,t.acquireSDK=async function(e){const t={version:e.version,requestingExtensionId:n.EXTENSION_ID,installType:"global",architecture:void 0};if(o(n.ACQUIRE_SDK_GLOBAL_API))try{i.window.showInformationMessage("The .NET Install Tool began installing the .NET SDK. You may be asked for permission to complete the installation.");const e=await i.commands.executeCommand(n.ACQUIRE_SDK_GLOBAL_API,t);return e&&e.dotnetPath?(i.window.showInformationMessage(`Installation of the .NET SDK version ${t.version} succeeded.`),e):u(new Error("The .NET Install Tool returned an unexpected result. Please view the 'Output' -> '.NET Install Tool' window for more info."))}catch(e){return u(e instanceof Error?e:new Error("The .NET Install Tool failed to install the .NET SDK. Please view the 'Output' -> '.NET Install Tool' window for more info."))}else i.window.showErrorMessage("Unable to install the .NET SDK: The .NET Install Tool must be updated to version 2.2.8 or later.");return null},t.getAllSuggestedSDKVersions=async function(){return{recommended:await a(),alternatives:await c()}}},14145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstallDotnetSdkViewSerializer=t.openUrlCmdHandler=t.showInstallDotnetSdkWebviewBeside=t.showInstallDotnetSdkWebview=void 0;const n=r(71017),i=r(89496),o=r(54062),s=r(54249),a=r(70336),c=r(86800);t.showInstallDotnetSdkWebview=function(e){u.createOrShow(e.extensionPath)},t.showInstallDotnetSdkWebviewBeside=function(e){u.createOrShow(e.extensionPath,{beside:!0})},t.openUrlCmdHandler=async function(e,t,r){(0,c.sendInfo)(t,{url:r}),i.commands.executeCommand("vscode.open",i.Uri.parse(r))},t.InstallDotnetSdkViewSerializer=class{context;constructor(e){this.context=e}async deserializeWebviewPanel(e,t){u.createOrShow(this.context.extensionPath,{webviewPanel:e})}};class u{static instance;static viewType=a.WEBVIEW_ID;_panel;_extensionPath;_disposables=[];static createOrShow(e,t){let r=i.ViewColumn.Active;if(t?.beside){const e=i.window.activeTextEditor;r=void 0===e||e.viewColumn===i.ViewColumn.One?i.ViewColumn.Two:i.ViewColumn.One}u.instance?u.instance._panel?.reveal():u.instance=new u(e,t?.webviewPanel?t.webviewPanel:r)}constructor(e,t){this._extensionPath=e,t.viewType?this._panel=t:this._panel=i.window.createWebviewPanel(u.viewType,"Install New .NET SDK",t,{enableScripts:!0,localResourceRoots:[i.Uri.file(n.join(this._extensionPath,"out"))],enableCommandUris:!0,retainContextWhenHidden:!0}),this._panel.webview.html=this._getHtmlForWebview(),this._panel.onDidDispose((()=>this.dispose()),null,this._disposables),this._panel.webview.onDidReceiveMessage((e=>{switch(e.command){case"onWillFetchAvailableReleases":return void this.doFetchAvailableReleases();case"onWillFetchAsset":return void this.doFetchAsset(e.primaryAsset,e.payload);case"onWillDownloadDotnetSdk":return void this.doDownloadDotnetSdk(e.payload);case"onWillReloadWindow":this.doReloadWindow()}}),null,this._disposables)}async doFetchAvailableReleases(){const e=await(0,s.getAllSuggestedSDKVersions)();this._panel?.webview.postMessage({command:"onDidFetchAvailableReleases",payload:e})}async doFetchAsset(e,t){this._panel?.webview.postMessage({command:"onDidFetchAsset",primaryAsset:e,payload:t})}async doDownloadDotnetSdk(e){(0,s.acquireSDK)(e)}async doReloadWindow(){await(0,o.webviewCmdLinkHandler)({webview:u.viewType,identifier:"Reload Window",command:"workbench.action.reloadWindow"})}dispose(){for(u.instance=void 0,this._panel?.dispose(),this._panel=void 0;this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(){const e=i.Uri.file(n.join(this._extensionPath,"out","assets","install-sdk","index.js")),t=this._panel?.webview.asWebviewUri(e);return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="utf-8">\n\t\t\t\t<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">\n\t\t\t\t<meta name="theme-color" content="#000000">\n\t\t\t\t<title>React App</title>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<noscript>You need to enable JavaScript to run this app.</noscript>\n\t\t\t\t<div id="root"></div>\n\n\t\t\t\t<script nonce="${(0,o.getNonce)()}" src="${t}" type="module"><\/script>\n\t\t\t</body>\n\t\t\t</html>`}}},54062:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNonce=t.openExternalLinkFromWebview=t.webviewCmdLinkHandler=t.encodeExternalLinkWithTelemetry=t.encodeCommandUriWithTelemetry=void 0;const n=r(89496),i=r(86800),o=r(6113);function s(e,t,r,n){const i={webview:e,identifier:t,command:r,args:n};return`command:csdevkit.webview.runCommand?${encodeURIComponent(JSON.stringify(i))}`}async function a(e){const{webview:t,identifier:r,command:o,args:s}=e;(0,i.sendInfo)("",{name:"openWebviewUrl",webview:t,identifier:r}),void 0!==s?await n.commands.executeCommand(o,...s):await n.commands.executeCommand(o)}t.encodeCommandUriWithTelemetry=s,t.encodeExternalLinkWithTelemetry=function(e,t,r){return s(e,t,"csdevkit.helper.openUrl",[r])},t.webviewCmdLinkHandler=a,t.openExternalLinkFromWebview=async function(e,t,r){await a({webview:e,identifier:t,command:"csdevkit.helper.openUrl",args:[r]})},t.getNonce=function(){const e=new Uint8Array(16),t=o.getRandomValues(e),r=String.fromCharCode(...t);return btoa(r)}},77867:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dotnetCommand=t.acquireRuntime=t.dotnetRuntimeResolved=void 0;const n=r(32081),i=r(89496),o=r(69279),s=r(89781),a=r(30077),c=r(7195),u=r(84832),l=r(73228),d=r(22677);var p;async function f(e){let t={version:o.NET_RUNTIME_VERSION,requestingExtensionId:o.EXTENSION_ID,mode:"aspnetcore"},r="true"===process.env.AUTOMATED_TESTING?void 0:await i.commands.executeCommand("dotnet.acquireStatus",t);return void 0===r&&(await i.commands.executeCommand("dotnet.showAcquisitionLog"),r=await i.commands.executeCommand("dotnet.acquire",t)),r?.dotnetPath?(await async function(e,t){const r=[e];await i.commands.executeCommand("dotnet.ensureDotnetDependencies",{command:e,arguments:r})}(r.dotnetPath),r.dotnetPath):null}!function(e){e[e.DisplayAllErrorPopups=0]="DisplayAllErrorPopups",e[e.DisableErrorPopups=1]="DisableErrorPopups"}(p||(p={})),t.acquireRuntime=async function(e,r){if(t.dotnetRuntimeResolved)return t.dotnetRuntimeResolved;if(void 0===t.dotnetRuntimeResolved)if(e){const e=await(0,u.getDotnetInfo)(c.logger);let n;if(!e){const e=await(0,u.findInstalledDotnetFromPath)(null,c.logger);n=e?d.errorStrings.corruptedDotnetInstallation(e):d.errorStrings.cannotFindDotnetInstallation,c.logger.log(n,s.LogImportance.high),c.logger.show(),i.window.showErrorMessage(n);const t=process.env.PATH;t?c.logger.log(`PATH=${t}`,s.LogImportance.high):c.logger.log("PATH environment variable cannot be found.",s.LogImportance.high)}const o=await(0,u.findMatchedDotnetFromPath)(r,c.logger,e);let a="string"==typeof o?o:null,l=!1;if(a?c.logger.log(`Using preinstalled .NET runtime at "${a}" to load Dev Kit processes.`):(a=await f())&&(c.logger.log(`Using local .NET runtime at "${a}"`),l=!0),a){const r=e?await(0,u.findInstalledDotnetFromPath)(e,c.logger):null;t.dotnetRuntimeResolved=l?{path:a,isAcquired:l,globalRuntimeMismatchingReason:o,globalPath:r,dotnetInfo:e,dotnetFailureMessage:n}:{path:a,isAcquired:l,globalPath:r,dotnetInfo:e,dotnetFailureMessage:n}}else t.dotnetRuntimeResolved=null}else{const e=await(0,u.getArchitectureFromTargetPlatform)(r,c.logger),n={acquireContext:{version:o.NET_RUNTIME_VERSION,requestingExtensionId:o.EXTENSION_ID,architecture:e,mode:"aspnetcore"},versionSpecRequirement:"equal",rejectPreviews:!0},a=await i.commands.executeCommand("dotnet.findPath",n);a&&a.dotnetPath?c.logger.log(`.NET Runtime found at: "${a.dotnetPath}".`,s.LogImportance.low):c.logger.log("No suitable .NET runtime was found.",s.LogImportance.low);const l=a?.dotnetPath;let d="string"==typeof l?l:null,p=!1;if(d?c.logger.log(`Using existing .NET runtime at "${d}" to load Dev Kit processes.`):(d=await f())&&(c.logger.log(`Using acquired .NET runtime at "${d}"`),p=!0),d){const r={acquireContext:{version:o.NET_SDK_MIMIMUM_SUPPORTED_VERSION,requestingExtensionId:o.EXTENSION_ID,installType:"global",architecture:e,mode:"sdk"},versionSpecRequirement:"greater_than_or_equal"},n=await i.commands.executeCommand("dotnet.findPath",r);n?c.logger.log(`.NET Sdk found: "${n.dotnetPath}".`):c.logger.log("Could not find installed SDK.");const s=n?.dotnetPath;t.dotnetRuntimeResolved={path:d,isAcquired:p,globalPath:s,dotnetInfo:null,dotnetFailureMessage:void 0}}else t.dotnetRuntimeResolved=null}if(null===t.dotnetRuntimeResolved)throw new Error("Could not resolve the dotnet path!");return t.dotnetRuntimeResolved},t.dotnetCommand=async function(e,t,r,o,s){try{const e="win32"===process.platform?"dotnet.exe":"dotnet",a=s?c.logger:o??c.logger;await a.watch(`command: "${e}" ${r.join(" ")}`,(async()=>{const s={windowsHide:!0,cwd:t,env:{DOTNET_CLI_UI_LANGUAGE:i.env.language,...process.env}},a=n.execFile(e,r,s);await(0,l.waitForProcess)(a,o)}))}catch(t){throw t instanceof a.ExitCodeError?new a.DotnetCommandError(e,t.errorCode,t.message):t instanceof Error?new a.DotnetCommandError(e,0,t.message):new a.DotnetCommandError(e,0,t?.toString()??"")}}},84832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArchitectureFromTargetPlatform=t.execChildProcess=t.getDotnetInfo=t.findInstalledDotnetFromPath=t.findMatchedDotnetFromPath=t.CompatibleDotnetSearchFailedReason=void 0;const n=r(89496),i=r(32081),o=r(81249),s=r(69279),a=r(73228),c=r(89781),u=r(73292),l=r(71017),d=r(54249),p=r(70336),f=r(57147);var h;async function g(e,t,r){const n=await(0,u.realpath)(e),i="win32"===process.platform?"dotnet.exe":"dotnet";if(n.toLowerCase().endsWith(i)){const e=l.dirname(n),t=l.join(e,"host");if((0,f.existsSync)(t))return r.log(`Found installed dotnet location "${n}" to load projects.`,c.LogImportance.high),n}t||(t=await v(r));const o=t?.runtimeVersions["Microsoft.NETCore.App"];if(o)for(const e of o){const t=l.dirname(l.dirname(e.path));if(t){const e=l.join(t,i);if(await(0,a.exists)(e))return r.log(`Found installed dotnet location "${e}" by using dotnet runtime location.`,c.LogImportance.high),e}}return r.log(`Found installed dotnet location "${n}" as final fallback after fail to find runtime. This is unexpected and the extension might not work.`,c.LogImportance.high),n}async function m(e,t){const r=(0,a.isWindows)()?"where.exe":"which";try{const n=await y(r,["dotnet"]);if(!n)return t.log(`Unable to find dotnet from ${r}.`,c.LogImportance.high),null;const i=n.trim().replace(/\r/gm,"").split("\n")[0];return await(0,a.exists)(i)?(t.log(`dotnet found at ${i}`,c.LogImportance.low),await g(i,e,t)):(t.log(`dotnet path does not exist: "${i}"`,c.LogImportance.high),null)}catch(n){t.log(`Failed to find dotnet from path with "${r} dotnet".\n${n}`,c.LogImportance.high);const i=process.env.PATH?.split(l.delimiter);if(i){const r="win32"===process.platform?"dotnet.exe":"dotnet";for(let n=0;n<i.length;n++){const o=l.resolve(i[n],r);if(await(0,a.exists)(o))return t.log(`dotnet found at ${o} from PATH`,c.LogImportance.low),await g(o,e,t)}}}return null}async function v(e){try{let t;const r=n.workspace?.workspaceFolders;r&&r.length>0&&(t=r[0].uri.fsPath);const i=await y("dotnet",["--info"],t,{...process.env,DOTNET_CLI_UI_LANGUAGE:"en-US"});let s,a;e.log(`dotnet --info\n${i}`,c.LogImportance.low);let u=i.replace(/\r/gm,"").split("\n");for(const e of u){let t;(t=/^\s*Version:\s*([^\s].*)$/.exec(e))?s=o.parse(t[1]):(t=/^\s*Architecture:\s*(.*)/.exec(e))&&(a=t[1])}const l={},d=await y("dotnet",["--list-runtimes"]);e.log(`dotnet --list-runtimes\n${d}`,c.LogImportance.low),u=d.split(/\r?\n/);for(const e of u){let t;if(t=/^([\w\.]+) ([^ ]+) \[([^\]]+)\]$/.exec(e)){const e=t[1],r=t[2],n=t[3];e in l?l[e].push({version:o.parse(r),path:n}):l[e]=[{version:o.parse(r),path:n}]}}if(s){const t={version:s,architecture:a,runtimeVersions:l};return e.log(`Returning dotnet info: ${JSON.stringify(t)}`,c.LogImportance.low),t}return e.log("Failed to parse dotnet version information",c.LogImportance.high),null}catch(t){return e.log(`Error running "dotnet --info". Either the dotnet installation cannot be found from PATH, or it might be corrupted.\n${t}`,c.LogImportance.high),null}}async function y(e,t=[],r=process.cwd(),n=process.env){return new Promise(((o,s)=>{i.execFile(e,t,{windowsHide:!0,maxBuffer:512e3,cwd:r,env:n},((e,t,r)=>{e?s(new Error(`${e}\nSTDOUT:\n${t}\nSTDERR:\n${r}`)):r&&!r.includes("screen size is bogus")?s(new Error(r)):o(t)}))}))}async function _(e,t){let r=process.arch;if(e){const n=e.asAbsolutePath("extension.vsixmanifest");if(await(0,a.exists)(n)){const e=await(0,u.readFile)(n,"utf-8"),i=/TargetPlatform="[^"-]+-(.*)"/.exec(e);i?(r=i[1],t.log(`Found extension target platform: ${r}`,c.LogImportance.low)):t.log(`Could not find extension target platform in "${n}. Falling back to ${r}."`,c.LogImportance.high)}else t.log(`Unable to find extension target platform - no vsix manifest file exists at "${n}". Falling back to ${r}.`,c.LogImportance.low)}return r}!function(e){e[e.noCandidateFound=0]="noCandidateFound",e[e.mismatchedArchitectureFound=1]="mismatchedArchitectureFound",e[e.mismatchedHigherVersionRuntimeFound=2]="mismatchedHigherVersionRuntimeFound",e[e.mismatchedVersionRuntimeFound=3]="mismatchedVersionRuntimeFound",e[e.disabled=4]="disabled"}(h||(t.CompatibleDotnetSearchFailedReason=h={})),t.findMatchedDotnetFromPath=async function(e,t,r){try{if(void 0===r&&(r=await v(t)),!r)return h.noCandidateFound;const i=await _(e,t);if(i!==r.architecture)return t.log(`The architecture of the .NET runtime (${r.architecture}) does not match the architecture of the extension (${i}).`,c.LogImportance.low),h.mismatchedArchitectureFound;const u=o.parse(`${s.NET_RUNTIME_VERSION}.${s.NET_RUNTIME_VERSION_PATCH}`),f=r.runtimeVersions["Microsoft.NETCore.App"],g=r.runtimeVersions["Microsoft.AspNetCore.App"],y=(0,d.apiIsAvailable)(p.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE);let S=!1,w=!1,E="";for(const e of f){const t=e.version;if(!(t.prerelease?.length>0))if(t.major===u.major){if(t.compare(u)>=0&&(!y||g?.find((e=>0===e.version.compare(t))))){S=!0,E=e.path;break}}else 1!==t.compare(u)||y&&!g?.find((e=>0===e.version.compare(t)))||(w=!0,E=e.path)}if(!S)return t.log("No extension compatible .NET runtime found from installed SDKs.",c.LogImportance.low),w?h.mismatchedHigherVersionRuntimeFound:h.mismatchedVersionRuntimeFound;if("true"===process.env.CSDEVKIT_FORCE_OWN_RUNTIME||"darwin"===process.platform&&n.workspace?.getConfiguration("dotnet")?.get("workingWithTestSignedSdk"))return h.disabled;if(E&&(E=l.dirname(l.dirname(E)),E)){const e=l.join(E,(0,a.isWindows)()?"dotnet.exe":"dotnet");if(await(0,a.exists)(e))return e}const b=await m(r,t);if(b)return b}catch(e){t.log(`Failed to find dotnet info from path: ${e}`,c.LogImportance.high)}return h.noCandidateFound},t.findInstalledDotnetFromPath=m,t.getDotnetInfo=v,t.execChildProcess=y,t.getArchitectureFromTargetPlatform=_},39058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuGetConfigurationSettings=void 0;const n=r(89496);class i{_config=void 0;constructor(e){this._config=this.getConfiguration(e)}getConfiguration(e){const t=n.workspace.getConfiguration(e);if(!t)throw new Error(`Configuration ${t} not found`);return t}getValue(e,t){return this._config?.get(e,t)??t}}class o extends i{static configurationName="nuget";static includePrereleaseKey="includePrereleasePackageVersions";constructor(){super(o.configurationName)}get includePrerelease(){return this.getValue(o.includePrereleaseKey,!1)}}t.NuGetConfigurationSettings=o},98986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrereleaseStatusPlaceholder=t.getPackageFromContext=t.getProjectFromContext=t.retrieveOutdatedPackages=t.retrieveInstalledPackages=t.retrievePackageVersions=t.showVersionPicker=t.showPackagePickerFromPromise=t.showProjectPicker=t.verifyServicePrerequisites=t.NuGetAction=void 0;const n=r(89496),i=r(68489),o=r(81249),s=r(49397),a=r(7195),c=r(22677),u=r(65979),l=r(277),d=r(29047),p=r(92181);var f;function h(e,t=void 0){return e===f.add?t?c.nugetStrings.addPackageNameTitle(t):c.nugetStrings.addPackageTitle:e===f.update?t?c.nugetStrings.updatePackageNameTitle(t):c.nugetStrings.updatePackageTitle:e===f.remove?c.nugetStrings.removePackageTitle:""}function g(e,t){return e?c.nugetStrings.prereleaseIncludedSuffix(t):c.nugetStrings.prereleaseNotIncludedSuffix(t)}function m(e){return e===f.update?c.nugetStrings.noPackagesToUpdateResult:e===f.remove?c.nugetStrings.noPackagesToRemoveResult:""}!function(e){e[e.add=0]="add",e[e.update=1]="update",e[e.remove=2]="remove"}(f||(t.NuGetAction=f={})),t.verifyServicePrerequisites=async function(e,t,r,i){return await a.logger.watch("Check NuGet service prerequisites",(async function(){const o=await r.getProxy(u.default.nugetCommandsService);try{const r=await(0,d.runWithDurationTelemetry)((async()=>await(o?.checkPrerequisites(t))),i,"verifyPrerequisites");let s;return r&&!r.isPrerequisiteMet&&r.message&&r.actionText&&o instanceof l.NuGetDotnetCommandsService&&(s=await n.window.showQuickPick([r.actionText,c.promptStrings.cancel],{title:h(e),placeHolder:r.message}),s&&s!==c.promptStrings.cancel&&n.commands.executeCommand("vscode.open",n.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2263657"))),(0,d.addDotnetSdkTelemetry)(i,r?.value??"unknown",s?s===c.promptStrings.cancel?"cancel":"install":void 0),r}finally{o?.dispose()}}),{telemetry:i,catchUnhandledErrors:!0})},t.showProjectPicker=async function(e,t){const r=await(0,d.runWithDurationTelemetry)((async()=>await(0,s.getAllProjects)()),t,"getAllProjects");if((0,d.addResultsCountTelemetry)(t,r?.length??0,"getAllProjects"),r&&r.length>0){const t=r.map((e=>({name:e.Name,fullPath:e.Path}))).sort(((e,t)=>e.name.localeCompare(t.name)));let o;if(1===t.length)o=t[0];else{const r=await n.window.showQuickPick(t.map((e=>new i.ProjectInfoQuickPick(e))),{title:h(e),placeHolder:c.nugetStrings.projectPickerPlaceholder});o=r?.info}return o}},t.showPackagePickerFromPromise=async function(e,t,r){let o;const s=await n.window.showQuickPick(new Promise((async r=>{const n=await t;n&&n.length>0?r(n?.map((e=>new i.NuGetPackageUpdateQuickPick(e)))):r([{label:m(e)}])})),{title:h(e),placeHolder:r?g(r.includePrerelease,c.nugetStrings.packagePickerPlaceholder):c.nugetStrings.packagePickerPlaceholder});return s&&s instanceof i.NuGetPackageUpdateQuickPick&&(o=s.info),o},t.showVersionPicker=async function(e,t,r,s){let a;const u=await n.window.showQuickPick(new Promise((async e=>{const n=await r;let s=!1;const a=[];n&&n.length>0?(n.sort(((e,t)=>{const r=o.parse(e.version,{loose:!0}),n=o.parse(t.version,{loose:!0});return n&&r?o.compare(n,r,{loose:!0}):0})).map((e=>{if(e.version){s||(e.isLatest=s=!0),e.version===t.version&&(e.isCurrent=!0);const r=new i.NuGetPackageVersionQuickPick(e);a.push(r)}})),e(a)):e([{label:c.nugetStrings.noVersionsFoundError}])})),{title:h(e,t.id),placeHolder:g(s.includePrerelease,c.nugetStrings.selectVersionPlaceholder)});return u&&u instanceof i.NuGetPackageVersionQuickPick&&(a=u.info),a},t.retrievePackageVersions=async function(e,t,r,n,i){return await a.logger.watch("Get NuGet package versions",(async function(){const o=await n.getProxy(u.default.nugetCommandsService);try{const n=await(0,d.runWithDurationTelemetry)((async()=>await(o?.getVersions(e,t,r))),i,"getPackageVersions")??[];return(0,d.addResultsCountTelemetry)(i,n.length,"getPackageVersions"),n}finally{o?.dispose()}}),{telemetry:i,catchUnhandledErrors:!0})},t.retrieveInstalledPackages=async function(e,t,r){return await a.logger.watch("Get installed NuGet packages",(async function(){const n=await t.getProxy(u.default.nugetCommandsService);try{const t=await(0,d.runWithDurationTelemetry)((async()=>await(n?.getInstalledPackages(e))),r,"listInstalledPackages")??[];return(0,d.addResultsCountTelemetry)(r,t.length,"listInstalledPackages"),t}finally{n?.dispose()}}),{telemetry:r,catchUnhandledErrors:!0})},t.retrieveOutdatedPackages=async function(e,t,r,n){return await a.logger.watch("Get outdated NuGet packages",(async function(){const i=await r.getProxy(u.default.nugetCommandsService);try{const r=await(0,d.runWithDurationTelemetry)((async()=>await(i?.getOutdatedPackages(e,t))),n,"listOutdatedPackages")??[];return(0,d.addResultsCountTelemetry)(n,r.length,"listOutdatedPackages"),r}finally{i?.dispose()}}),{telemetry:n,catchUnhandledErrors:!0})},t.getProjectFromContext=function(e){let t;if(e?.node?.NodeType===p.nodeTypes.project)t=e.node;else if(e?.node?.NodeType===p.nodeTypes.packageDependency){let r=e;for(;r?.node&&r.node.NodeType!==p.nodeTypes.project;)r=r.parentNode;t=r?.node}if(t&&t.Path)return{name:t.Name,fullPath:t.Path}},t.getPackageFromContext=function(e){const t=e?.node;if(t&&t.NodeType===p.nodeTypes.packageDependency&&t.Description&&t.Description.length>2)return{id:t.Name,version:t.Description.substring(1,t.Description.length-1)}},t.getPrereleaseStatusPlaceholder=g},68489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuGetPackageUpdateQuickPick=t.NuGetPackageVersionQuickPick=t.NuGetPackageSearchQuickPick=t.ProjectInfoQuickPick=void 0;const n=r(22677);t.ProjectInfoQuickPick=class{info;label;description;constructor(e){this.info=e,this.label=e.name,this.description=e.fullPath}},t.NuGetPackageSearchQuickPick=class{info;label;description;detail;constructor(e){this.info=e,this.label=e.id}},t.NuGetPackageVersionQuickPick=class{info;label;description;detail;constructor(e){this.info=e,this.label=e.version;const t=[];e.isLatest&&t.push(n.nugetStrings.versionLatestLabel),e.isCurrent&&t.push(n.nugetStrings.versionCurrentLabel),t.length>0&&(this.description=`(${t.join(", ")})`)}},t.NuGetPackageUpdateQuickPick=class{info;label;description;detail;constructor(e){this.info=e,this.label=e.id,this.description=e.version}}},29047:(e,t)=>{"use strict";async function r(e){const t=Date.now();return{result:await e(),durationMilliseconds:Date.now()-t}}Object.defineProperty(t,"__esModule",{value:!0}),t.measureExecutionTime=t.runWithDurationTelemetry=t.addResultsCountTelemetry=t.addDotnetSdkTelemetry=t.addIncludePrereleaseTelemetry=t.addCompletedTelemetry=t.cancelAtStepTelemetry=t.addEntrypointTelemetry=void 0,t.addEntrypointTelemetry=function(e,t){e.addOrUpdateProperties({entrypoint:t})},t.cancelAtStepTelemetry=function(e,t){e.addOrUpdateProperties({wasCompleted:String(!1),canceledAtStep:t})},t.addCompletedTelemetry=function(e){e.addOrUpdateProperties({wasCompleted:String(!0)})},t.addIncludePrereleaseTelemetry=function(e,t){e.addOrUpdateProperties({includePrerelease:String(t)})},t.addDotnetSdkTelemetry=function(e,t,r){e.addOrUpdateProperties({dotnetSdkVersion:t,minDotnetSdkPromptSelected:r})},t.addResultsCountTelemetry=function(e,t,r){e.addOrUpdateMeasurements({[r+"ResultsCount"]:t})},t.runWithDurationTelemetry=async function(e,t,n){if(!t)return e();const{result:i,durationMilliseconds:o}=await r(e);return t.addOrUpdateMeasurements({[n+"Duration"]:o}),i},t.measureExecutionTime=r},30114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r={};process.env.VSSERVER_DOTNET_EventPipeOutputPath&&(r={DOTNET_EnableEventPipe:1,DOTNET_EventPipeConfig:"Microsoft-Windows-DotNETRuntime:0x1F000080018:5",DOTNET_EventPipeOutputPath:process.env.VSSERVER_DOTNET_EventPipeOutputPath,DOTNET_ReadyToRun:0,DOTNET_TieredCompilation:1,DOTNET_TC_CallCounting:0,DOTNET_TC_QuickJitForLoops:1,DOTNET_JitCollect64BitCounts:1}),t.default=r},94594:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReliabilityMonitorPath=t.scheduleLaunchReliabilityMonitor=void 0;const n=r(71017),i=r(30114),o=r(89496),s=r(7195),a=r(36661),c=r(6460),u=r(89781);function l(e){return n.join(e["@microsoft/visualstudio-reliability-monitor"],"Microsoft.VisualStudio.Reliability.Monitor")}t.scheduleLaunchReliabilityMonitor=function(e,t,r){!async function(e,t,r){await Promise.resolve();try{const n=l(t),d=a.TelemetryService.getSessionId(o.env.sessionId),p=s.telemetryService?.getTelemetryLevel()??"off",f={...process.env,...i.default};f.DOTNET_MULTILEVEL_LOOKUP="0",f.DOTNET_ROOT=r,(0,c.addDotNetDumpCreationEnvironmentValues)(f),(0,c.setComponentPathsInEnvironment)(f,t,c.VSSERVER_SHARED_COMPONENT_NAME);const h=[];h.push("--vscodeSessionId",d),h.push("--vscodeTelemetryLevel",p),(0,c.launchChildProcess)(t,n,h,e.extensionPath,f),s.logger.log("Reliability monitor launched.",u.LogImportance.low)}catch(e){s.logger.reportExceptionTelemetryAndLog("launchReliabilityMonitor",null,"CsDevKit.Reliability.Monitor.Launch.Error",e,s.telemetryService)}}(e,t,r)},t.getReliabilityMonitorPath=l},61925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServerPath=t.getServiceHubHostEntrypointName=t.launchDotNetServer=t.SERVICEHUB_HOST_COMPONENT_NAME=t.SERVICEHUB_CONTROLLER_COMPONENT_NAME=void 0;const n=r(19679),i=r(33543),o=r(41808),s=r(42600),a=r(89496),c=r(7631),u=r(7195),l=r(77867),d=r(30114),p=r(94594),f=r(6460),h=r(75010),g=r(36661),m=r(71017),v=r(35369),y=r(73228),_=r(69279),S=r(84832),w=r(81249),E=r(54249),b=r(70336),P="serviceBroker";function T(){return m.join("win32"===process.platform?"\\\\.\\pipe":"/tmp",(0,s.v4)())}function C(){return"Microsoft.VisualStudio.Code.ServiceHost"+("win32"===process.platform?".exe":"")}function I(e){return m.join(e["@microsoft/visualstudio-server"],"Microsoft.VisualStudio.Code.Server")}t.SERVICEHUB_CONTROLLER_COMPONENT_NAME="@microsoft/visualstudio-code-servicecontroller",t.SERVICEHUB_HOST_COMPONENT_NAME="@microsoft/visualstudio-code-servicehost",t.launchDotNetServer=async function(e,r,s){let O=null;const x=new h.TelemetryActivity("launch-server",u.telemetryService);async function N(e,t){O=e;try{const e=performance.now(),r=await t(),n=performance.now();return O+=" (succeeded)",{result:r,duration:n-e}}catch(e){throw O+=" (failed)",e}}const k="CsDevKit/Server/Start",A=T(),R=I(r),D=C(),j=a.workspace?.getConfiguration("dotnet")?.get("useLegacyDotnetResolution")||!(0,E.apiIsAvailable)(b.FIND_PATH_API);let M,L;u.telemetryService?.sendTelemetryEvent("CsDevKit/Server/DotnetResolution",{legacy:j.toString()}),j?u.logger.log("Using legacy dotnet resolution."):u.logger.log('Using dotnet resolution provided by ".NET Install Tool".');try{await N("setExecuteBit",(()=>(0,f.setExecuteBit)(r)));const t=await N("acquireRuntime",(()=>(0,l.acquireRuntime)(j,e)));M=t.result,L=m.dirname(M.path),x.addOrUpdateMeasurements({acquireDotNetProcessDependencies:t.duration})}catch(e){throw u.telemetryService?.sendTelemetryErrorEvent(k,{fault:O??"(missing)"}),e}try{const l={...process.env,...d.default};a.workspace.workspaceFolders||(l.EmptyCodeWorkspace="1"),l.DOTNET_MULTILEVEL_LOOKUP="0",l.DOTNET_ROOT=L,l.DOTNET_PROJECTSYSTEM_HOST_EXECCOMMAND="",l.PRJHOST_DOTNET_ROOT=L,l.PRJHOST_ROLL_FORWARD_TO_PRERELEASE="0",l.PRJHOST_ROLL_FORWARD="Major",l.PRJ_BUILD_DOTNET_HOST=M.globalPath??"",l.DOTNET_ROOT_USER=process.env.DOTNET_ROOT??"EMPTY";let p=!1,h=!1;if(M.globalPath){(0,u.setDotNetSdkPath)(M.globalPath);const e=w.parse(`${_.NET_RUNTIME_VERSION}.${_.NET_RUNTIME_VERSION_PATCH}`);if(j){if(M.dotnetInfo){const t=M.dotnetInfo.runtimeVersions["Microsoft.NETCore.App"];let r=M.globalRuntimeMismatchingReason===S.CompatibleDotnetSearchFailedReason.mismatchedHigherVersionRuntimeFound,n=!1,i=!1;for(const o of t){const t=o.version;if(t.major>e.major?r=!0:t.compare(e)>=0&&(t.prerelease?.length>0&&(i=!0),n=!0),r&&n&&i)break}if((r||i)&&(p=!n,!p))if(a.workspace.workspaceFolders&&a.workspace.workspaceFolders.length>0)for(let t=0;t<a.workspace.workspaceFolders.length;t++){const r=await(u.dotnetVersionManager?.getDotnetVersion(a.workspace.workspaceFolders[t].uri.fsPath,u.logger));if(r){if(r.major>e.major){p=!0;break}i&&r.major===e.major&&r.prerelease?.length>0&&(h=!0)}}else r?p=!0:h=!0}p||h||M.globalRuntimeMismatchingReason!==S.CompatibleDotnetSearchFailedReason.mismatchedArchitectureFound||u.telemetryService?.sendTelemetryEvent("CsDevKit/Server/mismatchingArchitectureSDK")}else if(a.workspace.workspaceFolders&&a.workspace.workspaceFolders.length>0){const t=w.parse(_.NET_SDK_SUPPORTED_PREVIEW_RUNTIME_MIN_VERSION);for(let r=0;r<a.workspace.workspaceFolders.length;r++){const n=await(u.dotnetVersionManager?.getDotnetVersion(a.workspace.workspaceFolders[r].uri.fsPath,u.logger));if(n){if(n.major>e.major){p=!0;break}n.major===e.major&&n.prerelease?.length>0&&n.compare(t)>=0&&(h=!0)}}}else p=!0;(p||h)&&(l.PRJHOST_DOTNET_ROOT=m.dirname(M.globalPath),l.DEV_KIT_ON_SDK_RUNTIME="1",l.PRJHOST_ROLL_FORWARD_TO_PRERELEASE="1",u.telemetryService?.sendTelemetryEvent("CsDevKit/Server/UseSDKRuntime"),u.logger.log("Project system hosting process will use runtime installed in SDK."),p&&(l.PRJHOST_ROLL_FORWARD="LatestMajor"))}l.CSDEVKIT_LOG_DIRECTORY=e.logUri.fsPath,await N("addDotNetDumpCreationEnvironmentValues",(()=>(0,f.addDotNetDumpCreationEnvironmentValues)(l))),(0,f.setComponentPathsInEnvironment)(l,r,t.SERVICEHUB_CONTROLLER_COMPONENT_NAME,t.SERVICEHUB_HOST_COMPONENT_NAME,f.VSSERVER_SHARED_COMPONENT_NAME),l.SERVICEHUB_HOST_ENTRYPOINT=D,p&&"darwin"===process.platform&&M.globalPath&&a.workspace.getConfiguration("dotnet").get("workingWithTestSignedSdk")?(l.DOTNET_PROJECTSYSTEM_HOST_ENTRYPOINT=M.globalPath,l.DOTNET_PROJECTSYSTEM_HOST_EXECCOMMAND="exec",l.DOTNET_PROJECTSYSTEM_HOST_INPUT=m.join(r[t.SERVICEHUB_HOST_COMPONENT_NAME],"Microsoft.VisualStudio.Code.ServiceHost.dll")):(l.DOTNET_PROJECTSYSTEM_HOST_ENTRYPOINT=m.join(r[t.SERVICEHUB_HOST_COMPONENT_NAME],D),l.DOTNET_PROJECTSYSTEM_HOST_INPUT="");const C=(0,E.apiIsAvailable)(b.OPTION_TO_CHECK_AND_ACQUIRE_ASPNETCORE);l.DOTNET_ASPIRESERVER_HOST_ENTRYPOINT=C?M.path:M.globalPath??M.path,l.DOTNET_ASPIRESERVER_HOST_RUNTIMECONFIGFILE=m.join(r[t.SERVICEHUB_HOST_COMPONENT_NAME],"Microsoft.VisualStudio.Code.ServiceHost.AspNet.runtimeconfig.json"),l.DOTNET_ASPIRESERVER_HOST_INPUT=m.join(r[t.SERVICEHUB_HOST_COMPONENT_NAME],"Microsoft.VisualStudio.Code.ServiceHost.dll"),l.ASPIRE_HOST_DOTNET_ROOT=C?l.DOTNET_ROOT:l.PRJHOST_DOTNET_ROOT,l.ASPIRE_HOST_ROLL_FORWARD_TO_PRERELEASE=C?"0":l.PRJHOST_ROLL_FORWARD_TO_PRERELEASE,l.ASPIRE_HOST_ROLL_FORWARD=C?"Major":l.PRJHOST_ROLL_FORWARD,a.workspace.getConfiguration("dotnet").get("preferVisualStudioCodeFileSystemWatcher",void 0)&&(l.ENABLE_VSCODE_FILEWATCHER="true");let I=m.join(e.extensionPath,"components/servicehub");const O=await N("createSocket",(()=>function(e){const t=T(),r=new Promise((async(e,r)=>{try{const n=(0,o.createServer)((t=>{try{n.close(),e(t)}catch(e){r(e)}}));n.listen(t)}catch(e){r(e)}}));return{pipeName:t,socket:r}}()));x.addOrUpdateMeasurements({createSocket:O.duration});const F=g.TelemetryService.getSessionId(a.env.sessionId),U=u.telemetryService?.getTelemetryLevel()??"off",B=process.env.CSDEVKIT_CODE_COVERAGE_OUTPUT,V=!!B,$=[],q=V?"dotnet":R;V&&(await u.logger.watch("Installing dotnet-coverage tool...",(async()=>{const t=(0,f.launchChildProcess)(r,"dotnet",["tool","install","dotnet-coverage"],e.extensionPath,l);await(0,y.waitForProcess)(t)})),u.logger.log(`Launching .NET server with code coverage to ${B}`),$.push("tool","run","dotnet-coverage"),$.push("collect",R),$.push("--output",B)),$.push("--serviceHubConfigPath",m.join(I,"servicehub.config.json")),$.push("--pipe",O.result.pipeName),$.push("--pipe-server",A),$.push("--log-directory",e.logUri.fsPath),$.push("--log-verbosity",process.env.CSDEVKIT_VERBOSITY??"Information"),$.push("--vscodeSessionId",F),$.push("--vscodeTelemetryLevel",U),(0,c.isCacheEnabled)(e)&&$.push("--cache-directory",(0,c.getCacheDirectory)(e)),$.push("--component",...Object.values(r));const H=performance.now(),z=await N("launchChildProcess",(()=>(0,f.launchChildProcess)(r,q,$,e.extensionPath,l)));x.addOrUpdateMeasurements({launchChildProcess:z.duration}),z.result.stdout.on("data",(e=>{u.logger.log(`.NET server STDOUT: ${e}`)})),z.result.stderr.on("data",(e=>{u.logger.log(`.NET server STDERR: ${e}`)})),z.result.on("exit",(e=>{u.logger.log(`.NET server exited with ${e}`),u.telemetryService?.sendTelemetryEvent("CsDevKit/Server/Exit",{shutdownReason:"Abnormal"},{exitCode:e??1})}));const W=await O.result.socket,G=await N("mxstream.create",(()=>i.MultiplexingStream.CreateAsync(W)));x.addOrUpdateMeasurements({mxstreamcreate:G.duration});const K=s.getLimitedAccessServiceBroker(n.ServiceAudience.local,v.Map(),n.ClientCredentialsPolicy.requestOverridesDefault);(async function(e,t){const r=await e.offerChannelAsync(P);try{const i=new n.MultiplexingRelayServiceBroker(t,e,!1);n.FrameworkServices.remoteServiceBroker.constructRpc(i,r),await i.completion}finally{r.stream.end()}})(G.result,K).catch((e=>console.log(`Proffer of a service broker failed: ${e}`)));const X=await async function(e){const t=await e.acceptChannelAsync(P);return n.FrameworkServices.remoteServiceBroker.constructRpc(t)}(G.result);s.profferRemoteServiceBroker(X,G.result,n.ServiceSource.otherProcessOnSameMachine,null);const J=performance.now();u.logger.log(`.NET server started and IPC established in ${(J-H).toFixed()}ms`),u.telemetryService?.sendTelemetryEvent(k),x.sendTelemetry()}catch(e){throw u.logger.reportExceptionTelemetryAndLog("launchDotNetServer",O,"",e,u.telemetryService),e}finally{u.telemetryService?.sendTelemetryEvent("CsDevKit/Reliability/Monitor/Launch"),(0,p.scheduleLaunchReliabilityMonitor)(e,r,L)}return{brokeredServiceServerPipeName:A}},t.getServiceHubHostEntrypointName=C,t.getServerPath=I},6460:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.launchChildProcess=t.addDotNetDumpCreationEnvironmentValues=t.setComponentPathsInEnvironment=t.setExecuteBit=t.VSSERVER_SHARED_COMPONENT_NAME=void 0;const n=r(32081),i=r(71017),o=r(73292),s=r(7195),a=r(61925),c=r(94594);t.VSSERVER_SHARED_COMPONENT_NAME="@microsoft/visualstudio-server-shared";t.setExecuteBit=async function(e){if("win32"!==process.platform){const t=i.join(e[a.SERVICEHUB_CONTROLLER_COMPONENT_NAME],"Microsoft.VisualStudio.Code.ServiceController"),r=i.join(e[a.SERVICEHUB_HOST_COMPONENT_NAME],(0,a.getServiceHubHostEntrypointName)()),n=[(0,a.getServerPath)(e),t,r,(0,c.getReliabilityMonitorPath)(e)];await Promise.all(n.map((e=>(0,o.chmod)(e,"0755"))))}};const u=/[\-/]/g;t.setComponentPathsInEnvironment=function(e,t,...r){for(const n of r)e["COMPONENT_"+n.replace("@","").replace(u,"_").toUpperCase()]=t[n]},t.addDotNetDumpCreationEnvironmentValues=function(e){"win32"!==process.platform&&(e.DOTNET_DbgEnableMiniDump="1",e.DOTNET_DbgMiniDumpType="2",e.DOTNET_DbgMiniDumpName=i.join(function(){const e=r(22037),t=r(57147);let n="";n="linux"===process.platform?i.join(e.homedir(),".cache","Microsoft","csdevkit","dumps"):i.join(e.tmpdir(),"csdevkit","dumps");try{t.existsSync(n)||t.mkdirSync(n,{recursive:!0})}catch(t){s.logger.log(`Failed to create crash dump path ${n} due to ${t}`),n=e.tmpdir()}return n}(),"%e.%d.dmp"),e.DOTNET_EnableCrashReport="1")},t.launchChildProcess=function(e,t,r,o,s){if("win32"===process.platform){const a=function(e){return i.join(e["@microsoft/visualstudio-code-launcher"],"escape-node-job")}(e),c=[];return c.push(t),c.push(...r),n.spawn(a,c,{windowsHide:!0,cwd:o,env:s})}return n.spawn(t,r,{windowsHide:!0,cwd:o,env:s})}},75056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveDocumentsInformationService=t.ActiveDocumentsChangesEventArgs=void 0;const n=r(82361),i=r(89496);class o{newActiveDocument;newDocuments;closedDocuments;constructor(e,t,r){e&&(this.newActiveDocument=e),t&&(this.newDocuments=t),r&&(this.closedDocuments=r)}}t.ActiveDocumentsChangesEventArgs=o;class s extends n.EventEmitter{isInitialized;constructor(){super()}rpcEventNames=["activeDocumentsChanged"];getActiveDocuments(){this.isInitialized||(i.window.onDidChangeActiveTextEditor((e=>{if(e){const t=e.document.fileName;this.emit("activeDocumentsChanged",new o(t))}})),i.workspace.onDidOpenTextDocument((e=>{const t=e.fileName;this.shouldIgnoreDocument(t)||this.emit("activeDocumentsChanged",new o(void 0,[t]))})),i.workspace.onDidCloseTextDocument((e=>{const t=e.fileName;this.shouldIgnoreDocument(t)||this.emit("activeDocumentsChanged",new o(void 0,[],[t]))})));const e=[],t=i.window.activeTextEditor?.document?.fileName;t&&e.push(t);const r=i.workspace.textDocuments;for(var n=0;n<r.length;n++){const i=r[n].fileName;this.shouldIgnoreDocument(i)||i===t||e.push(i)}return e}shouldIgnoreDocument(e){return e.endsWith(".git")}getDirtyDocuments(){return i.workspace.textDocuments.filter((e=>e.isDirty)).map((e=>e.fileName))}async saveDocument(e){try{const t=i.workspace.textDocuments.find((t=>t.fileName===e&&t.isDirty));return!t||await t.save()}catch(e){return!1}}}t.ActiveDocumentsInformationService=s},98387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIChatCompletionEventArgs=t.AspireCopilotService=void 0;const n=r(89496),i=r(82361),o=r(81297),s=r(89781);class a extends i.EventEmitter{rpcEventNames=["responseGenerated"];outputChannel;logger;constructor(e){super(),e.activationArguments?.needEvents&&this.on("responseGenerated",(e=>this.emit("responseGenerated",e))),this.outputChannel=(0,o.lazyLoad)((()=>n.window.createOutputChannel("Cobra",{log:!0}))),this.logger=(0,o.lazyLoad)((()=>new s.Logger(this.outputChannel())))}dispose(){this.logger().log("Disposing CobraService"),this.off("responseGenerated",(e=>this.emit("responseGenerated",e)))}async log(e,t){!0!==t?.isCancellationRequested&&this.logger().log(e)}async generateResponse(e,t){const r=JSON.stringify(e,null,2);await this.logTrace(`Generating response with message: ${r}`,t);var i=await n.lm.selectChatModels({vendor:"copilot",family:e.model??"gpt-4o"});if(0===i.length)throw new Error("No models selected");if(i.length>1)throw new Error("Multiple models available");const o=i[0],s=e.messages??[];let a=[];for(let e of s)if("assistant"===e.role){let t=e;void 0!==t.tool_calls&&t.tool_calls.length>0&&(a=a.concat(t.tool_calls))}const u=s.map((e=>{if("user"===e.role){let t=e;return n.LanguageModelChatMessage.User(t.content,t.name)}if("system"===e.role){let t=e;return n.LanguageModelChatMessage.Assistant(t.content)}if("tool"===e.role){let t=e,r=a.find((e=>e.id===t.tool_call_id));if(void 0===r)throw new Error("Tool call object not found");let i=`\n${r.function.name}\n- tool call id: ${t.tool_call_id}\n- tool call arguments: ${r.function.arguments}\n- tool call result: ${t.content}\n`;return n.LanguageModelChatMessage.User(i)}if("assistant"===e.role){let t=e;if(void 0!==t.tool_calls&&t.tool_calls.length>0)return null;if(void 0!==t.content)return n.LanguageModelChatMessage.Assistant(t.content,t.name);throw new Error("Unrecognized assistant message")}throw new Error("Unrecognized message role")})),l=(e.tools??[]).map((e=>({name:e.function.name,description:e.function.description,inputSchema:e.function.parameters})));await this.logTrace(`Using tools: ${JSON.stringify(l)}`),await this.logTrace(`Using messages: ${JSON.stringify(u)}`);const d=[];try{const e=await o.sendRequest(u.filter((e=>null!==e)),{tools:l});for await(const t of e.stream)if(t instanceof n.LanguageModelTextPart){await this.logTrace(t.value);const e=new c({created:Date.now()/1e3,choices:[{index:0,message:{role:"assistant",content:t.value},delta:{role:"assistant",content:t.value}}],object:"chat.completion",model:o.family});d.push(t),this.emit("responseGenerated",e)}else{if(!(t instanceof n.LanguageModelToolCallPart))throw new Error("Unrecognized chunk type");{await this.log(`Tool call: ${t.name}`),await this.log(`Arguments: ${JSON.stringify(t.input)}`);const e=new c({created:Date.now()/1e3,choices:[{index:0,delta:{role:"assistant",tool_calls:[{id:t.callId,type:"function",function:{name:t.name,arguments:JSON.stringify(t.input)}}]}}],object:"chat.completion",model:o.family});d.push(t),this.emit("responseGenerated",e)}}if(await this.logTrace("Response generated"),await this.logTrace("Response chunks: "+d.length),d.length>0){const e=d.map((e=>e instanceof n.LanguageModelTextPart?e.value:"")).join(""),t=d.map((e=>e instanceof n.LanguageModelToolCallPart?{id:e.callId,type:"function",function:{name:e.name,arguments:JSON.stringify(e.input)}}:null)).filter((e=>null!==e)),r=t.length>0?"tool_calls":"stop",i={created:Date.now()/1e3,choices:[{index:0,message:{role:"assistant",content:e,tool_calls:t},finish_reason:r}],object:"chat.completion",model:o.family};this.log(`Final response: ${JSON.stringify(i)}`);const s=new c(i);return this.emit("responseGenerated",s),i}throw new Error("No response generated")}catch(e){throw await this.log(`Error: ${e}`),e instanceof n.LanguageModelError&&(await this.log(`Error message: ${e.message}`),await this.log("It appears that we don't have access to language model, please consent on the enable model access window")),e}}async logTrace(e,t){!0!==t?.isCancellationRequested&&await this.logger().log(e,s.LogImportance.low)}}t.AspireCopilotService=a;class c{chunk;constructor(e){this.chunk=e}}t.OpenAIChatCompletionEventArgs=c},31467:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrokeredServiceExportsRegistrar=t.BrokeredServiceExportsRegistrarState=void 0,t.BrokeredServiceExportsRegistrarState=class{registeredServices={}},t.BrokeredServiceExportsRegistrar=class{state;constructor(e){this.state=e}async registerExports(e,t){let r=this.state.registeredServices[e];void 0===r&&(r=[],this.state.registeredServices[e]=r),Array.isArray(t)?r.push(...t):r.push(t)}async getExports(e){const t=this.state.registeredServices[e];return t?[...t]:[]}}},84182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBuildResult=void 0,t.parseBuildResult=function(e){let t,r=[];const n=/^(?:\s*\d+>)?(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\)\s*:\s+((?:fatal +)?error|warning|info)\s+(\w+\d+)\s*:\s*(.*)$/gm;do{t=n.exec(e),t&&r.push(t)}while(t);return r}},88242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertBuildResultsToDiagnostics=t.reportBuildResultsToCSharpExtension=t.startBuild=t.isCSharpExtensionBuildResultServiceAvailable=void 0;const n=r(89496),i=r(65979),o=r(69279),s=r(39491),a=r(7195),c=r(84182);async function u(){const e=n.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension: "+o.EXTENSION_ID);const t=e.exports.serviceBroker;return await t.getProxy(i.default.csharpExtensionBuildResultService)}function l(e){const t={};return e.forEach((e=>{const[r,i]=function(e){const t=e[1],r=e[2],i=e[3],o=e[4],a=e[5],c=r.split(","),u=parseInt(c[0])-1,l=parseInt(c[1])-1,d=new n.Range(u,l,u,l);let p;switch(s(d,"Build diagnostic range could not be calculated. Attempted to parse value: "+r),i){case"error":default:p=n.DiagnosticSeverity.Error;break;case"warning":p=n.DiagnosticSeverity.Warning;break;case"info":p=n.DiagnosticSeverity.Information}const f=new n.Diagnostic(d,a,p);return f.code=o,[t,f]}(e),o=t[r];o?o.push(i):t[r]=[i]})),t}t.isCSharpExtensionBuildResultServiceAvailable=async function(){return null!==await u()},t.startBuild=async function(){const e=await u();try{s(e),e?.buildStarted()}finally{e?.dispose()}},t.reportBuildResultsToCSharpExtension=async function(e){a.logger.log("Reporting build results to C# extension.");const t=(0,c.parseBuildResult)(e);if(0===t.length)return void a.logger.log("No problems found in the build");const r=l(t),n=await u();try{s(n),n?.reportBuildResult(r)}finally{n?.dispose()}},t.convertBuildResultsToDiagnostics=l},81855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildService=void 0;const n=r(20695);t.BuildService=class{build(e,t){var r=new n.BuildActionOptions(n.BUILD);return(0,n.setSolutionBuildAction)(r,e)}rebuild(e,t){var r=new n.BuildActionOptions(n.BUILD,!0);return(0,n.setSolutionBuildAction)(r,e)}}},11694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentExportsState=t.ComponentExportsService=void 0;const n=r(7631),i=r(7195),o=r(89781),s=r(73228),a=r(71017),c=r(89496),u=r(90965);t.ComponentExportsService=class{state;constructor(e){this.state=e}getExports(e){return this.state.componentExports[e]??null}};class l{componentExports;constructor(e){this.componentExports=e}static async create(e,t){let r={};return r=await(0,n.loadOrCreateCachedValue)(e,"component-exports",(async()=>await l.gatherComponentExports(t,r))),await l.gatherExtensionExports(r),new l(r)}static async gatherComponentExports(e,t){for(const r in e){const n=e[r];await l.tryGetExportsJson(r,n,t)}return t}static async gatherExtensionExports(e){const t=u.idsOfExtensionsAllowedToExtendCsDevKit.map((e=>c.extensions.getExtension(e)));for(const r of t){if(!r)continue;const t=r.packageJSON;t.csdevkitExports&&(this.gatherExports(e,t.csdevkitExports,(e=>a.join(r.extensionPath,e))),i.logger.log(`Read exports from ${r.id} in ${a}.`,o.LogImportance.low))}}static async tryGetExportsJson(e,t,r){try{const n=a.join(t,"exports.json"),c=await(0,s.readJsonFile)(n);this.gatherExports(r,c,(e=>e.replace("$(ComponentPath)",t))),i.logger.log(`Read exports from ${e} in ${a}.`,o.LogImportance.low)}catch(t){i.logger.log(`No exports read from ${e}.`,o.LogImportance.low)}}static gatherExports(e,t,r){for(const n in t){let i=e[n];void 0===i&&(i=[],e[n]=i);let o=t[n];for(let e=0;e<o.length;e++)i.push(r(o[e]))}}}t.ComponentExportsState=l},65979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(19679);class i{static helloWorld=Object.freeze({extensionHost:new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("helloVSCodeExtensionHost","1.0"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders),serviceHub:new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("helloServiceHubDotNetHost","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders),create:function(e){return new n.ServiceJsonRpcDescriptor(e,n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders)}});static environmentService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.NoDelay.EnvironmentService","0.1"));static solutionFileService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.SolutionFileService","0.1"));static buildService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.BuildService","0.1"));static telemetrySessionUpdateService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Telemetry.TelemetrySessionUpdateService","0.1"));static diagnosticsService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.DiagnosticsService","0.1"));static outOfProcServiceRegistration=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.OutOfProcServiceRegistration","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static solutionExplorerService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.NoDelay.SolutionViewService","0.1"));static projectTreeProvider=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.ProjectTreeProvider","0.1"));static projectIconSourceService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.CpsProjectIconSourceService","0.1"));static componentExportsService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ComponentExportsService","0.1"));static brokeredServiceExportsRegistrar=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.BrokeredServiceExportsRegistrar","0.1"));static errorReportingService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ErrorReportingService","0.1"));static activeDocumentsInformationService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ActiveDocumentsInformationService","0.1"));static logOutputChannelService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.LogOutputChannelService","0.1"));static outputChannelService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.OutputChannelService","0.1"));static tokenAcquisitionService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.TokenAcquisitionService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static projectQueryExecutionService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.Query.Remoting.QueryExecutionService","0.3"));static projectInitializationStatusService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.ProjectInitializationStatusService","0.1"));static nugetCommandsService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.NuGetCommandsService","0.1"));static nugetSolutionRestoreService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.NuGetSolutionRestoreService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders));static aspireCopilotService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.Aspire.CobraService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders,{protocolMajorVersion:3}));static hotReloadLogger=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.HotReloadLogger","0.1"));static hotReloadClientListener=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.HotReloadClientListener","0.1"));static hotReloadOptionService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.HotReloadOptionService","0.1"));static hotReloadService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.HotReloadClientService","0.1"));static launchConfigurationService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.LaunchConfigurationService",void 0),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders,{protocolMajorVersion:3}));static debugTargetFrameworkService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.ProjectSystem.DebugTargetFrameworkService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders,{protocolMajorVersion:3}));static dotnetDebugConfigurationService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.DotnetDebugConfigurationService","0.1"));static vsCodeFileWatcherService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.VsCodeFileWatcherService","0.1"));static templateService=this.create(n.ServiceMoniker.create("Microsoft.TemplateEngine.VSCode.TemplateService","0.1"));static csharpExtensionBuildResultService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.CSharpExtension.BuildResultService","0.1"));static dotnetDebugLaunchService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.DotnetDebugLaunchService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders,{protocolMajorVersion:3}));static workspaceConfigurationOptionsService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.OptionService","0.1"));static startupProjectService=this.create(n.ServiceMoniker.create("Microsoft.VisualStudio.StartupProjectService","0.1"));static vscodeAzureFunctionExtensionService=Object.freeze(new n.ServiceJsonRpcDescriptor(n.ServiceMoniker.create("Microsoft.VisualStudio.Debugger.VSCodeAzureFunctionExtensionService","0.1"),n.Formatters.Utf8,n.MessageDelimiters.HttpLikeHeaders,{protocolMajorVersion:3}));static create(e){return Object.freeze(new n.ServiceJsonRpcDescriptor(e,n.Formatters.MessagePack,n.MessageDelimiters.BigEndianInt32LengthHeader,{protocolMajorVersion:3}))}}t.default=i},6315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDotnetDebugConfigurationServiceResultResolver=t.LaunchTargetToDebugConfigurationConverter=t.DotnetDebugConfigurationService=t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY=t.DotnetDebugConfigurationServiceError=t.DebugTelemetryCode=t.DotnetDebugConfigurationServiceErrorKind=void 0;const n=r(89496),i=r(65979),o=r(98727),s=r(22677),a=r(75010),c=r(7195),u=r(69279),l=r(81249),d=r(49397),p=r(20695),f=r(49230),h=r(17407),g=r(66862);let m=r(22037);const v=r(71017),y=r(28510),_="2.22.8";var S,w;!function(e){e.internalError="internalError",e.launchCancelled="launchCancelled",e.userError="userError"}(S||(t.DotnetDebugConfigurationServiceErrorKind=S={})),function(e){e[e.unknown=0]="unknown",e[e.launchCancelled=1]="launchCancelled",e[e.invalidActivationId=32769]="invalidActivationId",e[e.noLaunchTargets=32770]="noLaunchTargets",e[e.invalidAzureFunctionExtension=32771]="invalidAzureFunctionExtension",e[e.invalidAzureFunctionExtensionVersion=32772]="invalidAzureFunctionExtensionVersion",e[e.invalidAzureFunctionExportAPI=32773]="invalidAzureFunctionExportAPI",e[e.azureFunctionStartFuncProcessFailed=32774]="azureFunctionStartFuncProcessFailed",e[e.noBrokeredService=36608]="noBrokeredService",e[e.missingExeBeforeBrowserTarget=36609]="missingExeBeforeBrowserTarget",e[e.failedToConvertLaunchTargetToConfig=36610]="failedToConvertLaunchTargetToConfig",e[e.noImplCustomLaunchTarget=36611]="noImplCustomLaunchTarget",e[e.noImplMultipleDebugEngines=36612]="noImplMultipleDebugEngines",e[e.noImplMultipleDebugLaunch=36613]="noImplMultipleDebugLaunch",e[e.noDebugConfig=36614]="noDebugConfig",e[e.failedToFindProjectForFile=36615]="failedToFindProjectForFile",e[e.noValidBrowser=36616]="noValidBrowser",e[e.missingCSharpExtensionExport=36617]="missingCSharpExtensionExport",e[e.noTaskProvider=36624]="noTaskProvider",e[e.missingExeBeforeBrowserInspectUriTarget=36625]="missingExeBeforeBrowserInspectUriTarget",e[e.invalidCSharpExtVersionAspire=36626]="invalidCSharpExtVersionAspire",e[e.invalidCSharpExtVersionAzFunc=36627]="invalidCSharpExtVersionAzFunc",e[e.noDebugEnginesProvidded=36628]="noDebugEnginesProvidded",e[e.unknownLaunchTarget=36627]="unknownLaunchTarget"}(w||(t.DebugTelemetryCode=w={}));class E{kind;message;telemetryCode;constructor(e,t,r){this.kind=e,this.message=t,this.telemetryCode=r}}t.DotnetDebugConfigurationServiceError=E,t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY="debuggerStartDebugTelemetry",t.DotnetDebugConfigurationService=class{serviceBroker;brokeredServiceHost;constructor(e,t){this.serviceBroker=e,this.brokeredServiceHost=t}async resolveDebugConfigurationWithLaunchConfigurationService(e,t,r){const o=await this.serviceBroker.getProxy(i.default.launchConfigurationService);if(o)try{const i=n.workspace.getConfiguration("csharp.preview").get("improvedLaunchExperience",!0);if(i&&!e){const r=(0,f.getLaunchableProjectInfoObserver)().getCurrentProjects();if(0===r.length)return{configurations:[],error:new E(S.userError,s.debugProjectLaunchStrings.errorNoLaunchableProjects,w.failedToFindProjectForFile)};const n=await h.startupProjectService.getOrPickCurrentStartupProject();if(!n)return{configurations:[],error:new E(S.launchCancelled,s.debugProjectLaunchStrings.errorNoStartupProjectSelected,w.launchCancelled)};const i=r.find((e=>e.fullPath===n.fullPath));if(!i)return{configurations:[],error:new E(S.internalError,s.debugProjectLaunchStrings.errorStartupProjectNotFound,w.failedToFindProjectForFile)};t.name=g.DotnetDynamicConfigurationProvider.createDebugConfigurationName(i.displayName),e=i.fullPath}if(!e)return{configurations:[],error:new E(S.userError,s.debugProjectLaunchStrings.errorNoProjectFound,w.failedToFindProjectForFile)};let a={};const c=Date.now();if(!await this.isMAUIProject(e)){let r=await this.buildProject(e);const i=Date.now();a.buildCompletedTimestamp=`0x${i.toString(16)}`,a.totalBuildTime=i-c,t.preLaunchTask||t.preRestartTask||(r||n.window.showWarningMessage(s.dotnetDebugConfigurationServiceStrings.warningMissingBuildTask),t.preRestartTask=r)}if(!i){const n=t.launchConfigurationId;if(n&&!await o.setActiveLaunchConfiguration(e,n,r))return{configurations:[],error:new E(S.userError,s.dotnetDebugConfigurationServiceStrings.invalidLaunchConfigurationId(n),w.invalidActivationId)}}const u=t.noDebug??!1,l="linux"!==m.platform().toLowerCase()&&!n.env.remoteName&&n.env.uiKind!==n.UIKind.Web,d=await o.queryLaunchTargets(e,{noDebug:u,preferSSL:l},r);if(!d||0===d.length)return{configurations:[],error:new E(S.userError,s.debugProjectLaunchStrings.errorNoLaunchTargets(e),w.noLaunchTargets)};t.brokeredServicePipeName=await this.brokeredServiceHost.getBrokeredServiceServerPipeName();const p=await b.convert(t,d,a);return 0!==p.length?{configurations:p}:{configurations:[],error:new E(S.internalError,"Unable to convert launch target to a vscode debug configuration.",w.failedToConvertLaunchTargetToConfig)}}catch(e){if(e instanceof E)return{configurations:[],error:e};{let t;return"string"==typeof e?t=e:e instanceof Error&&(t=e.message),{configurations:[],error:new E(S.internalError,t,w.unknown)}}}finally{o?.dispose()}return{configurations:[],error:new E(S.internalError,"Unable to obtain services to resolve dotnet debug configurations.",w.noBrokeredService)}}async buildProject(e){if(!c.dotnetTaskProvider)throw new E(S.internalError,void 0,w.noTaskProvider);const t=await(0,d.dotnetSolutionBuildActionUsingTask)(p.BUILD,e,void 0,void 0,!0);if(t.taskName&&!await t.success){const t={title:s.promptStrings.yes},r={title:s.promptStrings.no,isCloseAffordance:!0},i={modal:!0,detail:s.dotnetDebugConfigurationServiceStrings.errorBuildDetails(e)};if(await n.window.showErrorMessage(s.dotnetDebugConfigurationServiceStrings.errorBuildTitle,i,t,r)!==t)throw new E(S.launchCancelled,void 0,w.launchCancelled)}return t.taskName}async isMAUIProject(e){let t=!1;if(n.extensions.getExtension(u.MAUI_EXTENSION_ID)){const r={context:"Projects",query:{$properties:["Path","Capabilities"],$filter:{ProjectsByCapabilities:["Android | Apple | Maui | UseMaui | UseMauiCore"]}}},n=await c.projectQueryableSpace.executeQuery(r);if(n&&n.Items){let r=e.replace(/[\\/]+/g,"/");t=n.Items.some((e=>{if(e&&e.Path){let t=e.Path.replace(/[\\/]+/g,"/");return"win32"!==m.platform()&&"darwin"!==m.platform()||(t=t.toLowerCase(),r=r.toLowerCase()),t===r}return!1}))}}return t}};class b{static async convert(e,r,i){let a=[];for(let u of r){if(u.debugEngines.length>1)throw new E(S.internalError,s.dotnetDebugConfigurationServiceStrings.errorMultipleDebugEngines(u.debugEngines.join(",")),w.noImplMultipleDebugEngines);if(o.ExeLaunchTarget.is(u)){u.isConsoleApp&&(i.projectType="Console");const r=b.convertExeLaunchTarget(e,u);if(r.env&&r.env.DEBUG_SESSION_PORT&&r.env.DEBUG_SESSION_TOKEN&&(i.projectType="Aspire",r.isAspire=!0,!b.doesCSharpExtensionSupportAspire()))throw new E(S.userError,s.dotnetDebugConfigurationServiceStrings.errorAspireLaunchMinimumVersion(_),w.invalidCSharpExtVersionAspire);r[t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY]=i,a.push(r)}else if(o.BrowserInspectUriTarget.is(u)){if(!(u.debugEngines&&u.debugEngines.length>0))throw new E(S.internalError,"Missing 'type' on WASMLaunchTarget.",w.failedToConvertLaunchTargetToConfig);{const r=u.debugEngines[0];if("blazorwasm"!==r)throw new E(S.internalError,`Unknown an WASMLaunchTarget type: ${r}.`,w.failedToConvertLaunchTargetToConfig);{const r=a.pop();if(!r)throw new E(S.internalError,"Expected an ExeLaunchTarget type before seeing a BrowserInspectUriTarget for resolving targets.",w.missingExeBeforeBrowserInspectUriTarget);{r[t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY].projectType="Blazorwasm";const i=await b.getBrowserType();if(!i)throw new E(S.internalError,"A valid browser is not installed.",w.noValidBrowser);if(l.compareIdentifiers(n.version,"1.85.0")>=0){const t=b.convertBrowserInspectUriLaunchTarget(e,i,u);a.push({...r,serverReadyAction:{action:"startDebugging",config:t,pattern:"\\bNow listening on:\\s+https?://\\S+",killOnServerStop:!0}})}else a.push(b.convertBrowserInspectUriLaunchTarget(e,i,u))}}}}else if(o.BrowserLaunchTarget.is(u)){const e=a.pop();if(!e)throw new E(S.internalError,"Expected an ExeLaunchTarget type before seeing a BrowserLaunchTarget for resolving targets.",w.missingExeBeforeBrowserTarget);{const r=b.convertNoDebugBrowserLaunchTarget(u);e[t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY].projectType="Web",a.push({...e,...r})}}else{if(!o.AzureFunctionsLaunchTarget.is(u)){if(o.CustomLaunchTarget.is(u)){for(var c in e.type=u.debugEngines[0],u.launchOptions&&(e.noDebug=u.launchOptions.noDebug),u.options)e[c]=u.options[c];return[e]}throw o.ErrorLaunchTarget.is(u)?new E(S.userError,u.userMessage):new E(S.internalError,"Unknown Launch Target type",w.unknownLaunchTarget)}{i.projectType="AzureFunctions",(0,y.validateCSharpExtensionVersionForAzFunctions)();const r=(0,y.getAzureFunctionAPIExports)();if(await r.isFuncCoreToolsInstalled(s.vsCodeAzureFunctionExtensionServiceStrings.errorFuncCoreToolsMissing)){const r=b.convertAzureFunctionsLaunchTarget(e,u);r[t.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY]=i,a.push(r)}}}}return a}static convertAzureFunctionsLaunchTarget(e,t){if(t.debugEngines.length<1)throw new E(S.internalError,s.dotnetDebugConfigurationServiceStrings.errorNoDebugEngine,w.noDebugEnginesProvidded);const r=v.dirname(t.functionsApp);let n=["--no-build"];t.isUsingSSL&&!n.includes("--useHttps")&&n.push("--useHttps"),t.commandLineArguments&&(n=n.concat(t.commandLineArguments.split(" ")));const o=b.convertEnvironmentVariablesToObj(t.environmentVariables);return{...e,type:t.debugEngines[0],program:t.functionsApp,cwd:t.directory,checkForDevCert:t.isUsingSSL,launchService:{name:i.default.vscodeAzureFunctionExtensionService.moniker.name,version:i.default.vscodeAzureFunctionExtensionService.moniker.version},launchServiceData:{[y.VSCodeAzureFunctionExtensionLaunchDataKeys.buildPath]:r,[y.VSCodeAzureFunctionExtensionLaunchDataKeys.args]:n,[y.VSCodeAzureFunctionExtensionLaunchDataKeys.env]:o}}}static convertExeLaunchTarget(e,t){if(t.debugEngines.length<1)throw new E(S.internalError,s.dotnetDebugConfigurationServiceStrings.errorNoDebugEngine,w.noDebugEnginesProvidded);let r="internalConsole";return t.isConsoleApp&&(r=this.getDebugOption("console","internalConsole"),"internalConsole"===r&&e.noDebug&&(r="integratedTerminal")),{...e,type:t.debugEngines[0],program:t.executable,args:t.commandLineArguments,cwd:t.directory,env:b.convertEnvironmentVariablesToObj(t.environmentVariables),console:r,checkForDevCert:t.isUsingSSL,launchSettingsProfile:null,debugConsoleVerbosity:this.getDebugOption("debugConsoleVerbosity","minimal")}}static convertBrowserInspectUriLaunchTarget(e,t,r){return{name:e.name+" Browser",type:t,request:"launch",timeout:3e4,webRoot:"${workspaceFolder}",url:r.url,inspectUri:r.inspectUri,noDebug:e.noDebug,cascadeTerminateToConfigurations:[e.name]}}static convertNoDebugBrowserLaunchTarget(e){return{serverReadyAction:{action:"openExternally",pattern:e.pattern??"\\bNow listening on:\\s+https?://\\S+",uriFormat:e.url}}}static getDebugOption(e,t){const r=n.workspace.getConfiguration("csharp.debug");if(r){const t=r.get(e);if(t)return t}return t}static async getBrowserType(){const e=await n.extensions.getExtension(u.CSHARP_EXTENSION_ID),t=e?.packageJSON.version;if(!e||!t)throw new E(S.internalError,"Could not obtain exports from C# Extension ",w.missingCSharpExtensionExport);if(l.compareIdentifiers(t,u.CSHARP_EXTENSION_BLAZORWASM_REQUIRED_VERSION)<0)throw new E(S.internalError,`The C# extension is installed, but has version ${t} which is incompatible with blazorwasm Debug Launch. Please update your C# Extension.`,w.missingCSharpExtensionExport);return await e.exports.determineBrowserType()}static convertEnvironmentVariablesToObj(e){let t={};if(Array.isArray(e)){for(let r=0;r<e.length;r++){const n=e[r];t[n.Key]=n.Value}return t}if(e instanceof Map){for(const r in e){const n=e.get(r);t[r]=n??""}return t}return e}static doesCSharpExtensionSupportAspire(){const e=n.extensions.getExtension(u.CSHARP_EXTENSION_ID),t=e?.packageJSON.version;return!!t&&l.gte(t,_)}}t.LaunchTargetToDebugConfigurationConverter=b,t.IDotnetDebugConfigurationServiceResultResolver=class{static resolve(e){const t=new a.TelemetryActivity("DotnetDebugConfigurationService/resolve",c.telemetryService);try{if(e.error){t.addOrUpdateProperties({succeeded:String(!1)});const r=e.error;switch(r.kind){case S.launchCancelled:return void t.addOrUpdateMeasurements({telemetryCode:w.launchCancelled});case S.internalError:case S.userError:t.addOrUpdateMeasurements({telemetryCode:r.telemetryCode??w.unknown});const e=r.message??s.debugProjectLaunchStrings.errorGenericFailedToGetConfigurations;return n.window.showErrorMessage(e),null;default:throw new Error(`Unexpected error kind: '${r.kind}'`)}}const r=e.configurations;if(0===r.length)return t.addOrUpdateProperties({succeeded:String(!1)}),t.addOrUpdateMeasurements({telemetryCode:w.noDebugConfig}),n.window.showErrorMessage(s.debugProjectLaunchStrings.errorNoConfigurations),null;if(1===r.length)return t.addOrUpdateProperties({succeeded:String(!0)}),r[0];if(2===r.length){const e=n.debug.onDidStartDebugSession((t=>{t.name===r[0].name&&(e.dispose(),n.debug.startDebugging(t.workspaceFolder,r[1],t))}));return r[0]}if(r.length>2)return t.addOrUpdateProperties({succeeded:String(!1)}),t.addOrUpdateMeasurements({telemetryCode:w.noImplMultipleDebugLaunch}),n.window.showErrorMessage(s.debugProjectLaunchStrings.errorDebugMultipleConfigurations),null;throw new Error("Unexpected configuration array from IDotnetDebugConfigurationServiceResult.")}finally{t.sendTelemetry()}}}},60700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DotnetDebugLaunchService=void 0;const n=r(89496),i=r(6315);t.DotnetDebugLaunchService=class{brokeredServiceHost;constructor(e){this.brokeredServiceHost=e}async launchTargets(e,t,r){let o={name:e,type:"dotnet",request:"launch",brokeredServicePipeName:await this.brokeredServiceHost.getBrokeredServiceServerPipeName()};const s=await i.LaunchTargetToDebugConfigurationConverter.convert(o,t,{});if(s&&s.length>0){const e={configurations:s},t=i.IDotnetDebugConfigurationServiceResultResolver.resolve(e);if(t)return r.aspireSession&&(t[i.DEBUGGER_START_DEBUG_TELEMETRY_PROPERTY].isAspireLaunch=!0,t.aspireSession=r.aspireSession),await n.debug.startDebugging(void 0,t,void 0)}return!1}}},22485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReportingService=void 0;const n=r(89496),i=r(22677),o=r(69279),s=r(65979),a=r(7195),c=r(16260),u=r(14918);t.ErrorReportingService=class{context;constructor(e){this.context=e}async reportError(e,t){var r=void 0;const l=[];if(t?.additionalLogFile&&l.push(i.promptStrings.openLog),t?.openSettingPage&&l.push(i.promptStrings.openSettings),t?.promptToDisableExtension){if(r=new c.TelemetryEvent("prompt-project-unsupported",a.telemetryService),!(0,u.doesCSharpExtensionSupportDeferral)())return r?.addOrUpdateProperties({deferralnotsupported:String(!0)}),void r?.sendTelemetry();l.push(i.promptStrings.disableExtensionButton)}if(t?.doNotShowInWorkspace){t?.promptToDisableExtension?l.push(i.promptStrings.doNotShowAgain):l.push(i.promptStrings.doNotShowInWorkspaceAgain);const e="suppressMessage."+t.doNotShowInWorkspace;if(this.context.workspaceState.get(e))return r?.addOrUpdateProperties({skipped:String(!0)}),void r?.sendTelemetry();r?.addOrUpdateProperties({skipped:String(!1)})}t?.openOutputChannel&&l.push(i.promptStrings.openLogChannel),r?.sendTelemetry();const d=await n.window.showInformationMessage(e,...l);if(t?.additionalLogFile&&d===i.promptStrings.openLog){const e=await n.workspace.openTextDocument(t?.additionalLogFile);e&&await n.window.showTextDocument(e)}else if(!t?.doNotShowInWorkspace||d!==i.promptStrings.doNotShowInWorkspaceAgain&&d!==i.promptStrings.doNotShowAgain){if(t?.openSettingPage&&d===i.promptStrings.openSettings)await n.commands.executeCommand("workbench.action.openSettings",t?.openSettingPage);else if(t?.openOutputChannel&&d===i.promptStrings.openLogChannel){const e=n.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension.");const r=await e.exports.serviceBroker.getProxy(s.default.logOutputChannelService,{activationArguments:{outputChannelName:t?.openOutputChannel}});r?.show()}else if(t?.promptToDisableExtension&&d===i.promptStrings.disableExtensionButton){const e=new c.TelemetryEvent("prompt-project-unsupported-action",a.telemetryService);e.addOrUpdateProperties({disableExtension:String(!0)}),e.sendTelemetry(),n.workspace.getConfiguration().update("dotnet.preferCSharpExtension",!0,n.ConfigurationTarget.Workspace)}}else{if(t?.promptToDisableExtension){const e=new c.TelemetryEvent("prompt-project-unsupported-action",a.telemetryService);e.addOrUpdateProperties({donotshowagain:String(!0)}),e.sendTelemetry()}const e="suppressMessage."+t.doNotShowInWorkspace;this.context.workspaceState.update(e,"0")}}async reportAndWaitResume(e){await n.window.showInformationMessage(e,"Resume")}}},15158:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HelloWorld=void 0;const n=r(19679),i=r(65979);t.HelloWorld=class{serviceBroker;constructor(e){this.serviceBroker=e}sayHello(e){return`Hello, ${e}! - with love from VS Code Extension Host`}async callMe(e,t){const r=await this.serviceBroker.getProxy(i.default.helloWorld.create(e));try{if(!r)throw new Error(`No service known by ${n.ServiceMoniker.toString(e)}.`);return await r.sayHello(i.default.helloWorld.extensionHost.moniker.name)}finally{r?.dispose()}}}},57787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HotReloadClientListener=t.ManagedHotReloadAvailabilityStatus=void 0;const n=r(37224);var i;!function(e){e[e.available=0]="available",e[e.interop=1]="interop",e[e.sqlClr=2]="sqlClr",e[e.minidump=3]="minidump",e[e.attach=4]="attach",e[e.moduleNotLoaded=5]="moduleNotLoaded",e[e.moduleReloaded=6]="moduleReloaded",e[e.notBuilt=8]="notBuilt",e[e.unsupportedEngine=9]="unsupportedEngine",e[e.notSupportedForClr64Version=10]="notSupportedForClr64Version",e[e.notAllowedForModule=11]="notAllowedForModule",e[e.optimized=12]="optimized",e[e.domainNeutralAssembly=13]="domainNeutralAssembly",e[e.reflectionAssembly=14]="reflectionAssembly",e[e.intelliTrace=15]="intelliTrace",e[e.notAllowedForRuntime=16]="notAllowedForRuntime",e[e.internalError=17]="internalError",e[e.unavailable=18]="unavailable",e[e.disabled=19]="disabled",e[e.notAllowedXPlat=20]="notAllowedXPlat"}(i||(t.ManagedHotReloadAvailabilityStatus=i={})),t.HotReloadClientListener=class{onSessionStarted(e,t){return n.hotReloadTracker.startHotReload(e,t)}onHotReloadAvailabilityChanged(e,t){return n.hotReloadTracker.onHotReloadAvailabilityChanged(e,t)}onSessionEnded(e){return n.hotReloadTracker.endHotReload(e)}async onApplyChangesStarted(e){}reportHotReloadResult(e,t){return n.hotReloadTracker.reportHotReloadResult(e)}}},42300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hotReloadLogger=t.HotReloadLogger=t.HotReloadLogMessage=t.HotReloadDiagnosticErrorLevel=t.HotReloadVerbosity=void 0;const n=r(89496),i=r(89781),o=r(81297),s=r(50979);var a,c;!function(e){e[e.minimal=0]="minimal",e[e.detailed=1]="detailed",e[e.diagnostic=2]="diagnostic"}(a||(t.HotReloadVerbosity=a={})),function(e){e[e.info=0]="info",e[e.warning=1]="warning",e[e.error=2]="error"}(c||(t.HotReloadDiagnosticErrorLevel=c={})),t.HotReloadLogMessage=class{verbosity;instanceId;message;errorLevel;projectName;variant;constructor(e,t,r,n){this.verbosity=e,this.message=t,this.instanceId=r??0,this.errorLevel=n??c.info}};class u{outputChannel;logger;constructor(){this.outputChannel=(0,o.lazyLoad)((()=>n.window.createOutputChannel(".NET Hot Reload",{log:!0}))),this.logger=(0,o.lazyLoad)((()=>new i.Logger(this.outputChannel())))}shouldLogMessage(e){switch(s.hotReloadOptionService.getVerbosity()){case"minimal":return e===a.minimal;case"detailed":return e===a.minimal||e===a.detailed;default:return!0}}async log(e,t){if(!this.shouldLogMessage(e.verbosity))return;let r="";e.projectName&&(r+=` ${e.projectName}`,e.variant&&(r+=` (${e.variant})`),r+=":"),0!==e.instanceId&&(r+=`${e.instanceId}:`),r+=` ${e.message}`;let n=!1;switch(e.errorLevel){case c.info:this.outputChannel().info(r);break;case c.warning:this.outputChannel().warn(r);break;case c.error:this.outputChannel().error(r),n=!0}n&&this.outputChannel().show()}}t.HotReloadLogger=u,t.hotReloadLogger=new u},50979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listenToHotReloadConfigUpdates=t.hotReloadOptionService=t.HotReloadOptionService=void 0;const n=r(89496);class i{enabled=!1;verbosity="minimal";hotReloadOnSave=!0;isHotReloadEnabled(e,t){return Promise.resolve(this.enabled)}updateConfig(e){this.enabled=n.workspace.getConfiguration("csharp.experimental.debug").get("hotReload")??!1,this.verbosity=e.get("hotReloadVerbosity")??"minimal",this.hotReloadOnSave=e.get("hotReloadOnSave")??!0}getIsHotReloadEnabled(){return this.enabled}getIsHotReloadOnSave(){return this.hotReloadOnSave}getVerbosity(){return this.verbosity}isSettingsEnabled(){return this.enabled}}function o(){const e=n.workspace.getConfiguration("csharp.debug");t.hotReloadOptionService.updateConfig(e)}t.HotReloadOptionService=i,t.hotReloadOptionService=new i,t.listenToHotReloadConfigUpdates=function(){n.workspace.onDidChangeConfiguration(o),o()}},28457:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HotReloadResult=void 0,function(e){e[e.applied=0]="applied",e[e.noChanges=1]="noChanges",e[e.restartRequired=2]="restartRequired",e[e.errorEdits=3]="errorEdits",e[e.applyUpdatesFailure=4]="applyUpdatesFailure",e[e.partiallyApplied=5]="partiallyApplied"}(r||(t.HotReloadResult=r={}))},98727:(e,t)=>{"use strict";var r,n,i,o,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorLaunchTarget=t.CustomLaunchTarget=t.AzureFunctionsLaunchTarget=t.BrowserInspectUriTarget=t.BrowserLaunchTarget=t.ExeLaunchTarget=void 0,function(e){e.is=function(e){return"executable"in e&&"directory"in e&&"commandLineArguments"in e&&"environmentVariables"in e&&"isConsoleApp"in e&&"isUsingSSL"in e}}(r||(t.ExeLaunchTarget=r={})),function(e){e.is=function(e){return"url"in e}}(n||(t.BrowserLaunchTarget=n={})),function(e){e.is=function(e){return"url"in e&&"inspectUri"in e}}(i||(t.BrowserInspectUriTarget=i={})),function(e){e.is=function(e){return"functionsApp"in e&&"directory"in e&&"environmentVariables"in e&&"isUsingSSL"in e}}(o||(t.AzureFunctionsLaunchTarget=o={})),function(e){e.is=function(e){return"options"in e}}(s||(t.CustomLaunchTarget=s={})),function(e){e.is=function(e){return"userMessage"in e&&"details"in e}}(a||(t.ErrorLaunchTarget=a={}))},57923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionRestoreCompletedEventArgs=t.SolutionRestoreStartedEventArgs=void 0,t.SolutionRestoreStartedEventArgs=class{solutionFilePath;constructor(e){this.solutionFilePath=e}},t.SolutionRestoreCompletedEventArgs=class{result;solutionFilePath;constructor(e,t){this.solutionFilePath=e,this.result=t}}},55825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.workspaceConfigurationOptionsService=void 0;const n=r(89496);t.workspaceConfigurationOptionsService=new class{getOption(e,t){return n.workspace.getConfiguration(e).get(t)}getStringOption(e,t){const r=this.getOption(e,t);if(void 0!==r&&"string"==typeof r)return r;throw new Error(`Unable to find a string from ${t} in ${e}`)}getNumberOption(e,t){const r=this.getOption(e,t);if(void 0!==r&&"number"==typeof r)return r;throw new Error(`Unable to find a number from ${t} in ${e}`)}getBooleanOption(e,t){const r=this.getOption(e,t);if(void 0!==r&&"boolean"==typeof r)return r;throw new Error(`Unable to find a boolean from ${t} in ${e}`)}getJSONStringSection(e,t){const r=this.getOption(e,t);if(void 0!==r)return JSON.stringify(r);throw new Error(`Unable to find anything from ${t} in ${e}`)}}},60519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectQueryableSpace=void 0;const n=r(19679),i=r(7195),o=r(65979),s=r(73228),a=r(89781);t.ProjectQueryableSpace=class{serviceBroker;queryExecutionServiceProxy;constructor(e){this.serviceBroker=e,this.queryExecutionServiceProxy=(0,s.lazyPromiseLambda)((()=>this.initializeProxy()))}async dispose(){if(this.queryExecutionServiceProxy){const e=await this.queryExecutionServiceProxy;e?.dispose()}}async initializeProxy(){return await this.serviceBroker.getProxy(o.default.projectQueryExecutionService)}async executeQuery(e,t){return await i.logger.watch("ExecuteQuery with project query execution service",(async()=>{const r=JSON.stringify(e),n=await this.queryExecutionServiceProxy;try{if(n){const e=await n.ExecuteQueryAsync(r,t);return JSON.parse(e)}}catch(e){throw new Error("Exception while talking to proxy: "+e)}}),{importance:a.LogImportance.low})}async executeAction(e,t){return await i.logger.watch("ExecuteQuery action with project query execution service",(async()=>{const r=JSON.stringify(e),n=await this.queryExecutionServiceProxy;try{if(n){const e=await n.ExecuteRemoteExecutableAsync(r,t);return JSON.parse(e)}}catch(e){throw new Error("Exception while talking to proxy: "+e)}}),{importance:a.LogImportance.low})}async subscribeQuery(e,t){return await i.logger.watch("Subscribe with project query",(async()=>{const r=new c(t),n=JSON.stringify(e),i=await this.queryExecutionServiceProxy;try{if(i)return await i.SubscribeQueryResultsAsync(n,r)}catch(e){throw new Error("Exception while talking to proxy: "+e)}}),{importance:a.LogImportance.low})}};class c extends n.Observer{resultsReceiver;constructor(e){super((t=>{e.onNext(JSON.parse(t))}),(t=>{t?(i.logger.log("queryCompleted Failed",a.LogImportance.low),i.logger.log(t,a.LogImportance.low),e.onError(t)):(i.logger.log("queryCompleted",a.LogImportance.low),e.onCompleted())})),this.resultsReceiver=e}}},58305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilteredStartupProjectService=void 0,t.FilteredStartupProjectService=class{service;observers;currentStartupProjectPath;unsubscribe;constructor(e){this.service=e,this.observers=[]}onNext(e){let t=e?.fullPath;if(t!==this.currentStartupProjectPath){this.currentStartupProjectPath=t;for(const e of this.observers)e.onNext(t)}}onCompleted(){for(const e of this.observers)e.onCompleted()}onError(e){for(const t of this.observers)t.onError(e)}subscribe(e){return this.observers.push(e),1===this.observers.length?this.unsubscribe=this.service.subscribe(this):e.onNext(this.currentStartupProjectPath),()=>{this.observers=this.observers.filter((t=>t!==e)),0===this.observers.length&&(this.unsubscribe?.(),this.unsubscribe=void 0)}}async pickStartupProject(){let e=await this.service.pickStartupProject();return e?.fullPath}getCurrentStartupProject(){return this.service.getCurrentStartupProject()?.fullPath}async getOrPickCurrentStartupProject(){let e=await this.service.getOrPickCurrentStartupProject();return e?.fullPath}}},55471:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InvocationSource=void 0,function(e){e[e.solutionExplorer=0]="solutionExplorer",e[e.commandPalette=1]="commandPalette",e[e.newFileMenu=2]="newFileMenu"}(r||(t.InvocationSource=r={}))},44730:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VsCodeFileWatcherEventArgs=t.FileSystemWatcherChangeTypes=void 0,function(e){e[e.created=1]="created",e[e.deleted=2]="deleted",e[e.changed=4]="changed"}(r||(t.FileSystemWatcherChangeTypes=r={})),t.VsCodeFileWatcherEventArgs=class{watcherChangeType;fsPath;constructor(e,t){this.watcherChangeType=e,this.fsPath=t}}},22743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogOutputChannelState=void 0;const n=r(89496),i=r(7195),o=r(89781);class s{outputChannel;constructor(e){this.outputChannel=e}appendError(e){this.outputChannel?this.outputChannel.error(e):i.logger.log(e,o.LogImportance.high)}appendWarning(e){this.outputChannel?this.outputChannel.warn(e):i.logger.log(e,o.LogImportance.normal)}appendLine(e){this.outputChannel?this.outputChannel.appendLine(e):i.logger.log(e)}show(){this.outputChannel?.show(!0)}}class a{outputChannels=new Map;constructor(){}static create(){return new a}createOutputChannel(e){const t=e.activationArguments?.outputChannelName;if(t){let e=this.outputChannels.get(t);return e||(e=n.window.createOutputChannel(t,{log:!0}),this.outputChannels.set(t,e)),new s(e)}return new s}}t.LogOutputChannelState=a},277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuGetDotnetCommandsService=void 0;const n=r(81249),i=r(71017),o=r(89781),s=r(77867),a=r(30077),c=r(22677),u=r(73228);class l{outputChannel;static interactiveSwitch="--interactive";static includePrereleaseSwitch="--include-prerelease";static prereleaseSwitch="--prerelease";static minRequiredDotnetVersion="8.0.200";outputLogger;constructor(e){this.outputChannel=e,this.outputLogger=(0,u.lazyPromiseLambda)((async()=>new o.NuGetLogger(await this.outputChannel)))}async checkPrerequisites(e){const t=e?(0,i.dirname)(e):void 0,r=new o.OutputMonitor;await(0,s.dotnetCommand)(a.DotnetCommand.dotnetVersion,t,["--version"],r,!0);const u=r.getOutput();if(!u)return{isPrerequisiteMet:!1};const d=n.clean(u);return d?n.gte(d,l.minRequiredDotnetVersion)?{isPrerequisiteMet:!0,value:d}:{isPrerequisiteMet:!1,value:d,message:c.nugetStrings.missingDotnetSdkError,actionText:c.nugetStrings.missingDotnetSdkActionMessage}:{isPrerequisiteMet:!1,message:c.nugetStrings.missingDotnetSdkError,actionText:c.nugetStrings.missingDotnetSdkActionMessage}}async addPackage(e,t,r){return this.executeAddPackage(e,t,r,a.DotnetCommand.nugetAddPackage)}async updatePackage(e,t,r){return this.executeAddPackage(e,t,r,a.DotnetCommand.nugetUpdatePackage)}async executeAddPackage(e,t,r,n){if(!e||!t||!r)return!1;const o=e?(0,i.dirname)(e):void 0,c=["add",e,"package",t,"-v",r,l.interactiveSwitch];return await(0,s.dotnetCommand)(a.DotnetCommand.nugetAddPackage,o,c,await this.outputLogger),!0}async removePackage(e,t){if(!e||!t)return!1;const r=e?(0,i.dirname)(e):void 0,n=["remove",e,"package",t];return await(0,s.dotnetCommand)(a.DotnetCommand.nugetRemovePackage,r,n,await this.outputLogger),!0}async packageSearch(e,t,r){const c=["package","search",t,"--format","json",l.interactiveSwitch];r&&c.push(l.prereleaseSwitch);const u=e?(0,i.dirname)(e):void 0,d=new o.JsonOutputMonitor(await this.outputLogger);await(0,s.dotnetCommand)(a.DotnetCommand.nugetPackageSearch,u,c,d,!0);const p=await this.parseJsonFromOutput(d,"packageSearch");if(p){const e=new Map;return p.searchResult?.forEach((t=>{t.packages.map((e=>({id:e.id,latestVersion:e.latestVersion}))).forEach((t=>{const r=e.get(t.id),i=n.coerce(t.latestVersion),o=n.coerce(r?.version);(!r||i&&o&&n.gt(i,o))&&e.set(t.id,t)}))})),Array.from(e.values())}return[]}async getVersions(e,t,r){const n=["package","search",t,"--exact-match","--format","json",l.interactiveSwitch];r&&n.push(l.prereleaseSwitch);const c=e?(0,i.dirname)(e):void 0,u=new o.JsonOutputMonitor(await this.outputLogger);await(0,s.dotnetCommand)(a.DotnetCommand.nugetGetVersions,c,n,u,!0);const d=await this.parseJsonFromOutput(u,"getVersions");if(d){const e=d.version??0;return d.searchResult.reduce(((t,r)=>t.concat(r.packages.map((t=>this.mapVersionOutput(t,e))))),[])}return[]}async getInstalledPackages(e){return this.listInstalledPackages(e,!1)}async getOutdatedPackages(e,t){return this.listInstalledPackages(e,!0,t)}async listInstalledPackages(e,t,r=!1){let c=a.DotnetCommand.nugetListInstalledPackages;const u=["list",e,"package","--format","json",l.interactiveSwitch];t&&(u.push("--outdated"),c=a.DotnetCommand.nugetListOutdatedPackages,r&&u.push(l.includePrereleaseSwitch));const d=e?(0,i.dirname)(e):void 0,p=new o.JsonOutputMonitor(await this.outputLogger);await(0,s.dotnetCommand)(c,d,u,p,!0);const f=await this.parseJsonFromOutput(p,t?"getOutdatedPackages":"getInstalledPackages");if(f){const e=new Map;return f.projects?.forEach((r=>{r.frameworks?.forEach((r=>{r.topLevelPackages?.filter((e=>!t||this.isVersion(e.latestVersion))).map((e=>({id:e.id,version:e.requestedVersion}))).forEach((t=>{const r=e.get(t.id);r&&!n.gt(t.version,r.version)||e.set(t.id,t)}))}))})),Array.from(e.values())}return[]}async parseJsonFromOutput(e,t){try{const t=e.getOutput();return JSON.parse(t)}catch{const e=await this.outputLogger;return void e?.log(c.nugetStrings.invalidJsonError(t))}}mapVersionOutput(e,t){let r;return r=1===t?{id:e.id,version:e.latestVersion}:2===t?{id:e.id,version:e.version}:{id:e.id,version:e.latestVersion},r}isVersion(e){const t=e?.trim();return t&&!isNaN(t.charAt(0))}}t.NuGetDotnetCommandsService=l},8240:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NuGetSolutionRestoreState=t.NuGetSolutionRestoreService=void 0;const n=r(82361),i=r(89496),o=r(89781),s=r(79994),a=r(30077),c=r(7195),u=r(77867),l=r(22677),d=r(57923);class p extends n.EventEmitter{state;rpcEventNames=["solutionRestoreStarted","solutionRestoreCompleted"];startedHandler;completedHandler;constructor(e,t){super(),this.state=e,t.activationArguments?.needEvents&&(this.startedHandler=e=>this.emit("solutionRestoreStarted",e),this.completedHandler=e=>this.emit("solutionRestoreCompleted",e),this.state.on("solutionRestoreStarted",this.startedHandler),this.state.on("solutionRestoreCompleted",this.completedHandler))}dispose(){this.startedHandler&&this.state.off("solutionRestoreStarted",this.startedHandler),this.completedHandler&&this.state.off("solutionRestoreCompleted",this.completedHandler)}async setState(){const e=c.environmentStateManager?.getLatestEnvironmentState();if(!e)throw new Error("Environment state is undefined");this.state.setState(e)}async restoreSolution(){return await this.state.restoreSolution()}async nominateProject(e){return await this.state.nominateProject(e)}isNominationOnGoing(){return this.state.isNominationOnGoing()}}t.NuGetSolutionRestoreService=p;class f extends n.EventEmitter{rootDirectory;solutionFile;totalProjects;projectsNominatedSoFar;cachedRestoreResult;outputChannel;outputLogger;constructor(e){super(),this.outputChannel=e,this.outputLogger=new o.NuGetLogger(this.outputChannel)}static create(e){return new f(e)}setState(e){this.projectsNominatedSoFar=new Set,this.solutionFile=e.solutions[0],this.rootDirectory=(0,s.getActiveWorkspaceRoot)(),this.totalProjects=e.projects.filter((e=>e.projectId.fullPath.endsWith(".csproj"))).length,this.cachedRestoreResult=void 0}async restoreSolution(){if(this.cachedRestoreResult)try{return await this.cachedRestoreResult,!0}catch(e){return!1}try{return c.logger.log("Starting NuGet restore for the solution.",o.LogImportance.low),this.emit("solutionRestoreStarted",new d.SolutionRestoreStartedEventArgs(this.solutionFile)),this.cachedRestoreResult=(0,u.dotnetCommand)(a.DotnetCommand.restore,this.rootDirectory,["restore",this.solutionFile,"--interactive"],this.outputLogger,!0),await this.cachedRestoreResult,this.emit("solutionRestoreCompleted",new d.SolutionRestoreCompletedEventArgs(this.solutionFile,!0)),c.logger.log("Completed NuGet restore.",o.LogImportance.low),!0}catch(e){return this.emit("solutionRestoreCompleted",new d.SolutionRestoreCompletedEventArgs(this.solutionFile,!1)),this.displayFailureNotification(),c.logger.log(`Completed NuGet restore with error: ${e}`),!1}finally{this.cachedRestoreResult=void 0}}async nominateProject(e){return this.areAllProjectsNominated()?await this.restoreSolution():(this.projectsNominatedSoFar.add(e),!0)}isNominationOnGoing(){return!!this.cachedRestoreResult}areAllProjectsNominated(){return this.projectsNominatedSoFar.size===this.totalProjects}displayFailureNotification(){i.window.showErrorMessage(l.NuGet.restoreFailure,l.showError).then((e=>{e===l.showError&&this.outputChannel.show()}))}}t.NuGetSolutionRestoreState=f},69751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelState=void 0;const n=r(89496);class i{outputChannel;constructor(e){this.outputChannel=e}append(e){this.outputChannel.append(e)}appendLine(e){this.outputChannel.appendLine(e)}show(e){this.outputChannel.show(e)}clear(){this.outputChannel?.clear()}}class o{outputChannels=new Map;constructor(){}static create(){return new o}createOutputChannel(e){const t=e.activationArguments?.outputChannelName;if(!t)throw new Error("Missing ServiceActivationOptions.activationArguments.outputChannelName");let r=this.outputChannels.get(t);return r||(r=n.window.createOutputChannel(t),this.outputChannels.set(t,r)),new i(r)}}t.OutputChannelState=o},60279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTemplateService=t.isTemplateServiceInitialized=void 0;const n=r(89496),i=r(22037),o=r(69279),s=r(65979),a=r(84832),c=r(7195),u=r(79994),l=r(22677),d=r(75010),p=r(89781);let f;t.isTemplateServiceInitialized=!1,t.getTemplateService=async function(){if(f)return f;const e=n.extensions.getExtension(o.EXTENSION_ID);if(!e)throw new Error("Unable to find the extension");const r=e.exports.serviceBroker,h=await r.getProxy(s.default.templateService);if(!h)throw new Error("Unable to get template service from brokered services");const g=new d.TelemetryActivity("TemplateService/initialization",c.telemetryService);let m=!1;try{await c.logger.watch("Initialize template service",(async()=>{const e=n.workspace.workspaceFolders,t=e&&0!==e.length?u.getActiveWorkspaceRoot():(0,i.homedir)(),r=await(c.dotnetVersionManager?.getDotnetVersion(t,c.logger,p.LogImportance.normal)),o=c.dotnetSdkPath??(r?await(0,a.findInstalledDotnetFromPath)(null,c.logger):null);if(r&&o){if(g.addOrUpdateProperties({version:r.version}),m=await h.initialize(o,r.version),!m)throw new Error("Unable to initialize template engine host using version: "+r.version+" and path: "+o)}else await n.window.showErrorMessage(l.addNewItemUiStrings.noSdkFound)}),{telemetry:g})}finally{g.end(),g.sendTelemetry()}return m?(f=h,t.isTemplateServiceInitialized=!0,f):null}},28510:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCSharpExtensionVersionForAzFunctions=t.getAzureFunctionAPIExports=t.vsCodeAzureFunctionExtensionService=t.VSCodeAzureFunctionExtensionLaunchDataKeys=void 0;const n=r(69279),i=r(22677),o=r(6315),s=r(89496),a=r(81249);var c;function u(){const e=s.extensions.getExtension(n.AZUREFUNCTION_EXTENSION_ID);if(!e)throw new o.DotnetDebugConfigurationServiceError(o.DotnetDebugConfigurationServiceErrorKind.userError,i.vsCodeAzureFunctionExtensionServiceStrings.errorAzureFunctionsExtensionMissing,o.DebugTelemetryCode.invalidAzureFunctionExtension);const t=e.packageJSON.version;if(a.compareIdentifiers(t,n.AZUREFUNCTION_EXTENSION_REQUIRED_VERSION)<0)throw new o.DotnetDebugConfigurationServiceError(o.DotnetDebugConfigurationServiceErrorKind.userError,i.vsCodeAzureFunctionExtensionServiceStrings.errorAzureFunctionMinimumVersion(n.AZUREFUNCTION_EXTENSION_REQUIRED_VERSION),o.DebugTelemetryCode.invalidAzureFunctionExtensionVersion);try{return e.exports.getApi(n.AZUREFUNCTION_EXTENSION_API_REQUIRED_VERSION)}catch{throw new o.DotnetDebugConfigurationServiceError(o.DotnetDebugConfigurationServiceErrorKind.internalError,i.vsCodeAzureFunctionExtensionServiceStrings.errorAzureFunctionExportsMissing,o.DebugTelemetryCode.invalidAzureFunctionExportAPI)}}!function(e){e.buildPath="buildPath",e.args="args",e.env="env"}(c||(t.VSCodeAzureFunctionExtensionLaunchDataKeys=c={})),t.vsCodeAzureFunctionExtensionService=new class{async startProcess(e){try{const t=e[c.buildPath];if(!t)throw new Error(i.vsCodeAzureFunctionExtensionServiceStrings.errorAzureFunctionStartFunc(c.buildPath));let r=e[c.args];r||(r=[]);let n=o.LaunchTargetToDebugConfigurationConverter.convertEnvironmentVariablesToObj(e[c.env]);return await u().startFuncProcess(t,r,n)}catch(e){let t="";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message),{processId:-1,success:!1,error:t}}}},t.getAzureFunctionAPIExports=u,t.validateCSharpExtensionVersionForAzFunctions=async function(){const e=await s.extensions.getExtension(n.CSHARP_EXTENSION_ID),t=e?.packageJSON.version;if(!e||!t)throw new o.DotnetDebugConfigurationServiceError(o.DotnetDebugConfigurationServiceErrorKind.internalError,"Could not obtain exports from C# Extension ",o.DebugTelemetryCode.missingCSharpExtensionExport);if(a.compareIdentifiers(t,n.CSHARP_EXTENSION_AZ_FUNCTIONS_REQUIRED_VERSION)<0)throw new o.DotnetDebugConfigurationServiceError(o.DotnetDebugConfigurationServiceErrorKind.internalError,`The C# extension is installed, but has version ${t} which is incompatible with Azure Functions Debug Launch. Please update your C# Extension.`,o.DebugTelemetryCode.invalidCSharpExtVersionAzFunc)}},22188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VsCodeFileWatcherService=void 0;const n=r(89496),i=r(44730),o=r(82361);class s extends o.EventEmitter{fileSystemWatcher;constructor(e){super();let t=e.activationArguments?.globPattern??"**";const r=e.activationArguments?.basePath,o=!!e.activationArguments?.ignoreCreateEvents&&JSON.parse(e.activationArguments.ignoreCreateEvents.toLowerCase()),s=!!e.activationArguments?.ignoreChangeEvents&&JSON.parse(e.activationArguments.ignoreChangeEvents.toLowerCase()),a=!!e.activationArguments?.ignoreDeleteEvents&&JSON.parse(e.activationArguments.ignoreDeleteEvents.toLowerCase());r&&(t=new n.RelativePattern(r,t)),this.fileSystemWatcher=n.workspace.createFileSystemWatcher(t,o,s,a),this.fileSystemWatcher.onDidCreate((e=>{this.emit("onFileSystemChange",new i.VsCodeFileWatcherEventArgs(i.FileSystemWatcherChangeTypes.created,e.fsPath))})),this.fileSystemWatcher.onDidChange((e=>{this.emit("onFileSystemChange",new i.VsCodeFileWatcherEventArgs(i.FileSystemWatcherChangeTypes.changed,e.fsPath))})),this.fileSystemWatcher.onDidDelete((e=>{this.emit("onFileSystemChange",new i.VsCodeFileWatcherEventArgs(i.FileSystemWatcherChangeTypes.deleted,e.fsPath))}))}rpcEventNames=["onDidChange","onDidCreate","onDidDelete","onFileSystemChange"];dispose(){this.fileSystemWatcher.dispose()}}t.VsCodeFileWatcherService=s},72639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFileWatcher=void 0;const n=r(92614),i=r(79994),o=r(7195),s=r(65979),a=r(44730),c=r(22188);t.WorkspaceFileWatcher=class{fileWatcherService;serviceBroker=(0,i.getExtensionBrokerService)();constructor(e){const t={activationArguments:{globPattern:"**/*.csproj",basePath:(0,i.getActiveWorkspaceRoot)(),ignoreCreateEvents:"false",ignoreChangeEvents:"true",ignoreDeleteEvents:"false"}};this.fileWatcherService=new c.VsCodeFileWatcherService(t),this.fileWatcherService.on("onFileSystemChange",(async e=>{switch(e.watcherChangeType){case a.FileSystemWatcherChangeTypes.created:o.environmentStateManager?.isSolutionGeneratedOutsideWorkspace()&&await(0,n.addProjectFromWorkspace)(e.fsPath);break;case a.FileSystemWatcherChangeTypes.deleted:if(o.environmentStateManager?.isSolutionGeneratedOutsideWorkspace()){const t=await this.serviceBroker.getProxy(s.default.solutionFileService);try{await(t?.removeProjectViaPath(e.fsPath))}catch(e){o.logger.log(`Error removing a project via vscode file explorer: ${e}`)}finally{t?.dispose()}}}}))}dispose(){this.fileWatcherService.dispose()}}},18058:function(e,t,r){"use strict";var n=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0},i=this&&this.__esDecorate||function(e,t,r,n,i,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]="access"===g?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var m=(0,r[f])("accessor"===c?{get:d.get,set:d.set}:d[u],h);if("accessor"===c){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(d.get=a),(a=s(m.set))&&(d.set=a),(a=s(m.init))&&i.unshift(a)}else(a=s(m))&&("field"===c?i.unshift(a):d[u]=a)}l&&Object.defineProperty(l,n.name,d),p=!0},o=this&&this.__setFunctionName||function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};Object.defineProperty(t,"__esModule",{value:!0}),t.EntitlementsService=void 0;const s=r(89496),a=r(52196),c=r(78394),u=r(68701),l=r(57359),d=r(33077),p="csdevkit_entitlementCode",f=new Date((new Date).setFullYear((new Date).getFullYear()+1));t.EntitlementsService=(()=>{let e,t,r=[];return class{static{e=[(0,l.catchErrors)(c.EntitlementError.requestFailure),l.addGetEntitlementTelemetry],i(this,t={value:o((async function(e,t){let r=await this.#e(e,t);const n=this.#t();return c.Entitlement.isActive(n)&&!c.Entitlement.isActive(r)&&(r=n),!t||r===this.#r||r instanceof c.Entitlement&&this.#r instanceof c.Entitlement&&r.equals(this.#r)||(this.#r=r,this.#n.fire(r)),r}),"#getEntitlementsInternal")},e,{kind:"method",name:"#getEntitlementsInternal",static:!1,private:!0,access:{has:e=>#i in e,get:e=>e.#i}},null,r)}#o=void n(this,r);#s;#n=new s.EventEmitter;#a;entitlementsChanged=this.#n.event;#r=c.EntitlementError.noEntitlement;constructor(e,t,r){this.#o=e,this.#s=t,this.#o.msSessionChanged((()=>this.#c())),this.#a=r??h.create()}async getEntitlements(e){return this.#i(e,!1)}getRequiredScopes(){return this.#a.getRequiredScopes()}#t(){return(0,d.isInDevBox)()?new c.Entitlement("DevBoxSubscriptionId",c.EntitlementType.devbox,c.EntitlementSourceType.environment,u.identityStrings.devBoxSubscription,c.Entitlement.activeSubscriptionStatus,f,"DevBox programCode","DevBox channel"):(0,d.isInCodeSpaces)()?new c.Entitlement("CodeSpacesSubscriptionId",c.EntitlementType.codespaces,c.EntitlementSourceType.environment,u.identityStrings.codeSpacesSubscription,c.Entitlement.activeSubscriptionStatus,f,"CodeSpaces programCode","CodeSpaces channel"):null}#c(){this.#i({silent:!0},!0).catch((e=>{(0,l.sendErrorEvent)("EntitlementsService","sessionChanged",e)}))}get#i(){return t.value}async#e(e,t){let r=c.EntitlementError.requestFailure;if(a.useEntitlementsCache())if(t)await this.#s.delete(p);else{const e=await this.#s.get(p),t=e?c.Entitlement.deserialize(e):c.EntitlementError.noEntitlement;if(c.Entitlement.isActive(t)&&(r=t,t.isFresh()))return t}try{const t=await this.#a.fetch(this.#o,e);if(t===c.EntitlementError.noSession)return r=c.EntitlementError.noSession,this.#s.delete(p),c.EntitlementError.noSession;c.Entitlement.isActive(r)||(r=t),c.Entitlement.isActive(t)&&(r=t,await this.#s.store(p,t.serialize()))}catch(e){(0,l.sendErrorEvent)("EntitlementsService","requestEntitlementWithCaching",e)}return r}dispose(){this.#o.dispose(),this.#n.dispose()}}})();class h{sources;name="AggregatedEntitlementSource";constructor(e){this.sources=e}async fetch(e,t){let r=c.EntitlementError.requestFailure;for(let n of this.sources){try{r=await n.fetch(e,t)}catch(e){(0,l.sendErrorEvent)(n.name,"fetch entitlements",e)}if(r!==c.EntitlementError.requestFailure)return r}return r}getRequiredScopes(){return this.sources.find((e=>e!==m.instance))?.getRequiredScopes()??[]}static create(){let e=[v.ideBenefitsSource,m.instance];switch(a.entitlementsApiType()){case"Entitlements":e=[v.entitlementsSource,m.instance];break;case"IdeBenefitsOnly":e=[v.ideBenefitsSource]}return new h(e)}}class g{name;url;scopes;constructor(e,t,r){this.name=e,this.url=t,this.scopes=r}async fetch(e,t){const r=await e.getMsAccessToken(this.scopes,{...t,callerId:"EntitlementsService",requestReason:u.identityStrings.entitlementsSignInReason});if(!r)return c.EntitlementError.noSession;const n=await(0,d.httpsGet)(this.url,r);return n?this.parseResponse(n):c.EntitlementError.requestFailure}getRequiredScopes(){return this.scopes}}class m extends g{static instance=new m("LicensingWebSource",m.#u(),["499b84ac-1321-427f-aa17-267ca6975798/.default"]);static#u(){return"https://app.vssps.visualstudio.com/_apis/Licensing/ClientRights/VisualStudio?productVersion=17.0.0.0%20CSDEVKIT&edition=Professional&relType=release&machineId=00000000-0000-0000-0000-00000000000"}fetch(e,t){return super.fetch(e,{silent:!0})}parseResponse(e){const t=m.#l(e);if(!t||!Array.isArray(t))return c.EntitlementError.noEntitlement;const r=t.map((e=>({obj:e,type:m.#d(e?.Attributes?.SubscriptionLevel)}))).sort(((e,t)=>t.type-e.type))[0];if(!r||!r.obj)return c.EntitlementError.noEntitlement;const n=r.obj.LicenseFallbackDescription??r.obj?.Attributes?.SubscriptionLevel;return n?new c.Entitlement("LicensingApiSubscriptionId",r.type,c.EntitlementSourceType.licensingApi,n,c.Entitlement.activeSubscriptionStatus,f,"programCode unavailable","channel unavailable"):c.EntitlementError.noEntitlement}static#d(e){switch(e?.toLowerCase()){case"enterprise":return c.EntitlementType.enterprise;case"ultimate":return c.EntitlementType.ultimate;case"premium":return c.EntitlementType.premium;case"professional":return c.EntitlementType.pro;case"testprofessional":return c.EntitlementType.testPro;default:return c.EntitlementType.none}}static#l(e){const t=e.split(".")[1];if(!t)return;const r=Buffer.from(t,"base64").toString("binary"),n=JSON.parse(r);return n.Rights?JSON.parse(n.Rights):void 0}}class v extends g{static#p="IdeBenefitsSource";static entitlementsSource=new v("EntitlementsSource","https://api.subscriptions.visualstudio.microsoft.com/api/GetMyEntitlements",["https://graph.microsoft.com/.default"]);static ideBenefitsSource=new v(v.#p,a.getIdeBenefitsEndpoint(),["6f1cc985-85e8-487e-b0dd-aa633302a731/.default"]);static#f="LicensingIde";parseResponse(e){const t=JSON.parse(e);if(!t||0===t.length)return c.EntitlementError.noEntitlement;const r=t.filter((e=>e.entitlementType===v.#f)).map(this.#h.bind(this));return 0===r.length?c.EntitlementError.noEntitlement:((0,l.sendReceivedEntitlementsTelemetry)(r),r.filter((e=>e.isActive())).sort(((e,t)=>t.type-e.type)).length>0?r[0]:c.EntitlementError.inactiveEntitlement)}#h(e){return new c.Entitlement(e.benefitDetailGuid,v.#d(e.entitlementCode),this.name===v.#p?c.EntitlementSourceType.ideBenefitsApi:c.EntitlementSourceType.entitlementApi,e.subscriptionLevelName,e.subscriptionStatus?.toLocaleLowerCase(),new Date(e.subscriptionExpirationDate),e.subscriptionProgramCode,e.subscriptionChannel)}static#d(e){switch(e){case"IDE-ENTERPRISE":return c.EntitlementType.enterprise;case"IDE-ULTIMATE":return c.EntitlementType.ultimate;case"IDE-PREMIUM":return c.EntitlementType.premium;case"IDE-PRO":return c.EntitlementType.pro;case"IDE-TESTPRO":return c.EntitlementType.testPro;default:return c.EntitlementType.none}}}},72902:function(e,t,r){"use strict";var n=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0},i=this&&this.__esDecorate||function(e,t,r,n,i,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]="access"===g?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var m=(0,r[f])("accessor"===c?{get:d.get,set:d.set}:d[u],h);if("accessor"===c){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(d.get=a),(a=s(m.set))&&(d.set=a),(a=s(m.init))&&i.unshift(a)}else(a=s(m))&&("field"===c?i.unshift(a):d[u]=a)}l&&Object.defineProperty(l,n.name,d),p=!0},o=this&&this.__setFunctionName||function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenAcquisitionService=void 0;const s=r(89496),a=r(57359),c="microsoft",u="github",l=["VSCODE_TENANT:organizations"];t.TokenAcquisitionService=(()=>{let e,t,r=[];return class{static{e=[(0,a.catchErrors)(void 0),a.addGetSessionTelemetry],i(this,t={value:o((async function(e,t,r){if(!r||!r.callerId?.trim()||!r.requestReason?.trim())throw new Error("Please provide callerId and requestReason in TokenRequestOptions");if(r.createIfNone&&!r.forceNewSession){const n=await this.#g.getSession(e,t,{silent:!0});if(n)return n;r.createIfNone=!1,r.forceNewSession=!0}return!0===r.forceNewSession&&(r.forceNewSession={detail:r.requestReason}),await this.#g.getSession(e,t,r)}),"#getSession")},e,{kind:"method",name:"#getSession",static:!1,private:!0,access:{has:e=>#m in e,get:e=>e.#m}},null,r)}#g=void n(this,r);#v;#y=new s.EventEmitter;#_=new s.EventEmitter;msSessionChanged=this.#y.event;gitHubSessionChanged=this.#_.event;constructor(e){this.#g=e??new d,this.#v=this.#g.onDidChangeSessions((e=>this.#S(e.provider.id)))}async getSessionInfo(e,t){const r=[...e,...l];return await this.#m(c,r,t)??null}getMsAccessToken(e,t){const r=[...e,...l];return this.#w(c,r,t)}getGitHubAccessToken(e,t){return this.#w(u,e,t)}async#w(e,t,r){const n=await this.#m(e,t,r);return n?.accessToken??null}get#m(){return t.value}#S(e){switch(e){case c:this.#y.fire();break;case u:this.#_.fire()}}dispose(){this.#y.dispose(),this.#_.dispose(),this.#v.dispose()}}})();class d{getSession(e,t,r){return s.authentication.getSession(e,t,r)}onDidChangeSessions=s.authentication.onDidChangeSessions}},52196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.integrationTestMode=t.getIdeBenefitsEndpoint=t.daysEntitlementIsFresh=t.daysEntitlementIsValid=t.daysBetweenSignInPrompts=t.entitlementsApiType=t.showEntitlementExpiryDate=t.useEntitlementsCache=void 0;const n=r(89496);function i(e,t){return n.workspace.getConfiguration("dotnet").get(e,t)}t.useEntitlementsCache=function(){return i("useEntitlementsCache",!0)},t.showEntitlementExpiryDate=function(){return i("showEntitlementExpiryDate",!1)},t.entitlementsApiType=function(){return i("EntitlementsApiType","IdeBenefits")},t.daysBetweenSignInPrompts=function(){return i("daysBetweenSignInPrompts",15)},t.daysEntitlementIsValid=function(){return i("daysEntitlementIsValid",30)},t.daysEntitlementIsFresh=function(){return i("daysEntitlementIsFresh",1)},t.getIdeBenefitsEndpoint=function(){return i("ideBenefitsEndpoint","https://api.subscriptions.visualstudio.microsoft.com/Me/Entitlements/IDEBenefits?api-version=2023-03-26&caller=vscode")},t.integrationTestMode=function(){return!!process.env.AUTOMATED_INTEGRATION_TEST}},78394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntitlementSourceType=t.EntitlementError=t.EntitlementType=t.Entitlement=void 0;const n=r(33077),i=r(52196);class o{benefitDetailGuid;type;sourceType;subscriptionLevelName;subscriptionStatus;expirationDate;programCode;channel;acquisitionDate;fromCache;static activeSubscriptionStatus="active";constructor(e,t,r,n,i,o,s,a,c=new Date,u=!1){this.benefitDetailGuid=e,this.type=t,this.sourceType=r,this.subscriptionLevelName=n,this.subscriptionStatus=i,this.expirationDate=o,this.programCode=s,this.channel=a,this.acquisitionDate=c,this.fromCache=u}equals(e){return this===e||e&&this.subscriptionLevelName===e.subscriptionLevelName&&this.type===e.type}isActive(){return this.type>s.testPro&&this.subscriptionStatus===o.activeSubscriptionStatus&&(0,n.daysPassedSince)(this.acquisitionDate)<i.daysEntitlementIsValid()}isFresh(){return this.isActive()&&(0,n.daysPassedSince)(this.acquisitionDate)<i.daysEntitlementIsFresh()}serialize(){return JSON.stringify(this)}static deserialize(e){const t=JSON.parse(e);return t&&t.benefitDetailGuid&&t.type&&t.sourceType&&t.subscriptionLevelName&&t.subscriptionStatus&&t.programCode&&t.channel&&t.expirationDate&&t.acquisitionDate?new o(t.benefitDetailGuid,t.type,t.sourceType,t.subscriptionLevelName,t.subscriptionStatus,new Date(t.expirationDate),t.programCode,t.channel,new Date(t.acquisitionDate),!0):null}static isActive(e){return e instanceof o&&e.isActive()}}var s,a,c;t.Entitlement=o,function(e){e[e.devbox=8]="devbox",e[e.codespaces=7]="codespaces",e[e.enterprise=6]="enterprise",e[e.ultimate=5]="ultimate",e[e.premium=4]="premium",e[e.pro=3]="pro",e[e.testPro=2]="testPro",e[e.none=1]="none"}(s||(t.EntitlementType=s={})),function(e){e[e.noSession=1]="noSession",e[e.requestFailure=2]="requestFailure",e[e.noEntitlement=3]="noEntitlement",e[e.inactiveEntitlement=4]="inactiveEntitlement"}(a||(t.EntitlementError=a={})),function(e){e[e.ideBenefitsApi=1]="ideBenefitsApi",e[e.environment=2]="environment",e[e.entitlementApi=3]="entitlementApi",e[e.licensingApi=4]="licensingApi"}(c||(t.EntitlementSourceType=c={}))},25462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTestHooks=void 0;const n=r(89496),i=r(52196),o=r(78394),s=r(57359);t.getTestHooks=function(){return i.integrationTestMode()?{secretStorage:u.instance,vsCodeAuthentication:a.instance,entlementSource:c.instance,notificationService:l.instance}:null};class a{static instance=new a;didChangeSessionsEmitter=new n.EventEmitter;lastRequestProviderId=void 0;lastRequestScopes=[];lastRequestOptions=void 0;responseToProvide=void 0;onDidChangeSessions=this.didChangeSessionsEmitter.event;getSession(e,t,r){return this.lastRequestProviderId=e,this.lastRequestScopes=t,this.lastRequestOptions=r,Promise.resolve(this.responseToProvide)}}class c{static instance=new c;name="MockEntlementSource";lastRequestOptions=void 0;responseScopesToProvide=[];#E=o.EntitlementError.noSession;getRequiredScopes(){return this.responseScopesToProvide}fetch(e,t){return this.lastRequestOptions=t,Promise.resolve(this.#E)}setResponseEntitlementToProvide(e){this.#E="string"==typeof e?o.Entitlement.deserialize(e)??o.EntitlementError.requestFailure:e}}class u{static instance=new u;typeMap=new Map;didChangeEmitter=new n.EventEmitter;onDidChange=this.didChangeEmitter.event;get(e){return Promise.resolve(this.typeMap.get(e))}store(e,t){return this.typeMap.set(e,t),Promise.resolve(!0)}delete(e){return this.typeMap.delete(e),Promise.resolve(!0)}clear(){this.typeMap.clear()}}class l extends s.NotificationService{static instance=new l;lastRequestMessage;lastRequestOptions=[];responseToProvide;async showNotification(e,t,...r){return this.lastRequestMessage=t,this.lastRequestOptions=r,this.responseToProvide}}},49998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showEntitlementsStatusCommand=t.signInCommand=t.registerIdentityService=void 0;const n=r(89496),i=r(24138),o=r(52196),s=r(18058),a=r(72902),c=r(33077),u=r(75010),l=r(57359),d=r(78394),p=r(25462),f=r(68701),h=r(7195),g=r(78394),m="lastPromptDate";let v,y=new c.EventBouncer;async function _(e){const t=new u.TelemetryActivity("show-entitlement-command",h.telemetryService);if(!v)return void(0,l.sendErrorEvent)("showEntitlementsStatusCommand","get dependencies");y.stop();const r=await b(v.entitlementsService),n=await P(v.entitlementsService,v.tokenAcquisitionService);if(d.Entitlement.isActive(r)||n)await w(v.notificationService,r,n,"showEntitlementCommand"),t.addOrUpdateProperties({signInRequested:String(!1)});else{const e=await S(v,{messageReason:"showEntitlementCommand"});e&&y.raiseNext(),t.addOrUpdateProperties({signInRequested:String(!0),signInSucceded:String(e)})}t.end(),t.addOrUpdateProperties({caller:e}),(0,l.addAccountInfoToEvent)(t,n),(0,l.addEntitlementInfoToEvent)(t,r),t.sendTelemetry()}async function S(e,t){return await e.secrets.store(m,(new Date).toISOString()),"signInBtn"===await e.notificationService.showNotification({messageReason:`promptToSignIn+${t.messageReason}`,telemetryUpdate:t.telemetryUpdate},f.identityStrings.signInRequest,"signInBtn","dismissBtn")&&await T(e.entitlementsService,e.tokenAcquisitionService)}async function w(e,t,r,n){const i=E(t,r);await e.showNotification({messageReason:`showStatusPopUp+${n}`,telemetryUpdate:e=>{(0,l.addAccountInfoToEvent)(e,r),(0,l.addEntitlementInfoToEvent)(e,t)}},i,"dismissBtn")}function E(e,t){const r=d.Entitlement.isActive(e),n=t?.label?.split(" - ").pop()?.trim();let i=n?`${f.identityStrings.softwareIsLicensedTo} ${n}`:f.identityStrings.softwareIsLicensed;switch(i+=" ",r?e.type:g.EntitlementType.none){case g.EntitlementType.enterprise:case g.EntitlementType.ultimate:i+=f.identityStrings.underVsEnterpriseSubscription;break;case g.EntitlementType.pro:case g.EntitlementType.premium:i+=f.identityStrings.underVsProSubscription;break;case g.EntitlementType.devbox:i+=f.identityStrings.underDevBoxSubscription;break;case g.EntitlementType.codespaces:i+=f.identityStrings.underCodeSpacesSubscription;break;case g.EntitlementType.testPro:case g.EntitlementType.none:default:i+=f.identityStrings.underIndividualLicense}return i+=".",r&&o.showEntitlementExpiryDate()&&(i+=` ${f.identityStrings.expirationDateHeader} ${e.expirationDate.toLocaleDateString()}.`),i}function b(e){return e.getEntitlements({silent:!0})}async function P(e,t,r=!1){const n=await t.getSessionInfo(e.getRequiredScopes(),{callerId:"showEntitlementsStatus",requestReason:f.identityStrings.entitlementsSignInReason,silent:!r,createIfNone:r});return n?.account??null}async function T(e,t){return!!await P(e,t,!0)}t.registerIdentityService=function(e){const t=(0,p.getTestHooks)();v=function(e,t){const r=t?.secretStorage??new l.SecretStorageWithErrorHandling(e.secrets),n=t?.notificationService??l.NotificationService.instance,i=new a.TokenAcquisitionService(t?.vsCodeAuthentication);return{secrets:r,notificationService:n,tokenAcquisitionService:i,entitlementsService:new s.EntitlementsService(i,r,t?.entlementSource)}}(e,t),e.subscriptions.push(v.entitlementsService);const r=async function(e,t){const r=await e.entitlementsService.getEntitlements({createIfNone:!1});!function(e,t,r){const o=n.window.createStatusBarItem("csdevkit.status",n.StatusBarAlignment.Right,0);function s(e){o.text=d.Entitlement.isActive(e)?"$(statusbar-entitlement)":"$(statusbar-no-entitlement)",o.tooltip=E(e,null),o.show()}o.command=i.showEntitlementsStatus,s(r),e.subscriptions.push(o,t(s))}(t,e.entitlementsService.entitlementsChanged,r);const s=y.createEventHandler((e=>{d.Entitlement.isActive(e)&&_("entitlementsChangedEvent")}));t.subscriptions.push(e.entitlementsService.entitlementsChanged(s)),r!==d.EntitlementError.noSession||await async function(e,t){return!!await P(e,t,!1)}(e.entitlementsService,e.tokenAcquisitionService)||await async function(e){const t=await e.secrets.get(m);(t?(0,c.daysPassedSince)(new Date(t))>o.daysBetweenSignInPrompts():await e.secrets.store(m,(new Date).toISOString()))&&await S(e,{messageReason:"periodicalReminder",telemetryUpdate:e=>{e.addOrUpdateProperties({previousReminderDate:t})}})}(e)}(v,e).catch((e=>{(0,l.sendErrorEvent)("registerIdentityService","initialization",e)}));return t&&(t.initPromise=r),[v.tokenAcquisitionService,t]},t.signInCommand=async function(){const e=new u.TelemetryActivity("sign-in-command",h.telemetryService);if(!v)return void(0,l.sendErrorEvent)("signInCommand","get dependencies");let t=d.EntitlementError.noEntitlement;const r=await P(v.entitlementsService,v.tokenAcquisitionService);r?(t=await b(v.entitlementsService),await w(v.notificationService,t,r,"signInCommand")):await T(v.entitlementsService,v.tokenAcquisitionService),e.end(),(0,l.addAccountInfoToEvent)(e,r),(0,l.addEntitlementInfoToEvent)(e,t),e.sendTelemetry()},t.showEntitlementsStatusCommand=async function(){await _("command")}},68701:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identityStrings=void 0;const n=r(89496),i=r(18472);i.config({bundleFormat:i.BundleFormat.standalone,locale:n.env.language,messageFormat:i.MessageFormat.both});const o=i.loadMessageBundle(r(71017).join(__dirname,"services\\identity\\strings.ts"));t.identityStrings={devBoxSubscription:o(0,null),codeSpacesSubscription:o(1,null),softwareIsLicensed:o(2,null),softwareIsLicensedTo:o(3,null),underVsEnterpriseSubscription:o(4,null),underVsProSubscription:o(5,null),underDevBoxSubscription:o(6,null),underCodeSpacesSubscription:o(7,null),underIndividualLicense:o(8,null),expirationDateHeader:o(9,null),signInRequest:o(10,null),signInBtn:o(11,null),dismissBtn:o(12,null),entitlementsSignInReason:o(13,null)}},57359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addGetEntitlementTelemetry=t.addGetSessionTelemetry=t.catchErrors=t.SecretStorageWithErrorHandling=t.addSignInRequestInfoToActivity=t.sendErrorEvent=t.addEnvironmentInfoToEvent=t.addAccountInfoToEvent=t.addEntitlementInfoToEvent=t.sendReceivedEntitlementsTelemetry=t.NotificationService=void 0;const n=r(89496),i=r(75010),o=r(33077),s=r(7195),a=r(16260),c=r(78394),u=r(68701),l=r(89781);class d{static instance=new d;async showNotification(e,t,...r){const o=new i.TelemetryActivity("show-notification",s.telemetryService),a=await n.window.showInformationMessage(t,...r.map((e=>u.identityStrings[e]))),c=a?r.find((e=>a===u.identityStrings[e])):void 0;return o.end(),o.addOrUpdateProperties({notificationType:"Information",reason:e.messageReason,response:c}),f(o),e.telemetryUpdate&&e.telemetryUpdate(o),o.sendTelemetry(),c}}function p(e,t){t instanceof c.Entitlement?e.addOrUpdateProperties({entitlementType:c.EntitlementType[t.type],expirationDate:t.expirationDate.toISOString(),benefitDetailGuid:t.benefitDetailGuid,subscriptionLevelName:t.subscriptionLevelName,source:c.EntitlementSourceType[t.sourceType],fromCache:String(t.fromCache),isActive:String(t.isActive()),isFresh:String(t.isFresh()),programCode:t.programCode,channel:t.channel}):e.addOrUpdateProperties({entitlementError:c.EntitlementError[t]})}function f(e){e.addOrUpdateProperties({environmentType:(0,o.isInCodeSpaces)()?"codespaces":(0,o.isInDevBox)()?"devbox":"local"})}function h(e,t,r=null){const n=`${e}: Failed to ${t}. Error: '${r}'`;s.logger.log(n,l.LogImportance.high);const i=r instanceof Error?r:new Error(String(r??n)),a=r instanceof o.ErrorWithProperties?r.properties:{};s.telemetryService?.sendTelemetryErrorEvent("identity-error",{source:e,action:t,errorName:i.name,errorMessage:i.message,errorStack:String(i.stack),...a})}function g(e,t){e.addOrUpdateProperties({silent:String(t.silent),createIfNone:String(t.createIfNone),clearSessionPreference:String(t.clearSessionPreference),forceNewSession:String(t.forceNewSession)})}t.NotificationService=d,t.sendReceivedEntitlementsTelemetry=function(e){for(let t of e){const e=new a.TelemetryEvent("received-entitlement",s.telemetryService);p(e,t),f(e),e.sendTelemetry()}},t.addEntitlementInfoToEvent=p,t.addAccountInfoToEvent=function(e,t){e.addOrUpdateProperties({signedIn:String(!!t)})},t.addEnvironmentInfoToEvent=f,t.sendErrorEvent=h,t.addSignInRequestInfoToActivity=g,t.SecretStorageWithErrorHandling=class{storage;constructor(e){this.storage=e,this.onDidChange=e.onDidChange}async get(e){try{return await this.storage.get(e)}catch(t){return void h("secretStorage",`get secret '${e}' from the store`,t)}}async store(e,t){try{return await this.storage.store(e,t),!0}catch(t){return h("secretStorage",`store secret '${e}' in the store`,t),!1}}async delete(e){try{return await this.storage.delete(e),!0}catch(t){return h("secretStorage",`delete secret '${e}' from the store`,t),!1}}onDidChange},t.catchErrors=function(e){return function(t,r){const n=String(r.name);return async function(...r){let i=e;try{i=await t.call(this,...r)}catch(e){h(n,"running method",e)}return i}}},t.addGetSessionTelemetry=function(e,t){return async function(...t){const r=new i.TelemetryActivity("get-session",s.telemetryService);let n;try{n=await e.call(this,...t)}catch(e){throw r.addOrUpdateProperties({error:e instanceof Error?e.name:"error"}),e}finally{if(r.end(),n?.id){const[e,t,i]=n.id.split("/");r.addOrUpdateProperties({tenantId:e})}const[e,i,o]=t;r.addOrUpdateProperties({succeeded:String(!!n),providerId:e,scopes:i.join(" "),callerId:o.callerId}),f(r),g(r,o),r.sendTelemetry()}return n}},t.addGetEntitlementTelemetry=function(e,t){return async function(...t){const r=new i.TelemetryActivity("get-entitlement",s.telemetryService);let n=c.EntitlementError.requestFailure;try{n=await e.call(this,...t)}catch(e){throw r.addOrUpdateProperties({error:e instanceof Error?e.name:"error"}),e}finally{const e=t[0],i=t[1];r.end(),r.addOrUpdateProperties({succeeded:String(n instanceof c.Entitlement),isSessionUpdated:String(i)}),g(r,e),f(r),p(r,n),r.sendTelemetry()}return n}}},33077:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInDevBox=t.isInCodeSpaces=t.EventBouncer=t.ErrorWithProperties=t.httpsGet=t.daysPassedSince=void 0;const n=r(95687),i=r(89496);t.daysPassedSince=function(e){return Math.floor((Date.now()-e.getTime())/864e5)},t.httpsGet=function(e,t){return new Promise(((r,i)=>{const s={json:!0,headers:{Authorization:"bearer "+t}},a=n.get(e,s,(t=>{let n=[];t.on("data",(e=>n.push(e))),t.on("end",(()=>{const s=n.join(""),a=t.statusCode;a&&a>199&&a<300&&s?r(s):i(new o(`Request to ${e} failed with status code: ${a} and response "${s}"`,{statusCode:String(a),content:s,uri:e}))}))}));a.on("error",(e=>i(e))),a.end()}))};class o extends Error{properties;constructor(e,t){super(e),this.properties=t}}t.ErrorWithProperties=o,t.EventBouncer=class{#b=!1;stop(){this.#b=!1}raiseNext(){this.#b=!0}createEventHandler(e){return t=>{this.#b&&(this.stop(),e(t))}}},t.isInCodeSpaces=function(){return"codespaces"===i.env.remoteName},t.isInDevBox=function(){return"true"===process.env.IsDevBox?.toLocaleLowerCase()}},22677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startsWithInvariantIgnoreCase=t.equalsInvariantIgnoreCase=t.nugetStrings=t.hotReloadStrings=t.vsCodeAzureFunctionExtensionServiceStrings=t.dotnetDebugConfigurationServiceStrings=t.debugProjectLaunchStrings=t.codeCoverageStrings=t.testExplorerStrings=t.messageStrings=t.errorStrings=t.promptStrings=t.addNewItemUiStrings=t.addAspireOrchestrationUiStrings=t.NuGet=t.showError=t.chooseSolutionToOpen=t.openDocument=t.licenseViolationMessage=void 0;const n=r(89496),i=r(18472);i.config({bundleFormat:i.BundleFormat.standalone,locale:n.env.language,messageFormat:i.MessageFormat.both});const o=i.loadMessageBundle(r(71017).join(__dirname,"strings.ts"));t.licenseViolationMessage=o(0,null),t.openDocument=o(1,null),t.chooseSolutionToOpen=o(2,null),t.showError=o(3,null);class s{static restoreFailure=o(4,null);static requiresCredentialsMessage=o(5,null);static showDeviceCodeLoginInfo=o(6,null)}function a(e,t){return 0===e.localeCompare(t,"en",{sensitivity:"accent"})}t.NuGet=s,t.addAspireOrchestrationUiStrings={appHostNamePrompt:o(7,null),serviceDefaultsNamePrompt:o(8,null),selectProjectsPrompt:o(9,null),noProjectsError:o(10,null),locationForNewProject:o(11,null),projectCreatedIn:e=>o(12,null,e),defaultDirectory:o(13,null),chooseDirectory:o(14,null),projectLocation:o(15,null)},t.addNewItemUiStrings={noSdkFound:o(16,null),createNewProject:o(17,null),searchForTemplates:o(18,null),waitingTemplateService:o(19,null),installMaui:o(20,null),mauiExtensionNotFound:o(21,null),nameNewProject:o(22,null),noProjectName:o(23,null),onlyRelative:o(24,null),outsideDirectory:o(25,null),pathInvalidChars:o(26,null),pathTooLong:o(27,null),projectDirectoryExists:o(28,null),solutionContainsItem:e=>o(29,null,e),locationForNewProject:o(30,null),projectCreatedIn:e=>o(31,null,e),defaultDirectory:o(32,null),chooseDirectory:o(33,null),projectLocation:o(34,null),createProject:o(35,null),showTemplateOptions:o(36,null),templateOptions:o(37,null),createProjectOrViewOptions:o(38,null),selectOption:o(39,null),selectOptionToConfigure:o(40,null),default:o(41,null),selected:o(42,null),configureOption:e=>o(43,null,e),specifyValue:e=>o(44,null,e),trueValue:o(45,null),falseValue:o(46,null),custom:o(47,null),createNewFile:o(48,null),addExistingFileToSolutionFolder:e=>o(49,null,e),addExistingFileToProject:e=>o(50,null,e),yes:o(51,null),cancel:o(52,null),nameNewFile:o(53,null),noFileName:o(54,null),fileExists:o(55,null),newSolutionFileName:o(56,null),locationForNewSolutionFile:o(57,null),noSolution:o(58,null),solutionAlreadyExists:o(59,null),selectSolutionFileFormat:o(60,null),slnFileFormat:o(61,null),slnxFileFormat:o(62,null)},t.promptStrings={selectProject:o(63,null),selectReferenceProject:o(64,null),selectSourceProject:o(65,null),selectReferenceToRemove:o(66,null),addExistingFile:o(67,null),selectFile:o(68,null),yes:o(69,null),no:o(70,null),ok:o(71,null),cancel:o(72,null),addExistingProject:o(73,null),deleteConfirmation:e=>o(74,null,e),newFolderName:o(75,null),newSolutionFolder:o(76,null),removeItemConfirmation:e=>o(77,null,e),newName:o(78,null),moreInformation:o(79,null),chooseProjectToOpen:o(80,null),chooseToOpen:o(81,null),chooseProjectFileLabel:o(82,null),projectFilesFilterName:o(83,null),doNotOpenSolution:o(84,null),openProjectLog:o(85,null),openLog:o(86,null),doNotShowInWorkspaceAgain:o(87,null),openSettings:o(88,null),openLogChannel:o(89,null),disableExtensionButton:o(90,null),doNotShowAgain:o(91,null),reloadOnConfigurationChange:o(92,null),reloadWindow:o(93,null),selectConfiguration:o(94,null),selectPlatform:o(95,null),dragDropSolutionNode:(e,t)=>o(96,null,e,t),overwriteExistingItem:e=>o(97,null,e),addSolutionItemNotSupportedSolutionless:o(98,null),addProjectIsNotSupportedForSlnx:o(99,null)},t.errorStrings={noName:o(100,null),solutionContainsItem:e=>o(101,null,e),folderContainsItem:e=>o(102,null,e),pathTooLong:o(103,null),pathInvalidChars:o(104,null),noSolution:o(105,null),noSolutionInWorkspace:o(106,null),openSolutionFilterFailed:o(107,null),errorDuringOpenSolution:e=>o(108,null,e),errorDuringCloseSolution:e=>o(109,null,e),errorDuringReloadSolution:e=>o(110,null,e),addingOutsideWorkspace:(e,t)=>o(111,null,e,t),deleteOperationFailed:e=>o(112,null,e),newFolderFailed:e=>o(113,null,e),fileOrFolderAlreadyExists:o(114,null),removeOperationFailed:e=>o(115,null,e),renameOperationFailed:e=>o(116,null,e),addProjectReferenceOnSharedProject:o(117,null),addProjectReferenceNoProjects:o(118,null),removeProjectReferenceNoProjects:o(119,null),mauiWorkloadNotFound:o(120,null),mauiExtensionNotFound:o(121,null),notSupportedDraggedItem:e=>o(122,null,e),errorMovingItem:e=>o(123,null,e),cannotFindDotnetInstallation:o(124,null),corruptedDotnetInstallation:e=>o(125,null,e),errorSaveSolutionFile:e=>o(126,null,e),errorNoSolutionDectectedForFilter:e=>o(127,null,e)},t.messageStrings={projectsStatusName:o(128,null),noSolutionLoadedStatus:o(129,null),projectsLoadingStatus:e=>o(130,null,e),projectsLoadingInProgress:o(131,null),projectsReadyState:e=>o(132,null,e),noProjectStateToolTip:o(133,null),noProjectStateCodeFileToolTip:o(134,null),fileOutsideOfProjectsToolTip:o(135,null),projectFileTooltip:o(136,null),fileInsideProjectToolTip:e=>o(137,null,e),fileInsideMultipleProjectsToolTip:o(138,null),noSolutionStateToolTip:o(139,null),projectsFailedToLoadToolTip:e=>o(140,null,e),configurationStatusName:o(141,null),configurationTooltip:o(142,null),retrievingInformationForCurrentDocumentInProgress:o(143,null),solutionFileInvalid:o(144,null),solutionExplorerNodeInvalid:o(145,null),projectNotSupported:o(146,null),solutionExplorerItemMissing:o(147,null)},t.testExplorerStrings={buildFailed:o(148,null)},t.codeCoverageStrings={invalidCoverageFile:o(149,null)},t.debugProjectLaunchStrings={notSupportedFileExtension:(e,t)=>o(150,null,e,t),errorNoProjectForFile:e=>o(151,null,e),errorNoConfigurations:o(152,null),errorNoLaunchTargets:e=>o(153,null,e),errorDebugMultipleConfigurations:o(154,null),errorNoProjectFound:o(155,null),errorNoOpenFolder:o(156,null),errorGenericFailedToGetConfigurations:o(157,null),selectProject:o(158,null),warnNoProjectSelected:o(159,null),selectStartupProject:o(160,null),startupProjectTitle:o(161,null),errorNoLaunchableProjects:o(162,null),errorImprovedLaunchExperienceNotEnabled:o(163,null),errorNoStartupProjectSelected:o(164,null),errorStartupProjectNotFound:o(165,null),startupProjectLaunchConfigName:o(166,null),selectLaunchConfiguration:o(167,null),startupProjectTooltip:o(168,null),noProjectPlaceholder:o(169,null),launchConfigurationTitle:o(170,null),launchConfigurationTooltip:o(171,null),selectLaunchTargetFramework:o(172,null),debugTargetFrameworkTitle:o(173,null),debugTargetFrameworkTooltip:o(174,null),errorNoTargetFrameworksAvailable:o(175,null)},t.dotnetDebugConfigurationServiceStrings={errorMultipleDebugEngines:e=>o(176,null,e),invalidLaunchConfigurationId:e=>o(177,null,e),errorBuildTitle:o(178,null),errorBuildDetails:e=>o(179,null,e),warningMissingBuildTask:o(180,null),errorAspireLaunchMinimumVersion:e=>o(181,null,e),errorNoDebugEngine:o(182,null)},t.vsCodeAzureFunctionExtensionServiceStrings={errorFuncCoreToolsMissing:o(183,null),errorAzureFunctionsExtensionMissing:o(184,null),errorAzureFunctionMinimumVersion:e=>o(185,null,e),errorAzureFunctionExportsMissing:o(186,null),errorAzureFunctionStartFunc:e=>o(187,null,e)},t.hotReloadStrings={disabledInSettingsStatus:o(188,null),notSupportedForSessionStatus:o(189,null),availableStatus:o(190,null),disabledResult:o(191,null),applyUpdatesFailureResult:o(192,null),changesDetected:o(193,null),serviceNotFound:o(194,null),exceptionWhenApplying:o(195,null)},t.nugetStrings={projectPickerPlaceholder:o(196,null),packageSearchPlacholder:o(197,null),packagePickerPlaceholder:o(198,null),versionLatestLabel:o(199,null),versionCurrentLabel:o(200,null),versionOthersLabel:o(201,null),selectVersionPlaceholder:o(202,null),noPackagesFoundError:o(203,null),noVersionsFoundError:o(204,null),noPackagesToUpdateResult:o(205,null),noPackagesToRemoveResult:o(206,null),addPackageTitle:o(207,null),updatePackageTitle:o(208,null),removePackageTitle:o(209,null),addPackageNameTitle:e=>o(210,null,e),updatePackageNameTitle:e=>o(211,null,e),missingDotnetSdkError:o(212,null),missingDotnetSdkActionMessage:o(213,null),invalidJsonError:e=>o(214,null,e),prereleaseIncludedSuffix:e=>o(215,null,e),prereleaseNotIncludedSuffix:e=>o(216,null,e)},t.equalsInvariantIgnoreCase=a,t.startsWithInvariantIgnoreCase=function(e,t){return e.length>=t.length&&(e.startsWith(t)||a(e.substring(0,t.length),t))}},65306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationTelemetry=void 0;const n=r(7195);t.ExperimentationTelemetry=class{properties;measurements;constructor(){this.properties={},this.measurements={}}postEvent(e,t){let r={};t.forEach(((e,t)=>{r[t]=e})),r={...this.properties,...r},n.telemetryService?.sendTelemetryEvent(e,r,this.measurements)}setSharedProperty(e,t){this.properties[e]=t}getProperties(){return this.properties}}},75010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryActivity=void 0;const n=r(16260);class i extends n.TelemetryEvent{static startTimeMeasurementName="startTimeInMilliseconds";static endTimeMeasurementName="endTimeInMilliseconds";static durationMeasurementName="ActivityDurationInMilliseconds";startTime;endTime;constructor(e,t){super(e,t),this.startTime=Date.now()}start(){this.startTime=Date.now(),this.endTime=void 0}end(){void 0!==this.startTime&&(this.endTime=Date.now())}sendTelemetry(){void 0===this.endTime&&(this.endTime=Date.now()),this.measurements[i.startTimeMeasurementName]=this.startTime,this.measurements[i.endTimeMeasurementName]=this.endTime,this.measurements[i.durationMeasurementName]=this.endTime-this.startTime,super.sendTelemetry()}}t.TelemetryActivity=i},26120:(e,t,r)=>{"use strict";function n(e){}let i;Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryEtwLogger=t.tryLogTelemetryEtwErrorEvent=t.tryLogTelemetryEtwEvent=t.telemetryEtwNullLogger=void 0,t.telemetryEtwNullLogger={logEvent:n,logErrEvent:n,logPerfEvent:n,logInfoEvent:n,logStartCommand:n,logStopCommand:n,logStartUpdateProgram:n,logStopUpdateProgram:n,logStartUpdateGraph:n,logStopUpdateGraph:n,logStartResolveModule:n,logStopResolveModule:n,logStartParseSourceFile:n,logStopParseSourceFile:n,logStartReadFile:n,logStopReadFile:n,logStartBindFile:n,logStopBindFile:n,logStartScheduledOperation:n,logStopScheduledOperation:n};try{i=r(56232)}catch(e){i=void 0}t.tryLogTelemetryEtwEvent=function(e,r,n){if(i){var o=`{"eventname":"${e}","properties":${r?JSON.stringify(r):"{}"},"measures":${n?JSON.stringify(n):"{}"}}`;t.telemetryEtwLogger.logEvent(o)}},t.tryLogTelemetryEtwErrorEvent=function(e,r,n){if(i){var o=`{"eventname":"${e}","properties":${r?JSON.stringify(r):"{}"},"measures":${n?JSON.stringify(n):"{}"}}`;t.telemetryEtwLogger.logErrEvent(o)}},t.telemetryEtwLogger=i||t.telemetryEtwNullLogger},16260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEvent=void 0,t.TelemetryEvent=class{eventName;telemetryService;properties;measurements;sharedProperties;constructor(e,t){this.eventName=e,this.telemetryService=t;const r=t?.getExperimentationTelemetryReporter();this.sharedProperties=r?r.getProperties():{},this.properties={},this.measurements={}}addOrUpdateProperties(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];r&&(this.properties[t]=r)}}addOrUpdateMeasurements(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];r&&(this.measurements[t]=r)}}sendTelemetry(){Object.keys(this.sharedProperties).length>0&&(this.properties={...this.sharedProperties,...this.properties}),this.telemetryService?.sendTelemetryEvent(this.eventName,this.properties,this.measurements)}}},51990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUserTempFilePath=t.readTelemetryFileAsync=t.writeTempJsonFileAsync=void 0;const n=r(57147),i=r(22037),o=r(71017),s=r(7195);function a(e){try{return o.basename(e)}catch(t){s.logger.reportExceptionTelemetryAndLog("getFileNameFromPath","error getting filename from path","",t,s.telemetryService,{faultingFilePath:e})}return e}function c(e,t,r){switch(process.platform){case"win32":return o.join(i.tmpdir(),`${e}`,`${t}`,`${r}`);case"darwin":return o.join(function(){const e=i.homedir();return o.join(e,"Library","Application Support")}(),`${e}`,`${t}`,`${r}`);default:return o.join(function(){let e=process.env.XDG_CACHE_HOME;if(!e){const t=i.homedir();e=o.join(t,".cache","Microsoft")}return e}(),`${e}`,`${t}`,`${r}`)}}t.writeTempJsonFileAsync=async function(e,t,r){let u=c(e,"",t);try{const c=o.dirname(u);if(await n.promises.mkdir(c,{recursive:!0}),await n.promises.writeFile(u,r,{encoding:"utf8"}),"win32"===i.platform()){let r=await async function(e,t,r){if("win32"===process.platform){if(e.indexOf("~")>0){try{e=await n.promises.realpath(e)}catch(e){return void s.logger.reportExceptionTelemetryAndLog("resolveShortPathWindows","error getting windows filepath","",e,s.telemetryService,{faultingFileName:a(r)})}e.indexOf("~")>0&&(e="string"==typeof process.env.LOCALAPPDATA?o.win32.join(process.env.LOCALAPPDATA,"Temp",`${t}`,`${r}`):o.win32.join(i.homedir(),"AppData","Local","Temp",`${t}`,`${r}`))}return e}}(u,e,t);if(void 0===r)return"";u=r}}catch(e){return s.logger?.reportExceptionTelemetryAndLog("writeTempJsonFileAsync","error writing json file","",e,s.telemetryService),""}try{process.on("exit",(e=>{n.unlink(u,(e=>{e&&s.logger.reportExceptionTelemetryAndLog("writeTempJsonFileAsync","error deleting temp file","",e,s.telemetryService)}))}))}catch(e){s.logger.reportExceptionTelemetryAndLog("writeTempJsonFileAsync","error linking process to file for deletion","",e,s.telemetryService)}return u},t.readTelemetryFileAsync=async function(e,t,r){try{let i=c(e,t,r);return n.existsSync(i)?await n.promises.readFile(i,{encoding:"utf8",flag:"r"}):""}catch(e){s.logger.reportExceptionTelemetryAndLog("readTelemetryFileAsync","error reading file","",e,s.telemetryService,{faultingFileName:r})}return""},t.generateUserTempFilePath=c},36661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryService=t.writeCommonPropsToFileAsync=void 0;const n=r(92291),i=r(89496),o=r(89781),s=r(6113),a=r(22037),c=r(51990),u=r(65979),l=r(57147),d=r(26120),p=r(71017),f=r(65306);async function h(e,t){if(process.env.CommonPropertyBagPath)return t&&(t.CommonPropertyBagPath=process.env.CommonPropertyBagPath),process.env.CommonPropertyBagPath;const n=e.extension.packageJSON.name,o=e.extension.packageJSON.version,s=v.getSessionId(i.env.sessionId),u=e.extension.packageJSON.publisher,d=await async function(e){const t=m(e),n={},i="csdevkit.extension.getDevDeviceId.";let o;n[i+"stage"]="start";try{o=await Promise.resolve().then((()=>r(40946))),n[i+"stage"]="obtainedPackage";const e=await o.getDeviceId();return n[i+"stage"]="obtainedDeviceId",t.sendTelemetryEvent("csdevkit/extension/telemetryservice/getDevDeviceId",n),e}catch(t){if(t&&"object"==typeof t&&"code"in t&&(n[i+"errorcode"]=t.code??""),"win32"===a.platform()){const t=p.join(e.extensionPath,"node_modules","@vscode","deviceid");n[i+"packagefolderexists"]=l.existsSync(t),n[i+"windowsnodefileexists"]=l.existsSync(p.join(t,"build","Release","windows.node"))}return n[i+"devdeviceidPackageValue"]=o?.valueOf()??"",g(e,t,n),""}}(e);let f="";if("win32"===a.platform()){let t=await(0,c.readTelemetryFileAsync)(n,"Telemetry","Resources.json");try{t&&t.length>0&&(t=t.replace(/\r?\n|\r/g," ").replace(/\s+/g," ").trim(),f=JSON.parse(t))}catch(t){if(f="",e.extension.packageJSON.aiKey&&""!==e.extension.packageJSON.aiKey.trim()){let r={},n=p.join(a.tmpdir(),e.extension.packageJSON.name,"Telemetry","Resources.json"),i="false";try{l.rmSync(n,{force:!0})}catch(e){}finally{l.existsSync(n)||(i="true")}r.methodname="writecommonpropstofileasync",r.filedeletesuccess=!l.existsSync(n),g(e,t,r)}}}let h="csdevkit.release";e.extension.packageJSON.preview&&(h="csdevkit.insider");let y={"common.vscodesessionid":s,"common.devdeviceid":d,"common.extname":u+"."+n,"common.extversion":o,"common.os":a?.platform(),"common.platformversion":(a?.release()??"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.vscodemachineid":i.env.machineId,"common.vscodeversion":i.version,"common.product":i.env.appHost?.toLowerCase(),"common.channelid":h,GlobalStorageUri:e.globalStorageUri.fsPath},_={version:2,commonProperties:{"common.vscodesessionid":s,"common.devdeviceid":d,"common.extname":u+"."+n,"common.extversion":o,"common.os":a?.platform(),"common.platformversion":(a?.release()??"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.vscodemachineid":i.env.machineId,"common.vscodeversion":i.version,"common.product":i.env.appHost?.toLowerCase(),"common.channelid":h},sessionConfiguration:{globalStorageUri:e.globalStorageUri.fsPath,bucketFilters:f}},S=s.split("-");const w=S[0],E=S[S.length-1],b=await(0,c.writeTempJsonFileAsync)(n,`${w}.json`,JSON.stringify(y)),P=await(0,c.writeTempJsonFileAsync)(n,`${E}.json`,JSON.stringify(_));return process.env.CommonPropertyBagPath=`${b}`,process.env.CommonPropertyBagWithConfigPath=`${P}`,b}function g(e,t,r){let n=m(e),i=r??{};try{t&&(i.errormessage=t.toString(),t instanceof Error&&(i.exceptionstack=t.stack??""))}catch(t){}finally{n.sendTelemetryErrorEvent("csdevkit/extension/error",i)}}function m(e){const t=new n.default(e.extension.packageJSON.aiKey);return e.subscriptions.push(t),t}t.writeCommonPropsToFileAsync=h;class v{telemetryReporter;tokenAcquisitionService;propertyBagFilePath;sessionProperties;telemetryLogger;brokeredService;experimentationTelemetryReporter;static getSessionId(e){return"somevalue.sessionid"===e?.toLowerCase()?(0,s.randomUUID)():e}constructor(e){"true"===process.env.EnableTelemetryInOutputWindow&&(this.telemetryLogger=new o.Logger(`${e.extension.packageJSON.displayName} - Telemetry`));try{this.telemetryReporter=new n.default(e.extension.packageJSON.aiKey),e.subscriptions.push(this.telemetryReporter),this.experimentationTelemetryReporter=new f.ExperimentationTelemetry}catch(e){this.telemetryLogger?.log(`Failed to create TelemetryReporter due to ${e}`)}}getTelemetryLevel(){return"true"===process.env.PERFTEST_TELEMETRY_OPTIN?"all":this.telemetryReporter?.telemetryLevel}getExperimentationTelemetryReporter(){return this.experimentationTelemetryReporter}sendTelemetryEvent(e,t,r){this.outputTelemetryToLog(e,t,r);const n=this.experimentationTelemetryReporter?.getProperties();n&&Object.keys(n).length>0&&(t={...n,...t}),this.telemetryReporter?.sendTelemetryEvent(e,t,r),(0,d.tryLogTelemetryEtwEvent)(e,t,r)}sendTelemetryErrorEvent(e,t,r){if(null==e||""===e)return;let n="csdevkit/extension/error",i=t??{};e instanceof Error?(i.exceptiontype=e.name??"",i.exceptionStack=e.stack??""):i.errormessage="string"==typeof e?e:e.toString();const o=this.experimentationTelemetryReporter?.getProperties();o&&Object.keys(o).length>0&&(t={...o,...t}),this.outputTelemetryToLog(n,i,r),this.telemetryReporter?.sendTelemetryErrorEvent(n,i,r),(0,d.tryLogTelemetryEtwErrorEvent)(n,i,r)}sendTelemetryException(e,t,r){this.sendTelemetryErrorEvent(e,t,r)}async updateIsMicrosoftInternal(){let e=null;const t=await(this.tokenAcquisitionService?.getSessionInfo([],{silent:!0,callerId:"TelemetryService.updateIsMicrosoftInternal",requestReason:"updateIsMicrosoftInternal"}));if(t){const r=t?.idToken.split(".")[1],n=Buffer.from(r,"base64").toString("binary"),i=JSON.parse(n);e=i?.preferred_username?.toString()??null}let r=null,n=!1;if(e){var i=e.split("@");2===i.length?"microsoft.com"===i[1]?.toLowerCase()&&(n=!0,r=i[0]):this.telemetryLogger?.log(`Invalid email address format: ${e}`)}if(this.brokeredService?.hasServerProcessLoaded()){const e=await(this.brokeredService?.serviceBroker.getProxy(u.default.telemetrySessionUpdateService));try{e&&await e.updateIsMicrosoftInternal(n,r)}catch(e){this.telemetryLogger?.log(`Failed to call ITelemetrySessionUpdateService due to ${e}`)}finally{e?.dispose()}}}outputTelemetryToLog(e,t,r){if(this.telemetryLogger?.log(`Event: ${e}`),this.sessionProperties&&(t=t?{...this.sessionProperties,...t}:this.sessionProperties),this.telemetryLogger){t={...t,locallogtimestamp:this.getLocalLogTimestamp()},this.telemetryLogger.log("Properties");for(const e in t)this.telemetryLogger.log(`  ${e}: ${t[e]}`)}const n=Date.now();if(r?r.hasOwnProperty("startTimeInMilliseconds")||(r.startTimeInMilliseconds=n):r={startTimeInMilliseconds:n},void 0!==r&&this.telemetryLogger){this.telemetryLogger.log("Measurements");for(const e in r)this.telemetryLogger.log(`  ${e}: ${r[e]}`)}this.telemetryLogger?.log("")}getLocalLogTimestamp(){return(new Date).toISOString().replace(/T/," ").replace(/Z/,"")}async saveVSCodePropsAsync(e){if(this.propertyBagFilePath=await h(e),void 0!==this.propertyBagFilePath){const e=l.readFileSync(this.propertyBagFilePath,"utf-8"),t=JSON.parse(e);let r=null;try{const e=process.env.TEST_SESSION_TELEMETRY_PROPS;e&&(r=JSON.parse(e))}catch{}this.sessionProperties=r?{...r,...t}:t}}registerUpdateIsMicrosoftInternal(e,t){this.tokenAcquisitionService=e,this.tokenAcquisitionService.msSessionChanged((()=>this.updateIsMicrosoftInternal())),this.updateIsMicrosoftInternal()}registerForTelLevelChangeEvent(e,t){this.brokeredService=e;const r=this.telemetryReporter?.onDidChangeTelemetryLevel((async e=>{if(this.brokeredService?.hasServerProcessLoaded()){const t=await(this.brokeredService?.serviceBroker.getProxy(u.default.telemetrySessionUpdateService));try{t&&await t.updateTelemetryOptInLevel(e)}catch(e){this.telemetryLogger?.log(`Failed to call ITelemetrySessionUpdateService due to ${e}`)}finally{t?.dispose()}}}));r&&t.subscriptions.push(r)}async dispose(){if(void 0!==this.telemetryReporter)return await this.telemetryReporter.dispose()}}t.TelemetryService=v},73228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWindows=t.exists=t.containsFileOrFolder=t.waitForProcess=t.endsWithInvariantIgnoreCase=t.startsWithInvariantIgnoreCase=t.equalsInvariantIgnoreCase=t.delay=t.lazyPromiseLambda=t.fileOrDirectoryExists=t.readJsonFile=t.stripBomFromUtf8BufferIfPresent=void 0;const n=r(73292),i=r(47031),o=r(22037),s=r(30077),a=r(71017),c=Buffer.from([239,187,191]);function u(e){return e.length>=3&&e.slice(0,3).equals(c)?e.slice(3):e}function l(e,t){return 0===e.localeCompare(t,"en",{sensitivity:"accent"})}t.stripBomFromUtf8BufferIfPresent=u,t.readJsonFile=async function(e){const t=u(await(0,n.readFile)(e));return JSON.parse(t.toString())},t.fileOrDirectoryExists=async function(e){return!!await(0,n.stat)(e).catch((e=>!1))},t.lazyPromiseLambda=function(e){return new i.default(((t,r)=>{try{t(e())}catch(e){r(e)}}))},t.delay=function(e){return new Promise((t=>setTimeout(t,e)))},t.equalsInvariantIgnoreCase=l,t.startsWithInvariantIgnoreCase=function(e,t){return e.length>=t.length&&(e.startsWith(t)||l(e.substring(0,t.length),t))},t.endsWithInvariantIgnoreCase=function(e,t){return e.length>=t.length&&(e.endsWith(t)||l(e.substring(e.length-t.length),t))},t.waitForProcess=async function(e,t){return new Promise((async function(r,n){let i=[];e.stderr?.on("data",(e=>{t?.log(e.toString()),i.push(e.toString())})),e.stdout?.on("data",(e=>t?.log(e.toString().trimEnd()))),e.on("exit",(e=>{e&&0!==e?i.length>0?n(new s.ExitCodeError(e,`Failed with ExitCode(${e})${o.EOL}Details${o.EOL}${i.join("")}`)):n(new s.ExitCodeError(e,`Failed with ExitCode(${e})`)):r(!0)}))}))},t.containsFileOrFolder=function(e,t){if(e=a.normalize(e),(t=a.normalize(t)).length>e.length){const r=a.relative(e,t);if(r)return!r.startsWith("..")&&!a.isAbsolute(r)}else if(t.length===e.length){if(e===t)return!0;const r=process.platform;if(("win32"===r||"darwin"===r)&&l(e,t))return!0}return!1},t.exists=async function(e){try{return await(0,n.stat)(e),!0}catch{return!1}},t.isWindows=function(){return"win32"===process.platform}},26199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrCreateImageCatalog=t.getImageCatalog=t.ImageCatalog=void 0;const n=r(57147),i=r(7195),o=r(71017),s=r(73228);class a{imageCatalogPath;imageCatalog;constructor(e,t){this.imageCatalogPath=e,this.imageCatalog=t}getIcon(e,t){const r=e.toLowerCase()+":"+t,s=this.imageCatalog[r];if(s&&this.imageCatalogPath){const e=o.join(this.imageCatalogPath,"svg",s+".16.16.svg"),t=o.join(this.imageCatalogPath,"svg",s+".dark.16.16.svg");if((0,n.existsSync)(e))return{light:e,dark:t};i.logger.log("Requested icon not found: "+s)}return null}}let c;t.ImageCatalog=a,t.getImageCatalog=function(){return c},t.getOrCreateImageCatalog=async function(e){if(!c)try{const t=e.asAbsolutePath("imageCatalog"),r=(e.asAbsolutePath("imageCatalog/imageCatalog.json"),await(0,s.readJsonFile)(e.asAbsolutePath("imageCatalog/imageCatalog.json")));c=new a(t,r)}catch(e){i.logger.log(`Error reading image catalog: ${e}`)}return c}},45723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectInitializationStatus=void 0;const n=r(89496),i=r(19679),o=r(65979),s=r(7195),a=r(24138),c=r(22677),u=r(71017),l=r(89781),d=r(77867);t.ProjectInitializationStatus=class{statusBarItem;statusObserver;environmentVersion;environmentErrors;completedVersion;brokerService;statusService;solutionCount;projectsCount;failedProjectsCount;subscription;activeDocument;activeDocumentVersion;activeProjects;activeProjectsVersion;activeProjectsSubscription;noProjectStatusService;projectStatusServiceFailed;constructor(){this.statusObserver=new i.Observer((e=>{this.onCompleted(e)}),(e=>{s.logger.log("Failed to monitor project loading status."),e?(s.logger.log(e,l.LogImportance.low),d.dotnetRuntimeResolved?.dotnetFailureMessage?this.projectStatusServiceFailed=d.dotnetRuntimeResolved.dotnetFailureMessage:"System.AggregateException"===e.ClassName&&e.InnerException?this.projectStatusServiceFailed=e.InnerException.Message:this.projectStatusServiceFailed=e.Message,this.projectStatusServiceFailed??=JSON.stringify(e,null,2)):this.projectStatusServiceFailed="Unknown Error",this.refreshStatus()})),this.statusBarItem=n.window.createStatusBarItem("csdevkit.projects",n.StatusBarAlignment.Left,12),this.statusBarItem.name=c.messageStrings.projectsStatusName,this.environmentVersion=0,this.completedVersion=0,this.solutionCount=0,this.projectsCount=0,this.failedProjectsCount=0,this.environmentErrors=void 0,this.setStatusBarItem(c.messageStrings.noSolutionLoadedStatus,c.messageStrings.noSolutionStateToolTip,void 0,a.openSolution),n.window.onDidChangeActiveTextEditor((e=>{e&&"file"!==e.document?.uri?.scheme||(this.activeDocument=e?.document?.fileName,this.refreshActiveProjects())})),"file"===n.window.activeTextEditor?.document?.uri?.scheme&&(this.activeDocument=n.window.activeTextEditor?.document?.fileName),this.activeDocumentVersion=0}async dispose(){try{this.subscription?.dispose(),this.statusBarItem.dispose(),this.activeProjectsSubscription?.dispose()}catch(e){}}show(){this.noProjectStatusService||this.statusBarItem.show()}async init(e){try{this.brokerService=e,this.statusService=await e.getProxy(o.default.projectInitializationStatusService),this.noProjectStatusService=!1,this.statusService?(this.subscription=await this.statusService.subscribeInitializationCompletion(this.statusObserver),this.statusBarItem.show()):(this.noProjectStatusService=!0,this.statusBarItem.hide())}catch(e){s.logger.log(`Failed to listen to project initialization status: ${e?.toString()}`),this.noProjectStatusService=!0,this.statusBarItem.hide()}}onEnvironmentUpdate(e,t,r){this.environmentVersion=e,this.solutionCount=t,this.environmentErrors=r,this.refreshStatus()}onActiveProjectsSubscriptionUpdate(e){if(!e)return;const t=e.Items?.map((e=>e.Name??"")).filter((e=>e));this.activeProjectsVersion=this.activeDocumentVersion,this.activeProjects=t,this.refreshStatus()}onCompleted(e){this.completedVersion=e.environmentStateVersion,this.projectsCount=e.projectsLoadedCount??0,this.failedProjectsCount=e.projectsFailedCount??0,this.activeProjectsSubscription||this.refreshActiveProjects(),this.refreshStatus()}refreshActiveProjects(){if(!this.brokerService)return;this.activeProjectsSubscription?.dispose(),this.activeProjectsSubscription=void 0;const e=++this.activeDocumentVersion;try{this.activeDocument&&this.solutionCount>0?this.activeProjectsSubscription=new p(this.brokerService,this.activeDocument):e===this.activeDocumentVersion&&(this.activeProjectsVersion=e,this.activeProjects=void 0,this.refreshStatus())}catch(e){s.logger.log("Failed to handle active text editor:"+e)}}setStatusBarItem(e,t,r,n){this.statusBarItem.text=e,this.statusBarItem.tooltip=t,this.statusBarItem.backgroundColor=r,this.statusBarItem.command=n}refreshStatus(){if(this.projectStatusServiceFailed)this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("$(error)"),this.projectStatusServiceFailed,new n.ThemeColor("statusBarItem.errorBackground"),a.openDevKitOutputWindow);else if(this.environmentVersion>this.completedVersion)this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("$(loading~spin)"),c.messageStrings.projectsLoadingInProgress,void 0,void 0),this.statusService&&this.statusBarItem.show();else if(0===this.solutionCount)this.setStatusBarItem(c.messageStrings.noSolutionLoadedStatus,c.messageStrings.noSolutionStateToolTip,void 0,a.openSolution);else if(this.environmentErrors&&this.environmentErrors.length>0)this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("$(error) 0"),c.messageStrings.solutionFileInvalid+this.environmentErrors.map((e=>e.message)).join("\n"),new n.ThemeColor("statusBarItem.errorBackground"),void 0);else if(this.failedProjectsCount>0)this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`$(error) ${this.failedProjectsCount}`),c.messageStrings.projectsFailedToLoadToolTip(this.failedProjectsCount),new n.ThemeColor("statusBarItem.errorBackground"),a.openProjectsLogsView);else{const e=this.activeDocument&&this.activeDocument.toLowerCase().endsWith(".cs"),t=e?new n.ThemeColor("statusBarItem.warningBackground"):void 0;if(this.projectsCount>0){const e=a.syncWithActiveItem;if(this.activeDocument)if(this.activeProjectsVersion&&this.activeProjectsVersion===this.activeDocumentVersion)if(this.activeProjects&&0!==this.activeProjects.length)1===this.activeProjects.length?this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`${this.activeProjects[0]}`),c.messageStrings.fileInsideProjectToolTip(`${this.activeProjects[0]}`),void 0,e):this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`${this.activeProjects.length}`),c.messageStrings.fileInsideMultipleProjectsToolTip+this.activeProjects.join("\n"),void 0,e);else{const r=this.activeDocument?.toLowerCase(),n=s.environmentStateManager?.getOpenedSolutionExt(),i=n&&r?.endsWith(n),o=r?.endsWith(".csproj")||r?.endsWith(".shproj");if(i||o){const n=s.environmentStateManager?.getLatestEnvironmentState();let a=!1;if(i){const n=s.environmentStateManager?.getOpenedSolution();n&&n.toLowerCase()===r?this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`${this.projectsCount}`),c.messageStrings.projectsReadyState(`${this.projectsCount}`),t,e):a=!0}else if(o){const i=n?.projects?.find((e=>e?.projectId?.fullPath?.toLowerCase()===r)),o=i?i.projectId?.fullPath:void 0;o?this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`${u.parse(o).name}`),c.messageStrings.projectFileTooltip,t,e):a=!0}a&&this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`$(warning) ${this.projectsCount}`),c.messageStrings.fileOutsideOfProjectsToolTip,t,e)}else this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`$(warning) ${this.projectsCount}`),c.messageStrings.fileOutsideOfProjectsToolTip,t,e)}else this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("$(loading~spin)"),c.messageStrings.retrievingInformationForCurrentDocumentInProgress,void 0,e);else this.setStatusBarItem(c.messageStrings.projectsLoadingStatus(`${this.projectsCount}`),c.messageStrings.projectsReadyState(`${this.projectsCount}`),void 0,e)}else if(this.solutionCount>0){const r=e?c.messageStrings.noProjectStateCodeFileToolTip:c.messageStrings.noProjectStateToolTip;this.setStatusBarItem(c.messageStrings.projectsLoadingStatus("0"),r,t,a.syncWithActiveItem)}}}};class p{activeProjectSubscription;brokerService;isDisposed=!1;constructor(e,t){this.brokerService=e,this.subscribeActiveProjectsAsync(t).catch((e=>s.logger.log("Failed to subscribe to active projects: "+e)))}onNext(e){this.isDisposed||s.projectInitializationStatus?.onActiveProjectsSubscriptionUpdate(e)}onCompleted(){}onError(e){}dispose(){this.isDisposed||(this.isDisposed=!0,this.activeProjectSubscription?.dispose())}async subscribeActiveProjectsAsync(e){if(!this.brokerService)return;const t={context:"Projects",query:{$properties:["Id","Name","Files"],Files:{$properties:["Id","Path"],$filter:{FilesByPath:[[e]]}},$where:{any:{".":"Files"}}}};this.activeProjectSubscription=await s.projectQueryableSpace.subscribeQuery(t,this),this.isDisposed&&this.activeProjectSubscription?.dispose()}}},92181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionExplorerProvider=t.contextValues=t.nodeTypes=void 0;const n=r(19679),i=r(89496),o=r(89496),s=r(24138),a=r(7195),c=r(65979),u=r(22677),l=r(75010),d=r(73228),p=r(89781),f=r(758),h=r(22677),g=r(26199),m=r(2906),v=r(74939),y=r(71017);t.nodeTypes={solution:"Solution",solutionFolder:"Solution Folder",file:"File",project:"Project",virtual:"Virtual",folder:"Folder",error:"Error",packageDependency:"PackageDependency"},t.contextValues={solution:"Solution",solutionFolder:"SolutionFolder",project:"Project",folder:"Folder",linkedFile:"LinkedFile",packageDependency:"PackageDependency"},t.SolutionExplorerProvider=class{context;brokeredServiceHost;environmentStateManager;solutionViewService;solutionRoot;_onDidChangeTreeData=new i.EventEmitter;_expandingItems=new Set;_expandedItems=new Map;_expandedProjects=new Set;_projectIcons=new Map;_projects=new Map;decorationProvider;decorationProviderRegistration;refreshCallBack;solutionViewServiceReady;dropMimeTypes;dragMimeTypes;mimeTypeString="application/vnd.code.tree.solutionexplorer";mimeTypeList="text/uri-list";get serviceBroker(){return this.brokeredServiceHost.serviceBroker}imageCatalogPath;projectTreeProvider=(0,d.lazyPromiseLambda)((async()=>{const e=await this.serviceBroker.getProxy(c.default.projectTreeProvider);return e&&(e.on("collectionReset",(e=>this.refresh(Array.isArray(e)?e[0].Id:e.Id))),this.decorationProvider.init(e).catch((e=>a.logger.log(e)))),e}));projectIconProvider=(0,d.lazyPromiseLambda)((async()=>{const e=await this.serviceBroker.getProxy(c.default.projectIconSourceService);if(e){const t=new n.Observer((e=>{if(e&&e.projectIcons)for(let t=0;t<e.projectIcons.length;t++){const r=e.projectIcons[t];if(r?.projectId?.fullPath){this._projectIcons.set(r.projectId.fullPath,r);const e=(0,g.getImageCatalog)();if(e){const t=this._projects.get(r.projectId.fullPath);if(t&&(t.node.IconGuid!==r.iconGuid||t.node.IconId!==r.iconId)){t.node.IconGuid=r.iconGuid,t.node.IconId=r.iconId;const n=this.getIconForNode(e,t.node);n&&(t.iconPath=n,this.abandonPendingTasks(t),this._onDidChangeTreeData.fire(t))}}}}}),(e=>{e&&(a.logger.log("Failed to retrieve project icons.",p.LogImportance.low),a.logger.log(e,p.LogImportance.low))}));e.subscribe(t)}return e}));projectTypeInfos=(0,d.lazyPromiseLambda)((async()=>{const e=new Map;try{const t=await this.serviceBroker.getProxy(c.default.componentExportsService);if(t){const r=t.getExports("projectSystems");if(r)for(let t=0;t<r?.length;t++){let n;try{n=await(0,d.readJsonFile)(y.join(r[t],"package.json"))}catch{continue}const i=n,o=i.provides?.projectSystems;if(o)for(let t=0;t<o.length;t++){const r=o[t];for(let t=0;t<r.extensions.length;t++)e.set(r.extensions[t],r)}}}return e}catch(e){a.logger.log(`Error reading image catalog: ${e}`)}}));getIconForNode(e,r){if(r.NodeType===t.nodeTypes.file&&!r.IsMissing)return o.ThemeIcon.File;if(r.NodeType===t.nodeTypes.folder||r.NodeType===t.nodeTypes.solutionFolder)return o.ThemeIcon.Folder;const n=e.getIcon(r.IconGuid,r.IconId);return n?{light:i.Uri.file(n.light),dark:i.Uri.file(n.dark)}:null}constructor(e,t,r){this.context=e,this.brokeredServiceHost=t,this.environmentStateManager=r,this.solutionViewService=(0,d.lazyPromiseLambda)((()=>this.refreshSolutionViewServiceProxy(null))),this.decorationProvider=new w(this),this.decorationProviderRegistration=i.window.registerFileDecorationProvider(this.decorationProvider),this.dropMimeTypes=[this.mimeTypeString,this.mimeTypeList],this.dragMimeTypes=[this.mimeTypeString,this.mimeTypeList]}dispose(){this.decorationProvider.dispose(),this.decorationProviderRegistration.dispose()}onDidChangeTreeData=this._onDidChangeTreeData.event;prepareOpenSolution(){this.projectTreeProvider.catch((e=>{}))}async expandToActiveItemAsync(e,t,r){let n=this.solutionRoot;const o=this.environmentStateManager?.getOpenedSolutionExt();if(o&&y.extname(e)===o)await a.solutionExplorerTreeView.reveal(n,{select:!0});else if(await c(t,!0))if(n?.node.Path?.toLocaleUpperCase()===e.toLocaleUpperCase())await u(!0);else{const t=await(0,m.getFileVisualPathViaQueryAsync)(n?.node.ProjectGuid,e),r=t?.split("/");if(r&&r.length>1&&!await c(r.slice(0,-1),!1))return;await u(!0)}function s(e,t,r){return t.expandedChildren?.find((t=>r?t.node.ProjectGuid===e:t.label===e))}async function c(e,t){for(const i of e){if(!n||r?.isCancellationRequested)return!1;if(n=s(i,n,t),await u(!1),r?.isCancellationRequested)return!1}return!0}async function u(t){if(n&&!r?.isCancellationRequested)if(t){const t=n?.expandedChildren.find((t=>t.label===y.basename(e)));await a.solutionExplorerTreeView.reveal(t,{select:!0})}else n.collapsibleState===i.TreeItemCollapsibleState.Collapsed&&(await a.solutionExplorerTreeView.reveal(n,{expand:!0}),n.collapsibleState=i.TreeItemCollapsibleState.Expanded)}}async autoExpandSolutionExplorerAsync(){if(a.solutionExplorerTreeView.visible){let e=this.solutionRoot;await a.solutionExplorerTreeView.reveal(e,{select:!0,focus:!0})}}async expandToAddedFile(e,r){if(e.id)if(e.node.NodeType===t.nodeTypes.solutionFolder){let t=0;const n=this.solutionRoot;for(;t<40;){if(n!==this.solutionRoot&&this.solutionRoot.expandedChildren.length>0){if(e=i(e,this)){const t=(await this.getChildren(e)).find((e=>e.label===r));a.solutionExplorerTreeView.reveal(t,{select:!0})}return}await new Promise((e=>setTimeout(e,50))),t++}}else{a.solutionExplorerTreeView.reveal(e,{select:!1,expand:1});let t=0;for(;t<40;){const i=n(e,r);if(i)return void a.solutionExplorerTreeView.reveal(i,{select:!0});await new Promise((e=>setTimeout(e,50))),t++}}function n(e,t){return e.expandedChildren.find((e=>e.label===t))}function i(e,t){return e.parentNode?n(i(e.parentNode,t),e.label):t.solutionRoot}}refresh(e){if(e){let t=this._expandedItems.get(e);void 0!==t&&(this.abandonPendingTasks(t),this._onDidChangeTreeData.fire(t))}else this.abandonPendingTasks(void 0),this._onDidChangeTreeData.fire(void 0)}abandonPendingTasks(e){if(0!==this._expandingItems.size)if(e){const t=[];this._expandingItems.forEach((r=>{let n=r.parent;for(;n;){if(n===e)return t.push(r),void r.abandon();n=n.parentNode}})),t.length>0&&t.forEach((e=>this._expandingItems.delete(e)))}else this._expandingItems.forEach((e=>e.abandon())),this._expandingItems.clear()}getTreeItem(e){return e}getParent(e){return e.parentNode}async handleDrag(e,r,n){let o=e[0];if(void 0===o)return;if(![t.nodeTypes.file,t.nodeTypes.folder].includes(o.node.NodeType))return void await i.window.showWarningMessage(h.errorStrings.notSupportedDraggedItem(o.node.Name));if(!(0,m.getRelativePathWithinProject)(o,o.node.Path))return void await i.window.showWarningMessage(h.errorStrings.notSupportedDraggedItem(o.node.Name));const s=o.node.NodeType===t.nodeTypes.file&&o.node.Flags?.includes(v.TreeFlags.linkedItem);let c=new E(o.node.Path,o.node.ProjectGuid,o.node.Name,s,o.parentNode?.node.Path);r.set(this.mimeTypeString,new i.DataTransferItem(c)),(0,a.sendFirstInteractionWithExplorerTelemetry)()}async handleDrop(e,r,n){const o=r.get(this.mimeTypeString),s=[t.nodeTypes.project,t.nodeTypes.folder];if(!o||!e||!s.includes(e.node.NodeType))return;const a=o.value,c=a.filePath,u=a.name,l=a.isLinkedFile,d=a.parentDirectory;let p;if(l){if(!d)return;p=await(0,m.findSolutionTreeNodeViaPath)(this.solutionRoot,d),p=p?.expandedChildren.find((e=>e.label===u))}else p=await(0,m.findSolutionTreeNodeViaPath)(this.solutionRoot,c);p&&await i.window.showWarningMessage(h.promptStrings.dragDropSolutionNode(p.node.Name,e?.node.Name),{modal:!0},h.promptStrings.yes)&&await async function(e,r){const n=await(0,m.calculateNewLocationPathAsync)(e,r);n&&(r.node.NodeType===t.nodeTypes.file?(await(0,m.addFileViaQuery)(e,r,r.node.Path),r.contextValue!==t.contextValues.linkedFile&&await(0,f.default)(p,!0)):r.node.NodeType===t.nodeTypes.folder&&(await(0,m.addFilesFromFolderViaQuery)(e,r,n),await(0,f.default)(p,!0)))}(e,p)}async getChildren(e){void 0===e||e.node.NodeType===t.nodeTypes.solution?(this._expandedItems.clear(),this._projects.clear()):(this._expandedItems.set(e.id,e),this.clearOldExpandedItems(e));const r=this.getChildrenImpl(e),n=new _(e);this._expandingItems.add(n);try{const e=new Promise((async(e,t)=>{n.promiseResolve=e;try{const t=await r;n.isFinished||(n.isFinished=!0,e(t))}catch(e){n.isFinished||(n.isFinished=!0,t(e))}})),t=await e;return t?(this._expandingItems.delete(n),t):[]}catch(e){throw this._expandingItems.delete(n),e}}async getChildrenImpl(e){const r=this.environmentStateManager.getOpenedSolution();if(!r)return this.solutionViewServiceReady||this.refreshCallBack||(this.refreshCallBack=()=>{this.environmentStateManager.getOpenedSolution()&&this.refresh(void 0)},this.environmentStateManager.on("environmentStateChanged",this.refreshCallBack)),[];const n=await this.solutionViewService,i=await this.projectTypeInfos;await this.projectIconProvider;let o=[],s=e?.sourceTreeProvider??null;if(n)if(void 0===e){const e=await n.getSolutionCaption();if(e){const n=this.environmentStateManager?.isSolutionGeneratedOutsideWorkspace()?this.environmentStateManager.getActiveWorkspaceRoot()?.toString():r;o=[{NodeType:t.nodeTypes.solution,Name:e,Path:n,Id:"<solution>",IsExpandable:!0,IsExpanded:!0,IconGuid:"ae27a6b0-e345-4288-96df-5eaf394ee369",IconId:2855,ProjectGuid:""}]}}else if(e.node.NodeType===t.nodeTypes.solution)o=await a.logger.watch("Expand solution",(async()=>await n.getRootNodes()),{importance:p.LogImportance.low});else if(e.node.NodeType===t.nodeTypes.project&&e.node.ProjectGuid){let t;if(e.isSupportedProject){this._expandedProjects.has(e.node.ProjectGuid)||(this._expandedProjects.add(e.node.ProjectGuid),t=new l.TelemetryActivity("project-expanded",a.telemetryService));try{await a.logger.watch("Expand project",(async()=>{if(s=await this.projectTreeProvider,s){var r=await s.getChildren(e.node);r.error&&r.error.message&&(o=this.createErrorNodes(r.error.message)),r.items&&(o=r.items)}else t=void 0}),{telemetry:t,importance:p.LogImportance.low})}finally{t&&(t.end(),t.sendTelemetry())}(0,a.sendFirstInteractionWithExplorerTelemetry)()}}else s?(o=await a.logger.watch("Expand project node",(async()=>{const t=await(s?.getChildren(e.node));return t?.items??[]}),{importance:p.LogImportance.low}),(0,a.sendFirstInteractionWithExplorerTelemetry)()):(o=await a.logger.watch("Expand solution folder",(async()=>await n.getChildrenNodes(e.node)),{importance:p.LogImportance.low}),(0,a.sendFirstInteractionWithExplorerTelemetry)());const c=await(0,g.getOrCreateImageCatalog)(this.context);var u=o.map((t=>this.createSolutionExplorerItem(t,s,e,c,i)));return e?e.expandedChildren=u:this.solutionRoot=u[0],u}createErrorNodes(e){return[{NodeType:t.nodeTypes.error,Name:e,IsExpandable:!1,IsExpanded:!0,IconGuid:"ae27a6b0-e345-4288-96df-5eaf394ee369",IconId:2935,ProjectGuid:""}]}createSolutionExplorerItem(e,r,n,i,o){let s,a=!1;if(o&&e.NodeType===t.nodeTypes.project&&e.Path){const t=this._projectIcons.get(e.Path);t&&(e.IconGuid=t.iconGuid,e.IconId=t.iconId),s=!1,a=!0;const r=y.extname(e.Path);if(r){const t=o.get(r.toLocaleLowerCase());if(t){if(e.IconId<0){const r=t?.icon;r?(e.IconGuid=r.catalog,e.IconId=r.id):(e.IconGuid="{ae27a6b0-e345-4288-96df-5eaf394ee369}",e.IconId=165)}t.treeProvider&&(s=!0)}}}if(e.NodeType===t.nodeTypes.solution){const t=this.environmentStateManager.getLatestEnvironmentState()?.errors;t&&t.length>0&&(e.Description=h.messageStrings.solutionExplorerNodeInvalid)}if(a)if(s){const t=this.decorationProvider.getProjectExtraState(e.Path);t&&(e.IsMissing??=t.IsMissing,e.Description??=t.Description)}else e.IsExpandable=!1,e.Description=h.messageStrings.projectNotSupported;e.IsMissing&&(e.Description=h.messageStrings.solutionExplorerItemMissing);const c=this.getIconForNode(i,e),u=new S(e,r,s,n,c,this.environmentStateManager.getOpenedSolution());return o&&e.NodeType===t.nodeTypes.project&&e.Path&&this._projects.set(e.Path,u),u}clearOldExpandedItems(e){for(let r=0;r<e.expandedChildren.length;r++){let n=e.expandedChildren[r];this._expandedItems.delete(n.id),n.node.NodeType===t.nodeTypes.project&&n.node.Path&&this._projects.delete(n.node.Path),this.clearOldExpandedItems(n)}e.expandedChildren=[]}async refreshSolutionViewServiceProxy(e,t){if(e)try{const t=await e;t?.dispose()}catch{}const r=await this.serviceBroker.getProxy(c.default.solutionExplorerService);return r&&(this.solutionViewServiceReady=!0,this.refreshCallBack&&(this.environmentStateManager.off("environmentStateChanged",this.refreshCallBack),this.refreshCallBack=void 0),r.on("workspaceRootChanged",(e=>this.refresh(void 0))),this.projectTreeProvider.catch((e=>{}))),e&&this.refresh(void 0),r}};class _{parent;isFinished;promiseResolve;constructor(e){this.parent=e}abandon(){this.isFinished||(a.logger.log(`abandon pending getChildren from ${this.parent?.id??"root"}`),this.isFinished=!0,this.promiseResolve&&this.promiseResolve(void 0))}}class S extends i.TreeItem{node;sourceTreeProvider;isSupportedProject;expandedChildren=[];path;parentNode;constructor(e,r,n,o,a,c){super(e.DisplayName??e.Name,e.IsExpandable?e.IsExpanded?i.TreeItemCollapsibleState.Expanded:i.TreeItemCollapsibleState.Collapsed:i.TreeItemCollapsibleState.None),this.node=e,this.sourceTreeProvider=r,this.isSupportedProject=n,this.parentNode=o,e.Path&&(e.NodeType===t.nodeTypes.solutionFolder&&c?this.resourceUri=i.Uri.file(y.join(y.dirname(c),e.Path)):this.resourceUri=i.Uri.file(e.Path)),a&&(this.iconPath=a),e.Description&&(this.description=e.Description),function(e){return!!e.Path&&e.Path.length>0&&(e.NodeType===t.nodeTypes.file||e.NodeType===t.nodeTypes.project||e.NodeType===t.nodeTypes.solution)&&!e.IsMissing}(e)&&(this.command={command:"vscode.open",arguments:[this.resourceUri],title:u.openDocument}),this.id=e.Id,this.contextValue=e.NodeType,e.NodeType===t.nodeTypes.solutionFolder&&e.Path?(this.path=`${e.Path.replace("/",y.sep)}`,this.contextValue=t.contextValues.solutionFolder):e.NodeType!==t.nodeTypes.project||n||(this.contextValue=void 0),e.NodeType===t.nodeTypes.file&&e.Flags?.includes(v.TreeFlags.linkedItem)&&(this.contextValue=t.contextValues.linkedFile),e.NodeType===t.nodeTypes.virtual&&(this.tooltip=e.Name),e.NodeType===t.nodeTypes.error&&(this.command={command:s.openProjectsLogsView,title:u.promptStrings.openProjectLog})}}class w extends n.Observer{solutionExplorerProvider;_onDidChangeFileDecorations=new i.EventEmitter;projectFileStates=new Map;subscription;constructor(e){super((e=>{if(e.items){for(let t=0;t<e.items.length;t++){const r=e.items[t],n=r.Path;n&&(r.Description?(this.projectFileStates.set(n,r),this._onDidChangeFileDecorations.fire(i.Uri.file(n))):this.projectFileStates.delete(n)&&this._onDidChangeFileDecorations.fire(i.Uri.file(n)))}this.solutionExplorerProvider.refresh()}}),(e=>{e&&(a.logger.log("Failed to monitor project state.",p.LogImportance.low),a.logger.log(e,p.LogImportance.low))})),this.solutionExplorerProvider=e}async init(e){this.subscription=await e.subscribeTreeAttachedNodesState(this)}dispose(){this.subscription?.dispose()}getProjectExtraState(e){return this.projectFileStates.get(e)}onDidChangeFileDecorations=this._onDidChangeFileDecorations.event;provideFileDecoration(e,t){const r=this.projectFileStates.get(e.fsPath);if(r&&r.Description){const e=new i.FileDecoration(void 0,r.Description,new i.ThemeColor("list.errorForeground"));return e.propagate=!0,e}}}class E{filePath;projectGuid;name;isLinkedFile;parentDirectory;constructor(e,t,r,n=!1,i){this.filePath=e,this.projectGuid=t,this.name=r,this.isLinkedFile=n,this.parentDirectory=i}}},2906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findSolutionTreeNodeViaPath=t.autoExpandSolutionExplorerAsync=t.getRelativePathWithinProject=t.addFilesFromFolderViaQuery=t.deleteFileViaQuery=t.addFileViaQuery=t.calculateNewLocationPathAsync=t.getFileVisualPathViaQueryAsync=t.expandToLocation=t.expandToNewNode=t.subscribeToSolutionTreeEvents=t.getSelectedSolutionTreeNodeInExplorer=t.showSolutionExplorer=void 0;const n=r(89496),i=r(89781),o=r(758),s=r(90126),a=r(20695),c=r(7195),u=r(22677),l=r(65300),d=r(92181),p=r(71017),f=r(57147),h="selectedSolutionExplorerNodeType";let g;async function m(e,t,r,i,o){const s=y(e,e.node.Path);if(!s)return;const a=void 0!==i?p.join(s,i):s,l=void 0!==o?!o:t.contextValue!==d.contextValues.linkedFile;let f={update:{target:{context:"Projects",query:{$properties:["Id","Path","Guid"],$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]}}},steps:[{AddFiles:{ItemsPath:[r],TargetFolder:a,ItemType:null,CopyFile:l}}]}};const h=await c.projectQueryableSpace.executeAction(f);h.Errors&&(await n.window.showErrorMessage(u.errorStrings.errorMovingItem(t.node.Name)),h.Errors.forEach((e=>{c.logger.log(e.Message)}))),(h.Items?.[0]?.Files?.length?h.Items?.[0]?.Files?.length:-1)>1&&".xaml"===p.extname(t.node.Path)&&await v(t,r+".cs")}async function v(e,t){let r={update:{target:{context:"Projects",query:{$properties:["Id","Path","Guid"],$filter:{ProjectsByProjectGuid:[[e.node.ProjectGuid]]},$get:{Files:{$properties:["Id","Path"],$where:{"==":[{".":"Path"},t]}}}}},steps:["Delete"]}};const i=await c.projectQueryableSpace.executeAction(r);i.Errors&&(await n.window.showErrorMessage(u.errorStrings.errorMovingItem(e.node.Name)),i.Errors.forEach((e=>{c.logger.log(e.Message)})))}function y(e,t){if(e.node.NodeType===d.nodeTypes.project){const r=p.normalize(p.relative(e.node.Path,t)).split(p.sep).filter((e=>".."!==e));return p.join(...r)}if(e.node.NodeType!==d.nodeTypes.solutionFolder)return y(e.parentNode,t)}t.showSolutionExplorer=function(e){process.nextTick((()=>{(async function(e){let t,r=n.workspace.getConfiguration("dotnet").get("defaultSolution",void 0);if(r||(r=e.workspaceState.get("defaultSolution")),r)t=!0;else{const e=await n.workspace.findFiles("**/*.{csproj}","**/node_modules/**",1);t=e&&e.length>0}t?"true"!==process.env.DisableOpenDefaultSolution?await(0,l.openDefaultSolutionInWorkspace)(e,r).catch((e=>c.logger.log("Failed to open solution "+e))):c.logger.log("Loading solution file is disabled."):c.logger.log("No C# project is found in the workspace."),await n.commands.executeCommand("setContext","solutionExplorerVisible",t),await n.commands.executeCommand("setContext",a.solutionBuildContextVisible,a.SOLUTION_BUILD_AVAILABLE),c.projectInitializationStatus?.show()})(e).catch((e=>c.logger.log("Failed to load solution explorer"+e)))}))},t.getSelectedSolutionTreeNodeInExplorer=async function(){const e=c.solutionExplorerTreeView.selection[0];return e&&e.node&&e!==g&&(await n.commands.executeCommand("setContext",h,e.contextValue),g=e),g},t.subscribeToSolutionTreeEvents=function(){c.solutionExplorerTreeView.onDidChangeSelection((async e=>{if(e.selection.length>0&&e.selection[0]instanceof n.TreeItem){const t=e.selection[0];if(t.node)return await n.commands.executeCommand("setContext",h,t.contextValue),void(g=t)}g=void 0}))},t.expandToNewNode=async function(e,t){c.logger.watch("Expand solution node",(async()=>{c.solutionExplorerProvider&&await c.solutionExplorerProvider.expandToAddedFile(e,t)}),{importance:i.LogImportance.low,catchUnhandledErrors:!0})},t.expandToLocation=async function(e,t,r){c.logger.watch("Expand to active item",(async()=>{c.solutionExplorerProvider&&!r?.isCancellationRequested&&await c.solutionExplorerProvider.expandToActiveItemAsync(e,t,r)}),{importance:i.LogImportance.low,catchUnhandledErrors:!0})},t.getFileVisualPathViaQueryAsync=async function(e,t){const r={context:"Projects",query:{$properties:["Id","Files"],Files:{$properties:["Id","VisualPath"],$filter:{FilesByPath:[[t]]}},$filter:{ProjectsByProjectGuid:[[e]]}}},n=await c.projectQueryableSpace.executeQuery(r);if(!n)return;let i=n.Items?.[0];const o=i.Files?.[0]?.VisualPath;return o},t.calculateNewLocationPathAsync=async function(e,t){let r;if(r=e.node.NodeType===d.nodeTypes.project?p.join(p.dirname(e.node.Path),t.node.Name):p.join(e.node.Path,t.node.Name),f.existsSync(r)){if(!await n.window.showWarningMessage(u.promptStrings.overwriteExistingItem(t.node.Name),{modal:!0},u.promptStrings.yes)||t.node.Path===r)return;const i=e.expandedChildren.find((e=>e.node.Name===t.node.Name));await(0,o.default)(i,!0)}return t.node.NodeType===d.nodeTypes.folder?p.dirname(r):r},t.addFileViaQuery=m,t.deleteFileViaQuery=v,t.addFilesFromFolderViaQuery=async function(e,t,r){let n;n={context:"Projects",query:{$properties:["Id","Folders"],Folders:{$properties:["Id","RelativePath","Files"],Files:{$properties:["Id","FileName","Path","LinkPath"]}},$filter:{ProjectsByProjectGuid:[[t.node.ProjectGuid]]}}};const i=await c.projectQueryableSpace.executeQuery(n);if(!i)return;const o=i.Items[0].Folders;if(!o)return;const a=p.normalize(y(t,t.node.Path));for(const n of o){const i=p.normalize(n.RelativePath);if(i.startsWith(a)){const o=i.split(p.sep),a=o.indexOf(t.node.Name);let c=p.join(...o.slice(a)),u=p.join(r,c);f.existsSync(u)||await(0,s.newFolderActionAsync)(e,u,"");const l=n.Files;if(!l)continue;for(const r of l){const n=r.LinkPath.length>0;await m(e,t,r.Path,c,n)}}}},t.getRelativePathWithinProject=y,t.autoExpandSolutionExplorerAsync=async function(){c.solutionExplorerProvider&&await c.solutionExplorerProvider.autoExpandSolutionExplorerAsync()},t.findSolutionTreeNodeViaPath=async function e(t,r){if(t.node.Path){if((0,u.equalsInvariantIgnoreCase)(t.node.Path,r))return t;for(const n of t.expandedChildren){const t=await e(n,r);if(t)return t}}}},74939:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeFlags=void 0,t.TreeFlags={linkedItem:"LinkedItem"}},40800:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.localize=t.format=t.setPseudo=t.isPseudo=t.isDefined=t.BundleFormat=t.MessageFormat=void 0;var n,i,o,s=r(71926);function a(e){return void 0!==e}function c(e,r){return t.isPseudo&&(e=""+e.replace(/[aouei]/g,"$&$&")+""),0===r.length?e:e.replace(/\{(\d+)\}/g,(function(e,t){var n=t[0],i=r[n],o=e;return"string"==typeof i?o=i:"number"!=typeof i&&"boolean"!=typeof i&&null!=i||(o=String(i)),o}))}(o=t.MessageFormat||(t.MessageFormat={})).file="file",o.bundle="bundle",o.both="both",(i=t.BundleFormat||(t.BundleFormat={})).standalone="standalone",i.languagePack="languagePack",function(e){e.is=function(e){var t=e;return t&&a(t.key)&&a(t.comment)}}(n||(n={})),t.isDefined=a,t.isPseudo=!1,t.setPseudo=function(e){t.isPseudo=e},t.format=c,t.localize=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return c(t,r)},t.loadMessageBundle=function(e){return(0,s.default)().loadMessageBundle(e)},t.config=function(e){return(0,s.default)().config(e)}},71926:(e,t)=>{"use strict";var r;function n(){if(void 0===r)throw new Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");r=e}}(n||(n={})),t.default=n},18472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.BundleFormat=t.MessageFormat=void 0;var n=r(71017),i=r(57147),o=r(71926),s=r(40800),a=r(40800);Object.defineProperty(t,"MessageFormat",{enumerable:!0,get:function(){return a.MessageFormat}}),Object.defineProperty(t,"BundleFormat",{enumerable:!0,get:function(){return a.BundleFormat}});var c,u,l=Object.prototype.toString;function d(e){return"[object String]"===l.call(e)}function p(e){return JSON.parse(i.readFileSync(e,"utf8"))}function f(e){return function(t,r){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return n=t,"[object Number]"===l.call(n)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: ".concat(new Error("").stack)):(0,s.format)(e[t],i):d(r)?(console.warn("Message ".concat(r," didn't get externalized correctly.")),(0,s.format)(r,i)):void console.error("Broken localize call found. Stacktrace is\n: ".concat(new Error("").stack))}}function h(e,t){return c[e]=t,t}function g(e){try{return function(e){var t=p(n.join(e,"nls.metadata.json")),r=Object.create(null);for(var i in t){var o=t[i];r[i]=o.messages}return r}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function m(e,t){var r;if(!0===u.languagePackSupport&&void 0!==u.cacheRoot&&void 0!==u.languagePackId&&void 0!==u.translationsConfigFile&&void 0!==u.translationsConfig)try{r=function(e,t){var r,o,s,a=n.join(u.cacheRoot,"".concat(e.id,"-").concat(e.hash,".json")),c=!1,l=!1;try{return r=JSON.parse(i.readFileSync(a,{encoding:"utf8",flag:"r"})),o=a,s=new Date,i.utimes(o,s,s,(function(){})),r}catch(e){if("ENOENT"===e.code)l=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: ".concat(e.message,".")),i.unlink(a,(function(e){e&&console.error("Deleting corrupted bundle ".concat(a," failed."))})),c=!0}}if(r=function(e,t){var r=u.translationsConfig[e.id];if(r){var i=p(r).contents,o=p(n.join(t,"nls.metadata.json")),s=Object.create(null);for(var a in o){var c=o[a],l=i["".concat(e.outDir,"/").concat(a)];if(l){for(var f=[],h=0;h<c.keys.length;h++){var g=c.keys[h],m=l[d(g)?g:g.key];void 0===m&&(m=c.messages[h]),f.push(m)}s[a]=f}else s[a]=c.messages}return s}}(e,t),!r||c)return r;if(l)try{i.writeFileSync(a,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return r;throw e}return r}(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!r){if(u.languagePackSupport)return g(t);var o=function(e){for(var t=u.language;t;){var r=n.join(e,"nls.bundle.".concat(t,".json"));if(i.existsSync(r))return r;var o=t.lastIndexOf("-");t=o>0?t.substring(0,o):void 0}if(void 0===t&&(r=n.join(e,"nls.bundle.json"),i.existsSync(r)))return r}(t);if(o)try{return p(o)}catch(e){console.log("Loading in the box message bundle failed.",e)}r=g(t)}return r}function v(e){if(!e)return s.localize;var t=n.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),u.messageFormat===s.MessageFormat.both||u.messageFormat===s.MessageFormat.bundle){var r=function(e){for(var t,r=n.dirname(e);t=n.join(r,"nls.metadata.header.json"),!i.existsSync(t);){var o=n.dirname(r);if(o===r){t=void 0;break}r=o}return t}(e);if(r){var o=n.dirname(r),a=c[o];if(void 0===a)try{var l=JSON.parse(i.readFileSync(r,"utf8"));try{var d=m(l,o);a=h(o,d?{header:l,nlsBundle:d}:null)}catch(e){console.error("Failed to load nls bundle",e),a=h(o,null)}}catch(e){console.error("Failed to read header file",e),a=h(o,null)}if(a){var g=e.substr(o.length+1).replace(/\\/g,"/"),v=a.nlsBundle[g];return void 0===v?(console.error("Messages for file ".concat(e," not found. See console for details.")),function(){return"Messages not found."}):f(v)}}}if(u.messageFormat===s.MessageFormat.both||u.messageFormat===s.MessageFormat.file)try{var y=p(function(e){var t;if(u.cacheLanguageResolution&&t);else{if(s.isPseudo||!u.language)t=".nls.json";else for(var r=u.language;r;){var n=".nls."+r+".json";if(i.existsSync(e+n)){t=n;break}var o=r.lastIndexOf("-");o>0?r=r.substring(0,o):(t=".nls.json",r=null)}u.cacheLanguageResolution}return e+t}(e));return Array.isArray(y)?f(y):(0,s.isDefined)(y.messages)&&(0,s.isDefined)(y.keys)?f(y.messages):(console.error("String bundle '".concat(e,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file ".concat(e)),function(){return"Failed to load message bundle. See console for details."}}function y(e){return e&&(d(e.locale)&&(u.locale=e.locale.toLowerCase(),u.language=u.locale,c=Object.create(null)),void 0!==e.messageFormat&&(u.messageFormat=e.messageFormat),e.bundleFormat===s.BundleFormat.standalone&&!0===u.languagePackSupport&&(u.languagePackSupport=!1)),(0,s.setPseudo)("pseudo"===u.locale),v}!function(){if(u={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:s.MessageFormat.bundle},d(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var r=e.availableLanguages["*"];d(r)&&(t=r)}if(d(e.locale)&&(u.locale=e.locale.toLowerCase()),void 0===t?u.language=u.locale:"en"!==t&&(u.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(u.languagePackSupport=e._languagePackSupport),d(e._cacheRoot)&&(u.cacheRoot=e._cacheRoot),d(e._languagePackId)&&(u.languagePackId=e._languagePackId),d(e._translationsConfigFile)){u.translationsConfigFile=e._translationsConfigFile;try{u.translationsConfig=p(u.translationsConfigFile)}catch(t){if(e._corruptedFile){var o=n.dirname(e._corruptedFile);i.exists(o,(function(t){t&&i.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}(0,s.setPseudo)("pseudo"===u.locale),c=Object.create(null)}(),t.loadMessageBundle=v,t.config=y,o.default.install(Object.freeze({loadMessageBundle:v,config:y}))},59035:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetPopulation=t.getExperimentationServiceAsync=t.getExperimentationService=void 0;var n=r(15654);Object.defineProperty(t,"getExperimentationService",{enumerable:!0,get:function(){return n.getExperimentationService}}),Object.defineProperty(t,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return n.getExperimentationServiceAsync}});var i=r(22560);Object.defineProperty(t,"TargetPopulation",{enumerable:!0,get:function(){return i.TargetPopulation}})},55708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MementoKeyValueStorage=void 0,t.MementoKeyValueStorage=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,t){return await this.mementoGlobalStorage.get(e)||t}setValue(e,t){this.mementoGlobalStorage.update(e,t)}}},4619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,t){}getTreatmentVariableAsync(e,t){return Promise.resolve(void 0)}}},22560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetPopulation=t.Filters=t.VSCodeFilterProvider=void 0;const n=r(89496);class i{constructor(e,t,r){this.extensionName=e,this.extensionVersion=t,this.targetPopulation=r}static trimVersionSuffix(e){return e.split(/\-[a-zA-Z0-9]+$/)[0]}getFilterValue(e){switch(e){case o.ApplicationVersion:return i.trimVersionSuffix(n.version);case o.Build:return n.env.appName;case o.ClientId:return n.env.machineId;case o.ExtensionName:return this.extensionName;case o.ExtensionVersion:return i.trimVersionSuffix(this.extensionVersion);case o.Language:return n.env.language;case o.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(o);for(let r of t)e.set(r,this.getFilterValue(r));return e}}var o,s;t.VSCodeFilterProvider=i,function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"}(o||(t.Filters=o={})),function(e){e.Team="team",e.Internal="internal",e.Insiders="insider",e.Public="public"}(s||(t.TargetPopulation=s={}))},15654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExperimentationServiceAsync=t.getExperimentationService=void 0;const n=r(22560),i=r(14802),o=r(89496),s=r(55708),a=r(4619);function c(e,t,r,c,u,...l){if(!u)throw new Error("Memento storage was not provided.");const d=o.workspace.getConfiguration("telemetry");if(!(void 0===o.env.isTelemetryEnabled?d.get("enableTelemetry",!0):o.env.isTelemetryEnabled))return new a.default;const p=[new n.VSCodeFilterProvider(e,t,r),...l],f=new s.MementoKeyValueStorage(u);return new i.ExperimentationService({filterProviders:p,telemetry:c,storageKey:"VSCode.ABExp.FeatureData",keyValueStorage:f,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext",telemetryEventName:"query-expfeature",endpoint:"https://default.exp-tas.com/vscode/ab",refetchInterval:18e5})}t.getExperimentationService=c,t.getExperimentationServiceAsync=async function(e,t,r,n,i,...o){const s=c(e,t,r,n,i,...o);return await s.initializePromise,s}},49602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},34411:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function o(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)r.push(o.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;null!==o&&n<e;n++)o=o.next;var s=[];for(n=0;o&&n<t;n++)s.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),n=0;n<r.length;n++)o=i(this,o,r[n]);return s},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(49602)(n)}catch(e){}},89166:e=>{"use strict";e.exports=require("applicationinsights-native-metrics")},89496:e=>{"use strict";e.exports=require("vscode")},56232:e=>{"use strict";e.exports=require("@microsoft/typescript-etw")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},32081:e=>{"use strict";e.exports=require("child_process")},96206:e=>{"use strict";e.exports=require("console")},22057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},13639:e=>{"use strict";e.exports=require("domain")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},98188:e=>{"use strict";e.exports=require("module")},41808:e=>{"use strict";e.exports=require("net")},49411:e=>{"use strict";e.exports=require("node:path")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},12781:e=>{"use strict";e.exports=require("stream")},39512:e=>{"use strict";e.exports=require("timers")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},26864:module=>{(()=>{"use strict";var __webpack_modules__={"./node_modules/strnum/strnum.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ toNumber)\n/* harmony export */ });\nconst hexRegex = /^[-+]?0x[a-fA-F0-9]+$/;\nconst numRegex = /^([\\-\\+])?(0*)([0-9]*(\\.[0-9]*)?)$/;\n// const octRegex = /^0x[a-z0-9]+/;\n// const binRegex = /0x[a-z0-9]+/;\n\n \nconst consider = {\n    hex :  true,\n    // oct: false,\n    leadingZeros: true,\n    decimalPoint: "\\.",\n    eNotation: true,\n    //skipLike: /regex/\n};\n\nfunction toNumber(str, options = {}){\n    options = Object.assign({}, consider, options );\n    if(!str || typeof str !== "string" ) return str;\n    \n    let trimmedStr  = str.trim();\n    \n    if(options.skipLike !== undefined && options.skipLike.test(trimmedStr)) return str;\n    else if(str==="0") return 0;\n    else if (options.hex && hexRegex.test(trimmedStr)) {\n        return parse_int(trimmedStr, 16);\n    // }else if (options.oct && octRegex.test(str)) {\n    //     return Number.parseInt(val, 8);\n    }else if (trimmedStr.search(/[eE]/)!== -1) { //eNotation\n        const notation = trimmedStr.match(/^([-\\+])?(0*)([0-9]*(\\.[0-9]*)?[eE][-\\+]?[0-9]+)$/); \n        // +00.123 => [ , \'+\', \'00\', \'.123\', ..\n        if(notation){\n            // console.log(notation)\n            if(options.leadingZeros){ //accept with leading zeros\n                trimmedStr = (notation[1] || "") + notation[3];\n            }else{\n                if(notation[2] === "0" && notation[3][0]=== "."){ //valid number\n                }else{\n                    return str;\n                }\n            }\n            return options.eNotation ? Number(trimmedStr) : str;\n        }else{\n            return str;\n        }\n    // }else if (options.parseBin && binRegex.test(str)) {\n    //     return Number.parseInt(val, 2);\n    }else{\n        //separate negative sign, leading zeros, and rest number\n        const match = numRegex.exec(trimmedStr);\n        // +00.123 => [ , \'+\', \'00\', \'.123\', ..\n        if(match){\n            const sign = match[1];\n            const leadingZeros = match[2];\n            let numTrimmedByZeros = trimZeros(match[3]); //complete num without leading zeros\n            //trim ending zeros for floating number\n            \n            if(!options.leadingZeros && leadingZeros.length > 0 && sign && trimmedStr[2] !== ".") return str; //-0123\n            else if(!options.leadingZeros && leadingZeros.length > 0 && !sign && trimmedStr[1] !== ".") return str; //0123\n            else if(options.leadingZeros && leadingZeros===str) return 0; //00\n            \n            else{//no leading zeros or leading zeros are allowed\n                const num = Number(trimmedStr);\n                const numStr = "" + num;\n\n                if(numStr.search(/[eE]/) !== -1){ //given number is long and parsed to eNotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(trimmedStr.indexOf(".") !== -1){ //floating number\n                    if(numStr === "0" && (numTrimmedByZeros === "") ) return num; //0.0\n                    else if(numStr === numTrimmedByZeros) return num; //0.456. 0.79000\n                    else if( sign && numStr === "-"+numTrimmedByZeros) return num;\n                    else return str;\n                }\n                \n                if(leadingZeros){\n                    return (numTrimmedByZeros === numStr) || (sign+numTrimmedByZeros === numStr) ? num : str\n                }else  {\n                    return (trimmedStr === numStr) || (trimmedStr === sign+numStr) ? num : str\n                }\n            }\n        }else{ //non-numeric string\n            return str;\n        }\n    }\n}\n\n/**\n * \n * @param {string} numStr without leading zeros\n * @returns \n */\nfunction trimZeros(numStr){\n    if(numStr && numStr.indexOf(".") !== -1){//float\n        numStr = numStr.replace(/0+$/, ""); //remove ending zeros\n        if(numStr === ".")  numStr = "0";\n        else if(numStr[0] === ".")  numStr = "0"+numStr;\n        else if(numStr[numStr.length-1] === ".")  numStr = numStr.substr(0,numStr.length-1);\n        return numStr;\n    }\n    return numStr;\n}\n\nfunction parse_int(numStr, base){\n    //polyfill\n    if(parseInt) return parseInt(numStr, base);\n    else if(Number.parseInt) return Number.parseInt(numStr, base);\n    else if(window && window.parseInt) return window.parseInt(numStr, base);\n    else throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")\n}\n\n//# sourceURL=webpack://fast-xml-parser/./node_modules/strnum/strnum.js?')},"./src/fxp.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLBuilder: () => (/* reexport safe */ _xmlbuilder_json2xml_js__WEBPACK_IMPORTED_MODULE_2__["default"]),\n/* harmony export */   XMLParser: () => (/* reexport safe */ _xmlparser_XMLParser_js__WEBPACK_IMPORTED_MODULE_1__["default"]),\n/* harmony export */   XMLValidator: () => (/* binding */ XMLValidator)\n/* harmony export */ });\n/* harmony import */ var _validator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validator.js */ "./src/validator.js");\n/* harmony import */ var _xmlparser_XMLParser_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./xmlparser/XMLParser.js */ "./src/xmlparser/XMLParser.js");\n/* harmony import */ var _xmlbuilder_json2xml_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./xmlbuilder/json2xml.js */ "./src/xmlbuilder/json2xml.js");\n\n\n\n\n\n\nconst XMLValidator = {\n  validate: _validator_js__WEBPACK_IMPORTED_MODULE_0__.validate\n}\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/fxp.js?')},"./src/ignoreAttributes.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ getIgnoreAttributesFn)\n/* harmony export */ });\nfunction getIgnoreAttributesFn(ignoreAttributes) {\n    if (typeof ignoreAttributes === 'function') {\n        return ignoreAttributes\n    }\n    if (Array.isArray(ignoreAttributes)) {\n        return (attrName) => {\n            for (const pattern of ignoreAttributes) {\n                if (typeof pattern === 'string' && attrName === pattern) {\n                    return true\n                }\n                if (pattern instanceof RegExp && pattern.test(attrName)) {\n                    return true\n                }\n            }\n        }\n    }\n    return () => false\n}\n\n//# sourceURL=webpack://fast-xml-parser/./src/ignoreAttributes.js?")},"./src/util.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllMatches: () => (/* binding */ getAllMatches),\n/* harmony export */   getValue: () => (/* binding */ getValue),\n/* harmony export */   isEmptyObject: () => (/* binding */ isEmptyObject),\n/* harmony export */   isExist: () => (/* binding */ isExist),\n/* harmony export */   isName: () => (/* binding */ isName),\n/* harmony export */   merge: () => (/* binding */ merge),\n/* harmony export */   nameRegexp: () => (/* binding */ nameRegexp)\n/* harmony export */ });\n\n\nconst nameStartChar = ':A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nconst nameChar = nameStartChar + '\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\nconst nameRegexp = '[' + nameStartChar + '][' + nameChar + ']*';\nconst regexName = new RegExp('^' + nameRegexp + '$');\n\nfunction getAllMatches(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    allmatches.startIndex = regex.lastIndex - match[0].length;\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n}\n\nconst isName = function(string) {\n  const match = regexName.exec(string);\n  return !(match === null || typeof match === 'undefined');\n}\n\nfunction isExist(v) {\n  return typeof v !== 'undefined';\n}\n\nfunction isEmptyObject(obj) {\n  return Object.keys(obj).length === 0;\n}\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nfunction merge(target, a, arrayMode) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      if (arrayMode === 'strict') {\n        target[keys[i]] = [ a[keys[i]] ];\n      } else {\n        target[keys[i]] = a[keys[i]];\n      }\n    }\n  }\n}\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nfunction getValue(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n}\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\n//# sourceURL=webpack://fast-xml-parser/./src/util.js?")},"./src/validator.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validate: () => (/* binding */ validate)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ \"./src/util.js\");\n\n\n\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  unpairedTags: []\n};\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nfunction validate(xmlData, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n  const tags = [];\n  let tagFound = false;\n\n  //indicates that the root tag has been closed (aka. depth 0 has been reached)\n  let reachedRoot = false;\n\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  \n  for (let i = 0; i < xmlData.length; i++) {\n\n    if (xmlData[i] === '<' && xmlData[i+1] === '?') {\n      i+=2;\n      i = readPI(xmlData,i);\n      if (i.err) return i;\n    }else if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n      let tagStartPos = i;\n      i++;\n      \n      if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (; i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r'; i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          //continue;\n          i--;\n        }\n        if (!validateTagName(tagName)) {\n          let msg;\n          if (tagName.trim().length === 0) {\n            msg = \"Invalid space after '<'.\";\n          } else {\n            msg = \"Tag '\"+tagName+\"' is an invalid name.\";\n          }\n          return getErrorObject('InvalidTag', msg, getLineNumberForPosition(xmlData, i));\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return getErrorObject('InvalidAttr', \"Attributes for '\"+tagName+\"' have open quote.\", getLineNumberForPosition(xmlData, i));\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          const attrStrStart = i - attrStr.length;\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, attrStrStart + isValid.err.line));\n          }\n        } else if (closingTag) {\n          if (!result.tagClosed) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' doesn't have proper closing.\", getLineNumberForPosition(xmlData, i));\n          } else if (attrStr.trim().length > 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' can't have attributes or invalid starting.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else if (tags.length === 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' has not been opened.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg.tagName) {\n              let openPos = getLineNumberForPosition(xmlData, otg.tagStartPos);\n              return getErrorObject('InvalidTag',\n                \"Expected closing tag '\"+otg.tagName+\"' (opened in line \"+openPos.line+\", col \"+openPos.col+\") instead of closing tag '\"+tagName+\"'.\",\n                getLineNumberForPosition(xmlData, tagStartPos));\n            }\n\n            //when there are no more tags, we reached the root level.\n            if (tags.length == 0) {\n              reachedRoot = true;\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid !== true) {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, i - attrStr.length + isValid.err.line));\n          }\n\n          //if the root level has been reached before ...\n          if (reachedRoot === true) {\n            return getErrorObject('InvalidXml', 'Multiple possible root nodes found.', getLineNumberForPosition(xmlData, i));\n          } else if(options.unpairedTags.indexOf(tagName) !== -1){\n            //don't push into stack\n          } else {\n            tags.push({tagName, tagStartPos});\n          }\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else if (xmlData[i+1] === '?') {\n              i = readPI(xmlData, ++i);\n              if (i.err) return i;\n            } else{\n              break;\n            }\n          } else if (xmlData[i] === '&') {\n            const afterAmp = validateAmpersand(xmlData, i);\n            if (afterAmp == -1)\n              return getErrorObject('InvalidChar', \"char '&' is not expected.\", getLineNumberForPosition(xmlData, i));\n            i = afterAmp;\n          }else{\n            if (reachedRoot === true && !isWhiteSpace(xmlData[i])) {\n              return getErrorObject('InvalidXml', \"Extra text at the end\", getLineNumberForPosition(xmlData, i));\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if ( isWhiteSpace(xmlData[i])) {\n        continue;\n      }\n      return getErrorObject('InvalidChar', \"char '\"+xmlData[i]+\"' is not expected.\", getLineNumberForPosition(xmlData, i));\n    }\n  }\n\n  if (!tagFound) {\n    return getErrorObject('InvalidXml', 'Start tag expected.', 1);\n  }else if (tags.length == 1) {\n      return getErrorObject('InvalidTag', \"Unclosed tag '\"+tags[0].tagName+\"'.\", getLineNumberForPosition(xmlData, tags[0].tagStartPos));\n  }else if (tags.length > 0) {\n      return getErrorObject('InvalidXml', \"Invalid '\"+\n          JSON.stringify(tags.map(t => t.tagName), null, 4).replace(/\\r?\\n/g, '')+\n          \"' found.\", {line: 1, col: 1});\n  }\n\n  return true;\n};\n\nfunction isWhiteSpace(char){\n  return char === ' ' || char === '\\t' || char === '\\n'  || char === '\\r';\n}\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  const start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      const tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return getErrorObject('InvalidXml', 'XML declaration allowed only at the start of the document.', getLineNumberForPosition(xmlData, i));\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nconst doubleQuote = '\"';\nconst singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  let tagClosed = false;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        tagClosed = true;\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {\n    value: attrStr,\n    index: i,\n    tagClosed: tagClosed\n  };\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.getAllMatches)(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' has no space in starting.\", getPositionFromMatch(matches[i]))\n    } else if (matches[i][3] !== undefined && matches[i][4] === undefined) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' is without value.\", getPositionFromMatch(matches[i]));\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return getErrorObject('InvalidAttr', \"boolean attribute '\"+matches[i][2]+\"' is not allowed.\", getPositionFromMatch(matches[i]));\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName)) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is an invalid name.\", getPositionFromMatch(matches[i]));\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is repeated.\", getPositionFromMatch(matches[i]));\n    }\n  }\n\n  return true;\n}\n\nfunction validateNumberAmpersand(xmlData, i) {\n  let re = /\\d/;\n  if (xmlData[i] === 'x') {\n    i++;\n    re = /[\\da-fA-F]/;\n  }\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === ';')\n      return i;\n    if (!xmlData[i].match(re))\n      break;\n  }\n  return -1;\n}\n\nfunction validateAmpersand(xmlData, i) {\n  // https://www.w3.org/TR/xml/#dt-charref\n  i++;\n  if (xmlData[i] === ';')\n    return -1;\n  if (xmlData[i] === '#') {\n    i++;\n    return validateNumberAmpersand(xmlData, i);\n  }\n  let count = 0;\n  for (; i < xmlData.length; i++, count++) {\n    if (xmlData[i].match(/\\w/) && count < 20)\n      continue;\n    if (xmlData[i] === ';')\n      break;\n    return -1;\n  }\n  return i;\n}\n\nfunction getErrorObject(code, message, lineNumber) {\n  return {\n    err: {\n      code: code,\n      msg: message,\n      line: lineNumber.line || lineNumber,\n      col: lineNumber.col,\n    },\n  };\n}\n\nfunction validateAttrName(attrName) {\n  return (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.isName)(attrName);\n}\n\n// const startsWithXML = /^xml/i;\n\nfunction validateTagName(tagname) {\n  return (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.isName)(tagname) /* && !tagname.match(startsWithXML) */;\n}\n\n//this function returns the line number for the character at the given index\nfunction getLineNumberForPosition(xmlData, index) {\n  const lines = xmlData.substring(0, index).split(/\\r?\\n/);\n  return {\n    line: lines.length,\n\n    // column number is last line's length + 1, because column numbering starts at 1:\n    col: lines[lines.length - 1].length + 1\n  };\n}\n\n//this function returns the position of the first character of match within attrStr\nfunction getPositionFromMatch(match) {\n  return match.startIndex + match[1].length;\n}\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/validator.js?")},"./src/xmlbuilder/json2xml.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Builder)\n/* harmony export */ });\n/* harmony import */ var _orderedJs2Xml_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./orderedJs2Xml.js */ \"./src/xmlbuilder/orderedJs2Xml.js\");\n/* harmony import */ var _ignoreAttributes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ignoreAttributes.js */ \"./src/ignoreAttributes.js\");\n\n//parse Empty Node as self closing node\n\n\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: [],\n  // transformTagName: false,\n  // transformAttributeName: false,\n  oneListGroup: false\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes === true || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.ignoreAttributesFn = (0,_ignoreAttributes_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.ignoreAttributes)\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return (0,_orderedJs2Xml_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0, []).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level, ajPath) {\n  let attrStr = '';\n  let val = '';\n  const jPath = ajPath.join('.')\n  for (let key in jObj) {\n    if(!Object.prototype.hasOwnProperty.call(jObj, key)) continue;\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node only if it is not an attribute\n      if (this.isAttribute(key)) {\n        val += '';\n      }\n    } else if (jObj[key] === null) {\n      // null attribute should be ignored by the attribute list, but should not cause the tag closing\n      if (this.isAttribute(key)) {\n        val += '';\n      } else if (key === this.options.cdataPropName) {\n        val += '';\n      } else if (key[0] === '?') {\n        val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      } else {\n        val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      }\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr && !this.ignoreAttributesFn(attr, jPath)) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      } else if (!attr) {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      let listTagVal = \"\";\n      let listTagAttr = \"\";\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          if(this.options.oneListGroup){\n            const result = this.j2x(item, level + 1, ajPath.concat(key));\n            listTagVal += result.val;\n            if (this.options.attributesGroupName && item.hasOwnProperty(this.options.attributesGroupName)) {\n              listTagAttr += result.attrStr\n            }\n          }else{\n            listTagVal += this.processTextOrObjNode(item, key, level, ajPath)\n          }\n        } else {\n          if (this.options.oneListGroup) {\n            let textValue = this.options.tagValueProcessor(key, item);\n            textValue = this.replaceEntitiesValue(textValue);\n            listTagVal += textValue;\n          } else {\n            listTagVal += this.buildTextValNode(item, key, '', level);\n          }\n        }\n      }\n      if(this.options.oneListGroup){\n        listTagVal = this.buildObjectNode(listTagVal, key, listTagAttr, level);\n      }\n      val += listTagVal;\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level, ajPath)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nBuilder.prototype.buildAttrPairStr = function(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level, ajPath) {\n  const result = this.j2x(object, level + 1, ajPath.concat(key));\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\n\nBuilder.prototype.buildObjectNode = function(val, key, attrStr, level) {\n  if(val === \"\"){\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  }else{\n\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    \n    if(key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n  \n    // attrStr is an empty string in case the attribute came as undefined or null\n    if ((attrStr || attrStr === '') && val.indexOf('<') === -1) {\n      return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `\x3c!--${val}--\x3e` + this.newLine;\n    }else {\n      return (\n        this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n        val +\n        this.indentate(level) + tagEndExp    );\n    }\n  }\n}\n\nBuilder.prototype.closeTag = function(key){\n  let closeTag = \"\";\n  if(this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(!this.options.suppressUnpairedNode) closeTag = \"/\"\n  }else if(this.options.suppressEmptyNode){ //empty\n    closeTag = \"/\";\n  }else{\n    closeTag = `></${key}`\n  }\n  return closeTag;\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `\x3c!--${val}--\x3e` +  this.newLine;\n  }else if(key[0] === \"?\") {//PI tag\n    return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; \n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === ''){\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar;\n    }\n  }\n}\n\nBuilder.prototype.replaceEntitiesValue = function(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix) && name !== this.options.textNodeName) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/xmlbuilder/json2xml.js?")},"./src/xmlbuilder/orderedJs2Xml.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ toXml)\n/* harmony export */ });\nconst EOL = "\\n";\n\n/**\n * \n * @param {array} jArray \n * @param {any} options \n * @returns \n */\nfunction toXml(jArray, options) {\n    let indentation = "";\n    if (options.format && options.indentBy.length > 0) {\n        indentation = EOL;\n    }\n    return arrToStr(jArray, options, "", indentation);\n}\n\nfunction arrToStr(arr, options, jPath, indentation) {\n    let xmlStr = "";\n    let isPreviousElementTag = false;\n\n    for (let i = 0; i < arr.length; i++) {\n        const tagObj = arr[i];\n        const tagName = propName(tagObj);\n        if(tagName === undefined) continue;\n\n        let newJPath = "";\n        if (jPath.length === 0) newJPath = tagName\n        else newJPath = `${jPath}.${tagName}`;\n\n        if (tagName === options.textNodeName) {\n            let tagText = tagObj[tagName];\n            if (!isStopNode(newJPath, options)) {\n                tagText = options.tagValueProcessor(tagName, tagText);\n                tagText = replaceEntitiesValue(tagText, options);\n            }\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += tagText;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.cdataPropName) {\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += `<![CDATA[${tagObj[tagName][0][options.textNodeName]}]]>`;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.commentPropName) {\n            xmlStr += indentation + `\x3c!--${tagObj[tagName][0][options.textNodeName]}--\x3e`;\n            isPreviousElementTag = true;\n            continue;\n        } else if (tagName[0] === "?") {\n            const attStr = attr_to_str(tagObj[":@"], options);\n            const tempInd = tagName === "?xml" ? "" : indentation;\n            let piTextNodeName = tagObj[tagName][0][options.textNodeName];\n            piTextNodeName = piTextNodeName.length !== 0 ? " " + piTextNodeName : ""; //remove extra spacing\n            xmlStr += tempInd + `<${tagName}${piTextNodeName}${attStr}?>`;\n            isPreviousElementTag = true;\n            continue;\n        }\n        let newIdentation = indentation;\n        if (newIdentation !== "") {\n            newIdentation += options.indentBy;\n        }\n        const attStr = attr_to_str(tagObj[":@"], options);\n        const tagStart = indentation + `<${tagName}${attStr}`;\n        const tagValue = arrToStr(tagObj[tagName], options, newJPath, newIdentation);\n        if (options.unpairedTags.indexOf(tagName) !== -1) {\n            if (options.suppressUnpairedNode) xmlStr += tagStart + ">";\n            else xmlStr += tagStart + "/>";\n        } else if ((!tagValue || tagValue.length === 0) && options.suppressEmptyNode) {\n            xmlStr += tagStart + "/>";\n        } else if (tagValue && tagValue.endsWith(">")) {\n            xmlStr += tagStart + `>${tagValue}${indentation}</${tagName}>`;\n        } else {\n            xmlStr += tagStart + ">";\n            if (tagValue && indentation !== "" && (tagValue.includes("/>") || tagValue.includes("</"))) {\n                xmlStr += indentation + options.indentBy + tagValue + indentation;\n            } else {\n                xmlStr += tagValue;\n            }\n            xmlStr += `</${tagName}>`;\n        }\n        isPreviousElementTag = true;\n    }\n\n    return xmlStr;\n}\n\nfunction propName(obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if(!obj.hasOwnProperty(key)) continue;\n        if (key !== ":@") return key;\n    }\n}\n\nfunction attr_to_str(attrMap, options) {\n    let attrStr = "";\n    if (attrMap && !options.ignoreAttributes) {\n        for (let attr in attrMap) {\n            if(!attrMap.hasOwnProperty(attr)) continue;\n            let attrVal = options.attributeValueProcessor(attr, attrMap[attr]);\n            attrVal = replaceEntitiesValue(attrVal, options);\n            if (attrVal === true && options.suppressBooleanAttributes) {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}`;\n            } else {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}="${attrVal}"`;\n            }\n        }\n    }\n    return attrStr;\n}\n\nfunction isStopNode(jPath, options) {\n    jPath = jPath.substr(0, jPath.length - options.textNodeName.length - 1);\n    let tagName = jPath.substr(jPath.lastIndexOf(".") + 1);\n    for (let index in options.stopNodes) {\n        if (options.stopNodes[index] === jPath || options.stopNodes[index] === "*." + tagName) return true;\n    }\n    return false;\n}\n\nfunction replaceEntitiesValue(textValue, options) {\n    if (textValue && textValue.length > 0 && options.processEntities) {\n        for (let i = 0; i < options.entities.length; i++) {\n            const entity = options.entities[i];\n            textValue = textValue.replace(entity.regex, entity.val);\n        }\n    }\n    return textValue;\n}\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/xmlbuilder/orderedJs2Xml.js?')},"./src/xmlparser/DocTypeReader.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ readDocType)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ \"./src/util.js\");\n\n\n//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<' && !comment) { //Determine the tag type\n                if( hasBody && isEntity(xmlData, i)){\n                    i += 7; \n                    let entityName, val;\n                    [entityName, val,i] = readEntityExp(xmlData,i+1);\n                    if(val.indexOf(\"&\") === -1) //Parameter entities are not supported\n                        entities[ validateEntityName(entityName) ] = {\n                            regx : RegExp( `&${entityName};`,\"g\"),\n                            val: val\n                        };\n                }\n                else if( hasBody && isElement(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isAttlist(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isNotation(xmlData, i)) i += 9;//Not supported\n                else if( isComment)                         comment = true;\n                else                                        throw new Error(\"Invalid DOCTYPE\");\n\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') { //Read tag content\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                        angleBracketsCount--;\n                    }\n                }else{\n                    angleBracketsCount--;\n                }\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nfunction readEntityExp(xmlData,i){\n    //External entities are not supported\n    //    <!ENTITY ext SYSTEM \"http://normal-website.com\" >\n\n    //Parameter entities are not supported\n    //    <!ENTITY entityname \"&anotherElement;\">\n\n    //Internal entities are supported\n    //    <!ENTITY entityname \"replacement text\">\n    \n    //read EntityName\n    let entityName = \"\";\n    for (; i < xmlData.length && (xmlData[i] !== \"'\" && xmlData[i] !== '\"' ); i++) {\n        // if(xmlData[i] === \" \") continue;\n        // else \n        entityName += xmlData[i];\n    }\n    entityName = entityName.trim();\n    if(entityName.indexOf(\" \") !== -1) throw new Error(\"External entites are not supported\");\n\n    //read Entity Value\n    const startChar = xmlData[i++];\n    let val = \"\"\n    for (; i < xmlData.length && xmlData[i] !== startChar ; i++) {\n        val += xmlData[i];\n    }\n    return [entityName, val, i];\n}\n\nfunction isComment(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === '-' &&\n    xmlData[i+3] === '-') return true\n    return false\n}\nfunction isEntity(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'N' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'I' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'Y') return true\n    return false\n}\nfunction isElement(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'L' &&\n    xmlData[i+4] === 'E' &&\n    xmlData[i+5] === 'M' &&\n    xmlData[i+6] === 'E' &&\n    xmlData[i+7] === 'N' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\n\nfunction isAttlist(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'A' &&\n    xmlData[i+3] === 'T' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'L' &&\n    xmlData[i+6] === 'I' &&\n    xmlData[i+7] === 'S' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\nfunction isNotation(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'N' &&\n    xmlData[i+3] === 'O' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'A' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'I' &&\n    xmlData[i+8] === 'O' &&\n    xmlData[i+9] === 'N') return true\n    return false\n}\n\nfunction validateEntityName(name){\n    if ((0,_util_js__WEBPACK_IMPORTED_MODULE_0__.isName)(name))\n\treturn name;\n    else\n        throw new Error(`Invalid entity name ${name}`);\n}\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/xmlparser/DocTypeReader.js?")},"./src/xmlparser/OptionsBuilder.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildOptions: () => (/* binding */ buildOptions),\n/* harmony export */   defaultOptions: () => (/* binding */ defaultOptions)\n/* harmony export */ });\n\nconst defaultOptions = {\n    preserveOrder: false,\n    attributeNamePrefix: '@_',\n    attributesGroupName: false,\n    textNodeName: '#text',\n    ignoreAttributes: true,\n    removeNSPrefix: false, // remove NS from tag name or attribute name if true\n    allowBooleanAttributes: false, //a tag can have attributes without any value\n    //ignoreRootElement : false,\n    parseTagValue: true,\n    parseAttributeValue: false,\n    trimValues: true, //Trim string values of tag and attributes\n    cdataPropName: false,\n    numberParseOptions: {\n      hex: true,\n      leadingZeros: true,\n      eNotation: true\n    },\n    tagValueProcessor: function(tagName, val) {\n      return val;\n    },\n    attributeValueProcessor: function(attrName, val) {\n      return val;\n    },\n    stopNodes: [], //nested tags will not be parsed even for errors\n    alwaysCreateTextNode: false,\n    isArray: () => false,\n    commentPropName: false,\n    unpairedTags: [],\n    processEntities: true,\n    htmlEntities: false,\n    ignoreDeclaration: false,\n    ignorePiTags: false,\n    transformTagName: false,\n    transformAttributeName: false,\n    updateTag: function(tagName, jPath, attrs){\n      return tagName\n    },\n    // skipEmptyListItem: false\n};\n   \nconst buildOptions = function(options) {\n    return Object.assign({}, defaultOptions, options);\n};\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/xmlparser/OptionsBuilder.js?")},"./src/xmlparser/OrderedObjParser.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ OrderedObjParser)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.js");\n/* harmony import */ var _xmlNode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./xmlNode.js */ "./src/xmlparser/xmlNode.js");\n/* harmony import */ var _DocTypeReader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DocTypeReader.js */ "./src/xmlparser/DocTypeReader.js");\n/* harmony import */ var strnum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! strnum */ "./node_modules/strnum/strnum.js");\n/* harmony import */ var _ignoreAttributes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ignoreAttributes.js */ "./src/ignoreAttributes.js");\n\n///@ts-check\n\n\n\n\n\n\n\n// const regx =\n//   \'<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)\'\n//   .replace(/NAME/g, util.nameRegexp);\n\n//const tagsRegx = new RegExp("<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*"+cdataRegx+")*([^<]+)?","g");\n//const tagsRegx = new RegExp("<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)("+cdataRegx+"([^<]*))*([^<]+)?","g");\n\nclass OrderedObjParser{\n  constructor(options){\n    this.options = options;\n    this.currentNode = null;\n    this.tagsNodeStack = [];\n    this.docTypeEntities = {};\n    this.lastEntities = {\n      "apos" : { regex: /&(apos|#39|#x27);/g, val : "\'"},\n      "gt" : { regex: /&(gt|#62|#x3E);/g, val : ">"},\n      "lt" : { regex: /&(lt|#60|#x3C);/g, val : "<"},\n      "quot" : { regex: /&(quot|#34|#x22);/g, val : "\\""},\n    };\n    this.ampEntity = { regex: /&(amp|#38|#x26);/g, val : "&"};\n    this.htmlEntities = {\n      "space": { regex: /&(nbsp|#160);/g, val: " " },\n      // "lt" : { regex: /&(lt|#60);/g, val: "<" },\n      // "gt" : { regex: /&(gt|#62);/g, val: ">" },\n      // "amp" : { regex: /&(amp|#38);/g, val: "&" },\n      // "quot" : { regex: /&(quot|#34);/g, val: "\\"" },\n      // "apos" : { regex: /&(apos|#39);/g, val: "\'" },\n      "cent" : { regex: /&(cent|#162);/g, val: "" },\n      "pound" : { regex: /&(pound|#163);/g, val: "" },\n      "yen" : { regex: /&(yen|#165);/g, val: "" },\n      "euro" : { regex: /&(euro|#8364);/g, val: "" },\n      "copyright" : { regex: /&(copy|#169);/g, val: "" },\n      "reg" : { regex: /&(reg|#174);/g, val: "" },\n      "inr" : { regex: /&(inr|#8377);/g, val: "" },\n      "num_dec": { regex: /&#([0-9]{1,7});/g, val : (_, str) => String.fromCodePoint(Number.parseInt(str, 10)) },\n      "num_hex": { regex: /&#x([0-9a-fA-F]{1,6});/g, val : (_, str) => String.fromCodePoint(Number.parseInt(str, 16)) },\n    };\n    this.addExternalEntities = addExternalEntities;\n    this.parseXml = parseXml;\n    this.parseTextData = parseTextData;\n    this.resolveNameSpace = resolveNameSpace;\n    this.buildAttributesMap = buildAttributesMap;\n    this.isItStopNode = isItStopNode;\n    this.replaceEntitiesValue = replaceEntitiesValue;\n    this.readStopNodeData = readStopNodeData;\n    this.saveTextToParentTag = saveTextToParentTag;\n    this.addChild = addChild;\n    this.ignoreAttributesFn = (0,_ignoreAttributes_js__WEBPACK_IMPORTED_MODULE_4__["default"])(this.options.ignoreAttributes)\n  }\n\n}\n\nfunction addExternalEntities(externalEntities){\n  const entKeys = Object.keys(externalEntities);\n  for (let i = 0; i < entKeys.length; i++) {\n    const ent = entKeys[i];\n    this.lastEntities[ent] = {\n       regex: new RegExp("&"+ent+";","g"),\n       val : externalEntities[ent]\n    }\n  }\n}\n\n/**\n * @param {string} val\n * @param {string} tagName\n * @param {string} jPath\n * @param {boolean} dontTrim\n * @param {boolean} hasAttributes\n * @param {boolean} isLeafNode\n * @param {boolean} escapeEntities\n */\nfunction parseTextData(val, tagName, jPath, dontTrim, hasAttributes, isLeafNode, escapeEntities) {\n  if (val !== undefined) {\n    if (this.options.trimValues && !dontTrim) {\n      val = val.trim();\n    }\n    if(val.length > 0){\n      if(!escapeEntities) val = this.replaceEntitiesValue(val);\n      \n      const newval = this.options.tagValueProcessor(tagName, val, jPath, hasAttributes, isLeafNode);\n      if(newval === null || newval === undefined){\n        //don\'t parse\n        return val;\n      }else if(typeof newval !== typeof val || newval !== val){\n        //overwrite\n        return newval;\n      }else if(this.options.trimValues){\n        return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n      }else{\n        const trimmedVal = val.trim();\n        if(trimmedVal === val){\n          return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n        }else{\n          return val;\n        }\n      }\n    }\n  }\n}\n\nfunction resolveNameSpace(tagname) {\n  if (this.options.removeNSPrefix) {\n    const tags = tagname.split(\':\');\n    const prefix = tagname.charAt(0) === \'/\' ? \'/\' : \'\';\n    if (tags[0] === \'xmlns\') {\n      return \'\';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp("([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*([\'\\"])((.|\\n)*?)\\\\2","gm");\nconst attrsRegx = new RegExp(\'([^\\\\s=]+)\\\\s*(=\\\\s*([\\\'"])([\\\\s\\\\S]*?)\\\\3)?\', \'gm\');\n\nfunction buildAttributesMap(attrStr, jPath, tagName) {\n  if (this.options.ignoreAttributes !== true && typeof attrStr === \'string\') {\n    // attrStr = attrStr.replace(/\\r?\\n/g, \' \');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.getAllMatches)(attrStr, attrsRegx);\n    const len = matches.length; //don\'t make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = this.resolveNameSpace(matches[i][1]);\n      if (this.ignoreAttributesFn(attrName, jPath)) {\n        continue\n      }\n      let oldVal = matches[i][4];\n      let aName = this.options.attributeNamePrefix + attrName;\n      if (attrName.length) {\n        if (this.options.transformAttributeName) {\n          aName = this.options.transformAttributeName(aName);\n        }\n        if(aName === "__proto__") aName  = "#__proto__";\n        if (oldVal !== undefined) {\n          if (this.options.trimValues) {\n            oldVal = oldVal.trim();\n          }\n          oldVal = this.replaceEntitiesValue(oldVal);\n          const newVal = this.options.attributeValueProcessor(attrName, oldVal, jPath);\n          if(newVal === null || newVal === undefined){\n            //don\'t parse\n            attrs[aName] = oldVal;\n          }else if(typeof newVal !== typeof oldVal || newVal !== oldVal){\n            //overwrite\n            attrs[aName] = newVal;\n          }else{\n            //parse\n            attrs[aName] = parseValue(\n              oldVal,\n              this.options.parseAttributeValue,\n              this.options.numberParseOptions\n            );\n          }\n        } else if (this.options.allowBooleanAttributes) {\n          attrs[aName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (this.options.attributesGroupName) {\n      const attrCollection = {};\n      attrCollection[this.options.attributesGroupName] = attrs;\n      return attrCollection;\n    }\n    return attrs\n  }\n}\n\nconst parseXml = function(xmlData) {\n  xmlData = xmlData.replace(/\\r\\n?/g, "\\n"); //TODO: remove this line\n  const xmlObj = new _xmlNode_js__WEBPACK_IMPORTED_MODULE_1__["default"](\'!xml\');\n  let currentNode = xmlObj;\n  let textData = "";\n  let jPath = "";\n  for(let i=0; i< xmlData.length; i++){//for each char in XML data\n    const ch = xmlData[i];\n    if(ch === \'<\'){\n      // const nextIndex = i+1;\n      // const _2ndChar = xmlData[nextIndex];\n      if( xmlData[i+1] === \'/\') {//Closing Tag\n        const closeIndex = findClosingIndex(xmlData, ">", i, "Closing Tag is not closed.")\n        let tagName = xmlData.substring(i+2,closeIndex).trim();\n\n        if(this.options.removeNSPrefix){\n          const colonIndex = tagName.indexOf(":");\n          if(colonIndex !== -1){\n            tagName = tagName.substr(colonIndex+1);\n          }\n        }\n\n        if(this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n\n        if(currentNode){\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        }\n\n        //check if last tag of nested tag was unpaired tag\n        const lastTagName = jPath.substring(jPath.lastIndexOf(".")+1);\n        if(tagName && this.options.unpairedTags.indexOf(tagName) !== -1 ){\n          throw new Error(`Unpaired tag can not be used as closing tag: </${tagName}>`);\n        }\n        let propIndex = 0\n        if(lastTagName && this.options.unpairedTags.indexOf(lastTagName) !== -1 ){\n          propIndex = jPath.lastIndexOf(\'.\', jPath.lastIndexOf(\'.\')-1)\n          this.tagsNodeStack.pop();\n        }else{\n          propIndex = jPath.lastIndexOf(".");\n        }\n        jPath = jPath.substring(0, propIndex);\n\n        currentNode = this.tagsNodeStack.pop();//avoid recursion, set the parent tag scope\n        textData = "";\n        i = closeIndex;\n      } else if( xmlData[i+1] === \'?\') {\n\n        let tagData = readTagExp(xmlData,i, false, "?>");\n        if(!tagData) throw new Error("Pi Tag is not closed.");\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        if( (this.options.ignoreDeclaration && tagData.tagName === "?xml") || this.options.ignorePiTags){\n\n        }else{\n  \n          const childNode = new _xmlNode_js__WEBPACK_IMPORTED_MODULE_1__["default"](tagData.tagName);\n          childNode.add(this.options.textNodeName, "");\n          \n          if(tagData.tagName !== tagData.tagExp && tagData.attrExpPresent){\n            childNode[":@"] = this.buildAttributesMap(tagData.tagExp, jPath, tagData.tagName);\n          }\n          this.addChild(currentNode, childNode, jPath)\n\n        }\n\n\n        i = tagData.closeIndex + 1;\n      } else if(xmlData.substr(i + 1, 3) === \'!--\') {\n        const endIndex = findClosingIndex(xmlData, "--\x3e", i+4, "Comment is not closed.")\n        if(this.options.commentPropName){\n          const comment = xmlData.substring(i + 4, endIndex - 2);\n\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n          currentNode.add(this.options.commentPropName, [ { [this.options.textNodeName] : comment } ]);\n        }\n        i = endIndex;\n      } else if( xmlData.substr(i + 1, 2) === \'!D\') {\n        const result = (0,_DocTypeReader_js__WEBPACK_IMPORTED_MODULE_2__["default"])(xmlData, i);\n        this.docTypeEntities = result.entities;\n        i = result.i;\n      }else if(xmlData.substr(i + 1, 2) === \'![\') {\n        const closeIndex = findClosingIndex(xmlData, "]]>", i, "CDATA is not closed.") - 2;\n        const tagExp = xmlData.substring(i + 9,closeIndex);\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n        let val = this.parseTextData(tagExp, currentNode.tagname, jPath, true, false, true, true);\n        if(val == undefined) val = "";\n\n        //cdata should be set even if it is 0 length string\n        if(this.options.cdataPropName){\n          currentNode.add(this.options.cdataPropName, [ { [this.options.textNodeName] : tagExp } ]);\n        }else{\n          currentNode.add(this.options.textNodeName, val);\n        }\n        \n        i = closeIndex + 2;\n      }else {//Opening tag\n        let result = readTagExp(xmlData,i, this.options.removeNSPrefix);\n        let tagName= result.tagName;\n        const rawTagName = result.rawTagName;\n        let tagExp = result.tagExp;\n        let attrExpPresent = result.attrExpPresent;\n        let closeIndex = result.closeIndex;\n\n        if (this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n        \n        //save text as child node\n        if (currentNode && textData) {\n          if(currentNode.tagname !== \'!xml\'){\n            //when nested tag is found\n            textData = this.saveTextToParentTag(textData, currentNode, jPath, false);\n          }\n        }\n\n        //check if last tag was unpaired tag\n        const lastTag = currentNode;\n        if(lastTag && this.options.unpairedTags.indexOf(lastTag.tagname) !== -1 ){\n          currentNode = this.tagsNodeStack.pop();\n          jPath = jPath.substring(0, jPath.lastIndexOf("."));\n        }\n        if(tagName !== xmlObj.tagname){\n          jPath += jPath ? "." + tagName : tagName;\n        }\n        if (this.isItStopNode(this.options.stopNodes, jPath, tagName)) {\n          let tagContent = "";\n          //self-closing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf("/") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === "/"){ //remove trailing \'/\'\n              tagName = tagName.substr(0, tagName.length - 1);\n              jPath = jPath.substr(0, jPath.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            i = result.closeIndex;\n          }\n          //unpaired tag\n          else if(this.options.unpairedTags.indexOf(tagName) !== -1){\n            \n            i = result.closeIndex;\n          }\n          //normal tag\n          else{\n            //read until closing tag is found\n            const result = this.readStopNodeData(xmlData, rawTagName, closeIndex + 1);\n            if(!result) throw new Error(`Unexpected end of ${rawTagName}`);\n            i = result.i;\n            tagContent = result.tagContent;\n          }\n\n          const childNode = new _xmlNode_js__WEBPACK_IMPORTED_MODULE_1__["default"](tagName);\n          if(tagName !== tagExp && attrExpPresent){\n            childNode[":@"] = this.buildAttributesMap(tagExp, jPath, tagName);\n          }\n          if(tagContent) {\n            tagContent = this.parseTextData(tagContent, tagName, jPath, true, attrExpPresent, true, true);\n          }\n          \n          jPath = jPath.substr(0, jPath.lastIndexOf("."));\n          childNode.add(this.options.textNodeName, tagContent);\n          \n          this.addChild(currentNode, childNode, jPath)\n        }else{\n  //selfClosing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf("/") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === "/"){ //remove trailing \'/\'\n              tagName = tagName.substr(0, tagName.length - 1);\n              jPath = jPath.substr(0, jPath.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            \n            if(this.options.transformTagName) {\n              tagName = this.options.transformTagName(tagName);\n            }\n\n            const childNode = new _xmlNode_js__WEBPACK_IMPORTED_MODULE_1__["default"](tagName);\n            if(tagName !== tagExp && attrExpPresent){\n              childNode[":@"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            jPath = jPath.substr(0, jPath.lastIndexOf("."));\n          }\n    //opening tag\n          else{\n            const childNode = new _xmlNode_js__WEBPACK_IMPORTED_MODULE_1__["default"]( tagName);\n            this.tagsNodeStack.push(currentNode);\n            \n            if(tagName !== tagExp && attrExpPresent){\n              childNode[":@"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            currentNode = childNode;\n          }\n          textData = "";\n          i = closeIndex;\n        }\n      }\n    }else{\n      textData += xmlData[i];\n    }\n  }\n  return xmlObj.child;\n}\n\nfunction addChild(currentNode, childNode, jPath){\n  const result = this.options.updateTag(childNode.tagname, jPath, childNode[":@"])\n  if(result === false){\n  }else if(typeof result === "string"){\n    childNode.tagname = result\n    currentNode.addChild(childNode);\n  }else{\n    currentNode.addChild(childNode);\n  }\n}\n\nconst replaceEntitiesValue = function(val){\n\n  if(this.options.processEntities){\n    for(let entityName in this.docTypeEntities){\n      const entity = this.docTypeEntities[entityName];\n      val = val.replace( entity.regx, entity.val);\n    }\n    for(let entityName in this.lastEntities){\n      const entity = this.lastEntities[entityName];\n      val = val.replace( entity.regex, entity.val);\n    }\n    if(this.options.htmlEntities){\n      for(let entityName in this.htmlEntities){\n        const entity = this.htmlEntities[entityName];\n        val = val.replace( entity.regex, entity.val);\n      }\n    }\n    val = val.replace( this.ampEntity.regex, this.ampEntity.val);\n  }\n  return val;\n}\nfunction saveTextToParentTag(textData, currentNode, jPath, isLeafNode) {\n  if (textData) { //store previously collected data as textNode\n    if(isLeafNode === undefined) isLeafNode = currentNode.child.length === 0\n    \n    textData = this.parseTextData(textData,\n      currentNode.tagname,\n      jPath,\n      false,\n      currentNode[":@"] ? Object.keys(currentNode[":@"]).length !== 0 : false,\n      isLeafNode);\n\n    if (textData !== undefined && textData !== "")\n      currentNode.add(this.options.textNodeName, textData);\n    textData = "";\n  }\n  return textData;\n}\n\n//TODO: use jPath to simplify the logic\n/**\n * \n * @param {string[]} stopNodes \n * @param {string} jPath\n * @param {string} currentTagName \n */\nfunction isItStopNode(stopNodes, jPath, currentTagName){\n  const allNodesExp = "*." + currentTagName;\n  for (const stopNodePath in stopNodes) {\n    const stopNodeExp = stopNodes[stopNodePath];\n    if( allNodesExp === stopNodeExp || jPath === stopNodeExp  ) return true;\n  }\n  return false;\n}\n\n/**\n * Returns the tag Expression and where it is ending handling single-double quotes situation\n * @param {string} xmlData \n * @param {number} i starting index\n * @returns \n */\nfunction tagExpWithClosingIndex(xmlData, i, closingChar = ">"){\n  let attrBoundary;\n  let tagExp = "";\n  for (let index = i; index < xmlData.length; index++) {\n    let ch = xmlData[index];\n    if (attrBoundary) {\n        if (ch === attrBoundary) attrBoundary = "";//reset\n    } else if (ch === \'"\' || ch === "\'") {\n        attrBoundary = ch;\n    } else if (ch === closingChar[0]) {\n      if(closingChar[1]){\n        if(xmlData[index + 1] === closingChar[1]){\n          return {\n            data: tagExp,\n            index: index\n          }\n        }\n      }else{\n        return {\n          data: tagExp,\n          index: index\n        }\n      }\n    } else if (ch === \'\\t\') {\n      ch = " "\n    }\n    tagExp += ch;\n  }\n}\n\nfunction findClosingIndex(xmlData, str, i, errMsg){\n  const closingIndex = xmlData.indexOf(str, i);\n  if(closingIndex === -1){\n    throw new Error(errMsg)\n  }else{\n    return closingIndex + str.length - 1;\n  }\n}\n\nfunction readTagExp(xmlData,i, removeNSPrefix, closingChar = ">"){\n  const result = tagExpWithClosingIndex(xmlData, i+1, closingChar);\n  if(!result) return;\n  let tagExp = result.data;\n  const closeIndex = result.index;\n  const separatorIndex = tagExp.search(/\\s/);\n  let tagName = tagExp;\n  let attrExpPresent = true;\n  if(separatorIndex !== -1){//separate tag name and attributes expression\n    tagName = tagExp.substring(0, separatorIndex);\n    tagExp = tagExp.substring(separatorIndex + 1).trimStart();\n  }\n\n  const rawTagName = tagName;\n  if(removeNSPrefix){\n    const colonIndex = tagName.indexOf(":");\n    if(colonIndex !== -1){\n      tagName = tagName.substr(colonIndex+1);\n      attrExpPresent = tagName !== result.data.substr(colonIndex + 1);\n    }\n  }\n\n  return {\n    tagName: tagName,\n    tagExp: tagExp,\n    closeIndex: closeIndex,\n    attrExpPresent: attrExpPresent,\n    rawTagName: rawTagName,\n  }\n}\n/**\n * find paired tag for a stop node\n * @param {string} xmlData \n * @param {string} tagName \n * @param {number} i \n */\nfunction readStopNodeData(xmlData, tagName, i){\n  const startIndex = i;\n  // Starting at 1 since we already have an open tag\n  let openTagCount = 1;\n\n  for (; i < xmlData.length; i++) {\n    if( xmlData[i] === "<"){ \n      if (xmlData[i+1] === "/") {//close tag\n          const closeIndex = findClosingIndex(xmlData, ">", i, `${tagName} is not closed`);\n          let closeTagName = xmlData.substring(i+2,closeIndex).trim();\n          if(closeTagName === tagName){\n            openTagCount--;\n            if (openTagCount === 0) {\n              return {\n                tagContent: xmlData.substring(startIndex, i),\n                i : closeIndex\n              }\n            }\n          }\n          i=closeIndex;\n        } else if(xmlData[i+1] === \'?\') { \n          const closeIndex = findClosingIndex(xmlData, "?>", i+1, "StopNode is not closed.")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 3) === \'!--\') { \n          const closeIndex = findClosingIndex(xmlData, "--\x3e", i+3, "StopNode is not closed.")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 2) === \'![\') { \n          const closeIndex = findClosingIndex(xmlData, "]]>", i, "StopNode is not closed.") - 2;\n          i=closeIndex;\n        } else {\n          const tagData = readTagExp(xmlData, i, \'>\')\n\n          if (tagData) {\n            const openTagName = tagData && tagData.tagName;\n            if (openTagName === tagName && tagData.tagExp[tagData.tagExp.length-1] !== "/") {\n              openTagCount++;\n            }\n            i=tagData.closeIndex;\n          }\n        }\n      }\n  }//end for loop\n}\n\nfunction parseValue(val, shouldParse, options) {\n  if (shouldParse && typeof val === \'string\') {\n    //console.log(options)\n    const newval = val.trim();\n    if(newval === \'true\' ) return true;\n    else if(newval === \'false\' ) return false;\n    else return (0,strnum__WEBPACK_IMPORTED_MODULE_3__["default"])(val, options);\n  } else {\n    if ((0,_util_js__WEBPACK_IMPORTED_MODULE_0__.isExist)(val)) {\n      return val;\n    } else {\n      return \'\';\n    }\n  }\n}\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/xmlparser/OrderedObjParser.js?')},"./src/xmlparser/XMLParser.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ XMLParser)\n/* harmony export */ });\n/* harmony import */ var _OptionsBuilder_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./OptionsBuilder.js */ "./src/xmlparser/OptionsBuilder.js");\n/* harmony import */ var _OrderedObjParser_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OrderedObjParser.js */ "./src/xmlparser/OrderedObjParser.js");\n/* harmony import */ var _node2json_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node2json.js */ "./src/xmlparser/node2json.js");\n/* harmony import */ var _validator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../validator.js */ "./src/validator.js");\n\n\n\n\n\nclass XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = (0,_OptionsBuilder_js__WEBPACK_IMPORTED_MODULE_0__.buildOptions)(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === "string"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error("XML data is accepted in String or Bytes[] form.")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = (0,_validator_js__WEBPACK_IMPORTED_MODULE_3__.validate)(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new _OrderedObjParser_js__WEBPACK_IMPORTED_MODULE_1__["default"](this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return (0,_node2json_js__WEBPACK_IMPORTED_MODULE_2__["default"])(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf("&") !== -1){\n            throw new Error("Entity value can\'t have \'&\'")\n        }else if(key.indexOf("&") !== -1 || key.indexOf(";") !== -1){\n            throw new Error("An entity must be set without \'&\' and \';\'. Eg. use \'#xD\' for \'&#xD;\'")\n        }else if(value === "&"){\n            throw new Error("An entity with value \'&\' is not permitted");\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n}\n\n//# sourceURL=webpack://fast-xml-parser/./src/xmlparser/XMLParser.js?')},"./src/xmlparser/node2json.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ prettify)\n/* harmony export */ });\n\n\n/**\n * \n * @param {array} node \n * @param {any} options \n * @returns \n */\nfunction prettify(node, options){\n  return compress( node, options);\n}\n\n/**\n * \n * @param {array} arr \n * @param {object} options \n * @param {string} jPath \n * @returns object\n */\nfunction compress(arr, options, jPath){\n  let text;\n  const compressedObj = {};\n  for (let i = 0; i < arr.length; i++) {\n    const tagObj = arr[i];\n    const property = propName(tagObj);\n    let newJpath = "";\n    if(jPath === undefined) newJpath = property;\n    else newJpath = jPath + "." + property;\n\n    if(property === options.textNodeName){\n      if(text === undefined) text = tagObj[property];\n      else text += "" + tagObj[property];\n    }else if(property === undefined){\n      continue;\n    }else if(tagObj[property]){\n      \n      let val = compress(tagObj[property], options, newJpath);\n      const isLeaf = isLeafTag(val, options);\n\n      if(tagObj[":@"]){\n        assignAttributes( val, tagObj[":@"], newJpath, options);\n      }else if(Object.keys(val).length === 1 && val[options.textNodeName] !== undefined && !options.alwaysCreateTextNode){\n        val = val[options.textNodeName];\n      }else if(Object.keys(val).length === 0){\n        if(options.alwaysCreateTextNode) val[options.textNodeName] = "";\n        else val = "";\n      }\n\n      if(compressedObj[property] !== undefined && compressedObj.hasOwnProperty(property)) {\n        if(!Array.isArray(compressedObj[property])) {\n            compressedObj[property] = [ compressedObj[property] ];\n        }\n        compressedObj[property].push(val);\n      }else{\n        //TODO: if a node is not an array, then check if it should be an array\n        //also determine if it is a leaf node\n        if (options.isArray(property, newJpath, isLeaf )) {\n          compressedObj[property] = [val];\n        }else{\n          compressedObj[property] = val;\n        }\n      }\n    }\n    \n  }\n  // if(text && text.length > 0) compressedObj[options.textNodeName] = text;\n  if(typeof text === "string"){\n    if(text.length > 0) compressedObj[options.textNodeName] = text;\n  }else if(text !== undefined) compressedObj[options.textNodeName] = text;\n  return compressedObj;\n}\n\nfunction propName(obj){\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if(key !== ":@") return key;\n  }\n}\n\nfunction assignAttributes(obj, attrMap, jpath, options){\n  if (attrMap) {\n    const keys = Object.keys(attrMap);\n    const len = keys.length; //don\'t make it inline\n    for (let i = 0; i < len; i++) {\n      const atrrName = keys[i];\n      if (options.isArray(atrrName, jpath + "." + atrrName, true, true)) {\n        obj[atrrName] = [ attrMap[atrrName] ];\n      } else {\n        obj[atrrName] = attrMap[atrrName];\n      }\n    }\n  }\n}\n\nfunction isLeafTag(obj, options){\n  const { textNodeName } = options;\n  const propCount = Object.keys(obj).length;\n  \n  if (propCount === 0) {\n    return true;\n  }\n\n  if (\n    propCount === 1 &&\n    (obj[textNodeName] || typeof obj[textNodeName] === "boolean" || obj[textNodeName] === 0)\n  ) {\n    return true;\n  }\n\n  return false;\n}\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/xmlparser/node2json.js?')},"./src/xmlparser/xmlNode.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ XmlNode)\n/* harmony export */ });\n\n\nclass XmlNode{\n  constructor(tagname) {\n    this.tagname = tagname;\n    this.child = []; //nested tags, text, cdata, comments in order\n    this[":@"] = {}; //attributes map\n  }\n  add(key,val){\n    // this.child.push( {name : key, val: val, isCdata: isCdata });\n    if(key === "__proto__") key = "#__proto__";\n    this.child.push( {[key]: val });\n  }\n  addChild(node) {\n    if(node.tagname === "__proto__") node.tagname = "#__proto__";\n    if(node[":@"] && Object.keys(node[":@"]).length > 0){\n      this.child.push( { [node.tagname]: node.child, [":@"]: node[":@"] });\n    }else{\n      this.child.push( { [node.tagname]: node.child });\n    }\n  }\n}\n\n\n//# sourceURL=webpack://fast-xml-parser/./src/xmlparser/xmlNode.js?')}},__webpack_module_cache__={};function __nested_webpack_require_83014__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__nested_webpack_require_83014__),r.exports}__nested_webpack_require_83014__.d=(e,t)=>{for(var r in t)__nested_webpack_require_83014__.o(t,r)&&!__nested_webpack_require_83014__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__nested_webpack_require_83014__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__nested_webpack_require_83014__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__=__nested_webpack_require_83014__("./src/fxp.js");module.exports=__nested_webpack_exports__})()}},__webpack_module_cache__={},installedChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>e+".extension.js",__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="",installedChunks={179:1},__webpack_require__.f.require=(e,t)=>{installedChunks[e]||(e=>{var t=e.modules,r=e.ids,n=e.runtime;for(var i in t)__webpack_require__.o(t,i)&&(__webpack_require__.m[i]=t[i]);n&&n(__webpack_require__);for(var o=0;o<r.length;o++)installedChunks[r[o]]=1})(require("./"+__webpack_require__.u(e)))};var __webpack_exports__=__webpack_require__(7195);module.exports=__webpack_exports__})();
// SIG // Begin signature block
// SIG // MIImMgYJKoZIhvcNAQcCoIImIzCCJh8CAQExDzANBglg
// SIG // hkgBZQMEAgEFADB3BgorBgEEAYI3AgEEoGkwZzAyBgor
// SIG // BgEEAYI3AgEeMCQCAQEEEBDgyQbOONQRoqMAEEvTUJAC
// SIG // AQACAQACAQACAQACAQAwMTANBglghkgBZQMEAgEFAAQg
// SIG // E5CEntQWiBMM3zJHAqROiWLkYqkxH/vhvYK+zf/C+J6g
// SIG // ggtnMIIE7zCCA9egAwIBAgITMwAABae4j/uXXTWE7AAA
// SIG // AAAFpzANBgkqhkiG9w0BAQsFADB+MQswCQYDVQQGEwJV
// SIG // UzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMH
// SIG // UmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBv
// SIG // cmF0aW9uMSgwJgYDVQQDEx9NaWNyb3NvZnQgQ29kZSBT
// SIG // aWduaW5nIFBDQSAyMDEwMB4XDTI0MDgyMjE5MjU1N1oX
// SIG // DTI1MDcwNTE5MjU1N1owdDELMAkGA1UEBhMCVVMxEzAR
// SIG // BgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcTB1JlZG1v
// SIG // bmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlv
// SIG // bjEeMBwGA1UEAxMVTWljcm9zb2Z0IENvcnBvcmF0aW9u
// SIG // MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
// SIG // lhpUyo2LetKwfKDcj1iVBkFdjRsJUVyiYN+POKtpyYr/
// SIG // fha8/enxqF5W5SHid8akMRKAhA2I422ApYMd9TGXKEai
// SIG // Q9LCozbWAygNDYknTiULrd/hzdK0se+MqqGwwT/ACgMl
// SIG // gDWYrVEB5zx9RJE1zHUZZyZw9UbRZYzGDiZ68X6qwHbT
// SIG // TcVNaSGGJmOqA/HcnvNYvUR8UiRhIHzJxCKZ/9ckpIpE
// SIG // 1fjThxY9UB+/kh2VmDXHYC+PEEmtYwt9AIujCi4fdRTr
// SIG // ArLjVNHEwus+kJD+dZfXVPAfsZ72Wtv1s7yYQcmZ410v
// SIG // rVXjdigeRKdLHjrbhcLyOiqDl6xEygg4OwIDAQABo4IB
// SIG // bjCCAWowHwYDVR0lBBgwFgYKKwYBBAGCNz0GAQYIKwYB
// SIG // BQUHAwMwHQYDVR0OBBYEFFIVus1TcIc5i27HKM2KacHf
// SIG // HysSMEUGA1UdEQQ+MDykOjA4MR4wHAYDVQQLExVNaWNy
// SIG // b3NvZnQgQ29ycG9yYXRpb24xFjAUBgNVBAUTDTIzMDg2
// SIG // NSs1MDI3MDMwHwYDVR0jBBgwFoAU5vxfe7siAFjkck61
// SIG // 9CF0IzLm76wwVgYDVR0fBE8wTTBLoEmgR4ZFaHR0cDov
// SIG // L2NybC5taWNyb3NvZnQuY29tL3BraS9jcmwvcHJvZHVj
// SIG // dHMvTWljQ29kU2lnUENBXzIwMTAtMDctMDYuY3JsMFoG
// SIG // CCsGAQUFBwEBBE4wTDBKBggrBgEFBQcwAoY+aHR0cDov
// SIG // L3d3dy5taWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWND
// SIG // b2RTaWdQQ0FfMjAxMC0wNy0wNi5jcnQwDAYDVR0TAQH/
// SIG // BAIwADANBgkqhkiG9w0BAQsFAAOCAQEAJdXECEPhQ/7m
// SIG // 2liIjIPMELRMd0pLEOa+qgIH3qznuk2eW5k3DI9lVJBy
// SIG // 675oUnKEXvaUPwqsGeu+mLjPdLYqj6zA41zvJCwgPpE3
// SIG // g2aCkC9DCNkoWw4V6wyLLovYRjYXfD8Bk1kJLJ6DuB8a
// SIG // hhtjH4qrJzoDKPR4ppkxdvx9Vy3P4Nkz6RfBslwHKO5I
// SIG // XIeJdYSCKZlRGTemRQpNv5Dn+5trApfIefgVkA5kmhAr
// SIG // SNsXOUi26qLdYrFrxYhEbWsPcUG99TFmGrNpdv13XGx+
// SIG // 0BWKSqRuHQ2YSiHZUVZmKVMkWjTmVjcDXOxum8yiAtxw
// SIG // BhTiBHOGg0Ltsk/6tMie1jCCBnAwggRYoAMCAQICCmEM
// SIG // UkwAAAAAAAMwDQYJKoZIhvcNAQELBQAwgYgxCzAJBgNV
// SIG // BAYTAlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYD
// SIG // VQQHEwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQg
// SIG // Q29ycG9yYXRpb24xMjAwBgNVBAMTKU1pY3Jvc29mdCBS
// SIG // b290IENlcnRpZmljYXRlIEF1dGhvcml0eSAyMDEwMB4X
// SIG // DTEwMDcwNjIwNDAxN1oXDTI1MDcwNjIwNTAxN1owfjEL
// SIG // MAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24x
// SIG // EDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jv
// SIG // c29mdCBDb3Jwb3JhdGlvbjEoMCYGA1UEAxMfTWljcm9z
// SIG // b2Z0IENvZGUgU2lnbmluZyBQQ0EgMjAxMDCCASIwDQYJ
// SIG // KoZIhvcNAQEBBQADggEPADCCAQoCggEBAOkOZFB5Z7XE
// SIG // 4/0JAEyelKz3VmjqRNjPxVhPqaV2fG1FutM5krSkHvn5
// SIG // ZYLkF9KP/UScCOhlk84sVYS/fQjjLiuoQSsYt6JLbklM
// SIG // axUH3tHSwokecZTNtX9LtK8I2MyI1msXlDqTziY/7Ob+
// SIG // NJhX1R1dSfayKi7VhbtZP/iQtCuDdMorsztG4/BGScEX
// SIG // ZlTJHL0dxFViV3L4Z7klIDTeXaallV6rKIDN1bKe5QO1
// SIG // Y9OyFMjByIomCll/B+z/Du2AEjVMEqa+Ulv1ptrgiwtI
// SIG // d9aFR9UQucboqu6Lai0FXGDGtCpbnCMcX0XjGhQebzfL
// SIG // GTOAaolNo2pmY3iT1TDPlR8CAwEAAaOCAeMwggHfMBAG
// SIG // CSsGAQQBgjcVAQQDAgEAMB0GA1UdDgQWBBTm/F97uyIA
// SIG // WORyTrX0IXQjMubvrDAZBgkrBgEEAYI3FAIEDB4KAFMA
// SIG // dQBiAEMAQTALBgNVHQ8EBAMCAYYwDwYDVR0TAQH/BAUw
// SIG // AwEB/zAfBgNVHSMEGDAWgBTV9lbLj+iiXGJo0T2UkFvX
// SIG // zpoYxDBWBgNVHR8ETzBNMEugSaBHhkVodHRwOi8vY3Js
// SIG // Lm1pY3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0cy9N
// SIG // aWNSb29DZXJBdXRfMjAxMC0wNi0yMy5jcmwwWgYIKwYB
// SIG // BQUHAQEETjBMMEoGCCsGAQUFBzAChj5odHRwOi8vd3d3
// SIG // Lm1pY3Jvc29mdC5jb20vcGtpL2NlcnRzL01pY1Jvb0Nl
// SIG // ckF1dF8yMDEwLTA2LTIzLmNydDCBnQYDVR0gBIGVMIGS
// SIG // MIGPBgkrBgEEAYI3LgMwgYEwPQYIKwYBBQUHAgEWMWh0
// SIG // dHA6Ly93d3cubWljcm9zb2Z0LmNvbS9QS0kvZG9jcy9D
// SIG // UFMvZGVmYXVsdC5odG0wQAYIKwYBBQUHAgIwNB4yIB0A
// SIG // TABlAGcAYQBsAF8AUABvAGwAaQBjAHkAXwBTAHQAYQB0
// SIG // AGUAbQBlAG4AdAAuIB0wDQYJKoZIhvcNAQELBQADggIB
// SIG // ABp071dPKXvEFoV4uFDTIvwJnayCl/g0/yosl5US5eS/
// SIG // z7+TyOM0qduBuNweAL7SNW+v5X95lXflAtTx69jNTh4b
// SIG // YaLCWiMa8IyoYlFFZwjjPzwek/gwhRfIOUCm1w6zISnl
// SIG // paFpjCKTzHSY56FHQ/JTrMAPMGl//tIlIG1vYdPfB9XZ
// SIG // cgAsaYZ2PVHbpjlIyTdhbQfdUxnLp9Zhwr/ig6sP4Gub
// SIG // ldZ9KFGwiUpRpJpsyLcfShoOaanX3MF+0Ulwqratu3JH
// SIG // Yxf6ptaipobsqBBEm2O2smmJBsdGhnoYP+jFHSHVe/kC
// SIG // Iy3FQcu/HUzIFu+xnH/8IktJim4V46Z/dlvRU3mRhZ3V
// SIG // 0ts9czXzPK5UslJHasCqE5XSjhHamWdeMoz7N4XR3HWF
// SIG // nIfGWleFwr/dDY+Mmy3rtO7PJ9O1Xmn6pBYEAackZ3PP
// SIG // TU+23gVWl3r36VJN9HcFT4XG2Avxju1CCdENduMjVngi
// SIG // Jja+yrGMbqod5IXaRzNij6TJkTNfcR5Ar5hlySLoQiEl
// SIG // ihwtYNk3iUGJKhYP12E8lGhgUu/WR5mggEDuFYF3Ppzg
// SIG // UxgaUB04lZseZjMTJzkXeIc2zk7DX7L1PUdTtuDl2wth
// SIG // PSrXkizON1o+QEIxpB8QCMJWnL8kXVECnWp50hfT2sGU
// SIG // jgd7JXFEqwZq5tTG3yOalnXFMYIaIzCCGh8CAQEwgZUw
// SIG // fjELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEoMCYGA1UEAxMfTWlj
// SIG // cm9zb2Z0IENvZGUgU2lnbmluZyBQQ0EgMjAxMAITMwAA
// SIG // Bae4j/uXXTWE7AAAAAAFpzANBglghkgBZQMEAgEFAKCB
// SIG // rjAZBgkqhkiG9w0BCQMxDAYKKwYBBAGCNwIBBDAcBgor
// SIG // BgEEAYI3AgELMQ4wDAYKKwYBBAGCNwIBFTAvBgkqhkiG
// SIG // 9w0BCQQxIgQgpaK5Hjtcwb3zB6+l2HJdkXAOfbeGzSKP
// SIG // H8M8gqErfUQwQgYKKwYBBAGCNwIBDDE0MDKgFIASAE0A
// SIG // aQBjAHIAbwBzAG8AZgB0oRqAGGh0dHA6Ly93d3cubWlj
// SIG // cm9zb2Z0LmNvbTANBgkqhkiG9w0BAQEFAASCAQAtNBpy
// SIG // /Z+/YlvncBZIYumPmJJ3s1Rd/70gtbdhod94YDg4Jh5y
// SIG // xq08qrGx73FU5ppKzCqUCUB0RA674eiCbwke5u1byBeT
// SIG // q++cVOaieGaUgjnbLBkCeuQv66BcFE3FZbNNX3sCmJi+
// SIG // dGzsbRNLHHN2Rrg51eVwHJTskaHPnVcRwF6NO9lusPJk
// SIG // 4erGgaL/2LfzspxxLUG2dleRbsr+19Oy5PQZSu75IMWH
// SIG // 8W2YS4tLGrsI21mUqA8H7sjT0VMMtoGBaVY2XqRjrPiP
// SIG // eN/5d0q+HhgXkccMVNKLTTob2Q8U+uF2eXhgKF/p2IhF
// SIG // KblMv0qNTE3ORSSgfLWNbZUMHPCioYIXrTCCF6kGCisG
// SIG // AQQBgjcDAwExgheZMIIXlQYJKoZIhvcNAQcCoIIXhjCC
// SIG // F4ICAQMxDzANBglghkgBZQMEAgEFADCCAVoGCyqGSIb3
// SIG // DQEJEAEEoIIBSQSCAUUwggFBAgEBBgorBgEEAYRZCgMB
// SIG // MDEwDQYJYIZIAWUDBAIBBQAEIHSD/BYAcL7MmN1s784U
// SIG // AFER/Ui4dimUaPeFl05rYIOUAgZn7SItXC4YEzIwMjUw
// SIG // NDE0MTkxMzE1Ljk5NFowBIACAfSggdmkgdYwgdMxCzAJ
// SIG // BgNVBAYTAlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAw
// SIG // DgYDVQQHEwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3Nv
// SIG // ZnQgQ29ycG9yYXRpb24xLTArBgNVBAsTJE1pY3Jvc29m
// SIG // dCBJcmVsYW5kIE9wZXJhdGlvbnMgTGltaXRlZDEnMCUG
// SIG // A1UECxMeblNoaWVsZCBUU1MgRVNOOjJEMUEtMDVFMC1E
// SIG // OTQ3MSUwIwYDVQQDExxNaWNyb3NvZnQgVGltZS1TdGFt
// SIG // cCBTZXJ2aWNloIIR+zCCBygwggUQoAMCAQICEzMAAAH9
// SIG // c/loWs0MYe0AAQAAAf0wDQYJKoZIhvcNAQELBQAwfDEL
// SIG // MAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24x
// SIG // EDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jv
// SIG // c29mdCBDb3Jwb3JhdGlvbjEmMCQGA1UEAxMdTWljcm9z
// SIG // b2Z0IFRpbWUtU3RhbXAgUENBIDIwMTAwHhcNMjQwNzI1
// SIG // MTgzMTE2WhcNMjUxMDIyMTgzMTE2WjCB0zELMAkGA1UE
// SIG // BhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24xEDAOBgNV
// SIG // BAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBD
// SIG // b3Jwb3JhdGlvbjEtMCsGA1UECxMkTWljcm9zb2Z0IEly
// SIG // ZWxhbmQgT3BlcmF0aW9ucyBMaW1pdGVkMScwJQYDVQQL
// SIG // Ex5uU2hpZWxkIFRTUyBFU046MkQxQS0wNUUwLUQ5NDcx
// SIG // JTAjBgNVBAMTHE1pY3Jvc29mdCBUaW1lLVN0YW1wIFNl
// SIG // cnZpY2UwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIK
// SIG // AoICAQChZaz4P467gmNidEdF527QxMVjM0kRU+cgvNzT
// SIG // ZHepue6O+FmCSGn6n+XKZgvORDIbbOnFhx5OMgXseJBZ
// SIG // u3oVbcBGQGu2ElTPTlmcqlwXfWWlQRvyBReIPbEimjxg
// SIG // z5IPRL6FM/VMID/B7fzJncES2Zm1xWdotGn8C+yqD7ko
// SIG // jQrDpMMmkrBMuXRVbT/bewqKR5YNKcdB5Oms7TMib9u1
// SIG // qBJibdX/zNeV/HLuz8RUV1KCUcaxSrwRm6lQ7xdsfPPu
// SIG // 1RHKIPeQ7E2fDmjHV5lf9z9eZbgfpvjI2ZkXTBNm7Dfv
// SIG // IDU8ko7JJKtetYSH4fr75Zvr7WW0wI+gwkdS08/cKfQI
// SIG // 1w2+s/Im0NpyqOchOsvOuwd04uqOwfbb1mS+d2TQirEE
// SIG // NmAyhj4R/t98VE/ak+SsXUX0hwGRjPyEv5CNf67jLhSq
// SIG // rhS1PtVGeyq9H/H/5AsTSlxISH9cTXDV9ynomarxGccR
// SIG // eKTJwws39r8pjGlI/cV8Vstm5/6oivIUvSAQPK1qkafU
// SIG // 42NWSIqlU/a6pUhiPhWIKPLmktRx4x6qIqBiqGmZQcIT
// SIG // ZaywsuF1AEd2mXbz6T5ljqbh08WcSgZwke4xwhmfDhw7
// SIG // CLGiNE6v42rvVwmPtDgvRfA++5MdC3SgftEoxCCazLsJ
// SIG // UPu/nl06F0dd1izI7r10B0r6daXJhwIDAQABo4IBSTCC
// SIG // AUUwHQYDVR0OBBYEFOkMxcDhlbz7Ivb7e8DpGZTugQqk
// SIG // MB8GA1UdIwQYMBaAFJ+nFV0AXmJdg/Tl0mWnG1M1Gely
// SIG // MF8GA1UdHwRYMFYwVKBSoFCGTmh0dHA6Ly93d3cubWlj
// SIG // cm9zb2Z0LmNvbS9wa2lvcHMvY3JsL01pY3Jvc29mdCUy
// SIG // MFRpbWUtU3RhbXAlMjBQQ0ElMjAyMDEwKDEpLmNybDBs
// SIG // BggrBgEFBQcBAQRgMF4wXAYIKwYBBQUHMAKGUGh0dHA6
// SIG // Ly93d3cubWljcm9zb2Z0LmNvbS9wa2lvcHMvY2VydHMv
// SIG // TWljcm9zb2Z0JTIwVGltZS1TdGFtcCUyMFBDQSUyMDIw
// SIG // MTAoMSkuY3J0MAwGA1UdEwEB/wQCMAAwFgYDVR0lAQH/
// SIG // BAwwCgYIKwYBBQUHAwgwDgYDVR0PAQH/BAQDAgeAMA0G
// SIG // CSqGSIb3DQEBCwUAA4ICAQBj2Fhf5PkCYKtgZof3pN1H
// SIG // lPnb8804bvJJh6im/h+WcNZAuEGWtq8CD6mOU2/ldJdm
// SIG // soa/x7izl0nlZ2F8L3LAVCrhOZedR689e2W5tmT7TYFc
// SIG // rr/beEzRNIqzYqWFiKrNtF7xBsx8pcQO28ygdJlPuv7A
// SIG // jYiCNhDCRr7c/1VeARHC7jr9zPPwhH9mr687nnbcmV3q
// SIG // yxW7Oz27AismF9xgGPnSZdZEFwyHNqMuNYOByKHQO7KQ
// SIG // 9wGmhMuU4vwuleiiqev5AtgTgGlR6ncnJIxh8/PaF84v
// SIG // eDTZYR+w7GnwA1tx2KozfV2be9KF4SSaMcDbO4z5OCfi
// SIG // Pmf4CfLsg4NhCQis1WEt0wvT167V0g+GnbiUW2dZNg1o
// SIG // VM58yoVrcBvwoMqJyanQC2FE1lWDQE8Avnz4HRRygEYr
// SIG // NL2OxzA5O7UmY2WKw4qRVRWRInkWj9y18NI90JNVohdc
// SIG // XuXjSTVwz9fY7Ql0BL3tPvyViO3D8/Ju7NfmyHEGH9Gp
// SIG // M+8LICEjEFUp83+F+zgIigVqpYnSv/xIHUIazLIhw98S
// SIG // Ayjxx6rXDlmjQl+fIWLoa6j7Pcs8WX97FBpG5sSuwBRN
// SIG // /IFjn/mWLK+MCDINicQHy8c7tzsWDa0Z3mEaBiz4A6hb
// SIG // Hbj5dzLGlSQBqMOGTL0OX7wllOO2zoFxP2xhOY6h2T9K
// SIG // AjCCB3EwggVZoAMCAQICEzMAAAAVxedrngKbSZkAAAAA
// SIG // ABUwDQYJKoZIhvcNAQELBQAwgYgxCzAJBgNVBAYTAlVT
// SIG // MRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQHEwdS
// SIG // ZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQgQ29ycG9y
// SIG // YXRpb24xMjAwBgNVBAMTKU1pY3Jvc29mdCBSb290IENl
// SIG // cnRpZmljYXRlIEF1dGhvcml0eSAyMDEwMB4XDTIxMDkz
// SIG // MDE4MjIyNVoXDTMwMDkzMDE4MzIyNVowfDELMAkGA1UE
// SIG // BhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24xEDAOBgNV
// SIG // BAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBD
// SIG // b3Jwb3JhdGlvbjEmMCQGA1UEAxMdTWljcm9zb2Z0IFRp
// SIG // bWUtU3RhbXAgUENBIDIwMTAwggIiMA0GCSqGSIb3DQEB
// SIG // AQUAA4ICDwAwggIKAoICAQDk4aZM57RyIQt5osvXJHm9
// SIG // DtWC0/3unAcH0qlsTnXIyjVX9gF/bErg4r25PhdgM/9c
// SIG // T8dm95VTcVrifkpa/rg2Z4VGIwy1jRPPdzLAEBjoYH1q
// SIG // UoNEt6aORmsHFPPFdvWGUNzBRMhxXFExN6AKOG6N7dcP
// SIG // 2CZTfDlhAnrEqv1yaa8dq6z2Nr41JmTamDu6GnszrYBb
// SIG // fowQHJ1S/rboYiXcag/PXfT+jlPP1uyFVk3v3byNpOOR
// SIG // j7I5LFGc6XBpDco2LXCOMcg1KL3jtIckw+DJj361VI/c
// SIG // +gVVmG1oO5pGve2krnopN6zL64NF50ZuyjLVwIYwXE8s
// SIG // 4mKyzbnijYjklqwBSru+cakXW2dg3viSkR4dPf0gz3N9
// SIG // QZpGdc3EXzTdEonW/aUgfX782Z5F37ZyL9t9X4C626p+
// SIG // Nuw2TPYrbqgSUei/BQOj0XOmTTd0lBw0gg/wEPK3Rxjt
// SIG // p+iZfD9M269ewvPV2HM9Q07BMzlMjgK8QmguEOqEUUbi
// SIG // 0b1qGFphAXPKZ6Je1yh2AuIzGHLXpyDwwvoSCtdjbwzJ
// SIG // NmSLW6CmgyFdXzB0kZSU2LlQ+QuJYfM2BjUYhEfb3BvR
// SIG // /bLUHMVr9lxSUV0S2yW6r1AFemzFER1y7435UsSFF5PA
// SIG // PBXbGjfHCBUYP3irRbb1Hode2o+eFnJpxq57t7c+auIu
// SIG // rQIDAQABo4IB3TCCAdkwEgYJKwYBBAGCNxUBBAUCAwEA
// SIG // ATAjBgkrBgEEAYI3FQIEFgQUKqdS/mTEmr6CkTxGNSnP
// SIG // EP8vBO4wHQYDVR0OBBYEFJ+nFV0AXmJdg/Tl0mWnG1M1
// SIG // GelyMFwGA1UdIARVMFMwUQYMKwYBBAGCN0yDfQEBMEEw
// SIG // PwYIKwYBBQUHAgEWM2h0dHA6Ly93d3cubWljcm9zb2Z0
// SIG // LmNvbS9wa2lvcHMvRG9jcy9SZXBvc2l0b3J5Lmh0bTAT
// SIG // BgNVHSUEDDAKBggrBgEFBQcDCDAZBgkrBgEEAYI3FAIE
// SIG // DB4KAFMAdQBiAEMAQTALBgNVHQ8EBAMCAYYwDwYDVR0T
// SIG // AQH/BAUwAwEB/zAfBgNVHSMEGDAWgBTV9lbLj+iiXGJo
// SIG // 0T2UkFvXzpoYxDBWBgNVHR8ETzBNMEugSaBHhkVodHRw
// SIG // Oi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpL2NybC9wcm9k
// SIG // dWN0cy9NaWNSb29DZXJBdXRfMjAxMC0wNi0yMy5jcmww
// SIG // WgYIKwYBBQUHAQEETjBMMEoGCCsGAQUFBzAChj5odHRw
// SIG // Oi8vd3d3Lm1pY3Jvc29mdC5jb20vcGtpL2NlcnRzL01p
// SIG // Y1Jvb0NlckF1dF8yMDEwLTA2LTIzLmNydDANBgkqhkiG
// SIG // 9w0BAQsFAAOCAgEAnVV9/Cqt4SwfZwExJFvhnnJL/Klv
// SIG // 6lwUtj5OR2R4sQaTlz0xM7U518JxNj/aZGx80HU5bbsP
// SIG // MeTCj/ts0aGUGCLu6WZnOlNN3Zi6th542DYunKmCVgAD
// SIG // sAW+iehp4LoJ7nvfam++Kctu2D9IdQHZGN5tggz1bSNU
// SIG // 5HhTdSRXud2f8449xvNo32X2pFaq95W2KFUn0CS9QKC/
// SIG // GbYSEhFdPSfgQJY4rPf5KYnDvBewVIVCs/wMnosZiefw
// SIG // C2qBwoEZQhlSdYo2wh3DYXMuLGt7bj8sCXgU6ZGyqVvf
// SIG // SaN0DLzskYDSPeZKPmY7T7uG+jIa2Zb0j/aRAfbOxnT9
// SIG // 9kxybxCrdTDFNLB62FD+CljdQDzHVG2dY3RILLFORy3B
// SIG // FARxv2T5JL5zbcqOCb2zAVdJVGTZc9d/HltEAY5aGZFr
// SIG // DZ+kKNxnGSgkujhLmm77IVRrakURR6nxt67I6IleT53S
// SIG // 0Ex2tVdUCbFpAUR+fKFhbHP+CrvsQWY9af3LwUFJfn6T
// SIG // vsv4O+S3Fb+0zj6lMVGEvL8CwYKiexcdFYmNcP7ntdAo
// SIG // GokLjzbaukz5m/8K6TT4JDVnK+ANuOaMmdbhIurwJ0I9
// SIG // JZTmdHRbatGePu1+oDEzfbzL6Xu/OHBE0ZDxyKs6ijoI
// SIG // Yn/ZcGNTTY3ugm2lBRDBcQZqELQdVTNYs6FwZvKhggNW
// SIG // MIICPgIBATCCAQGhgdmkgdYwgdMxCzAJBgNVBAYTAlVT
// SIG // MRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQHEwdS
// SIG // ZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQgQ29ycG9y
// SIG // YXRpb24xLTArBgNVBAsTJE1pY3Jvc29mdCBJcmVsYW5k
// SIG // IE9wZXJhdGlvbnMgTGltaXRlZDEnMCUGA1UECxMeblNo
// SIG // aWVsZCBUU1MgRVNOOjJEMUEtMDVFMC1EOTQ3MSUwIwYD
// SIG // VQQDExxNaWNyb3NvZnQgVGltZS1TdGFtcCBTZXJ2aWNl
// SIG // oiMKAQEwBwYFKw4DAhoDFQCiPRa1VVBQ1Iqiq2uOKdEC
// SIG // wFR2g6CBgzCBgKR+MHwxCzAJBgNVBAYTAlVTMRMwEQYD
// SIG // VQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQHEwdSZWRtb25k
// SIG // MR4wHAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24x
// SIG // JjAkBgNVBAMTHU1pY3Jvc29mdCBUaW1lLVN0YW1wIFBD
// SIG // QSAyMDEwMA0GCSqGSIb3DQEBCwUAAgUA66dx6jAiGA8y
// SIG // MDI1MDQxNDExMzcxNFoYDzIwMjUwNDE1MTEzNzE0WjB0
// SIG // MDoGCisGAQQBhFkKBAExLDAqMAoCBQDrp3HqAgEAMAcC
// SIG // AQACAkO+MAcCAQACAhIYMAoCBQDrqMNqAgEAMDYGCisG
// SIG // AQQBhFkKBAIxKDAmMAwGCisGAQQBhFkKAwKgCjAIAgEA
// SIG // AgMHoSChCjAIAgEAAgMBhqAwDQYJKoZIhvcNAQELBQAD
// SIG // ggEBAIemj9CuBGhVmmchuphZQUhH5aQbhQdLfa9l9VCt
// SIG // j3gVCO/z+qq7B7OGGvHmv9nlxvvu+cSljVTeDgXWAdjT
// SIG // Qdsry9YUymUq0efK5tkBxp27CHaVijNnT4dFAj4eFMaT
// SIG // 9tbQyYSL1wa/JXzgxY+n2Eu677k0D96yL13v74siBJl1
// SIG // 2Mv7I1QPfWWNa50TJXdmLyPTtZtGkJH+ZBWK+MfvyGxd
// SIG // K8WFTMHogfSowLhjfhqqTNvA0f2ukxdJSgTqJ7wMvHWZ
// SIG // bBiPdQdAMZjb0RlYad0NXZxq/JckFTOyB9VUkWeNcnwf
// SIG // AxO8N+7GHPp1ssgrGt/+qNtIROYHPqJ4U06ugh4xggQN
// SIG // MIIECQIBATCBkzB8MQswCQYDVQQGEwJVUzETMBEGA1UE
// SIG // CBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEe
// SIG // MBwGA1UEChMVTWljcm9zb2Z0IENvcnBvcmF0aW9uMSYw
// SIG // JAYDVQQDEx1NaWNyb3NvZnQgVGltZS1TdGFtcCBQQ0Eg
// SIG // MjAxMAITMwAAAf1z+WhazQxh7QABAAAB/TANBglghkgB
// SIG // ZQMEAgEFAKCCAUowGgYJKoZIhvcNAQkDMQ0GCyqGSIb3
// SIG // DQEJEAEEMC8GCSqGSIb3DQEJBDEiBCAntX5sQ+UJD89g
// SIG // nSurDFndcTcFimyRfgAbTIa3LyrnFTCB+gYLKoZIhvcN
// SIG // AQkQAi8xgeowgecwgeQwgb0EIIAoSA3JSjC8h/H94N9h
// SIG // K6keR4XWnoYXCMoGzyVEHg1HMIGYMIGApH4wfDELMAkG
// SIG // A1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24xEDAO
// SIG // BgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29m
// SIG // dCBDb3Jwb3JhdGlvbjEmMCQGA1UEAxMdTWljcm9zb2Z0
// SIG // IFRpbWUtU3RhbXAgUENBIDIwMTACEzMAAAH9c/loWs0M
// SIG // Ye0AAQAAAf0wIgQguVURb2jjmxi5tE7ikUO3fGPLq/5d
// SIG // efWbyssmOT1TiUkwDQYJKoZIhvcNAQELBQAEggIAV13Z
// SIG // WSzntOQ/PyoPnp+bNmwxwOOBq1pDxWCKiN7x99alytbk
// SIG // N/+8hRytEP0AxMLlPAmHRjEE+zGWJ2oj+Jb3WJLSpzZa
// SIG // 0GzcaZdSDZdY7d5DlHcyMFSHjHstG79MPqGS9L9AnLVG
// SIG // eDZr+SYRxL+jRvw0ppx/Vc6QYTMDY7T5yLoNtqZxyoaM
// SIG // hxX6rY/s84psFHLr2VU27cgvRzO3Cxw2cHm1Y1q46fpm
// SIG // hRitBbLeVhzaVKfiU28M5MU37lS7UZ9rgVlOaEtHGDn4
// SIG // nAl/JR9VFDhr5u6xy307R3gJt6C47lN2ojgaf8q2/E8l
// SIG // O/ZYAnIPlNqgyNtAFqtwqkajkFoInVTDvCsiCRRvf8NN
// SIG // VMxzbI4kB7EBJndlb9zfBLpBc2No5OxrRnvLt84Gw2zV
// SIG // HPn2czqHpyBp2SsQQPOQZwHfTU2PI+WbX0sx0Ktk7t5Y
// SIG // 3ZnHf2/VdkbFFW+Cpuqt+fXzpkijsnQnNW0yp7flPRWj
// SIG // eYqKb0yiqzIjQldnca0dnljYj17lIcCo1oGFN71OIxgh
// SIG // Iq39UXiQdhPRsKrIIfqS+NjvCeLgtXgHBGHbKDxu/dLq
// SIG // Vn5sCNoSiVq0Mi8HKYe18grHVSusYi70x64bsIHnDro8
// SIG // I398euARwNMwu1vdLmtrJDD6693Q90/ewywSlHuR5GFF
// SIG // 0BktGB+6+j5lpVv7XQQ=
// SIG // End signature block
