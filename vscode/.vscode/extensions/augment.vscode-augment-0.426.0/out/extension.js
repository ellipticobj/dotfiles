"use strict";var dFe=Object.create;var NS=Object.defineProperty;var fFe=Object.getOwnPropertyDescriptor;var hFe=Object.getOwnPropertyNames;var gFe=Object.getPrototypeOf,pFe=Object.prototype.hasOwnProperty;var mFe=(e,t)=>()=>(e&&(t=e(e=0)),t);var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),XP=(e,t)=>{for(var r in t)NS(e,r,{get:t[r],enumerable:!0})},mY=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of hFe(t))!pFe.call(e,i)&&i!==r&&NS(e,i,{get:()=>t[i],enumerable:!(n=fFe(t,i))||n.enumerable});return e};var q=(e,t,r)=>(r=e!=null?dFe(gFe(e)):{},mY(t||!e||!e.__esModule?NS(r,"default",{value:e,enumerable:!0}):r,e)),eL=e=>mY(NS({},"__esModule",{value:!0}),e);var wd=_((REt,kY)=>{"use strict";function IFe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}kY.exports=IFe});var sL=_((kEt,MY)=>{"use strict";var BFe=typeof global=="object"&&global&&global.Object===Object&&global;MY.exports=BFe});var hl=_((MEt,FY)=>{"use strict";var DFe=sL(),TFe=typeof self=="object"&&self&&self.Object===Object&&self,RFe=DFe||TFe||Function("return this")();FY.exports=RFe});var NY=_((FEt,QY)=>{"use strict";var kFe=hl(),MFe=function(){return kFe.Date.now()};QY.exports=MFe});var LY=_((QEt,PY)=>{"use strict";var FFe=/\s/;function QFe(e){for(var t=e.length;t--&&FFe.test(e.charAt(t)););return t}PY.exports=QFe});var OY=_((NEt,UY)=>{"use strict";var NFe=LY(),PFe=/^\s+/;function LFe(e){return e&&e.slice(0,NFe(e)+1).replace(PFe,"")}UY.exports=LFe});var XC=_((PEt,qY)=>{"use strict";var UFe=hl(),OFe=UFe.Symbol;qY.exports=OFe});var GY=_((LEt,WY)=>{"use strict";var VY=XC(),HY=Object.prototype,qFe=HY.hasOwnProperty,VFe=HY.toString,eb=VY?VY.toStringTag:void 0;function HFe(e){var t=qFe.call(e,eb),r=e[eb];try{e[eb]=void 0;var n=!0}catch{}var i=VFe.call(e);return n&&(t?e[eb]=r:delete e[eb]),i}WY.exports=HFe});var YY=_((UEt,$Y)=>{"use strict";var WFe=Object.prototype,GFe=WFe.toString;function $Fe(e){return GFe.call(e)}$Y.exports=$Fe});var IA=_((OEt,JY)=>{"use strict";var KY=XC(),YFe=GY(),KFe=YY(),zFe="[object Null]",JFe="[object Undefined]",zY=KY?KY.toStringTag:void 0;function jFe(e){return e==null?e===void 0?JFe:zFe:zY&&zY in Object(e)?YFe(e):KFe(e)}JY.exports=jFe});var Wf=_((qEt,jY)=>{"use strict";function ZFe(e){return e!=null&&typeof e=="object"}jY.exports=ZFe});var XY=_((VEt,ZY)=>{"use strict";var XFe=IA(),e1e=Wf(),t1e="[object Symbol]";function r1e(e){return typeof e=="symbol"||e1e(e)&&XFe(e)==t1e}ZY.exports=r1e});var nK=_((HEt,rK)=>{"use strict";var n1e=OY(),eK=wd(),i1e=XY(),tK=NaN,s1e=/^[-+]0x[0-9a-f]+$/i,o1e=/^0b[01]+$/i,a1e=/^0o[0-7]+$/i,l1e=parseInt;function c1e(e){if(typeof e=="number")return e;if(i1e(e))return tK;if(eK(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=eK(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=n1e(e);var r=o1e.test(e);return r||a1e.test(e)?l1e(e.slice(2),r?2:8):s1e.test(e)?tK:+e}rK.exports=c1e});var BA=_((WEt,sK)=>{"use strict";var u1e=wd(),oL=NY(),iK=nK(),d1e="Expected a function",f1e=Math.max,h1e=Math.min;function g1e(e,t,r){var n,i,s,o,a,l,c=0,u=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(d1e);t=iK(t)||0,u1e(r)&&(u=!!r.leading,f="maxWait"in r,s=f?f1e(iK(r.maxWait)||0,t):s,p="trailing"in r?!!r.trailing:p);function g(N){var W=n,Z=i;return n=i=void 0,c=N,o=e.apply(Z,W),o}function m(N){return c=N,a=setTimeout(C,t),u?g(N):o}function y(N){var W=N-l,Z=N-c,te=t-W;return f?h1e(te,s-Z):te}function v(N){var W=N-l,Z=N-c;return l===void 0||W>=t||W<0||f&&Z>=s}function C(){var N=oL();if(v(N))return E(N);a=setTimeout(C,y(N))}function E(N){return a=void 0,p&&n?g(N):(n=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function B(){return a===void 0?o:E(oL())}function R(){var N=oL(),W=v(N);if(n=arguments,i=this,l=N,W){if(a===void 0)return m(l);if(f)return clearTimeout(a),a=setTimeout(C,t),g(l)}return a===void 0&&(a=setTimeout(C,t)),o}return R.cancel=w,R.flush=B,R}sK.exports=g1e});var Gf=_((GEt,oK)=>{"use strict";var p1e=BA(),m1e=wd(),A1e="Expected a function";function y1e(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(A1e);return m1e(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),p1e(e,t,{leading:n,maxWait:t,trailing:i})}oK.exports=y1e});var Cs=_((qA,pb)=>{"use strict";(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",s="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",c=1,u=2,f=4,p=1,g=2,m=1,y=2,v=4,C=8,E=16,w=32,B=64,R=128,N=256,W=512,Z=30,te="...",Y=800,U=16,ce=1,Ie=2,Q=3,se=1/0,z=9007199254740991,ie=17976931348623157e292,Pe=NaN,dt=4294967295,ve=dt-1,Rt=dt>>>1,Zt=[["ary",R],["bind",m],["bindKey",y],["curry",C],["curryRight",E],["flip",W],["partial",w],["partialRight",B],["rearg",N]],tr="[object Arguments]",ue="[object Array]",wr="[object AsyncFunction]",sr="[object Boolean]",Hr="[object Date]",Ge="[object DOMException]",ln="[object Error]",Wr="[object Function]",pr="[object GeneratorFunction]",Ee="[object Map]",Ur="[object Number]",he="[object Null]",be="[object Object]",_t="[object Promise]",hn="[object Proxy]",Dn="[object RegExp]",Ii="[object Set]",no="[object String]",od="[object Symbol]",Xc="[object Undefined]",or="[object WeakMap]",N2="[object WeakSet]",ji="[object ArrayBuffer]",fa="[object DataView]",ad="[object Float32Array]",ld="[object Float64Array]",hC="[object Int8Array]",ha="[object Int16Array]",gC="[object Int32Array]",pC="[object Uint8Array]",_r="[object Uint8ClampedArray]",It="[object Uint16Array]",Tn="[object Uint32Array]",rl=/\b__p \+= '';/g,nl=/\b(__p \+=) '' \+/g,Bg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tc=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,Xm=RegExp(tc.source),mC=RegExp(bt.source),xw=/<%-([\s\S]+?)%>/g,eA=/<%([\s\S]+?)%>/g,Df=/<%=([\s\S]+?)%>/g,tA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P2=/^\w*$/,AC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Li=/[\\^$.*+?()[\]{}|]/g,rA=RegExp(Li.source),yC=/^\s+/,L2=/\s/,cd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,je=/\{\n\/\* \[wrapped with (.+)\] \*/,Xt=/,? & /,eu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dg=/[()=,{}\[\]\/\s]/,tu=/\\(\\)?/g,vC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ww=/\w*$/,U2=/^[-+]0x[0-9a-f]+$/i,Sw=/^0b[01]+$/i,O2=/^\[object .+?Constructor\]$/,q2=/^0o[0-7]+$/i,V2=/^(?:0|[1-9]\d*)$/,H2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nA=/($^)/,W2=/['\n\r\u2028\u2029\\]/g,iA="\\ud800-\\udfff",G2="\\u0300-\\u036f",$2="\\ufe20-\\ufe2f",Y2="\\u20d0-\\u20ff",Iw=G2+$2+Y2,ga="\\u2700-\\u27bf",Bw="a-z\\xdf-\\xf6\\xf8-\\xff",Dw="\\xac\\xb1\\xd7\\xf7",CC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",K2="\\u2000-\\u206f",z2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tw="A-Z\\xc0-\\xd6\\xd8-\\xde",rc="\\ufe0e\\ufe0f",Rw=Dw+CC+K2+z2,bC="['\u2019]",EC="["+iA+"]",kw="["+Rw+"]",io="["+Iw+"]",sA="\\d+",J2="["+ga+"]",_C="["+Bw+"]",Tg="[^"+iA+Rw+sA+ga+Bw+Tw+"]",Tf="\\ud83c[\\udffb-\\udfff]",oA="(?:"+io+"|"+Tf+")",aA="[^"+iA+"]",il="(?:\\ud83c[\\udde6-\\uddff]){2}",Rf="[\\ud800-\\udbff][\\udc00-\\udfff]",ud="["+Tw+"]",Mw="\\u200d",Fw="(?:"+_C+"|"+Tg+")",dd="(?:"+ud+"|"+Tg+")",Qw="(?:"+bC+"(?:d|ll|m|re|s|t|ve))?",Nw="(?:"+bC+"(?:D|LL|M|RE|S|T|VE))?",Pw=oA+"?",Lw="["+rc+"]?",xC="(?:"+Mw+"(?:"+[aA,il,Rf].join("|")+")"+Lw+Pw+")*",lA="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",j2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Uw=Lw+Pw+xC,Ow="(?:"+[J2,il,Rf].join("|")+")"+Uw,wC="(?:"+[aA+io+"?",io,il,Rf,EC].join("|")+")",qw=RegExp(bC,"g"),Z2=RegExp(io,"g"),SC=RegExp(Tf+"(?="+Tf+")|"+wC+Uw,"g"),Vw=RegExp([ud+"?"+_C+"+"+Qw+"(?="+[kw,ud,"$"].join("|")+")",dd+"+"+Nw+"(?="+[kw,ud+Fw,"$"].join("|")+")",ud+"?"+Fw+"+"+Qw,ud+"+"+Nw,j2,lA,sA,Ow].join("|"),"g"),Hw=RegExp("["+Mw+iA+Iw+rc+"]"),Ww=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,X2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eP=-1,pn={};pn[ad]=pn[ld]=pn[hC]=pn[ha]=pn[gC]=pn[pC]=pn[_r]=pn[It]=pn[Tn]=!0,pn[tr]=pn[ue]=pn[ji]=pn[sr]=pn[fa]=pn[Hr]=pn[ln]=pn[Wr]=pn[Ee]=pn[Ur]=pn[be]=pn[Dn]=pn[Ii]=pn[no]=pn[or]=!1;var Gr={};Gr[tr]=Gr[ue]=Gr[ji]=Gr[fa]=Gr[sr]=Gr[Hr]=Gr[ad]=Gr[ld]=Gr[hC]=Gr[ha]=Gr[gC]=Gr[Ee]=Gr[Ur]=Gr[be]=Gr[Dn]=Gr[Ii]=Gr[no]=Gr[od]=Gr[pC]=Gr[_r]=Gr[It]=Gr[Tn]=!0,Gr[ln]=Gr[Wr]=Gr[or]=!1;var cA={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Gw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ru={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},IC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tP=parseFloat,rP=parseInt,kf=typeof global=="object"&&global&&global.Object===Object&&global,$w=typeof self=="object"&&self&&self.Object===Object&&self,Bi=kf||$w||Function("return this")(),BC=typeof qA=="object"&&qA&&!qA.nodeType&&qA,fd=BC&&typeof pb=="object"&&pb&&!pb.nodeType&&pb,Yw=fd&&fd.exports===BC,DC=Yw&&kf.process,ps=function(){try{var K=fd&&fd.require&&fd.require("util").types;return K||DC&&DC.binding&&DC.binding("util")}catch{}}(),nu=ps&&ps.isArrayBuffer,Kw=ps&&ps.isDate,TC=ps&&ps.isMap,Rg=ps&&ps.isRegExp,Rn=ps&&ps.isSet,RC=ps&&ps.isTypedArray;function ms(K,le,ne){switch(ne.length){case 0:return K.call(le);case 1:return K.call(le,ne[0]);case 2:return K.call(le,ne[0],ne[1]);case 3:return K.call(le,ne[0],ne[1],ne[2])}return K.apply(le,ne)}function it(K,le,ne,Ve){for(var Tt=-1,$r=K==null?0:K.length;++Tt<$r;){var Oi=K[Tt];le(Ve,Oi,ne(Oi),K)}return Ve}function As(K,le){for(var ne=-1,Ve=K==null?0:K.length;++ne<Ve&&le(K[ne],ne,K)!==!1;);return K}function Qo(K,le){for(var ne=K==null?0:K.length;ne--&&le(K[ne],ne,K)!==!1;);return K}function zw(K,le){for(var ne=-1,Ve=K==null?0:K.length;++ne<Ve;)if(!le(K[ne],ne,K))return!1;return!0}function sl(K,le){for(var ne=-1,Ve=K==null?0:K.length,Tt=0,$r=[];++ne<Ve;){var Oi=K[ne];le(Oi,ne,K)&&($r[Tt++]=Oi)}return $r}function hd(K,le){var ne=K==null?0:K.length;return!!ne&&gd(K,le,0)>-1}function nc(K,le,ne){for(var Ve=-1,Tt=K==null?0:K.length;++Ve<Tt;)if(ne(le,K[Ve]))return!0;return!1}function jr(K,le){for(var ne=-1,Ve=K==null?0:K.length,Tt=Array(Ve);++ne<Ve;)Tt[ne]=le(K[ne],ne,K);return Tt}function so(K,le){for(var ne=-1,Ve=le.length,Tt=K.length;++ne<Ve;)K[Tt+ne]=le[ne];return K}function pa(K,le,ne,Ve){var Tt=-1,$r=K==null?0:K.length;for(Ve&&$r&&(ne=K[++Tt]);++Tt<$r;)ne=le(ne,K[Tt],Tt,K);return ne}function uA(K,le,ne,Ve){var Tt=K==null?0:K.length;for(Ve&&Tt&&(ne=K[--Tt]);Tt--;)ne=le(ne,K[Tt],Tt,K);return ne}function kg(K,le){for(var ne=-1,Ve=K==null?0:K.length;++ne<Ve;)if(le(K[ne],ne,K))return!0;return!1}var Jw=re("length");function kC(K){return K.split("")}function nP(K){return K.match(eu)||[]}function jw(K,le,ne){var Ve;return ne(K,function(Tt,$r,Oi){if(le(Tt,$r,Oi))return Ve=$r,!1}),Ve}function dA(K,le,ne,Ve){for(var Tt=K.length,$r=ne+(Ve?1:-1);Ve?$r--:++$r<Tt;)if(le(K[$r],$r,K))return $r;return-1}function gd(K,le,ne){return le===le?jIe(K,le,ne):dA(K,S,ne)}function x(K,le,ne,Ve){for(var Tt=ne-1,$r=K.length;++Tt<$r;)if(Ve(K[Tt],le))return Tt;return-1}function S(K){return K!==K}function L(K,le){var ne=K==null?0:K.length;return ne?Wt(K,le)/ne:Pe}function re(K){return function(le){return le==null?e:le[K]}}function oe(K){return function(le){return K==null?e:K[le]}}function De(K,le,ne,Ve,Tt){return Tt(K,function($r,Oi,An){ne=Ve?(Ve=!1,$r):le(ne,$r,Oi,An)}),ne}function st(K,le){var ne=K.length;for(K.sort(le);ne--;)K[ne]=K[ne].value;return K}function Wt(K,le){for(var ne,Ve=-1,Tt=K.length;++Ve<Tt;){var $r=le(K[Ve]);$r!==e&&(ne=ne===e?$r:ne+$r)}return ne}function mn(K,le){for(var ne=-1,Ve=Array(K);++ne<K;)Ve[ne]=le(ne);return Ve}function Ui(K,le){return jr(le,function(ne){return[ne,K[ne]]})}function oo(K){return K&&K.slice(0,S9(K)+1).replace(yC,"")}function kn(K){return function(le){return K(le)}}function ic(K,le){return jr(le,function(ne){return K[ne]})}function No(K,le){return K.has(le)}function Mf(K,le){for(var ne=-1,Ve=K.length;++ne<Ve&&gd(le,K[ne],0)>-1;);return ne}function Zw(K,le){for(var ne=K.length;ne--&&gd(le,K[ne],0)>-1;);return ne}function HIe(K,le){for(var ne=K.length,Ve=0;ne--;)K[ne]===le&&++Ve;return Ve}var WIe=oe(cA),GIe=oe(Gw);function $Ie(K){return"\\"+IC[K]}function YIe(K,le){return K==null?e:K[le]}function fA(K){return Hw.test(K)}function KIe(K){return Ww.test(K)}function zIe(K){for(var le,ne=[];!(le=K.next()).done;)ne.push(le.value);return ne}function iP(K){var le=-1,ne=Array(K.size);return K.forEach(function(Ve,Tt){ne[++le]=[Tt,Ve]}),ne}function w9(K,le){return function(ne){return K(le(ne))}}function Ff(K,le){for(var ne=-1,Ve=K.length,Tt=0,$r=[];++ne<Ve;){var Oi=K[ne];(Oi===le||Oi===l)&&(K[ne]=l,$r[Tt++]=ne)}return $r}function Xw(K){var le=-1,ne=Array(K.size);return K.forEach(function(Ve){ne[++le]=Ve}),ne}function JIe(K){var le=-1,ne=Array(K.size);return K.forEach(function(Ve){ne[++le]=[Ve,Ve]}),ne}function jIe(K,le,ne){for(var Ve=ne-1,Tt=K.length;++Ve<Tt;)if(K[Ve]===le)return Ve;return-1}function ZIe(K,le,ne){for(var Ve=ne+1;Ve--;)if(K[Ve]===le)return Ve;return Ve}function hA(K){return fA(K)?eBe(K):Jw(K)}function sc(K){return fA(K)?tBe(K):kC(K)}function S9(K){for(var le=K.length;le--&&L2.test(K.charAt(le)););return le}var XIe=oe(ru);function eBe(K){for(var le=SC.lastIndex=0;SC.test(K);)++le;return le}function tBe(K){return K.match(SC)||[]}function rBe(K){return K.match(Vw)||[]}var nBe=function K(le){le=le==null?Bi:Qf.defaults(Bi.Object(),le,Qf.pick(Bi,X2));var ne=le.Array,Ve=le.Date,Tt=le.Error,$r=le.Function,Oi=le.Math,An=le.Object,sP=le.RegExp,iBe=le.String,ol=le.TypeError,eS=ne.prototype,sBe=$r.prototype,gA=An.prototype,tS=le["__core-js_shared__"],rS=sBe.toString,cn=gA.hasOwnProperty,oBe=0,I9=function(){var d=/[^.]+$/.exec(tS&&tS.keys&&tS.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),nS=gA.toString,aBe=rS.call(An),lBe=Bi._,cBe=sP("^"+rS.call(cn).replace(Li,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),iS=Yw?le.Buffer:e,Nf=le.Symbol,sS=le.Uint8Array,B9=iS?iS.allocUnsafe:e,oS=w9(An.getPrototypeOf,An),D9=An.create,T9=gA.propertyIsEnumerable,aS=eS.splice,R9=Nf?Nf.isConcatSpreadable:e,MC=Nf?Nf.iterator:e,Mg=Nf?Nf.toStringTag:e,lS=function(){try{var d=Lg(An,"defineProperty");return d({},"",{}),d}catch{}}(),uBe=le.clearTimeout!==Bi.clearTimeout&&le.clearTimeout,dBe=Ve&&Ve.now!==Bi.Date.now&&Ve.now,fBe=le.setTimeout!==Bi.setTimeout&&le.setTimeout,cS=Oi.ceil,uS=Oi.floor,oP=An.getOwnPropertySymbols,hBe=iS?iS.isBuffer:e,k9=le.isFinite,gBe=eS.join,pBe=w9(An.keys,An),qi=Oi.max,Ns=Oi.min,mBe=Ve.now,ABe=le.parseInt,M9=Oi.random,yBe=eS.reverse,aP=Lg(le,"DataView"),FC=Lg(le,"Map"),lP=Lg(le,"Promise"),pA=Lg(le,"Set"),QC=Lg(le,"WeakMap"),NC=Lg(An,"create"),dS=QC&&new QC,mA={},vBe=Ug(aP),CBe=Ug(FC),bBe=Ug(lP),EBe=Ug(pA),_Be=Ug(QC),fS=Nf?Nf.prototype:e,PC=fS?fS.valueOf:e,F9=fS?fS.toString:e;function F(d){if(ni(d)&&!kt(d)&&!(d instanceof mr)){if(d instanceof al)return d;if(cn.call(d,"__wrapped__"))return Q$(d)}return new al(d)}var AA=function(){function d(){}return function(h){if(!Yn(h))return{};if(D9)return D9(h);d.prototype=h;var A=new d;return d.prototype=e,A}}();function hS(){}function al(d,h){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=e}F.templateSettings={escape:xw,evaluate:eA,interpolate:Df,variable:"",imports:{_:F}},F.prototype=hS.prototype,F.prototype.constructor=F,al.prototype=AA(hS.prototype),al.prototype.constructor=al;function mr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dt,this.__views__=[]}function xBe(){var d=new mr(this.__wrapped__);return d.__actions__=Po(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Po(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Po(this.__views__),d}function wBe(){if(this.__filtered__){var d=new mr(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function SBe(){var d=this.__wrapped__.value(),h=this.__dir__,A=kt(d),b=h<0,I=A?d.length:0,P=LDe(0,I,this.__views__),O=P.start,H=P.end,J=H-O,de=b?H:O-1,fe=this.__iteratees__,Ae=fe.length,Re=0,ze=Ns(J,this.__takeCount__);if(!A||!b&&I==J&&ze==J)return i$(d,this.__actions__);var ft=[];e:for(;J--&&Re<ze;){de+=h;for(var zt=-1,ht=d[de];++zt<Ae;){var ar=fe[zt],xr=ar.iteratee,ya=ar.type,co=xr(ht);if(ya==Ie)ht=co;else if(!co){if(ya==ce)continue e;break e}}ft[Re++]=ht}return ft}mr.prototype=AA(hS.prototype),mr.prototype.constructor=mr;function Fg(d){var h=-1,A=d==null?0:d.length;for(this.clear();++h<A;){var b=d[h];this.set(b[0],b[1])}}function IBe(){this.__data__=NC?NC(null):{},this.size=0}function BBe(d){var h=this.has(d)&&delete this.__data__[d];return this.size-=h?1:0,h}function DBe(d){var h=this.__data__;if(NC){var A=h[d];return A===o?e:A}return cn.call(h,d)?h[d]:e}function TBe(d){var h=this.__data__;return NC?h[d]!==e:cn.call(h,d)}function RBe(d,h){var A=this.__data__;return this.size+=this.has(d)?0:1,A[d]=NC&&h===e?o:h,this}Fg.prototype.clear=IBe,Fg.prototype.delete=BBe,Fg.prototype.get=DBe,Fg.prototype.has=TBe,Fg.prototype.set=RBe;function pd(d){var h=-1,A=d==null?0:d.length;for(this.clear();++h<A;){var b=d[h];this.set(b[0],b[1])}}function kBe(){this.__data__=[],this.size=0}function MBe(d){var h=this.__data__,A=gS(h,d);if(A<0)return!1;var b=h.length-1;return A==b?h.pop():aS.call(h,A,1),--this.size,!0}function FBe(d){var h=this.__data__,A=gS(h,d);return A<0?e:h[A][1]}function QBe(d){return gS(this.__data__,d)>-1}function NBe(d,h){var A=this.__data__,b=gS(A,d);return b<0?(++this.size,A.push([d,h])):A[b][1]=h,this}pd.prototype.clear=kBe,pd.prototype.delete=MBe,pd.prototype.get=FBe,pd.prototype.has=QBe,pd.prototype.set=NBe;function md(d){var h=-1,A=d==null?0:d.length;for(this.clear();++h<A;){var b=d[h];this.set(b[0],b[1])}}function PBe(){this.size=0,this.__data__={hash:new Fg,map:new(FC||pd),string:new Fg}}function LBe(d){var h=SS(this,d).delete(d);return this.size-=h?1:0,h}function UBe(d){return SS(this,d).get(d)}function OBe(d){return SS(this,d).has(d)}function qBe(d,h){var A=SS(this,d),b=A.size;return A.set(d,h),this.size+=A.size==b?0:1,this}md.prototype.clear=PBe,md.prototype.delete=LBe,md.prototype.get=UBe,md.prototype.has=OBe,md.prototype.set=qBe;function Qg(d){var h=-1,A=d==null?0:d.length;for(this.__data__=new md;++h<A;)this.add(d[h])}function VBe(d){return this.__data__.set(d,o),this}function HBe(d){return this.__data__.has(d)}Qg.prototype.add=Qg.prototype.push=VBe,Qg.prototype.has=HBe;function oc(d){var h=this.__data__=new pd(d);this.size=h.size}function WBe(){this.__data__=new pd,this.size=0}function GBe(d){var h=this.__data__,A=h.delete(d);return this.size=h.size,A}function $Be(d){return this.__data__.get(d)}function YBe(d){return this.__data__.has(d)}function KBe(d,h){var A=this.__data__;if(A instanceof pd){var b=A.__data__;if(!FC||b.length<r-1)return b.push([d,h]),this.size=++A.size,this;A=this.__data__=new md(b)}return A.set(d,h),this.size=A.size,this}oc.prototype.clear=WBe,oc.prototype.delete=GBe,oc.prototype.get=$Be,oc.prototype.has=YBe,oc.prototype.set=KBe;function Q9(d,h){var A=kt(d),b=!A&&Og(d),I=!A&&!b&&qf(d),P=!A&&!b&&!I&&bA(d),O=A||b||I||P,H=O?mn(d.length,iBe):[],J=H.length;for(var de in d)(h||cn.call(d,de))&&!(O&&(de=="length"||I&&(de=="offset"||de=="parent")||P&&(de=="buffer"||de=="byteLength"||de=="byteOffset")||Cd(de,J)))&&H.push(de);return H}function N9(d){var h=d.length;return h?d[vP(0,h-1)]:e}function zBe(d,h){return IS(Po(d),Ng(h,0,d.length))}function JBe(d){return IS(Po(d))}function cP(d,h,A){(A!==e&&!ac(d[h],A)||A===e&&!(h in d))&&Ad(d,h,A)}function LC(d,h,A){var b=d[h];(!(cn.call(d,h)&&ac(b,A))||A===e&&!(h in d))&&Ad(d,h,A)}function gS(d,h){for(var A=d.length;A--;)if(ac(d[A][0],h))return A;return-1}function jBe(d,h,A,b){return Pf(d,function(I,P,O){h(b,I,A(I),O)}),b}function P9(d,h){return d&&su(h,Zi(h),d)}function ZBe(d,h){return d&&su(h,Uo(h),d)}function Ad(d,h,A){h=="__proto__"&&lS?lS(d,h,{configurable:!0,enumerable:!0,value:A,writable:!0}):d[h]=A}function uP(d,h){for(var A=-1,b=h.length,I=ne(b),P=d==null;++A<b;)I[A]=P?e:WP(d,h[A]);return I}function Ng(d,h,A){return d===d&&(A!==e&&(d=d<=A?d:A),h!==e&&(d=d>=h?d:h)),d}function ll(d,h,A,b,I,P){var O,H=h&c,J=h&u,de=h&f;if(A&&(O=I?A(d,b,I,P):A(d)),O!==e)return O;if(!Yn(d))return d;var fe=kt(d);if(fe){if(O=ODe(d),!H)return Po(d,O)}else{var Ae=Ps(d),Re=Ae==Wr||Ae==pr;if(qf(d))return a$(d,H);if(Ae==be||Ae==tr||Re&&!I){if(O=J||Re?{}:S$(d),!H)return J?DDe(d,ZBe(O,d)):BDe(d,P9(O,d))}else{if(!Gr[Ae])return I?d:{};O=qDe(d,Ae,H)}}P||(P=new oc);var ze=P.get(d);if(ze)return ze;P.set(d,O),tY(d)?d.forEach(function(ht){O.add(ll(ht,h,A,ht,d,P))}):X$(d)&&d.forEach(function(ht,ar){O.set(ar,ll(ht,h,A,ar,d,P))});var ft=de?J?TP:DP:J?Uo:Zi,zt=fe?e:ft(d);return As(zt||d,function(ht,ar){zt&&(ar=ht,ht=d[ar]),LC(O,ar,ll(ht,h,A,ar,d,P))}),O}function XBe(d){var h=Zi(d);return function(A){return L9(A,d,h)}}function L9(d,h,A){var b=A.length;if(d==null)return!b;for(d=An(d);b--;){var I=A[b],P=h[I],O=d[I];if(O===e&&!(I in d)||!P(O))return!1}return!0}function U9(d,h,A){if(typeof d!="function")throw new ol(i);return GC(function(){d.apply(e,A)},h)}function UC(d,h,A,b){var I=-1,P=hd,O=!0,H=d.length,J=[],de=h.length;if(!H)return J;A&&(h=jr(h,kn(A))),b?(P=nc,O=!1):h.length>=r&&(P=No,O=!1,h=new Qg(h));e:for(;++I<H;){var fe=d[I],Ae=A==null?fe:A(fe);if(fe=b||fe!==0?fe:0,O&&Ae===Ae){for(var Re=de;Re--;)if(h[Re]===Ae)continue e;J.push(fe)}else P(h,Ae,b)||J.push(fe)}return J}var Pf=f$(iu),O9=f$(fP,!0);function eDe(d,h){var A=!0;return Pf(d,function(b,I,P){return A=!!h(b,I,P),A}),A}function pS(d,h,A){for(var b=-1,I=d.length;++b<I;){var P=d[b],O=h(P);if(O!=null&&(H===e?O===O&&!Aa(O):A(O,H)))var H=O,J=P}return J}function tDe(d,h,A,b){var I=d.length;for(A=Gt(A),A<0&&(A=-A>I?0:I+A),b=b===e||b>I?I:Gt(b),b<0&&(b+=I),b=A>b?0:nY(b);A<b;)d[A++]=h;return d}function q9(d,h){var A=[];return Pf(d,function(b,I,P){h(b,I,P)&&A.push(b)}),A}function ys(d,h,A,b,I){var P=-1,O=d.length;for(A||(A=HDe),I||(I=[]);++P<O;){var H=d[P];h>0&&A(H)?h>1?ys(H,h-1,A,b,I):so(I,H):b||(I[I.length]=H)}return I}var dP=h$(),V9=h$(!0);function iu(d,h){return d&&dP(d,h,Zi)}function fP(d,h){return d&&V9(d,h,Zi)}function mS(d,h){return sl(h,function(A){return bd(d[A])})}function Pg(d,h){h=Uf(h,d);for(var A=0,b=h.length;d!=null&&A<b;)d=d[ou(h[A++])];return A&&A==b?d:e}function H9(d,h,A){var b=h(d);return kt(d)?b:so(b,A(d))}function ao(d){return d==null?d===e?Xc:he:Mg&&Mg in An(d)?PDe(d):JDe(d)}function hP(d,h){return d>h}function rDe(d,h){return d!=null&&cn.call(d,h)}function nDe(d,h){return d!=null&&h in An(d)}function iDe(d,h,A){return d>=Ns(h,A)&&d<qi(h,A)}function gP(d,h,A){for(var b=A?nc:hd,I=d[0].length,P=d.length,O=P,H=ne(P),J=1/0,de=[];O--;){var fe=d[O];O&&h&&(fe=jr(fe,kn(h))),J=Ns(fe.length,J),H[O]=!A&&(h||I>=120&&fe.length>=120)?new Qg(O&&fe):e}fe=d[0];var Ae=-1,Re=H[0];e:for(;++Ae<I&&de.length<J;){var ze=fe[Ae],ft=h?h(ze):ze;if(ze=A||ze!==0?ze:0,!(Re?No(Re,ft):b(de,ft,A))){for(O=P;--O;){var zt=H[O];if(!(zt?No(zt,ft):b(d[O],ft,A)))continue e}Re&&Re.push(ft),de.push(ze)}}return de}function sDe(d,h,A,b){return iu(d,function(I,P,O){h(b,A(I),P,O)}),b}function OC(d,h,A){h=Uf(h,d),d=T$(d,h);var b=d==null?d:d[ou(ul(h))];return b==null?e:ms(b,d,A)}function W9(d){return ni(d)&&ao(d)==tr}function oDe(d){return ni(d)&&ao(d)==ji}function aDe(d){return ni(d)&&ao(d)==Hr}function qC(d,h,A,b,I){return d===h?!0:d==null||h==null||!ni(d)&&!ni(h)?d!==d&&h!==h:lDe(d,h,A,b,qC,I)}function lDe(d,h,A,b,I,P){var O=kt(d),H=kt(h),J=O?ue:Ps(d),de=H?ue:Ps(h);J=J==tr?be:J,de=de==tr?be:de;var fe=J==be,Ae=de==be,Re=J==de;if(Re&&qf(d)){if(!qf(h))return!1;O=!0,fe=!1}if(Re&&!fe)return P||(P=new oc),O||bA(d)?_$(d,h,A,b,I,P):QDe(d,h,J,A,b,I,P);if(!(A&p)){var ze=fe&&cn.call(d,"__wrapped__"),ft=Ae&&cn.call(h,"__wrapped__");if(ze||ft){var zt=ze?d.value():d,ht=ft?h.value():h;return P||(P=new oc),I(zt,ht,A,b,P)}}return Re?(P||(P=new oc),NDe(d,h,A,b,I,P)):!1}function cDe(d){return ni(d)&&Ps(d)==Ee}function pP(d,h,A,b){var I=A.length,P=I,O=!b;if(d==null)return!P;for(d=An(d);I--;){var H=A[I];if(O&&H[2]?H[1]!==d[H[0]]:!(H[0]in d))return!1}for(;++I<P;){H=A[I];var J=H[0],de=d[J],fe=H[1];if(O&&H[2]){if(de===e&&!(J in d))return!1}else{var Ae=new oc;if(b)var Re=b(de,fe,J,d,h,Ae);if(!(Re===e?qC(fe,de,p|g,b,Ae):Re))return!1}}return!0}function G9(d){if(!Yn(d)||GDe(d))return!1;var h=bd(d)?cBe:O2;return h.test(Ug(d))}function uDe(d){return ni(d)&&ao(d)==Dn}function dDe(d){return ni(d)&&Ps(d)==Ii}function fDe(d){return ni(d)&&MS(d.length)&&!!pn[ao(d)]}function $9(d){return typeof d=="function"?d:d==null?Oo:typeof d=="object"?kt(d)?z9(d[0],d[1]):K9(d):gY(d)}function mP(d){if(!WC(d))return pBe(d);var h=[];for(var A in An(d))cn.call(d,A)&&A!="constructor"&&h.push(A);return h}function hDe(d){if(!Yn(d))return zDe(d);var h=WC(d),A=[];for(var b in d)b=="constructor"&&(h||!cn.call(d,b))||A.push(b);return A}function AP(d,h){return d<h}function Y9(d,h){var A=-1,b=Lo(d)?ne(d.length):[];return Pf(d,function(I,P,O){b[++A]=h(I,P,O)}),b}function K9(d){var h=kP(d);return h.length==1&&h[0][2]?B$(h[0][0],h[0][1]):function(A){return A===d||pP(A,d,h)}}function z9(d,h){return FP(d)&&I$(h)?B$(ou(d),h):function(A){var b=WP(A,d);return b===e&&b===h?GP(A,d):qC(h,b,p|g)}}function AS(d,h,A,b,I){d!==h&&dP(h,function(P,O){if(I||(I=new oc),Yn(P))gDe(d,h,O,A,AS,b,I);else{var H=b?b(NP(d,O),P,O+"",d,h,I):e;H===e&&(H=P),cP(d,O,H)}},Uo)}function gDe(d,h,A,b,I,P,O){var H=NP(d,A),J=NP(h,A),de=O.get(J);if(de){cP(d,A,de);return}var fe=P?P(H,J,A+"",d,h,O):e,Ae=fe===e;if(Ae){var Re=kt(J),ze=!Re&&qf(J),ft=!Re&&!ze&&bA(J);fe=J,Re||ze||ft?kt(H)?fe=H:vi(H)?fe=Po(H):ze?(Ae=!1,fe=a$(J,!0)):ft?(Ae=!1,fe=l$(J,!0)):fe=[]:$C(J)||Og(J)?(fe=H,Og(H)?fe=iY(H):(!Yn(H)||bd(H))&&(fe=S$(J))):Ae=!1}Ae&&(O.set(J,fe),I(fe,J,b,P,O),O.delete(J)),cP(d,A,fe)}function J9(d,h){var A=d.length;if(A)return h+=h<0?A:0,Cd(h,A)?d[h]:e}function j9(d,h,A){h.length?h=jr(h,function(P){return kt(P)?function(O){return Pg(O,P.length===1?P[0]:P)}:P}):h=[Oo];var b=-1;h=jr(h,kn(ct()));var I=Y9(d,function(P,O,H){var J=jr(h,function(de){return de(P)});return{criteria:J,index:++b,value:P}});return st(I,function(P,O){return IDe(P,O,A)})}function pDe(d,h){return Z9(d,h,function(A,b){return GP(d,b)})}function Z9(d,h,A){for(var b=-1,I=h.length,P={};++b<I;){var O=h[b],H=Pg(d,O);A(H,O)&&VC(P,Uf(O,d),H)}return P}function mDe(d){return function(h){return Pg(h,d)}}function yP(d,h,A,b){var I=b?x:gd,P=-1,O=h.length,H=d;for(d===h&&(h=Po(h)),A&&(H=jr(d,kn(A)));++P<O;)for(var J=0,de=h[P],fe=A?A(de):de;(J=I(H,fe,J,b))>-1;)H!==d&&aS.call(H,J,1),aS.call(d,J,1);return d}function X9(d,h){for(var A=d?h.length:0,b=A-1;A--;){var I=h[A];if(A==b||I!==P){var P=I;Cd(I)?aS.call(d,I,1):EP(d,I)}}return d}function vP(d,h){return d+uS(M9()*(h-d+1))}function ADe(d,h,A,b){for(var I=-1,P=qi(cS((h-d)/(A||1)),0),O=ne(P);P--;)O[b?P:++I]=d,d+=A;return O}function CP(d,h){var A="";if(!d||h<1||h>z)return A;do h%2&&(A+=d),h=uS(h/2),h&&(d+=d);while(h);return A}function er(d,h){return PP(D$(d,h,Oo),d+"")}function yDe(d){return N9(EA(d))}function vDe(d,h){var A=EA(d);return IS(A,Ng(h,0,A.length))}function VC(d,h,A,b){if(!Yn(d))return d;h=Uf(h,d);for(var I=-1,P=h.length,O=P-1,H=d;H!=null&&++I<P;){var J=ou(h[I]),de=A;if(J==="__proto__"||J==="constructor"||J==="prototype")return d;if(I!=O){var fe=H[J];de=b?b(fe,J,H):e,de===e&&(de=Yn(fe)?fe:Cd(h[I+1])?[]:{})}LC(H,J,de),H=H[J]}return d}var e$=dS?function(d,h){return dS.set(d,h),d}:Oo,CDe=lS?function(d,h){return lS(d,"toString",{configurable:!0,enumerable:!1,value:YP(h),writable:!0})}:Oo;function bDe(d){return IS(EA(d))}function cl(d,h,A){var b=-1,I=d.length;h<0&&(h=-h>I?0:I+h),A=A>I?I:A,A<0&&(A+=I),I=h>A?0:A-h>>>0,h>>>=0;for(var P=ne(I);++b<I;)P[b]=d[b+h];return P}function EDe(d,h){var A;return Pf(d,function(b,I,P){return A=h(b,I,P),!A}),!!A}function yS(d,h,A){var b=0,I=d==null?b:d.length;if(typeof h=="number"&&h===h&&I<=Rt){for(;b<I;){var P=b+I>>>1,O=d[P];O!==null&&!Aa(O)&&(A?O<=h:O<h)?b=P+1:I=P}return I}return bP(d,h,Oo,A)}function bP(d,h,A,b){var I=0,P=d==null?0:d.length;if(P===0)return 0;h=A(h);for(var O=h!==h,H=h===null,J=Aa(h),de=h===e;I<P;){var fe=uS((I+P)/2),Ae=A(d[fe]),Re=Ae!==e,ze=Ae===null,ft=Ae===Ae,zt=Aa(Ae);if(O)var ht=b||ft;else de?ht=ft&&(b||Re):H?ht=ft&&Re&&(b||!ze):J?ht=ft&&Re&&!ze&&(b||!zt):ze||zt?ht=!1:ht=b?Ae<=h:Ae<h;ht?I=fe+1:P=fe}return Ns(P,ve)}function t$(d,h){for(var A=-1,b=d.length,I=0,P=[];++A<b;){var O=d[A],H=h?h(O):O;if(!A||!ac(H,J)){var J=H;P[I++]=O===0?0:O}}return P}function r$(d){return typeof d=="number"?d:Aa(d)?Pe:+d}function ma(d){if(typeof d=="string")return d;if(kt(d))return jr(d,ma)+"";if(Aa(d))return F9?F9.call(d):"";var h=d+"";return h=="0"&&1/d==-se?"-0":h}function Lf(d,h,A){var b=-1,I=hd,P=d.length,O=!0,H=[],J=H;if(A)O=!1,I=nc;else if(P>=r){var de=h?null:MDe(d);if(de)return Xw(de);O=!1,I=No,J=new Qg}else J=h?[]:H;e:for(;++b<P;){var fe=d[b],Ae=h?h(fe):fe;if(fe=A||fe!==0?fe:0,O&&Ae===Ae){for(var Re=J.length;Re--;)if(J[Re]===Ae)continue e;h&&J.push(Ae),H.push(fe)}else I(J,Ae,A)||(J!==H&&J.push(Ae),H.push(fe))}return H}function EP(d,h){return h=Uf(h,d),d=T$(d,h),d==null||delete d[ou(ul(h))]}function n$(d,h,A,b){return VC(d,h,A(Pg(d,h)),b)}function vS(d,h,A,b){for(var I=d.length,P=b?I:-1;(b?P--:++P<I)&&h(d[P],P,d););return A?cl(d,b?0:P,b?P+1:I):cl(d,b?P+1:0,b?I:P)}function i$(d,h){var A=d;return A instanceof mr&&(A=A.value()),pa(h,function(b,I){return I.func.apply(I.thisArg,so([b],I.args))},A)}function _P(d,h,A){var b=d.length;if(b<2)return b?Lf(d[0]):[];for(var I=-1,P=ne(b);++I<b;)for(var O=d[I],H=-1;++H<b;)H!=I&&(P[I]=UC(P[I]||O,d[H],h,A));return Lf(ys(P,1),h,A)}function s$(d,h,A){for(var b=-1,I=d.length,P=h.length,O={};++b<I;){var H=b<P?h[b]:e;A(O,d[b],H)}return O}function xP(d){return vi(d)?d:[]}function wP(d){return typeof d=="function"?d:Oo}function Uf(d,h){return kt(d)?d:FP(d,h)?[d]:F$(Zr(d))}var _De=er;function Of(d,h,A){var b=d.length;return A=A===e?b:A,!h&&A>=b?d:cl(d,h,A)}var o$=uBe||function(d){return Bi.clearTimeout(d)};function a$(d,h){if(h)return d.slice();var A=d.length,b=B9?B9(A):new d.constructor(A);return d.copy(b),b}function SP(d){var h=new d.constructor(d.byteLength);return new sS(h).set(new sS(d)),h}function xDe(d,h){var A=h?SP(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.byteLength)}function wDe(d){var h=new d.constructor(d.source,ww.exec(d));return h.lastIndex=d.lastIndex,h}function SDe(d){return PC?An(PC.call(d)):{}}function l$(d,h){var A=h?SP(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.length)}function c$(d,h){if(d!==h){var A=d!==e,b=d===null,I=d===d,P=Aa(d),O=h!==e,H=h===null,J=h===h,de=Aa(h);if(!H&&!de&&!P&&d>h||P&&O&&J&&!H&&!de||b&&O&&J||!A&&J||!I)return 1;if(!b&&!P&&!de&&d<h||de&&A&&I&&!b&&!P||H&&A&&I||!O&&I||!J)return-1}return 0}function IDe(d,h,A){for(var b=-1,I=d.criteria,P=h.criteria,O=I.length,H=A.length;++b<O;){var J=c$(I[b],P[b]);if(J){if(b>=H)return J;var de=A[b];return J*(de=="desc"?-1:1)}}return d.index-h.index}function u$(d,h,A,b){for(var I=-1,P=d.length,O=A.length,H=-1,J=h.length,de=qi(P-O,0),fe=ne(J+de),Ae=!b;++H<J;)fe[H]=h[H];for(;++I<O;)(Ae||I<P)&&(fe[A[I]]=d[I]);for(;de--;)fe[H++]=d[I++];return fe}function d$(d,h,A,b){for(var I=-1,P=d.length,O=-1,H=A.length,J=-1,de=h.length,fe=qi(P-H,0),Ae=ne(fe+de),Re=!b;++I<fe;)Ae[I]=d[I];for(var ze=I;++J<de;)Ae[ze+J]=h[J];for(;++O<H;)(Re||I<P)&&(Ae[ze+A[O]]=d[I++]);return Ae}function Po(d,h){var A=-1,b=d.length;for(h||(h=ne(b));++A<b;)h[A]=d[A];return h}function su(d,h,A,b){var I=!A;A||(A={});for(var P=-1,O=h.length;++P<O;){var H=h[P],J=b?b(A[H],d[H],H,A,d):e;J===e&&(J=d[H]),I?Ad(A,H,J):LC(A,H,J)}return A}function BDe(d,h){return su(d,MP(d),h)}function DDe(d,h){return su(d,x$(d),h)}function CS(d,h){return function(A,b){var I=kt(A)?it:jBe,P=h?h():{};return I(A,d,ct(b,2),P)}}function yA(d){return er(function(h,A){var b=-1,I=A.length,P=I>1?A[I-1]:e,O=I>2?A[2]:e;for(P=d.length>3&&typeof P=="function"?(I--,P):e,O&&lo(A[0],A[1],O)&&(P=I<3?e:P,I=1),h=An(h);++b<I;){var H=A[b];H&&d(h,H,b,P)}return h})}function f$(d,h){return function(A,b){if(A==null)return A;if(!Lo(A))return d(A,b);for(var I=A.length,P=h?I:-1,O=An(A);(h?P--:++P<I)&&b(O[P],P,O)!==!1;);return A}}function h$(d){return function(h,A,b){for(var I=-1,P=An(h),O=b(h),H=O.length;H--;){var J=O[d?H:++I];if(A(P[J],J,P)===!1)break}return h}}function TDe(d,h,A){var b=h&m,I=HC(d);function P(){var O=this&&this!==Bi&&this instanceof P?I:d;return O.apply(b?A:this,arguments)}return P}function g$(d){return function(h){h=Zr(h);var A=fA(h)?sc(h):e,b=A?A[0]:h.charAt(0),I=A?Of(A,1).join(""):h.slice(1);return b[d]()+I}}function vA(d){return function(h){return pa(fY(dY(h).replace(qw,"")),d,"")}}function HC(d){return function(){var h=arguments;switch(h.length){case 0:return new d;case 1:return new d(h[0]);case 2:return new d(h[0],h[1]);case 3:return new d(h[0],h[1],h[2]);case 4:return new d(h[0],h[1],h[2],h[3]);case 5:return new d(h[0],h[1],h[2],h[3],h[4]);case 6:return new d(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new d(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var A=AA(d.prototype),b=d.apply(A,h);return Yn(b)?b:A}}function RDe(d,h,A){var b=HC(d);function I(){for(var P=arguments.length,O=ne(P),H=P,J=CA(I);H--;)O[H]=arguments[H];var de=P<3&&O[0]!==J&&O[P-1]!==J?[]:Ff(O,J);if(P-=de.length,P<A)return v$(d,h,bS,I.placeholder,e,O,de,e,e,A-P);var fe=this&&this!==Bi&&this instanceof I?b:d;return ms(fe,this,O)}return I}function p$(d){return function(h,A,b){var I=An(h);if(!Lo(h)){var P=ct(A,3);h=Zi(h),A=function(H){return P(I[H],H,I)}}var O=d(h,A,b);return O>-1?I[P?h[O]:O]:e}}function m$(d){return vd(function(h){var A=h.length,b=A,I=al.prototype.thru;for(d&&h.reverse();b--;){var P=h[b];if(typeof P!="function")throw new ol(i);if(I&&!O&&wS(P)=="wrapper")var O=new al([],!0)}for(b=O?b:A;++b<A;){P=h[b];var H=wS(P),J=H=="wrapper"?RP(P):e;J&&QP(J[0])&&J[1]==(R|C|w|N)&&!J[4].length&&J[9]==1?O=O[wS(J[0])].apply(O,J[3]):O=P.length==1&&QP(P)?O[H]():O.thru(P)}return function(){var de=arguments,fe=de[0];if(O&&de.length==1&&kt(fe))return O.plant(fe).value();for(var Ae=0,Re=A?h[Ae].apply(this,de):fe;++Ae<A;)Re=h[Ae].call(this,Re);return Re}})}function bS(d,h,A,b,I,P,O,H,J,de){var fe=h&R,Ae=h&m,Re=h&y,ze=h&(C|E),ft=h&W,zt=Re?e:HC(d);function ht(){for(var ar=arguments.length,xr=ne(ar),ya=ar;ya--;)xr[ya]=arguments[ya];if(ze)var co=CA(ht),va=HIe(xr,co);if(b&&(xr=u$(xr,b,I,ze)),P&&(xr=d$(xr,P,O,ze)),ar-=va,ze&&ar<de){var Ci=Ff(xr,co);return v$(d,h,bS,ht.placeholder,A,xr,Ci,H,J,de-ar)}var lc=Ae?A:this,_d=Re?lc[d]:d;return ar=xr.length,H?xr=jDe(xr,H):ft&&ar>1&&xr.reverse(),fe&&J<ar&&(xr.length=J),this&&this!==Bi&&this instanceof ht&&(_d=zt||HC(_d)),_d.apply(lc,xr)}return ht}function A$(d,h){return function(A,b){return sDe(A,d,h(b),{})}}function ES(d,h){return function(A,b){var I;if(A===e&&b===e)return h;if(A!==e&&(I=A),b!==e){if(I===e)return b;typeof A=="string"||typeof b=="string"?(A=ma(A),b=ma(b)):(A=r$(A),b=r$(b)),I=d(A,b)}return I}}function IP(d){return vd(function(h){return h=jr(h,kn(ct())),er(function(A){var b=this;return d(h,function(I){return ms(I,b,A)})})})}function _S(d,h){h=h===e?" ":ma(h);var A=h.length;if(A<2)return A?CP(h,d):h;var b=CP(h,cS(d/hA(h)));return fA(h)?Of(sc(b),0,d).join(""):b.slice(0,d)}function kDe(d,h,A,b){var I=h&m,P=HC(d);function O(){for(var H=-1,J=arguments.length,de=-1,fe=b.length,Ae=ne(fe+J),Re=this&&this!==Bi&&this instanceof O?P:d;++de<fe;)Ae[de]=b[de];for(;J--;)Ae[de++]=arguments[++H];return ms(Re,I?A:this,Ae)}return O}function y$(d){return function(h,A,b){return b&&typeof b!="number"&&lo(h,A,b)&&(A=b=e),h=Ed(h),A===e?(A=h,h=0):A=Ed(A),b=b===e?h<A?1:-1:Ed(b),ADe(h,A,b,d)}}function xS(d){return function(h,A){return typeof h=="string"&&typeof A=="string"||(h=dl(h),A=dl(A)),d(h,A)}}function v$(d,h,A,b,I,P,O,H,J,de){var fe=h&C,Ae=fe?O:e,Re=fe?e:O,ze=fe?P:e,ft=fe?e:P;h|=fe?w:B,h&=~(fe?B:w),h&v||(h&=~(m|y));var zt=[d,h,I,ze,Ae,ft,Re,H,J,de],ht=A.apply(e,zt);return QP(d)&&R$(ht,zt),ht.placeholder=b,k$(ht,d,h)}function BP(d){var h=Oi[d];return function(A,b){if(A=dl(A),b=b==null?0:Ns(Gt(b),292),b&&k9(A)){var I=(Zr(A)+"e").split("e"),P=h(I[0]+"e"+(+I[1]+b));return I=(Zr(P)+"e").split("e"),+(I[0]+"e"+(+I[1]-b))}return h(A)}}var MDe=pA&&1/Xw(new pA([,-0]))[1]==se?function(d){return new pA(d)}:JP;function C$(d){return function(h){var A=Ps(h);return A==Ee?iP(h):A==Ii?JIe(h):Ui(h,d(h))}}function yd(d,h,A,b,I,P,O,H){var J=h&y;if(!J&&typeof d!="function")throw new ol(i);var de=b?b.length:0;if(de||(h&=~(w|B),b=I=e),O=O===e?O:qi(Gt(O),0),H=H===e?H:Gt(H),de-=I?I.length:0,h&B){var fe=b,Ae=I;b=I=e}var Re=J?e:RP(d),ze=[d,h,A,b,I,fe,Ae,P,O,H];if(Re&&KDe(ze,Re),d=ze[0],h=ze[1],A=ze[2],b=ze[3],I=ze[4],H=ze[9]=ze[9]===e?J?0:d.length:qi(ze[9]-de,0),!H&&h&(C|E)&&(h&=~(C|E)),!h||h==m)var ft=TDe(d,h,A);else h==C||h==E?ft=RDe(d,h,H):(h==w||h==(m|w))&&!I.length?ft=kDe(d,h,A,b):ft=bS.apply(e,ze);var zt=Re?e$:R$;return k$(zt(ft,ze),d,h)}function b$(d,h,A,b){return d===e||ac(d,gA[A])&&!cn.call(b,A)?h:d}function E$(d,h,A,b,I,P){return Yn(d)&&Yn(h)&&(P.set(h,d),AS(d,h,e,E$,P),P.delete(h)),d}function FDe(d){return $C(d)?e:d}function _$(d,h,A,b,I,P){var O=A&p,H=d.length,J=h.length;if(H!=J&&!(O&&J>H))return!1;var de=P.get(d),fe=P.get(h);if(de&&fe)return de==h&&fe==d;var Ae=-1,Re=!0,ze=A&g?new Qg:e;for(P.set(d,h),P.set(h,d);++Ae<H;){var ft=d[Ae],zt=h[Ae];if(b)var ht=O?b(zt,ft,Ae,h,d,P):b(ft,zt,Ae,d,h,P);if(ht!==e){if(ht)continue;Re=!1;break}if(ze){if(!kg(h,function(ar,xr){if(!No(ze,xr)&&(ft===ar||I(ft,ar,A,b,P)))return ze.push(xr)})){Re=!1;break}}else if(!(ft===zt||I(ft,zt,A,b,P))){Re=!1;break}}return P.delete(d),P.delete(h),Re}function QDe(d,h,A,b,I,P,O){switch(A){case fa:if(d.byteLength!=h.byteLength||d.byteOffset!=h.byteOffset)return!1;d=d.buffer,h=h.buffer;case ji:return!(d.byteLength!=h.byteLength||!P(new sS(d),new sS(h)));case sr:case Hr:case Ur:return ac(+d,+h);case ln:return d.name==h.name&&d.message==h.message;case Dn:case no:return d==h+"";case Ee:var H=iP;case Ii:var J=b&p;if(H||(H=Xw),d.size!=h.size&&!J)return!1;var de=O.get(d);if(de)return de==h;b|=g,O.set(d,h);var fe=_$(H(d),H(h),b,I,P,O);return O.delete(d),fe;case od:if(PC)return PC.call(d)==PC.call(h)}return!1}function NDe(d,h,A,b,I,P){var O=A&p,H=DP(d),J=H.length,de=DP(h),fe=de.length;if(J!=fe&&!O)return!1;for(var Ae=J;Ae--;){var Re=H[Ae];if(!(O?Re in h:cn.call(h,Re)))return!1}var ze=P.get(d),ft=P.get(h);if(ze&&ft)return ze==h&&ft==d;var zt=!0;P.set(d,h),P.set(h,d);for(var ht=O;++Ae<J;){Re=H[Ae];var ar=d[Re],xr=h[Re];if(b)var ya=O?b(xr,ar,Re,h,d,P):b(ar,xr,Re,d,h,P);if(!(ya===e?ar===xr||I(ar,xr,A,b,P):ya)){zt=!1;break}ht||(ht=Re=="constructor")}if(zt&&!ht){var co=d.constructor,va=h.constructor;co!=va&&"constructor"in d&&"constructor"in h&&!(typeof co=="function"&&co instanceof co&&typeof va=="function"&&va instanceof va)&&(zt=!1)}return P.delete(d),P.delete(h),zt}function vd(d){return PP(D$(d,e,L$),d+"")}function DP(d){return H9(d,Zi,MP)}function TP(d){return H9(d,Uo,x$)}var RP=dS?function(d){return dS.get(d)}:JP;function wS(d){for(var h=d.name+"",A=mA[h],b=cn.call(mA,h)?A.length:0;b--;){var I=A[b],P=I.func;if(P==null||P==d)return I.name}return h}function CA(d){var h=cn.call(F,"placeholder")?F:d;return h.placeholder}function ct(){var d=F.iteratee||KP;return d=d===KP?$9:d,arguments.length?d(arguments[0],arguments[1]):d}function SS(d,h){var A=d.__data__;return WDe(h)?A[typeof h=="string"?"string":"hash"]:A.map}function kP(d){for(var h=Zi(d),A=h.length;A--;){var b=h[A],I=d[b];h[A]=[b,I,I$(I)]}return h}function Lg(d,h){var A=YIe(d,h);return G9(A)?A:e}function PDe(d){var h=cn.call(d,Mg),A=d[Mg];try{d[Mg]=e;var b=!0}catch{}var I=nS.call(d);return b&&(h?d[Mg]=A:delete d[Mg]),I}var MP=oP?function(d){return d==null?[]:(d=An(d),sl(oP(d),function(h){return T9.call(d,h)}))}:jP,x$=oP?function(d){for(var h=[];d;)so(h,MP(d)),d=oS(d);return h}:jP,Ps=ao;(aP&&Ps(new aP(new ArrayBuffer(1)))!=fa||FC&&Ps(new FC)!=Ee||lP&&Ps(lP.resolve())!=_t||pA&&Ps(new pA)!=Ii||QC&&Ps(new QC)!=or)&&(Ps=function(d){var h=ao(d),A=h==be?d.constructor:e,b=A?Ug(A):"";if(b)switch(b){case vBe:return fa;case CBe:return Ee;case bBe:return _t;case EBe:return Ii;case _Be:return or}return h});function LDe(d,h,A){for(var b=-1,I=A.length;++b<I;){var P=A[b],O=P.size;switch(P.type){case"drop":d+=O;break;case"dropRight":h-=O;break;case"take":h=Ns(h,d+O);break;case"takeRight":d=qi(d,h-O);break}}return{start:d,end:h}}function UDe(d){var h=d.match(je);return h?h[1].split(Xt):[]}function w$(d,h,A){h=Uf(h,d);for(var b=-1,I=h.length,P=!1;++b<I;){var O=ou(h[b]);if(!(P=d!=null&&A(d,O)))break;d=d[O]}return P||++b!=I?P:(I=d==null?0:d.length,!!I&&MS(I)&&Cd(O,I)&&(kt(d)||Og(d)))}function ODe(d){var h=d.length,A=new d.constructor(h);return h&&typeof d[0]=="string"&&cn.call(d,"index")&&(A.index=d.index,A.input=d.input),A}function S$(d){return typeof d.constructor=="function"&&!WC(d)?AA(oS(d)):{}}function qDe(d,h,A){var b=d.constructor;switch(h){case ji:return SP(d);case sr:case Hr:return new b(+d);case fa:return xDe(d,A);case ad:case ld:case hC:case ha:case gC:case pC:case _r:case It:case Tn:return l$(d,A);case Ee:return new b;case Ur:case no:return new b(d);case Dn:return wDe(d);case Ii:return new b;case od:return SDe(d)}}function VDe(d,h){var A=h.length;if(!A)return d;var b=A-1;return h[b]=(A>1?"& ":"")+h[b],h=h.join(A>2?", ":" "),d.replace(cd,`{
/* [wrapped with `+h+`] */
`)}function HDe(d){return kt(d)||Og(d)||!!(R9&&d&&d[R9])}function Cd(d,h){var A=typeof d;return h=h??z,!!h&&(A=="number"||A!="symbol"&&V2.test(d))&&d>-1&&d%1==0&&d<h}function lo(d,h,A){if(!Yn(A))return!1;var b=typeof h;return(b=="number"?Lo(A)&&Cd(h,A.length):b=="string"&&h in A)?ac(A[h],d):!1}function FP(d,h){if(kt(d))return!1;var A=typeof d;return A=="number"||A=="symbol"||A=="boolean"||d==null||Aa(d)?!0:P2.test(d)||!tA.test(d)||h!=null&&d in An(h)}function WDe(d){var h=typeof d;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?d!=="__proto__":d===null}function QP(d){var h=wS(d),A=F[h];if(typeof A!="function"||!(h in mr.prototype))return!1;if(d===A)return!0;var b=RP(A);return!!b&&d===b[0]}function GDe(d){return!!I9&&I9 in d}var $De=tS?bd:ZP;function WC(d){var h=d&&d.constructor,A=typeof h=="function"&&h.prototype||gA;return d===A}function I$(d){return d===d&&!Yn(d)}function B$(d,h){return function(A){return A==null?!1:A[d]===h&&(h!==e||d in An(A))}}function YDe(d){var h=RS(d,function(b){return A.size===a&&A.clear(),b}),A=h.cache;return h}function KDe(d,h){var A=d[1],b=h[1],I=A|b,P=I<(m|y|R),O=b==R&&A==C||b==R&&A==N&&d[7].length<=h[8]||b==(R|N)&&h[7].length<=h[8]&&A==C;if(!(P||O))return d;b&m&&(d[2]=h[2],I|=A&m?0:v);var H=h[3];if(H){var J=d[3];d[3]=J?u$(J,H,h[4]):H,d[4]=J?Ff(d[3],l):h[4]}return H=h[5],H&&(J=d[5],d[5]=J?d$(J,H,h[6]):H,d[6]=J?Ff(d[5],l):h[6]),H=h[7],H&&(d[7]=H),b&R&&(d[8]=d[8]==null?h[8]:Ns(d[8],h[8])),d[9]==null&&(d[9]=h[9]),d[0]=h[0],d[1]=I,d}function zDe(d){var h=[];if(d!=null)for(var A in An(d))h.push(A);return h}function JDe(d){return nS.call(d)}function D$(d,h,A){return h=qi(h===e?d.length-1:h,0),function(){for(var b=arguments,I=-1,P=qi(b.length-h,0),O=ne(P);++I<P;)O[I]=b[h+I];I=-1;for(var H=ne(h+1);++I<h;)H[I]=b[I];return H[h]=A(O),ms(d,this,H)}}function T$(d,h){return h.length<2?d:Pg(d,cl(h,0,-1))}function jDe(d,h){for(var A=d.length,b=Ns(h.length,A),I=Po(d);b--;){var P=h[b];d[b]=Cd(P,A)?I[P]:e}return d}function NP(d,h){if(!(h==="constructor"&&typeof d[h]=="function")&&h!="__proto__")return d[h]}var R$=M$(e$),GC=fBe||function(d,h){return Bi.setTimeout(d,h)},PP=M$(CDe);function k$(d,h,A){var b=h+"";return PP(d,VDe(b,ZDe(UDe(b),A)))}function M$(d){var h=0,A=0;return function(){var b=mBe(),I=U-(b-A);if(A=b,I>0){if(++h>=Y)return arguments[0]}else h=0;return d.apply(e,arguments)}}function IS(d,h){var A=-1,b=d.length,I=b-1;for(h=h===e?b:h;++A<h;){var P=vP(A,I),O=d[P];d[P]=d[A],d[A]=O}return d.length=h,d}var F$=YDe(function(d){var h=[];return d.charCodeAt(0)===46&&h.push(""),d.replace(AC,function(A,b,I,P){h.push(I?P.replace(tu,"$1"):b||A)}),h});function ou(d){if(typeof d=="string"||Aa(d))return d;var h=d+"";return h=="0"&&1/d==-se?"-0":h}function Ug(d){if(d!=null){try{return rS.call(d)}catch{}try{return d+""}catch{}}return""}function ZDe(d,h){return As(Zt,function(A){var b="_."+A[0];h&A[1]&&!hd(d,b)&&d.push(b)}),d.sort()}function Q$(d){if(d instanceof mr)return d.clone();var h=new al(d.__wrapped__,d.__chain__);return h.__actions__=Po(d.__actions__),h.__index__=d.__index__,h.__values__=d.__values__,h}function XDe(d,h,A){(A?lo(d,h,A):h===e)?h=1:h=qi(Gt(h),0);var b=d==null?0:d.length;if(!b||h<1)return[];for(var I=0,P=0,O=ne(cS(b/h));I<b;)O[P++]=cl(d,I,I+=h);return O}function eTe(d){for(var h=-1,A=d==null?0:d.length,b=0,I=[];++h<A;){var P=d[h];P&&(I[b++]=P)}return I}function tTe(){var d=arguments.length;if(!d)return[];for(var h=ne(d-1),A=arguments[0],b=d;b--;)h[b-1]=arguments[b];return so(kt(A)?Po(A):[A],ys(h,1))}var rTe=er(function(d,h){return vi(d)?UC(d,ys(h,1,vi,!0)):[]}),nTe=er(function(d,h){var A=ul(h);return vi(A)&&(A=e),vi(d)?UC(d,ys(h,1,vi,!0),ct(A,2)):[]}),iTe=er(function(d,h){var A=ul(h);return vi(A)&&(A=e),vi(d)?UC(d,ys(h,1,vi,!0),e,A):[]});function sTe(d,h,A){var b=d==null?0:d.length;return b?(h=A||h===e?1:Gt(h),cl(d,h<0?0:h,b)):[]}function oTe(d,h,A){var b=d==null?0:d.length;return b?(h=A||h===e?1:Gt(h),h=b-h,cl(d,0,h<0?0:h)):[]}function aTe(d,h){return d&&d.length?vS(d,ct(h,3),!0,!0):[]}function lTe(d,h){return d&&d.length?vS(d,ct(h,3),!0):[]}function cTe(d,h,A,b){var I=d==null?0:d.length;return I?(A&&typeof A!="number"&&lo(d,h,A)&&(A=0,b=I),tDe(d,h,A,b)):[]}function N$(d,h,A){var b=d==null?0:d.length;if(!b)return-1;var I=A==null?0:Gt(A);return I<0&&(I=qi(b+I,0)),dA(d,ct(h,3),I)}function P$(d,h,A){var b=d==null?0:d.length;if(!b)return-1;var I=b-1;return A!==e&&(I=Gt(A),I=A<0?qi(b+I,0):Ns(I,b-1)),dA(d,ct(h,3),I,!0)}function L$(d){var h=d==null?0:d.length;return h?ys(d,1):[]}function uTe(d){var h=d==null?0:d.length;return h?ys(d,se):[]}function dTe(d,h){var A=d==null?0:d.length;return A?(h=h===e?1:Gt(h),ys(d,h)):[]}function fTe(d){for(var h=-1,A=d==null?0:d.length,b={};++h<A;){var I=d[h];b[I[0]]=I[1]}return b}function U$(d){return d&&d.length?d[0]:e}function hTe(d,h,A){var b=d==null?0:d.length;if(!b)return-1;var I=A==null?0:Gt(A);return I<0&&(I=qi(b+I,0)),gd(d,h,I)}function gTe(d){var h=d==null?0:d.length;return h?cl(d,0,-1):[]}var pTe=er(function(d){var h=jr(d,xP);return h.length&&h[0]===d[0]?gP(h):[]}),mTe=er(function(d){var h=ul(d),A=jr(d,xP);return h===ul(A)?h=e:A.pop(),A.length&&A[0]===d[0]?gP(A,ct(h,2)):[]}),ATe=er(function(d){var h=ul(d),A=jr(d,xP);return h=typeof h=="function"?h:e,h&&A.pop(),A.length&&A[0]===d[0]?gP(A,e,h):[]});function yTe(d,h){return d==null?"":gBe.call(d,h)}function ul(d){var h=d==null?0:d.length;return h?d[h-1]:e}function vTe(d,h,A){var b=d==null?0:d.length;if(!b)return-1;var I=b;return A!==e&&(I=Gt(A),I=I<0?qi(b+I,0):Ns(I,b-1)),h===h?ZIe(d,h,I):dA(d,S,I,!0)}function CTe(d,h){return d&&d.length?J9(d,Gt(h)):e}var bTe=er(O$);function O$(d,h){return d&&d.length&&h&&h.length?yP(d,h):d}function ETe(d,h,A){return d&&d.length&&h&&h.length?yP(d,h,ct(A,2)):d}function _Te(d,h,A){return d&&d.length&&h&&h.length?yP(d,h,e,A):d}var xTe=vd(function(d,h){var A=d==null?0:d.length,b=uP(d,h);return X9(d,jr(h,function(I){return Cd(I,A)?+I:I}).sort(c$)),b});function wTe(d,h){var A=[];if(!(d&&d.length))return A;var b=-1,I=[],P=d.length;for(h=ct(h,3);++b<P;){var O=d[b];h(O,b,d)&&(A.push(O),I.push(b))}return X9(d,I),A}function LP(d){return d==null?d:yBe.call(d)}function STe(d,h,A){var b=d==null?0:d.length;return b?(A&&typeof A!="number"&&lo(d,h,A)?(h=0,A=b):(h=h==null?0:Gt(h),A=A===e?b:Gt(A)),cl(d,h,A)):[]}function ITe(d,h){return yS(d,h)}function BTe(d,h,A){return bP(d,h,ct(A,2))}function DTe(d,h){var A=d==null?0:d.length;if(A){var b=yS(d,h);if(b<A&&ac(d[b],h))return b}return-1}function TTe(d,h){return yS(d,h,!0)}function RTe(d,h,A){return bP(d,h,ct(A,2),!0)}function kTe(d,h){var A=d==null?0:d.length;if(A){var b=yS(d,h,!0)-1;if(ac(d[b],h))return b}return-1}function MTe(d){return d&&d.length?t$(d):[]}function FTe(d,h){return d&&d.length?t$(d,ct(h,2)):[]}function QTe(d){var h=d==null?0:d.length;return h?cl(d,1,h):[]}function NTe(d,h,A){return d&&d.length?(h=A||h===e?1:Gt(h),cl(d,0,h<0?0:h)):[]}function PTe(d,h,A){var b=d==null?0:d.length;return b?(h=A||h===e?1:Gt(h),h=b-h,cl(d,h<0?0:h,b)):[]}function LTe(d,h){return d&&d.length?vS(d,ct(h,3),!1,!0):[]}function UTe(d,h){return d&&d.length?vS(d,ct(h,3)):[]}var OTe=er(function(d){return Lf(ys(d,1,vi,!0))}),qTe=er(function(d){var h=ul(d);return vi(h)&&(h=e),Lf(ys(d,1,vi,!0),ct(h,2))}),VTe=er(function(d){var h=ul(d);return h=typeof h=="function"?h:e,Lf(ys(d,1,vi,!0),e,h)});function HTe(d){return d&&d.length?Lf(d):[]}function WTe(d,h){return d&&d.length?Lf(d,ct(h,2)):[]}function GTe(d,h){return h=typeof h=="function"?h:e,d&&d.length?Lf(d,e,h):[]}function UP(d){if(!(d&&d.length))return[];var h=0;return d=sl(d,function(A){if(vi(A))return h=qi(A.length,h),!0}),mn(h,function(A){return jr(d,re(A))})}function q$(d,h){if(!(d&&d.length))return[];var A=UP(d);return h==null?A:jr(A,function(b){return ms(h,e,b)})}var $Te=er(function(d,h){return vi(d)?UC(d,h):[]}),YTe=er(function(d){return _P(sl(d,vi))}),KTe=er(function(d){var h=ul(d);return vi(h)&&(h=e),_P(sl(d,vi),ct(h,2))}),zTe=er(function(d){var h=ul(d);return h=typeof h=="function"?h:e,_P(sl(d,vi),e,h)}),JTe=er(UP);function jTe(d,h){return s$(d||[],h||[],LC)}function ZTe(d,h){return s$(d||[],h||[],VC)}var XTe=er(function(d){var h=d.length,A=h>1?d[h-1]:e;return A=typeof A=="function"?(d.pop(),A):e,q$(d,A)});function V$(d){var h=F(d);return h.__chain__=!0,h}function eRe(d,h){return h(d),d}function BS(d,h){return h(d)}var tRe=vd(function(d){var h=d.length,A=h?d[0]:0,b=this.__wrapped__,I=function(P){return uP(P,d)};return h>1||this.__actions__.length||!(b instanceof mr)||!Cd(A)?this.thru(I):(b=b.slice(A,+A+(h?1:0)),b.__actions__.push({func:BS,args:[I],thisArg:e}),new al(b,this.__chain__).thru(function(P){return h&&!P.length&&P.push(e),P}))});function rRe(){return V$(this)}function nRe(){return new al(this.value(),this.__chain__)}function iRe(){this.__values__===e&&(this.__values__=rY(this.value()));var d=this.__index__>=this.__values__.length,h=d?e:this.__values__[this.__index__++];return{done:d,value:h}}function sRe(){return this}function oRe(d){for(var h,A=this;A instanceof hS;){var b=Q$(A);b.__index__=0,b.__values__=e,h?I.__wrapped__=b:h=b;var I=b;A=A.__wrapped__}return I.__wrapped__=d,h}function aRe(){var d=this.__wrapped__;if(d instanceof mr){var h=d;return this.__actions__.length&&(h=new mr(this)),h=h.reverse(),h.__actions__.push({func:BS,args:[LP],thisArg:e}),new al(h,this.__chain__)}return this.thru(LP)}function lRe(){return i$(this.__wrapped__,this.__actions__)}var cRe=CS(function(d,h,A){cn.call(d,A)?++d[A]:Ad(d,A,1)});function uRe(d,h,A){var b=kt(d)?zw:eDe;return A&&lo(d,h,A)&&(h=e),b(d,ct(h,3))}function dRe(d,h){var A=kt(d)?sl:q9;return A(d,ct(h,3))}var fRe=p$(N$),hRe=p$(P$);function gRe(d,h){return ys(DS(d,h),1)}function pRe(d,h){return ys(DS(d,h),se)}function mRe(d,h,A){return A=A===e?1:Gt(A),ys(DS(d,h),A)}function H$(d,h){var A=kt(d)?As:Pf;return A(d,ct(h,3))}function W$(d,h){var A=kt(d)?Qo:O9;return A(d,ct(h,3))}var ARe=CS(function(d,h,A){cn.call(d,A)?d[A].push(h):Ad(d,A,[h])});function yRe(d,h,A,b){d=Lo(d)?d:EA(d),A=A&&!b?Gt(A):0;var I=d.length;return A<0&&(A=qi(I+A,0)),FS(d)?A<=I&&d.indexOf(h,A)>-1:!!I&&gd(d,h,A)>-1}var vRe=er(function(d,h,A){var b=-1,I=typeof h=="function",P=Lo(d)?ne(d.length):[];return Pf(d,function(O){P[++b]=I?ms(h,O,A):OC(O,h,A)}),P}),CRe=CS(function(d,h,A){Ad(d,A,h)});function DS(d,h){var A=kt(d)?jr:Y9;return A(d,ct(h,3))}function bRe(d,h,A,b){return d==null?[]:(kt(h)||(h=h==null?[]:[h]),A=b?e:A,kt(A)||(A=A==null?[]:[A]),j9(d,h,A))}var ERe=CS(function(d,h,A){d[A?0:1].push(h)},function(){return[[],[]]});function _Re(d,h,A){var b=kt(d)?pa:De,I=arguments.length<3;return b(d,ct(h,4),A,I,Pf)}function xRe(d,h,A){var b=kt(d)?uA:De,I=arguments.length<3;return b(d,ct(h,4),A,I,O9)}function wRe(d,h){var A=kt(d)?sl:q9;return A(d,kS(ct(h,3)))}function SRe(d){var h=kt(d)?N9:yDe;return h(d)}function IRe(d,h,A){(A?lo(d,h,A):h===e)?h=1:h=Gt(h);var b=kt(d)?zBe:vDe;return b(d,h)}function BRe(d){var h=kt(d)?JBe:bDe;return h(d)}function DRe(d){if(d==null)return 0;if(Lo(d))return FS(d)?hA(d):d.length;var h=Ps(d);return h==Ee||h==Ii?d.size:mP(d).length}function TRe(d,h,A){var b=kt(d)?kg:EDe;return A&&lo(d,h,A)&&(h=e),b(d,ct(h,3))}var RRe=er(function(d,h){if(d==null)return[];var A=h.length;return A>1&&lo(d,h[0],h[1])?h=[]:A>2&&lo(h[0],h[1],h[2])&&(h=[h[0]]),j9(d,ys(h,1),[])}),TS=dBe||function(){return Bi.Date.now()};function kRe(d,h){if(typeof h!="function")throw new ol(i);return d=Gt(d),function(){if(--d<1)return h.apply(this,arguments)}}function G$(d,h,A){return h=A?e:h,h=d&&h==null?d.length:h,yd(d,R,e,e,e,e,h)}function $$(d,h){var A;if(typeof h!="function")throw new ol(i);return d=Gt(d),function(){return--d>0&&(A=h.apply(this,arguments)),d<=1&&(h=e),A}}var OP=er(function(d,h,A){var b=m;if(A.length){var I=Ff(A,CA(OP));b|=w}return yd(d,b,h,A,I)}),Y$=er(function(d,h,A){var b=m|y;if(A.length){var I=Ff(A,CA(Y$));b|=w}return yd(h,b,d,A,I)});function K$(d,h,A){h=A?e:h;var b=yd(d,C,e,e,e,e,e,h);return b.placeholder=K$.placeholder,b}function z$(d,h,A){h=A?e:h;var b=yd(d,E,e,e,e,e,e,h);return b.placeholder=z$.placeholder,b}function J$(d,h,A){var b,I,P,O,H,J,de=0,fe=!1,Ae=!1,Re=!0;if(typeof d!="function")throw new ol(i);h=dl(h)||0,Yn(A)&&(fe=!!A.leading,Ae="maxWait"in A,P=Ae?qi(dl(A.maxWait)||0,h):P,Re="trailing"in A?!!A.trailing:Re);function ze(Ci){var lc=b,_d=I;return b=I=e,de=Ci,O=d.apply(_d,lc),O}function ft(Ci){return de=Ci,H=GC(ar,h),fe?ze(Ci):O}function zt(Ci){var lc=Ci-J,_d=Ci-de,pY=h-lc;return Ae?Ns(pY,P-_d):pY}function ht(Ci){var lc=Ci-J,_d=Ci-de;return J===e||lc>=h||lc<0||Ae&&_d>=P}function ar(){var Ci=TS();if(ht(Ci))return xr(Ci);H=GC(ar,zt(Ci))}function xr(Ci){return H=e,Re&&b?ze(Ci):(b=I=e,O)}function ya(){H!==e&&o$(H),de=0,b=J=I=H=e}function co(){return H===e?O:xr(TS())}function va(){var Ci=TS(),lc=ht(Ci);if(b=arguments,I=this,J=Ci,lc){if(H===e)return ft(J);if(Ae)return o$(H),H=GC(ar,h),ze(J)}return H===e&&(H=GC(ar,h)),O}return va.cancel=ya,va.flush=co,va}var MRe=er(function(d,h){return U9(d,1,h)}),FRe=er(function(d,h,A){return U9(d,dl(h)||0,A)});function QRe(d){return yd(d,W)}function RS(d,h){if(typeof d!="function"||h!=null&&typeof h!="function")throw new ol(i);var A=function(){var b=arguments,I=h?h.apply(this,b):b[0],P=A.cache;if(P.has(I))return P.get(I);var O=d.apply(this,b);return A.cache=P.set(I,O)||P,O};return A.cache=new(RS.Cache||md),A}RS.Cache=md;function kS(d){if(typeof d!="function")throw new ol(i);return function(){var h=arguments;switch(h.length){case 0:return!d.call(this);case 1:return!d.call(this,h[0]);case 2:return!d.call(this,h[0],h[1]);case 3:return!d.call(this,h[0],h[1],h[2])}return!d.apply(this,h)}}function NRe(d){return $$(2,d)}var PRe=_De(function(d,h){h=h.length==1&&kt(h[0])?jr(h[0],kn(ct())):jr(ys(h,1),kn(ct()));var A=h.length;return er(function(b){for(var I=-1,P=Ns(b.length,A);++I<P;)b[I]=h[I].call(this,b[I]);return ms(d,this,b)})}),qP=er(function(d,h){var A=Ff(h,CA(qP));return yd(d,w,e,h,A)}),j$=er(function(d,h){var A=Ff(h,CA(j$));return yd(d,B,e,h,A)}),LRe=vd(function(d,h){return yd(d,N,e,e,e,h)});function URe(d,h){if(typeof d!="function")throw new ol(i);return h=h===e?h:Gt(h),er(d,h)}function ORe(d,h){if(typeof d!="function")throw new ol(i);return h=h==null?0:qi(Gt(h),0),er(function(A){var b=A[h],I=Of(A,0,h);return b&&so(I,b),ms(d,this,I)})}function qRe(d,h,A){var b=!0,I=!0;if(typeof d!="function")throw new ol(i);return Yn(A)&&(b="leading"in A?!!A.leading:b,I="trailing"in A?!!A.trailing:I),J$(d,h,{leading:b,maxWait:h,trailing:I})}function VRe(d){return G$(d,1)}function HRe(d,h){return qP(wP(h),d)}function WRe(){if(!arguments.length)return[];var d=arguments[0];return kt(d)?d:[d]}function GRe(d){return ll(d,f)}function $Re(d,h){return h=typeof h=="function"?h:e,ll(d,f,h)}function YRe(d){return ll(d,c|f)}function KRe(d,h){return h=typeof h=="function"?h:e,ll(d,c|f,h)}function zRe(d,h){return h==null||L9(d,h,Zi(h))}function ac(d,h){return d===h||d!==d&&h!==h}var JRe=xS(hP),jRe=xS(function(d,h){return d>=h}),Og=W9(function(){return arguments}())?W9:function(d){return ni(d)&&cn.call(d,"callee")&&!T9.call(d,"callee")},kt=ne.isArray,ZRe=nu?kn(nu):oDe;function Lo(d){return d!=null&&MS(d.length)&&!bd(d)}function vi(d){return ni(d)&&Lo(d)}function XRe(d){return d===!0||d===!1||ni(d)&&ao(d)==sr}var qf=hBe||ZP,eke=Kw?kn(Kw):aDe;function tke(d){return ni(d)&&d.nodeType===1&&!$C(d)}function rke(d){if(d==null)return!0;if(Lo(d)&&(kt(d)||typeof d=="string"||typeof d.splice=="function"||qf(d)||bA(d)||Og(d)))return!d.length;var h=Ps(d);if(h==Ee||h==Ii)return!d.size;if(WC(d))return!mP(d).length;for(var A in d)if(cn.call(d,A))return!1;return!0}function nke(d,h){return qC(d,h)}function ike(d,h,A){A=typeof A=="function"?A:e;var b=A?A(d,h):e;return b===e?qC(d,h,e,A):!!b}function VP(d){if(!ni(d))return!1;var h=ao(d);return h==ln||h==Ge||typeof d.message=="string"&&typeof d.name=="string"&&!$C(d)}function ske(d){return typeof d=="number"&&k9(d)}function bd(d){if(!Yn(d))return!1;var h=ao(d);return h==Wr||h==pr||h==wr||h==hn}function Z$(d){return typeof d=="number"&&d==Gt(d)}function MS(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=z}function Yn(d){var h=typeof d;return d!=null&&(h=="object"||h=="function")}function ni(d){return d!=null&&typeof d=="object"}var X$=TC?kn(TC):cDe;function oke(d,h){return d===h||pP(d,h,kP(h))}function ake(d,h,A){return A=typeof A=="function"?A:e,pP(d,h,kP(h),A)}function lke(d){return eY(d)&&d!=+d}function cke(d){if($De(d))throw new Tt(n);return G9(d)}function uke(d){return d===null}function dke(d){return d==null}function eY(d){return typeof d=="number"||ni(d)&&ao(d)==Ur}function $C(d){if(!ni(d)||ao(d)!=be)return!1;var h=oS(d);if(h===null)return!0;var A=cn.call(h,"constructor")&&h.constructor;return typeof A=="function"&&A instanceof A&&rS.call(A)==aBe}var HP=Rg?kn(Rg):uDe;function fke(d){return Z$(d)&&d>=-z&&d<=z}var tY=Rn?kn(Rn):dDe;function FS(d){return typeof d=="string"||!kt(d)&&ni(d)&&ao(d)==no}function Aa(d){return typeof d=="symbol"||ni(d)&&ao(d)==od}var bA=RC?kn(RC):fDe;function hke(d){return d===e}function gke(d){return ni(d)&&Ps(d)==or}function pke(d){return ni(d)&&ao(d)==N2}var mke=xS(AP),Ake=xS(function(d,h){return d<=h});function rY(d){if(!d)return[];if(Lo(d))return FS(d)?sc(d):Po(d);if(MC&&d[MC])return zIe(d[MC]());var h=Ps(d),A=h==Ee?iP:h==Ii?Xw:EA;return A(d)}function Ed(d){if(!d)return d===0?d:0;if(d=dl(d),d===se||d===-se){var h=d<0?-1:1;return h*ie}return d===d?d:0}function Gt(d){var h=Ed(d),A=h%1;return h===h?A?h-A:h:0}function nY(d){return d?Ng(Gt(d),0,dt):0}function dl(d){if(typeof d=="number")return d;if(Aa(d))return Pe;if(Yn(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=Yn(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=oo(d);var A=Sw.test(d);return A||q2.test(d)?rP(d.slice(2),A?2:8):U2.test(d)?Pe:+d}function iY(d){return su(d,Uo(d))}function yke(d){return d?Ng(Gt(d),-z,z):d===0?d:0}function Zr(d){return d==null?"":ma(d)}var vke=yA(function(d,h){if(WC(h)||Lo(h)){su(h,Zi(h),d);return}for(var A in h)cn.call(h,A)&&LC(d,A,h[A])}),sY=yA(function(d,h){su(h,Uo(h),d)}),QS=yA(function(d,h,A,b){su(h,Uo(h),d,b)}),Cke=yA(function(d,h,A,b){su(h,Zi(h),d,b)}),bke=vd(uP);function Eke(d,h){var A=AA(d);return h==null?A:P9(A,h)}var _ke=er(function(d,h){d=An(d);var A=-1,b=h.length,I=b>2?h[2]:e;for(I&&lo(h[0],h[1],I)&&(b=1);++A<b;)for(var P=h[A],O=Uo(P),H=-1,J=O.length;++H<J;){var de=O[H],fe=d[de];(fe===e||ac(fe,gA[de])&&!cn.call(d,de))&&(d[de]=P[de])}return d}),xke=er(function(d){return d.push(e,E$),ms(oY,e,d)});function wke(d,h){return jw(d,ct(h,3),iu)}function Ske(d,h){return jw(d,ct(h,3),fP)}function Ike(d,h){return d==null?d:dP(d,ct(h,3),Uo)}function Bke(d,h){return d==null?d:V9(d,ct(h,3),Uo)}function Dke(d,h){return d&&iu(d,ct(h,3))}function Tke(d,h){return d&&fP(d,ct(h,3))}function Rke(d){return d==null?[]:mS(d,Zi(d))}function kke(d){return d==null?[]:mS(d,Uo(d))}function WP(d,h,A){var b=d==null?e:Pg(d,h);return b===e?A:b}function Mke(d,h){return d!=null&&w$(d,h,rDe)}function GP(d,h){return d!=null&&w$(d,h,nDe)}var Fke=A$(function(d,h,A){h!=null&&typeof h.toString!="function"&&(h=nS.call(h)),d[h]=A},YP(Oo)),Qke=A$(function(d,h,A){h!=null&&typeof h.toString!="function"&&(h=nS.call(h)),cn.call(d,h)?d[h].push(A):d[h]=[A]},ct),Nke=er(OC);function Zi(d){return Lo(d)?Q9(d):mP(d)}function Uo(d){return Lo(d)?Q9(d,!0):hDe(d)}function Pke(d,h){var A={};return h=ct(h,3),iu(d,function(b,I,P){Ad(A,h(b,I,P),b)}),A}function Lke(d,h){var A={};return h=ct(h,3),iu(d,function(b,I,P){Ad(A,I,h(b,I,P))}),A}var Uke=yA(function(d,h,A){AS(d,h,A)}),oY=yA(function(d,h,A,b){AS(d,h,A,b)}),Oke=vd(function(d,h){var A={};if(d==null)return A;var b=!1;h=jr(h,function(P){return P=Uf(P,d),b||(b=P.length>1),P}),su(d,TP(d),A),b&&(A=ll(A,c|u|f,FDe));for(var I=h.length;I--;)EP(A,h[I]);return A});function qke(d,h){return aY(d,kS(ct(h)))}var Vke=vd(function(d,h){return d==null?{}:pDe(d,h)});function aY(d,h){if(d==null)return{};var A=jr(TP(d),function(b){return[b]});return h=ct(h),Z9(d,A,function(b,I){return h(b,I[0])})}function Hke(d,h,A){h=Uf(h,d);var b=-1,I=h.length;for(I||(I=1,d=e);++b<I;){var P=d==null?e:d[ou(h[b])];P===e&&(b=I,P=A),d=bd(P)?P.call(d):P}return d}function Wke(d,h,A){return d==null?d:VC(d,h,A)}function Gke(d,h,A,b){return b=typeof b=="function"?b:e,d==null?d:VC(d,h,A,b)}var lY=C$(Zi),cY=C$(Uo);function $ke(d,h,A){var b=kt(d),I=b||qf(d)||bA(d);if(h=ct(h,4),A==null){var P=d&&d.constructor;I?A=b?new P:[]:Yn(d)?A=bd(P)?AA(oS(d)):{}:A={}}return(I?As:iu)(d,function(O,H,J){return h(A,O,H,J)}),A}function Yke(d,h){return d==null?!0:EP(d,h)}function Kke(d,h,A){return d==null?d:n$(d,h,wP(A))}function zke(d,h,A,b){return b=typeof b=="function"?b:e,d==null?d:n$(d,h,wP(A),b)}function EA(d){return d==null?[]:ic(d,Zi(d))}function Jke(d){return d==null?[]:ic(d,Uo(d))}function jke(d,h,A){return A===e&&(A=h,h=e),A!==e&&(A=dl(A),A=A===A?A:0),h!==e&&(h=dl(h),h=h===h?h:0),Ng(dl(d),h,A)}function Zke(d,h,A){return h=Ed(h),A===e?(A=h,h=0):A=Ed(A),d=dl(d),iDe(d,h,A)}function Xke(d,h,A){if(A&&typeof A!="boolean"&&lo(d,h,A)&&(h=A=e),A===e&&(typeof h=="boolean"?(A=h,h=e):typeof d=="boolean"&&(A=d,d=e)),d===e&&h===e?(d=0,h=1):(d=Ed(d),h===e?(h=d,d=0):h=Ed(h)),d>h){var b=d;d=h,h=b}if(A||d%1||h%1){var I=M9();return Ns(d+I*(h-d+tP("1e-"+((I+"").length-1))),h)}return vP(d,h)}var eMe=vA(function(d,h,A){return h=h.toLowerCase(),d+(A?uY(h):h)});function uY(d){return $P(Zr(d).toLowerCase())}function dY(d){return d=Zr(d),d&&d.replace(H2,WIe).replace(Z2,"")}function tMe(d,h,A){d=Zr(d),h=ma(h);var b=d.length;A=A===e?b:Ng(Gt(A),0,b);var I=A;return A-=h.length,A>=0&&d.slice(A,I)==h}function rMe(d){return d=Zr(d),d&&mC.test(d)?d.replace(bt,GIe):d}function nMe(d){return d=Zr(d),d&&rA.test(d)?d.replace(Li,"\\$&"):d}var iMe=vA(function(d,h,A){return d+(A?"-":"")+h.toLowerCase()}),sMe=vA(function(d,h,A){return d+(A?" ":"")+h.toLowerCase()}),oMe=g$("toLowerCase");function aMe(d,h,A){d=Zr(d),h=Gt(h);var b=h?hA(d):0;if(!h||b>=h)return d;var I=(h-b)/2;return _S(uS(I),A)+d+_S(cS(I),A)}function lMe(d,h,A){d=Zr(d),h=Gt(h);var b=h?hA(d):0;return h&&b<h?d+_S(h-b,A):d}function cMe(d,h,A){d=Zr(d),h=Gt(h);var b=h?hA(d):0;return h&&b<h?_S(h-b,A)+d:d}function uMe(d,h,A){return A||h==null?h=0:h&&(h=+h),ABe(Zr(d).replace(yC,""),h||0)}function dMe(d,h,A){return(A?lo(d,h,A):h===e)?h=1:h=Gt(h),CP(Zr(d),h)}function fMe(){var d=arguments,h=Zr(d[0]);return d.length<3?h:h.replace(d[1],d[2])}var hMe=vA(function(d,h,A){return d+(A?"_":"")+h.toLowerCase()});function gMe(d,h,A){return A&&typeof A!="number"&&lo(d,h,A)&&(h=A=e),A=A===e?dt:A>>>0,A?(d=Zr(d),d&&(typeof h=="string"||h!=null&&!HP(h))&&(h=ma(h),!h&&fA(d))?Of(sc(d),0,A):d.split(h,A)):[]}var pMe=vA(function(d,h,A){return d+(A?" ":"")+$P(h)});function mMe(d,h,A){return d=Zr(d),A=A==null?0:Ng(Gt(A),0,d.length),h=ma(h),d.slice(A,A+h.length)==h}function AMe(d,h,A){var b=F.templateSettings;A&&lo(d,h,A)&&(h=e),d=Zr(d),h=QS({},h,b,b$);var I=QS({},h.imports,b.imports,b$),P=Zi(I),O=ic(I,P),H,J,de=0,fe=h.interpolate||nA,Ae="__p += '",Re=sP((h.escape||nA).source+"|"+fe.source+"|"+(fe===Df?vC:nA).source+"|"+(h.evaluate||nA).source+"|$","g"),ze="//# sourceURL="+(cn.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eP+"]")+`
`;d.replace(Re,function(ht,ar,xr,ya,co,va){return xr||(xr=ya),Ae+=d.slice(de,va).replace(W2,$Ie),ar&&(H=!0,Ae+=`' +
__e(`+ar+`) +
'`),co&&(J=!0,Ae+=`';
`+co+`;
__p += '`),xr&&(Ae+=`' +
((__t = (`+xr+`)) == null ? '' : __t) +
'`),de=va+ht.length,ht}),Ae+=`';
`;var ft=cn.call(h,"variable")&&h.variable;if(!ft)Ae=`with (obj) {
`+Ae+`
}
`;else if(Dg.test(ft))throw new Tt(s);Ae=(J?Ae.replace(rl,""):Ae).replace(nl,"$1").replace(Bg,"$1;"),Ae="function("+(ft||"obj")+`) {
`+(ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(J?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ae+`return __p
}`;var zt=hY(function(){return $r(P,ze+"return "+Ae).apply(e,O)});if(zt.source=Ae,VP(zt))throw zt;return zt}function yMe(d){return Zr(d).toLowerCase()}function vMe(d){return Zr(d).toUpperCase()}function CMe(d,h,A){if(d=Zr(d),d&&(A||h===e))return oo(d);if(!d||!(h=ma(h)))return d;var b=sc(d),I=sc(h),P=Mf(b,I),O=Zw(b,I)+1;return Of(b,P,O).join("")}function bMe(d,h,A){if(d=Zr(d),d&&(A||h===e))return d.slice(0,S9(d)+1);if(!d||!(h=ma(h)))return d;var b=sc(d),I=Zw(b,sc(h))+1;return Of(b,0,I).join("")}function EMe(d,h,A){if(d=Zr(d),d&&(A||h===e))return d.replace(yC,"");if(!d||!(h=ma(h)))return d;var b=sc(d),I=Mf(b,sc(h));return Of(b,I).join("")}function _Me(d,h){var A=Z,b=te;if(Yn(h)){var I="separator"in h?h.separator:I;A="length"in h?Gt(h.length):A,b="omission"in h?ma(h.omission):b}d=Zr(d);var P=d.length;if(fA(d)){var O=sc(d);P=O.length}if(A>=P)return d;var H=A-hA(b);if(H<1)return b;var J=O?Of(O,0,H).join(""):d.slice(0,H);if(I===e)return J+b;if(O&&(H+=J.length-H),HP(I)){if(d.slice(H).search(I)){var de,fe=J;for(I.global||(I=sP(I.source,Zr(ww.exec(I))+"g")),I.lastIndex=0;de=I.exec(fe);)var Ae=de.index;J=J.slice(0,Ae===e?H:Ae)}}else if(d.indexOf(ma(I),H)!=H){var Re=J.lastIndexOf(I);Re>-1&&(J=J.slice(0,Re))}return J+b}function xMe(d){return d=Zr(d),d&&Xm.test(d)?d.replace(tc,XIe):d}var wMe=vA(function(d,h,A){return d+(A?" ":"")+h.toUpperCase()}),$P=g$("toUpperCase");function fY(d,h,A){return d=Zr(d),h=A?e:h,h===e?KIe(d)?rBe(d):nP(d):d.match(h)||[]}var hY=er(function(d,h){try{return ms(d,e,h)}catch(A){return VP(A)?A:new Tt(A)}}),SMe=vd(function(d,h){return As(h,function(A){A=ou(A),Ad(d,A,OP(d[A],d))}),d});function IMe(d){var h=d==null?0:d.length,A=ct();return d=h?jr(d,function(b){if(typeof b[1]!="function")throw new ol(i);return[A(b[0]),b[1]]}):[],er(function(b){for(var I=-1;++I<h;){var P=d[I];if(ms(P[0],this,b))return ms(P[1],this,b)}})}function BMe(d){return XBe(ll(d,c))}function YP(d){return function(){return d}}function DMe(d,h){return d==null||d!==d?h:d}var TMe=m$(),RMe=m$(!0);function Oo(d){return d}function KP(d){return $9(typeof d=="function"?d:ll(d,c))}function kMe(d){return K9(ll(d,c))}function MMe(d,h){return z9(d,ll(h,c))}var FMe=er(function(d,h){return function(A){return OC(A,d,h)}}),QMe=er(function(d,h){return function(A){return OC(d,A,h)}});function zP(d,h,A){var b=Zi(h),I=mS(h,b);A==null&&!(Yn(h)&&(I.length||!b.length))&&(A=h,h=d,d=this,I=mS(h,Zi(h)));var P=!(Yn(A)&&"chain"in A)||!!A.chain,O=bd(d);return As(I,function(H){var J=h[H];d[H]=J,O&&(d.prototype[H]=function(){var de=this.__chain__;if(P||de){var fe=d(this.__wrapped__),Ae=fe.__actions__=Po(this.__actions__);return Ae.push({func:J,args:arguments,thisArg:d}),fe.__chain__=de,fe}return J.apply(d,so([this.value()],arguments))})}),d}function NMe(){return Bi._===this&&(Bi._=lBe),this}function JP(){}function PMe(d){return d=Gt(d),er(function(h){return J9(h,d)})}var LMe=IP(jr),UMe=IP(zw),OMe=IP(kg);function gY(d){return FP(d)?re(ou(d)):mDe(d)}function qMe(d){return function(h){return d==null?e:Pg(d,h)}}var VMe=y$(),HMe=y$(!0);function jP(){return[]}function ZP(){return!1}function WMe(){return{}}function GMe(){return""}function $Me(){return!0}function YMe(d,h){if(d=Gt(d),d<1||d>z)return[];var A=dt,b=Ns(d,dt);h=ct(h),d-=dt;for(var I=mn(b,h);++A<d;)h(A);return I}function KMe(d){return kt(d)?jr(d,ou):Aa(d)?[d]:Po(F$(Zr(d)))}function zMe(d){var h=++oBe;return Zr(d)+h}var JMe=ES(function(d,h){return d+h},0),jMe=BP("ceil"),ZMe=ES(function(d,h){return d/h},1),XMe=BP("floor");function eFe(d){return d&&d.length?pS(d,Oo,hP):e}function tFe(d,h){return d&&d.length?pS(d,ct(h,2),hP):e}function rFe(d){return L(d,Oo)}function nFe(d,h){return L(d,ct(h,2))}function iFe(d){return d&&d.length?pS(d,Oo,AP):e}function sFe(d,h){return d&&d.length?pS(d,ct(h,2),AP):e}var oFe=ES(function(d,h){return d*h},1),aFe=BP("round"),lFe=ES(function(d,h){return d-h},0);function cFe(d){return d&&d.length?Wt(d,Oo):0}function uFe(d,h){return d&&d.length?Wt(d,ct(h,2)):0}return F.after=kRe,F.ary=G$,F.assign=vke,F.assignIn=sY,F.assignInWith=QS,F.assignWith=Cke,F.at=bke,F.before=$$,F.bind=OP,F.bindAll=SMe,F.bindKey=Y$,F.castArray=WRe,F.chain=V$,F.chunk=XDe,F.compact=eTe,F.concat=tTe,F.cond=IMe,F.conforms=BMe,F.constant=YP,F.countBy=cRe,F.create=Eke,F.curry=K$,F.curryRight=z$,F.debounce=J$,F.defaults=_ke,F.defaultsDeep=xke,F.defer=MRe,F.delay=FRe,F.difference=rTe,F.differenceBy=nTe,F.differenceWith=iTe,F.drop=sTe,F.dropRight=oTe,F.dropRightWhile=aTe,F.dropWhile=lTe,F.fill=cTe,F.filter=dRe,F.flatMap=gRe,F.flatMapDeep=pRe,F.flatMapDepth=mRe,F.flatten=L$,F.flattenDeep=uTe,F.flattenDepth=dTe,F.flip=QRe,F.flow=TMe,F.flowRight=RMe,F.fromPairs=fTe,F.functions=Rke,F.functionsIn=kke,F.groupBy=ARe,F.initial=gTe,F.intersection=pTe,F.intersectionBy=mTe,F.intersectionWith=ATe,F.invert=Fke,F.invertBy=Qke,F.invokeMap=vRe,F.iteratee=KP,F.keyBy=CRe,F.keys=Zi,F.keysIn=Uo,F.map=DS,F.mapKeys=Pke,F.mapValues=Lke,F.matches=kMe,F.matchesProperty=MMe,F.memoize=RS,F.merge=Uke,F.mergeWith=oY,F.method=FMe,F.methodOf=QMe,F.mixin=zP,F.negate=kS,F.nthArg=PMe,F.omit=Oke,F.omitBy=qke,F.once=NRe,F.orderBy=bRe,F.over=LMe,F.overArgs=PRe,F.overEvery=UMe,F.overSome=OMe,F.partial=qP,F.partialRight=j$,F.partition=ERe,F.pick=Vke,F.pickBy=aY,F.property=gY,F.propertyOf=qMe,F.pull=bTe,F.pullAll=O$,F.pullAllBy=ETe,F.pullAllWith=_Te,F.pullAt=xTe,F.range=VMe,F.rangeRight=HMe,F.rearg=LRe,F.reject=wRe,F.remove=wTe,F.rest=URe,F.reverse=LP,F.sampleSize=IRe,F.set=Wke,F.setWith=Gke,F.shuffle=BRe,F.slice=STe,F.sortBy=RRe,F.sortedUniq=MTe,F.sortedUniqBy=FTe,F.split=gMe,F.spread=ORe,F.tail=QTe,F.take=NTe,F.takeRight=PTe,F.takeRightWhile=LTe,F.takeWhile=UTe,F.tap=eRe,F.throttle=qRe,F.thru=BS,F.toArray=rY,F.toPairs=lY,F.toPairsIn=cY,F.toPath=KMe,F.toPlainObject=iY,F.transform=$ke,F.unary=VRe,F.union=OTe,F.unionBy=qTe,F.unionWith=VTe,F.uniq=HTe,F.uniqBy=WTe,F.uniqWith=GTe,F.unset=Yke,F.unzip=UP,F.unzipWith=q$,F.update=Kke,F.updateWith=zke,F.values=EA,F.valuesIn=Jke,F.without=$Te,F.words=fY,F.wrap=HRe,F.xor=YTe,F.xorBy=KTe,F.xorWith=zTe,F.zip=JTe,F.zipObject=jTe,F.zipObjectDeep=ZTe,F.zipWith=XTe,F.entries=lY,F.entriesIn=cY,F.extend=sY,F.extendWith=QS,zP(F,F),F.add=JMe,F.attempt=hY,F.camelCase=eMe,F.capitalize=uY,F.ceil=jMe,F.clamp=jke,F.clone=GRe,F.cloneDeep=YRe,F.cloneDeepWith=KRe,F.cloneWith=$Re,F.conformsTo=zRe,F.deburr=dY,F.defaultTo=DMe,F.divide=ZMe,F.endsWith=tMe,F.eq=ac,F.escape=rMe,F.escapeRegExp=nMe,F.every=uRe,F.find=fRe,F.findIndex=N$,F.findKey=wke,F.findLast=hRe,F.findLastIndex=P$,F.findLastKey=Ske,F.floor=XMe,F.forEach=H$,F.forEachRight=W$,F.forIn=Ike,F.forInRight=Bke,F.forOwn=Dke,F.forOwnRight=Tke,F.get=WP,F.gt=JRe,F.gte=jRe,F.has=Mke,F.hasIn=GP,F.head=U$,F.identity=Oo,F.includes=yRe,F.indexOf=hTe,F.inRange=Zke,F.invoke=Nke,F.isArguments=Og,F.isArray=kt,F.isArrayBuffer=ZRe,F.isArrayLike=Lo,F.isArrayLikeObject=vi,F.isBoolean=XRe,F.isBuffer=qf,F.isDate=eke,F.isElement=tke,F.isEmpty=rke,F.isEqual=nke,F.isEqualWith=ike,F.isError=VP,F.isFinite=ske,F.isFunction=bd,F.isInteger=Z$,F.isLength=MS,F.isMap=X$,F.isMatch=oke,F.isMatchWith=ake,F.isNaN=lke,F.isNative=cke,F.isNil=dke,F.isNull=uke,F.isNumber=eY,F.isObject=Yn,F.isObjectLike=ni,F.isPlainObject=$C,F.isRegExp=HP,F.isSafeInteger=fke,F.isSet=tY,F.isString=FS,F.isSymbol=Aa,F.isTypedArray=bA,F.isUndefined=hke,F.isWeakMap=gke,F.isWeakSet=pke,F.join=yTe,F.kebabCase=iMe,F.last=ul,F.lastIndexOf=vTe,F.lowerCase=sMe,F.lowerFirst=oMe,F.lt=mke,F.lte=Ake,F.max=eFe,F.maxBy=tFe,F.mean=rFe,F.meanBy=nFe,F.min=iFe,F.minBy=sFe,F.stubArray=jP,F.stubFalse=ZP,F.stubObject=WMe,F.stubString=GMe,F.stubTrue=$Me,F.multiply=oFe,F.nth=CTe,F.noConflict=NMe,F.noop=JP,F.now=TS,F.pad=aMe,F.padEnd=lMe,F.padStart=cMe,F.parseInt=uMe,F.random=Xke,F.reduce=_Re,F.reduceRight=xRe,F.repeat=dMe,F.replace=fMe,F.result=Hke,F.round=aFe,F.runInContext=K,F.sample=SRe,F.size=DRe,F.snakeCase=hMe,F.some=TRe,F.sortedIndex=ITe,F.sortedIndexBy=BTe,F.sortedIndexOf=DTe,F.sortedLastIndex=TTe,F.sortedLastIndexBy=RTe,F.sortedLastIndexOf=kTe,F.startCase=pMe,F.startsWith=mMe,F.subtract=lFe,F.sum=cFe,F.sumBy=uFe,F.template=AMe,F.times=YMe,F.toFinite=Ed,F.toInteger=Gt,F.toLength=nY,F.toLower=yMe,F.toNumber=dl,F.toSafeInteger=yke,F.toString=Zr,F.toUpper=vMe,F.trim=CMe,F.trimEnd=bMe,F.trimStart=EMe,F.truncate=_Me,F.unescape=xMe,F.uniqueId=zMe,F.upperCase=wMe,F.upperFirst=$P,F.each=H$,F.eachRight=W$,F.first=U$,zP(F,function(){var d={};return iu(F,function(h,A){cn.call(F.prototype,A)||(d[A]=h)}),d}(),{chain:!1}),F.VERSION=t,As(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){F[d].placeholder=F}),As(["drop","take"],function(d,h){mr.prototype[d]=function(A){A=A===e?1:qi(Gt(A),0);var b=this.__filtered__&&!h?new mr(this):this.clone();return b.__filtered__?b.__takeCount__=Ns(A,b.__takeCount__):b.__views__.push({size:Ns(A,dt),type:d+(b.__dir__<0?"Right":"")}),b},mr.prototype[d+"Right"]=function(A){return this.reverse()[d](A).reverse()}}),As(["filter","map","takeWhile"],function(d,h){var A=h+1,b=A==ce||A==Q;mr.prototype[d]=function(I){var P=this.clone();return P.__iteratees__.push({iteratee:ct(I,3),type:A}),P.__filtered__=P.__filtered__||b,P}}),As(["head","last"],function(d,h){var A="take"+(h?"Right":"");mr.prototype[d]=function(){return this[A](1).value()[0]}}),As(["initial","tail"],function(d,h){var A="drop"+(h?"":"Right");mr.prototype[d]=function(){return this.__filtered__?new mr(this):this[A](1)}}),mr.prototype.compact=function(){return this.filter(Oo)},mr.prototype.find=function(d){return this.filter(d).head()},mr.prototype.findLast=function(d){return this.reverse().find(d)},mr.prototype.invokeMap=er(function(d,h){return typeof d=="function"?new mr(this):this.map(function(A){return OC(A,d,h)})}),mr.prototype.reject=function(d){return this.filter(kS(ct(d)))},mr.prototype.slice=function(d,h){d=Gt(d);var A=this;return A.__filtered__&&(d>0||h<0)?new mr(A):(d<0?A=A.takeRight(-d):d&&(A=A.drop(d)),h!==e&&(h=Gt(h),A=h<0?A.dropRight(-h):A.take(h-d)),A)},mr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},mr.prototype.toArray=function(){return this.take(dt)},iu(mr.prototype,function(d,h){var A=/^(?:filter|find|map|reject)|While$/.test(h),b=/^(?:head|last)$/.test(h),I=F[b?"take"+(h=="last"?"Right":""):h],P=b||/^find/.test(h);I&&(F.prototype[h]=function(){var O=this.__wrapped__,H=b?[1]:arguments,J=O instanceof mr,de=H[0],fe=J||kt(O),Ae=function(ar){var xr=I.apply(F,so([ar],H));return b&&Re?xr[0]:xr};fe&&A&&typeof de=="function"&&de.length!=1&&(J=fe=!1);var Re=this.__chain__,ze=!!this.__actions__.length,ft=P&&!Re,zt=J&&!ze;if(!P&&fe){O=zt?O:new mr(this);var ht=d.apply(O,H);return ht.__actions__.push({func:BS,args:[Ae],thisArg:e}),new al(ht,Re)}return ft&&zt?d.apply(this,H):(ht=this.thru(Ae),ft?b?ht.value()[0]:ht.value():ht)})}),As(["pop","push","shift","sort","splice","unshift"],function(d){var h=eS[d],A=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",b=/^(?:pop|shift)$/.test(d);F.prototype[d]=function(){var I=arguments;if(b&&!this.__chain__){var P=this.value();return h.apply(kt(P)?P:[],I)}return this[A](function(O){return h.apply(kt(O)?O:[],I)})}}),iu(mr.prototype,function(d,h){var A=F[h];if(A){var b=A.name+"";cn.call(mA,b)||(mA[b]=[]),mA[b].push({name:h,func:A})}}),mA[bS(e,y).name]=[{name:"wrapper",func:e}],mr.prototype.clone=xBe,mr.prototype.reverse=wBe,mr.prototype.value=SBe,F.prototype.at=tRe,F.prototype.chain=rRe,F.prototype.commit=nRe,F.prototype.next=iRe,F.prototype.plant=oRe,F.prototype.reverse=aRe,F.prototype.toJSON=F.prototype.valueOf=F.prototype.value=lRe,F.prototype.first=F.prototype.head,MC&&(F.prototype[MC]=sRe),F},Qf=nBe();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Bi._=Qf,define(function(){return Qf})):fd?((fd.exports=Qf)._=Qf,BC._=Qf):Bi._=Qf}).call(qA)});var $A=_((Fwt,Sz)=>{"use strict";Sz.exports=ap;ap.CAPTURING_PHASE=1;ap.AT_TARGET=2;ap.BUBBLING_PHASE=3;function ap(e,t){if(this.type="",this.target=null,this.currentTarget=null,this.eventPhase=ap.AT_TARGET,this.bubbles=!1,this.cancelable=!1,this.isTrusted=!1,this.defaultPrevented=!1,this.timeStamp=Date.now(),this._propagationStopped=!1,this._immediatePropagationStopped=!1,this._initialized=!0,this._dispatching=!1,e&&(this.type=e),t)for(var r in t)this[r]=t[r]}ap.prototype=Object.create(Object.prototype,{constructor:{value:ap},stopPropagation:{value:function(){this._propagationStopped=!0}},stopImmediatePropagation:{value:function(){this._propagationStopped=!0,this._immediatePropagationStopped=!0}},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0)}},initEvent:{value:function(t,r,n){this._initialized=!0,!this._dispatching&&(this._propagationStopped=!1,this._immediatePropagationStopped=!1,this.defaultPrevented=!1,this.isTrusted=!1,this.target=null,this.type=t,this.bubbles=r,this.cancelable=n)}}})});var VL=_((Qwt,Bz)=>{"use strict";var Iz=$A();Bz.exports=qL;function qL(){Iz.call(this),this.view=null,this.detail=0}qL.prototype=Object.create(Iz.prototype,{constructor:{value:qL},initUIEvent:{value:function(e,t,r,n,i){this.initEvent(e,t,r),this.view=n,this.detail=i}}})});var WL=_((Nwt,Tz)=>{"use strict";var Dz=VL();Tz.exports=HL;function HL(){Dz.call(this),this.screenX=this.screenY=this.clientX=this.clientY=0,this.ctrlKey=this.altKey=this.shiftKey=this.metaKey=!1,this.button=0,this.buttons=1,this.relatedTarget=null}HL.prototype=Object.create(Dz.prototype,{constructor:{value:HL},initMouseEvent:{value:function(e,t,r,n,i,s,o,a,l,c,u,f,p,g,m){switch(this.initEvent(e,t,r,n,i),this.screenX=s,this.screenY=o,this.clientX=a,this.clientY=l,this.ctrlKey=c,this.altKey=u,this.shiftKey=f,this.metaKey=p,this.button=g,g){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2;break;default:this.buttons=0;break}this.relatedTarget=m}},getModifierState:{value:function(e){switch(e){case"Alt":return this.altKey;case"Control":return this.ctrlKey;case"Shift":return this.shiftKey;case"Meta":return this.metaKey;default:return!1}}}})});var QI=_((Pwt,kz)=>{"use strict";kz.exports=FI;var $Ne=1,YNe=3,KNe=4,zNe=5,JNe=7,jNe=8,ZNe=9,XNe=11,e2e=12,t2e=13,r2e=14,n2e=15,i2e=17,s2e=18,o2e=19,a2e=20,l2e=21,c2e=22,u2e=23,d2e=24,f2e=25,h2e=[null,"INDEX_SIZE_ERR",null,"HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR",null,"NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR",null,"TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR"],g2e=[null,"INDEX_SIZE_ERR (1): the index is not in the allowed range",null,"HIERARCHY_REQUEST_ERR (3): the operation would yield an incorrect nodes model","WRONG_DOCUMENT_ERR (4): the object is in the wrong Document, a call to importNode is required","INVALID_CHARACTER_ERR (5): the string contains invalid characters",null,"NO_MODIFICATION_ALLOWED_ERR (7): the object can not be modified","NOT_FOUND_ERR (8): the object can not be found here","NOT_SUPPORTED_ERR (9): this operation is not supported","INUSE_ATTRIBUTE_ERR (10): setAttributeNode called on owned Attribute","INVALID_STATE_ERR (11): the object is in an invalid state","SYNTAX_ERR (12): the string did not match the expected pattern","INVALID_MODIFICATION_ERR (13): the object can not be modified in this way","NAMESPACE_ERR (14): the operation is not allowed by Namespaces in XML","INVALID_ACCESS_ERR (15): the object does not support the operation or argument",null,"TYPE_MISMATCH_ERR (17): the type of the object does not match the expected type","SECURITY_ERR (18): the operation is insecure","NETWORK_ERR (19): a network error occurred","ABORT_ERR (20): the user aborted an operation","URL_MISMATCH_ERR (21): the given URL does not match another URL","QUOTA_EXCEEDED_ERR (22): the quota has been exceeded","TIMEOUT_ERR (23): a timeout occurred","INVALID_NODE_TYPE_ERR (24): the supplied node is invalid or has an invalid ancestor for this operation","DATA_CLONE_ERR (25): the object can not be cloned."],Rz={INDEX_SIZE_ERR:$Ne,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:YNe,WRONG_DOCUMENT_ERR:KNe,INVALID_CHARACTER_ERR:zNe,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:JNe,NOT_FOUND_ERR:jNe,NOT_SUPPORTED_ERR:ZNe,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:XNe,SYNTAX_ERR:e2e,INVALID_MODIFICATION_ERR:t2e,NAMESPACE_ERR:r2e,INVALID_ACCESS_ERR:n2e,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:i2e,SECURITY_ERR:s2e,NETWORK_ERR:o2e,ABORT_ERR:a2e,URL_MISMATCH_ERR:l2e,QUOTA_EXCEEDED_ERR:c2e,TIMEOUT_ERR:u2e,INVALID_NODE_TYPE_ERR:d2e,DATA_CLONE_ERR:f2e};function FI(e){Error.call(this),Error.captureStackTrace(this,this.constructor),this.code=e,this.message=g2e[e],this.name=h2e[e]}FI.prototype.__proto__=Error.prototype;for(MI in Rz)GL={value:Rz[MI]},Object.defineProperty(FI,MI,GL),Object.defineProperty(FI.prototype,MI,GL);var GL,MI});var NI=_(Mz=>{"use strict";Mz.isApiWritable=!globalThis.__domino_frozen__});var oi=_(Yr=>{"use strict";var si=QI(),bi=si,p2e=NI().isApiWritable;Yr.NAMESPACE={HTML:"http://www.w3.org/1999/xhtml",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink"};Yr.IndexSizeError=function(){throw new si(bi.INDEX_SIZE_ERR)};Yr.HierarchyRequestError=function(){throw new si(bi.HIERARCHY_REQUEST_ERR)};Yr.WrongDocumentError=function(){throw new si(bi.WRONG_DOCUMENT_ERR)};Yr.InvalidCharacterError=function(){throw new si(bi.INVALID_CHARACTER_ERR)};Yr.NoModificationAllowedError=function(){throw new si(bi.NO_MODIFICATION_ALLOWED_ERR)};Yr.NotFoundError=function(){throw new si(bi.NOT_FOUND_ERR)};Yr.NotSupportedError=function(){throw new si(bi.NOT_SUPPORTED_ERR)};Yr.InvalidStateError=function(){throw new si(bi.INVALID_STATE_ERR)};Yr.SyntaxError=function(){throw new si(bi.SYNTAX_ERR)};Yr.InvalidModificationError=function(){throw new si(bi.INVALID_MODIFICATION_ERR)};Yr.NamespaceError=function(){throw new si(bi.NAMESPACE_ERR)};Yr.InvalidAccessError=function(){throw new si(bi.INVALID_ACCESS_ERR)};Yr.TypeMismatchError=function(){throw new si(bi.TYPE_MISMATCH_ERR)};Yr.SecurityError=function(){throw new si(bi.SECURITY_ERR)};Yr.NetworkError=function(){throw new si(bi.NETWORK_ERR)};Yr.AbortError=function(){throw new si(bi.ABORT_ERR)};Yr.UrlMismatchError=function(){throw new si(bi.URL_MISMATCH_ERR)};Yr.QuotaExceededError=function(){throw new si(bi.QUOTA_EXCEEDED_ERR)};Yr.TimeoutError=function(){throw new si(bi.TIMEOUT_ERR)};Yr.InvalidNodeTypeError=function(){throw new si(bi.INVALID_NODE_TYPE_ERR)};Yr.DataCloneError=function(){throw new si(bi.DATA_CLONE_ERR)};Yr.nyi=function(){throw new Error("NotYetImplemented")};Yr.shouldOverride=function(){throw new Error("Abstract function; should be overriding in subclass.")};Yr.assert=function(e,t){if(!e)throw new Error("Assertion failed: "+(t||"")+`
`+new Error().stack)};Yr.expose=function(e,t){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],writable:p2e})};Yr.merge=function(e,t){for(var r in t)e[r]=t[r]};Yr.documentOrder=function(e,t){return 3-(e.compareDocumentPosition(t)&6)};Yr.toASCIILowerCase=function(e){return e.replace(/[A-Z]+/g,function(t){return t.toLowerCase()})};Yr.toASCIIUpperCase=function(e){return e.replace(/[a-z]+/g,function(t){return t.toUpperCase()})}});var $L=_((Owt,Qz)=>{"use strict";var lp=$A(),m2e=WL(),A2e=oi();Qz.exports=Fz;function Fz(){}Fz.prototype={addEventListener:function(t,r,n){if(r){n===void 0&&(n=!1),this._listeners||(this._listeners=Object.create(null)),this._listeners[t]||(this._listeners[t]=[]);for(var i=this._listeners[t],s=0,o=i.length;s<o;s++){var a=i[s];if(a.listener===r&&a.capture===n)return}var l={listener:r,capture:n};typeof r=="function"&&(l.f=r),i.push(l)}},removeEventListener:function(t,r,n){if(n===void 0&&(n=!1),this._listeners){var i=this._listeners[t];if(i)for(var s=0,o=i.length;s<o;s++){var a=i[s];if(a.listener===r&&a.capture===n){i.length===1?this._listeners[t]=void 0:i.splice(s,1);return}}}},dispatchEvent:function(t){return this._dispatchEvent(t,!1)},_dispatchEvent:function(t,r){typeof r!="boolean"&&(r=!1);function n(c,u){var f=u.type,p=u.eventPhase;if(u.currentTarget=c,p!==lp.CAPTURING_PHASE&&c._handlers&&c._handlers[f]){var g=c._handlers[f],m;if(typeof g=="function")m=g.call(u.currentTarget,u);else{var y=g.handleEvent;if(typeof y!="function")throw new TypeError("handleEvent property of event handler object isnot a function.");m=y.call(g,u)}switch(u.type){case"mouseover":m===!0&&u.preventDefault();break;case"beforeunload":default:m===!1&&u.preventDefault();break}}var v=c._listeners&&c._listeners[f];if(v){v=v.slice();for(var C=0,E=v.length;C<E;C++){if(u._immediatePropagationStopped)return;var w=v[C];if(!(p===lp.CAPTURING_PHASE&&!w.capture||p===lp.BUBBLING_PHASE&&w.capture))if(w.f)w.f.call(u.currentTarget,u);else{var B=w.listener.handleEvent;if(typeof B!="function")throw new TypeError("handleEvent property of event listener object is not a function.");B.call(w.listener,u)}}}}(!t._initialized||t._dispatching)&&A2e.InvalidStateError(),t.isTrusted=r,t._dispatching=!0,t.target=this;for(var i=[],s=this.parentNode;s;s=s.parentNode)i.push(s);t.eventPhase=lp.CAPTURING_PHASE;for(var o=i.length-1;o>=0&&(n(i[o],t),!t._propagationStopped);o--);if(t._propagationStopped||(t.eventPhase=lp.AT_TARGET,n(this,t)),t.bubbles&&!t._propagationStopped){t.eventPhase=lp.BUBBLING_PHASE;for(var a=0,l=i.length;a<l&&(n(i[a],t),!t._propagationStopped);a++);}if(t._dispatching=!1,t.eventPhase=lp.AT_TARGET,t.currentTarget=null,r&&!t.defaultPrevented&&t instanceof m2e)switch(t.type){case"mousedown":this._armed={x:t.clientX,y:t.clientY,t:t.timeStamp};break;case"mouseout":case"mouseover":this._armed=null;break;case"mouseup":this._isClick(t)&&this._doClick(t),this._armed=null;break}return!t.defaultPrevented},_isClick:function(e){return this._armed!==null&&e.type==="mouseup"&&e.isTrusted&&e.button===0&&e.timeStamp-this._armed.t<1e3&&Math.abs(e.clientX-this._armed.x)<10&&Math.abs(e.clientY-this._armed.Y)<10},_doClick:function(e){if(!this._click_in_progress){this._click_in_progress=!0;for(var t=this;t&&!t._post_click_activation_steps;)t=t.parentNode;t&&t._pre_click_activation_steps&&t._pre_click_activation_steps();var r=this.ownerDocument.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null);var n=this._dispatchEvent(r,!0);t&&(n?t._post_click_activation_steps&&t._post_click_activation_steps(r):t._cancelled_activation_steps&&t._cancelled_activation_steps())}},_setEventHandler:function(t,r){this._handlers||(this._handlers=Object.create(null)),this._handlers[t]=r},_getEventHandler:function(t){return this._handlers&&this._handlers[t]||null}}});var YL=_((qwt,Nz)=>{"use strict";var Rd=oi(),Al=Nz.exports={valid:function(e){return Rd.assert(e,"list falsy"),Rd.assert(e._previousSibling,"previous falsy"),Rd.assert(e._nextSibling,"next falsy"),!0},insertBefore:function(e,t){Rd.assert(Al.valid(e)&&Al.valid(t));var r=e,n=e._previousSibling,i=t,s=t._previousSibling;r._previousSibling=s,n._nextSibling=i,s._nextSibling=r,i._previousSibling=n,Rd.assert(Al.valid(e)&&Al.valid(t))},replace:function(e,t){Rd.assert(Al.valid(e)&&(t===null||Al.valid(t))),t!==null&&Al.insertBefore(t,e),Al.remove(e),Rd.assert(Al.valid(e)&&(t===null||Al.valid(t)))},remove:function(e){Rd.assert(Al.valid(e));var t=e._previousSibling;if(t!==e){var r=e._nextSibling;t._nextSibling=r,r._previousSibling=t,e._previousSibling=e._nextSibling=e,Rd.assert(Al.valid(e))}}}});var KL=_((Vwt,Wz)=>{"use strict";Wz.exports={serializeOne:x2e,\u0275escapeMatchingClosingTag:qz,\u0275escapeClosingCommentTag:Vz,\u0275escapeProcessingInstructionContent:Hz};var Oz=oi(),cp=Oz.NAMESPACE,Pz={STYLE:!0,SCRIPT:!0,XMP:!0,IFRAME:!0,NOEMBED:!0,NOFRAMES:!0,PLAINTEXT:!0},y2e={area:!0,base:!0,basefont:!0,bgsound:!0,br:!0,col:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},v2e={},Lz=/[&<>\u00A0]/g,Uz=/[&"<>\u00A0]/g;function C2e(e){return Lz.test(e)?e.replace(Lz,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"\xA0":return"&nbsp;"}}):e}function b2e(e){return Uz.test(e)?e.replace(Uz,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"\xA0":return"&nbsp;"}}):e}function E2e(e){var t=e.namespaceURI;return t?t===cp.XML?"xml:"+e.localName:t===cp.XLINK?"xlink:"+e.localName:t===cp.XMLNS?e.localName==="xmlns"?"xmlns":"xmlns:"+e.localName:e.name:e.localName}function qz(e,t){let r="</"+t;if(!e.toLowerCase().includes(r))return e;let n=[...e],i=e.matchAll(new RegExp(r,"ig"));for(let s of i)n[s.index]="&lt;";return n.join("")}var _2e=/--!?>/;function Vz(e){return _2e.test(e)?e.replace(/(--\!?)>/g,"$1&gt;"):e}function Hz(e){return e.includes(">")?e.replaceAll(">","&gt;"):e}function x2e(e,t){var r="";switch(e.nodeType){case 1:var n=e.namespaceURI,i=n===cp.HTML,s=i||n===cp.SVG||n===cp.MATHML?e.localName:e.tagName;r+="<"+s;for(var o=0,a=e._numattrs;o<a;o++){var l=e._attr(o);r+=" "+E2e(l),l.value!==void 0&&(r+='="'+b2e(l.value)+'"')}if(r+=">",!(i&&y2e[s])){var c=e.serialize();Pz[s.toUpperCase()]&&(c=qz(c,s)),i&&v2e[s]&&c.charAt(0)===`
`&&(r+=`
`),r+=c,r+="</"+s+">"}break;case 3:case 4:var u;t.nodeType===1&&t.namespaceURI===cp.HTML?u=t.tagName:u="",Pz[u]||u==="NOSCRIPT"&&t.ownerDocument._scripting_enabled?r+=e.data:r+=C2e(e.data);break;case 8:r+="<!--"+Vz(e.data)+"-->";break;case 7:let f=Hz(e.data);r+="<?"+e.target+" "+f+"?>";break;case 10:r+="<!DOCTYPE "+e.name,r+=">";break;default:Oz.InvalidStateError()}return r}});var bs=_((Hwt,Jz)=>{"use strict";Jz.exports=Wn;var zz=$L(),PI=YL(),Gz=KL(),Kr=oi();function Wn(){zz.call(this),this.parentNode=null,this._nextSibling=this._previousSibling=this,this._index=void 0}var Vo=Wn.ELEMENT_NODE=1,zL=Wn.ATTRIBUTE_NODE=2,LI=Wn.TEXT_NODE=3,w2e=Wn.CDATA_SECTION_NODE=4,S2e=Wn.ENTITY_REFERENCE_NODE=5,JL=Wn.ENTITY_NODE=6,$z=Wn.PROCESSING_INSTRUCTION_NODE=7,Yz=Wn.COMMENT_NODE=8,yb=Wn.DOCUMENT_NODE=9,yl=Wn.DOCUMENT_TYPE_NODE=10,Zf=Wn.DOCUMENT_FRAGMENT_NODE=11,jL=Wn.NOTATION_NODE=12,ZL=Wn.DOCUMENT_POSITION_DISCONNECTED=1,XL=Wn.DOCUMENT_POSITION_PRECEDING=2,eU=Wn.DOCUMENT_POSITION_FOLLOWING=4,Kz=Wn.DOCUMENT_POSITION_CONTAINS=8,tU=Wn.DOCUMENT_POSITION_CONTAINED_BY=16,rU=Wn.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;Wn.prototype=Object.create(zz.prototype,{baseURI:{get:Kr.nyi},parentElement:{get:function(){return this.parentNode&&this.parentNode.nodeType===Vo?this.parentNode:null}},hasChildNodes:{value:Kr.shouldOverride},firstChild:{get:Kr.shouldOverride},lastChild:{get:Kr.shouldOverride},isConnected:{get:function(){let e=this;for(;e!=null;){if(e.nodeType===Wn.DOCUMENT_NODE)return!0;e=e.parentNode,e!=null&&e.nodeType===Wn.DOCUMENT_FRAGMENT_NODE&&(e=e.host)}return!1}},previousSibling:{get:function(){var e=this.parentNode;return!e||this===e.firstChild?null:this._previousSibling}},nextSibling:{get:function(){var e=this.parentNode,t=this._nextSibling;return!e||t===e.firstChild?null:t}},textContent:{get:function(){return null},set:function(e){}},innerText:{get:function(){return null},set:function(e){}},_countChildrenOfType:{value:function(e){for(var t=0,r=this.firstChild;r!==null;r=r.nextSibling)r.nodeType===e&&t++;return t}},_ensureInsertValid:{value:function(t,r,n){var i=this,s,o;if(!t.nodeType)throw new TypeError("not a node");switch(i.nodeType){case yb:case Zf:case Vo:break;default:Kr.HierarchyRequestError()}switch(t.isAncestor(i)&&Kr.HierarchyRequestError(),(r!==null||!n)&&r.parentNode!==i&&Kr.NotFoundError(),t.nodeType){case Zf:case yl:case Vo:case LI:case $z:case Yz:break;default:Kr.HierarchyRequestError()}if(i.nodeType===yb)switch(t.nodeType){case LI:Kr.HierarchyRequestError();break;case Zf:switch(t._countChildrenOfType(LI)>0&&Kr.HierarchyRequestError(),t._countChildrenOfType(Vo)){case 0:break;case 1:if(r!==null)for(n&&r.nodeType===yl&&Kr.HierarchyRequestError(),o=r.nextSibling;o!==null;o=o.nextSibling)o.nodeType===yl&&Kr.HierarchyRequestError();s=i._countChildrenOfType(Vo),n?s>0&&Kr.HierarchyRequestError():(s>1||s===1&&r.nodeType!==Vo)&&Kr.HierarchyRequestError();break;default:Kr.HierarchyRequestError()}break;case Vo:if(r!==null)for(n&&r.nodeType===yl&&Kr.HierarchyRequestError(),o=r.nextSibling;o!==null;o=o.nextSibling)o.nodeType===yl&&Kr.HierarchyRequestError();s=i._countChildrenOfType(Vo),n?s>0&&Kr.HierarchyRequestError():(s>1||s===1&&r.nodeType!==Vo)&&Kr.HierarchyRequestError();break;case yl:if(r===null)i._countChildrenOfType(Vo)&&Kr.HierarchyRequestError();else for(o=i.firstChild;o!==null&&o!==r;o=o.nextSibling)o.nodeType===Vo&&Kr.HierarchyRequestError();s=i._countChildrenOfType(yl),n?s>0&&Kr.HierarchyRequestError():(s>1||s===1&&r.nodeType!==yl)&&Kr.HierarchyRequestError();break}else t.nodeType===yl&&Kr.HierarchyRequestError()}},insertBefore:{value:function(t,r){var n=this;n._ensureInsertValid(t,r,!0);var i=r;return i===t&&(i=t.nextSibling),n.doc.adoptNode(t),t._insertOrReplace(n,i,!1),t}},appendChild:{value:function(e){return this.insertBefore(e,null)}},_appendChild:{value:function(e){e._insertOrReplace(this,null,!1)}},removeChild:{value:function(t){var r=this;if(!t.nodeType)throw new TypeError("not a node");return t.parentNode!==r&&Kr.NotFoundError(),t.remove(),t}},replaceChild:{value:function(t,r){var n=this;return n._ensureInsertValid(t,r,!1),t.doc!==n.doc&&n.doc.adoptNode(t),t._insertOrReplace(n,r,!0),r}},contains:{value:function(t){return t===null?!1:this===t?!0:(this.compareDocumentPosition(t)&tU)!==0}},compareDocumentPosition:{value:function(t){if(this===t)return 0;if(this.doc!==t.doc||this.rooted!==t.rooted)return ZL+rU;for(var r=[],n=[],i=this;i!==null;i=i.parentNode)r.push(i);for(i=t;i!==null;i=i.parentNode)n.push(i);if(r.reverse(),n.reverse(),r[0]!==n[0])return ZL+rU;i=Math.min(r.length,n.length);for(var s=1;s<i;s++)if(r[s]!==n[s])return r[s].index<n[s].index?eU:XL;return r.length<n.length?eU+tU:XL+Kz}},isSameNode:{value:function(t){return this===t}},isEqualNode:{value:function(t){if(!t||t.nodeType!==this.nodeType||!this.isEqual(t))return!1;for(var r=this.firstChild,n=t.firstChild;r&&n;r=r.nextSibling,n=n.nextSibling)if(!r.isEqualNode(n))return!1;return r===null&&n===null}},cloneNode:{value:function(e){var t=this.clone();if(e)for(var r=this.firstChild;r!==null;r=r.nextSibling)t._appendChild(r.cloneNode(!0));return t}},lookupPrefix:{value:function(t){var r;if(t===""||t===null||t===void 0)return null;switch(this.nodeType){case Vo:return this._lookupNamespacePrefix(t,this);case yb:return r=this.documentElement,r?r.lookupPrefix(t):null;case JL:case jL:case Zf:case yl:return null;case zL:return r=this.ownerElement,r?r.lookupPrefix(t):null;default:return r=this.parentElement,r?r.lookupPrefix(t):null}}},lookupNamespaceURI:{value:function(t){(t===""||t===void 0)&&(t=null);var r;switch(this.nodeType){case Vo:return Kr.shouldOverride();case yb:return r=this.documentElement,r?r.lookupNamespaceURI(t):null;case JL:case jL:case yl:case Zf:return null;case zL:return r=this.ownerElement,r?r.lookupNamespaceURI(t):null;default:return r=this.parentElement,r?r.lookupNamespaceURI(t):null}}},isDefaultNamespace:{value:function(t){(t===""||t===void 0)&&(t=null);var r=this.lookupNamespaceURI(null);return r===t}},index:{get:function(){var e=this.parentNode;if(this===e.firstChild)return 0;var t=e.childNodes;if(this._index===void 0||t[this._index]!==this){for(var r=0;r<t.length;r++)t[r]._index=r;Kr.assert(t[this._index]===this)}return this._index}},isAncestor:{value:function(e){if(this.doc!==e.doc||this.rooted!==e.rooted)return!1;for(var t=e;t;t=t.parentNode)if(t===this)return!0;return!1}},ensureSameDoc:{value:function(e){e.ownerDocument===null?e.ownerDocument=this.doc:e.ownerDocument!==this.doc&&Kr.WrongDocumentError()}},removeChildren:{value:Kr.shouldOverride},_insertOrReplace:{value:function(t,r,n){var i=this,s,o;if(i.nodeType===Zf&&i.rooted&&Kr.HierarchyRequestError(),t._childNodes&&(s=r===null?t._childNodes.length:r.index,i.parentNode===t)){var a=i.index;a<s&&s--}n&&(r.rooted&&r.doc.mutateRemove(r),r.parentNode=null);var l=r;l===null&&(l=t.firstChild);var c=i.rooted&&t.rooted;if(i.nodeType===Zf){for(var u=[0,n?1:0],f,p=i.firstChild;p!==null;p=f)f=p.nextSibling,u.push(p),p.parentNode=t;var g=u.length;if(n?PI.replace(l,g>2?u[2]:null):g>2&&l!==null&&PI.insertBefore(u[2],l),t._childNodes)for(u[0]=r===null?t._childNodes.length:r._index,t._childNodes.splice.apply(t._childNodes,u),o=2;o<g;o++)u[o]._index=u[0]+(o-2);else t._firstChild===r&&(g>2?t._firstChild=u[2]:n&&(t._firstChild=null));if(i._childNodes?i._childNodes.length=0:i._firstChild=null,t.rooted)for(t.modify(),o=2;o<g;o++)t.doc.mutateInsert(u[o])}else{if(r===i)return;c?i._remove():i.parentNode&&i.remove(),i.parentNode=t,n?(PI.replace(l,i),t._childNodes?(i._index=s,t._childNodes[s]=i):t._firstChild===r&&(t._firstChild=i)):(l!==null&&PI.insertBefore(i,l),t._childNodes?(i._index=s,t._childNodes.splice(s,0,i)):t._firstChild===r&&(t._firstChild=i)),c?(t.modify(),t.doc.mutateMove(i)):t.rooted&&(t.modify(),t.doc.mutateInsert(i))}}},lastModTime:{get:function(){return this._lastModTime||(this._lastModTime=this.doc.modclock),this._lastModTime}},modify:{value:function(){if(this.doc.modclock)for(var e=++this.doc.modclock,t=this;t;t=t.parentElement)t._lastModTime&&(t._lastModTime=e)}},doc:{get:function(){return this.ownerDocument||this}},rooted:{get:function(){return!!this._nid}},normalize:{value:function(){for(var e,t=this.firstChild;t!==null;t=e)if(e=t.nextSibling,t.normalize&&t.normalize(),t.nodeType===Wn.TEXT_NODE){if(t.nodeValue===""){this.removeChild(t);continue}var r=t.previousSibling;r!==null&&r.nodeType===Wn.TEXT_NODE&&(r.appendData(t.nodeValue),this.removeChild(t))}}},serialize:{value:function(){if(this._innerHTML)return this._innerHTML;for(var e="",t=this.firstChild;t!==null;t=t.nextSibling)e+=Gz.serializeOne(t,this);return e}},outerHTML:{get:function(){return Gz.serializeOne(this,{nodeType:0})},set:Kr.nyi},ELEMENT_NODE:{value:Vo},ATTRIBUTE_NODE:{value:zL},TEXT_NODE:{value:LI},CDATA_SECTION_NODE:{value:w2e},ENTITY_REFERENCE_NODE:{value:S2e},ENTITY_NODE:{value:JL},PROCESSING_INSTRUCTION_NODE:{value:$z},COMMENT_NODE:{value:Yz},DOCUMENT_NODE:{value:yb},DOCUMENT_TYPE_NODE:{value:yl},DOCUMENT_FRAGMENT_NODE:{value:Zf},NOTATION_NODE:{value:jL},DOCUMENT_POSITION_DISCONNECTED:{value:ZL},DOCUMENT_POSITION_PRECEDING:{value:XL},DOCUMENT_POSITION_FOLLOWING:{value:eU},DOCUMENT_POSITION_CONTAINS:{value:Kz},DOCUMENT_POSITION_CONTAINED_BY:{value:tU},DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:{value:rU}})});var Zz=_((Gwt,jz)=>{"use strict";jz.exports=class extends Array{constructor(t){if(super(t&&t.length||0),t)for(var r in t)this[r]=t[r]}item(t){return this[t]||null}}});var eJ=_(($wt,Xz)=>{"use strict";function I2e(e){return this[e]||null}function B2e(e){return e||(e=[]),e.item=I2e,e}Xz.exports=B2e});var up=_((Ywt,tJ)=>{"use strict";var nU;try{nU=Zz()}catch{nU=eJ()}tJ.exports=nU});var UI=_((Kwt,iJ)=>{"use strict";iJ.exports=nJ;var rJ=bs(),D2e=up();function nJ(){rJ.call(this),this._firstChild=this._childNodes=null}nJ.prototype=Object.create(rJ.prototype,{hasChildNodes:{value:function(){return this._childNodes?this._childNodes.length>0:this._firstChild!==null}},childNodes:{get:function(){return this._ensureChildNodes(),this._childNodes}},firstChild:{get:function(){return this._childNodes?this._childNodes.length===0?null:this._childNodes[0]:this._firstChild}},lastChild:{get:function(){var e=this._childNodes,t;return e?e.length===0?null:e[e.length-1]:(t=this._firstChild,t===null?null:t._previousSibling)}},_ensureChildNodes:{value:function(){if(!this._childNodes){var e=this._firstChild,t=e,r=this._childNodes=new D2e;if(e)do r.push(t),t=t._nextSibling;while(t!==e);this._firstChild=null}}},removeChildren:{value:function(){for(var t=this.rooted?this.ownerDocument:null,r=this.firstChild,n;r!==null;)n=r,r=n.nextSibling,t&&t.mutateRemove(n),n.parentNode=null;this._childNodes?this._childNodes.length=0:this._firstChild=null,this.modify()}}})});var OI=_(oU=>{"use strict";oU.isValidName=N2e;oU.isValidQName=P2e;var T2e=/^[_:A-Za-z][-.:\w]+$/,R2e=/^([_A-Za-z][-.\w]+|[_A-Za-z][-.\w]+:[_A-Za-z][-.\w]+)$/,vb="_A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",Cb="-._A-Za-z0-9\xB7\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0300-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",dp="["+vb+"]["+Cb+"]*",iU=vb+":",sU=Cb+":",k2e=new RegExp("^["+iU+"]["+sU+"]*$"),M2e=new RegExp("^("+dp+"|"+dp+":"+dp+")$"),sJ=/[\uD800-\uDB7F\uDC00-\uDFFF]/,oJ=/[\uD800-\uDB7F\uDC00-\uDFFF]/g,aJ=/[\uD800-\uDB7F][\uDC00-\uDFFF]/g;vb+="\uD800-\u{EFC00}-\uDFFF";Cb+="\uD800-\u{EFC00}-\uDFFF";dp="["+vb+"]["+Cb+"]*";iU=vb+":";sU=Cb+":";var F2e=new RegExp("^["+iU+"]["+sU+"]*$"),Q2e=new RegExp("^("+dp+"|"+dp+":"+dp+")$");function N2e(e){if(T2e.test(e)||k2e.test(e))return!0;if(!sJ.test(e)||!F2e.test(e))return!1;var t=e.match(oJ),r=e.match(aJ);return r!==null&&2*r.length===t.length}function P2e(e){if(R2e.test(e)||M2e.test(e))return!0;if(!sJ.test(e)||!Q2e.test(e))return!1;var t=e.match(oJ),r=e.match(aJ);return r!==null&&2*r.length===t.length}});var lU=_(aU=>{"use strict";var lJ=oi();aU.property=function(e){if(Array.isArray(e.type)){var t=Object.create(null);e.type.forEach(function(i){t[i.value||i]=i.alias||i});var r=e.missing;r===void 0&&(r=null);var n=e.invalid;return n===void 0&&(n=r),{get:function(){var i=this._getattr(e.name);return i===null?r:(i=t[i.toLowerCase()],i!==void 0?i:n!==null?n:i)},set:function(i){this._setattr(e.name,i)}}}else{if(e.type===Boolean)return{get:function(){return this.hasAttribute(e.name)},set:function(i){i?this._setattr(e.name,""):this.removeAttribute(e.name)}};if(e.type===Number||e.type==="long"||e.type==="unsigned long"||e.type==="limited unsigned long with fallback")return L2e(e);if(!e.type||e.type===String)return{get:function(){return this._getattr(e.name)||""},set:function(i){e.treatNullAsEmptyString&&i===null&&(i=""),this._setattr(e.name,i)}};if(typeof e.type=="function")return e.type(e.name,e)}throw new Error("Invalid attribute definition")};function L2e(e){var t;typeof e.default=="function"?t=e.default:typeof e.default=="number"?t=function(){return e.default}:t=function(){lJ.assert(!1,typeof e.default)};var r=e.type==="unsigned long",n=e.type==="long",i=e.type==="limited unsigned long with fallback",s=e.min,o=e.max,a=e.setmin;return s===void 0&&(r&&(s=0),n&&(s=-2147483648),i&&(s=1)),o===void 0&&(r||n||i)&&(o=2147483647),{get:function(){var l=this._getattr(e.name),c=e.float?parseFloat(l):parseInt(l,10);if(l===null||!isFinite(c)||s!==void 0&&c<s||o!==void 0&&c>o)return t.call(this);if(r||n||i){if(!/^[ \t\n\f\r]*[-+]?[0-9]/.test(l))return t.call(this);c=c|0}return c},set:function(l){e.float||(l=Math.floor(l)),a!==void 0&&l<a&&lJ.IndexSizeError(e.name+" set to "+l),r?l=l<0||l>2147483647?t.call(this):l|0:i?l=l<1||l>2147483647?t.call(this):l|0:n&&(l=l<-2147483648||l>2147483647?t.call(this):l|0),this._setattr(e.name,String(l))}}}aU.registerChangeHandler=function(e,t,r){var n=e.prototype;Object.prototype.hasOwnProperty.call(n,"_attributeChangeHandlers")||(n._attributeChangeHandlers=Object.create(n._attributeChangeHandlers||null)),n._attributeChangeHandlers[t]=r}});var dJ=_((jwt,uJ)=>{"use strict";uJ.exports=cJ;var U2e=bs();function cJ(e,t){this.root=e,this.filter=t,this.lastModTime=e.lastModTime,this.done=!1,this.cache=[],this.traverse()}cJ.prototype=Object.create(Object.prototype,{length:{get:function(){return this.checkcache(),this.done||this.traverse(),this.cache.length}},item:{value:function(e){return this.checkcache(),!this.done&&e>=this.cache.length&&this.traverse(),this.cache[e]}},checkcache:{value:function(){if(this.lastModTime!==this.root.lastModTime){for(var e=this.cache.length-1;e>=0;e--)this[e]=void 0;this.cache.length=0,this.done=!1,this.lastModTime=this.root.lastModTime}}},traverse:{value:function(e){e!==void 0&&e++;for(var t;(t=this.next())!==null;)if(this[this.cache.length]=t,this.cache.push(t),e&&this.cache.length===e)return;this.done=!0}},next:{value:function(){var e=this.cache.length===0?this.root:this.cache[this.cache.length-1],t;for(e.nodeType===U2e.DOCUMENT_NODE?t=e.documentElement:t=e.nextElement(this.root);t;){if(this.filter(t))return t;t=t.nextElement(this.root)}return null}}})});var uU=_((Zwt,gJ)=>{"use strict";var cU=oi();gJ.exports=hJ;function hJ(e,t){this._getString=e,this._setString=t,this._length=0,this._lastStringValue="",this._update()}Object.defineProperties(hJ.prototype,{length:{get:function(){return this._length}},item:{value:function(e){var t=YA(this);return e<0||e>=t.length?null:t[e]}},contains:{value:function(e){e=String(e);var t=YA(this);return t.indexOf(e)>-1}},add:{value:function(){for(var e=YA(this),t=0,r=arguments.length;t<r;t++){var n=bb(arguments[t]);e.indexOf(n)<0&&e.push(n)}this._update(e)}},remove:{value:function(){for(var e=YA(this),t=0,r=arguments.length;t<r;t++){var n=bb(arguments[t]),i=e.indexOf(n);i>-1&&e.splice(i,1)}this._update(e)}},toggle:{value:function(t,r){return t=bb(t),this.contains(t)?r===void 0||r===!1?(this.remove(t),!1):!0:r===void 0||r===!0?(this.add(t),!0):!1}},replace:{value:function(t,r){String(r)===""&&cU.SyntaxError(),t=bb(t),r=bb(r);var n=YA(this),i=n.indexOf(t);if(i<0)return!1;var s=n.indexOf(r);return s<0?n[i]=r:i<s?(n[i]=r,n.splice(s,1)):n.splice(i,1),this._update(n),!0}},toString:{value:function(){return this._getString()}},value:{get:function(){return this._getString()},set:function(e){this._setString(e),this._update()}},_update:{value:function(e){e?(fJ(this,e),this._setString(e.join(" ").trim())):fJ(this,YA(this)),this._lastStringValue=this._getString()}}});function fJ(e,t){var r=e._length,n;for(e._length=t.length,n=0;n<t.length;n++)e[n]=t[n];for(;n<r;n++)e[n]=void 0}function bb(e){return e=String(e),e===""&&cU.SyntaxError(),/[ \t\r\n\f]/.test(e)&&cU.InvalidCharacterError(),e}function O2e(e){for(var t=e._length,r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}function YA(e){var t=e._getString();if(t===e._lastStringValue)return O2e(e);var r=t.replace(/(^[ \t\r\n\f]+)|([ \t\r\n\f]+$)/g,"");if(r==="")return[];var n=Object.create(null);return r.split(/[ \t\r\n\f]+/g).filter(function(i){var s="$"+i;return n[s]?!1:(n[s]=!0,!0)})}});var WI=_((JA,CJ)=>{"use strict";var qI=Object.create(null,{location:{get:function(){throw new Error("window.location is not supported.")}}}),q2e=function(e,t){return e.compareDocumentPosition(t)},V2e=function(e,t){return q2e(e,t)&2?1:-1},HI=function(e){for(;(e=e.nextSibling)&&e.nodeType!==1;);return e},zA=function(e){for(;(e=e.previousSibling)&&e.nodeType!==1;);return e},H2e=function(e){if(e=e.firstChild)for(;e.nodeType!==1&&(e=e.nextSibling););return e},W2e=function(e){if(e=e.lastChild)for(;e.nodeType!==1&&(e=e.previousSibling););return e},KA=function(e){if(!e.parentNode)return!1;var t=e.parentNode.nodeType;return t===1||t===9},pJ=function(e){if(!e)return e;var t=e[0];return t==='"'||t==="'"?(e[e.length-1]===t?e=e.slice(1,-1):e=e.slice(1),e.replace(vt.str_escape,function(r){var n=/^\\(?:([0-9A-Fa-f]+)|([\r\n\f]+))/.exec(r);if(!n)return r.slice(1);if(n[2])return"";var i=parseInt(n[1],16);return String.fromCodePoint?String.fromCodePoint(i):String.fromCharCode(i)})):vt.ident.test(e)?Xf(e):e},Xf=function(e){return e.replace(vt.escape,function(t){var r=/^\\([0-9A-Fa-f]+)/.exec(t);if(!r)return t[1];var n=parseInt(r[1],16);return String.fromCodePoint?String.fromCodePoint(n):String.fromCharCode(n)})},G2e=function(){return Array.prototype.indexOf?Array.prototype.indexOf:function(e,t){for(var r=this.length;r--;)if(this[r]===t)return r;return-1}}(),AJ=function(e,t){var r=vt.inside.source.replace(/</g,e).replace(/>/g,t);return new RegExp(r)},Ho=function(e,t,r){return e=e.source,e=e.replace(t,r.source||r),new RegExp(e)},mJ=function(e,t){return e.replace(/^(?:\w+:\/\/|\/+)/,"").replace(/(?:\/+|\/*#.*?)$/,"").split("/",t).join("/")},$2e=function(e,t){var r=e.replace(/\s+/g,""),n;return r==="even"?r="2n+0":r==="odd"?r="2n+1":r.indexOf("n")===-1&&(r="0n"+r),n=/^([+-])?(\d+)?n([+-])?(\d+)?$/.exec(r),{group:n[1]==="-"?-(n[2]||1):+(n[2]||1),offset:n[4]?n[3]==="-"?-n[4]:+n[4]:0}},dU=function(e,t,r){var n=$2e(e),i=n.group,s=n.offset,o=r?W2e:H2e,a=r?zA:HI;return function(l){if(KA(l))for(var c=o(l.parentNode),u=0;c;){if(t(c,l)&&u++,c===l)return u-=s,i&&u?u%i===0&&u<0==i<0:!u;c=a(c)}}},Xi={"*":function(){return function(){return!0}}(),type:function(e){return e=e.toLowerCase(),function(t){return t.nodeName.toLowerCase()===e}},attr:function(e,t,r,n){return t=yJ[t],function(i){var s;switch(e){case"for":s=i.htmlFor;break;case"class":s=i.className,s===""&&i.getAttribute("class")==null&&(s=null);break;case"href":case"src":s=i.getAttribute(e,2);break;case"title":s=i.getAttribute("title")||null;break;case"id":case"lang":case"dir":case"accessKey":case"hidden":case"tabIndex":case"style":if(i.getAttribute){s=i.getAttribute(e);break}default:if(i.hasAttribute&&!i.hasAttribute(e))break;s=i[e]!=null?i[e]:i.getAttribute&&i.getAttribute(e);break}if(s!=null)return s=s+"",n&&(s=s.toLowerCase(),r=r.toLowerCase()),t(s,r)}},":first-child":function(e){return!zA(e)&&KA(e)},":last-child":function(e){return!HI(e)&&KA(e)},":only-child":function(e){return!zA(e)&&!HI(e)&&KA(e)},":nth-child":function(e,t){return dU(e,function(){return!0},t)},":nth-last-child":function(e){return Xi[":nth-child"](e,!0)},":root":function(e){return e.ownerDocument.documentElement===e},":empty":function(e){return!e.firstChild},":not":function(e){var t=hU(e);return function(r){return!t(r)}},":first-of-type":function(e){if(KA(e)){for(var t=e.nodeName;e=zA(e);)if(e.nodeName===t)return;return!0}},":last-of-type":function(e){if(KA(e)){for(var t=e.nodeName;e=HI(e);)if(e.nodeName===t)return;return!0}},":only-of-type":function(e){return Xi[":first-of-type"](e)&&Xi[":last-of-type"](e)},":nth-of-type":function(e,t){return dU(e,function(r,n){return r.nodeName===n.nodeName},t)},":nth-last-of-type":function(e){return Xi[":nth-of-type"](e,!0)},":checked":function(e){return!!(e.checked||e.selected)},":indeterminate":function(e){return!Xi[":checked"](e)},":enabled":function(e){return!e.disabled&&e.type!=="hidden"},":disabled":function(e){return!!e.disabled},":target":function(e){return e.id===qI.location.hash.substring(1)},":focus":function(e){return e===e.ownerDocument.activeElement},":is":function(e){return hU(e)},":matches":function(e){return Xi[":is"](e)},":nth-match":function(e,t){var r=e.split(/\s*,\s*/),n=r.shift(),i=hU(r.join(","));return dU(n,i,t)},":nth-last-match":function(e){return Xi[":nth-match"](e,!0)},":links-here":function(e){return e+""==qI.location+""},":lang":function(e){return function(t){for(;t;){if(t.lang)return t.lang.indexOf(e)===0;t=t.parentNode}}},":dir":function(e){return function(t){for(;t;){if(t.dir)return t.dir===e;t=t.parentNode}}},":scope":function(e,t){var r=t||e.ownerDocument;return r.nodeType===9?e===r.documentElement:e===r},":any-link":function(e){return typeof e.href=="string"},":local-link":function(e){if(e.nodeName)return e.href&&e.host===qI.location.host;var t=+e+1;return function(r){if(r.href){var n=qI.location+"",i=r+"";return mJ(n,t)===mJ(i,t)}}},":default":function(e){return!!e.defaultSelected},":valid":function(e){return e.willValidate||e.validity&&e.validity.valid},":invalid":function(e){return!Xi[":valid"](e)},":in-range":function(e){return e.value>e.min&&e.value<=e.max},":out-of-range":function(e){return!Xi[":in-range"](e)},":required":function(e){return!!e.required},":optional":function(e){return!e.required},":read-only":function(e){if(e.readOnly)return!0;var t=e.getAttribute("contenteditable"),r=e.contentEditable,n=e.nodeName.toLowerCase();return n=n!=="input"&&n!=="textarea",(n||e.disabled)&&t==null&&r!=="true"},":read-write":function(e){return!Xi[":read-only"](e)},":hover":function(){throw new Error(":hover is not supported.")},":active":function(){throw new Error(":active is not supported.")},":link":function(){throw new Error(":link is not supported.")},":visited":function(){throw new Error(":visited is not supported.")},":column":function(){throw new Error(":column is not supported.")},":nth-column":function(){throw new Error(":nth-column is not supported.")},":nth-last-column":function(){throw new Error(":nth-last-column is not supported.")},":current":function(){throw new Error(":current is not supported.")},":past":function(){throw new Error(":past is not supported.")},":future":function(){throw new Error(":future is not supported.")},":contains":function(e){return function(t){var r=t.innerText||t.textContent||t.value||"";return r.indexOf(e)!==-1}},":has":function(e){return function(t){return vJ(e,t).length>0}}},yJ={"-":function(){return!0},"=":function(e,t){return e===t},"*=":function(e,t){return e.indexOf(t)!==-1},"~=":function(e,t){var r,n,i,s;for(n=0;;n=r+1){if(r=e.indexOf(t,n),r===-1)return!1;if(i=e[r-1],s=e[r+t.length],(!i||i===" ")&&(!s||s===" "))return!0}},"|=":function(e,t){var r=e.indexOf(t),n;if(r===0)return n=e[r+t.length],n==="-"||!n},"^=":function(e,t){return e.indexOf(t)===0},"$=":function(e,t){var r=e.lastIndexOf(t);return r!==-1&&r+t.length===e.length},"!=":function(e,t){return e!==t}},Eb={" ":function(e){return function(t){for(;t=t.parentNode;)if(e(t))return t}},">":function(e){return function(t){if(t=t.parentNode)return e(t)&&t}},"+":function(e){return function(t){if(t=zA(t))return e(t)&&t}},"~":function(e){return function(t){for(;t=zA(t);)if(e(t))return t}},noop:function(e){return function(t){return e(t)&&t}},ref:function(e,t){var r;function n(i){for(var s=i.ownerDocument,o=s.getElementsByTagName("*"),a=o.length;a--;)if(r=o[a],n.test(i))return r=null,!0;r=null}return n.combinator=function(i){if(!(!r||!r.getAttribute)){var s=r.getAttribute(t)||"";if(s[0]==="#"&&(s=s.substring(1)),s===i.id&&e(r))return r}},n}},vt={escape:/\\(?:[^0-9A-Fa-f\r\n]|[0-9A-Fa-f]{1,6}[\r\n\t ]?)/g,str_escape:/(escape)|\\(\n|\r\n?|\f)/g,nonascii:/[\u00A0-\uFFFF]/,cssid:/(?:(?!-?[0-9])(?:escape|nonascii|[-_a-zA-Z0-9])+)/,qname:/^ *(cssid|\*)/,simple:/^(?:([.#]cssid)|pseudo|attr)/,ref:/^ *\/(cssid)\/ */,combinator:/^(?: +([^ \w*.#\\]) +|( )+|([^ \w*.#\\]))(?! *$)/,attr:/^\[(cssid)(?:([^\w]?=)(inside))?\]/,pseudo:/^(:cssid)(?:\((inside)\))?/,inside:/(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|<[^"'>]*>|\\["'>]|[^"'>])*/,ident:/^(cssid)$/};vt.cssid=Ho(vt.cssid,"nonascii",vt.nonascii);vt.cssid=Ho(vt.cssid,"escape",vt.escape);vt.qname=Ho(vt.qname,"cssid",vt.cssid);vt.simple=Ho(vt.simple,"cssid",vt.cssid);vt.ref=Ho(vt.ref,"cssid",vt.cssid);vt.attr=Ho(vt.attr,"cssid",vt.cssid);vt.pseudo=Ho(vt.pseudo,"cssid",vt.cssid);vt.inside=Ho(vt.inside,`[^"'>]*`,vt.inside);vt.attr=Ho(vt.attr,"inside",AJ("\\[","\\]"));vt.pseudo=Ho(vt.pseudo,"inside",AJ("\\(","\\)"));vt.simple=Ho(vt.simple,"pseudo",vt.pseudo);vt.simple=Ho(vt.simple,"attr",vt.attr);vt.ident=Ho(vt.ident,"cssid",vt.cssid);vt.str_escape=Ho(vt.str_escape,"escape",vt.escape);var _b=function(e){for(var t=e.replace(/^\s+|\s+$/g,""),r,n=[],i=[],s,o,a,l,c;t;){if(a=vt.qname.exec(t))t=t.substring(a[0].length),o=Xf(a[1]),i.push(VI(o,!0));else if(a=vt.simple.exec(t))t=t.substring(a[0].length),o="*",i.push(VI(o,!0)),i.push(VI(a));else throw new SyntaxError("Invalid selector.");for(;a=vt.simple.exec(t);)t=t.substring(a[0].length),i.push(VI(a));if(t[0]==="!"&&(t=t.substring(1),s=K2e(),s.qname=o,i.push(s.simple)),a=vt.ref.exec(t)){t=t.substring(a[0].length),c=Eb.ref(fU(i),Xf(a[1])),n.push(c.combinator),i=[];continue}if(a=vt.combinator.exec(t)){if(t=t.substring(a[0].length),l=a[1]||a[2]||a[3],l===","){n.push(Eb.noop(fU(i)));break}}else l="noop";if(!Eb[l])throw new SyntaxError("Bad combinator.");n.push(Eb[l](fU(i))),i=[]}return r=Y2e(n),r.qname=o,r.sel=t,s&&(s.lname=r.qname,s.test=r,s.qname=s.qname,s.sel=r.sel,r=s),c&&(c.test=r,c.qname=r.qname,c.sel=r.sel,r=c),r},VI=function(e,t){if(t)return e==="*"?Xi["*"]:Xi.type(e);if(e[1])return e[1][0]==="."?Xi.attr("class","~=",Xf(e[1].substring(1)),!1):Xi.attr("id","=",Xf(e[1].substring(1)),!1);if(e[2])return e[3]?Xi[Xf(e[2])](pJ(e[3])):Xi[Xf(e[2])];if(e[4]){var r=e[6],n=/["'\s]\s*I$/i.test(r);return n&&(r=r.replace(/\s*I$/i,"")),Xi.attr(Xf(e[4]),e[5]||"-",pJ(r),n)}throw new SyntaxError("Unknown Selector.")},fU=function(e){var t=e.length,r;return t<2?e[0]:function(n){if(n){for(r=0;r<t;r++)if(!e[r](n))return;return!0}}},Y2e=function(e){return e.length<2?function(t){return!!e[0](t)}:function(t){for(var r=e.length;r--;)if(!(t=e[r](t)))return;return!0}},K2e=function(){var e;function t(r){for(var n=r.ownerDocument,i=n.getElementsByTagName(t.lname),s=i.length;s--;)if(t.test(i[s])&&e===r)return e=null,!0;e=null}return t.simple=function(r){return e=r,!0},t},hU=function(e){for(var t=_b(e),r=[t];t.sel;)t=_b(t.sel),r.push(t);return r.length<2?t:function(n){for(var i=r.length,s=0;s<i;s++)if(r[s](n))return!0}},vJ=function(e,t){for(var r=[],n=_b(e),i=t.getElementsByTagName(n.qname),s=0,o;o=i[s++];)n(o)&&r.push(o);if(n.sel){for(;n.sel;)for(n=_b(n.sel),i=t.getElementsByTagName(n.qname),s=0;o=i[s++];)n(o)&&G2e.call(r,o)===-1&&r.push(o);r.sort(V2e)}return r};CJ.exports=JA=function(e,t){var r,n;if(t.nodeType!==11&&e.indexOf(" ")===-1){if(e[0]==="#"&&t.rooted&&/^#[A-Z_][-A-Z0-9_]*$/i.test(e)&&t.doc._hasMultipleElementsWithId&&(r=e.substring(1),!t.doc._hasMultipleElementsWithId(r)))return n=t.doc.getElementById(r),n?[n]:[];if(e[0]==="."&&/^\.\w+$/.test(e))return t.getElementsByClassName(e.substring(1));if(/^\w+$/.test(e))return t.getElementsByTagName(e)}return vJ(e,t)};JA.selectors=Xi;JA.operators=yJ;JA.combinators=Eb;JA.matches=function(e,t){var r={sel:t};do if(r=_b(r.sel),r(e))return!0;while(r.sel);return!1}});var GI=_((Xwt,bJ)=>{"use strict";var z2e=bs(),J2e=YL(),gU=function(e,t){for(var r=e.createDocumentFragment(),n=0;n<t.length;n++){var i=t[n],s=i instanceof z2e;r.appendChild(s?i:e.createTextNode(String(i)))}return r},j2e={after:{value:function(){var t=Array.prototype.slice.call(arguments),r=this.parentNode,n=this.nextSibling;if(r!==null){for(;n&&t.some(function(s){return s===n});)n=n.nextSibling;var i=gU(this.doc,t);r.insertBefore(i,n)}}},before:{value:function(){var t=Array.prototype.slice.call(arguments),r=this.parentNode,n=this.previousSibling;if(r!==null){for(;n&&t.some(function(o){return o===n});)n=n.previousSibling;var i=gU(this.doc,t),s=n?n.nextSibling:r.firstChild;r.insertBefore(i,s)}}},remove:{value:function(){this.parentNode!==null&&(this.doc&&(this.doc._preremoveNodeIterators(this),this.rooted&&this.doc.mutateRemove(this)),this._remove(),this.parentNode=null)}},_remove:{value:function(){var t=this.parentNode;t!==null&&(t._childNodes?t._childNodes.splice(this.index,1):t._firstChild===this&&(this._nextSibling===this?t._firstChild=null:t._firstChild=this._nextSibling),J2e.remove(this),t.modify())}},replaceWith:{value:function(){var t=Array.prototype.slice.call(arguments),r=this.parentNode,n=this.nextSibling;if(r!==null){for(;n&&t.some(function(s){return s===n});)n=n.nextSibling;var i=gU(this.doc,t);this.parentNode===r?r.replaceChild(i,this):r.insertBefore(i,n)}}}};bJ.exports=j2e});var pU=_((eSt,_J)=>{"use strict";var EJ=bs(),Z2e={nextElementSibling:{get:function(){if(this.parentNode){for(var e=this.nextSibling;e!==null;e=e.nextSibling)if(e.nodeType===EJ.ELEMENT_NODE)return e}return null}},previousElementSibling:{get:function(){if(this.parentNode){for(var e=this.previousSibling;e!==null;e=e.previousSibling)if(e.nodeType===EJ.ELEMENT_NODE)return e}return null}}};_J.exports=Z2e});var mU=_((tSt,wJ)=>{"use strict";wJ.exports=xJ;var jA=oi();function xJ(e){this.element=e}Object.defineProperties(xJ.prototype,{length:{get:jA.shouldOverride},item:{value:jA.shouldOverride},getNamedItem:{value:function(t){return this.element.getAttributeNode(t)}},getNamedItemNS:{value:function(t,r){return this.element.getAttributeNodeNS(t,r)}},setNamedItem:{value:jA.nyi},setNamedItemNS:{value:jA.nyi},removeNamedItem:{value:function(t){var r=this.element.getAttributeNode(t);if(r)return this.element.removeAttribute(t),r;jA.NotFoundError()}},removeNamedItemNS:{value:function(t,r){var n=this.element.getAttributeNodeNS(t,r);if(n)return this.element.removeAttributeNS(t,r),n;jA.NotFoundError()}}})});var XA=_((rSt,TJ)=>{"use strict";TJ.exports=eh;var AU=OI(),Kn=oi(),fu=Kn.NAMESPACE,YI=lU(),mc=bs(),yU=up(),X2e=KL(),$I=dJ(),ZA=QI(),ePe=uU(),vU=WI(),IJ=UI(),tPe=GI(),rPe=pU(),BJ=mU(),SJ=Object.create(null);function eh(e,t,r,n){IJ.call(this),this.nodeType=mc.ELEMENT_NODE,this.ownerDocument=e,this.localName=t,this.namespaceURI=r,this.prefix=n,this._tagName=void 0,this._attrsByQName=Object.create(null),this._attrsByLName=Object.create(null),this._attrKeys=[]}function CU(e,t){if(e.nodeType===mc.TEXT_NODE)t.push(e._data);else for(var r=0,n=e.childNodes.length;r<n;r++)CU(e.childNodes[r],t)}eh.prototype=Object.create(IJ.prototype,{isHTML:{get:function(){return this.namespaceURI===fu.HTML&&this.ownerDocument.isHTML}},tagName:{get:function(){if(this._tagName===void 0){var t;if(this.prefix===null?t=this.localName:t=this.prefix+":"+this.localName,this.isHTML){var r=SJ[t];r||(SJ[t]=r=Kn.toASCIIUpperCase(t)),t=r}this._tagName=t}return this._tagName}},nodeName:{get:function(){return this.tagName}},nodeValue:{get:function(){return null},set:function(){}},textContent:{get:function(){var e=[];return CU(this,e),e.join("")},set:function(e){this.removeChildren(),e!=null&&e!==""&&this._appendChild(this.ownerDocument.createTextNode(e))}},innerText:{get:function(){var e=[];return CU(this,e),e.join("").replace(/[ \t\n\f\r]+/g," ").trim()},set:function(e){this.removeChildren(),e!=null&&e!==""&&this._appendChild(this.ownerDocument.createTextNode(e))}},innerHTML:{get:function(){return this.serialize()},set:Kn.nyi},outerHTML:{get:function(){return X2e.serializeOne(this,{nodeType:0})},set:function(e){var t=this.ownerDocument,r=this.parentNode;if(r!==null){r.nodeType===mc.DOCUMENT_NODE&&Kn.NoModificationAllowedError(),r.nodeType===mc.DOCUMENT_FRAGMENT_NODE&&(r=r.ownerDocument.createElement("body"));var n=t.implementation.mozHTMLParser(t._address,r);n.parse(e===null?"":String(e),!0),this.replaceWith(n._asDocumentFragment())}}},_insertAdjacent:{value:function(t,r){var n=!1;switch(t){case"beforebegin":n=!0;case"afterend":var i=this.parentNode;return i===null?null:i.insertBefore(r,n?this:this.nextSibling);case"afterbegin":n=!0;case"beforeend":return this.insertBefore(r,n?this.firstChild:null);default:return Kn.SyntaxError()}}},insertAdjacentElement:{value:function(t,r){if(r.nodeType!==mc.ELEMENT_NODE)throw new TypeError("not an element");return t=Kn.toASCIILowerCase(String(t)),this._insertAdjacent(t,r)}},insertAdjacentText:{value:function(t,r){var n=this.ownerDocument.createTextNode(r);t=Kn.toASCIILowerCase(String(t)),this._insertAdjacent(t,n)}},insertAdjacentHTML:{value:function(t,r){t=Kn.toASCIILowerCase(String(t)),r=String(r);var n;switch(t){case"beforebegin":case"afterend":n=this.parentNode,(n===null||n.nodeType===mc.DOCUMENT_NODE)&&Kn.NoModificationAllowedError();break;case"afterbegin":case"beforeend":n=this;break;default:Kn.SyntaxError()}(!(n instanceof eh)||n.ownerDocument.isHTML&&n.localName==="html"&&n.namespaceURI===fu.HTML)&&(n=n.ownerDocument.createElementNS(fu.HTML,"body"));var i=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,n);i.parse(r,!0),this._insertAdjacent(t,i._asDocumentFragment())}},children:{get:function(){return this._children||(this._children=new DJ(this)),this._children}},attributes:{get:function(){return this._attributes||(this._attributes=new EU(this)),this._attributes}},firstElementChild:{get:function(){for(var e=this.firstChild;e!==null;e=e.nextSibling)if(e.nodeType===mc.ELEMENT_NODE)return e;return null}},lastElementChild:{get:function(){for(var e=this.lastChild;e!==null;e=e.previousSibling)if(e.nodeType===mc.ELEMENT_NODE)return e;return null}},childElementCount:{get:function(){return this.children.length}},nextElement:{value:function(e){e||(e=this.ownerDocument.documentElement);var t=this.firstElementChild;if(!t){if(this===e)return null;t=this.nextElementSibling}if(t)return t;for(var r=this.parentElement;r&&r!==e;r=r.parentElement)if(t=r.nextElementSibling,t)return t;return null}},getElementsByTagName:{value:function(t){var r;return t?(t==="*"?r=function(){return!0}:this.isHTML?r=nPe(t):r=bU(t),new $I(this,r)):new yU}},getElementsByTagNameNS:{value:function(t,r){var n;return t==="*"&&r==="*"?n=function(){return!0}:t==="*"?n=bU(r):r==="*"?n=iPe(t):n=sPe(t,r),new $I(this,n)}},getElementsByClassName:{value:function(t){if(t=String(t).trim(),t===""){var r=new yU;return r}return t=t.split(/[ \t\r\n\f]+/),new $I(this,oPe(t))}},getElementsByName:{value:function(t){return new $I(this,aPe(String(t)))}},clone:{value:function(){var t;this.namespaceURI!==fu.HTML||this.prefix||!this.ownerDocument.isHTML?t=this.ownerDocument.createElementNS(this.namespaceURI,this.prefix!==null?this.prefix+":"+this.localName:this.localName):t=this.ownerDocument.createElement(this.localName);for(var r=0,n=this._attrKeys.length;r<n;r++){var i=this._attrKeys[r],s=this._attrsByLName[i],o=s.cloneNode();o._setOwnerElement(t),t._attrsByLName[i]=o,t._addQName(o)}return t._attrKeys=this._attrKeys.concat(),t}},isEqual:{value:function(t){if(this.localName!==t.localName||this.namespaceURI!==t.namespaceURI||this.prefix!==t.prefix||this._numattrs!==t._numattrs)return!1;for(var r=0,n=this._numattrs;r<n;r++){var i=this._attr(r);if(!t.hasAttributeNS(i.namespaceURI,i.localName)||t.getAttributeNS(i.namespaceURI,i.localName)!==i.value)return!1}return!0}},_lookupNamespacePrefix:{value:function(t,r){if(this.namespaceURI&&this.namespaceURI===t&&this.prefix!==null&&r.lookupNamespaceURI(this.prefix)===t)return this.prefix;for(var n=0,i=this._numattrs;n<i;n++){var s=this._attr(n);if(s.prefix==="xmlns"&&s.value===t&&r.lookupNamespaceURI(s.localName)===t)return s.localName}var o=this.parentElement;return o?o._lookupNamespacePrefix(t,r):null}},lookupNamespaceURI:{value:function(t){if((t===""||t===void 0)&&(t=null),this.namespaceURI!==null&&this.prefix===t)return this.namespaceURI;for(var r=0,n=this._numattrs;r<n;r++){var i=this._attr(r);if(i.namespaceURI===fu.XMLNS&&(i.prefix==="xmlns"&&i.localName===t||t===null&&i.prefix===null&&i.localName==="xmlns"))return i.value||null}var s=this.parentElement;return s?s.lookupNamespaceURI(t):null}},getAttribute:{value:function(t){var r=this.getAttributeNode(t);return r?r.value:null}},getAttributeNS:{value:function(t,r){var n=this.getAttributeNodeNS(t,r);return n?n.value:null}},getAttributeNode:{value:function(t){t=String(t),/[A-Z]/.test(t)&&this.isHTML&&(t=Kn.toASCIILowerCase(t));var r=this._attrsByQName[t];return r?(Array.isArray(r)&&(r=r[0]),r):null}},getAttributeNodeNS:{value:function(t,r){t=t==null?"":String(t),r=String(r);var n=this._attrsByLName[t+"|"+r];return n||null}},hasAttribute:{value:function(t){return t=String(t),/[A-Z]/.test(t)&&this.isHTML&&(t=Kn.toASCIILowerCase(t)),this._attrsByQName[t]!==void 0}},hasAttributeNS:{value:function(t,r){t=t==null?"":String(t),r=String(r);var n=t+"|"+r;return this._attrsByLName[n]!==void 0}},hasAttributes:{value:function(){return this._numattrs>0}},toggleAttribute:{value:function(t,r){t=String(t),AU.isValidName(t)||Kn.InvalidCharacterError(),/[A-Z]/.test(t)&&this.isHTML&&(t=Kn.toASCIILowerCase(t));var n=this._attrsByQName[t];return n===void 0?r===void 0||r===!0?(this._setAttribute(t,""),!0):!1:r===void 0||r===!1?(this.removeAttribute(t),!1):!0}},_setAttribute:{value:function(t,r){var n=this._attrsByQName[t],i;n?Array.isArray(n)&&(n=n[0]):(n=this._newattr(t),i=!0),n.value=r,this._attributes&&(this._attributes[t]=n),i&&this._newattrhook&&this._newattrhook(t,r)}},setAttribute:{value:function(t,r){t=String(t),AU.isValidName(t)||Kn.InvalidCharacterError(),/[A-Z]/.test(t)&&this.isHTML&&(t=Kn.toASCIILowerCase(t)),this._setAttribute(t,String(r))}},_setAttributeNS:{value:function(t,r,n){var i=r.indexOf(":"),s,o;i<0?(s=null,o=r):(s=r.substring(0,i),o=r.substring(i+1)),(t===""||t===void 0)&&(t=null);var a=(t===null?"":t)+"|"+o,l=this._attrsByLName[a],c;l||(l=new xb(this,o,s,t),c=!0,this._attrsByLName[a]=l,this._attributes&&(this._attributes[this._attrKeys.length]=l),this._attrKeys.push(a),this._addQName(l)),l.value=n,c&&this._newattrhook&&this._newattrhook(r,n)}},setAttributeNS:{value:function(t,r,n){t=t==null||t===""?null:String(t),r=String(r),AU.isValidQName(r)||Kn.InvalidCharacterError();var i=r.indexOf(":"),s=i<0?null:r.substring(0,i);(s!==null&&t===null||s==="xml"&&t!==fu.XML||(r==="xmlns"||s==="xmlns")&&t!==fu.XMLNS||t===fu.XMLNS&&!(r==="xmlns"||s==="xmlns"))&&Kn.NamespaceError(),this._setAttributeNS(t,r,String(n))}},setAttributeNode:{value:function(t){if(t.ownerElement!==null&&t.ownerElement!==this)throw new ZA(ZA.INUSE_ATTRIBUTE_ERR);var r=null,n=this._attrsByQName[t.name];if(n){if(Array.isArray(n)||(n=[n]),n.some(function(i){return i===t}))return t;if(t.ownerElement!==null)throw new ZA(ZA.INUSE_ATTRIBUTE_ERR);n.forEach(function(i){this.removeAttributeNode(i)},this),r=n[0]}return this.setAttributeNodeNS(t),r}},setAttributeNodeNS:{value:function(t){if(t.ownerElement!==null)throw new ZA(ZA.INUSE_ATTRIBUTE_ERR);var r=t.namespaceURI,n=(r===null?"":r)+"|"+t.localName,i=this._attrsByLName[n];return i&&this.removeAttributeNode(i),t._setOwnerElement(this),this._attrsByLName[n]=t,this._attributes&&(this._attributes[this._attrKeys.length]=t),this._attrKeys.push(n),this._addQName(t),this._newattrhook&&this._newattrhook(t.name,t.value),i||null}},removeAttribute:{value:function(t){t=String(t),/[A-Z]/.test(t)&&this.isHTML&&(t=Kn.toASCIILowerCase(t));var r=this._attrsByQName[t];if(r){Array.isArray(r)?r.length>2?r=r.shift():(this._attrsByQName[t]=r[1],r=r[0]):this._attrsByQName[t]=void 0;var n=r.namespaceURI,i=(n===null?"":n)+"|"+r.localName;this._attrsByLName[i]=void 0;var s=this._attrKeys.indexOf(i);this._attributes&&(Array.prototype.splice.call(this._attributes,s,1),this._attributes[t]=void 0),this._attrKeys.splice(s,1);var o=r.onchange;r._setOwnerElement(null),o&&o.call(r,this,r.localName,r.value,null),this.rooted&&this.ownerDocument.mutateRemoveAttr(r)}}},removeAttributeNS:{value:function(t,r){t=t==null?"":String(t),r=String(r);var n=t+"|"+r,i=this._attrsByLName[n];if(i){this._attrsByLName[n]=void 0;var s=this._attrKeys.indexOf(n);this._attributes&&Array.prototype.splice.call(this._attributes,s,1),this._attrKeys.splice(s,1),this._removeQName(i);var o=i.onchange;i._setOwnerElement(null),o&&o.call(i,this,i.localName,i.value,null),this.rooted&&this.ownerDocument.mutateRemoveAttr(i)}}},removeAttributeNode:{value:function(t){var r=t.namespaceURI,n=(r===null?"":r)+"|"+t.localName;return this._attrsByLName[n]!==t&&Kn.NotFoundError(),this.removeAttributeNS(r,t.localName),t}},getAttributeNames:{value:function(){var t=this;return this._attrKeys.map(function(r){return t._attrsByLName[r].name})}},_getattr:{value:function(t){var r=this._attrsByQName[t];return r?r.value:null}},_setattr:{value:function(t,r){var n=this._attrsByQName[t],i;n||(n=this._newattr(t),i=!0),n.value=String(r),this._attributes&&(this._attributes[t]=n),i&&this._newattrhook&&this._newattrhook(t,r)}},_newattr:{value:function(t){var r=new xb(this,t,null,null),n="|"+t;return this._attrsByQName[t]=r,this._attrsByLName[n]=r,this._attributes&&(this._attributes[this._attrKeys.length]=r),this._attrKeys.push(n),r}},_addQName:{value:function(e){var t=e.name,r=this._attrsByQName[t];r?Array.isArray(r)?r.push(e):this._attrsByQName[t]=[r,e]:this._attrsByQName[t]=e,this._attributes&&(this._attributes[t]=e)}},_removeQName:{value:function(e){var t=e.name,r=this._attrsByQName[t];if(Array.isArray(r)){var n=r.indexOf(e);Kn.assert(n!==-1),r.length===2?(this._attrsByQName[t]=r[1-n],this._attributes&&(this._attributes[t]=this._attrsByQName[t])):(r.splice(n,1),this._attributes&&this._attributes[t]===e&&(this._attributes[t]=r[0]))}else Kn.assert(r===e),this._attrsByQName[t]=void 0,this._attributes&&(this._attributes[t]=void 0)}},_numattrs:{get:function(){return this._attrKeys.length}},_attr:{value:function(e){return this._attrsByLName[this._attrKeys[e]]}},id:YI.property({name:"id"}),className:YI.property({name:"class"}),classList:{get:function(){var e=this;if(this._classList)return this._classList;var t=new ePe(function(){return e.className||""},function(r){e.className=r});return this._classList=t,t},set:function(e){this.className=e}},matches:{value:function(e){return vU.matches(this,e)}},closest:{value:function(e){var t=this;do{if(t.matches&&t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===mc.ELEMENT_NODE);return null}},querySelector:{value:function(e){return vU(e,this)[0]}},querySelectorAll:{value:function(e){var t=vU(e,this);return t.item?t:new yU(t)}}});Object.defineProperties(eh.prototype,tPe);Object.defineProperties(eh.prototype,rPe);YI.registerChangeHandler(eh,"id",function(e,t,r,n){e.rooted&&(r&&e.ownerDocument.delId(r,e),n&&e.ownerDocument.addId(n,e))});YI.registerChangeHandler(eh,"class",function(e,t,r,n){e._classList&&e._classList._update()});function xb(e,t,r,n,i){this.localName=t,this.prefix=r===null||r===""?null:""+r,this.namespaceURI=n===null||n===""?null:""+n,this.data=i,this._setOwnerElement(e)}xb.prototype=Object.create(Object.prototype,{ownerElement:{get:function(){return this._ownerElement}},_setOwnerElement:{value:function(t){this._ownerElement=t,this.prefix===null&&this.namespaceURI===null&&t?this.onchange=t._attributeChangeHandlers[this.localName]:this.onchange=null}},name:{get:function(){return this.prefix?this.prefix+":"+this.localName:this.localName}},specified:{get:function(){return!0}},value:{get:function(){return this.data},set:function(e){var t=this.data;e=e===void 0?"":e+"",e!==t&&(this.data=e,this.ownerElement&&(this.onchange&&this.onchange(this.ownerElement,this.localName,t,e),this.ownerElement.rooted&&this.ownerElement.ownerDocument.mutateAttr(this,t)))}},cloneNode:{value:function(t){return new xb(null,this.localName,this.prefix,this.namespaceURI,this.data)}},nodeType:{get:function(){return mc.ATTRIBUTE_NODE}},nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return this.value},set:function(e){this.value=e}},textContent:{get:function(){return this.value},set:function(e){e==null&&(e=""),this.value=e}},innerText:{get:function(){return this.value},set:function(e){e==null&&(e=""),this.value=e}}});eh._Attr=xb;function EU(e){BJ.call(this,e);for(var t in e._attrsByQName)this[t]=e._attrsByQName[t];for(var r=0;r<e._attrKeys.length;r++)this[r]=e._attrsByLName[e._attrKeys[r]]}EU.prototype=Object.create(BJ.prototype,{length:{get:function(){return this.element._attrKeys.length},set:function(){}},item:{value:function(e){return e=e>>>0,e>=this.length?null:this.element._attrsByLName[this.element._attrKeys[e]]}}});globalThis.Symbol?.iterator&&(EU.prototype[globalThis.Symbol.iterator]=function(){var e=0,t=this.length,r=this;return{next:function(){return e<t?{value:r.item(e++)}:{done:!0}}}});function DJ(e){this.element=e,this.updateCache()}DJ.prototype=Object.create(Object.prototype,{length:{get:function(){return this.updateCache(),this.childrenByNumber.length}},item:{value:function(t){return this.updateCache(),this.childrenByNumber[t]||null}},namedItem:{value:function(t){return this.updateCache(),this.childrenByName[t]||null}},namedItems:{get:function(){return this.updateCache(),this.childrenByName}},updateCache:{value:function(){var t=/^(a|applet|area|embed|form|frame|frameset|iframe|img|object)$/;if(this.lastModTime!==this.element.lastModTime){this.lastModTime=this.element.lastModTime;for(var r=this.childrenByNumber&&this.childrenByNumber.length||0,n=0;n<r;n++)this[n]=void 0;this.childrenByNumber=[],this.childrenByName=Object.create(null);for(var i=this.element.firstChild;i!==null;i=i.nextSibling)if(i.nodeType===mc.ELEMENT_NODE){this[this.childrenByNumber.length]=i,this.childrenByNumber.push(i);var s=i.getAttribute("id");s&&!this.childrenByName[s]&&(this.childrenByName[s]=i);var o=i.getAttribute("name");o&&this.element.namespaceURI===fu.HTML&&t.test(this.element.localName)&&!this.childrenByName[o]&&(this.childrenByName[s]=i)}}}}});function bU(e){return function(t){return t.localName===e}}function nPe(e){var t=Kn.toASCIILowerCase(e);return t===e?bU(e):function(r){return r.isHTML?r.localName===t:r.localName===e}}function iPe(e){return function(t){return t.namespaceURI===e}}function sPe(e,t){return function(r){return r.namespaceURI===e&&r.localName===t}}function oPe(e){return function(t){return e.every(function(r){return t.classList.contains(r)})}}function aPe(e){return function(t){return t.namespaceURI!==fu.HTML?!1:t.getAttribute("name")===e}}});var _U=_((nSt,QJ)=>{"use strict";QJ.exports=FJ;var kJ=bs(),lPe=up(),MJ=oi(),RJ=MJ.HierarchyRequestError,cPe=MJ.NotFoundError;function FJ(){kJ.call(this)}FJ.prototype=Object.create(kJ.prototype,{hasChildNodes:{value:function(){return!1}},firstChild:{value:null},lastChild:{value:null},insertBefore:{value:function(e,t){if(!e.nodeType)throw new TypeError("not a node");RJ()}},replaceChild:{value:function(e,t){if(!e.nodeType)throw new TypeError("not a node");RJ()}},removeChild:{value:function(e){if(!e.nodeType)throw new TypeError("not a node");cPe()}},removeChildren:{value:function(){}},childNodes:{get:function(){return this._childNodes||(this._childNodes=new lPe),this._childNodes}}})});var wb=_((iSt,LJ)=>{"use strict";LJ.exports=KI;var PJ=_U(),NJ=oi(),uPe=GI(),dPe=pU();function KI(){PJ.call(this)}KI.prototype=Object.create(PJ.prototype,{substringData:{value:function(t,r){if(arguments.length<2)throw new TypeError("Not enough arguments");return t=t>>>0,r=r>>>0,(t>this.data.length||t<0||r<0)&&NJ.IndexSizeError(),this.data.substring(t,t+r)}},appendData:{value:function(t){if(arguments.length<1)throw new TypeError("Not enough arguments");this.data+=String(t)}},insertData:{value:function(t,r){return this.replaceData(t,0,r)}},deleteData:{value:function(t,r){return this.replaceData(t,r,"")}},replaceData:{value:function(t,r,n){var i=this.data,s=i.length;t=t>>>0,r=r>>>0,n=String(n),(t>s||t<0)&&NJ.IndexSizeError(),t+r>s&&(r=s-t);var o=i.substring(0,t),a=i.substring(t+r);this.data=o+n+a}},isEqual:{value:function(t){return this._data===t._data}},length:{get:function(){return this.data.length}}});Object.defineProperties(KI.prototype,uPe);Object.defineProperties(KI.prototype,dPe)});var wU=_((sSt,VJ)=>{"use strict";VJ.exports=xU;var UJ=oi(),OJ=bs(),qJ=wb();function xU(e,t){qJ.call(this),this.nodeType=OJ.TEXT_NODE,this.ownerDocument=e,this._data=t,this._index=void 0}var Sb={get:function(){return this._data},set:function(e){e==null?e="":e=String(e),e!==this._data&&(this._data=e,this.rooted&&this.ownerDocument.mutateValue(this),this.parentNode&&this.parentNode._textchangehook&&this.parentNode._textchangehook(this))}};xU.prototype=Object.create(qJ.prototype,{nodeName:{value:"#text"},nodeValue:Sb,textContent:Sb,innerText:Sb,data:{get:Sb.get,set:function(e){Sb.set.call(this,e===null?"":String(e))}},splitText:{value:function(t){(t>this._data.length||t<0)&&UJ.IndexSizeError();var r=this._data.substring(t),n=this.ownerDocument.createTextNode(r);this.data=this.data.substring(0,t);var i=this.parentNode;return i!==null&&i.insertBefore(n,this.nextSibling),n}},wholeText:{get:function(){for(var t=this.textContent,r=this.nextSibling;r&&r.nodeType===OJ.TEXT_NODE;r=r.nextSibling)t+=r.textContent;return t}},replaceWholeText:{value:UJ.nyi},clone:{value:function(){return new xU(this.ownerDocument,this._data)}}})});var IU=_((oSt,WJ)=>{"use strict";WJ.exports=SU;var fPe=bs(),HJ=wb();function SU(e,t){HJ.call(this),this.nodeType=fPe.COMMENT_NODE,this.ownerDocument=e,this._data=t}var Ib={get:function(){return this._data},set:function(e){e==null?e="":e=String(e),this._data=e,this.rooted&&this.ownerDocument.mutateValue(this)}};SU.prototype=Object.create(HJ.prototype,{nodeName:{value:"#comment"},nodeValue:Ib,textContent:Ib,innerText:Ib,data:{get:Ib.get,set:function(e){Ib.set.call(this,e===null?"":String(e))}},clone:{value:function(){return new SU(this.ownerDocument,this._data)}}})});var DU=_((aSt,YJ)=>{"use strict";YJ.exports=BU;var hPe=bs(),gPe=up(),$J=UI(),zI=XA(),pPe=WI(),GJ=oi();function BU(e){$J.call(this),this.nodeType=hPe.DOCUMENT_FRAGMENT_NODE,this.ownerDocument=e}BU.prototype=Object.create($J.prototype,{nodeName:{value:"#document-fragment"},nodeValue:{get:function(){return null},set:function(){}},textContent:Object.getOwnPropertyDescriptor(zI.prototype,"textContent"),innerText:Object.getOwnPropertyDescriptor(zI.prototype,"innerText"),querySelector:{value:function(e){var t=this.querySelectorAll(e);return t.length?t[0]:null}},querySelectorAll:{value:function(e){var t=Object.create(this);t.isHTML=!0,t.getElementsByTagName=zI.prototype.getElementsByTagName,t.nextElement=Object.getOwnPropertyDescriptor(zI.prototype,"firstElementChild").get;var r=pPe(e,t);return r.item?r:new gPe(r)}},clone:{value:function(){return new BU(this.ownerDocument)}},isEqual:{value:function(t){return!0}},innerHTML:{get:function(){return this.serialize()},set:GJ.nyi},outerHTML:{get:function(){return this.serialize()},set:GJ.nyi}})});var RU=_((lSt,zJ)=>{"use strict";zJ.exports=TU;var mPe=bs(),KJ=wb();function TU(e,t,r){KJ.call(this),this.nodeType=mPe.PROCESSING_INSTRUCTION_NODE,this.ownerDocument=e,this.target=t,this._data=r}var Bb={get:function(){return this._data},set:function(e){e==null?e="":e=String(e),this._data=e,this.rooted&&this.ownerDocument.mutateValue(this)}};TU.prototype=Object.create(KJ.prototype,{nodeName:{get:function(){return this.target}},nodeValue:Bb,textContent:Bb,innerText:Bb,data:{get:Bb.get,set:function(e){Bb.set.call(this,e===null?"":String(e))}},clone:{value:function(){return new TU(this.ownerDocument,this.target,this._data)}},isEqual:{value:function(t){return this.target===t.target&&this._data===t._data}}})});var Db=_((cSt,JJ)=>{"use strict";var kU={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3,SHOW_ALL:4294967295,SHOW_ELEMENT:1,SHOW_ATTRIBUTE:2,SHOW_TEXT:4,SHOW_CDATA_SECTION:8,SHOW_ENTITY_REFERENCE:16,SHOW_ENTITY:32,SHOW_PROCESSING_INSTRUCTION:64,SHOW_COMMENT:128,SHOW_DOCUMENT:256,SHOW_DOCUMENT_TYPE:512,SHOW_DOCUMENT_FRAGMENT:1024,SHOW_NOTATION:2048};JJ.exports=kU.constructor=kU.prototype=kU});var FU=_((dSt,ZJ)=>{"use strict";var uSt=ZJ.exports={nextSkippingChildren:APe,nextAncestorSibling:MU,next:yPe,previous:vPe,deepLastChild:jJ};function APe(e,t){return e===t?null:e.nextSibling!==null?e.nextSibling:MU(e,t)}function MU(e,t){for(e=e.parentNode;e!==null;e=e.parentNode){if(e===t)return null;if(e.nextSibling!==null)return e.nextSibling}return null}function yPe(e,t){var r;return r=e.firstChild,r!==null?r:e===t?null:(r=e.nextSibling,r!==null?r:MU(e,t))}function jJ(e){for(;e.lastChild;)e=e.lastChild;return e}function vPe(e,t){var r;return r=e.previousSibling,r!==null?jJ(r):(r=e.parentNode,r===t?null:r)}});var sj=_((fSt,ij)=>{"use strict";ij.exports=nj;var CPe=bs(),Es=Db(),XJ=FU(),rj=oi(),QU={first:"firstChild",last:"lastChild",next:"firstChild",previous:"lastChild"},NU={first:"nextSibling",last:"previousSibling",next:"nextSibling",previous:"previousSibling"};function ej(e,t){var r,n,i,s,o;for(n=e._currentNode[QU[t]];n!==null;){if(s=e._internalFilter(n),s===Es.FILTER_ACCEPT)return e._currentNode=n,n;if(s===Es.FILTER_SKIP&&(r=n[QU[t]],r!==null)){n=r;continue}for(;n!==null;){if(o=n[NU[t]],o!==null){n=o;break}if(i=n.parentNode,i===null||i===e.root||i===e._currentNode)return null;n=i}}return null}function tj(e,t){var r,n,i;if(r=e._currentNode,r===e.root)return null;for(;;){for(i=r[NU[t]];i!==null;){if(r=i,n=e._internalFilter(r),n===Es.FILTER_ACCEPT)return e._currentNode=r,r;i=r[QU[t]],(n===Es.FILTER_REJECT||i===null)&&(i=r[NU[t]])}if(r=r.parentNode,r===null||r===e.root||e._internalFilter(r)===Es.FILTER_ACCEPT)return null}}function nj(e,t,r){(!e||!e.nodeType)&&rj.NotSupportedError(),this._root=e,this._whatToShow=Number(t)||0,this._filter=r||null,this._active=!1,this._currentNode=e}Object.defineProperties(nj.prototype,{root:{get:function(){return this._root}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},currentNode:{get:function(){return this._currentNode},set:function(t){if(!(t instanceof CPe))throw new TypeError("Not a Node");this._currentNode=t}},_internalFilter:{value:function(t){var r,n;if(this._active&&rj.InvalidStateError(),!(1<<t.nodeType-1&this._whatToShow))return Es.FILTER_SKIP;if(n=this._filter,n===null)r=Es.FILTER_ACCEPT;else{this._active=!0;try{typeof n=="function"?r=n(t):r=n.acceptNode(t)}finally{this._active=!1}}return+r}},parentNode:{value:function(){for(var t=this._currentNode;t!==this.root;){if(t=t.parentNode,t===null)return null;if(this._internalFilter(t)===Es.FILTER_ACCEPT)return this._currentNode=t,t}return null}},firstChild:{value:function(){return ej(this,"first")}},lastChild:{value:function(){return ej(this,"last")}},previousSibling:{value:function(){return tj(this,"previous")}},nextSibling:{value:function(){return tj(this,"next")}},previousNode:{value:function(){var t,r,n,i;for(t=this._currentNode;t!==this._root;){for(n=t.previousSibling;n;n=t.previousSibling)if(t=n,r=this._internalFilter(t),r!==Es.FILTER_REJECT){for(i=t.lastChild;i&&(t=i,r=this._internalFilter(t),r!==Es.FILTER_REJECT);i=t.lastChild);if(r===Es.FILTER_ACCEPT)return this._currentNode=t,t}if(t===this.root||t.parentNode===null)return null;if(t=t.parentNode,this._internalFilter(t)===Es.FILTER_ACCEPT)return this._currentNode=t,t}return null}},nextNode:{value:function(){var t,r,n,i;t=this._currentNode,r=Es.FILTER_ACCEPT;e:for(;;){for(n=t.firstChild;n;n=t.firstChild){if(t=n,r=this._internalFilter(t),r===Es.FILTER_ACCEPT)return this._currentNode=t,t;if(r===Es.FILTER_REJECT)break}for(i=XJ.nextSkippingChildren(t,this.root);i;i=XJ.nextSkippingChildren(t,this.root)){if(t=i,r=this._internalFilter(t),r===Es.FILTER_ACCEPT)return this._currentNode=t,t;if(r===Es.FILTER_SKIP)continue e}return null}}},toString:{value:function(){return"[object TreeWalker]"}}})});var dj=_((hSt,uj)=>{"use strict";uj.exports=cj;var PU=Db(),LU=FU(),lj=oi();function bPe(e,t,r){return r?LU.next(e,t):e===t?null:LU.previous(e,null)}function oj(e,t){for(;t;t=t.parentNode)if(e===t)return!0;return!1}function aj(e,t){var r,n;for(r=e._referenceNode,n=e._pointerBeforeReferenceNode;;){if(n===t)n=!n;else if(r=bPe(r,e._root,t),r===null)return null;var i=e._internalFilter(r);if(i===PU.FILTER_ACCEPT)break}return e._referenceNode=r,e._pointerBeforeReferenceNode=n,r}function cj(e,t,r){(!e||!e.nodeType)&&lj.NotSupportedError(),this._root=e,this._referenceNode=e,this._pointerBeforeReferenceNode=!0,this._whatToShow=Number(t)||0,this._filter=r||null,this._active=!1,e.doc._attachNodeIterator(this)}Object.defineProperties(cj.prototype,{root:{get:function(){return this._root}},referenceNode:{get:function(){return this._referenceNode}},pointerBeforeReferenceNode:{get:function(){return this._pointerBeforeReferenceNode}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},_internalFilter:{value:function(t){var r,n;if(this._active&&lj.InvalidStateError(),!(1<<t.nodeType-1&this._whatToShow))return PU.FILTER_SKIP;if(n=this._filter,n===null)r=PU.FILTER_ACCEPT;else{this._active=!0;try{typeof n=="function"?r=n(t):r=n.acceptNode(t)}finally{this._active=!1}}return+r}},_preremove:{value:function(t){if(!oj(t,this._root)&&oj(t,this._referenceNode)){if(this._pointerBeforeReferenceNode){for(var r=t;r.lastChild;)r=r.lastChild;if(r=LU.next(r,this.root),r){this._referenceNode=r;return}this._pointerBeforeReferenceNode=!1}if(t.previousSibling===null)this._referenceNode=t.parentNode;else{this._referenceNode=t.previousSibling;var n;for(n=this._referenceNode.lastChild;n;n=this._referenceNode.lastChild)this._referenceNode=n}}}},nextNode:{value:function(){return aj(this,!0)}},previousNode:{value:function(){return aj(this,!1)}},detach:{value:function(){}},toString:{value:function(){return"[object NodeIterator]"}}})});var JI=_((gSt,fj)=>{"use strict";fj.exports=_s;function _s(e){if(!e)return Object.create(_s.prototype);this.url=e.replace(/^[ \t\n\r\f]+|[ \t\n\r\f]+$/g,"");var t=_s.pattern.exec(this.url);if(t){if(t[2]&&(this.scheme=t[2]),t[4]){var r=t[4].match(_s.userinfoPattern);if(r&&(this.username=r[1],this.password=r[3],t[4]=t[4].substring(r[0].length)),t[4].match(_s.portPattern)){var n=t[4].lastIndexOf(":");this.host=t[4].substring(0,n),this.port=t[4].substring(n+1)}else this.host=t[4]}t[5]&&(this.path=t[5]),t[6]&&(this.query=t[7]),t[8]&&(this.fragment=t[9])}}_s.pattern=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/;_s.userinfoPattern=/^([^@:]*)(:([^@]*))?@/;_s.portPattern=/:\d+$/;_s.authorityPattern=/^[^:\/?#]+:\/\//;_s.hierarchyPattern=/^[^:\/?#]+:\//;_s.percentEncode=function(t){var r=t.charCodeAt(0);if(r<256)return"%"+r.toString(16);throw Error("can't percent-encode codepoints > 255 yet")};_s.prototype={constructor:_s,isAbsolute:function(){return!!this.scheme},isAuthorityBased:function(){return _s.authorityPattern.test(this.url)},isHierarchical:function(){return _s.hierarchyPattern.test(this.url)},toString:function(){var e="";return this.scheme!==void 0&&(e+=this.scheme+":"),this.isAbsolute()&&(e+="//",(this.username||this.password)&&(e+=this.username||"",this.password&&(e+=":"+this.password),e+="@"),this.host&&(e+=this.host)),this.port!==void 0&&(e+=":"+this.port),this.path!==void 0&&(e+=this.path),this.query!==void 0&&(e+="?"+this.query),this.fragment!==void 0&&(e+="#"+this.fragment),e},resolve:function(e){var t=this,r=new _s(e),n=new _s;return r.scheme!==void 0?(n.scheme=r.scheme,n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=s(r.path),n.query=r.query):(n.scheme=t.scheme,r.host!==void 0?(n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=s(r.path),n.query=r.query):(n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,r.path?(r.path.charAt(0)==="/"?n.path=s(r.path):(n.path=i(t.path,r.path),n.path=s(n.path)),n.query=r.query):(n.path=t.path,r.query!==void 0?n.query=r.query:n.query=t.query))),n.fragment=r.fragment,n.toString();function i(o,a){if(t.host!==void 0&&!t.path)return"/"+a;var l=o.lastIndexOf("/");return l===-1?a:o.substring(0,l+1)+a}function s(o){if(!o)return o;for(var a="";o.length>0;){if(o==="."||o===".."){o="";break}var l=o.substring(0,2),c=o.substring(0,3),u=o.substring(0,4);if(c==="../")o=o.substring(3);else if(l==="./")o=o.substring(2);else if(c==="/./")o="/"+o.substring(3);else if(l==="/."&&o.length===2)o="/";else if(u==="/../"||c==="/.."&&o.length===3)o="/"+o.substring(4),a=a.replace(/\/?[^\/]*$/,"");else{var f=o.match(/(\/?([^\/]*))/)[0];a+=f,o=o.substring(f.length)}}return a}}}});var pj=_((pSt,gj)=>{"use strict";gj.exports=UU;var hj=$A();function UU(e,t){hj.call(this,e,t)}UU.prototype=Object.create(hj.prototype,{constructor:{value:UU}})});var OU=_((mSt,mj)=>{"use strict";mj.exports={Event:$A(),UIEvent:VL(),MouseEvent:WL(),CustomEvent:pj()}});var yj=_(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});e0.hyphenate=e0.parse=void 0;function EPe(e){let t=[],r=0,n=0,i=0,s=0,o=0,a=null;for(;r<e.length;)switch(e.charCodeAt(r++)){case 40:n++;break;case 41:n--;break;case 39:i===0?i=39:i===39&&e.charCodeAt(r-1)!==92&&(i=0);break;case 34:i===0?i=34:i===34&&e.charCodeAt(r-1)!==92&&(i=0);break;case 58:!a&&n===0&&i===0&&(a=Aj(e.substring(o,r-1).trim()),s=r);break;case 59:if(a&&s>0&&n===0&&i===0){let c=e.substring(s,r-1).trim();t.push(a,c),o=r,s=0,a=null}break}if(a&&s){let l=e.slice(s).trim();t.push(a,l)}return t}e0.parse=EPe;function Aj(e){return e.replace(/[a-z][A-Z]/g,t=>t.charAt(0)+"-"+t.charAt(1)).toLowerCase()}e0.hyphenate=Aj});var jI=_((ySt,_j)=>{"use strict";var{parse:_Pe}=yj();_j.exports=function(e){let t=new Ej(e),r={get:function(n,i){return i in n?n[i]:n.getPropertyValue(vj(i))},has:function(n,i){return!0},set:function(n,i,s){return i in n?n[i]=s:n.setProperty(vj(i),s??void 0),!0}};return new Proxy(t,r)};function vj(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ej(e){this._element=e}var Cj="!important";function bj(e){let t={property:{},priority:{}};if(!e)return t;let r=_Pe(e);if(r.length<2)return t;for(let n=0;n<r.length;n+=2){let i=r[n],s=r[n+1];s.endsWith(Cj)&&(t.priority[i]="important",s=s.slice(0,-Cj.length).trim()),t.property[i]=s}return t}var t0={};Ej.prototype=Object.create(Object.prototype,{_parsed:{get:function(){if(!this._parsedStyles||this.cssText!==this._lastParsedText){var e=this.cssText;this._parsedStyles=bj(e),this._lastParsedText=e,delete this._names}return this._parsedStyles}},_serialize:{value:function(){var e=this._parsed,t="";for(var r in e.property)t&&(t+=" "),t+=r+": "+e.property[r],e.priority[r]&&(t+=" !"+e.priority[r]),t+=";";this.cssText=t,this._lastParsedText=t,delete this._names}},cssText:{get:function(){return this._element.getAttribute("style")},set:function(e){this._element.setAttribute("style",e)}},length:{get:function(){return this._names||(this._names=Object.getOwnPropertyNames(this._parsed.property)),this._names.length}},item:{value:function(e){return this._names||(this._names=Object.getOwnPropertyNames(this._parsed.property)),this._names[e]}},getPropertyValue:{value:function(e){return e=e.toLowerCase(),this._parsed.property[e]||""}},getPropertyPriority:{value:function(e){return e=e.toLowerCase(),this._parsed.priority[e]||""}},setProperty:{value:function(e,t,r){if(e=e.toLowerCase(),t==null&&(t=""),r==null&&(r=""),t!==t0&&(t=""+t),t=t.trim(),t===""){this.removeProperty(e);return}if(!(r!==""&&r!==t0&&!/^important$/i.test(r))){var n=this._parsed;if(t===t0){if(!n.property[e])return;r!==""?n.priority[e]="important":delete n.priority[e]}else{if(t.indexOf(";")!==-1)return;var i=bj(e+":"+t);if(Object.getOwnPropertyNames(i.property).length===0||Object.getOwnPropertyNames(i.priority).length!==0)return;for(var s in i.property)n.property[s]=i.property[s],r!==t0&&(r!==""?n.priority[s]="important":n.priority[s]&&delete n.priority[s])}this._serialize()}}},setPropertyValue:{value:function(e,t){return this.setProperty(e,t,t0)}},setPropertyPriority:{value:function(e,t){return this.setProperty(e,t0,t)}},removeProperty:{value:function(e){e=e.toLowerCase();var t=this._parsed;e in t.property&&(delete t.property[e],delete t.priority[e],this._serialize())}}})});var qU=_((vSt,xj)=>{"use strict";var es=JI();xj.exports=Tb;function Tb(){}Tb.prototype=Object.create(Object.prototype,{_url:{get:function(){return new es(this.href)}},protocol:{get:function(){var e=this._url;return e&&e.scheme?e.scheme+":":":"},set:function(e){var t=this.href,r=new es(t);r.isAbsolute()&&(e=e.replace(/:+$/,""),e=e.replace(/[^-+\.a-zA-Z0-9]/g,es.percentEncode),e.length>0&&(r.scheme=e,t=r.toString())),this.href=t}},host:{get:function(){var e=this._url;return e.isAbsolute()&&e.isAuthorityBased()?e.host+(e.port?":"+e.port:""):""},set:function(e){var t=this.href,r=new es(t);r.isAbsolute()&&r.isAuthorityBased()&&(e=e.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,es.percentEncode),e.length>0&&(r.host=e,delete r.port,t=r.toString())),this.href=t}},hostname:{get:function(){var e=this._url;return e.isAbsolute()&&e.isAuthorityBased()?e.host:""},set:function(e){var t=this.href,r=new es(t);r.isAbsolute()&&r.isAuthorityBased()&&(e=e.replace(/^\/+/,""),e=e.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,es.percentEncode),e.length>0&&(r.host=e,t=r.toString())),this.href=t}},port:{get:function(){var e=this._url;return e.isAbsolute()&&e.isAuthorityBased()&&e.port!==void 0?e.port:""},set:function(e){var t=this.href,r=new es(t);r.isAbsolute()&&r.isAuthorityBased()&&(e=""+e,e=e.replace(/[^0-9].*$/,""),e=e.replace(/^0+/,""),e.length===0&&(e="0"),parseInt(e,10)<=65535&&(r.port=e,t=r.toString())),this.href=t}},pathname:{get:function(){var e=this._url;return e.isAbsolute()&&e.isHierarchical()?e.path:""},set:function(e){var t=this.href,r=new es(t);r.isAbsolute()&&r.isHierarchical()&&(e.charAt(0)!=="/"&&(e="/"+e),e=e.replace(/[^-+\._~!$&'()*,;:=@\/a-zA-Z0-9]/g,es.percentEncode),r.path=e,t=r.toString()),this.href=t}},search:{get:function(){var e=this._url;return e.isAbsolute()&&e.isHierarchical()&&e.query!==void 0?"?"+e.query:""},set:function(e){var t=this.href,r=new es(t);r.isAbsolute()&&r.isHierarchical()&&(e.charAt(0)==="?"&&(e=e.substring(1)),e=e.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,es.percentEncode),r.query=e,t=r.toString()),this.href=t}},hash:{get:function(){var e=this._url;return e==null||e.fragment==null||e.fragment===""?"":"#"+e.fragment},set:function(e){var t=this.href,r=new es(t);e.charAt(0)==="#"&&(e=e.substring(1)),e=e.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,es.percentEncode),r.fragment=e,t=r.toString(),this.href=t}},username:{get:function(){var e=this._url;return e.username||""},set:function(e){var t=this.href,r=new es(t);r.isAbsolute()&&(e=e.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\:]/g,es.percentEncode),r.username=e,t=r.toString()),this.href=t}},password:{get:function(){var e=this._url;return e.password||""},set:function(e){var t=this.href,r=new es(t);r.isAbsolute()&&(e===""?r.password=null:(e=e.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\]/g,es.percentEncode),r.password=e),t=r.toString()),this.href=t}},origin:{get:function(){var e=this._url;if(e==null)return"";var t=function(r){var n=[e.scheme,e.host,+e.port||r];return n[0]+"://"+n[1]+(n[2]===r?"":":"+n[2])};switch(e.scheme){case"ftp":return t(21);case"gopher":return t(70);case"http":case"ws":return t(80);case"https":case"wss":return t(443);default:return e.scheme+"://"}}}});Tb._inherit=function(e){Object.getOwnPropertyNames(Tb.prototype).forEach(function(t){if(!(t==="constructor"||t==="href")){var r=Object.getOwnPropertyDescriptor(Tb.prototype,t);Object.defineProperty(e,t,r)}})}});var VU=_((CSt,Ij)=>{"use strict";var wj=lU(),xPe=NI().isApiWritable;Ij.exports=function(e,t,r,n){var i=e.ctor;if(i){var s=e.props||{};if(e.attributes)for(var o in e.attributes){var a=e.attributes[o];(typeof a!="object"||Array.isArray(a))&&(a={type:a}),a.name||(a.name=o.toLowerCase()),s[o]=wj.property(a)}s.constructor={value:i,writable:xPe},i.prototype=Object.create((e.superclass||t).prototype,s),e.events&&SPe(i,e.events),r[e.name]=i}else i=t;return(e.tags||e.tag&&[e.tag]||[]).forEach(function(l){n[l]=i}),i};function Sj(e,t,r,n){this.body=e,this.document=t,this.form=r,this.element=n}Sj.prototype.build=function(){return()=>{}};function wPe(e,t,r,n){var i=e.ownerDocument||Object.create(null),s=e.form||Object.create(null);e[t]=new Sj(n,i,s,e).build()}function SPe(e,t){var r=e.prototype;t.forEach(function(n){Object.defineProperty(r,"on"+n,{get:function(){return this._getEventHandler(n)},set:function(i){this._setEventHandler(n,i)}}),wj.registerChangeHandler(e,"on"+n,wPe)})}});var eB=_(XI=>{"use strict";var HU=bs(),Bj=XA(),IPe=jI(),xa=oi(),Dj=qU(),BPe=VU(),kd=XI.elements={},Rb=Object.create(null);XI.createElement=function(e,t,r){var n=Rb[t]||TPe;return new n(e,t,r)};function Fe(e){return BPe(e,Ze,kd,Rb)}function ai(e){return{get:function(){var t=this._getattr(e);if(t===null)return"";var r=this.doc._resolve(t);return r===null?t:r},set:function(t){this._setattr(e,t)}}}function ZI(e){return{get:function(){var t=this._getattr(e);return t===null?null:t.toLowerCase()==="use-credentials"?"use-credentials":"anonymous"},set:function(t){t==null?this.removeAttribute(e):this._setattr(e,t)}}}var r0={type:["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],missing:""},DPe={A:!0,LINK:!0,BUTTON:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,COMMAND:!0},Ac=function(e,t,r){Ze.call(this,e,t,r),this._form=null},Ze=XI.HTMLElement=Fe({superclass:Bj,name:"HTMLElement",ctor:function(t,r,n){Bj.call(this,t,r,xa.NAMESPACE.HTML,n)},props:{dangerouslySetInnerHTML:{set:function(e){this._innerHTML=e}},innerHTML:{get:function(){return this.serialize()},set:function(e){var t=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,this);t.parse(e===null?"":String(e),!0);for(var r=this instanceof Rb.template?this.content:this;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(t._asDocumentFragment())}},style:{get:function(){return this._style||(this._style=new IPe(this)),this._style},set:function(e){e==null&&(e=""),this._setattr("style",String(e))}},blur:{value:function(){}},focus:{value:function(){}},forceSpellCheck:{value:function(){}},click:{value:function(){if(!this._click_in_progress){this._click_in_progress=!0;try{this._pre_click_activation_steps&&this._pre_click_activation_steps();var e=this.ownerDocument.createEvent("MouseEvent");e.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null);var t=this.dispatchEvent(e);t?this._post_click_activation_steps&&this._post_click_activation_steps(e):this._cancelled_activation_steps&&this._cancelled_activation_steps()}finally{this._click_in_progress=!1}}}},submit:{value:xa.nyi}},attributes:{title:String,lang:String,dir:{type:["ltr","rtl","auto"],missing:""},draggable:{type:["true","false"],treatNullAsEmptyString:!0},spellcheck:{type:["true","false"],missing:""},enterKeyHint:{type:["enter","done","go","next","previous","search","send"],missing:""},autoCapitalize:{type:["off","on","none","sentences","words","characters"],missing:""},autoFocus:Boolean,accessKey:String,nonce:String,hidden:Boolean,translate:{type:["no","yes"],missing:""},tabIndex:{type:"long",default:function(){return this.tagName in DPe||this.contentEditable?0:-1}}},events:["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"]}),TPe=Fe({name:"HTMLUnknownElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}}),yc={form:{get:function(){return this._form}}};Fe({tag:"a",name:"HTMLAnchorElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{_post_click_activation_steps:{value:function(e){this.href&&(this.ownerDocument.defaultView.location=this.href)}}},attributes:{href:ai,ping:String,download:String,target:String,rel:String,media:String,hreflang:String,type:String,referrerPolicy:r0,coords:String,charset:String,name:String,rev:String,shape:String}});Dj._inherit(Rb.a.prototype);Fe({tag:"area",name:"HTMLAreaElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{alt:String,target:String,download:String,rel:String,media:String,href:ai,hreflang:String,type:String,shape:String,coords:String,ping:String,referrerPolicy:r0,noHref:Boolean}});Dj._inherit(Rb.area.prototype);Fe({tag:"br",name:"HTMLBRElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{clear:String}});Fe({tag:"base",name:"HTMLBaseElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{target:String}});Fe({tag:"body",name:"HTMLBodyElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},events:["afterprint","beforeprint","beforeunload","blur","error","focus","hashchange","load","message","offline","online","pagehide","pageshow","popstate","resize","scroll","storage","unload"],attributes:{text:{type:String,treatNullAsEmptyString:!0},link:{type:String,treatNullAsEmptyString:!0},vLink:{type:String,treatNullAsEmptyString:!0},aLink:{type:String,treatNullAsEmptyString:!0},bgColor:{type:String,treatNullAsEmptyString:!0},background:String}});Fe({tag:"button",name:"HTMLButtonElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:yc,attributes:{name:String,value:String,disabled:Boolean,autofocus:Boolean,type:{type:["submit","reset","button","menu"],missing:"submit"},formTarget:String,formAction:ai,formNoValidate:Boolean,formMethod:{type:["get","post","dialog"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""}}});Fe({tag:"dl",name:"HTMLDListElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{compact:Boolean}});Fe({tag:"data",name:"HTMLDataElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{value:String}});Fe({tag:"datalist",name:"HTMLDataListElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Fe({tag:"details",name:"HTMLDetailsElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{open:Boolean}});Fe({tag:"div",name:"HTMLDivElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Fe({tag:"embed",name:"HTMLEmbedElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{src:ai,type:String,width:String,height:String,align:String,name:String}});Fe({tag:"fieldset",name:"HTMLFieldSetElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:yc,attributes:{disabled:Boolean,name:String}});Fe({tag:"form",name:"HTMLFormElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{action:String,autocomplete:{type:["on","off"],missing:"on"},name:String,acceptCharset:{name:"accept-charset"},target:String,noValidate:Boolean,method:{type:["get","post","dialog"],invalid:"get",missing:"get"},enctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"},encoding:{name:"enctype",type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"}}});Fe({tag:"hr",name:"HTMLHRElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String,color:String,noShade:Boolean,size:String,width:String}});Fe({tag:"head",name:"HTMLHeadElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Fe({tags:["h1","h2","h3","h4","h5","h6"],name:"HTMLHeadingElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Fe({tag:"html",name:"HTMLHtmlElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{xmlns:ai,version:String}});Fe({tag:"iframe",name:"HTMLIFrameElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{src:ai,srcdoc:String,name:String,width:String,height:String,seamless:Boolean,allow:Boolean,allowFullscreen:Boolean,allowUserMedia:Boolean,allowPaymentRequest:Boolean,referrerPolicy:r0,loading:{type:["eager","lazy"],treatNullAsEmptyString:!0},align:String,scrolling:String,frameBorder:String,longDesc:ai,marginHeight:{type:String,treatNullAsEmptyString:!0},marginWidth:{type:String,treatNullAsEmptyString:!0}}});Fe({tag:"img",name:"HTMLImageElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{alt:String,src:ai,srcset:String,crossOrigin:ZI,useMap:String,isMap:Boolean,sizes:String,height:{type:"unsigned long",default:0},width:{type:"unsigned long",default:0},referrerPolicy:r0,loading:{type:["eager","lazy"],missing:""},name:String,lowsrc:ai,align:String,hspace:{type:"unsigned long",default:0},vspace:{type:"unsigned long",default:0},longDesc:ai,border:{type:String,treatNullAsEmptyString:!0}}});Fe({tag:"input",name:"HTMLInputElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:{form:yc.form,_post_click_activation_steps:{value:function(e){if(this.type==="checkbox")this.checked=!this.checked;else if(this.type==="radio")for(var t=this.form.getElementsByName(this.name),r=t.length-1;r>=0;r--){var n=t[r];n.checked=n===this}}}},attributes:{name:String,disabled:Boolean,autofocus:Boolean,accept:String,alt:String,max:String,min:String,pattern:String,placeholder:String,step:String,dirName:String,defaultValue:{name:"value"},multiple:Boolean,required:Boolean,readOnly:Boolean,checked:Boolean,value:String,src:ai,defaultChecked:{name:"checked",type:Boolean},size:{type:"unsigned long",default:20,min:1,setmin:1},width:{type:"unsigned long",min:0,setmin:0,default:0},height:{type:"unsigned long",min:0,setmin:0,default:0},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},autocomplete:String,type:{type:["text","hidden","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"],missing:"text"},formTarget:String,formNoValidate:Boolean,formMethod:{type:["get","post"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""},align:String,useMap:String}});Fe({tag:"keygen",name:"HTMLKeygenElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:yc,attributes:{name:String,disabled:Boolean,autofocus:Boolean,challenge:String,keytype:{type:["rsa"],missing:""}}});Fe({tag:"li",name:"HTMLLIElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{value:{type:"long",default:0},type:String}});Fe({tag:"label",name:"HTMLLabelElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:yc,attributes:{htmlFor:{name:"for",type:String}}});Fe({tag:"legend",name:"HTMLLegendElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Fe({tag:"link",name:"HTMLLinkElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{href:ai,rel:String,media:String,hreflang:String,type:String,crossOrigin:ZI,nonce:String,integrity:String,referrerPolicy:r0,imageSizes:String,imageSrcset:String,charset:String,rev:String,target:String}});Fe({tag:"map",name:"HTMLMapElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{name:String}});Fe({tag:"menu",name:"HTMLMenuElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{type:{type:["context","popup","toolbar"],missing:"toolbar"},label:String,compact:Boolean}});Fe({tag:"meta",name:"HTMLMetaElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{name:String,content:String,httpEquiv:{name:"http-equiv",type:String},scheme:String}});Fe({tag:"meter",name:"HTMLMeterElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:yc});Fe({tags:["ins","del"],name:"HTMLModElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{cite:ai,dateTime:String}});Fe({tag:"ol",name:"HTMLOListElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{_numitems:{get:function(){var e=0;return this.childNodes.forEach(function(t){t.nodeType===HU.ELEMENT_NODE&&t.tagName==="LI"&&e++}),e}}},attributes:{type:String,reversed:Boolean,start:{type:"long",default:function(){return this.reversed?this._numitems:1}},compact:Boolean}});Fe({tag:"object",name:"HTMLObjectElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:yc,attributes:{data:ai,type:String,name:String,useMap:String,typeMustMatch:Boolean,width:String,height:String,align:String,archive:String,code:String,declare:Boolean,hspace:{type:"unsigned long",default:0},standby:String,vspace:{type:"unsigned long",default:0},codeBase:ai,codeType:String,border:{type:String,treatNullAsEmptyString:!0}}});Fe({tag:"optgroup",name:"HTMLOptGroupElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{disabled:Boolean,label:String}});Fe({tag:"option",name:"HTMLOptionElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{form:{get:function(){for(var e=this.parentNode;e&&e.nodeType===HU.ELEMENT_NODE;){if(e.localName==="select")return e.form;e=e.parentNode}}},value:{get:function(){return this._getattr("value")||this.text},set:function(e){this._setattr("value",e)}},text:{get:function(){return this.textContent.replace(/[ \t\n\f\r]+/g," ").trim()},set:function(e){this.textContent=e}}},attributes:{disabled:Boolean,defaultSelected:{name:"selected",type:Boolean},label:String}});Fe({tag:"output",name:"HTMLOutputElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:yc,attributes:{name:String}});Fe({tag:"p",name:"HTMLParagraphElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Fe({tag:"param",name:"HTMLParamElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{name:String,value:String,type:String,valueType:String}});Fe({tags:["pre","listing","xmp"],name:"HTMLPreElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{width:{type:"long",default:0}}});Fe({tag:"progress",name:"HTMLProgressElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:yc,attributes:{max:{type:Number,float:!0,default:1,min:0}}});Fe({tags:["q","blockquote"],name:"HTMLQuoteElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{cite:ai}});Fe({tag:"script",name:"HTMLScriptElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{text:{get:function(){for(var e="",t=0,r=this.childNodes.length;t<r;t++){var n=this.childNodes[t];n.nodeType===HU.TEXT_NODE&&(e+=n._data)}return e},set:function(e){this.removeChildren(),e!==null&&e!==""&&this.appendChild(this.ownerDocument.createTextNode(e))}}},attributes:{src:ai,type:String,charset:String,referrerPolicy:r0,defer:Boolean,async:Boolean,nomodule:Boolean,crossOrigin:ZI,nonce:String,integrity:String}});Fe({tag:"select",name:"HTMLSelectElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:{form:yc.form,options:{get:function(){return this.getElementsByTagName("option")}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,multiple:Boolean,required:Boolean,size:{type:"unsigned long",default:0}}});Fe({tag:"span",name:"HTMLSpanElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Fe({tag:"style",name:"HTMLStyleElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{media:String,type:String,scoped:Boolean}});Fe({tag:"caption",name:"HTMLTableCaptionElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{align:String}});Fe({name:"HTMLTableCellElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{colSpan:{type:"unsigned long",default:1},rowSpan:{type:"unsigned long",default:1},scope:{type:["row","col","rowgroup","colgroup"],missing:""},abbr:String,align:String,axis:String,height:String,width:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},noWrap:Boolean,vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}});Fe({tags:["col","colgroup"],name:"HTMLTableColElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{span:{type:"limited unsigned long with fallback",default:1,min:1},align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,width:String}});Fe({tag:"table",name:"HTMLTableElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,border:String,frame:String,rules:String,summary:String,width:String,bgColor:{type:String,treatNullAsEmptyString:!0},cellPadding:{type:String,treatNullAsEmptyString:!0},cellSpacing:{type:String,treatNullAsEmptyString:!0}}});Fe({tag:"template",name:"HTMLTemplateElement",ctor:function(t,r,n){Ze.call(this,t,r,n),this._contentFragment=t._templateDoc.createDocumentFragment()},props:{content:{get:function(){return this._contentFragment}},serialize:{value:function(){return this.content.serialize()}}}});Fe({tag:"tr",name:"HTMLTableRowElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{cells:{get:function(){return this.querySelectorAll("td,th")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}});Fe({tags:["thead","tfoot","tbody"],name:"HTMLTableSectionElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String}});Fe({tag:"textarea",name:"HTMLTextAreaElement",ctor:function(t,r,n){Ac.call(this,t,r,n)},props:{form:yc.form,type:{get:function(){return"textarea"}},defaultValue:{get:function(){return this.textContent},set:function(e){this.textContent=e}},value:{get:function(){return this.defaultValue},set:function(e){this.defaultValue=e}},textLength:{get:function(){return this.value.length}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,placeholder:String,wrap:String,dirName:String,required:Boolean,readOnly:Boolean,rows:{type:"limited unsigned long with fallback",default:2},cols:{type:"limited unsigned long with fallback",default:20},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""}}});Fe({tag:"time",name:"HTMLTimeElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{dateTime:String,pubDate:Boolean}});Fe({tag:"title",name:"HTMLTitleElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{text:{get:function(){return this.textContent}}}});Fe({tag:"ul",name:"HTMLUListElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{type:String,compact:Boolean}});Fe({name:"HTMLMediaElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{src:ai,crossOrigin:ZI,preload:{type:["metadata","none","auto",{value:"",alias:"auto"}],missing:"auto"},loop:Boolean,autoplay:Boolean,mediaGroup:String,controls:Boolean,defaultMuted:{name:"muted",type:Boolean}}});Fe({name:"HTMLAudioElement",tag:"audio",superclass:kd.HTMLMediaElement,ctor:function(t,r,n){kd.HTMLMediaElement.call(this,t,r,n)}});Fe({name:"HTMLVideoElement",tag:"video",superclass:kd.HTMLMediaElement,ctor:function(t,r,n){kd.HTMLMediaElement.call(this,t,r,n)},attributes:{poster:ai,width:{type:"unsigned long",min:0,default:0},height:{type:"unsigned long",min:0,default:0}}});Fe({tag:"td",name:"HTMLTableDataCellElement",superclass:kd.HTMLTableCellElement,ctor:function(t,r,n){kd.HTMLTableCellElement.call(this,t,r,n)}});Fe({tag:"th",name:"HTMLTableHeaderCellElement",superclass:kd.HTMLTableCellElement,ctor:function(t,r,n){kd.HTMLTableCellElement.call(this,t,r,n)}});Fe({tag:"frameset",name:"HTMLFrameSetElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Fe({tag:"frame",name:"HTMLFrameElement",ctor:function(t,r,n){Ze.call(this,t,r,n)}});Fe({tag:"canvas",name:"HTMLCanvasElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{getContext:{value:xa.nyi},probablySupportsContext:{value:xa.nyi},setContext:{value:xa.nyi},transferControlToProxy:{value:xa.nyi},toDataURL:{value:xa.nyi},toBlob:{value:xa.nyi}},attributes:{width:{type:"unsigned long",default:300},height:{type:"unsigned long",default:150}}});Fe({tag:"dialog",name:"HTMLDialogElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{show:{value:xa.nyi},showModal:{value:xa.nyi},close:{value:xa.nyi}},attributes:{open:Boolean,returnValue:String}});Fe({tag:"menuitem",name:"HTMLMenuItemElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},props:{_label:{get:function(){var e=this._getattr("label");return e!==null&&e!==""?e:(e=this.textContent,e.replace(/[ \t\n\f\r]+/g," ").trim())}},label:{get:function(){var e=this._getattr("label");return e!==null?e:this._label},set:function(e){this._setattr("label",e)}}},attributes:{type:{type:["command","checkbox","radio"],missing:"command"},icon:ai,disabled:Boolean,checked:Boolean,radiogroup:String,default:Boolean}});Fe({tag:"source",name:"HTMLSourceElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{srcset:String,sizes:String,media:String,src:ai,type:String,width:String,height:String}});Fe({tag:"track",name:"HTMLTrackElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{src:ai,srclang:String,label:String,default:Boolean,kind:{type:["subtitles","captions","descriptions","chapters","metadata"],missing:"subtitles",invalid:"metadata"}},props:{NONE:{get:function(){return 0}},LOADING:{get:function(){return 1}},LOADED:{get:function(){return 2}},ERROR:{get:function(){return 3}},readyState:{get:xa.nyi},track:{get:xa.nyi}}});Fe({tag:"font",name:"HTMLFontElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{color:{type:String,treatNullAsEmptyString:!0},face:{type:String},size:{type:String}}});Fe({tag:"dir",name:"HTMLDirectoryElement",ctor:function(t,r,n){Ze.call(this,t,r,n)},attributes:{compact:Boolean}});Fe({tags:["abbr","address","article","aside","b","bdi","bdo","cite","content","code","dd","dfn","dt","em","figcaption","figure","footer","header","hgroup","i","kbd","main","mark","nav","noscript","rb","rp","rt","rtc","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr","acronym","basefont","big","center","nobr","noembed","noframes","plaintext","strike","tt"]})});var $U=_(tB=>{"use strict";var Tj=XA(),RPe=VU(),kPe=oi(),MPe=jI(),FPe=tB.elements={},Rj=Object.create(null);tB.createElement=function(e,t,r){var n=Rj[t]||GU;return new n(e,t,r)};function WU(e){return RPe(e,GU,FPe,Rj)}var GU=WU({superclass:Tj,name:"SVGElement",ctor:function(t,r,n){Tj.call(this,t,r,kPe.NAMESPACE.SVG,n)},props:{style:{get:function(){return this._style||(this._style=new MPe(this)),this._style}}}});WU({name:"SVGSVGElement",ctor:function(t,r,n){GU.call(this,t,r,n)},tag:"svg",props:{createSVGRect:{value:function(){return tB.createElement(this.ownerDocument,"rect",null)}}}});WU({tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]})});var Mj=_((_St,kj)=>{"use strict";kj.exports={VALUE:1,ATTR:2,REMOVE_ATTR:3,REMOVE:4,MOVE:5,INSERT:6}});var nB=_((xSt,Hj)=>{"use strict";Hj.exports=Mb;var Us=bs(),QPe=up(),Uj=UI(),th=XA(),NPe=wU(),PPe=IU(),kb=$A(),LPe=DU(),UPe=RU(),OPe=Fb(),qPe=sj(),VPe=dj(),Fj=Db(),Qj=JI(),Nj=WI(),HPe=OU(),rB=OI(),YU=eB(),WPe=$U(),Or=oi(),n0=Mj(),s0=Or.NAMESPACE,KU=NI().isApiWritable;function Mb(e,t){Uj.call(this),this.nodeType=Us.DOCUMENT_NODE,this.isHTML=e,this._address=t||"about:blank",this.readyState="loading",this.implementation=new OPe(this),this.ownerDocument=null,this._contentType=e?"text/html":"application/xml",this.doctype=null,this.documentElement=null,this._templateDocCache=null,this._nodeIterators=null,this._nid=1,this._nextnid=2,this._nodes=[null,this],this.byId=Object.create(null),this.modclock=0}var GPe={event:"Event",customevent:"CustomEvent",uievent:"UIEvent",mouseevent:"MouseEvent"},$Pe={events:"event",htmlevents:"event",mouseevents:"mouseevent",mutationevents:"mutationevent",uievents:"uievent"},i0=function(e,t,r){return{get:function(){var n=e.call(this);return n?n[t]:r},set:function(n){var i=e.call(this);i&&(i[t]=n)}}};function Pj(e,t){var r,n,i;return e===""&&(e=null),rB.isValidQName(t)||Or.InvalidCharacterError(),r=null,n=t,i=t.indexOf(":"),i>=0&&(r=t.substring(0,i),n=t.substring(i+1)),r!==null&&e===null&&Or.NamespaceError(),r==="xml"&&e!==s0.XML&&Or.NamespaceError(),(r==="xmlns"||t==="xmlns")&&e!==s0.XMLNS&&Or.NamespaceError(),e===s0.XMLNS&&!(r==="xmlns"||t==="xmlns")&&Or.NamespaceError(),{namespace:e,prefix:r,localName:n}}Mb.prototype=Object.create(Uj.prototype,{_setMutationHandler:{value:function(e){this.mutationHandler=e}},_dispatchRendererEvent:{value:function(e,t,r){var n=this._nodes[e];n&&n._dispatchEvent(new kb(t,r),!0)}},nodeName:{value:"#document"},nodeValue:{get:function(){return null},set:function(){}},documentURI:{get:function(){return this._address},set:Or.nyi},compatMode:{get:function(){return this._quirks?"BackCompat":"CSS1Compat"}},createTextNode:{value:function(e){return new NPe(this,String(e))}},createComment:{value:function(e){return new PPe(this,e)}},createDocumentFragment:{value:function(){return new LPe(this)}},createProcessingInstruction:{value:function(e,t){return(!rB.isValidName(e)||t.indexOf("?>")!==-1)&&Or.InvalidCharacterError(),new UPe(this,e,t)}},createAttribute:{value:function(e){return e=String(e),rB.isValidName(e)||Or.InvalidCharacterError(),this.isHTML&&(e=Or.toASCIILowerCase(e)),new th._Attr(null,e,null,null,"")}},createAttributeNS:{value:function(e,t){e=e==null||e===""?null:String(e),t=String(t);var r=Pj(e,t);return new th._Attr(null,r.localName,r.prefix,r.namespace,"")}},createElement:{value:function(e){return e=String(e),rB.isValidName(e)||Or.InvalidCharacterError(),this.isHTML?(/[A-Z]/.test(e)&&(e=Or.toASCIILowerCase(e)),YU.createElement(this,e,null)):this.contentType==="application/xhtml+xml"?YU.createElement(this,e,null):new th(this,e,null,null)},writable:KU},createElementNS:{value:function(e,t){e=e==null||e===""?null:String(e),t=String(t);var r=Pj(e,t);return this._createElementNS(r.localName,r.namespace,r.prefix)},writable:KU},_createElementNS:{value:function(e,t,r){return t===s0.HTML?YU.createElement(this,e,r):t===s0.SVG?WPe.createElement(this,e,r):new th(this,e,t,r)}},createEvent:{value:function(t){t=t.toLowerCase();var r=$Pe[t]||t,n=HPe[GPe[r]];if(n){var i=new n;return i._initialized=!1,i}else Or.NotSupportedError()}},createTreeWalker:{value:function(e,t,r){if(!e)throw new TypeError("root argument is required");if(!(e instanceof Us))throw new TypeError("root not a node");return t=t===void 0?Fj.SHOW_ALL:+t,r=r===void 0?null:r,new qPe(e,t,r)}},createNodeIterator:{value:function(e,t,r){if(!e)throw new TypeError("root argument is required");if(!(e instanceof Us))throw new TypeError("root not a node");return t=t===void 0?Fj.SHOW_ALL:+t,r=r===void 0?null:r,new VPe(e,t,r)}},_attachNodeIterator:{value:function(e){this._nodeIterators||(this._nodeIterators=[]),this._nodeIterators.push(e)}},_detachNodeIterator:{value:function(e){var t=this._nodeIterators.indexOf(e);this._nodeIterators.splice(t,1)}},_preremoveNodeIterators:{value:function(e){this._nodeIterators&&this._nodeIterators.forEach(function(t){t._preremove(e)})}},_updateDocTypeElement:{value:function(){this.doctype=this.documentElement=null;for(var t=this.firstChild;t!==null;t=t.nextSibling)t.nodeType===Us.DOCUMENT_TYPE_NODE?this.doctype=t:t.nodeType===Us.ELEMENT_NODE&&(this.documentElement=t)}},insertBefore:{value:function(t,r){return Us.prototype.insertBefore.call(this,t,r),this._updateDocTypeElement(),t}},replaceChild:{value:function(t,r){return Us.prototype.replaceChild.call(this,t,r),this._updateDocTypeElement(),r}},removeChild:{value:function(t){return Us.prototype.removeChild.call(this,t),this._updateDocTypeElement(),t}},getElementById:{value:function(e){var t=this.byId[e];return t?t instanceof Md?t.getFirst():t:null}},_hasMultipleElementsWithId:{value:function(e){return this.byId[e]instanceof Md}},getElementsByName:{value:th.prototype.getElementsByName},getElementsByTagName:{value:th.prototype.getElementsByTagName},getElementsByTagNameNS:{value:th.prototype.getElementsByTagNameNS},getElementsByClassName:{value:th.prototype.getElementsByClassName},adoptNode:{value:function(t){return t.nodeType===Us.DOCUMENT_NODE&&Or.NotSupportedError(),t.nodeType===Us.ATTRIBUTE_NODE||(t.parentNode&&t.parentNode.removeChild(t),t.ownerDocument!==this&&Vj(t,this)),t}},importNode:{value:function(t,r){return this.adoptNode(t.cloneNode(r))},writable:KU},origin:{get:function(){return null}},characterSet:{get:function(){return"UTF-8"}},contentType:{get:function(){return this._contentType}},URL:{get:function(){return this._address}},domain:{get:Or.nyi,set:Or.nyi},referrer:{get:Or.nyi},cookie:{get:Or.nyi,set:Or.nyi},lastModified:{get:Or.nyi},location:{get:function(){return this.defaultView?this.defaultView.location:null},set:Or.nyi},_titleElement:{get:function(){return this.getElementsByTagName("title").item(0)||null}},title:{get:function(){var e=this._titleElement,t=e?e.textContent:"";return t.replace(/[ \t\n\r\f]+/g," ").replace(/(^ )|( $)/g,"")},set:function(e){var t=this._titleElement,r=this.head;!t&&!r||(t||(t=this.createElement("title"),r.appendChild(t)),t.textContent=e)}},dir:i0(function(){var e=this.documentElement;if(e&&e.tagName==="HTML")return e},"dir",""),fgColor:i0(function(){return this.body},"text",""),linkColor:i0(function(){return this.body},"link",""),vlinkColor:i0(function(){return this.body},"vLink",""),alinkColor:i0(function(){return this.body},"aLink",""),bgColor:i0(function(){return this.body},"bgColor",""),charset:{get:function(){return this.characterSet}},inputEncoding:{get:function(){return this.characterSet}},scrollingElement:{get:function(){return this._quirks?this.body:this.documentElement}},body:{get:function(){return Lj(this.documentElement,"body")},set:Or.nyi},head:{get:function(){return Lj(this.documentElement,"head")}},images:{get:Or.nyi},embeds:{get:Or.nyi},plugins:{get:Or.nyi},links:{get:Or.nyi},forms:{get:Or.nyi},scripts:{get:Or.nyi},applets:{get:function(){return[]}},activeElement:{get:function(){return null}},innerHTML:{get:function(){return this.serialize()},set:Or.nyi},outerHTML:{get:function(){return this.serialize()},set:Or.nyi},write:{value:function(e){if(this.isHTML||Or.InvalidStateError(),!!this._parser){this._parser;var t=arguments.join("");this._parser.parse(t)}}},writeln:{value:function(t){this.write(Array.prototype.join.call(arguments,"")+`
`)}},open:{value:function(){this.documentElement=null}},close:{value:function(){this.readyState="interactive",this._dispatchEvent(new kb("readystatechange"),!0),this._dispatchEvent(new kb("DOMContentLoaded"),!0),this.readyState="complete",this._dispatchEvent(new kb("readystatechange"),!0),this.defaultView&&this.defaultView._dispatchEvent(new kb("load"),!0)}},clone:{value:function(){var t=new Mb(this.isHTML,this._address);return t._quirks=this._quirks,t._contentType=this._contentType,t}},cloneNode:{value:function(t){var r=Us.prototype.cloneNode.call(this,!1);if(t)for(var n=this.firstChild;n!==null;n=n.nextSibling)r._appendChild(r.importNode(n,!0));return r._updateDocTypeElement(),r}},isEqual:{value:function(t){return!0}},mutateValue:{value:function(e){this.mutationHandler&&this.mutationHandler({type:n0.VALUE,target:e,data:e.data})}},mutateAttr:{value:function(e,t){this.mutationHandler&&this.mutationHandler({type:n0.ATTR,target:e.ownerElement,attr:e})}},mutateRemoveAttr:{value:function(e){this.mutationHandler&&this.mutationHandler({type:n0.REMOVE_ATTR,target:e.ownerElement,attr:e})}},mutateRemove:{value:function(e){this.mutationHandler&&this.mutationHandler({type:n0.REMOVE,target:e.parentNode,node:e}),qj(e)}},mutateInsert:{value:function(e){Oj(e),this.mutationHandler&&this.mutationHandler({type:n0.INSERT,target:e.parentNode,node:e})}},mutateMove:{value:function(e){this.mutationHandler&&this.mutationHandler({type:n0.MOVE,target:e})}},addId:{value:function(t,r){var n=this.byId[t];n?(n instanceof Md||(n=new Md(n),this.byId[t]=n),n.add(r)):this.byId[t]=r}},delId:{value:function(t,r){var n=this.byId[t];Or.assert(n),n instanceof Md?(n.del(r),n.length===1&&(this.byId[t]=n.downgrade())):this.byId[t]=void 0}},_resolve:{value:function(e){return new Qj(this._documentBaseURL).resolve(e)}},_documentBaseURL:{get:function(){var e=this._address;e==="about:blank"&&(e="/");var t=this.querySelector("base[href]");return t?new Qj(e).resolve(t.getAttribute("href")):e}},_templateDoc:{get:function(){if(!this._templateDocCache){var e=new Mb(this.isHTML,this._address);this._templateDocCache=e._templateDocCache=e}return this._templateDocCache}},querySelector:{value:function(e){return Nj(e,this)[0]}},querySelectorAll:{value:function(e){var t=Nj(e,this);return t.item?t:new QPe(t)}}});var YPe=["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"];YPe.forEach(function(e){Object.defineProperty(Mb.prototype,"on"+e,{get:function(){return this._getEventHandler(e)},set:function(t){this._setEventHandler(e,t)}})});function Lj(e,t){if(e&&e.isHTML){for(var r=e.firstChild;r!==null;r=r.nextSibling)if(r.nodeType===Us.ELEMENT_NODE&&r.localName===t&&r.namespaceURI===s0.HTML)return r}return null}function KPe(e){if(e._nid=e.ownerDocument._nextnid++,e.ownerDocument._nodes[e._nid]=e,e.nodeType===Us.ELEMENT_NODE){var t=e.getAttribute("id");t&&e.ownerDocument.addId(t,e),e._roothook&&e._roothook()}}function zPe(e){if(e.nodeType===Us.ELEMENT_NODE){var t=e.getAttribute("id");t&&e.ownerDocument.delId(t,e)}e.ownerDocument._nodes[e._nid]=void 0,e._nid=void 0}function Oj(e){if(KPe(e),e.nodeType===Us.ELEMENT_NODE)for(var t=e.firstChild;t!==null;t=t.nextSibling)Oj(t)}function qj(e){zPe(e);for(var t=e.firstChild;t!==null;t=t.nextSibling)qj(t)}function Vj(e,t){e.ownerDocument=t,e._lastModTime=void 0,Object.prototype.hasOwnProperty.call(e,"_tagName")&&(e._tagName=void 0);for(var r=e.firstChild;r!==null;r=r.nextSibling)Vj(r,t)}function Md(e){this.nodes=Object.create(null),this.nodes[e._nid]=e,this.length=1,this.firstNode=void 0}Md.prototype.add=function(e){this.nodes[e._nid]||(this.nodes[e._nid]=e,this.length++,this.firstNode=void 0)};Md.prototype.del=function(e){this.nodes[e._nid]&&(delete this.nodes[e._nid],this.length--,this.firstNode=void 0)};Md.prototype.getFirst=function(){if(!this.firstNode){var e;for(e in this.nodes)(this.firstNode===void 0||this.firstNode.compareDocumentPosition(this.nodes[e])&Us.DOCUMENT_POSITION_PRECEDING)&&(this.firstNode=this.nodes[e])}return this.firstNode};Md.prototype.downgrade=function(){if(this.length===1){var e;for(e in this.nodes)return this.nodes[e]}return this}});var sB=_((wSt,Gj)=>{"use strict";Gj.exports=iB;var JPe=bs(),Wj=_U(),jPe=GI();function iB(e,t,r,n){Wj.call(this),this.nodeType=JPe.DOCUMENT_TYPE_NODE,this.ownerDocument=e||null,this.name=t,this.publicId=r||"",this.systemId=n||""}iB.prototype=Object.create(Wj.prototype,{nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return null},set:function(){}},clone:{value:function(){return new iB(this.ownerDocument,this.name,this.publicId,this.systemId)}},isEqual:{value:function(t){return this.name===t.name&&this.publicId===t.publicId&&this.systemId===t.systemId}}});Object.defineProperties(iB.prototype,jPe)});var fB=_((SSt,g7)=>{"use strict";g7.exports=Fr;var ZPe=nB(),XPe=sB(),zU=bs(),at=oi().NAMESPACE,o7=eB(),en=o7.elements,fp=Function.prototype.apply.bind(Array.prototype.push),oB=-1,o0=1,Os=2,cr=3,hu=4,eLe=5,tLe=[],rLe=/^HTML$|^-\/\/W3O\/\/DTD W3 HTML Strict 3\.0\/\/EN\/\/$|^-\/W3C\/DTD HTML 4\.0 Transitional\/EN$|^\+\/\/Silmaril\/\/dtd html Pro v0r11 19970101\/\/|^-\/\/AdvaSoft Ltd\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/AS\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict\/\/|^-\/\/IETF\/\/DTD HTML 2\.0\/\/|^-\/\/IETF\/\/DTD HTML 2\.1E\/\/|^-\/\/IETF\/\/DTD HTML 3\.0\/\/|^-\/\/IETF\/\/DTD HTML 3\.2 Final\/\/|^-\/\/IETF\/\/DTD HTML 3\.2\/\/|^-\/\/IETF\/\/DTD HTML 3\/\/|^-\/\/IETF\/\/DTD HTML Level 0\/\/|^-\/\/IETF\/\/DTD HTML Level 1\/\/|^-\/\/IETF\/\/DTD HTML Level 2\/\/|^-\/\/IETF\/\/DTD HTML Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 0\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict\/\/|^-\/\/IETF\/\/DTD HTML\/\/|^-\/\/Metrius\/\/DTD Metrius Presentational\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 Tables\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 Tables\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD HTML\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD Strict HTML\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML 2\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended 1\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended Relaxed 1\.0\/\/|^-\/\/SoftQuad Software\/\/DTD HoTMetaL PRO 6\.0::19990601::extensions to HTML 4\.0\/\/|^-\/\/SoftQuad\/\/DTD HoTMetaL PRO 4\.0::19971010::extensions to HTML 4\.0\/\/|^-\/\/Spyglass\/\/DTD HTML 2\.0 Extended\/\/|^-\/\/SQ\/\/DTD HTML 2\.0 HoTMetaL \+ extensions\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava HTML\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava Strict HTML\/\/|^-\/\/W3C\/\/DTD HTML 3 1995-03-24\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Draft\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Final\/\/|^-\/\/W3C\/\/DTD HTML 3\.2\/\/|^-\/\/W3C\/\/DTD HTML 3\.2S Draft\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Transitional\/\/|^-\/\/W3C\/\/DTD HTML Experimental 19960712\/\/|^-\/\/W3C\/\/DTD HTML Experimental 970421\/\/|^-\/\/W3C\/\/DTD W3 HTML\/\/|^-\/\/W3O\/\/DTD W3 HTML 3\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML 2\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML\/\//i,nLe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",$j=/^-\/\/W3C\/\/DTD HTML 4\.01 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.01 Transitional\/\//i,iLe=/^-\/\/W3C\/\/DTD XHTML 1\.0 Frameset\/\/|^-\/\/W3C\/\/DTD XHTML 1\.0 Transitional\/\//i,gp=Object.create(null);gp[at.HTML]={__proto__:null,address:!0,applet:!0,area:!0,article:!0,aside:!0,base:!0,basefont:!0,bgsound:!0,blockquote:!0,body:!0,br:!0,button:!0,caption:!0,center:!0,col:!0,colgroup:!0,dd:!0,details:!0,dir:!0,div:!0,dl:!0,dt:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hgroup:!0,hr:!0,html:!0,iframe:!0,img:!0,input:!0,li:!0,link:!0,listing:!0,main:!0,marquee:!0,menu:!0,meta:!0,nav:!0,noembed:!0,noframes:!0,noscript:!0,object:!0,ol:!0,p:!0,param:!0,plaintext:!0,pre:!0,script:!0,section:!0,select:!0,source:!0,style:!0,summary:!0,table:!0,tbody:!0,td:!0,template:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,title:!0,tr:!0,track:!0,ul:!0,wbr:!0,xmp:!0};gp[at.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};gp[at.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0};var ZU=Object.create(null);ZU[at.HTML]={__proto__:null,address:!0,div:!0,p:!0};var a7=Object.create(null);a7[at.HTML]={__proto__:null,dd:!0,dt:!0};var a0=Object.create(null);a0[at.HTML]={__proto__:null,table:!0,thead:!0,tbody:!0,tfoot:!0,tr:!0};var l7=Object.create(null);l7[at.HTML]={__proto__:null,dd:!0,dt:!0,li:!0,menuitem:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0};var c7=Object.create(null);c7[at.HTML]={__proto__:null,caption:!0,colgroup:!0,dd:!0,dt:!0,li:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0,tbody:!0,td:!0,tfoot:!0,th:!0,thead:!0,tr:!0};var cB=Object.create(null);cB[at.HTML]={__proto__:null,table:!0,template:!0,html:!0};var uB=Object.create(null);uB[at.HTML]={__proto__:null,tbody:!0,tfoot:!0,thead:!0,template:!0,html:!0};var XU=Object.create(null);XU[at.HTML]={__proto__:null,tr:!0,template:!0,html:!0};var u7=Object.create(null);u7[at.HTML]={__proto__:null,button:!0,fieldset:!0,input:!0,keygen:!0,object:!0,output:!0,select:!0,textarea:!0,img:!0};var gu=Object.create(null);gu[at.HTML]={__proto__:null,applet:!0,caption:!0,html:!0,table:!0,td:!0,th:!0,marquee:!0,object:!0,template:!0};gu[at.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0};gu[at.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var dB=Object.create(gu);dB[at.HTML]=Object.create(gu[at.HTML]);dB[at.HTML].ol=!0;dB[at.HTML].ul=!0;var eO=Object.create(gu);eO[at.HTML]=Object.create(gu[at.HTML]);eO[at.HTML].button=!0;var d7=Object.create(null);d7[at.HTML]={__proto__:null,html:!0,table:!0,template:!0};var sLe=Object.create(null);sLe[at.HTML]={__proto__:null,optgroup:!0,option:!0};var f7=Object.create(null);f7[at.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0};var h7=Object.create(null);h7[at.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var Yj={__proto__:null,"xlink:actuate":at.XLINK,"xlink:arcrole":at.XLINK,"xlink:href":at.XLINK,"xlink:role":at.XLINK,"xlink:show":at.XLINK,"xlink:title":at.XLINK,"xlink:type":at.XLINK,"xml:base":at.XML,"xml:lang":at.XML,"xml:space":at.XML,xmlns:at.XMLNS,"xmlns:xlink":at.XMLNS},Kj={__proto__:null,attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},zj={__proto__:null,altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},Jj={__proto__:null,0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},oLe={__proto__:null,AElig:198,"AElig;":198,AMP:38,"AMP;":38,Aacute:193,"Aacute;":193,"Abreve;":258,Acirc:194,"Acirc;":194,"Acy;":1040,"Afr;":[55349,56580],Agrave:192,"Agrave;":192,"Alpha;":913,"Amacr;":256,"And;":10835,"Aogon;":260,"Aopf;":[55349,56632],"ApplyFunction;":8289,Aring:197,"Aring;":197,"Ascr;":[55349,56476],"Assign;":8788,Atilde:195,"Atilde;":195,Auml:196,"Auml;":196,"Backslash;":8726,"Barv;":10983,"Barwed;":8966,"Bcy;":1041,"Because;":8757,"Bernoullis;":8492,"Beta;":914,"Bfr;":[55349,56581],"Bopf;":[55349,56633],"Breve;":728,"Bscr;":8492,"Bumpeq;":8782,"CHcy;":1063,COPY:169,"COPY;":169,"Cacute;":262,"Cap;":8914,"CapitalDifferentialD;":8517,"Cayleys;":8493,"Ccaron;":268,Ccedil:199,"Ccedil;":199,"Ccirc;":264,"Cconint;":8752,"Cdot;":266,"Cedilla;":184,"CenterDot;":183,"Cfr;":8493,"Chi;":935,"CircleDot;":8857,"CircleMinus;":8854,"CirclePlus;":8853,"CircleTimes;":8855,"ClockwiseContourIntegral;":8754,"CloseCurlyDoubleQuote;":8221,"CloseCurlyQuote;":8217,"Colon;":8759,"Colone;":10868,"Congruent;":8801,"Conint;":8751,"ContourIntegral;":8750,"Copf;":8450,"Coproduct;":8720,"CounterClockwiseContourIntegral;":8755,"Cross;":10799,"Cscr;":[55349,56478],"Cup;":8915,"CupCap;":8781,"DD;":8517,"DDotrahd;":10513,"DJcy;":1026,"DScy;":1029,"DZcy;":1039,"Dagger;":8225,"Darr;":8609,"Dashv;":10980,"Dcaron;":270,"Dcy;":1044,"Del;":8711,"Delta;":916,"Dfr;":[55349,56583],"DiacriticalAcute;":180,"DiacriticalDot;":729,"DiacriticalDoubleAcute;":733,"DiacriticalGrave;":96,"DiacriticalTilde;":732,"Diamond;":8900,"DifferentialD;":8518,"Dopf;":[55349,56635],"Dot;":168,"DotDot;":8412,"DotEqual;":8784,"DoubleContourIntegral;":8751,"DoubleDot;":168,"DoubleDownArrow;":8659,"DoubleLeftArrow;":8656,"DoubleLeftRightArrow;":8660,"DoubleLeftTee;":10980,"DoubleLongLeftArrow;":10232,"DoubleLongLeftRightArrow;":10234,"DoubleLongRightArrow;":10233,"DoubleRightArrow;":8658,"DoubleRightTee;":8872,"DoubleUpArrow;":8657,"DoubleUpDownArrow;":8661,"DoubleVerticalBar;":8741,"DownArrow;":8595,"DownArrowBar;":10515,"DownArrowUpArrow;":8693,"DownBreve;":785,"DownLeftRightVector;":10576,"DownLeftTeeVector;":10590,"DownLeftVector;":8637,"DownLeftVectorBar;":10582,"DownRightTeeVector;":10591,"DownRightVector;":8641,"DownRightVectorBar;":10583,"DownTee;":8868,"DownTeeArrow;":8615,"Downarrow;":8659,"Dscr;":[55349,56479],"Dstrok;":272,"ENG;":330,ETH:208,"ETH;":208,Eacute:201,"Eacute;":201,"Ecaron;":282,Ecirc:202,"Ecirc;":202,"Ecy;":1069,"Edot;":278,"Efr;":[55349,56584],Egrave:200,"Egrave;":200,"Element;":8712,"Emacr;":274,"EmptySmallSquare;":9723,"EmptyVerySmallSquare;":9643,"Eogon;":280,"Eopf;":[55349,56636],"Epsilon;":917,"Equal;":10869,"EqualTilde;":8770,"Equilibrium;":8652,"Escr;":8496,"Esim;":10867,"Eta;":919,Euml:203,"Euml;":203,"Exists;":8707,"ExponentialE;":8519,"Fcy;":1060,"Ffr;":[55349,56585],"FilledSmallSquare;":9724,"FilledVerySmallSquare;":9642,"Fopf;":[55349,56637],"ForAll;":8704,"Fouriertrf;":8497,"Fscr;":8497,"GJcy;":1027,GT:62,"GT;":62,"Gamma;":915,"Gammad;":988,"Gbreve;":286,"Gcedil;":290,"Gcirc;":284,"Gcy;":1043,"Gdot;":288,"Gfr;":[55349,56586],"Gg;":8921,"Gopf;":[55349,56638],"GreaterEqual;":8805,"GreaterEqualLess;":8923,"GreaterFullEqual;":8807,"GreaterGreater;":10914,"GreaterLess;":8823,"GreaterSlantEqual;":10878,"GreaterTilde;":8819,"Gscr;":[55349,56482],"Gt;":8811,"HARDcy;":1066,"Hacek;":711,"Hat;":94,"Hcirc;":292,"Hfr;":8460,"HilbertSpace;":8459,"Hopf;":8461,"HorizontalLine;":9472,"Hscr;":8459,"Hstrok;":294,"HumpDownHump;":8782,"HumpEqual;":8783,"IEcy;":1045,"IJlig;":306,"IOcy;":1025,Iacute:205,"Iacute;":205,Icirc:206,"Icirc;":206,"Icy;":1048,"Idot;":304,"Ifr;":8465,Igrave:204,"Igrave;":204,"Im;":8465,"Imacr;":298,"ImaginaryI;":8520,"Implies;":8658,"Int;":8748,"Integral;":8747,"Intersection;":8898,"InvisibleComma;":8291,"InvisibleTimes;":8290,"Iogon;":302,"Iopf;":[55349,56640],"Iota;":921,"Iscr;":8464,"Itilde;":296,"Iukcy;":1030,Iuml:207,"Iuml;":207,"Jcirc;":308,"Jcy;":1049,"Jfr;":[55349,56589],"Jopf;":[55349,56641],"Jscr;":[55349,56485],"Jsercy;":1032,"Jukcy;":1028,"KHcy;":1061,"KJcy;":1036,"Kappa;":922,"Kcedil;":310,"Kcy;":1050,"Kfr;":[55349,56590],"Kopf;":[55349,56642],"Kscr;":[55349,56486],"LJcy;":1033,LT:60,"LT;":60,"Lacute;":313,"Lambda;":923,"Lang;":10218,"Laplacetrf;":8466,"Larr;":8606,"Lcaron;":317,"Lcedil;":315,"Lcy;":1051,"LeftAngleBracket;":10216,"LeftArrow;":8592,"LeftArrowBar;":8676,"LeftArrowRightArrow;":8646,"LeftCeiling;":8968,"LeftDoubleBracket;":10214,"LeftDownTeeVector;":10593,"LeftDownVector;":8643,"LeftDownVectorBar;":10585,"LeftFloor;":8970,"LeftRightArrow;":8596,"LeftRightVector;":10574,"LeftTee;":8867,"LeftTeeArrow;":8612,"LeftTeeVector;":10586,"LeftTriangle;":8882,"LeftTriangleBar;":10703,"LeftTriangleEqual;":8884,"LeftUpDownVector;":10577,"LeftUpTeeVector;":10592,"LeftUpVector;":8639,"LeftUpVectorBar;":10584,"LeftVector;":8636,"LeftVectorBar;":10578,"Leftarrow;":8656,"Leftrightarrow;":8660,"LessEqualGreater;":8922,"LessFullEqual;":8806,"LessGreater;":8822,"LessLess;":10913,"LessSlantEqual;":10877,"LessTilde;":8818,"Lfr;":[55349,56591],"Ll;":8920,"Lleftarrow;":8666,"Lmidot;":319,"LongLeftArrow;":10229,"LongLeftRightArrow;":10231,"LongRightArrow;":10230,"Longleftarrow;":10232,"Longleftrightarrow;":10234,"Longrightarrow;":10233,"Lopf;":[55349,56643],"LowerLeftArrow;":8601,"LowerRightArrow;":8600,"Lscr;":8466,"Lsh;":8624,"Lstrok;":321,"Lt;":8810,"Map;":10501,"Mcy;":1052,"MediumSpace;":8287,"Mellintrf;":8499,"Mfr;":[55349,56592],"MinusPlus;":8723,"Mopf;":[55349,56644],"Mscr;":8499,"Mu;":924,"NJcy;":1034,"Nacute;":323,"Ncaron;":327,"Ncedil;":325,"Ncy;":1053,"NegativeMediumSpace;":8203,"NegativeThickSpace;":8203,"NegativeThinSpace;":8203,"NegativeVeryThinSpace;":8203,"NestedGreaterGreater;":8811,"NestedLessLess;":8810,"NewLine;":10,"Nfr;":[55349,56593],"NoBreak;":8288,"NonBreakingSpace;":160,"Nopf;":8469,"Not;":10988,"NotCongruent;":8802,"NotCupCap;":8813,"NotDoubleVerticalBar;":8742,"NotElement;":8713,"NotEqual;":8800,"NotEqualTilde;":[8770,824],"NotExists;":8708,"NotGreater;":8815,"NotGreaterEqual;":8817,"NotGreaterFullEqual;":[8807,824],"NotGreaterGreater;":[8811,824],"NotGreaterLess;":8825,"NotGreaterSlantEqual;":[10878,824],"NotGreaterTilde;":8821,"NotHumpDownHump;":[8782,824],"NotHumpEqual;":[8783,824],"NotLeftTriangle;":8938,"NotLeftTriangleBar;":[10703,824],"NotLeftTriangleEqual;":8940,"NotLess;":8814,"NotLessEqual;":8816,"NotLessGreater;":8824,"NotLessLess;":[8810,824],"NotLessSlantEqual;":[10877,824],"NotLessTilde;":8820,"NotNestedGreaterGreater;":[10914,824],"NotNestedLessLess;":[10913,824],"NotPrecedes;":8832,"NotPrecedesEqual;":[10927,824],"NotPrecedesSlantEqual;":8928,"NotReverseElement;":8716,"NotRightTriangle;":8939,"NotRightTriangleBar;":[10704,824],"NotRightTriangleEqual;":8941,"NotSquareSubset;":[8847,824],"NotSquareSubsetEqual;":8930,"NotSquareSuperset;":[8848,824],"NotSquareSupersetEqual;":8931,"NotSubset;":[8834,8402],"NotSubsetEqual;":8840,"NotSucceeds;":8833,"NotSucceedsEqual;":[10928,824],"NotSucceedsSlantEqual;":8929,"NotSucceedsTilde;":[8831,824],"NotSuperset;":[8835,8402],"NotSupersetEqual;":8841,"NotTilde;":8769,"NotTildeEqual;":8772,"NotTildeFullEqual;":8775,"NotTildeTilde;":8777,"NotVerticalBar;":8740,"Nscr;":[55349,56489],Ntilde:209,"Ntilde;":209,"Nu;":925,"OElig;":338,Oacute:211,"Oacute;":211,Ocirc:212,"Ocirc;":212,"Ocy;":1054,"Odblac;":336,"Ofr;":[55349,56594],Ograve:210,"Ograve;":210,"Omacr;":332,"Omega;":937,"Omicron;":927,"Oopf;":[55349,56646],"OpenCurlyDoubleQuote;":8220,"OpenCurlyQuote;":8216,"Or;":10836,"Oscr;":[55349,56490],Oslash:216,"Oslash;":216,Otilde:213,"Otilde;":213,"Otimes;":10807,Ouml:214,"Ouml;":214,"OverBar;":8254,"OverBrace;":9182,"OverBracket;":9140,"OverParenthesis;":9180,"PartialD;":8706,"Pcy;":1055,"Pfr;":[55349,56595],"Phi;":934,"Pi;":928,"PlusMinus;":177,"Poincareplane;":8460,"Popf;":8473,"Pr;":10939,"Precedes;":8826,"PrecedesEqual;":10927,"PrecedesSlantEqual;":8828,"PrecedesTilde;":8830,"Prime;":8243,"Product;":8719,"Proportion;":8759,"Proportional;":8733,"Pscr;":[55349,56491],"Psi;":936,QUOT:34,"QUOT;":34,"Qfr;":[55349,56596],"Qopf;":8474,"Qscr;":[55349,56492],"RBarr;":10512,REG:174,"REG;":174,"Racute;":340,"Rang;":10219,"Rarr;":8608,"Rarrtl;":10518,"Rcaron;":344,"Rcedil;":342,"Rcy;":1056,"Re;":8476,"ReverseElement;":8715,"ReverseEquilibrium;":8651,"ReverseUpEquilibrium;":10607,"Rfr;":8476,"Rho;":929,"RightAngleBracket;":10217,"RightArrow;":8594,"RightArrowBar;":8677,"RightArrowLeftArrow;":8644,"RightCeiling;":8969,"RightDoubleBracket;":10215,"RightDownTeeVector;":10589,"RightDownVector;":8642,"RightDownVectorBar;":10581,"RightFloor;":8971,"RightTee;":8866,"RightTeeArrow;":8614,"RightTeeVector;":10587,"RightTriangle;":8883,"RightTriangleBar;":10704,"RightTriangleEqual;":8885,"RightUpDownVector;":10575,"RightUpTeeVector;":10588,"RightUpVector;":8638,"RightUpVectorBar;":10580,"RightVector;":8640,"RightVectorBar;":10579,"Rightarrow;":8658,"Ropf;":8477,"RoundImplies;":10608,"Rrightarrow;":8667,"Rscr;":8475,"Rsh;":8625,"RuleDelayed;":10740,"SHCHcy;":1065,"SHcy;":1064,"SOFTcy;":1068,"Sacute;":346,"Sc;":10940,"Scaron;":352,"Scedil;":350,"Scirc;":348,"Scy;":1057,"Sfr;":[55349,56598],"ShortDownArrow;":8595,"ShortLeftArrow;":8592,"ShortRightArrow;":8594,"ShortUpArrow;":8593,"Sigma;":931,"SmallCircle;":8728,"Sopf;":[55349,56650],"Sqrt;":8730,"Square;":9633,"SquareIntersection;":8851,"SquareSubset;":8847,"SquareSubsetEqual;":8849,"SquareSuperset;":8848,"SquareSupersetEqual;":8850,"SquareUnion;":8852,"Sscr;":[55349,56494],"Star;":8902,"Sub;":8912,"Subset;":8912,"SubsetEqual;":8838,"Succeeds;":8827,"SucceedsEqual;":10928,"SucceedsSlantEqual;":8829,"SucceedsTilde;":8831,"SuchThat;":8715,"Sum;":8721,"Sup;":8913,"Superset;":8835,"SupersetEqual;":8839,"Supset;":8913,THORN:222,"THORN;":222,"TRADE;":8482,"TSHcy;":1035,"TScy;":1062,"Tab;":9,"Tau;":932,"Tcaron;":356,"Tcedil;":354,"Tcy;":1058,"Tfr;":[55349,56599],"Therefore;":8756,"Theta;":920,"ThickSpace;":[8287,8202],"ThinSpace;":8201,"Tilde;":8764,"TildeEqual;":8771,"TildeFullEqual;":8773,"TildeTilde;":8776,"Topf;":[55349,56651],"TripleDot;":8411,"Tscr;":[55349,56495],"Tstrok;":358,Uacute:218,"Uacute;":218,"Uarr;":8607,"Uarrocir;":10569,"Ubrcy;":1038,"Ubreve;":364,Ucirc:219,"Ucirc;":219,"Ucy;":1059,"Udblac;":368,"Ufr;":[55349,56600],Ugrave:217,"Ugrave;":217,"Umacr;":362,"UnderBar;":95,"UnderBrace;":9183,"UnderBracket;":9141,"UnderParenthesis;":9181,"Union;":8899,"UnionPlus;":8846,"Uogon;":370,"Uopf;":[55349,56652],"UpArrow;":8593,"UpArrowBar;":10514,"UpArrowDownArrow;":8645,"UpDownArrow;":8597,"UpEquilibrium;":10606,"UpTee;":8869,"UpTeeArrow;":8613,"Uparrow;":8657,"Updownarrow;":8661,"UpperLeftArrow;":8598,"UpperRightArrow;":8599,"Upsi;":978,"Upsilon;":933,"Uring;":366,"Uscr;":[55349,56496],"Utilde;":360,Uuml:220,"Uuml;":220,"VDash;":8875,"Vbar;":10987,"Vcy;":1042,"Vdash;":8873,"Vdashl;":10982,"Vee;":8897,"Verbar;":8214,"Vert;":8214,"VerticalBar;":8739,"VerticalLine;":124,"VerticalSeparator;":10072,"VerticalTilde;":8768,"VeryThinSpace;":8202,"Vfr;":[55349,56601],"Vopf;":[55349,56653],"Vscr;":[55349,56497],"Vvdash;":8874,"Wcirc;":372,"Wedge;":8896,"Wfr;":[55349,56602],"Wopf;":[55349,56654],"Wscr;":[55349,56498],"Xfr;":[55349,56603],"Xi;":926,"Xopf;":[55349,56655],"Xscr;":[55349,56499],"YAcy;":1071,"YIcy;":1031,"YUcy;":1070,Yacute:221,"Yacute;":221,"Ycirc;":374,"Ycy;":1067,"Yfr;":[55349,56604],"Yopf;":[55349,56656],"Yscr;":[55349,56500],"Yuml;":376,"ZHcy;":1046,"Zacute;":377,"Zcaron;":381,"Zcy;":1047,"Zdot;":379,"ZeroWidthSpace;":8203,"Zeta;":918,"Zfr;":8488,"Zopf;":8484,"Zscr;":[55349,56501],aacute:225,"aacute;":225,"abreve;":259,"ac;":8766,"acE;":[8766,819],"acd;":8767,acirc:226,"acirc;":226,acute:180,"acute;":180,"acy;":1072,aelig:230,"aelig;":230,"af;":8289,"afr;":[55349,56606],agrave:224,"agrave;":224,"alefsym;":8501,"aleph;":8501,"alpha;":945,"amacr;":257,"amalg;":10815,amp:38,"amp;":38,"and;":8743,"andand;":10837,"andd;":10844,"andslope;":10840,"andv;":10842,"ang;":8736,"ange;":10660,"angle;":8736,"angmsd;":8737,"angmsdaa;":10664,"angmsdab;":10665,"angmsdac;":10666,"angmsdad;":10667,"angmsdae;":10668,"angmsdaf;":10669,"angmsdag;":10670,"angmsdah;":10671,"angrt;":8735,"angrtvb;":8894,"angrtvbd;":10653,"angsph;":8738,"angst;":197,"angzarr;":9084,"aogon;":261,"aopf;":[55349,56658],"ap;":8776,"apE;":10864,"apacir;":10863,"ape;":8778,"apid;":8779,"apos;":39,"approx;":8776,"approxeq;":8778,aring:229,"aring;":229,"ascr;":[55349,56502],"ast;":42,"asymp;":8776,"asympeq;":8781,atilde:227,"atilde;":227,auml:228,"auml;":228,"awconint;":8755,"awint;":10769,"bNot;":10989,"backcong;":8780,"backepsilon;":1014,"backprime;":8245,"backsim;":8765,"backsimeq;":8909,"barvee;":8893,"barwed;":8965,"barwedge;":8965,"bbrk;":9141,"bbrktbrk;":9142,"bcong;":8780,"bcy;":1073,"bdquo;":8222,"becaus;":8757,"because;":8757,"bemptyv;":10672,"bepsi;":1014,"bernou;":8492,"beta;":946,"beth;":8502,"between;":8812,"bfr;":[55349,56607],"bigcap;":8898,"bigcirc;":9711,"bigcup;":8899,"bigodot;":10752,"bigoplus;":10753,"bigotimes;":10754,"bigsqcup;":10758,"bigstar;":9733,"bigtriangledown;":9661,"bigtriangleup;":9651,"biguplus;":10756,"bigvee;":8897,"bigwedge;":8896,"bkarow;":10509,"blacklozenge;":10731,"blacksquare;":9642,"blacktriangle;":9652,"blacktriangledown;":9662,"blacktriangleleft;":9666,"blacktriangleright;":9656,"blank;":9251,"blk12;":9618,"blk14;":9617,"blk34;":9619,"block;":9608,"bne;":[61,8421],"bnequiv;":[8801,8421],"bnot;":8976,"bopf;":[55349,56659],"bot;":8869,"bottom;":8869,"bowtie;":8904,"boxDL;":9559,"boxDR;":9556,"boxDl;":9558,"boxDr;":9555,"boxH;":9552,"boxHD;":9574,"boxHU;":9577,"boxHd;":9572,"boxHu;":9575,"boxUL;":9565,"boxUR;":9562,"boxUl;":9564,"boxUr;":9561,"boxV;":9553,"boxVH;":9580,"boxVL;":9571,"boxVR;":9568,"boxVh;":9579,"boxVl;":9570,"boxVr;":9567,"boxbox;":10697,"boxdL;":9557,"boxdR;":9554,"boxdl;":9488,"boxdr;":9484,"boxh;":9472,"boxhD;":9573,"boxhU;":9576,"boxhd;":9516,"boxhu;":9524,"boxminus;":8863,"boxplus;":8862,"boxtimes;":8864,"boxuL;":9563,"boxuR;":9560,"boxul;":9496,"boxur;":9492,"boxv;":9474,"boxvH;":9578,"boxvL;":9569,"boxvR;":9566,"boxvh;":9532,"boxvl;":9508,"boxvr;":9500,"bprime;":8245,"breve;":728,brvbar:166,"brvbar;":166,"bscr;":[55349,56503],"bsemi;":8271,"bsim;":8765,"bsime;":8909,"bsol;":92,"bsolb;":10693,"bsolhsub;":10184,"bull;":8226,"bullet;":8226,"bump;":8782,"bumpE;":10926,"bumpe;":8783,"bumpeq;":8783,"cacute;":263,"cap;":8745,"capand;":10820,"capbrcup;":10825,"capcap;":10827,"capcup;":10823,"capdot;":10816,"caps;":[8745,65024],"caret;":8257,"caron;":711,"ccaps;":10829,"ccaron;":269,ccedil:231,"ccedil;":231,"ccirc;":265,"ccups;":10828,"ccupssm;":10832,"cdot;":267,cedil:184,"cedil;":184,"cemptyv;":10674,cent:162,"cent;":162,"centerdot;":183,"cfr;":[55349,56608],"chcy;":1095,"check;":10003,"checkmark;":10003,"chi;":967,"cir;":9675,"cirE;":10691,"circ;":710,"circeq;":8791,"circlearrowleft;":8634,"circlearrowright;":8635,"circledR;":174,"circledS;":9416,"circledast;":8859,"circledcirc;":8858,"circleddash;":8861,"cire;":8791,"cirfnint;":10768,"cirmid;":10991,"cirscir;":10690,"clubs;":9827,"clubsuit;":9827,"colon;":58,"colone;":8788,"coloneq;":8788,"comma;":44,"commat;":64,"comp;":8705,"compfn;":8728,"complement;":8705,"complexes;":8450,"cong;":8773,"congdot;":10861,"conint;":8750,"copf;":[55349,56660],"coprod;":8720,copy:169,"copy;":169,"copysr;":8471,"crarr;":8629,"cross;":10007,"cscr;":[55349,56504],"csub;":10959,"csube;":10961,"csup;":10960,"csupe;":10962,"ctdot;":8943,"cudarrl;":10552,"cudarrr;":10549,"cuepr;":8926,"cuesc;":8927,"cularr;":8630,"cularrp;":10557,"cup;":8746,"cupbrcap;":10824,"cupcap;":10822,"cupcup;":10826,"cupdot;":8845,"cupor;":10821,"cups;":[8746,65024],"curarr;":8631,"curarrm;":10556,"curlyeqprec;":8926,"curlyeqsucc;":8927,"curlyvee;":8910,"curlywedge;":8911,curren:164,"curren;":164,"curvearrowleft;":8630,"curvearrowright;":8631,"cuvee;":8910,"cuwed;":8911,"cwconint;":8754,"cwint;":8753,"cylcty;":9005,"dArr;":8659,"dHar;":10597,"dagger;":8224,"daleth;":8504,"darr;":8595,"dash;":8208,"dashv;":8867,"dbkarow;":10511,"dblac;":733,"dcaron;":271,"dcy;":1076,"dd;":8518,"ddagger;":8225,"ddarr;":8650,"ddotseq;":10871,deg:176,"deg;":176,"delta;":948,"demptyv;":10673,"dfisht;":10623,"dfr;":[55349,56609],"dharl;":8643,"dharr;":8642,"diam;":8900,"diamond;":8900,"diamondsuit;":9830,"diams;":9830,"die;":168,"digamma;":989,"disin;":8946,"div;":247,divide:247,"divide;":247,"divideontimes;":8903,"divonx;":8903,"djcy;":1106,"dlcorn;":8990,"dlcrop;":8973,"dollar;":36,"dopf;":[55349,56661],"dot;":729,"doteq;":8784,"doteqdot;":8785,"dotminus;":8760,"dotplus;":8724,"dotsquare;":8865,"doublebarwedge;":8966,"downarrow;":8595,"downdownarrows;":8650,"downharpoonleft;":8643,"downharpoonright;":8642,"drbkarow;":10512,"drcorn;":8991,"drcrop;":8972,"dscr;":[55349,56505],"dscy;":1109,"dsol;":10742,"dstrok;":273,"dtdot;":8945,"dtri;":9663,"dtrif;":9662,"duarr;":8693,"duhar;":10607,"dwangle;":10662,"dzcy;":1119,"dzigrarr;":10239,"eDDot;":10871,"eDot;":8785,eacute:233,"eacute;":233,"easter;":10862,"ecaron;":283,"ecir;":8790,ecirc:234,"ecirc;":234,"ecolon;":8789,"ecy;":1101,"edot;":279,"ee;":8519,"efDot;":8786,"efr;":[55349,56610],"eg;":10906,egrave:232,"egrave;":232,"egs;":10902,"egsdot;":10904,"el;":10905,"elinters;":9191,"ell;":8467,"els;":10901,"elsdot;":10903,"emacr;":275,"empty;":8709,"emptyset;":8709,"emptyv;":8709,"emsp13;":8196,"emsp14;":8197,"emsp;":8195,"eng;":331,"ensp;":8194,"eogon;":281,"eopf;":[55349,56662],"epar;":8917,"eparsl;":10723,"eplus;":10865,"epsi;":949,"epsilon;":949,"epsiv;":1013,"eqcirc;":8790,"eqcolon;":8789,"eqsim;":8770,"eqslantgtr;":10902,"eqslantless;":10901,"equals;":61,"equest;":8799,"equiv;":8801,"equivDD;":10872,"eqvparsl;":10725,"erDot;":8787,"erarr;":10609,"escr;":8495,"esdot;":8784,"esim;":8770,"eta;":951,eth:240,"eth;":240,euml:235,"euml;":235,"euro;":8364,"excl;":33,"exist;":8707,"expectation;":8496,"exponentiale;":8519,"fallingdotseq;":8786,"fcy;":1092,"female;":9792,"ffilig;":64259,"fflig;":64256,"ffllig;":64260,"ffr;":[55349,56611],"filig;":64257,"fjlig;":[102,106],"flat;":9837,"fllig;":64258,"fltns;":9649,"fnof;":402,"fopf;":[55349,56663],"forall;":8704,"fork;":8916,"forkv;":10969,"fpartint;":10765,frac12:189,"frac12;":189,"frac13;":8531,frac14:188,"frac14;":188,"frac15;":8533,"frac16;":8537,"frac18;":8539,"frac23;":8532,"frac25;":8534,frac34:190,"frac34;":190,"frac35;":8535,"frac38;":8540,"frac45;":8536,"frac56;":8538,"frac58;":8541,"frac78;":8542,"frasl;":8260,"frown;":8994,"fscr;":[55349,56507],"gE;":8807,"gEl;":10892,"gacute;":501,"gamma;":947,"gammad;":989,"gap;":10886,"gbreve;":287,"gcirc;":285,"gcy;":1075,"gdot;":289,"ge;":8805,"gel;":8923,"geq;":8805,"geqq;":8807,"geqslant;":10878,"ges;":10878,"gescc;":10921,"gesdot;":10880,"gesdoto;":10882,"gesdotol;":10884,"gesl;":[8923,65024],"gesles;":10900,"gfr;":[55349,56612],"gg;":8811,"ggg;":8921,"gimel;":8503,"gjcy;":1107,"gl;":8823,"glE;":10898,"gla;":10917,"glj;":10916,"gnE;":8809,"gnap;":10890,"gnapprox;":10890,"gne;":10888,"gneq;":10888,"gneqq;":8809,"gnsim;":8935,"gopf;":[55349,56664],"grave;":96,"gscr;":8458,"gsim;":8819,"gsime;":10894,"gsiml;":10896,gt:62,"gt;":62,"gtcc;":10919,"gtcir;":10874,"gtdot;":8919,"gtlPar;":10645,"gtquest;":10876,"gtrapprox;":10886,"gtrarr;":10616,"gtrdot;":8919,"gtreqless;":8923,"gtreqqless;":10892,"gtrless;":8823,"gtrsim;":8819,"gvertneqq;":[8809,65024],"gvnE;":[8809,65024],"hArr;":8660,"hairsp;":8202,"half;":189,"hamilt;":8459,"hardcy;":1098,"harr;":8596,"harrcir;":10568,"harrw;":8621,"hbar;":8463,"hcirc;":293,"hearts;":9829,"heartsuit;":9829,"hellip;":8230,"hercon;":8889,"hfr;":[55349,56613],"hksearow;":10533,"hkswarow;":10534,"hoarr;":8703,"homtht;":8763,"hookleftarrow;":8617,"hookrightarrow;":8618,"hopf;":[55349,56665],"horbar;":8213,"hscr;":[55349,56509],"hslash;":8463,"hstrok;":295,"hybull;":8259,"hyphen;":8208,iacute:237,"iacute;":237,"ic;":8291,icirc:238,"icirc;":238,"icy;":1080,"iecy;":1077,iexcl:161,"iexcl;":161,"iff;":8660,"ifr;":[55349,56614],igrave:236,"igrave;":236,"ii;":8520,"iiiint;":10764,"iiint;":8749,"iinfin;":10716,"iiota;":8489,"ijlig;":307,"imacr;":299,"image;":8465,"imagline;":8464,"imagpart;":8465,"imath;":305,"imof;":8887,"imped;":437,"in;":8712,"incare;":8453,"infin;":8734,"infintie;":10717,"inodot;":305,"int;":8747,"intcal;":8890,"integers;":8484,"intercal;":8890,"intlarhk;":10775,"intprod;":10812,"iocy;":1105,"iogon;":303,"iopf;":[55349,56666],"iota;":953,"iprod;":10812,iquest:191,"iquest;":191,"iscr;":[55349,56510],"isin;":8712,"isinE;":8953,"isindot;":8949,"isins;":8948,"isinsv;":8947,"isinv;":8712,"it;":8290,"itilde;":297,"iukcy;":1110,iuml:239,"iuml;":239,"jcirc;":309,"jcy;":1081,"jfr;":[55349,56615],"jmath;":567,"jopf;":[55349,56667],"jscr;":[55349,56511],"jsercy;":1112,"jukcy;":1108,"kappa;":954,"kappav;":1008,"kcedil;":311,"kcy;":1082,"kfr;":[55349,56616],"kgreen;":312,"khcy;":1093,"kjcy;":1116,"kopf;":[55349,56668],"kscr;":[55349,56512],"lAarr;":8666,"lArr;":8656,"lAtail;":10523,"lBarr;":10510,"lE;":8806,"lEg;":10891,"lHar;":10594,"lacute;":314,"laemptyv;":10676,"lagran;":8466,"lambda;":955,"lang;":10216,"langd;":10641,"langle;":10216,"lap;":10885,laquo:171,"laquo;":171,"larr;":8592,"larrb;":8676,"larrbfs;":10527,"larrfs;":10525,"larrhk;":8617,"larrlp;":8619,"larrpl;":10553,"larrsim;":10611,"larrtl;":8610,"lat;":10923,"latail;":10521,"late;":10925,"lates;":[10925,65024],"lbarr;":10508,"lbbrk;":10098,"lbrace;":123,"lbrack;":91,"lbrke;":10635,"lbrksld;":10639,"lbrkslu;":10637,"lcaron;":318,"lcedil;":316,"lceil;":8968,"lcub;":123,"lcy;":1083,"ldca;":10550,"ldquo;":8220,"ldquor;":8222,"ldrdhar;":10599,"ldrushar;":10571,"ldsh;":8626,"le;":8804,"leftarrow;":8592,"leftarrowtail;":8610,"leftharpoondown;":8637,"leftharpoonup;":8636,"leftleftarrows;":8647,"leftrightarrow;":8596,"leftrightarrows;":8646,"leftrightharpoons;":8651,"leftrightsquigarrow;":8621,"leftthreetimes;":8907,"leg;":8922,"leq;":8804,"leqq;":8806,"leqslant;":10877,"les;":10877,"lescc;":10920,"lesdot;":10879,"lesdoto;":10881,"lesdotor;":10883,"lesg;":[8922,65024],"lesges;":10899,"lessapprox;":10885,"lessdot;":8918,"lesseqgtr;":8922,"lesseqqgtr;":10891,"lessgtr;":8822,"lesssim;":8818,"lfisht;":10620,"lfloor;":8970,"lfr;":[55349,56617],"lg;":8822,"lgE;":10897,"lhard;":8637,"lharu;":8636,"lharul;":10602,"lhblk;":9604,"ljcy;":1113,"ll;":8810,"llarr;":8647,"llcorner;":8990,"llhard;":10603,"lltri;":9722,"lmidot;":320,"lmoust;":9136,"lmoustache;":9136,"lnE;":8808,"lnap;":10889,"lnapprox;":10889,"lne;":10887,"lneq;":10887,"lneqq;":8808,"lnsim;":8934,"loang;":10220,"loarr;":8701,"lobrk;":10214,"longleftarrow;":10229,"longleftrightarrow;":10231,"longmapsto;":10236,"longrightarrow;":10230,"looparrowleft;":8619,"looparrowright;":8620,"lopar;":10629,"lopf;":[55349,56669],"loplus;":10797,"lotimes;":10804,"lowast;":8727,"lowbar;":95,"loz;":9674,"lozenge;":9674,"lozf;":10731,"lpar;":40,"lparlt;":10643,"lrarr;":8646,"lrcorner;":8991,"lrhar;":8651,"lrhard;":10605,"lrm;":8206,"lrtri;":8895,"lsaquo;":8249,"lscr;":[55349,56513],"lsh;":8624,"lsim;":8818,"lsime;":10893,"lsimg;":10895,"lsqb;":91,"lsquo;":8216,"lsquor;":8218,"lstrok;":322,lt:60,"lt;":60,"ltcc;":10918,"ltcir;":10873,"ltdot;":8918,"lthree;":8907,"ltimes;":8905,"ltlarr;":10614,"ltquest;":10875,"ltrPar;":10646,"ltri;":9667,"ltrie;":8884,"ltrif;":9666,"lurdshar;":10570,"luruhar;":10598,"lvertneqq;":[8808,65024],"lvnE;":[8808,65024],"mDDot;":8762,macr:175,"macr;":175,"male;":9794,"malt;":10016,"maltese;":10016,"map;":8614,"mapsto;":8614,"mapstodown;":8615,"mapstoleft;":8612,"mapstoup;":8613,"marker;":9646,"mcomma;":10793,"mcy;":1084,"mdash;":8212,"measuredangle;":8737,"mfr;":[55349,56618],"mho;":8487,micro:181,"micro;":181,"mid;":8739,"midast;":42,"midcir;":10992,middot:183,"middot;":183,"minus;":8722,"minusb;":8863,"minusd;":8760,"minusdu;":10794,"mlcp;":10971,"mldr;":8230,"mnplus;":8723,"models;":8871,"mopf;":[55349,56670],"mp;":8723,"mscr;":[55349,56514],"mstpos;":8766,"mu;":956,"multimap;":8888,"mumap;":8888,"nGg;":[8921,824],"nGt;":[8811,8402],"nGtv;":[8811,824],"nLeftarrow;":8653,"nLeftrightarrow;":8654,"nLl;":[8920,824],"nLt;":[8810,8402],"nLtv;":[8810,824],"nRightarrow;":8655,"nVDash;":8879,"nVdash;":8878,"nabla;":8711,"nacute;":324,"nang;":[8736,8402],"nap;":8777,"napE;":[10864,824],"napid;":[8779,824],"napos;":329,"napprox;":8777,"natur;":9838,"natural;":9838,"naturals;":8469,nbsp:160,"nbsp;":160,"nbump;":[8782,824],"nbumpe;":[8783,824],"ncap;":10819,"ncaron;":328,"ncedil;":326,"ncong;":8775,"ncongdot;":[10861,824],"ncup;":10818,"ncy;":1085,"ndash;":8211,"ne;":8800,"neArr;":8663,"nearhk;":10532,"nearr;":8599,"nearrow;":8599,"nedot;":[8784,824],"nequiv;":8802,"nesear;":10536,"nesim;":[8770,824],"nexist;":8708,"nexists;":8708,"nfr;":[55349,56619],"ngE;":[8807,824],"nge;":8817,"ngeq;":8817,"ngeqq;":[8807,824],"ngeqslant;":[10878,824],"nges;":[10878,824],"ngsim;":8821,"ngt;":8815,"ngtr;":8815,"nhArr;":8654,"nharr;":8622,"nhpar;":10994,"ni;":8715,"nis;":8956,"nisd;":8954,"niv;":8715,"njcy;":1114,"nlArr;":8653,"nlE;":[8806,824],"nlarr;":8602,"nldr;":8229,"nle;":8816,"nleftarrow;":8602,"nleftrightarrow;":8622,"nleq;":8816,"nleqq;":[8806,824],"nleqslant;":[10877,824],"nles;":[10877,824],"nless;":8814,"nlsim;":8820,"nlt;":8814,"nltri;":8938,"nltrie;":8940,"nmid;":8740,"nopf;":[55349,56671],not:172,"not;":172,"notin;":8713,"notinE;":[8953,824],"notindot;":[8949,824],"notinva;":8713,"notinvb;":8951,"notinvc;":8950,"notni;":8716,"notniva;":8716,"notnivb;":8958,"notnivc;":8957,"npar;":8742,"nparallel;":8742,"nparsl;":[11005,8421],"npart;":[8706,824],"npolint;":10772,"npr;":8832,"nprcue;":8928,"npre;":[10927,824],"nprec;":8832,"npreceq;":[10927,824],"nrArr;":8655,"nrarr;":8603,"nrarrc;":[10547,824],"nrarrw;":[8605,824],"nrightarrow;":8603,"nrtri;":8939,"nrtrie;":8941,"nsc;":8833,"nsccue;":8929,"nsce;":[10928,824],"nscr;":[55349,56515],"nshortmid;":8740,"nshortparallel;":8742,"nsim;":8769,"nsime;":8772,"nsimeq;":8772,"nsmid;":8740,"nspar;":8742,"nsqsube;":8930,"nsqsupe;":8931,"nsub;":8836,"nsubE;":[10949,824],"nsube;":8840,"nsubset;":[8834,8402],"nsubseteq;":8840,"nsubseteqq;":[10949,824],"nsucc;":8833,"nsucceq;":[10928,824],"nsup;":8837,"nsupE;":[10950,824],"nsupe;":8841,"nsupset;":[8835,8402],"nsupseteq;":8841,"nsupseteqq;":[10950,824],"ntgl;":8825,ntilde:241,"ntilde;":241,"ntlg;":8824,"ntriangleleft;":8938,"ntrianglelefteq;":8940,"ntriangleright;":8939,"ntrianglerighteq;":8941,"nu;":957,"num;":35,"numero;":8470,"numsp;":8199,"nvDash;":8877,"nvHarr;":10500,"nvap;":[8781,8402],"nvdash;":8876,"nvge;":[8805,8402],"nvgt;":[62,8402],"nvinfin;":10718,"nvlArr;":10498,"nvle;":[8804,8402],"nvlt;":[60,8402],"nvltrie;":[8884,8402],"nvrArr;":10499,"nvrtrie;":[8885,8402],"nvsim;":[8764,8402],"nwArr;":8662,"nwarhk;":10531,"nwarr;":8598,"nwarrow;":8598,"nwnear;":10535,"oS;":9416,oacute:243,"oacute;":243,"oast;":8859,"ocir;":8858,ocirc:244,"ocirc;":244,"ocy;":1086,"odash;":8861,"odblac;":337,"odiv;":10808,"odot;":8857,"odsold;":10684,"oelig;":339,"ofcir;":10687,"ofr;":[55349,56620],"ogon;":731,ograve:242,"ograve;":242,"ogt;":10689,"ohbar;":10677,"ohm;":937,"oint;":8750,"olarr;":8634,"olcir;":10686,"olcross;":10683,"oline;":8254,"olt;":10688,"omacr;":333,"omega;":969,"omicron;":959,"omid;":10678,"ominus;":8854,"oopf;":[55349,56672],"opar;":10679,"operp;":10681,"oplus;":8853,"or;":8744,"orarr;":8635,"ord;":10845,"order;":8500,"orderof;":8500,ordf:170,"ordf;":170,ordm:186,"ordm;":186,"origof;":8886,"oror;":10838,"orslope;":10839,"orv;":10843,"oscr;":8500,oslash:248,"oslash;":248,"osol;":8856,otilde:245,"otilde;":245,"otimes;":8855,"otimesas;":10806,ouml:246,"ouml;":246,"ovbar;":9021,"par;":8741,para:182,"para;":182,"parallel;":8741,"parsim;":10995,"parsl;":11005,"part;":8706,"pcy;":1087,"percnt;":37,"period;":46,"permil;":8240,"perp;":8869,"pertenk;":8241,"pfr;":[55349,56621],"phi;":966,"phiv;":981,"phmmat;":8499,"phone;":9742,"pi;":960,"pitchfork;":8916,"piv;":982,"planck;":8463,"planckh;":8462,"plankv;":8463,"plus;":43,"plusacir;":10787,"plusb;":8862,"pluscir;":10786,"plusdo;":8724,"plusdu;":10789,"pluse;":10866,plusmn:177,"plusmn;":177,"plussim;":10790,"plustwo;":10791,"pm;":177,"pointint;":10773,"popf;":[55349,56673],pound:163,"pound;":163,"pr;":8826,"prE;":10931,"prap;":10935,"prcue;":8828,"pre;":10927,"prec;":8826,"precapprox;":10935,"preccurlyeq;":8828,"preceq;":10927,"precnapprox;":10937,"precneqq;":10933,"precnsim;":8936,"precsim;":8830,"prime;":8242,"primes;":8473,"prnE;":10933,"prnap;":10937,"prnsim;":8936,"prod;":8719,"profalar;":9006,"profline;":8978,"profsurf;":8979,"prop;":8733,"propto;":8733,"prsim;":8830,"prurel;":8880,"pscr;":[55349,56517],"psi;":968,"puncsp;":8200,"qfr;":[55349,56622],"qint;":10764,"qopf;":[55349,56674],"qprime;":8279,"qscr;":[55349,56518],"quaternions;":8461,"quatint;":10774,"quest;":63,"questeq;":8799,quot:34,"quot;":34,"rAarr;":8667,"rArr;":8658,"rAtail;":10524,"rBarr;":10511,"rHar;":10596,"race;":[8765,817],"racute;":341,"radic;":8730,"raemptyv;":10675,"rang;":10217,"rangd;":10642,"range;":10661,"rangle;":10217,raquo:187,"raquo;":187,"rarr;":8594,"rarrap;":10613,"rarrb;":8677,"rarrbfs;":10528,"rarrc;":10547,"rarrfs;":10526,"rarrhk;":8618,"rarrlp;":8620,"rarrpl;":10565,"rarrsim;":10612,"rarrtl;":8611,"rarrw;":8605,"ratail;":10522,"ratio;":8758,"rationals;":8474,"rbarr;":10509,"rbbrk;":10099,"rbrace;":125,"rbrack;":93,"rbrke;":10636,"rbrksld;":10638,"rbrkslu;":10640,"rcaron;":345,"rcedil;":343,"rceil;":8969,"rcub;":125,"rcy;":1088,"rdca;":10551,"rdldhar;":10601,"rdquo;":8221,"rdquor;":8221,"rdsh;":8627,"real;":8476,"realine;":8475,"realpart;":8476,"reals;":8477,"rect;":9645,reg:174,"reg;":174,"rfisht;":10621,"rfloor;":8971,"rfr;":[55349,56623],"rhard;":8641,"rharu;":8640,"rharul;":10604,"rho;":961,"rhov;":1009,"rightarrow;":8594,"rightarrowtail;":8611,"rightharpoondown;":8641,"rightharpoonup;":8640,"rightleftarrows;":8644,"rightleftharpoons;":8652,"rightrightarrows;":8649,"rightsquigarrow;":8605,"rightthreetimes;":8908,"ring;":730,"risingdotseq;":8787,"rlarr;":8644,"rlhar;":8652,"rlm;":8207,"rmoust;":9137,"rmoustache;":9137,"rnmid;":10990,"roang;":10221,"roarr;":8702,"robrk;":10215,"ropar;":10630,"ropf;":[55349,56675],"roplus;":10798,"rotimes;":10805,"rpar;":41,"rpargt;":10644,"rppolint;":10770,"rrarr;":8649,"rsaquo;":8250,"rscr;":[55349,56519],"rsh;":8625,"rsqb;":93,"rsquo;":8217,"rsquor;":8217,"rthree;":8908,"rtimes;":8906,"rtri;":9657,"rtrie;":8885,"rtrif;":9656,"rtriltri;":10702,"ruluhar;":10600,"rx;":8478,"sacute;":347,"sbquo;":8218,"sc;":8827,"scE;":10932,"scap;":10936,"scaron;":353,"sccue;":8829,"sce;":10928,"scedil;":351,"scirc;":349,"scnE;":10934,"scnap;":10938,"scnsim;":8937,"scpolint;":10771,"scsim;":8831,"scy;":1089,"sdot;":8901,"sdotb;":8865,"sdote;":10854,"seArr;":8664,"searhk;":10533,"searr;":8600,"searrow;":8600,sect:167,"sect;":167,"semi;":59,"seswar;":10537,"setminus;":8726,"setmn;":8726,"sext;":10038,"sfr;":[55349,56624],"sfrown;":8994,"sharp;":9839,"shchcy;":1097,"shcy;":1096,"shortmid;":8739,"shortparallel;":8741,shy:173,"shy;":173,"sigma;":963,"sigmaf;":962,"sigmav;":962,"sim;":8764,"simdot;":10858,"sime;":8771,"simeq;":8771,"simg;":10910,"simgE;":10912,"siml;":10909,"simlE;":10911,"simne;":8774,"simplus;":10788,"simrarr;":10610,"slarr;":8592,"smallsetminus;":8726,"smashp;":10803,"smeparsl;":10724,"smid;":8739,"smile;":8995,"smt;":10922,"smte;":10924,"smtes;":[10924,65024],"softcy;":1100,"sol;":47,"solb;":10692,"solbar;":9023,"sopf;":[55349,56676],"spades;":9824,"spadesuit;":9824,"spar;":8741,"sqcap;":8851,"sqcaps;":[8851,65024],"sqcup;":8852,"sqcups;":[8852,65024],"sqsub;":8847,"sqsube;":8849,"sqsubset;":8847,"sqsubseteq;":8849,"sqsup;":8848,"sqsupe;":8850,"sqsupset;":8848,"sqsupseteq;":8850,"squ;":9633,"square;":9633,"squarf;":9642,"squf;":9642,"srarr;":8594,"sscr;":[55349,56520],"ssetmn;":8726,"ssmile;":8995,"sstarf;":8902,"star;":9734,"starf;":9733,"straightepsilon;":1013,"straightphi;":981,"strns;":175,"sub;":8834,"subE;":10949,"subdot;":10941,"sube;":8838,"subedot;":10947,"submult;":10945,"subnE;":10955,"subne;":8842,"subplus;":10943,"subrarr;":10617,"subset;":8834,"subseteq;":8838,"subseteqq;":10949,"subsetneq;":8842,"subsetneqq;":10955,"subsim;":10951,"subsub;":10965,"subsup;":10963,"succ;":8827,"succapprox;":10936,"succcurlyeq;":8829,"succeq;":10928,"succnapprox;":10938,"succneqq;":10934,"succnsim;":8937,"succsim;":8831,"sum;":8721,"sung;":9834,sup1:185,"sup1;":185,sup2:178,"sup2;":178,sup3:179,"sup3;":179,"sup;":8835,"supE;":10950,"supdot;":10942,"supdsub;":10968,"supe;":8839,"supedot;":10948,"suphsol;":10185,"suphsub;":10967,"suplarr;":10619,"supmult;":10946,"supnE;":10956,"supne;":8843,"supplus;":10944,"supset;":8835,"supseteq;":8839,"supseteqq;":10950,"supsetneq;":8843,"supsetneqq;":10956,"supsim;":10952,"supsub;":10964,"supsup;":10966,"swArr;":8665,"swarhk;":10534,"swarr;":8601,"swarrow;":8601,"swnwar;":10538,szlig:223,"szlig;":223,"target;":8982,"tau;":964,"tbrk;":9140,"tcaron;":357,"tcedil;":355,"tcy;":1090,"tdot;":8411,"telrec;":8981,"tfr;":[55349,56625],"there4;":8756,"therefore;":8756,"theta;":952,"thetasym;":977,"thetav;":977,"thickapprox;":8776,"thicksim;":8764,"thinsp;":8201,"thkap;":8776,"thksim;":8764,thorn:254,"thorn;":254,"tilde;":732,times:215,"times;":215,"timesb;":8864,"timesbar;":10801,"timesd;":10800,"tint;":8749,"toea;":10536,"top;":8868,"topbot;":9014,"topcir;":10993,"topf;":[55349,56677],"topfork;":10970,"tosa;":10537,"tprime;":8244,"trade;":8482,"triangle;":9653,"triangledown;":9663,"triangleleft;":9667,"trianglelefteq;":8884,"triangleq;":8796,"triangleright;":9657,"trianglerighteq;":8885,"tridot;":9708,"trie;":8796,"triminus;":10810,"triplus;":10809,"trisb;":10701,"tritime;":10811,"trpezium;":9186,"tscr;":[55349,56521],"tscy;":1094,"tshcy;":1115,"tstrok;":359,"twixt;":8812,"twoheadleftarrow;":8606,"twoheadrightarrow;":8608,"uArr;":8657,"uHar;":10595,uacute:250,"uacute;":250,"uarr;":8593,"ubrcy;":1118,"ubreve;":365,ucirc:251,"ucirc;":251,"ucy;":1091,"udarr;":8645,"udblac;":369,"udhar;":10606,"ufisht;":10622,"ufr;":[55349,56626],ugrave:249,"ugrave;":249,"uharl;":8639,"uharr;":8638,"uhblk;":9600,"ulcorn;":8988,"ulcorner;":8988,"ulcrop;":8975,"ultri;":9720,"umacr;":363,uml:168,"uml;":168,"uogon;":371,"uopf;":[55349,56678],"uparrow;":8593,"updownarrow;":8597,"upharpoonleft;":8639,"upharpoonright;":8638,"uplus;":8846,"upsi;":965,"upsih;":978,"upsilon;":965,"upuparrows;":8648,"urcorn;":8989,"urcorner;":8989,"urcrop;":8974,"uring;":367,"urtri;":9721,"uscr;":[55349,56522],"utdot;":8944,"utilde;":361,"utri;":9653,"utrif;":9652,"uuarr;":8648,uuml:252,"uuml;":252,"uwangle;":10663,"vArr;":8661,"vBar;":10984,"vBarv;":10985,"vDash;":8872,"vangrt;":10652,"varepsilon;":1013,"varkappa;":1008,"varnothing;":8709,"varphi;":981,"varpi;":982,"varpropto;":8733,"varr;":8597,"varrho;":1009,"varsigma;":962,"varsubsetneq;":[8842,65024],"varsubsetneqq;":[10955,65024],"varsupsetneq;":[8843,65024],"varsupsetneqq;":[10956,65024],"vartheta;":977,"vartriangleleft;":8882,"vartriangleright;":8883,"vcy;":1074,"vdash;":8866,"vee;":8744,"veebar;":8891,"veeeq;":8794,"vellip;":8942,"verbar;":124,"vert;":124,"vfr;":[55349,56627],"vltri;":8882,"vnsub;":[8834,8402],"vnsup;":[8835,8402],"vopf;":[55349,56679],"vprop;":8733,"vrtri;":8883,"vscr;":[55349,56523],"vsubnE;":[10955,65024],"vsubne;":[8842,65024],"vsupnE;":[10956,65024],"vsupne;":[8843,65024],"vzigzag;":10650,"wcirc;":373,"wedbar;":10847,"wedge;":8743,"wedgeq;":8793,"weierp;":8472,"wfr;":[55349,56628],"wopf;":[55349,56680],"wp;":8472,"wr;":8768,"wreath;":8768,"wscr;":[55349,56524],"xcap;":8898,"xcirc;":9711,"xcup;":8899,"xdtri;":9661,"xfr;":[55349,56629],"xhArr;":10234,"xharr;":10231,"xi;":958,"xlArr;":10232,"xlarr;":10229,"xmap;":10236,"xnis;":8955,"xodot;":10752,"xopf;":[55349,56681],"xoplus;":10753,"xotime;":10754,"xrArr;":10233,"xrarr;":10230,"xscr;":[55349,56525],"xsqcup;":10758,"xuplus;":10756,"xutri;":9651,"xvee;":8897,"xwedge;":8896,yacute:253,"yacute;":253,"yacy;":1103,"ycirc;":375,"ycy;":1099,yen:165,"yen;":165,"yfr;":[55349,56630],"yicy;":1111,"yopf;":[55349,56682],"yscr;":[55349,56526],"yucy;":1102,yuml:255,"yuml;":255,"zacute;":378,"zcaron;":382,"zcy;":1079,"zdot;":380,"zeetrf;":8488,"zeta;":950,"zfr;":[55349,56631],"zhcy;":1078,"zigrarr;":8669,"zopf;":[55349,56683],"zscr;":[55349,56527],"zwj;":8205,"zwnj;":8204},jj=/(A(?:Elig;?|MP;?|acute;?|breve;|c(?:irc;?|y;)|fr;|grave;?|lpha;|macr;|nd;|o(?:gon;|pf;)|pplyFunction;|ring;?|s(?:cr;|sign;)|tilde;?|uml;?)|B(?:a(?:ckslash;|r(?:v;|wed;))|cy;|e(?:cause;|rnoullis;|ta;)|fr;|opf;|reve;|scr;|umpeq;)|C(?:Hcy;|OPY;?|a(?:cute;|p(?:;|italDifferentialD;)|yleys;)|c(?:aron;|edil;?|irc;|onint;)|dot;|e(?:dilla;|nterDot;)|fr;|hi;|ircle(?:Dot;|Minus;|Plus;|Times;)|lo(?:ckwiseContourIntegral;|seCurly(?:DoubleQuote;|Quote;))|o(?:lon(?:;|e;)|n(?:gruent;|int;|tourIntegral;)|p(?:f;|roduct;)|unterClockwiseContourIntegral;)|ross;|scr;|up(?:;|Cap;))|D(?:D(?:;|otrahd;)|Jcy;|Scy;|Zcy;|a(?:gger;|rr;|shv;)|c(?:aron;|y;)|el(?:;|ta;)|fr;|i(?:a(?:critical(?:Acute;|Do(?:t;|ubleAcute;)|Grave;|Tilde;)|mond;)|fferentialD;)|o(?:pf;|t(?:;|Dot;|Equal;)|uble(?:ContourIntegral;|Do(?:t;|wnArrow;)|L(?:eft(?:Arrow;|RightArrow;|Tee;)|ong(?:Left(?:Arrow;|RightArrow;)|RightArrow;))|Right(?:Arrow;|Tee;)|Up(?:Arrow;|DownArrow;)|VerticalBar;)|wn(?:Arrow(?:;|Bar;|UpArrow;)|Breve;|Left(?:RightVector;|TeeVector;|Vector(?:;|Bar;))|Right(?:TeeVector;|Vector(?:;|Bar;))|Tee(?:;|Arrow;)|arrow;))|s(?:cr;|trok;))|E(?:NG;|TH;?|acute;?|c(?:aron;|irc;?|y;)|dot;|fr;|grave;?|lement;|m(?:acr;|pty(?:SmallSquare;|VerySmallSquare;))|o(?:gon;|pf;)|psilon;|qu(?:al(?:;|Tilde;)|ilibrium;)|s(?:cr;|im;)|ta;|uml;?|x(?:ists;|ponentialE;))|F(?:cy;|fr;|illed(?:SmallSquare;|VerySmallSquare;)|o(?:pf;|rAll;|uriertrf;)|scr;)|G(?:Jcy;|T;?|amma(?:;|d;)|breve;|c(?:edil;|irc;|y;)|dot;|fr;|g;|opf;|reater(?:Equal(?:;|Less;)|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|scr;|t;)|H(?:ARDcy;|a(?:cek;|t;)|circ;|fr;|ilbertSpace;|o(?:pf;|rizontalLine;)|s(?:cr;|trok;)|ump(?:DownHump;|Equal;))|I(?:Ecy;|Jlig;|Ocy;|acute;?|c(?:irc;?|y;)|dot;|fr;|grave;?|m(?:;|a(?:cr;|ginaryI;)|plies;)|n(?:t(?:;|e(?:gral;|rsection;))|visible(?:Comma;|Times;))|o(?:gon;|pf;|ta;)|scr;|tilde;|u(?:kcy;|ml;?))|J(?:c(?:irc;|y;)|fr;|opf;|s(?:cr;|ercy;)|ukcy;)|K(?:Hcy;|Jcy;|appa;|c(?:edil;|y;)|fr;|opf;|scr;)|L(?:Jcy;|T;?|a(?:cute;|mbda;|ng;|placetrf;|rr;)|c(?:aron;|edil;|y;)|e(?:ft(?:A(?:ngleBracket;|rrow(?:;|Bar;|RightArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|Right(?:Arrow;|Vector;)|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;|rightarrow;)|ss(?:EqualGreater;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;))|fr;|l(?:;|eftarrow;)|midot;|o(?:ng(?:Left(?:Arrow;|RightArrow;)|RightArrow;|left(?:arrow;|rightarrow;)|rightarrow;)|pf;|wer(?:LeftArrow;|RightArrow;))|s(?:cr;|h;|trok;)|t;)|M(?:ap;|cy;|e(?:diumSpace;|llintrf;)|fr;|inusPlus;|opf;|scr;|u;)|N(?:Jcy;|acute;|c(?:aron;|edil;|y;)|e(?:gative(?:MediumSpace;|Thi(?:ckSpace;|nSpace;)|VeryThinSpace;)|sted(?:GreaterGreater;|LessLess;)|wLine;)|fr;|o(?:Break;|nBreakingSpace;|pf;|t(?:;|C(?:ongruent;|upCap;)|DoubleVerticalBar;|E(?:lement;|qual(?:;|Tilde;)|xists;)|Greater(?:;|Equal;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|Hump(?:DownHump;|Equal;)|Le(?:ftTriangle(?:;|Bar;|Equal;)|ss(?:;|Equal;|Greater;|Less;|SlantEqual;|Tilde;))|Nested(?:GreaterGreater;|LessLess;)|Precedes(?:;|Equal;|SlantEqual;)|R(?:everseElement;|ightTriangle(?:;|Bar;|Equal;))|S(?:quareSu(?:bset(?:;|Equal;)|perset(?:;|Equal;))|u(?:bset(?:;|Equal;)|cceeds(?:;|Equal;|SlantEqual;|Tilde;)|perset(?:;|Equal;)))|Tilde(?:;|Equal;|FullEqual;|Tilde;)|VerticalBar;))|scr;|tilde;?|u;)|O(?:Elig;|acute;?|c(?:irc;?|y;)|dblac;|fr;|grave;?|m(?:acr;|ega;|icron;)|opf;|penCurly(?:DoubleQuote;|Quote;)|r;|s(?:cr;|lash;?)|ti(?:lde;?|mes;)|uml;?|ver(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;))|P(?:artialD;|cy;|fr;|hi;|i;|lusMinus;|o(?:incareplane;|pf;)|r(?:;|ecedes(?:;|Equal;|SlantEqual;|Tilde;)|ime;|o(?:duct;|portion(?:;|al;)))|s(?:cr;|i;))|Q(?:UOT;?|fr;|opf;|scr;)|R(?:Barr;|EG;?|a(?:cute;|ng;|rr(?:;|tl;))|c(?:aron;|edil;|y;)|e(?:;|verse(?:E(?:lement;|quilibrium;)|UpEquilibrium;))|fr;|ho;|ight(?:A(?:ngleBracket;|rrow(?:;|Bar;|LeftArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;)|o(?:pf;|undImplies;)|rightarrow;|s(?:cr;|h;)|uleDelayed;)|S(?:H(?:CHcy;|cy;)|OFTcy;|acute;|c(?:;|aron;|edil;|irc;|y;)|fr;|hort(?:DownArrow;|LeftArrow;|RightArrow;|UpArrow;)|igma;|mallCircle;|opf;|q(?:rt;|uare(?:;|Intersection;|Su(?:bset(?:;|Equal;)|perset(?:;|Equal;))|Union;))|scr;|tar;|u(?:b(?:;|set(?:;|Equal;))|c(?:ceeds(?:;|Equal;|SlantEqual;|Tilde;)|hThat;)|m;|p(?:;|erset(?:;|Equal;)|set;)))|T(?:HORN;?|RADE;|S(?:Hcy;|cy;)|a(?:b;|u;)|c(?:aron;|edil;|y;)|fr;|h(?:e(?:refore;|ta;)|i(?:ckSpace;|nSpace;))|ilde(?:;|Equal;|FullEqual;|Tilde;)|opf;|ripleDot;|s(?:cr;|trok;))|U(?:a(?:cute;?|rr(?:;|ocir;))|br(?:cy;|eve;)|c(?:irc;?|y;)|dblac;|fr;|grave;?|macr;|n(?:der(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;)|ion(?:;|Plus;))|o(?:gon;|pf;)|p(?:Arrow(?:;|Bar;|DownArrow;)|DownArrow;|Equilibrium;|Tee(?:;|Arrow;)|arrow;|downarrow;|per(?:LeftArrow;|RightArrow;)|si(?:;|lon;))|ring;|scr;|tilde;|uml;?)|V(?:Dash;|bar;|cy;|dash(?:;|l;)|e(?:e;|r(?:bar;|t(?:;|ical(?:Bar;|Line;|Separator;|Tilde;))|yThinSpace;))|fr;|opf;|scr;|vdash;)|W(?:circ;|edge;|fr;|opf;|scr;)|X(?:fr;|i;|opf;|scr;)|Y(?:Acy;|Icy;|Ucy;|acute;?|c(?:irc;|y;)|fr;|opf;|scr;|uml;)|Z(?:Hcy;|acute;|c(?:aron;|y;)|dot;|e(?:roWidthSpace;|ta;)|fr;|opf;|scr;)|a(?:acute;?|breve;|c(?:;|E;|d;|irc;?|ute;?|y;)|elig;?|f(?:;|r;)|grave;?|l(?:e(?:fsym;|ph;)|pha;)|m(?:a(?:cr;|lg;)|p;?)|n(?:d(?:;|and;|d;|slope;|v;)|g(?:;|e;|le;|msd(?:;|a(?:a;|b;|c;|d;|e;|f;|g;|h;))|rt(?:;|vb(?:;|d;))|s(?:ph;|t;)|zarr;))|o(?:gon;|pf;)|p(?:;|E;|acir;|e;|id;|os;|prox(?:;|eq;))|ring;?|s(?:cr;|t;|ymp(?:;|eq;))|tilde;?|uml;?|w(?:conint;|int;))|b(?:Not;|a(?:ck(?:cong;|epsilon;|prime;|sim(?:;|eq;))|r(?:vee;|wed(?:;|ge;)))|brk(?:;|tbrk;)|c(?:ong;|y;)|dquo;|e(?:caus(?:;|e;)|mptyv;|psi;|rnou;|t(?:a;|h;|ween;))|fr;|ig(?:c(?:ap;|irc;|up;)|o(?:dot;|plus;|times;)|s(?:qcup;|tar;)|triangle(?:down;|up;)|uplus;|vee;|wedge;)|karow;|l(?:a(?:ck(?:lozenge;|square;|triangle(?:;|down;|left;|right;))|nk;)|k(?:1(?:2;|4;)|34;)|ock;)|n(?:e(?:;|quiv;)|ot;)|o(?:pf;|t(?:;|tom;)|wtie;|x(?:D(?:L;|R;|l;|r;)|H(?:;|D;|U;|d;|u;)|U(?:L;|R;|l;|r;)|V(?:;|H;|L;|R;|h;|l;|r;)|box;|d(?:L;|R;|l;|r;)|h(?:;|D;|U;|d;|u;)|minus;|plus;|times;|u(?:L;|R;|l;|r;)|v(?:;|H;|L;|R;|h;|l;|r;)))|prime;|r(?:eve;|vbar;?)|s(?:cr;|emi;|im(?:;|e;)|ol(?:;|b;|hsub;))|u(?:ll(?:;|et;)|mp(?:;|E;|e(?:;|q;))))|c(?:a(?:cute;|p(?:;|and;|brcup;|c(?:ap;|up;)|dot;|s;)|r(?:et;|on;))|c(?:a(?:ps;|ron;)|edil;?|irc;|ups(?:;|sm;))|dot;|e(?:dil;?|mptyv;|nt(?:;|erdot;|))|fr;|h(?:cy;|eck(?:;|mark;)|i;)|ir(?:;|E;|c(?:;|eq;|le(?:arrow(?:left;|right;)|d(?:R;|S;|ast;|circ;|dash;)))|e;|fnint;|mid;|scir;)|lubs(?:;|uit;)|o(?:lon(?:;|e(?:;|q;))|m(?:ma(?:;|t;)|p(?:;|fn;|le(?:ment;|xes;)))|n(?:g(?:;|dot;)|int;)|p(?:f;|rod;|y(?:;|sr;|)))|r(?:arr;|oss;)|s(?:cr;|u(?:b(?:;|e;)|p(?:;|e;)))|tdot;|u(?:darr(?:l;|r;)|e(?:pr;|sc;)|larr(?:;|p;)|p(?:;|brcap;|c(?:ap;|up;)|dot;|or;|s;)|r(?:arr(?:;|m;)|ly(?:eq(?:prec;|succ;)|vee;|wedge;)|ren;?|vearrow(?:left;|right;))|vee;|wed;)|w(?:conint;|int;)|ylcty;)|d(?:Arr;|Har;|a(?:gger;|leth;|rr;|sh(?:;|v;))|b(?:karow;|lac;)|c(?:aron;|y;)|d(?:;|a(?:gger;|rr;)|otseq;)|e(?:g;?|lta;|mptyv;)|f(?:isht;|r;)|har(?:l;|r;)|i(?:am(?:;|ond(?:;|suit;)|s;)|e;|gamma;|sin;|v(?:;|ide(?:;|ontimes;|)|onx;))|jcy;|lc(?:orn;|rop;)|o(?:llar;|pf;|t(?:;|eq(?:;|dot;)|minus;|plus;|square;)|ublebarwedge;|wn(?:arrow;|downarrows;|harpoon(?:left;|right;)))|r(?:bkarow;|c(?:orn;|rop;))|s(?:c(?:r;|y;)|ol;|trok;)|t(?:dot;|ri(?:;|f;))|u(?:arr;|har;)|wangle;|z(?:cy;|igrarr;))|e(?:D(?:Dot;|ot;)|a(?:cute;?|ster;)|c(?:aron;|ir(?:;|c;?)|olon;|y;)|dot;|e;|f(?:Dot;|r;)|g(?:;|rave;?|s(?:;|dot;))|l(?:;|inters;|l;|s(?:;|dot;))|m(?:acr;|pty(?:;|set;|v;)|sp(?:1(?:3;|4;)|;))|n(?:g;|sp;)|o(?:gon;|pf;)|p(?:ar(?:;|sl;)|lus;|si(?:;|lon;|v;))|q(?:c(?:irc;|olon;)|s(?:im;|lant(?:gtr;|less;))|u(?:als;|est;|iv(?:;|DD;))|vparsl;)|r(?:Dot;|arr;)|s(?:cr;|dot;|im;)|t(?:a;|h;?)|u(?:ml;?|ro;)|x(?:cl;|ist;|p(?:ectation;|onentiale;)))|f(?:allingdotseq;|cy;|emale;|f(?:ilig;|l(?:ig;|lig;)|r;)|ilig;|jlig;|l(?:at;|lig;|tns;)|nof;|o(?:pf;|r(?:all;|k(?:;|v;)))|partint;|r(?:a(?:c(?:1(?:2;?|3;|4;?|5;|6;|8;)|2(?:3;|5;)|3(?:4;?|5;|8;)|45;|5(?:6;|8;)|78;)|sl;)|own;)|scr;)|g(?:E(?:;|l;)|a(?:cute;|mma(?:;|d;)|p;)|breve;|c(?:irc;|y;)|dot;|e(?:;|l;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|l;))|l(?:;|es;)))|fr;|g(?:;|g;)|imel;|jcy;|l(?:;|E;|a;|j;)|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|opf;|rave;|s(?:cr;|im(?:;|e;|l;))|t(?:;|c(?:c;|ir;)|dot;|lPar;|quest;|r(?:a(?:pprox;|rr;)|dot;|eq(?:less;|qless;)|less;|sim;)|)|v(?:ertneqq;|nE;))|h(?:Arr;|a(?:irsp;|lf;|milt;|r(?:dcy;|r(?:;|cir;|w;)))|bar;|circ;|e(?:arts(?:;|uit;)|llip;|rcon;)|fr;|ks(?:earow;|warow;)|o(?:arr;|mtht;|ok(?:leftarrow;|rightarrow;)|pf;|rbar;)|s(?:cr;|lash;|trok;)|y(?:bull;|phen;))|i(?:acute;?|c(?:;|irc;?|y;)|e(?:cy;|xcl;?)|f(?:f;|r;)|grave;?|i(?:;|i(?:int;|nt;)|nfin;|ota;)|jlig;|m(?:a(?:cr;|g(?:e;|line;|part;)|th;)|of;|ped;)|n(?:;|care;|fin(?:;|tie;)|odot;|t(?:;|cal;|e(?:gers;|rcal;)|larhk;|prod;))|o(?:cy;|gon;|pf;|ta;)|prod;|quest;?|s(?:cr;|in(?:;|E;|dot;|s(?:;|v;)|v;))|t(?:;|ilde;)|u(?:kcy;|ml;?))|j(?:c(?:irc;|y;)|fr;|math;|opf;|s(?:cr;|ercy;)|ukcy;)|k(?:appa(?:;|v;)|c(?:edil;|y;)|fr;|green;|hcy;|jcy;|opf;|scr;)|l(?:A(?:arr;|rr;|tail;)|Barr;|E(?:;|g;)|Har;|a(?:cute;|emptyv;|gran;|mbda;|ng(?:;|d;|le;)|p;|quo;?|rr(?:;|b(?:;|fs;)|fs;|hk;|lp;|pl;|sim;|tl;)|t(?:;|ail;|e(?:;|s;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|quo(?:;|r;)|r(?:dhar;|ushar;)|sh;)|e(?:;|ft(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|leftarrows;|right(?:arrow(?:;|s;)|harpoons;|squigarrow;)|threetimes;)|g;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|r;))|g(?:;|es;)|s(?:approx;|dot;|eq(?:gtr;|qgtr;)|gtr;|sim;)))|f(?:isht;|loor;|r;)|g(?:;|E;)|h(?:ar(?:d;|u(?:;|l;))|blk;)|jcy;|l(?:;|arr;|corner;|hard;|tri;)|m(?:idot;|oust(?:;|ache;))|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|o(?:a(?:ng;|rr;)|brk;|ng(?:left(?:arrow;|rightarrow;)|mapsto;|rightarrow;)|oparrow(?:left;|right;)|p(?:ar;|f;|lus;)|times;|w(?:ast;|bar;)|z(?:;|enge;|f;))|par(?:;|lt;)|r(?:arr;|corner;|har(?:;|d;)|m;|tri;)|s(?:aquo;|cr;|h;|im(?:;|e;|g;)|q(?:b;|uo(?:;|r;))|trok;)|t(?:;|c(?:c;|ir;)|dot;|hree;|imes;|larr;|quest;|r(?:Par;|i(?:;|e;|f;))|)|ur(?:dshar;|uhar;)|v(?:ertneqq;|nE;))|m(?:DDot;|a(?:cr;?|l(?:e;|t(?:;|ese;))|p(?:;|sto(?:;|down;|left;|up;))|rker;)|c(?:omma;|y;)|dash;|easuredangle;|fr;|ho;|i(?:cro;?|d(?:;|ast;|cir;|dot;?)|nus(?:;|b;|d(?:;|u;)))|l(?:cp;|dr;)|nplus;|o(?:dels;|pf;)|p;|s(?:cr;|tpos;)|u(?:;|ltimap;|map;))|n(?:G(?:g;|t(?:;|v;))|L(?:eft(?:arrow;|rightarrow;)|l;|t(?:;|v;))|Rightarrow;|V(?:Dash;|dash;)|a(?:bla;|cute;|ng;|p(?:;|E;|id;|os;|prox;)|tur(?:;|al(?:;|s;)))|b(?:sp;?|ump(?:;|e;))|c(?:a(?:p;|ron;)|edil;|ong(?:;|dot;)|up;|y;)|dash;|e(?:;|Arr;|ar(?:hk;|r(?:;|ow;))|dot;|quiv;|s(?:ear;|im;)|xist(?:;|s;))|fr;|g(?:E;|e(?:;|q(?:;|q;|slant;)|s;)|sim;|t(?:;|r;))|h(?:Arr;|arr;|par;)|i(?:;|s(?:;|d;)|v;)|jcy;|l(?:Arr;|E;|arr;|dr;|e(?:;|ft(?:arrow;|rightarrow;)|q(?:;|q;|slant;)|s(?:;|s;))|sim;|t(?:;|ri(?:;|e;)))|mid;|o(?:pf;|t(?:;|in(?:;|E;|dot;|v(?:a;|b;|c;))|ni(?:;|v(?:a;|b;|c;))|))|p(?:ar(?:;|allel;|sl;|t;)|olint;|r(?:;|cue;|e(?:;|c(?:;|eq;))))|r(?:Arr;|arr(?:;|c;|w;)|ightarrow;|tri(?:;|e;))|s(?:c(?:;|cue;|e;|r;)|hort(?:mid;|parallel;)|im(?:;|e(?:;|q;))|mid;|par;|qsu(?:be;|pe;)|u(?:b(?:;|E;|e;|set(?:;|eq(?:;|q;)))|cc(?:;|eq;)|p(?:;|E;|e;|set(?:;|eq(?:;|q;)))))|t(?:gl;|ilde;?|lg;|riangle(?:left(?:;|eq;)|right(?:;|eq;)))|u(?:;|m(?:;|ero;|sp;))|v(?:Dash;|Harr;|ap;|dash;|g(?:e;|t;)|infin;|l(?:Arr;|e;|t(?:;|rie;))|r(?:Arr;|trie;)|sim;)|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|near;))|o(?:S;|a(?:cute;?|st;)|c(?:ir(?:;|c;?)|y;)|d(?:ash;|blac;|iv;|ot;|sold;)|elig;|f(?:cir;|r;)|g(?:on;|rave;?|t;)|h(?:bar;|m;)|int;|l(?:arr;|c(?:ir;|ross;)|ine;|t;)|m(?:acr;|ega;|i(?:cron;|d;|nus;))|opf;|p(?:ar;|erp;|lus;)|r(?:;|arr;|d(?:;|er(?:;|of;)|f;?|m;?)|igof;|or;|slope;|v;)|s(?:cr;|lash;?|ol;)|ti(?:lde;?|mes(?:;|as;))|uml;?|vbar;)|p(?:ar(?:;|a(?:;|llel;|)|s(?:im;|l;)|t;)|cy;|er(?:cnt;|iod;|mil;|p;|tenk;)|fr;|h(?:i(?:;|v;)|mmat;|one;)|i(?:;|tchfork;|v;)|l(?:an(?:ck(?:;|h;)|kv;)|us(?:;|acir;|b;|cir;|d(?:o;|u;)|e;|mn;?|sim;|two;))|m;|o(?:intint;|pf;|und;?)|r(?:;|E;|ap;|cue;|e(?:;|c(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;))|ime(?:;|s;)|n(?:E;|ap;|sim;)|o(?:d;|f(?:alar;|line;|surf;)|p(?:;|to;))|sim;|urel;)|s(?:cr;|i;)|uncsp;)|q(?:fr;|int;|opf;|prime;|scr;|u(?:at(?:ernions;|int;)|est(?:;|eq;)|ot;?))|r(?:A(?:arr;|rr;|tail;)|Barr;|Har;|a(?:c(?:e;|ute;)|dic;|emptyv;|ng(?:;|d;|e;|le;)|quo;?|rr(?:;|ap;|b(?:;|fs;)|c;|fs;|hk;|lp;|pl;|sim;|tl;|w;)|t(?:ail;|io(?:;|nals;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|ldhar;|quo(?:;|r;)|sh;)|e(?:al(?:;|ine;|part;|s;)|ct;|g;?)|f(?:isht;|loor;|r;)|h(?:ar(?:d;|u(?:;|l;))|o(?:;|v;))|i(?:ght(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|left(?:arrows;|harpoons;)|rightarrows;|squigarrow;|threetimes;)|ng;|singdotseq;)|l(?:arr;|har;|m;)|moust(?:;|ache;)|nmid;|o(?:a(?:ng;|rr;)|brk;|p(?:ar;|f;|lus;)|times;)|p(?:ar(?:;|gt;)|polint;)|rarr;|s(?:aquo;|cr;|h;|q(?:b;|uo(?:;|r;)))|t(?:hree;|imes;|ri(?:;|e;|f;|ltri;))|uluhar;|x;)|s(?:acute;|bquo;|c(?:;|E;|a(?:p;|ron;)|cue;|e(?:;|dil;)|irc;|n(?:E;|ap;|sim;)|polint;|sim;|y;)|dot(?:;|b;|e;)|e(?:Arr;|ar(?:hk;|r(?:;|ow;))|ct;?|mi;|swar;|tm(?:inus;|n;)|xt;)|fr(?:;|own;)|h(?:arp;|c(?:hcy;|y;)|ort(?:mid;|parallel;)|y;?)|i(?:gma(?:;|f;|v;)|m(?:;|dot;|e(?:;|q;)|g(?:;|E;)|l(?:;|E;)|ne;|plus;|rarr;))|larr;|m(?:a(?:llsetminus;|shp;)|eparsl;|i(?:d;|le;)|t(?:;|e(?:;|s;)))|o(?:ftcy;|l(?:;|b(?:;|ar;))|pf;)|pa(?:des(?:;|uit;)|r;)|q(?:c(?:ap(?:;|s;)|up(?:;|s;))|su(?:b(?:;|e;|set(?:;|eq;))|p(?:;|e;|set(?:;|eq;)))|u(?:;|ar(?:e;|f;)|f;))|rarr;|s(?:cr;|etmn;|mile;|tarf;)|t(?:ar(?:;|f;)|r(?:aight(?:epsilon;|phi;)|ns;))|u(?:b(?:;|E;|dot;|e(?:;|dot;)|mult;|n(?:E;|e;)|plus;|rarr;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;)))|cc(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;)|m;|ng;|p(?:1;?|2;?|3;?|;|E;|d(?:ot;|sub;)|e(?:;|dot;)|hs(?:ol;|ub;)|larr;|mult;|n(?:E;|e;)|plus;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;))))|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|nwar;)|zlig;?)|t(?:a(?:rget;|u;)|brk;|c(?:aron;|edil;|y;)|dot;|elrec;|fr;|h(?:e(?:re(?:4;|fore;)|ta(?:;|sym;|v;))|i(?:ck(?:approx;|sim;)|nsp;)|k(?:ap;|sim;)|orn;?)|i(?:lde;|mes(?:;|b(?:;|ar;)|d;|)|nt;)|o(?:ea;|p(?:;|bot;|cir;|f(?:;|ork;))|sa;)|prime;|r(?:ade;|i(?:angle(?:;|down;|left(?:;|eq;)|q;|right(?:;|eq;))|dot;|e;|minus;|plus;|sb;|time;)|pezium;)|s(?:c(?:r;|y;)|hcy;|trok;)|w(?:ixt;|ohead(?:leftarrow;|rightarrow;)))|u(?:Arr;|Har;|a(?:cute;?|rr;)|br(?:cy;|eve;)|c(?:irc;?|y;)|d(?:arr;|blac;|har;)|f(?:isht;|r;)|grave;?|h(?:ar(?:l;|r;)|blk;)|l(?:c(?:orn(?:;|er;)|rop;)|tri;)|m(?:acr;|l;?)|o(?:gon;|pf;)|p(?:arrow;|downarrow;|harpoon(?:left;|right;)|lus;|si(?:;|h;|lon;)|uparrows;)|r(?:c(?:orn(?:;|er;)|rop;)|ing;|tri;)|scr;|t(?:dot;|ilde;|ri(?:;|f;))|u(?:arr;|ml;?)|wangle;)|v(?:Arr;|Bar(?:;|v;)|Dash;|a(?:ngrt;|r(?:epsilon;|kappa;|nothing;|p(?:hi;|i;|ropto;)|r(?:;|ho;)|s(?:igma;|u(?:bsetneq(?:;|q;)|psetneq(?:;|q;)))|t(?:heta;|riangle(?:left;|right;))))|cy;|dash;|e(?:e(?:;|bar;|eq;)|llip;|r(?:bar;|t;))|fr;|ltri;|nsu(?:b;|p;)|opf;|prop;|rtri;|s(?:cr;|u(?:bn(?:E;|e;)|pn(?:E;|e;)))|zigzag;)|w(?:circ;|e(?:d(?:bar;|ge(?:;|q;))|ierp;)|fr;|opf;|p;|r(?:;|eath;)|scr;)|x(?:c(?:ap;|irc;|up;)|dtri;|fr;|h(?:Arr;|arr;)|i;|l(?:Arr;|arr;)|map;|nis;|o(?:dot;|p(?:f;|lus;)|time;)|r(?:Arr;|arr;)|s(?:cr;|qcup;)|u(?:plus;|tri;)|vee;|wedge;)|y(?:ac(?:ute;?|y;)|c(?:irc;|y;)|en;?|fr;|icy;|opf;|scr;|u(?:cy;|ml;?))|z(?:acute;|c(?:aron;|y;)|dot;|e(?:etrf;|ta;)|fr;|hcy;|igrarr;|opf;|scr;|w(?:j;|nj;)))|[\s\S]/g,aLe=32,lLe=/[^\r"&\u0000]+/g,cLe=/[^\r'&\u0000]+/g,uLe=/[^\r\t\n\f &>\u0000]+/g,dLe=/[^\r\t\n\f \/>A-Z\u0000]+/g,fLe=/[^\r\t\n\f \/=>A-Z\u0000]+/g,hLe=/[^\]\r\u0000\uffff]*/g,gLe=/[^&<\r\u0000\uffff]*/g,Zj=/[^<\r\u0000\uffff]*/g,pLe=/[^\r\u0000\uffff]*/g,Xj=/(?:(\/)?([a-z]+)>)|[\s\S]/g,e7=/(?:([-a-z]+)[ \t\n\f]*=[ \t\n\f]*('[^'&\r\u0000]*'|"[^"&\r\u0000]*"|[^\t\n\r\f "&'\u0000>][^&> \t\n\r\f\u0000]*[ \t\n\f]))|[\s\S]/g,aB=/[^\x09\x0A\x0C\x0D\x20]/,JU=/[^\x09\x0A\x0C\x0D\x20]/g,mLe=/[^\x00\x09\x0A\x0C\x0D\x20]/,hp=/^[\x09\x0A\x0C\x0D\x20]+/,lB=/\x00/g;function qs(e){var t=16384;if(e.length<t)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<e.length;n+=t)r+=String.fromCharCode.apply(String,e.slice(n,n+t));return r}function ALe(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function tn(e,t){if(typeof t=="string")return e.namespaceURI===at.HTML&&e.localName===t;var r=t[e.namespaceURI];return r&&r[e.localName]}function t7(e){return tn(e,f7)}function r7(e){if(tn(e,h7))return!0;if(e.namespaceURI===at.MATHML&&e.localName==="annotation-xml"){var t=e.getAttribute("encoding");if(t&&(t=t.toLowerCase()),t==="text/html"||t==="application/xhtml+xml")return!0}return!1}function yLe(e){return e in zj?zj[e]:e}function n7(e){for(var t=0,r=e.length;t<r;t++)e[t][0]in Kj&&(e[t][0]=Kj[e[t][0]])}function i7(e){for(var t=0,r=e.length;t<r;t++)if(e[t][0]==="definitionurl"){e[t][0]="definitionURL";break}}function jU(e){for(var t=0,r=e.length;t<r;t++)e[t][0]in Yj&&e[t].push(Yj[e[t][0]])}function s7(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r][0],s=e[r][1];t.hasAttribute(i)||t._setAttribute(i,s)}}Fr.ElementStack=function(){this.elements=[],this.top=null};Fr.ElementStack.prototype.push=function(e){this.elements.push(e),this.top=e};Fr.ElementStack.prototype.pop=function(e){this.elements.pop(),this.top=this.elements[this.elements.length-1]};Fr.ElementStack.prototype.popTag=function(e){for(var t=this.elements.length-1;t>0;t--){var r=this.elements[t];if(tn(r,e))break}this.elements.length=t,this.top=this.elements[t-1]};Fr.ElementStack.prototype.popElementType=function(e){for(var t=this.elements.length-1;t>0&&!(this.elements[t]instanceof e);t--);this.elements.length=t,this.top=this.elements[t-1]};Fr.ElementStack.prototype.popElement=function(e){for(var t=this.elements.length-1;t>0&&this.elements[t]!==e;t--);this.elements.length=t,this.top=this.elements[t-1]};Fr.ElementStack.prototype.removeElement=function(e){if(this.top===e)this.pop();else{var t=this.elements.lastIndexOf(e);t!==-1&&this.elements.splice(t,1)}};Fr.ElementStack.prototype.clearToContext=function(e){for(var t=this.elements.length-1;t>0&&!tn(this.elements[t],e);t--);this.elements.length=t+1,this.top=this.elements[t]};Fr.ElementStack.prototype.contains=function(e){return this.inSpecificScope(e,Object.create(null))};Fr.ElementStack.prototype.inSpecificScope=function(e,t){for(var r=this.elements.length-1;r>=0;r--){var n=this.elements[r];if(tn(n,e))return!0;if(tn(n,t))return!1}return!1};Fr.ElementStack.prototype.elementInSpecificScope=function(e,t){for(var r=this.elements.length-1;r>=0;r--){var n=this.elements[r];if(n===e)return!0;if(tn(n,t))return!1}return!1};Fr.ElementStack.prototype.elementTypeInSpecificScope=function(e,t){for(var r=this.elements.length-1;r>=0;r--){var n=this.elements[r];if(n instanceof e)return!0;if(tn(n,t))return!1}return!1};Fr.ElementStack.prototype.inScope=function(e){return this.inSpecificScope(e,gu)};Fr.ElementStack.prototype.elementInScope=function(e){return this.elementInSpecificScope(e,gu)};Fr.ElementStack.prototype.elementTypeInScope=function(e){return this.elementTypeInSpecificScope(e,gu)};Fr.ElementStack.prototype.inButtonScope=function(e){return this.inSpecificScope(e,eO)};Fr.ElementStack.prototype.inListItemScope=function(e){return this.inSpecificScope(e,dB)};Fr.ElementStack.prototype.inTableScope=function(e){return this.inSpecificScope(e,d7)};Fr.ElementStack.prototype.inSelectScope=function(e){for(var t=this.elements.length-1;t>=0;t--){var r=this.elements[t];if(r.namespaceURI!==at.HTML)return!1;var n=r.localName;if(n===e)return!0;if(n!=="optgroup"&&n!=="option")return!1}return!1};Fr.ElementStack.prototype.generateImpliedEndTags=function(e,t){for(var r=t?c7:l7,n=this.elements.length-1;n>=0;n--){var i=this.elements[n];if(e&&tn(i,e)||!tn(this.elements[n],r))break}this.elements.length=n+1,this.top=this.elements[n]};Fr.ActiveFormattingElements=function(){this.list=[],this.attrs=[]};Fr.ActiveFormattingElements.prototype.MARKER={localName:"|"};Fr.ActiveFormattingElements.prototype.insertMarker=function(){this.list.push(this.MARKER),this.attrs.push(this.MARKER)};Fr.ActiveFormattingElements.prototype.push=function(e,t){for(var r=0,n=this.list.length-1;n>=0&&this.list[n]!==this.MARKER;n--)if(o(e,this.list[n],this.attrs[n])&&(r++,r===3)){this.list.splice(n,1),this.attrs.splice(n,1);break}this.list.push(e);for(var i=[],s=0;s<t.length;s++)i[s]=t[s];this.attrs.push(i);function o(a,l,c){if(a.localName!==l.localName||a._numattrs!==c.length)return!1;for(var u=0,f=c.length;u<f;u++){var p=c[u][0],g=c[u][1];if(!a.hasAttribute(p)||a.getAttribute(p)!==g)return!1}return!0}};Fr.ActiveFormattingElements.prototype.clearToMarker=function(){for(var e=this.list.length-1;e>=0&&this.list[e]!==this.MARKER;e--);e<0&&(e=0),this.list.length=e,this.attrs.length=e};Fr.ActiveFormattingElements.prototype.findElementByTag=function(e){for(var t=this.list.length-1;t>=0;t--){var r=this.list[t];if(r===this.MARKER)break;if(r.localName===e)return r}return null};Fr.ActiveFormattingElements.prototype.indexOf=function(e){return this.list.lastIndexOf(e)};Fr.ActiveFormattingElements.prototype.remove=function(e){var t=this.list.lastIndexOf(e);t!==-1&&(this.list.splice(t,1),this.attrs.splice(t,1))};Fr.ActiveFormattingElements.prototype.replace=function(e,t,r){var n=this.list.lastIndexOf(e);n!==-1&&(this.list[n]=t,this.attrs[n]=r)};Fr.ActiveFormattingElements.prototype.insertAfter=function(e,t){var r=this.list.lastIndexOf(e);r!==-1&&(this.list.splice(r,0,t),this.attrs.splice(r,0,t))};function Fr(e,t,r){var n=null,i=0,s=0,o=!1,a=!1,l=0,c=[],u="",f=!0,p=0,g=Xt,m,y,v="",C="",E=[],w="",B="",R=[],N=[],W=[],Z=[],te=[],Y=!1,U=Kw,ce=null,Ie=[],Q=new Fr.ElementStack,se=new Fr.ActiveFormattingElements,z=t!==void 0,ie=null,Pe=null,dt=!0;t&&(dt=t.ownerDocument._scripting_enabled),r&&r.scripting_enabled===!1&&(dt=!1);var ve=!0,Rt=!1,Zt,tr,ue=[],wr=!1,sr=!1,Hr={document:function(){return Ge},_asDocumentFragment:function(){for(var x=Ge.createDocumentFragment(),S=Ge.firstChild;S.hasChildNodes();)x.appendChild(S.firstChild);return x},pause:function(){p++},resume:function(){p--,this.parse("")},parse:function(x,S,L){var re;return p>0?(u+=x,!0):(l===0?(u&&(x=u+x,u=""),S&&(x+="\uFFFF",o=!0),n=x,i=x.length,s=0,f&&(f=!1,n.charCodeAt(0)===65279&&(s=1)),l++,re=pr(L),u=n.substring(s,i),l--):(l++,c.push(n,i,s),n=x,i=x.length,s=0,pr(),re=!1,u=n.substring(s,i),s=c.pop(),i=c.pop(),n=c.pop(),u&&(n=u+n.substring(s),i=n.length,s=0,u=""),l--),re)}},Ge=new ZPe(!0,e);if(Ge._parser=Hr,Ge._scripting_enabled=dt,t){if(t.ownerDocument._quirks&&(Ge._quirks=!0),t.ownerDocument._limitedQuirks&&(Ge._limitedQuirks=!0),t.namespaceURI===at.HTML)switch(t.localName){case"title":case"textarea":g=eu;break;case"style":case"xmp":case"iframe":case"noembed":case"noframes":case"script":case"plaintext":g=vC;break}var ln=Ge.createElement("html");Ge._appendChild(ln),Q.push(ln),t instanceof en.HTMLTemplateElement&&Ie.push(kg),Df();for(var Wr=t;Wr!==null;Wr=Wr.parentElement)if(Wr instanceof en.HTMLFormElement){Pe=Wr;break}}function pr(x){for(var S,L,re,oe;s<i;){if(p>0||x&&x())return!0;switch(typeof g.lookahead){case"undefined":if(S=n.charCodeAt(s++),a&&(a=!1,S===10)){s++;continue}switch(S){case 13:s<i?n.charCodeAt(s)===10&&s++:a=!0,g(10);break;case 65535:if(o&&s===i){g(oB);break}default:g(S);break}break;case"number":S=n.charCodeAt(s);var De=g.lookahead,st=!0;if(De<0&&(st=!1,De=-De),De<i-s)L=st?n.substring(s,s+De):null,oe=!1;else if(o)L=st?n.substring(s,i):null,oe=!0,S===65535&&s===i-1&&(S=oB);else return!0;g(S,L,oe);break;case"string":S=n.charCodeAt(s),re=g.lookahead;var Wt=n.indexOf(re,s);if(Wt!==-1)L=n.substring(s,Wt+re.length),oe=!1;else{if(!o)return!0;L=n.substring(s,i),S===65535&&s===i-1&&(S=oB),oe=!0}g(S,L,oe);break}}return!1}function Ee(x,S){for(var L=0;L<te.length;L++)if(te[L][0]===x)return;S!==void 0?te.push([x,S]):te.push([x])}function Ur(){e7.lastIndex=s-1;var x=e7.exec(n);if(!x)throw new Error("should never happen");var S=x[1];if(!S)return!1;var L=x[2],re=L.length;switch(L[0]){case'"':case"'":L=L.substring(1,re-1),s+=x[0].length-1,g=aA;break;default:g=io,s+=x[0].length-1,L=L.substring(0,re-1);break}for(var oe=0;oe<te.length;oe++)if(te[oe][0]===S)return!0;return te.push([S,L]),!0}function he(){Y=!1,v="",te.length=0}function be(){Y=!0,v="",te.length=0}function _t(){E.length=0}function hn(){w=""}function Dn(){B=""}function Ii(){R.length=0}function no(){N.length=0,W=null,Z=null}function od(){W=[]}function Xc(){Z=[]}function or(){Rt=!0}function N2(){return Q.top&&Q.top.namespaceURI!=="http://www.w3.org/1999/xhtml"}function ji(x){return C===x}function fa(){if(ue.length>0){var x=qs(ue);if(ue.length=0,sr&&(sr=!1,x[0]===`
`&&(x=x.substring(1)),x.length===0))return;Tn(o0,x),wr=!1}sr=!1}function ad(x){x.lastIndex=s-1;var S=x.exec(n);if(S&&S.index===s-1)return S=S[0],s+=S.length-1,o&&s===i&&(S=S.slice(0,-1),s--),S;throw new Error("should never happen")}function ld(x){x.lastIndex=s-1;var S=x.exec(n)[0];return S?(hC(S),s+=S.length-1,!0):!1}function hC(x){ue.length>0&&fa(),!(sr&&(sr=!1,x[0]===`
`&&(x=x.substring(1)),x.length===0))&&Tn(o0,x)}function ha(){if(Y)Tn(cr,v);else{var x=v;v="",C=x,Tn(Os,x,te)}}function gC(){if(s===i)return!1;Xj.lastIndex=s;var x=Xj.exec(n);if(!x)throw new Error("should never happen");var S=x[2];if(!S)return!1;var L=x[1];return L?(s+=S.length+2,Tn(cr,S)):(s+=S.length+1,C=S,Tn(Os,S,tLe)),!0}function pC(){Y?Tn(cr,v,null,!0):Tn(Os,v,te,!0)}function _r(){Tn(eLe,qs(N),W?qs(W):void 0,Z?qs(Z):void 0)}function It(){fa(),U(oB),Ge.modclock=1}var Tn=Hr.insertToken=function(S,L,re,oe){fa();var De=Q.top;!De||De.namespaceURI===at.HTML?U(S,L,re,oe):S!==Os&&S!==o0?gd(S,L,re,oe):t7(De)&&(S===o0||S===Os&&L!=="mglyph"&&L!=="malignmark")||S===Os&&L==="svg"&&De.namespaceURI===at.MATHML&&De.localName==="annotation-xml"||r7(De)?(tr=!0,U(S,L,re,oe),tr=!1):gd(S,L,re,oe)};function rl(x){var S=Q.top;tc&&tn(S,a0)?eA(function(L){return L.createComment(x)}):(S instanceof en.HTMLTemplateElement&&(S=S.content),S._appendChild(S.ownerDocument.createComment(x)))}function nl(x){var S=Q.top;if(tc&&tn(S,a0))eA(function(re){return re.createTextNode(x)});else{S instanceof en.HTMLTemplateElement&&(S=S.content);var L=S.lastChild;L&&L.nodeType===zU.TEXT_NODE?L.appendData(x):S._appendChild(S.ownerDocument.createTextNode(x))}}function Bg(x,S,L){var re=o7.createElement(x,S,null);if(L)for(var oe=0,De=L.length;oe<De;oe++)re._setAttribute(L[oe][0],L[oe][1]);return re}var tc=!1;function bt(x,S){var L=Xm(function(re){return Bg(re,x,S)});return tn(L,u7)&&(L._form=Pe),L}function Xm(x){var S;return tc&&tn(Q.top,a0)?S=eA(x):Q.top instanceof en.HTMLTemplateElement?(S=x(Q.top.content.ownerDocument),Q.top.content._appendChild(S)):(S=x(Q.top.ownerDocument),Q.top._appendChild(S)),Q.push(S),S}function mC(x,S,L){return Xm(function(re){var oe=re._createElementNS(x,L,null);if(S)for(var De=0,st=S.length;De<st;De++){var Wt=S[De];Wt.length===2?oe._setAttribute(Wt[0],Wt[1]):oe._setAttributeNS(Wt[2],Wt[0],Wt[1])}return oe})}function xw(x){for(var S=Q.elements.length-1;S>=0;S--)if(Q.elements[S]instanceof x)return S;return-1}function eA(x){var S,L,re=-1,oe=-1,De;if(re=xw(en.HTMLTableElement),oe=xw(en.HTMLTemplateElement),oe>=0&&(re<0||oe>re)?S=Q.elements[oe]:re>=0&&(S=Q.elements[re].parentNode,S?L=Q.elements[re]:S=Q.elements[re-1]),S||(S=Q.elements[0]),S instanceof en.HTMLTemplateElement&&(S=S.content),De=x(S.ownerDocument),De.nodeType===zU.TEXT_NODE){var st;if(L?st=L.previousSibling:st=S.lastChild,st&&st.nodeType===zU.TEXT_NODE)return st.appendData(De.data),De}return L?S.insertBefore(De,L):S._appendChild(De),De}function Df(){for(var x=!1,S=Q.elements.length-1;S>=0;S--){var L=Q.elements[S];if(S===0&&(x=!0,z&&(L=t)),L.namespaceURI===at.HTML){var re=L.localName;switch(re){case"select":for(var oe=S;oe>0;){var De=Q.elements[--oe];if(De instanceof en.HTMLTemplateElement)break;if(De instanceof en.HTMLTableElement){U=uA;return}}U=pa;return;case"tr":U=jr;return;case"tbody":case"tfoot":case"thead":U=nc;return;case"caption":U=sl;return;case"colgroup":U=hd;return;case"table":U=Qo;return;case"template":U=Ie[Ie.length-1];return;case"body":U=it;return;case"frameset":U=kC;return;case"html":ie===null?U=Rg:U=ms;return;default:if(!x){if(re==="head"){U=Rn;return}if(re==="td"||re==="th"){U=so;return}}}}if(x){U=it;return}}}function tA(x,S){bt(x,S),g=Dg,ce=U,U=As}function P2(x,S){bt(x,S),g=eu,ce=U,U=As}function AC(x,S){return{elt:Bg(x,se.list[S].localName,se.attrs[S]),attrs:se.attrs[S]}}function Li(){if(se.list.length!==0){var x=se.list[se.list.length-1];if(x!==se.MARKER&&Q.elements.lastIndexOf(x)===-1){for(var S=se.list.length-2;S>=0&&(x=se.list[S],!(x===se.MARKER||Q.elements.lastIndexOf(x)!==-1));S--);for(S=S+1;S<se.list.length;S++){var L=Xm(function(re){return AC(re,S).elt});se.list[S]=L}}}}var rA={localName:"BM"};function yC(x){if(tn(Q.top,x)&&se.indexOf(Q.top)===-1)return Q.pop(),!0;for(var S=0;S<8;){S++;var L=se.findElementByTag(x);if(!L)return!1;var re=Q.elements.lastIndexOf(L);if(re===-1)return se.remove(L),!0;if(!Q.elementInScope(L))return!0;for(var oe=null,De,st=re+1;st<Q.elements.length;st++)if(tn(Q.elements[st],gp)){oe=Q.elements[st],De=st;break}if(oe){var Wt=Q.elements[re-1];se.insertAfter(L,rA);for(var mn=oe,Ui=oe,oo=De,kn,ic=0;ic++,mn=Q.elements[--oo],mn!==L;){if(kn=se.indexOf(mn),ic>3&&kn!==-1&&(se.remove(mn),kn=-1),kn===-1){Q.removeElement(mn);continue}var No=AC(Wt.ownerDocument,kn);se.replace(mn,No.elt,No.attrs),Q.elements[oo]=No.elt,mn=No.elt,Ui===oe&&(se.remove(rA),se.insertAfter(No.elt,rA)),mn._appendChild(Ui),Ui=mn}tc&&tn(Wt,a0)?eA(function(){return Ui}):Wt instanceof en.HTMLTemplateElement?Wt.content._appendChild(Ui):Wt._appendChild(Ui);for(var Mf=AC(oe.ownerDocument,se.indexOf(L));oe.hasChildNodes();)Mf.elt._appendChild(oe.firstChild);oe._appendChild(Mf.elt),se.remove(L),se.replace(rA,Mf.elt,Mf.attrs),Q.removeElement(L);var Zw=Q.elements.lastIndexOf(oe);Q.elements.splice(Zw+1,0,Mf.elt)}else return Q.popElement(L),se.remove(L),!0}return!0}function L2(){Q.pop(),U=ce}function cd(){delete Ge._parser,Q.elements.length=0,Ge.defaultView&&Ge.defaultView.dispatchEvent(new en.Event("load",{}))}function je(x,S){g=S,s--}function Xt(x){switch(x){case 38:m=Xt,g=kf;break;case 60:if(gC())break;g=ww;break;case 0:ue.push(x),wr=!0;break;case-1:It();break;default:ld(gLe)||ue.push(x);break}}function eu(x){switch(x){case 38:m=eu,g=kf;break;case 60:g=O2;break;case 0:ue.push(65533),wr=!0;break;case-1:It();break;default:ue.push(x);break}}function Dg(x){switch(x){case 60:g=H2;break;case 0:ue.push(65533);break;case-1:It();break;default:ld(Zj)||ue.push(x);break}}function tu(x){switch(x){case 60:g=iA;break;case 0:ue.push(65533);break;case-1:It();break;default:ld(Zj)||ue.push(x);break}}function vC(x){switch(x){case 0:ue.push(65533);break;case-1:It();break;default:ld(pLe)||ue.push(x);break}}function ww(x){switch(x){case 33:g=ud;break;case 47:g=U2;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:he(),je(x,Sw);break;case 63:je(x,Rf);break;default:ue.push(60),je(x,Xt);break}}function U2(x){switch(x){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:be(),je(x,Sw);break;case 62:g=Xt;break;case-1:ue.push(60),ue.push(47),It();break;default:je(x,Rf);break}}function Sw(x){switch(x){case 9:case 10:case 12:case 32:g=io;break;case 47:g=il;break;case 62:g=Xt,ha();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:v+=String.fromCharCode(x+32);break;case 0:v+="\uFFFD";break;case-1:It();break;default:v+=ad(dLe);break}}function O2(x){x===47?(_t(),g=q2):(ue.push(60),je(x,eu))}function q2(x){switch(x){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:be(),je(x,V2);break;default:ue.push(60),ue.push(47),je(x,eu);break}}function V2(x){switch(x){case 9:case 10:case 12:case 32:if(ji(v)){g=io;return}break;case 47:if(ji(v)){g=il;return}break;case 62:if(ji(v)){g=Xt,ha();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:v+=String.fromCharCode(x+32),E.push(x);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:v+=String.fromCharCode(x),E.push(x);return;default:break}ue.push(60),ue.push(47),fp(ue,E),je(x,eu)}function H2(x){x===47?(_t(),g=nA):(ue.push(60),je(x,Dg))}function nA(x){switch(x){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:be(),je(x,W2);break;default:ue.push(60),ue.push(47),je(x,Dg);break}}function W2(x){switch(x){case 9:case 10:case 12:case 32:if(ji(v)){g=io;return}break;case 47:if(ji(v)){g=il;return}break;case 62:if(ji(v)){g=Xt,ha();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:v+=String.fromCharCode(x+32),E.push(x);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:v+=String.fromCharCode(x),E.push(x);return;default:break}ue.push(60),ue.push(47),fp(ue,E),je(x,Dg)}function iA(x){switch(x){case 47:_t(),g=G2;break;case 33:g=Y2,ue.push(60),ue.push(33);break;default:ue.push(60),je(x,tu);break}}function G2(x){switch(x){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:be(),je(x,$2);break;default:ue.push(60),ue.push(47),je(x,tu);break}}function $2(x){switch(x){case 9:case 10:case 12:case 32:if(ji(v)){g=io;return}break;case 47:if(ji(v)){g=il;return}break;case 62:if(ji(v)){g=Xt,ha();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:v+=String.fromCharCode(x+32),E.push(x);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:v+=String.fromCharCode(x),E.push(x);return;default:break}ue.push(60),ue.push(47),fp(ue,E),je(x,tu)}function Y2(x){x===45?(g=Iw,ue.push(45)):je(x,tu)}function Iw(x){x===45?(g=Dw,ue.push(45)):je(x,tu)}function ga(x){switch(x){case 45:g=Bw,ue.push(45);break;case 60:g=CC;break;case 0:ue.push(65533);break;case-1:It();break;default:ue.push(x);break}}function Bw(x){switch(x){case 45:g=Dw,ue.push(45);break;case 60:g=CC;break;case 0:g=ga,ue.push(65533);break;case-1:It();break;default:g=ga,ue.push(x);break}}function Dw(x){switch(x){case 45:ue.push(45);break;case 60:g=CC;break;case 62:g=tu,ue.push(62);break;case 0:g=ga,ue.push(65533);break;case-1:It();break;default:g=ga,ue.push(x);break}}function CC(x){switch(x){case 47:_t(),g=K2;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:_t(),ue.push(60),je(x,Tw);break;default:ue.push(60),je(x,ga);break}}function K2(x){switch(x){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:be(),je(x,z2);break;default:ue.push(60),ue.push(47),je(x,ga);break}}function z2(x){switch(x){case 9:case 10:case 12:case 32:if(ji(v)){g=io;return}break;case 47:if(ji(v)){g=il;return}break;case 62:if(ji(v)){g=Xt,ha();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:v+=String.fromCharCode(x+32),E.push(x);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:v+=String.fromCharCode(x),E.push(x);return;default:break}ue.push(60),ue.push(47),fp(ue,E),je(x,ga)}function Tw(x){switch(x){case 9:case 10:case 12:case 32:case 47:case 62:qs(E)==="script"?g=rc:g=ga,ue.push(x);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:E.push(x+32),ue.push(x);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:E.push(x),ue.push(x);break;default:je(x,ga);break}}function rc(x){switch(x){case 45:g=Rw,ue.push(45);break;case 60:g=EC,ue.push(60);break;case 0:ue.push(65533);break;case-1:It();break;default:ue.push(x);break}}function Rw(x){switch(x){case 45:g=bC,ue.push(45);break;case 60:g=EC,ue.push(60);break;case 0:g=rc,ue.push(65533);break;case-1:It();break;default:g=rc,ue.push(x);break}}function bC(x){switch(x){case 45:ue.push(45);break;case 60:g=EC,ue.push(60);break;case 62:g=tu,ue.push(62);break;case 0:g=rc,ue.push(65533);break;case-1:It();break;default:g=rc,ue.push(x);break}}function EC(x){x===47?(_t(),g=kw,ue.push(47)):je(x,rc)}function kw(x){switch(x){case 9:case 10:case 12:case 32:case 47:case 62:qs(E)==="script"?g=ga:g=rc,ue.push(x);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:E.push(x+32),ue.push(x);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:E.push(x),ue.push(x);break;default:je(x,rc);break}}function io(x){switch(x){case 9:case 10:case 12:case 32:break;case 47:g=il;break;case 62:g=Xt,ha();break;case-1:It();break;case 61:hn(),w+=String.fromCharCode(x),g=sA;break;default:if(Ur())break;hn(),je(x,sA);break}}function sA(x){switch(x){case 9:case 10:case 12:case 32:case 47:case 62:case-1:je(x,J2);break;case 61:g=_C;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:w+=String.fromCharCode(x+32);break;case 0:w+="\uFFFD";break;case 34:case 39:case 60:default:w+=ad(fLe);break}}function J2(x){switch(x){case 9:case 10:case 12:case 32:break;case 47:Ee(w),g=il;break;case 61:g=_C;break;case 62:g=Xt,Ee(w),ha();break;case-1:Ee(w),It();break;default:Ee(w),hn(),je(x,sA);break}}function _C(x){switch(x){case 9:case 10:case 12:case 32:break;case 34:Dn(),g=Tg;break;case 39:Dn(),g=Tf;break;case 62:default:Dn(),je(x,oA);break}}function Tg(x){switch(x){case 34:Ee(w,B),g=aA;break;case 38:m=Tg,g=kf;break;case 0:B+="\uFFFD";break;case-1:It();break;case 10:B+=String.fromCharCode(x);break;default:B+=ad(lLe);break}}function Tf(x){switch(x){case 39:Ee(w,B),g=aA;break;case 38:m=Tf,g=kf;break;case 0:B+="\uFFFD";break;case-1:It();break;case 10:B+=String.fromCharCode(x);break;default:B+=ad(cLe);break}}function oA(x){switch(x){case 9:case 10:case 12:case 32:Ee(w,B),g=io;break;case 38:m=oA,g=kf;break;case 62:Ee(w,B),g=Xt,ha();break;case 0:B+="\uFFFD";break;case-1:s--,g=Xt;break;case 34:case 39:case 60:case 61:case 96:default:B+=ad(uLe);break}}function aA(x){switch(x){case 9:case 10:case 12:case 32:g=io;break;case 47:g=il;break;case 62:g=Xt,ha();break;case-1:It();break;default:je(x,io);break}}function il(x){switch(x){case 62:g=Xt,pC(!0);break;case-1:It();break;default:je(x,io);break}}function Rf(x,S,L){var re=S.length;L?s+=re-1:s+=re;var oe=S.substring(0,re-1);oe=oe.replace(/\u0000/g,"\uFFFD"),oe=oe.replace(/\u000D\u000A/g,`
`),oe=oe.replace(/\u000D/g,`
`),Tn(hu,oe),g=Xt}Rf.lookahead=">";function ud(x,S,L){if(S[0]==="-"&&S[1]==="-"){s+=2,Ii(),g=Mw;return}S.toUpperCase()==="DOCTYPE"?(s+=7,g=Uw):S==="[CDATA["&&N2()?(s+=7,g=IC):g=Rf}ud.lookahead=7;function Mw(x){switch(Ii(),x){case 45:g=Fw;break;case 62:g=Xt,Tn(hu,qs(R));break;default:je(x,dd);break}}function Fw(x){switch(x){case 45:g=lA;break;case 62:g=Xt,Tn(hu,qs(R));break;case-1:Tn(hu,qs(R)),It();break;default:R.push(45),je(x,dd);break}}function dd(x){switch(x){case 60:R.push(x),g=Qw;break;case 45:g=xC;break;case 0:R.push(65533);break;case-1:Tn(hu,qs(R)),It();break;default:R.push(x);break}}function Qw(x){switch(x){case 33:R.push(x),g=Nw;break;case 60:R.push(x);break;default:je(x,dd);break}}function Nw(x){switch(x){case 45:g=Pw;break;default:je(x,dd);break}}function Pw(x){switch(x){case 45:g=Lw;break;default:je(x,xC);break}}function Lw(x){switch(x){case 62:case-1:je(x,lA);break;default:je(x,lA);break}}function xC(x){switch(x){case 45:g=lA;break;case-1:Tn(hu,qs(R)),It();break;default:R.push(45),je(x,dd);break}}function lA(x){switch(x){case 62:g=Xt,Tn(hu,qs(R));break;case 33:g=j2;break;case 45:R.push(45);break;case-1:Tn(hu,qs(R)),It();break;default:R.push(45),R.push(45),je(x,dd);break}}function j2(x){switch(x){case 45:R.push(45),R.push(45),R.push(33),g=xC;break;case 62:g=Xt,Tn(hu,qs(R));break;case-1:Tn(hu,qs(R)),It();break;default:R.push(45),R.push(45),R.push(33),je(x,dd);break}}function Uw(x){switch(x){case 9:case 10:case 12:case 32:g=Ow;break;case-1:no(),or(),_r(),It();break;default:je(x,Ow);break}}function Ow(x){switch(x){case 9:case 10:case 12:case 32:break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:no(),N.push(x+32),g=wC;break;case 0:no(),N.push(65533),g=wC;break;case 62:no(),or(),g=Xt,_r();break;case-1:no(),or(),_r(),It();break;default:no(),N.push(x),g=wC;break}}function wC(x){switch(x){case 9:case 10:case 12:case 32:g=qw;break;case 62:g=Xt,_r();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:N.push(x+32);break;case 0:N.push(65533);break;case-1:or(),_r(),It();break;default:N.push(x);break}}function qw(x,S,L){switch(x){case 9:case 10:case 12:case 32:s+=1;break;case 62:g=Xt,s+=1,_r();break;case-1:or(),_r(),It();break;default:S=S.toUpperCase(),S==="PUBLIC"?(s+=6,g=Z2):S==="SYSTEM"?(s+=6,g=eP):(or(),g=ru);break}}qw.lookahead=6;function Z2(x){switch(x){case 9:case 10:case 12:case 32:g=SC;break;case 34:od(),g=Vw;break;case 39:od(),g=Hw;break;case 62:or(),g=Xt,_r();break;case-1:or(),_r(),It();break;default:or(),g=ru;break}}function SC(x){switch(x){case 9:case 10:case 12:case 32:break;case 34:od(),g=Vw;break;case 39:od(),g=Hw;break;case 62:or(),g=Xt,_r();break;case-1:or(),_r(),It();break;default:or(),g=ru;break}}function Vw(x){switch(x){case 34:g=Ww;break;case 0:W.push(65533);break;case 62:or(),g=Xt,_r();break;case-1:or(),_r(),It();break;default:W.push(x);break}}function Hw(x){switch(x){case 39:g=Ww;break;case 0:W.push(65533);break;case 62:or(),g=Xt,_r();break;case-1:or(),_r(),It();break;default:W.push(x);break}}function Ww(x){switch(x){case 9:case 10:case 12:case 32:g=X2;break;case 62:g=Xt,_r();break;case 34:Xc(),g=Gr;break;case 39:Xc(),g=cA;break;case-1:or(),_r(),It();break;default:or(),g=ru;break}}function X2(x){switch(x){case 9:case 10:case 12:case 32:break;case 62:g=Xt,_r();break;case 34:Xc(),g=Gr;break;case 39:Xc(),g=cA;break;case-1:or(),_r(),It();break;default:or(),g=ru;break}}function eP(x){switch(x){case 9:case 10:case 12:case 32:g=pn;break;case 34:Xc(),g=Gr;break;case 39:Xc(),g=cA;break;case 62:or(),g=Xt,_r();break;case-1:or(),_r(),It();break;default:or(),g=ru;break}}function pn(x){switch(x){case 9:case 10:case 12:case 32:break;case 34:Xc(),g=Gr;break;case 39:Xc(),g=cA;break;case 62:or(),g=Xt,_r();break;case-1:or(),_r(),It();break;default:or(),g=ru;break}}function Gr(x){switch(x){case 34:g=Gw;break;case 0:Z.push(65533);break;case 62:or(),g=Xt,_r();break;case-1:or(),_r(),It();break;default:Z.push(x);break}}function cA(x){switch(x){case 39:g=Gw;break;case 0:Z.push(65533);break;case 62:or(),g=Xt,_r();break;case-1:or(),_r(),It();break;default:Z.push(x);break}}function Gw(x){switch(x){case 9:case 10:case 12:case 32:break;case 62:g=Xt,_r();break;case-1:or(),_r(),It();break;default:g=ru;break}}function ru(x){switch(x){case 62:g=Xt,_r();break;case-1:_r(),It();break;default:break}}function IC(x){switch(x){case 93:g=tP;break;case-1:It();break;case 0:wr=!0;default:ld(hLe)||ue.push(x);break}}function tP(x){switch(x){case 93:g=rP;break;default:ue.push(93),je(x,IC);break}}function rP(x){switch(x){case 93:ue.push(93);break;case 62:fa(),g=Xt;break;default:ue.push(93),ue.push(93),je(x,IC);break}}function kf(x){switch(_t(),E.push(38),x){case 9:case 10:case 12:case 32:case 60:case 38:case-1:je(x,nu);break;case 35:E.push(x),g=Bi;break;default:je(x,$w);break}}function $w(x){jj.lastIndex=s;var S=jj.exec(n);if(!S)throw new Error("should never happen");var L=S[1];if(!L){g=nu;return}switch(s+=L.length,fp(E,ALe(L)),m){case Tg:case Tf:case oA:if(L[L.length-1]!==";"&&/[=A-Za-z0-9]/.test(n[s])){g=nu;return}break;default:break}_t();var re=oLe[L];typeof re=="number"?E.push(re):fp(E,re),g=nu}$w.lookahead=-aLe;function Bi(x){switch(y=0,x){case 120:case 88:E.push(x),g=BC;break;default:je(x,fd);break}}function BC(x){switch(x){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 97:case 98:case 99:case 100:case 101:case 102:je(x,Yw);break;default:je(x,nu);break}}function fd(x){switch(x){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:je(x,DC);break;default:je(x,nu);break}}function Yw(x){switch(x){case 65:case 66:case 67:case 68:case 69:case 70:y*=16,y+=x-55;break;case 97:case 98:case 99:case 100:case 101:case 102:y*=16,y+=x-87;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:y*=16,y+=x-48;break;case 59:g=ps;break;default:je(x,ps);break}}function DC(x){switch(x){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:y*=10,y+=x-48;break;case 59:g=ps;break;default:je(x,ps);break}}function ps(x){y in Jj?y=Jj[y]:(y>1114111||y>=55296&&y<57344)&&(y=65533),_t(),y<=65535?E.push(y):(y=y-65536,E.push(55296+(y>>10)),E.push(56320+(y&1023))),je(x,nu)}function nu(x){switch(m){case Tg:case Tf:case oA:B+=qs(E);break;default:fp(ue,E);break}je(x,m)}function Kw(x,S,L,re){switch(x){case 1:if(S=S.replace(hp,""),S.length===0)return;break;case 4:Ge._appendChild(Ge.createComment(S));return;case 5:var oe=S,De=L,st=re;Ge.appendChild(new XPe(Ge,oe,De,st)),Rt||oe.toLowerCase()!=="html"||rLe.test(De)||st&&st.toLowerCase()===nLe||st===void 0&&$j.test(De)?Ge._quirks=!0:(iLe.test(De)||st!==void 0&&$j.test(De))&&(Ge._limitedQuirks=!0),U=TC;return}Ge._quirks=!0,U=TC,U(x,S,L,re)}function TC(x,S,L,re){var oe;switch(x){case 1:if(S=S.replace(hp,""),S.length===0)return;break;case 5:return;case 4:Ge._appendChild(Ge.createComment(S));return;case 2:if(S==="html"){oe=Bg(Ge,S,L),Q.push(oe),Ge.appendChild(oe),U=Rg;return}break;case 3:switch(S){case"html":case"head":case"body":case"br":break;default:return}}oe=Bg(Ge,"html",null),Q.push(oe),Ge.appendChild(oe),U=Rg,U(x,S,L,re)}function Rg(x,S,L,re){switch(x){case 1:if(S=S.replace(hp,""),S.length===0)return;break;case 5:return;case 4:rl(S);return;case 2:switch(S){case"html":it(x,S,L,re);return;case"head":var oe=bt(S,L);ie=oe,U=Rn;return}break;case 3:switch(S){case"html":case"head":case"body":case"br":break;default:return}}Rg(Os,"head",null),U(x,S,L,re)}function Rn(x,S,L,re){switch(x){case 1:var oe=S.match(hp);if(oe&&(nl(oe[0]),S=S.substring(oe[0].length)),S.length===0)return;break;case 4:rl(S);return;case 5:return;case 2:switch(S){case"html":it(x,S,L,re);return;case"meta":case"base":case"basefont":case"bgsound":case"link":bt(S,L),Q.pop();return;case"title":P2(S,L);return;case"noscript":if(!dt){bt(S,L),U=RC;return}case"noframes":case"style":tA(S,L);return;case"script":Xm(function(De){var st=Bg(De,S,L);return st._parser_inserted=!0,st._force_async=!1,z&&(st._already_started=!0),fa(),st}),g=tu,ce=U,U=As;return;case"template":bt(S,L),se.insertMarker(),ve=!1,U=kg,Ie.push(U);return;case"head":return}break;case 3:switch(S){case"head":Q.pop(),U=ms;return;case"body":case"html":case"br":break;case"template":if(!Q.contains("template"))return;Q.generateImpliedEndTags(null,"thorough"),Q.popTag("template"),se.clearToMarker(),Ie.pop(),Df();return;default:return}break}Rn(cr,"head",null),U(x,S,L,re)}function RC(x,S,L,re){switch(x){case 5:return;case 4:Rn(x,S);return;case 1:var oe=S.match(hp);if(oe&&(Rn(x,oe[0]),S=S.substring(oe[0].length)),S.length===0)return;break;case 2:switch(S){case"html":it(x,S,L,re);return;case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"style":Rn(x,S,L);return;case"head":case"noscript":return}break;case 3:switch(S){case"noscript":Q.pop(),U=Rn;return;case"br":break;default:return}break}RC(cr,"noscript",null),U(x,S,L,re)}function ms(x,S,L,re){switch(x){case 1:var oe=S.match(hp);if(oe&&(nl(oe[0]),S=S.substring(oe[0].length)),S.length===0)return;break;case 4:rl(S);return;case 5:return;case 2:switch(S){case"html":it(x,S,L,re);return;case"body":bt(S,L),ve=!1,U=it;return;case"frameset":bt(S,L),U=kC;return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":Q.push(ie),Rn(Os,S,L),Q.removeElement(ie);return;case"head":return}break;case 3:switch(S){case"template":return Rn(x,S,L,re);case"body":case"html":case"br":break;default:return}break}ms(Os,"body",null),ve=!0,U(x,S,L,re)}function it(x,S,L,re){var oe,De,st,Wt;switch(x){case 1:if(wr&&(S=S.replace(lB,""),S.length===0))return;ve&&aB.test(S)&&(ve=!1),Li(),nl(S);return;case 5:return;case 4:rl(S);return;case-1:if(Ie.length)return kg(x);cd();return;case 2:switch(S){case"html":if(Q.contains("template"))return;s7(L,Q.elements[0]);return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":Rn(Os,S,L);return;case"body":if(oe=Q.elements[1],!oe||!(oe instanceof en.HTMLBodyElement)||Q.contains("template"))return;ve=!1,s7(L,oe);return;case"frameset":if(!ve||(oe=Q.elements[1],!oe||!(oe instanceof en.HTMLBodyElement)))return;for(oe.parentNode&&oe.parentNode.removeChild(oe);!(Q.top instanceof en.HTMLHtmlElement);)Q.pop();bt(S,L),U=kC;return;case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"nav":case"ol":case"p":case"section":case"summary":case"ul":Q.inButtonScope("p")&&it(cr,"p"),bt(S,L);return;case"menu":Q.inButtonScope("p")&&it(cr,"p"),tn(Q.top,"menuitem")&&Q.pop(),bt(S,L);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":Q.inButtonScope("p")&&it(cr,"p"),Q.top instanceof en.HTMLHeadingElement&&Q.pop(),bt(S,L);return;case"pre":case"listing":Q.inButtonScope("p")&&it(cr,"p"),bt(S,L),sr=!0,ve=!1;return;case"form":if(Pe&&!Q.contains("template"))return;Q.inButtonScope("p")&&it(cr,"p"),Wt=bt(S,L),Q.contains("template")||(Pe=Wt);return;case"li":for(ve=!1,De=Q.elements.length-1;De>=0;De--){if(st=Q.elements[De],st instanceof en.HTMLLIElement){it(cr,"li");break}if(tn(st,gp)&&!tn(st,ZU))break}Q.inButtonScope("p")&&it(cr,"p"),bt(S,L);return;case"dd":case"dt":for(ve=!1,De=Q.elements.length-1;De>=0;De--){if(st=Q.elements[De],tn(st,a7)){it(cr,st.localName);break}if(tn(st,gp)&&!tn(st,ZU))break}Q.inButtonScope("p")&&it(cr,"p"),bt(S,L);return;case"plaintext":Q.inButtonScope("p")&&it(cr,"p"),bt(S,L),g=vC;return;case"button":Q.inScope("button")?(it(cr,"button"),U(x,S,L,re)):(Li(),bt(S,L),ve=!1);return;case"a":var mn=se.findElementByTag("a");mn&&(it(cr,S),se.remove(mn),Q.removeElement(mn));case"b":case"big":case"code":case"em":case"font":case"i":case"s":case"small":case"strike":case"strong":case"tt":case"u":Li(),se.push(bt(S,L),L);return;case"nobr":Li(),Q.inScope(S)&&(it(cr,S),Li()),se.push(bt(S,L),L);return;case"applet":case"marquee":case"object":Li(),bt(S,L),se.insertMarker(),ve=!1;return;case"table":!Ge._quirks&&Q.inButtonScope("p")&&it(cr,"p"),bt(S,L),ve=!1,U=Qo;return;case"area":case"br":case"embed":case"img":case"keygen":case"wbr":Li(),bt(S,L),Q.pop(),ve=!1;return;case"input":Li(),Wt=bt(S,L),Q.pop();var Ui=Wt.getAttribute("type");(!Ui||Ui.toLowerCase()!=="hidden")&&(ve=!1);return;case"param":case"source":case"track":bt(S,L),Q.pop();return;case"hr":Q.inButtonScope("p")&&it(cr,"p"),tn(Q.top,"menuitem")&&Q.pop(),bt(S,L),Q.pop(),ve=!1;return;case"image":it(Os,"img",L,re);return;case"textarea":bt(S,L),sr=!0,ve=!1,g=eu,ce=U,U=As;return;case"xmp":Q.inButtonScope("p")&&it(cr,"p"),Li(),ve=!1,tA(S,L);return;case"iframe":ve=!1,tA(S,L);return;case"noembed":tA(S,L);return;case"select":Li(),bt(S,L),ve=!1,U===Qo||U===sl||U===nc||U===jr||U===so?U=uA:U=pa;return;case"optgroup":case"option":Q.top instanceof en.HTMLOptionElement&&it(cr,"option"),Li(),bt(S,L);return;case"menuitem":tn(Q.top,"menuitem")&&Q.pop(),Li(),bt(S,L);return;case"rb":case"rtc":Q.inScope("ruby")&&Q.generateImpliedEndTags(),bt(S,L);return;case"rp":case"rt":Q.inScope("ruby")&&Q.generateImpliedEndTags("rtc"),bt(S,L);return;case"math":Li(),i7(L),jU(L),mC(S,L,at.MATHML),re&&Q.pop();return;case"svg":Li(),n7(L),jU(L),mC(S,L,at.SVG),re&&Q.pop();return;case"caption":case"col":case"colgroup":case"frame":case"head":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}Li(),bt(S,L);return;case 3:switch(S){case"template":Rn(cr,S,L);return;case"body":if(!Q.inScope("body"))return;U=Jw;return;case"html":if(!Q.inScope("body"))return;U=Jw,U(x,S,L);return;case"address":case"article":case"aside":case"blockquote":case"button":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"listing":case"main":case"menu":case"nav":case"ol":case"pre":case"section":case"summary":case"ul":if(!Q.inScope(S))return;Q.generateImpliedEndTags(),Q.popTag(S);return;case"form":if(Q.contains("template")){if(!Q.inScope("form"))return;Q.generateImpliedEndTags(),Q.popTag("form")}else{var oo=Pe;if(Pe=null,!oo||!Q.elementInScope(oo))return;Q.generateImpliedEndTags(),Q.removeElement(oo)}return;case"p":Q.inButtonScope(S)?(Q.generateImpliedEndTags(S),Q.popTag(S)):(it(Os,S,null),U(x,S,L,re));return;case"li":if(!Q.inListItemScope(S))return;Q.generateImpliedEndTags(S),Q.popTag(S);return;case"dd":case"dt":if(!Q.inScope(S))return;Q.generateImpliedEndTags(S),Q.popTag(S);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":if(!Q.elementTypeInScope(en.HTMLHeadingElement))return;Q.generateImpliedEndTags(),Q.popElementType(en.HTMLHeadingElement);return;case"sarcasm":break;case"a":case"b":case"big":case"code":case"em":case"font":case"i":case"nobr":case"s":case"small":case"strike":case"strong":case"tt":case"u":var kn=yC(S);if(kn)return;break;case"applet":case"marquee":case"object":if(!Q.inScope(S))return;Q.generateImpliedEndTags(),Q.popTag(S),se.clearToMarker();return;case"br":it(Os,S,null);return}for(De=Q.elements.length-1;De>=0;De--)if(st=Q.elements[De],tn(st,S)){Q.generateImpliedEndTags(S),Q.popElement(st);break}else if(tn(st,gp))return;return}}function As(x,S,L,re){switch(x){case 1:nl(S);return;case-1:Q.top instanceof en.HTMLScriptElement&&(Q.top._already_started=!0),Q.pop(),U=ce,U(x);return;case 3:S==="script"?L2():(Q.pop(),U=ce);return;default:return}}function Qo(x,S,L,re){function oe(st){for(var Wt=0,mn=st.length;Wt<mn;Wt++)if(st[Wt][0]==="type")return st[Wt][1].toLowerCase();return null}switch(x){case 1:if(tr){it(x,S,L,re);return}else if(tn(Q.top,a0)){Zt=[],ce=U,U=zw,U(x,S,L,re);return}break;case 4:rl(S);return;case 5:return;case 2:switch(S){case"caption":Q.clearToContext(cB),se.insertMarker(),bt(S,L),U=sl;return;case"colgroup":Q.clearToContext(cB),bt(S,L),U=hd;return;case"col":Qo(Os,"colgroup",null),U(x,S,L,re);return;case"tbody":case"tfoot":case"thead":Q.clearToContext(cB),bt(S,L),U=nc;return;case"td":case"th":case"tr":Qo(Os,"tbody",null),U(x,S,L,re);return;case"table":if(!Q.inTableScope(S))return;Qo(cr,S),U(x,S,L,re);return;case"style":case"script":case"template":Rn(x,S,L,re);return;case"input":var De=oe(L);if(De!=="hidden")break;bt(S,L),Q.pop();return;case"form":if(Pe||Q.contains("template"))return;Pe=bt(S,L),Q.popElement(Pe);return}break;case 3:switch(S){case"table":if(!Q.inTableScope(S))return;Q.popTag(S),Df();return;case"body":case"caption":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return;case"template":Rn(x,S,L,re);return}break;case-1:it(x,S,L,re);return}tc=!0,it(x,S,L,re),tc=!1}function zw(x,S,L,re){if(x===o0){if(wr&&(S=S.replace(lB,""),S.length===0))return;Zt.push(S)}else{var oe=Zt.join("");Zt.length=0,aB.test(oe)?(tc=!0,it(o0,oe),tc=!1):nl(oe),U=ce,U(x,S,L,re)}}function sl(x,S,L,re){function oe(){return Q.inTableScope("caption")?(Q.generateImpliedEndTags(),Q.popTag("caption"),se.clearToMarker(),U=Qo,!0):!1}switch(x){case 2:switch(S){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":oe()&&U(x,S,L,re);return}break;case 3:switch(S){case"caption":oe();return;case"table":oe()&&U(x,S,L,re);return;case"body":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}break}it(x,S,L,re)}function hd(x,S,L,re){switch(x){case 1:var oe=S.match(hp);if(oe&&(nl(oe[0]),S=S.substring(oe[0].length)),S.length===0)return;break;case 4:rl(S);return;case 5:return;case 2:switch(S){case"html":it(x,S,L,re);return;case"col":bt(S,L),Q.pop();return;case"template":Rn(x,S,L,re);return}break;case 3:switch(S){case"colgroup":if(!tn(Q.top,"colgroup"))return;Q.pop(),U=Qo;return;case"col":return;case"template":Rn(x,S,L,re);return}break;case-1:it(x,S,L,re);return}tn(Q.top,"colgroup")&&(hd(cr,"colgroup"),U(x,S,L,re))}function nc(x,S,L,re){function oe(){!Q.inTableScope("tbody")&&!Q.inTableScope("thead")&&!Q.inTableScope("tfoot")||(Q.clearToContext(uB),nc(cr,Q.top.localName,null),U(x,S,L,re))}switch(x){case 2:switch(S){case"tr":Q.clearToContext(uB),bt(S,L),U=jr;return;case"th":case"td":nc(Os,"tr",null),U(x,S,L,re);return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":oe();return}break;case 3:switch(S){case"table":oe();return;case"tbody":case"tfoot":case"thead":Q.inTableScope(S)&&(Q.clearToContext(uB),Q.pop(),U=Qo);return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":case"tr":return}break}Qo(x,S,L,re)}function jr(x,S,L,re){function oe(){return Q.inTableScope("tr")?(Q.clearToContext(XU),Q.pop(),U=nc,!0):!1}switch(x){case 2:switch(S){case"th":case"td":Q.clearToContext(XU),bt(S,L),U=so,se.insertMarker();return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":case"tr":oe()&&U(x,S,L,re);return}break;case 3:switch(S){case"tr":oe();return;case"table":oe()&&U(x,S,L,re);return;case"tbody":case"tfoot":case"thead":Q.inTableScope(S)&&oe()&&U(x,S,L,re);return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":return}break}Qo(x,S,L,re)}function so(x,S,L,re){switch(x){case 2:switch(S){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":Q.inTableScope("td")?(so(cr,"td"),U(x,S,L,re)):Q.inTableScope("th")&&(so(cr,"th"),U(x,S,L,re));return}break;case 3:switch(S){case"td":case"th":if(!Q.inTableScope(S))return;Q.generateImpliedEndTags(),Q.popTag(S),se.clearToMarker(),U=jr;return;case"body":case"caption":case"col":case"colgroup":case"html":return;case"table":case"tbody":case"tfoot":case"thead":case"tr":if(!Q.inTableScope(S))return;so(cr,Q.inTableScope("td")?"td":"th"),U(x,S,L,re);return}break}it(x,S,L,re)}function pa(x,S,L,re){switch(x){case 1:if(wr&&(S=S.replace(lB,""),S.length===0))return;nl(S);return;case 4:rl(S);return;case 5:return;case-1:it(x,S,L,re);return;case 2:switch(S){case"html":it(x,S,L,re);return;case"option":Q.top instanceof en.HTMLOptionElement&&pa(cr,S),bt(S,L);return;case"optgroup":Q.top instanceof en.HTMLOptionElement&&pa(cr,"option"),Q.top instanceof en.HTMLOptGroupElement&&pa(cr,S),bt(S,L);return;case"select":pa(cr,S);return;case"input":case"keygen":case"textarea":if(!Q.inSelectScope("select"))return;pa(cr,"select"),U(x,S,L,re);return;case"script":case"template":Rn(x,S,L,re);return}break;case 3:switch(S){case"optgroup":Q.top instanceof en.HTMLOptionElement&&Q.elements[Q.elements.length-2]instanceof en.HTMLOptGroupElement&&pa(cr,"option"),Q.top instanceof en.HTMLOptGroupElement&&Q.pop();return;case"option":Q.top instanceof en.HTMLOptionElement&&Q.pop();return;case"select":if(!Q.inSelectScope(S))return;Q.popTag(S),Df();return;case"template":Rn(x,S,L,re);return}break}}function uA(x,S,L,re){switch(S){case"caption":case"table":case"tbody":case"tfoot":case"thead":case"tr":case"td":case"th":switch(x){case 2:uA(cr,"select"),U(x,S,L,re);return;case 3:Q.inTableScope(S)&&(uA(cr,"select"),U(x,S,L,re));return}}pa(x,S,L,re)}function kg(x,S,L,re){function oe(De){U=De,Ie[Ie.length-1]=U,U(x,S,L,re)}switch(x){case 1:case 4:case 5:it(x,S,L,re);return;case-1:Q.contains("template")?(Q.popTag("template"),se.clearToMarker(),Ie.pop(),Df(),U(x,S,L,re)):cd();return;case 2:switch(S){case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":Rn(x,S,L,re);return;case"caption":case"colgroup":case"tbody":case"tfoot":case"thead":oe(Qo);return;case"col":oe(hd);return;case"tr":oe(nc);return;case"td":case"th":oe(jr);return}oe(it);return;case 3:switch(S){case"template":Rn(x,S,L,re);return;default:return}}}function Jw(x,S,L,re){switch(x){case 1:if(aB.test(S))break;it(x,S);return;case 4:Q.elements[0]._appendChild(Ge.createComment(S));return;case 5:return;case-1:cd();return;case 2:if(S==="html"){it(x,S,L,re);return}break;case 3:if(S==="html"){if(z)return;U=jw;return}break}U=it,U(x,S,L,re)}function kC(x,S,L,re){switch(x){case 1:S=S.replace(JU,""),S.length>0&&nl(S);return;case 4:rl(S);return;case 5:return;case-1:cd();return;case 2:switch(S){case"html":it(x,S,L,re);return;case"frameset":bt(S,L);return;case"frame":bt(S,L),Q.pop();return;case"noframes":Rn(x,S,L,re);return}break;case 3:if(S==="frameset"){if(z&&Q.top instanceof en.HTMLHtmlElement)return;Q.pop(),!z&&!(Q.top instanceof en.HTMLFrameSetElement)&&(U=nP);return}break}}function nP(x,S,L,re){switch(x){case 1:S=S.replace(JU,""),S.length>0&&nl(S);return;case 4:rl(S);return;case 5:return;case-1:cd();return;case 2:switch(S){case"html":it(x,S,L,re);return;case"noframes":Rn(x,S,L,re);return}break;case 3:if(S==="html"){U=dA;return}break}}function jw(x,S,L,re){switch(x){case 1:if(aB.test(S))break;it(x,S,L,re);return;case 4:Ge._appendChild(Ge.createComment(S));return;case 5:it(x,S,L,re);return;case-1:cd();return;case 2:if(S==="html"){it(x,S,L,re);return}break}U=it,U(x,S,L,re)}function dA(x,S,L,re){switch(x){case 1:S=S.replace(JU,""),S.length>0&&it(x,S,L,re);return;case 4:Ge._appendChild(Ge.createComment(S));return;case 5:it(x,S,L,re);return;case-1:cd();return;case 2:switch(S){case"html":it(x,S,L,re);return;case"noframes":Rn(x,S,L,re);return}break}}function gd(x,S,L,re){function oe(mn){for(var Ui=0,oo=mn.length;Ui<oo;Ui++)switch(mn[Ui][0]){case"color":case"face":case"size":return!0}return!1}var De;switch(x){case 1:ve&&mLe.test(S)&&(ve=!1),wr&&(S=S.replace(lB,"\uFFFD")),nl(S);return;case 4:rl(S);return;case 5:return;case 2:switch(S){case"font":if(!oe(L))break;case"b":case"big":case"blockquote":case"body":case"br":case"center":case"code":case"dd":case"div":case"dl":case"dt":case"em":case"embed":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"head":case"hr":case"i":case"img":case"li":case"listing":case"menu":case"meta":case"nobr":case"ol":case"p":case"pre":case"ruby":case"s":case"small":case"span":case"strong":case"strike":case"sub":case"sup":case"table":case"tt":case"u":case"ul":case"var":if(z)break;do Q.pop(),De=Q.top;while(De.namespaceURI!==at.HTML&&!t7(De)&&!r7(De));Tn(x,S,L,re);return}De=Q.elements.length===1&&z?t:Q.top,De.namespaceURI===at.MATHML?i7(L):De.namespaceURI===at.SVG&&(S=yLe(S),n7(L)),jU(L),mC(S,L,De.namespaceURI),re&&(S==="script"&&(De.namespaceURI,at.SVG),Q.pop());return;case 3:if(De=Q.top,S==="script"&&De.namespaceURI===at.SVG&&De.localName==="script")Q.pop();else for(var st=Q.elements.length-1,Wt=Q.elements[st];;){if(Wt.localName.toLowerCase()===S){Q.popElement(Wt);break}if(Wt=Q.elements[--st],Wt.namespaceURI===at.HTML){U(x,S,L,re);break}}return}}return Hr.testTokenizer=function(x,S,L,re){var oe=[];switch(S){case"PCDATA state":g=Xt;break;case"RCDATA state":g=eu;break;case"RAWTEXT state":g=Dg;break;case"PLAINTEXT state":g=vC;break}if(L&&(C=L),Tn=function(st,Wt,mn,Ui){switch(fa(),st){case 1:oe.length>0&&oe[oe.length-1][0]==="Character"?oe[oe.length-1][1]+=Wt:oe.push(["Character",Wt]);break;case 4:oe.push(["Comment",Wt]);break;case 5:oe.push(["DOCTYPE",Wt,mn===void 0?null:mn,Ui===void 0?null:Ui,!Rt]);break;case 2:for(var oo=Object.create(null),kn=0;kn<mn.length;kn++){var ic=mn[kn];ic.length===1?oo[ic[0]]="":oo[ic[0]]=ic[1]}var No=["StartTag",Wt,oo];Ui&&No.push(!0),oe.push(No);break;case 3:oe.push(["EndTag",Wt]);break;case-1:break}},!re)this.parse(x,!0);else{for(var De=0;De<x.length;De++)this.parse(x[De]);this.parse("",!0)}return oe},Hr}});var Fb=_((ISt,y7)=>{"use strict";y7.exports=A7;var p7=nB(),m7=sB(),vLe=fB(),hB=oi(),CLe=OI();function A7(e){this.contextObject=e}var bLe={xml:{"":!0,"1.0":!0,"2.0":!0},core:{"":!0,"2.0":!0},html:{"":!0,"1.0":!0,"2.0":!0},xhtml:{"":!0,"1.0":!0,"2.0":!0}};A7.prototype={hasFeature:function(t,r){var n=bLe[(t||"").toLowerCase()];return n&&n[r||""]||!1},createDocumentType:function(t,r,n){return CLe.isValidQName(t)||hB.InvalidCharacterError(),new m7(this.contextObject,t,r,n)},createDocument:function(t,r,n){var i=new p7(!1,null),s;return r?s=i.createElementNS(t,r):s=null,n&&i.appendChild(n),s&&i.appendChild(s),t===hB.NAMESPACE.HTML?i._contentType="application/xhtml+xml":t===hB.NAMESPACE.SVG?i._contentType="image/svg+xml":i._contentType="application/xml",i},createHTMLDocument:function(t){var r=new p7(!0,null);r.appendChild(new m7(r,"html"));var n=r.createElement("html");r.appendChild(n);var i=r.createElement("head");if(n.appendChild(i),t!==void 0){var s=r.createElement("title");i.appendChild(s),s.appendChild(r.createTextNode(t))}return n.appendChild(r.createElement("body")),r.modclock=1,r},mozSetOutputMutationHandler:function(e,t){e.mutationHandler=t},mozGetInputMutationHandler:function(e){hB.nyi()},mozHTMLParser:vLe}});var C7=_((BSt,v7)=>{"use strict";var ELe=JI(),_Le=qU();v7.exports=tO;function tO(e,t){this._window=e,this._href=t}tO.prototype=Object.create(_Le.prototype,{constructor:{value:tO},href:{get:function(){return this._href},set:function(e){this.assign(e)}},assign:{value:function(e){var t=new ELe(this._href),r=t.resolve(e);this._href=r}},replace:{value:function(e){this.assign(e)}},reload:{value:function(){this.assign(this.href)}},toString:{value:function(){return this.href}}})});var E7=_((DSt,b7)=>{"use strict";var xLe=Object.create(null,{appCodeName:{value:"Mozilla"},appName:{value:"Netscape"},appVersion:{value:"4.0"},platform:{value:""},product:{value:"Gecko"},productSub:{value:"20100101"},userAgent:{value:""},vendor:{value:""},vendorSub:{value:""},taintEnabled:{value:function(){return!1}}});b7.exports=xLe});var x7=_((TSt,_7)=>{"use strict";var wLe={setTimeout,clearTimeout,setInterval,clearInterval};_7.exports=wLe});var nO=_((Qb,w7)=>{"use strict";var rO=oi();Qb=w7.exports={CSSStyleDeclaration:jI(),CharacterData:wb(),Comment:IU(),DOMException:QI(),DOMImplementation:Fb(),DOMTokenList:uU(),Document:nB(),DocumentFragment:DU(),DocumentType:sB(),Element:XA(),HTMLParser:fB(),NamedNodeMap:mU(),Node:bs(),NodeList:up(),NodeFilter:Db(),ProcessingInstruction:RU(),Text:wU(),Window:iO()};rO.merge(Qb,OU());rO.merge(Qb,eB().elements);rO.merge(Qb,$U().elements)});var iO=_((RSt,S7)=>{"use strict";var SLe=Fb(),ILe=$L(),BLe=C7(),Nb=oi();S7.exports=gB;function gB(e){this.document=e||new SLe(null).createHTMLDocument(""),this.document._scripting_enabled=!0,this.document.defaultView=this,this.location=new BLe(this,this.document._address||"about:blank")}gB.prototype=Object.create(ILe.prototype,{console:{value:console},history:{value:{back:Nb.nyi,forward:Nb.nyi,go:Nb.nyi}},navigator:{value:E7()},window:{get:function(){return this}},self:{get:function(){return this}},frames:{get:function(){return this}},parent:{get:function(){return this}},top:{get:function(){return this}},length:{value:0},frameElement:{value:null},opener:{value:null},onload:{get:function(){return this._getEventHandler("load")},set:function(e){this._setEventHandler("load",e)}},getComputedStyle:{value:function(t){return t.style}}});Nb.expose(x7(),gB);Nb.expose(nO(),gB)});var T7=_(pp=>{"use strict";var I7=Fb(),B7=fB(),kSt=iO(),D7=nO();pp.createDOMImplementation=function(){return new I7(null)};pp.createDocument=function(e,t){if(e||t){var r=new B7;return r.parse(e||"",!0),r.document()}return new I7(null).createHTMLDocument("")};pp.createIncrementalHTMLParser=function(){var e=new B7;return{write:function(t){t.length>0&&e.parse(t,!1,function(){return!0})},end:function(t){e.parse(t||"",!0,function(){return!0})},process:function(t){return e.parse("",!1,t)},document:function(){return e.document()}}};pp.createWindow=function(e,t){var r=pp.createDocument(e);return t!==void 0&&(r._address=t),new D7.Window(r)};pp.impl=D7});var V7=_((FSt,q7)=>{"use strict";function DLe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}function lO(e,t){return Array(t+1).join(e)}function TLe(e){return e.replace(/^\n*/,"")}function RLe(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var kLe=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function cO(e){return uO(e,kLe)}var M7=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function F7(e){return uO(e,M7)}function MLe(e){return N7(e,M7)}var Q7=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function FLe(e){return uO(e,Q7)}function QLe(e){return N7(e,Q7)}function uO(e,t){return t.indexOf(e.nodeName)>=0}function N7(e,t){return e.getElementsByTagName&&t.some(function(r){return e.getElementsByTagName(r).length})}var Vs={};Vs.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};Vs.lineBreak={filter:"br",replacement:function(e,t,r){return r.br+`
`}};Vs.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,r){var n=Number(t.nodeName.charAt(1));if(r.headingStyle==="setext"&&n<3){var i=lO(n===1?"=":"-",e.length);return`

`+e+`
`+i+`

`}else return`

`+lO("#",n)+" "+e+`

`}};Vs.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};Vs.list={filter:["ul","ol"],replacement:function(e,t){var r=t.parentNode;return r.nodeName==="LI"&&r.lastElementChild===t?`
`+e:`

`+e+`

`}};Vs.listItem={filter:"li",replacement:function(e,t,r){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var n=r.bulletListMarker+"   ",i=t.parentNode;if(i.nodeName==="OL"){var s=i.getAttribute("start"),o=Array.prototype.indexOf.call(i.children,t);n=(s?Number(s)+o:o+1)+".  "}return n+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};Vs.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,r){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Vs.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,r){for(var n=t.firstChild.getAttribute("class")||"",i=(n.match(/language-(\S+)/)||[null,""])[1],s=t.firstChild.textContent,o=r.fence.charAt(0),a=3,l=new RegExp("^"+o+"{3,}","gm"),c;c=l.exec(s);)c[0].length>=a&&(a=c[0].length+1);var u=lO(o,a);return`

`+u+i+`
`+s.replace(/\n$/,"")+`
`+u+`

`}};Vs.horizontalRule={filter:"hr",replacement:function(e,t,r){return`

`+r.hr+`

`}};Vs.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var r=t.getAttribute("href");r&&(r=r.replace(/([()])/g,"\\$1"));var n=pB(t.getAttribute("title"));return n&&(n=' "'+n.replace(/"/g,'\\"')+'"'),"["+e+"]("+r+n+")"}};Vs.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,r){var n=t.getAttribute("href"),i=pB(t.getAttribute("title"));i&&(i=' "'+i+'"');var s,o;switch(r.linkReferenceStyle){case"collapsed":s="["+e+"][]",o="["+e+"]: "+n+i;break;case"shortcut":s="["+e+"]",o="["+e+"]: "+n+i;break;default:var a=this.references.length+1;s="["+e+"]["+a+"]",o="["+a+"]: "+n+i}return this.references.push(o),s},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Vs.emphasis={filter:["em","i"],replacement:function(e,t,r){return e.trim()?r.emDelimiter+e+r.emDelimiter:""}};Vs.strong={filter:["strong","b"],replacement:function(e,t,r){return e.trim()?r.strongDelimiter+e+r.strongDelimiter:""}};Vs.code={filter:function(e){var t=e.previousSibling||e.nextSibling,r=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!r},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",r="`",n=e.match(/`+/gm)||[];n.indexOf(r)!==-1;)r=r+"`";return r+t+e+t+r}};Vs.image={filter:"img",replacement:function(e,t){var r=pB(t.getAttribute("alt")),n=t.getAttribute("src")||"",i=pB(t.getAttribute("title")),s=i?' "'+i+'"':"";return n?"!["+r+"]("+n+s+")":""}};function pB(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function P7(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}P7.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=sO(this.array,e,this.options))||(t=sO(this._keep,e,this.options))||(t=sO(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function sO(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];if(NLe(i,t,r))return i}}function NLe(e,t,r){var n=e.filter;if(typeof n=="string"){if(n===t.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof n=="function"){if(n.call(e,t,r))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function PLe(e){var t=e.element,r=e.isBlock,n=e.isVoid,i=e.isPre||function(f){return f.nodeName==="PRE"};if(!(!t.firstChild||i(t))){for(var s=null,o=!1,a=null,l=R7(a,t,i);l!==t;){if(l.nodeType===3||l.nodeType===4){var c=l.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!o&&c[0]===" "&&(c=c.substr(1)),!c){l=oO(l);continue}l.data=c,s=l}else if(l.nodeType===1)r(l)||l.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,o=!1):n(l)||i(l)?(s=null,o=!0):s&&(o=!1);else{l=oO(l);continue}var u=R7(a,l,i);a=l,l=u}s&&(s.data=s.data.replace(/ $/,""),s.data||oO(s))}}function oO(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function R7(e,t,r){return e&&e.parentNode===t||r(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var L7=typeof window<"u"?window:{};function LLe(){var e=L7.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function ULe(){var e=function(){};{var t=T7();e.prototype.parseFromString=function(r){return t.createDocument(r)}}return e}var OLe=LLe()?L7.DOMParser:ULe();function qLe(e,t){var r;if(typeof e=="string"){var n=VLe().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");r=n.getElementById("turndown-root")}else r=e.cloneNode(!0);return PLe({element:r,isBlock:cO,isVoid:F7,isPre:t.preformattedCode?HLe:null}),r}var aO;function VLe(){return aO=aO||new OLe,aO}function HLe(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function WLe(e,t){return e.isBlock=cO(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=GLe(e),e.flankingWhitespace=$Le(e,t),e}function GLe(e){return!F7(e)&&!FLe(e)&&/^\s*$/i.test(e.textContent)&&!MLe(e)&&!QLe(e)}function $Le(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var r=YLe(e.textContent);return r.leadingAscii&&k7("left",e,t)&&(r.leading=r.leadingNonAscii),r.trailingAscii&&k7("right",e,t)&&(r.trailing=r.trailingNonAscii),{leading:r.leading,trailing:r.trailing}}function YLe(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function k7(e,t,r){var n,i,s;return e==="left"?(n=t.previousSibling,i=/ $/):(n=t.nextSibling,i=/^ /),n&&(n.nodeType===3?s=i.test(n.nodeValue):r.preformattedCode&&n.nodeName==="CODE"?s=!1:n.nodeType===1&&!cO(n)&&(s=i.test(n.textContent))),s}var KLe=Array.prototype.reduce,zLe=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function mB(e){if(!(this instanceof mB))return new mB(e);var t={rules:Vs,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(r,n){return n.isBlock?`

`:""},keepReplacement:function(r,n){return n.isBlock?`

`+n.outerHTML+`

`:n.outerHTML},defaultReplacement:function(r,n){return n.isBlock?`

`+r+`

`:r}};this.options=DLe({},t,e),this.rules=new P7(this.options)}mB.prototype={turndown:function(e){if(!ZLe(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=U7.call(this,new qLe(e,this.options));return JLe.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return zLe.reduce(function(t,r){return t.replace(r[0],r[1])},e)}};function U7(e){var t=this;return KLe.call(e.childNodes,function(r,n){n=new WLe(n,t.options);var i="";return n.nodeType===3?i=n.isCode?n.nodeValue:t.escape(n.nodeValue):n.nodeType===1&&(i=jLe.call(t,n)),O7(r,i)},"")}function JLe(e){var t=this;return this.rules.forEach(function(r){typeof r.append=="function"&&(e=O7(e,r.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function jLe(e){var t=this.rules.forNode(e),r=U7.call(this,e),n=e.flankingWhitespace;return(n.leading||n.trailing)&&(r=r.trim()),n.leading+t.replacement(r,e,this.options)+n.trailing}function O7(e,t){var r=RLe(e),n=TLe(t),i=Math.max(e.length-r.length,t.length-n.length),s=`

`.substring(0,i);return r+s+n}function ZLe(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}q7.exports=mB});var tZ=_((XIt,eZ)=>{"use strict";function tUe(){this.__data__=[],this.size=0}eZ.exports=tUe});var RB=_((eBt,rZ)=>{"use strict";function rUe(e,t){return e===t||e!==e&&t!==t}rZ.exports=rUe});var Ob=_((tBt,nZ)=>{"use strict";var nUe=RB();function iUe(e,t){for(var r=e.length;r--;)if(nUe(e[r][0],t))return r;return-1}nZ.exports=iUe});var sZ=_((rBt,iZ)=>{"use strict";var sUe=Ob(),oUe=Array.prototype,aUe=oUe.splice;function lUe(e){var t=this.__data__,r=sUe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():aUe.call(t,r,1),--this.size,!0}iZ.exports=lUe});var aZ=_((nBt,oZ)=>{"use strict";var cUe=Ob();function uUe(e){var t=this.__data__,r=cUe(t,e);return r<0?void 0:t[r][1]}oZ.exports=uUe});var cZ=_((iBt,lZ)=>{"use strict";var dUe=Ob();function fUe(e){return dUe(this.__data__,e)>-1}lZ.exports=fUe});var dZ=_((sBt,uZ)=>{"use strict";var hUe=Ob();function gUe(e,t){var r=this.__data__,n=hUe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}uZ.exports=gUe});var qb=_((oBt,fZ)=>{"use strict";var pUe=tZ(),mUe=sZ(),AUe=aZ(),yUe=cZ(),vUe=dZ();function l0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l0.prototype.clear=pUe;l0.prototype.delete=mUe;l0.prototype.get=AUe;l0.prototype.has=yUe;l0.prototype.set=vUe;fZ.exports=l0});var gZ=_((aBt,hZ)=>{"use strict";var CUe=qb();function bUe(){this.__data__=new CUe,this.size=0}hZ.exports=bUe});var mZ=_((lBt,pZ)=>{"use strict";function EUe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}pZ.exports=EUe});var yZ=_((cBt,AZ)=>{"use strict";function _Ue(e){return this.__data__.get(e)}AZ.exports=_Ue});var CZ=_((uBt,vZ)=>{"use strict";function xUe(e){return this.__data__.has(e)}vZ.exports=xUe});var dO=_((dBt,bZ)=>{"use strict";var wUe=IA(),SUe=wd(),IUe="[object AsyncFunction]",BUe="[object Function]",DUe="[object GeneratorFunction]",TUe="[object Proxy]";function RUe(e){if(!SUe(e))return!1;var t=wUe(e);return t==BUe||t==DUe||t==IUe||t==TUe}bZ.exports=RUe});var _Z=_((fBt,EZ)=>{"use strict";var kUe=hl(),MUe=kUe["__core-js_shared__"];EZ.exports=MUe});var SZ=_((hBt,wZ)=>{"use strict";var fO=_Z(),xZ=function(){var e=/[^.]+$/.exec(fO&&fO.keys&&fO.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function FUe(e){return!!xZ&&xZ in e}wZ.exports=FUe});var hO=_((gBt,IZ)=>{"use strict";var QUe=Function.prototype,NUe=QUe.toString;function PUe(e){if(e!=null){try{return NUe.call(e)}catch{}try{return e+""}catch{}}return""}IZ.exports=PUe});var DZ=_((pBt,BZ)=>{"use strict";var LUe=dO(),UUe=SZ(),OUe=wd(),qUe=hO(),VUe=/[\\^$.*+?()[\]{}|]/g,HUe=/^\[object .+?Constructor\]$/,WUe=Function.prototype,GUe=Object.prototype,$Ue=WUe.toString,YUe=GUe.hasOwnProperty,KUe=RegExp("^"+$Ue.call(YUe).replace(VUe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zUe(e){if(!OUe(e)||UUe(e))return!1;var t=LUe(e)?KUe:HUe;return t.test(qUe(e))}BZ.exports=zUe});var RZ=_((mBt,TZ)=>{"use strict";function JUe(e,t){return e?.[t]}TZ.exports=JUe});var oh=_((ABt,kZ)=>{"use strict";var jUe=DZ(),ZUe=RZ();function XUe(e,t){var r=ZUe(e,t);return jUe(r)?r:void 0}kZ.exports=XUe});var kB=_((yBt,MZ)=>{"use strict";var eOe=oh(),tOe=hl(),rOe=eOe(tOe,"Map");MZ.exports=rOe});var Vb=_((vBt,FZ)=>{"use strict";var nOe=oh(),iOe=nOe(Object,"create");FZ.exports=iOe});var PZ=_((CBt,NZ)=>{"use strict";var QZ=Vb();function sOe(){this.__data__=QZ?QZ(null):{},this.size=0}NZ.exports=sOe});var UZ=_((bBt,LZ)=>{"use strict";function oOe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}LZ.exports=oOe});var qZ=_((EBt,OZ)=>{"use strict";var aOe=Vb(),lOe="__lodash_hash_undefined__",cOe=Object.prototype,uOe=cOe.hasOwnProperty;function dOe(e){var t=this.__data__;if(aOe){var r=t[e];return r===lOe?void 0:r}return uOe.call(t,e)?t[e]:void 0}OZ.exports=dOe});var HZ=_((_Bt,VZ)=>{"use strict";var fOe=Vb(),hOe=Object.prototype,gOe=hOe.hasOwnProperty;function pOe(e){var t=this.__data__;return fOe?t[e]!==void 0:gOe.call(t,e)}VZ.exports=pOe});var GZ=_((xBt,WZ)=>{"use strict";var mOe=Vb(),AOe="__lodash_hash_undefined__";function yOe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mOe&&t===void 0?AOe:t,this}WZ.exports=yOe});var YZ=_((wBt,$Z)=>{"use strict";var vOe=PZ(),COe=UZ(),bOe=qZ(),EOe=HZ(),_Oe=GZ();function c0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c0.prototype.clear=vOe;c0.prototype.delete=COe;c0.prototype.get=bOe;c0.prototype.has=EOe;c0.prototype.set=_Oe;$Z.exports=c0});var JZ=_((SBt,zZ)=>{"use strict";var KZ=YZ(),xOe=qb(),wOe=kB();function SOe(){this.size=0,this.__data__={hash:new KZ,map:new(wOe||xOe),string:new KZ}}zZ.exports=SOe});var ZZ=_((IBt,jZ)=>{"use strict";function IOe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}jZ.exports=IOe});var Hb=_((BBt,XZ)=>{"use strict";var BOe=ZZ();function DOe(e,t){var r=e.__data__;return BOe(t)?r[typeof t=="string"?"string":"hash"]:r.map}XZ.exports=DOe});var tX=_((DBt,eX)=>{"use strict";var TOe=Hb();function ROe(e){var t=TOe(this,e).delete(e);return this.size-=t?1:0,t}eX.exports=ROe});var nX=_((TBt,rX)=>{"use strict";var kOe=Hb();function MOe(e){return kOe(this,e).get(e)}rX.exports=MOe});var sX=_((RBt,iX)=>{"use strict";var FOe=Hb();function QOe(e){return FOe(this,e).has(e)}iX.exports=QOe});var aX=_((kBt,oX)=>{"use strict";var NOe=Hb();function POe(e,t){var r=NOe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}oX.exports=POe});var gO=_((MBt,lX)=>{"use strict";var LOe=JZ(),UOe=tX(),OOe=nX(),qOe=sX(),VOe=aX();function u0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u0.prototype.clear=LOe;u0.prototype.delete=UOe;u0.prototype.get=OOe;u0.prototype.has=qOe;u0.prototype.set=VOe;lX.exports=u0});var uX=_((FBt,cX)=>{"use strict";var HOe=qb(),WOe=kB(),GOe=gO(),$Oe=200;function YOe(e,t){var r=this.__data__;if(r instanceof HOe){var n=r.__data__;if(!WOe||n.length<$Oe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new GOe(n)}return r.set(e,t),this.size=r.size,this}cX.exports=YOe});var pO=_((QBt,dX)=>{"use strict";var KOe=qb(),zOe=gZ(),JOe=mZ(),jOe=yZ(),ZOe=CZ(),XOe=uX();function d0(e){var t=this.__data__=new KOe(e);this.size=t.size}d0.prototype.clear=zOe;d0.prototype.delete=JOe;d0.prototype.get=jOe;d0.prototype.has=ZOe;d0.prototype.set=XOe;dX.exports=d0});var hX=_((NBt,fX)=>{"use strict";var eqe="__lodash_hash_undefined__";function tqe(e){return this.__data__.set(e,eqe),this}fX.exports=tqe});var pX=_((PBt,gX)=>{"use strict";function rqe(e){return this.__data__.has(e)}gX.exports=rqe});var AX=_((LBt,mX)=>{"use strict";var nqe=gO(),iqe=hX(),sqe=pX();function MB(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new nqe;++t<r;)this.add(e[t])}MB.prototype.add=MB.prototype.push=iqe;MB.prototype.has=sqe;mX.exports=MB});var vX=_((UBt,yX)=>{"use strict";function oqe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}yX.exports=oqe});var bX=_((OBt,CX)=>{"use strict";function aqe(e,t){return e.has(t)}CX.exports=aqe});var mO=_((qBt,EX)=>{"use strict";var lqe=AX(),cqe=vX(),uqe=bX(),dqe=1,fqe=2;function hqe(e,t,r,n,i,s){var o=r&dqe,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(e),u=s.get(t);if(c&&u)return c==t&&u==e;var f=-1,p=!0,g=r&fqe?new lqe:void 0;for(s.set(e,t),s.set(t,e);++f<a;){var m=e[f],y=t[f];if(n)var v=o?n(y,m,f,t,e,s):n(m,y,f,e,t,s);if(v!==void 0){if(v)continue;p=!1;break}if(g){if(!cqe(t,function(C,E){if(!uqe(g,E)&&(m===C||i(m,C,r,n,s)))return g.push(E)})){p=!1;break}}else if(!(m===y||i(m,y,r,n,s))){p=!1;break}}return s.delete(e),s.delete(t),p}EX.exports=hqe});var AO=_((VBt,_X)=>{"use strict";var gqe=hl(),pqe=gqe.Uint8Array;_X.exports=pqe});var wX=_((HBt,xX)=>{"use strict";function mqe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}xX.exports=mqe});var IX=_((WBt,SX)=>{"use strict";function Aqe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}SX.exports=Aqe});var kX=_((GBt,RX)=>{"use strict";var BX=XC(),DX=AO(),yqe=RB(),vqe=mO(),Cqe=wX(),bqe=IX(),Eqe=1,_qe=2,xqe="[object Boolean]",wqe="[object Date]",Sqe="[object Error]",Iqe="[object Map]",Bqe="[object Number]",Dqe="[object RegExp]",Tqe="[object Set]",Rqe="[object String]",kqe="[object Symbol]",Mqe="[object ArrayBuffer]",Fqe="[object DataView]",TX=BX?BX.prototype:void 0,yO=TX?TX.valueOf:void 0;function Qqe(e,t,r,n,i,s,o){switch(r){case Fqe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mqe:return!(e.byteLength!=t.byteLength||!s(new DX(e),new DX(t)));case xqe:case wqe:case Bqe:return yqe(+e,+t);case Sqe:return e.name==t.name&&e.message==t.message;case Dqe:case Rqe:return e==t+"";case Iqe:var a=Cqe;case Tqe:var l=n&Eqe;if(a||(a=bqe),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=_qe,o.set(e,t);var u=vqe(a(e),a(t),n,i,s,o);return o.delete(e),u;case kqe:if(yO)return yO.call(e)==yO.call(t)}return!1}RX.exports=Qqe});var vO=_(($Bt,MX)=>{"use strict";function Nqe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}MX.exports=Nqe});var Wb=_((YBt,FX)=>{"use strict";var Pqe=Array.isArray;FX.exports=Pqe});var CO=_((KBt,QX)=>{"use strict";var Lqe=vO(),Uqe=Wb();function Oqe(e,t,r){var n=t(e);return Uqe(e)?n:Lqe(n,r(e))}QX.exports=Oqe});var PX=_((zBt,NX)=>{"use strict";function qqe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}NX.exports=qqe});var bO=_((JBt,LX)=>{"use strict";function Vqe(){return[]}LX.exports=Vqe});var FB=_((jBt,OX)=>{"use strict";var Hqe=PX(),Wqe=bO(),Gqe=Object.prototype,$qe=Gqe.propertyIsEnumerable,UX=Object.getOwnPropertySymbols,Yqe=UX?function(e){return e==null?[]:(e=Object(e),Hqe(UX(e),function(t){return $qe.call(e,t)}))}:Wqe;OX.exports=Yqe});var VX=_((ZBt,qX)=>{"use strict";function Kqe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}qX.exports=Kqe});var WX=_((XBt,HX)=>{"use strict";var zqe=IA(),Jqe=Wf(),jqe="[object Arguments]";function Zqe(e){return Jqe(e)&&zqe(e)==jqe}HX.exports=Zqe});var KX=_((eDt,YX)=>{"use strict";var GX=WX(),Xqe=Wf(),$X=Object.prototype,eVe=$X.hasOwnProperty,tVe=$X.propertyIsEnumerable,rVe=GX(function(){return arguments}())?GX:function(e){return Xqe(e)&&eVe.call(e,"callee")&&!tVe.call(e,"callee")};YX.exports=rVe});var JX=_((tDt,zX)=>{"use strict";function nVe(){return!1}zX.exports=nVe});var QB=_((Gb,f0)=>{"use strict";var iVe=hl(),sVe=JX(),XX=typeof Gb=="object"&&Gb&&!Gb.nodeType&&Gb,jX=XX&&typeof f0=="object"&&f0&&!f0.nodeType&&f0,oVe=jX&&jX.exports===XX,ZX=oVe?iVe.Buffer:void 0,aVe=ZX?ZX.isBuffer:void 0,lVe=aVe||sVe;f0.exports=lVe});var tee=_((rDt,eee)=>{"use strict";var cVe=9007199254740991,uVe=/^(?:0|[1-9]\d*)$/;function dVe(e,t){var r=typeof e;return t=t??cVe,!!t&&(r=="number"||r!="symbol"&&uVe.test(e))&&e>-1&&e%1==0&&e<t}eee.exports=dVe});var EO=_((nDt,ree)=>{"use strict";var fVe=9007199254740991;function hVe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fVe}ree.exports=hVe});var iee=_((iDt,nee)=>{"use strict";var gVe=IA(),pVe=EO(),mVe=Wf(),AVe="[object Arguments]",yVe="[object Array]",vVe="[object Boolean]",CVe="[object Date]",bVe="[object Error]",EVe="[object Function]",_Ve="[object Map]",xVe="[object Number]",wVe="[object Object]",SVe="[object RegExp]",IVe="[object Set]",BVe="[object String]",DVe="[object WeakMap]",TVe="[object ArrayBuffer]",RVe="[object DataView]",kVe="[object Float32Array]",MVe="[object Float64Array]",FVe="[object Int8Array]",QVe="[object Int16Array]",NVe="[object Int32Array]",PVe="[object Uint8Array]",LVe="[object Uint8ClampedArray]",UVe="[object Uint16Array]",OVe="[object Uint32Array]",Fn={};Fn[kVe]=Fn[MVe]=Fn[FVe]=Fn[QVe]=Fn[NVe]=Fn[PVe]=Fn[LVe]=Fn[UVe]=Fn[OVe]=!0;Fn[AVe]=Fn[yVe]=Fn[TVe]=Fn[vVe]=Fn[RVe]=Fn[CVe]=Fn[bVe]=Fn[EVe]=Fn[_Ve]=Fn[xVe]=Fn[wVe]=Fn[SVe]=Fn[IVe]=Fn[BVe]=Fn[DVe]=!1;function qVe(e){return mVe(e)&&pVe(e.length)&&!!Fn[gVe(e)]}nee.exports=qVe});var NB=_((sDt,see)=>{"use strict";function VVe(e){return function(t){return e(t)}}see.exports=VVe});var PB=_(($b,h0)=>{"use strict";var HVe=sL(),oee=typeof $b=="object"&&$b&&!$b.nodeType&&$b,Yb=oee&&typeof h0=="object"&&h0&&!h0.nodeType&&h0,WVe=Yb&&Yb.exports===oee,_O=WVe&&HVe.process,GVe=function(){try{var e=Yb&&Yb.require&&Yb.require("util").types;return e||_O&&_O.binding&&_O.binding("util")}catch{}}();h0.exports=GVe});var xO=_((oDt,cee)=>{"use strict";var $Ve=iee(),YVe=NB(),aee=PB(),lee=aee&&aee.isTypedArray,KVe=lee?YVe(lee):$Ve;cee.exports=KVe});var wO=_((aDt,uee)=>{"use strict";var zVe=VX(),JVe=KX(),jVe=Wb(),ZVe=QB(),XVe=tee(),e5e=xO(),t5e=Object.prototype,r5e=t5e.hasOwnProperty;function n5e(e,t){var r=jVe(e),n=!r&&JVe(e),i=!r&&!n&&ZVe(e),s=!r&&!n&&!i&&e5e(e),o=r||n||i||s,a=o?zVe(e.length,String):[],l=a.length;for(var c in e)(t||r5e.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||XVe(c,l)))&&a.push(c);return a}uee.exports=n5e});var LB=_((lDt,dee)=>{"use strict";var i5e=Object.prototype;function s5e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||i5e;return e===r}dee.exports=s5e});var SO=_((cDt,fee)=>{"use strict";function o5e(e,t){return function(r){return e(t(r))}}fee.exports=o5e});var gee=_((uDt,hee)=>{"use strict";var a5e=SO(),l5e=a5e(Object.keys,Object);hee.exports=l5e});var mee=_((dDt,pee)=>{"use strict";var c5e=LB(),u5e=gee(),d5e=Object.prototype,f5e=d5e.hasOwnProperty;function h5e(e){if(!c5e(e))return u5e(e);var t=[];for(var r in Object(e))f5e.call(e,r)&&r!="constructor"&&t.push(r);return t}pee.exports=h5e});var IO=_((fDt,Aee)=>{"use strict";var g5e=dO(),p5e=EO();function m5e(e){return e!=null&&p5e(e.length)&&!g5e(e)}Aee.exports=m5e});var UB=_((hDt,yee)=>{"use strict";var A5e=wO(),y5e=mee(),v5e=IO();function C5e(e){return v5e(e)?A5e(e):y5e(e)}yee.exports=C5e});var BO=_((gDt,vee)=>{"use strict";var b5e=CO(),E5e=FB(),_5e=UB();function x5e(e){return b5e(e,_5e,E5e)}vee.exports=x5e});var Eee=_((pDt,bee)=>{"use strict";var Cee=BO(),w5e=1,S5e=Object.prototype,I5e=S5e.hasOwnProperty;function B5e(e,t,r,n,i,s){var o=r&w5e,a=Cee(e),l=a.length,c=Cee(t),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var p=a[f];if(!(o?p in t:I5e.call(t,p)))return!1}var g=s.get(e),m=s.get(t);if(g&&m)return g==t&&m==e;var y=!0;s.set(e,t),s.set(t,e);for(var v=o;++f<l;){p=a[f];var C=e[p],E=t[p];if(n)var w=o?n(E,C,p,t,e,s):n(C,E,p,e,t,s);if(!(w===void 0?C===E||i(C,E,r,n,s):w)){y=!1;break}v||(v=p=="constructor")}if(y&&!v){var B=e.constructor,R=t.constructor;B!=R&&"constructor"in e&&"constructor"in t&&!(typeof B=="function"&&B instanceof B&&typeof R=="function"&&R instanceof R)&&(y=!1)}return s.delete(e),s.delete(t),y}bee.exports=B5e});var xee=_((mDt,_ee)=>{"use strict";var D5e=oh(),T5e=hl(),R5e=D5e(T5e,"DataView");_ee.exports=R5e});var See=_((ADt,wee)=>{"use strict";var k5e=oh(),M5e=hl(),F5e=k5e(M5e,"Promise");wee.exports=F5e});var Bee=_((yDt,Iee)=>{"use strict";var Q5e=oh(),N5e=hl(),P5e=Q5e(N5e,"Set");Iee.exports=P5e});var Tee=_((vDt,Dee)=>{"use strict";var L5e=oh(),U5e=hl(),O5e=L5e(U5e,"WeakMap");Dee.exports=O5e});var Kb=_((CDt,Pee)=>{"use strict";var DO=xee(),TO=kB(),RO=See(),kO=Bee(),MO=Tee(),Nee=IA(),g0=hO(),Ree="[object Map]",q5e="[object Object]",kee="[object Promise]",Mee="[object Set]",Fee="[object WeakMap]",Qee="[object DataView]",V5e=g0(DO),H5e=g0(TO),W5e=g0(RO),G5e=g0(kO),$5e=g0(MO),Ap=Nee;(DO&&Ap(new DO(new ArrayBuffer(1)))!=Qee||TO&&Ap(new TO)!=Ree||RO&&Ap(RO.resolve())!=kee||kO&&Ap(new kO)!=Mee||MO&&Ap(new MO)!=Fee)&&(Ap=function(e){var t=Nee(e),r=t==q5e?e.constructor:void 0,n=r?g0(r):"";if(n)switch(n){case V5e:return Qee;case H5e:return Ree;case W5e:return kee;case G5e:return Mee;case $5e:return Fee}return t});Pee.exports=Ap});var Gee=_((bDt,Wee)=>{"use strict";var FO=pO(),Y5e=mO(),K5e=kX(),z5e=Eee(),Lee=Kb(),Uee=Wb(),Oee=QB(),J5e=xO(),j5e=1,qee="[object Arguments]",Vee="[object Array]",OB="[object Object]",Z5e=Object.prototype,Hee=Z5e.hasOwnProperty;function X5e(e,t,r,n,i,s){var o=Uee(e),a=Uee(t),l=o?Vee:Lee(e),c=a?Vee:Lee(t);l=l==qee?OB:l,c=c==qee?OB:c;var u=l==OB,f=c==OB,p=l==c;if(p&&Oee(e)){if(!Oee(t))return!1;o=!0,u=!1}if(p&&!u)return s||(s=new FO),o||J5e(e)?Y5e(e,t,r,n,i,s):K5e(e,t,l,r,n,i,s);if(!(r&j5e)){var g=u&&Hee.call(e,"__wrapped__"),m=f&&Hee.call(t,"__wrapped__");if(g||m){var y=g?e.value():e,v=m?t.value():t;return s||(s=new FO),i(y,v,r,n,s)}}return p?(s||(s=new FO),z5e(e,t,r,n,i,s)):!1}Wee.exports=X5e});var zee=_((EDt,Kee)=>{"use strict";var e3e=Gee(),$ee=Wf();function Yee(e,t,r,n,i){return e===t?!0:e==null||t==null||!$ee(e)&&!$ee(t)?e!==e&&t!==t:e3e(e,t,r,n,Yee,i)}Kee.exports=Yee});var jee=_((_Dt,Jee)=>{"use strict";var t3e=zee();function r3e(e,t){return t3e(e,t)}Jee.exports=r3e});var Gn=_((xDt,Zee)=>{"use strict";Zee.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var zr=_((wDt,Xee)=>{"use strict";var zn=class extends Error{constructor(t){super(t),this.name="UndiciError",this.code="UND_ERR"}},QO=class extends zn{constructor(t){super(t),this.name="ConnectTimeoutError",this.message=t||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},NO=class extends zn{constructor(t){super(t),this.name="HeadersTimeoutError",this.message=t||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},PO=class extends zn{constructor(t){super(t),this.name="HeadersOverflowError",this.message=t||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},LO=class extends zn{constructor(t){super(t),this.name="BodyTimeoutError",this.message=t||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},UO=class extends zn{constructor(t,r,n,i){super(t),this.name="ResponseStatusCodeError",this.message=t||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},OO=class extends zn{constructor(t){super(t),this.name="InvalidArgumentError",this.message=t||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},qO=class extends zn{constructor(t){super(t),this.name="InvalidReturnValueError",this.message=t||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},qB=class extends zn{constructor(t){super(t),this.name="AbortError",this.message=t||"The operation was aborted"}},VO=class extends qB{constructor(t){super(t),this.name="AbortError",this.message=t||"Request aborted",this.code="UND_ERR_ABORTED"}},HO=class extends zn{constructor(t){super(t),this.name="InformationalError",this.message=t||"Request information",this.code="UND_ERR_INFO"}},WO=class extends zn{constructor(t){super(t),this.name="RequestContentLengthMismatchError",this.message=t||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},GO=class extends zn{constructor(t){super(t),this.name="ResponseContentLengthMismatchError",this.message=t||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},$O=class extends zn{constructor(t){super(t),this.name="ClientDestroyedError",this.message=t||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},YO=class extends zn{constructor(t){super(t),this.name="ClientClosedError",this.message=t||"The client is closed",this.code="UND_ERR_CLOSED"}},KO=class extends zn{constructor(t,r){super(t),this.name="SocketError",this.message=t||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},zO=class extends zn{constructor(t){super(t),this.name="NotSupportedError",this.message=t||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},JO=class extends zn{constructor(t){super(t),this.name="MissingUpstreamError",this.message=t||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},jO=class extends Error{constructor(t,r,n){super(t),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},ZO=class extends zn{constructor(t){super(t),this.name="ResponseExceededMaxSizeError",this.message=t||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},XO=class extends zn{constructor(t,r,{headers:n,data:i}){super(t),this.name="RequestRetryError",this.message=t||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},eq=class extends zn{constructor(t,r,{headers:n,data:i}){super(t),this.name="ResponseError",this.message=t||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},tq=class extends zn{constructor(t,r,n){super(r,{cause:t,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=t}};Xee.exports={AbortError:qB,HTTPParserError:jO,UndiciError:zn,HeadersTimeoutError:NO,HeadersOverflowError:PO,BodyTimeoutError:LO,RequestContentLengthMismatchError:WO,ConnectTimeoutError:QO,ResponseStatusCodeError:UO,InvalidArgumentError:OO,InvalidReturnValueError:qO,RequestAbortedError:VO,ClientDestroyedError:$O,ClientClosedError:YO,InformationalError:HO,SocketError:KO,NotSupportedError:zO,ResponseContentLengthMismatchError:GO,BalancedPoolMissingUpstreamError:JO,ResponseExceededMaxSizeError:ZO,RequestRetryError:XO,ResponseError:eq,SecureProxyConnectionError:tq}});var HB=_((SDt,ete)=>{"use strict";var VB={},rq=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let e=0;e<rq.length;++e){let t=rq[e],r=t.toLowerCase();VB[t]=VB[r]=r}Object.setPrototypeOf(VB,null);ete.exports={wellknownHeaderNames:rq,headerNameLowerCasedRecord:VB}});var ite=_((IDt,nte)=>{"use strict";var{wellknownHeaderNames:tte,headerNameLowerCasedRecord:n3e}=HB(),nq=class e{value=null;left=null;middle=null;right=null;code;constructor(t,r,n){if(n===void 0||n>=t.length)throw new TypeError("Unreachable");if((this.code=t.charCodeAt(n))>127)throw new TypeError("key must be ascii string");t.length!==++n?this.middle=new e(t,r,n):this.value=r}add(t,r){let n=t.length;if(n===0)throw new TypeError("Unreachable");let i=0,s=this;for(;;){let o=t.charCodeAt(i);if(o>127)throw new TypeError("key must be ascii string");if(s.code===o)if(n===++i){s.value=r;break}else if(s.middle!==null)s=s.middle;else{s.middle=new e(t,r,i);break}else if(s.code<o)if(s.left!==null)s=s.left;else{s.left=new e(t,r,i);break}else if(s.right!==null)s=s.right;else{s.right=new e(t,r,i);break}}}search(t){let r=t.length,n=0,i=this;for(;i!==null&&n<r;){let s=t[n];for(s<=90&&s>=65&&(s|=32);i!==null;){if(s===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<s?i.left:i.right}}return null}},WB=class{node=null;insert(t,r){this.node===null?this.node=new nq(t,r,0):this.node.add(t,r)}lookup(t){return this.node?.search(t)?.value??null}},rte=new WB;for(let e=0;e<tte.length;++e){let t=n3e[tte[e]];rte.insert(t,t)}nte.exports={TernarySearchTree:WB,tree:rte}});var nr=_((BDt,Cte)=>{"use strict";var zb=require("assert"),{kDestroyed:ote,kBodyUsed:p0,kListeners:iq,kBody:ste}=Gn(),{IncomingMessage:i3e}=require("http"),YB=require("stream"),s3e=require("net"),{Blob:o3e}=require("buffer"),a3e=require("util"),{stringify:l3e}=require("querystring"),{EventEmitter:c3e}=require("events"),{InvalidArgumentError:ts}=zr(),{headerNameLowerCasedRecord:u3e}=HB(),{tree:ate}=ite(),[d3e,f3e]=process.versions.node.split(".").map(e=>Number(e)),$B=class{constructor(t){this[ste]=t,this[p0]=!1}async*[Symbol.asyncIterator](){zb(!this[p0],"disturbed"),this[p0]=!0,yield*this[ste]}};function h3e(e){return KB(e)?(fte(e)===0&&e.on("data",function(){zb(!1)}),typeof e.readableDidRead!="boolean"&&(e[p0]=!1,c3e.prototype.on.call(e,"data",function(){this[p0]=!0})),e):e&&typeof e.pipeTo=="function"?new $B(e):e&&typeof e!="string"&&!ArrayBuffer.isView(e)&&dte(e)?new $B(e):e}function g3e(){}function KB(e){return e&&typeof e=="object"&&typeof e.pipe=="function"&&typeof e.on=="function"}function lte(e){if(e===null)return!1;if(e instanceof o3e)return!0;if(typeof e!="object")return!1;{let t=e[Symbol.toStringTag];return(t==="Blob"||t==="File")&&("stream"in e&&typeof e.stream=="function"||"arrayBuffer"in e&&typeof e.arrayBuffer=="function")}}function p3e(e,t){if(e.includes("?")||e.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=l3e(t);return r&&(e+="?"+r),e}function cte(e){let t=parseInt(e,10);return t===Number(e)&&t>=0&&t<=65535}function GB(e){return e!=null&&e[0]==="h"&&e[1]==="t"&&e[2]==="t"&&e[3]==="p"&&(e[4]===":"||e[4]==="s"&&e[5]===":")}function ute(e){if(typeof e=="string"){if(e=new URL(e),!GB(e.origin||e.protocol))throw new ts("Invalid URL protocol: the URL must start with `http:` or `https:`.");return e}if(!e||typeof e!="object")throw new ts("Invalid URL: The URL argument must be a non-null object.");if(!(e instanceof URL)){if(e.port!=null&&e.port!==""&&cte(e.port)===!1)throw new ts("Invalid URL: port must be a valid integer or a string representation of an integer.");if(e.path!=null&&typeof e.path!="string")throw new ts("Invalid URL path: the path must be a string or null/undefined.");if(e.pathname!=null&&typeof e.pathname!="string")throw new ts("Invalid URL pathname: the pathname must be a string or null/undefined.");if(e.hostname!=null&&typeof e.hostname!="string")throw new ts("Invalid URL hostname: the hostname must be a string or null/undefined.");if(e.origin!=null&&typeof e.origin!="string")throw new ts("Invalid URL origin: the origin must be a string or null/undefined.");if(!GB(e.origin||e.protocol))throw new ts("Invalid URL protocol: the URL must start with `http:` or `https:`.");let t=e.port!=null?e.port:e.protocol==="https:"?443:80,r=e.origin!=null?e.origin:`${e.protocol||""}//${e.hostname||""}:${t}`,n=e.path!=null?e.path:`${e.pathname||""}${e.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!GB(e.origin||e.protocol))throw new ts("Invalid URL protocol: the URL must start with `http:` or `https:`.");return e}function m3e(e){if(e=ute(e),e.pathname!=="/"||e.search||e.hash)throw new ts("invalid url");return e}function A3e(e){if(e[0]==="["){let r=e.indexOf("]");return zb(r!==-1),e.substring(1,r)}let t=e.indexOf(":");return t===-1?e:e.substring(0,t)}function y3e(e){if(!e)return null;zb(typeof e=="string");let t=A3e(e);return s3e.isIP(t)?"":t}function v3e(e){return JSON.parse(JSON.stringify(e))}function C3e(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}function dte(e){return e!=null&&(typeof e[Symbol.iterator]=="function"||typeof e[Symbol.asyncIterator]=="function")}function fte(e){if(e==null)return 0;if(KB(e)){let t=e._readableState;return t&&t.objectMode===!1&&t.ended===!0&&Number.isFinite(t.length)?t.length:null}else{if(lte(e))return e.size!=null?e.size:null;if(pte(e))return e.byteLength}return null}function hte(e){return e&&!!(e.destroyed||e[ote]||YB.isDestroyed?.(e))}function b3e(e,t){e==null||!KB(e)||hte(e)||(typeof e.destroy=="function"?(Object.getPrototypeOf(e).constructor===i3e&&(e.socket=null),e.destroy(t)):t&&queueMicrotask(()=>{e.emit("error",t)}),e.destroyed!==!0&&(e[ote]=!0))}var E3e=/timeout=(\d+)/;function _3e(e){let t=e.toString().match(E3e);return t?parseInt(t[1],10)*1e3:null}function gte(e){return typeof e=="string"?u3e[e]??e.toLowerCase():ate.lookup(e)??e.toString("latin1").toLowerCase()}function x3e(e){return ate.lookup(e)??e.toString("latin1").toLowerCase()}function w3e(e,t){t===void 0&&(t={});for(let r=0;r<e.length;r+=2){let n=gte(e[r]),i=t[n];if(i)typeof i=="string"&&(i=[i],t[n]=i),i.push(e[r+1].toString("utf8"));else{let s=e[r+1];typeof s=="string"?t[n]=s:t[n]=Array.isArray(s)?s.map(o=>o.toString("utf8")):s.toString("utf8")}}return"content-length"in t&&"content-disposition"in t&&(t["content-disposition"]=Buffer.from(t["content-disposition"]).toString("latin1")),t}function S3e(e){let t=e.length,r=new Array(t),n=!1,i=-1,s,o,a=0;for(let l=0;l<e.length;l+=2)s=e[l],o=e[l+1],typeof s!="string"&&(s=s.toString()),typeof o!="string"&&(o=o.toString("utf8")),a=s.length,a===14&&s[7]==="-"&&(s==="content-length"||s.toLowerCase()==="content-length")?n=!0:a===19&&s[7]==="-"&&(s==="content-disposition"||s.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=s,r[l+1]=o;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}function pte(e){return e instanceof Uint8Array||Buffer.isBuffer(e)}function I3e(e,t,r){if(!e||typeof e!="object")throw new ts("handler must be an object");if(typeof e.onConnect!="function")throw new ts("invalid onConnect method");if(typeof e.onError!="function")throw new ts("invalid onError method");if(typeof e.onBodySent!="function"&&e.onBodySent!==void 0)throw new ts("invalid onBodySent method");if(r||t==="CONNECT"){if(typeof e.onUpgrade!="function")throw new ts("invalid onUpgrade method")}else{if(typeof e.onHeaders!="function")throw new ts("invalid onHeaders method");if(typeof e.onData!="function")throw new ts("invalid onData method");if(typeof e.onComplete!="function")throw new ts("invalid onComplete method")}}function B3e(e){return!!(e&&(YB.isDisturbed(e)||e[p0]))}function D3e(e){return!!(e&&YB.isErrored(e))}function T3e(e){return!!(e&&YB.isReadable(e))}function R3e(e){return{localAddress:e.localAddress,localPort:e.localPort,remoteAddress:e.remoteAddress,remotePort:e.remotePort,remoteFamily:e.remoteFamily,timeout:e.timeout,bytesWritten:e.bytesWritten,bytesRead:e.bytesRead}}function k3e(e){let t;return new ReadableStream({async start(){t=e[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await t.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let s=Buffer.isBuffer(i)?i:Buffer.from(i);s.byteLength&&r.enqueue(new Uint8Array(s))}return r.desiredSize>0},async cancel(r){await t.return()},type:"bytes"})}function M3e(e){return e&&typeof e=="object"&&typeof e.append=="function"&&typeof e.delete=="function"&&typeof e.get=="function"&&typeof e.getAll=="function"&&typeof e.has=="function"&&typeof e.set=="function"&&e[Symbol.toStringTag]==="FormData"}function F3e(e,t){return"addEventListener"in e?(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)):(e.addListener("abort",t),()=>e.removeListener("abort",t))}var Q3e=typeof String.prototype.toWellFormed=="function",N3e=typeof String.prototype.isWellFormed=="function";function mte(e){return Q3e?`${e}`.toWellFormed():a3e.toUSVString(e)}function P3e(e){return N3e?`${e}`.isWellFormed():mte(e)===`${e}`}function Ate(e){switch(e){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return e>=33&&e<=126}}function L3e(e){if(e.length===0)return!1;for(let t=0;t<e.length;++t)if(!Ate(e.charCodeAt(t)))return!1;return!0}var U3e=/[^\t\x20-\x7e\x80-\xff]/;function O3e(e){return!U3e.test(e)}function q3e(e){if(e==null||e==="")return{start:0,end:null,size:null};let t=e?e.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return t?{start:parseInt(t[1]),end:t[2]?parseInt(t[2]):null,size:t[3]?parseInt(t[3]):null}:null}function V3e(e,t,r){return(e[iq]??=[]).push([t,r]),e.on(t,r),e}function H3e(e){for(let[t,r]of e[iq]??[])e.removeListener(t,r);e[iq]=null}function W3e(e,t,r){try{t.onError(r),zb(t.aborted)}catch(n){e.emit("error",n)}}var yte=Object.create(null);yte.enumerable=!0;var sq={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},vte={...sq,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(sq,null);Object.setPrototypeOf(vte,null);Cte.exports={kEnumerableProperty:yte,nop:g3e,isDisturbed:B3e,isErrored:D3e,isReadable:T3e,toUSVString:mte,isUSVString:P3e,isBlobLike:lte,parseOrigin:m3e,parseURL:ute,getServerName:y3e,isStream:KB,isIterable:dte,isAsyncIterable:C3e,isDestroyed:hte,headerNameToString:gte,bufferToLowerCasedHeaderName:x3e,addListener:V3e,removeAllListeners:H3e,errorRequest:W3e,parseRawHeaders:S3e,parseHeaders:w3e,parseKeepAliveTimeout:_3e,destroy:b3e,bodyLength:fte,deepClone:v3e,ReadableStreamFrom:k3e,isBuffer:pte,validateHandler:I3e,getSocketInfo:R3e,isFormDataLike:M3e,buildURL:p3e,addAbortListener:F3e,isValidHTTPToken:L3e,isValidHeaderValue:O3e,isTokenCharCode:Ate,parseRangeHeader:q3e,normalizedMethodRecordsBase:sq,normalizedMethodRecords:vte,isValidPort:cte,isHttpOrHttpsPrefixed:GB,nodeMajor:d3e,nodeMinor:f3e,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:h3e}});var m0=_((DDt,Ete)=>{"use strict";var nn=require("diagnostics_channel"),aq=require("util"),zB=aq.debuglog("undici"),oq=aq.debuglog("fetch"),yp=aq.debuglog("websocket"),bte=!1,G3e={beforeConnect:nn.channel("undici:client:beforeConnect"),connected:nn.channel("undici:client:connected"),connectError:nn.channel("undici:client:connectError"),sendHeaders:nn.channel("undici:client:sendHeaders"),create:nn.channel("undici:request:create"),bodySent:nn.channel("undici:request:bodySent"),headers:nn.channel("undici:request:headers"),trailers:nn.channel("undici:request:trailers"),error:nn.channel("undici:request:error"),open:nn.channel("undici:websocket:open"),close:nn.channel("undici:websocket:close"),socketError:nn.channel("undici:websocket:socket_error"),ping:nn.channel("undici:websocket:ping"),pong:nn.channel("undici:websocket:pong")};if(zB.enabled||oq.enabled){let e=oq.enabled?oq:zB;nn.channel("undici:client:beforeConnect").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s}}=t;e("connecting to %s using %s%s",`${s}${i?`:${i}`:""}`,n,r)}),nn.channel("undici:client:connected").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s}}=t;e("connected to %s using %s%s",`${s}${i?`:${i}`:""}`,n,r)}),nn.channel("undici:client:connectError").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s},error:o}=t;e("connection to %s using %s%s errored - %s",`${s}${i?`:${i}`:""}`,n,r,o.message)}),nn.channel("undici:client:sendHeaders").subscribe(t=>{let{request:{method:r,path:n,origin:i}}=t;e("sending request to %s %s/%s",r,i,n)}),nn.channel("undici:request:headers").subscribe(t=>{let{request:{method:r,path:n,origin:i},response:{statusCode:s}}=t;e("received response to %s %s/%s - HTTP %d",r,i,n,s)}),nn.channel("undici:request:trailers").subscribe(t=>{let{request:{method:r,path:n,origin:i}}=t;e("trailers received from %s %s/%s",r,i,n)}),nn.channel("undici:request:error").subscribe(t=>{let{request:{method:r,path:n,origin:i},error:s}=t;e("request to %s %s/%s errored - %s",r,i,n,s.message)}),bte=!0}if(yp.enabled){if(!bte){let e=zB.enabled?zB:yp;nn.channel("undici:client:beforeConnect").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s}}=t;e("connecting to %s%s using %s%s",s,i?`:${i}`:"",n,r)}),nn.channel("undici:client:connected").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s}}=t;e("connected to %s%s using %s%s",s,i?`:${i}`:"",n,r)}),nn.channel("undici:client:connectError").subscribe(t=>{let{connectParams:{version:r,protocol:n,port:i,host:s},error:o}=t;e("connection to %s%s using %s%s errored - %s",s,i?`:${i}`:"",n,r,o.message)}),nn.channel("undici:client:sendHeaders").subscribe(t=>{let{request:{method:r,path:n,origin:i}}=t;e("sending request to %s %s/%s",r,i,n)})}nn.channel("undici:websocket:open").subscribe(e=>{let{address:{address:t,port:r}}=e;yp("connection opened %s%s",t,r?`:${r}`:"")}),nn.channel("undici:websocket:close").subscribe(e=>{let{websocket:t,code:r,reason:n}=e;yp("closed connection to %s - %s %s",t.url,r,n)}),nn.channel("undici:websocket:socket_error").subscribe(e=>{yp("connection errored - %s",e.message)}),nn.channel("undici:websocket:ping").subscribe(e=>{yp("ping received")}),nn.channel("undici:websocket:pong").subscribe(e=>{yp("pong received")})}Ete.exports={channels:G3e}});var Ite=_((TDt,Ste)=>{"use strict";var{InvalidArgumentError:Jn,NotSupportedError:$3e}=zr(),Fd=require("assert"),{isValidHTTPToken:wte,isValidHeaderValue:_te,isStream:Y3e,destroy:K3e,isBuffer:z3e,isFormDataLike:J3e,isIterable:j3e,isBlobLike:Z3e,buildURL:X3e,validateHandler:eHe,getServerName:tHe,normalizedMethodRecords:rHe}=nr(),{channels:pu}=m0(),{headerNameLowerCasedRecord:xte}=HB(),nHe=/[^\u0021-\u00ff]/,vl=Symbol("handler"),lq=class{constructor(t,{path:r,method:n,body:i,headers:s,query:o,idempotent:a,blocking:l,upgrade:c,headersTimeout:u,bodyTimeout:f,reset:p,throwOnError:g,expectContinue:m,servername:y},v){if(typeof r!="string")throw new Jn("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new Jn("path must be an absolute URL or start with a slash");if(nHe.test(r))throw new Jn("invalid request path");if(typeof n!="string")throw new Jn("method must be a string");if(rHe[n]===void 0&&!wte(n))throw new Jn("invalid request method");if(c&&typeof c!="string")throw new Jn("upgrade must be a string");if(u!=null&&(!Number.isFinite(u)||u<0))throw new Jn("invalid headersTimeout");if(f!=null&&(!Number.isFinite(f)||f<0))throw new Jn("invalid bodyTimeout");if(p!=null&&typeof p!="boolean")throw new Jn("invalid reset");if(m!=null&&typeof m!="boolean")throw new Jn("invalid expectContinue");if(this.headersTimeout=u,this.bodyTimeout=f,this.throwOnError=g===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(Y3e(i)){this.body=i;let C=this.body._readableState;(!C||!C.autoDestroy)&&(this.endHandler=function(){K3e(this)},this.body.on("end",this.endHandler)),this.errorHandler=E=>{this.abort?this.abort(E):this.error=E},this.body.on("error",this.errorHandler)}else if(z3e(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(J3e(i)||j3e(i)||Z3e(i))this.body=i;else throw new Jn("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=c||null,this.path=o?X3e(r,o):r,this.origin=t,this.idempotent=a??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=p??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=m??!1,Array.isArray(s)){if(s.length%2!==0)throw new Jn("headers array must be even");for(let C=0;C<s.length;C+=2)JB(this,s[C],s[C+1])}else if(s&&typeof s=="object")if(s[Symbol.iterator])for(let C of s){if(!Array.isArray(C)||C.length!==2)throw new Jn("headers must be in key-value pair format");JB(this,C[0],C[1])}else{let C=Object.keys(s);for(let E=0;E<C.length;++E)JB(this,C[E],s[C[E]])}else if(s!=null)throw new Jn("headers must be an object or an array");eHe(v,n,c),this.servername=y||tHe(this.host),this[vl]=v,pu.create.hasSubscribers&&pu.create.publish({request:this})}onBodySent(t){if(this[vl].onBodySent)try{return this[vl].onBodySent(t)}catch(r){this.abort(r)}}onRequestSent(){if(pu.bodySent.hasSubscribers&&pu.bodySent.publish({request:this}),this[vl].onRequestSent)try{return this[vl].onRequestSent()}catch(t){this.abort(t)}}onConnect(t){if(Fd(!this.aborted),Fd(!this.completed),this.error)t(this.error);else return this.abort=t,this[vl].onConnect(t)}onResponseStarted(){return this[vl].onResponseStarted?.()}onHeaders(t,r,n,i){Fd(!this.aborted),Fd(!this.completed),pu.headers.hasSubscribers&&pu.headers.publish({request:this,response:{statusCode:t,headers:r,statusText:i}});try{return this[vl].onHeaders(t,r,n,i)}catch(s){this.abort(s)}}onData(t){Fd(!this.aborted),Fd(!this.completed);try{return this[vl].onData(t)}catch(r){return this.abort(r),!1}}onUpgrade(t,r,n){return Fd(!this.aborted),Fd(!this.completed),this[vl].onUpgrade(t,r,n)}onComplete(t){this.onFinally(),Fd(!this.aborted),this.completed=!0,pu.trailers.hasSubscribers&&pu.trailers.publish({request:this,trailers:t});try{return this[vl].onComplete(t)}catch(r){this.onError(r)}}onError(t){if(this.onFinally(),pu.error.hasSubscribers&&pu.error.publish({request:this,error:t}),!this.aborted)return this.aborted=!0,this[vl].onError(t)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(t,r){return JB(this,t,r),this}};function JB(e,t,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new Jn(`invalid ${t} header`);if(r===void 0)return;let n=xte[t];if(n===void 0&&(n=t.toLowerCase(),xte[n]===void 0&&!wte(n)))throw new Jn("invalid header key");if(Array.isArray(r)){let i=[];for(let s=0;s<r.length;s++)if(typeof r[s]=="string"){if(!_te(r[s]))throw new Jn(`invalid ${t} header`);i.push(r[s])}else if(r[s]===null)i.push("");else{if(typeof r[s]=="object")throw new Jn(`invalid ${t} header`);i.push(`${r[s]}`)}r=i}else if(typeof r=="string"){if(!_te(r))throw new Jn(`invalid ${t} header`)}else r===null?r="":r=`${r}`;if(e.host===null&&n==="host"){if(typeof r!="string")throw new Jn("invalid host header");e.host=r}else if(e.contentLength===null&&n==="content-length"){if(e.contentLength=parseInt(r,10),!Number.isFinite(e.contentLength))throw new Jn("invalid content-length header")}else if(e.contentType===null&&n==="content-type")e.contentType=r,e.headers.push(t,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new Jn(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new Jn("invalid connection header");i==="close"&&(e.reset=!0)}else{if(n==="expect")throw new $3e("expect header not supported");e.headers.push(t,r)}}}Ste.exports=lq});var Jb=_((RDt,Bte)=>{"use strict";var iHe=require("events"),jB=class extends iHe{dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...t){let r=Array.isArray(t[0])?t[0]:t,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new cq(this,n)}},cq=class extends jB{#e=null;#t=null;constructor(t,r){super(),this.#e=t,this.#t=r}dispatch(...t){this.#t(...t)}close(...t){return this.#e.close(...t)}destroy(...t){return this.#e.destroy(...t)}};Bte.exports=jB});var C0=_((kDt,Dte)=>{"use strict";var sHe=Jb(),{ClientDestroyedError:uq,ClientClosedError:oHe,InvalidArgumentError:A0}=zr(),{kDestroy:aHe,kClose:lHe,kClosed:jb,kDestroyed:y0,kDispatch:dq,kInterceptors:vp}=Gn(),Qd=Symbol("onDestroyed"),v0=Symbol("onClosed"),ZB=Symbol("Intercepted Dispatch"),fq=class extends sHe{constructor(){super(),this[y0]=!1,this[Qd]=null,this[jb]=!1,this[v0]=[]}get destroyed(){return this[y0]}get closed(){return this[jb]}get interceptors(){return this[vp]}set interceptors(t){if(t){for(let r=t.length-1;r>=0;r--)if(typeof this[vp][r]!="function")throw new A0("interceptor must be an function")}this[vp]=t}close(t){if(t===void 0)return new Promise((n,i)=>{this.close((s,o)=>s?i(s):n(o))});if(typeof t!="function")throw new A0("invalid callback");if(this[y0]){queueMicrotask(()=>t(new uq,null));return}if(this[jb]){this[v0]?this[v0].push(t):queueMicrotask(()=>t(null,null));return}this[jb]=!0,this[v0].push(t);let r=()=>{let n=this[v0];this[v0]=null;for(let i=0;i<n.length;i++)n[i](null,null)};this[lHe]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(t,r){if(typeof t=="function"&&(r=t,t=null),r===void 0)return new Promise((i,s)=>{this.destroy(t,(o,a)=>o?s(o):i(a))});if(typeof r!="function")throw new A0("invalid callback");if(this[y0]){this[Qd]?this[Qd].push(r):queueMicrotask(()=>r(null,null));return}t||(t=new uq),this[y0]=!0,this[Qd]=this[Qd]||[],this[Qd].push(r);let n=()=>{let i=this[Qd];this[Qd]=null;for(let s=0;s<i.length;s++)i[s](null,null)};this[aHe](t).then(()=>{queueMicrotask(n)})}[ZB](t,r){if(!this[vp]||this[vp].length===0)return this[ZB]=this[dq],this[dq](t,r);let n=this[dq].bind(this);for(let i=this[vp].length-1;i>=0;i--)n=this[vp][i](n);return this[ZB]=n,n(t,r)}dispatch(t,r){if(!r||typeof r!="object")throw new A0("handler must be an object");try{if(!t||typeof t!="object")throw new A0("opts must be an object.");if(this[y0]||this[Qd])throw new uq;if(this[jb])throw new oHe;return this[ZB](t,r)}catch(n){if(typeof r.onError!="function")throw new A0("invalid onError method");return r.onError(n),!1}}};Dte.exports=fq});var vq=_((MDt,Mte)=>{"use strict";var b0=0,hq=1e3,gq=(hq>>1)-1,Nd,pq=Symbol("kFastTimer"),Pd=[],mq=-2,Aq=-1,Rte=0,Tte=1;function yq(){b0+=gq;let e=0,t=Pd.length;for(;e<t;){let r=Pd[e];r._state===Rte?(r._idleStart=b0-gq,r._state=Tte):r._state===Tte&&b0>=r._idleStart+r._idleTimeout&&(r._state=Aq,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===Aq?(r._state=mq,--t!==0&&(Pd[e]=Pd[t])):++e}Pd.length=t,Pd.length!==0&&kte()}function kte(){Nd?Nd.refresh():(clearTimeout(Nd),Nd=setTimeout(yq,gq),Nd.unref&&Nd.unref())}var XB=class{[pq]=!0;_state=mq;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(t,r,n){this._onTimeout=t,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===mq&&Pd.push(this),(!Nd||Pd.length===1)&&kte(),this._state=Rte}clear(){this._state=Aq,this._idleStart=-1}};Mte.exports={setTimeout(e,t,r){return t<=hq?setTimeout(e,t,r):new XB(e,t,r)},clearTimeout(e){e[pq]?e.clear():clearTimeout(e)},setFastTimeout(e,t,r){return new XB(e,t,r)},clearFastTimeout(e){e.clear()},now(){return b0},tick(e=0){b0+=e-hq+1,yq(),yq()},reset(){b0=0,Pd.length=0,clearTimeout(Nd),Nd=null},kFastTimer:pq}});var Zb=_((NDt,Lte)=>{"use strict";var cHe=require("net"),Fte=require("assert"),Pte=nr(),{InvalidArgumentError:uHe,ConnectTimeoutError:dHe}=zr(),eD=vq();function Qte(){}var Cq,bq;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?bq=class{constructor(t){this._maxCachedSessions=t,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(t){let r=this._sessionCache.get(t);return r?r.deref():null}set(t,r){this._maxCachedSessions!==0&&(this._sessionCache.set(t,new WeakRef(r)),this._sessionRegistry.register(r,t))}}:bq=class{constructor(t){this._maxCachedSessions=t,this._sessionCache=new Map}get(t){return this._sessionCache.get(t)}set(t,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(t,r)}}};function fHe({allowH2:e,maxCachedSessions:t,socketPath:r,timeout:n,session:i,...s}){if(t!=null&&(!Number.isInteger(t)||t<0))throw new uHe("maxCachedSessions must be a positive integer or zero");let o={path:r,...s},a=new bq(t??100);return n=n??1e4,e=e??!1,function({hostname:c,host:u,protocol:f,port:p,servername:g,localAddress:m,httpSocket:y},v){let C;if(f==="https:"){Cq||(Cq=require("tls")),g=g||o.servername||Pte.getServerName(u)||null;let w=g||c;Fte(w);let B=i||a.get(w)||null;p=p||443,C=Cq.connect({highWaterMark:16384,...o,servername:g,session:B,localAddress:m,ALPNProtocols:e?["http/1.1","h2"]:["http/1.1"],socket:y,port:p,host:c}),C.on("session",function(R){a.set(w,R)})}else Fte(!y,"httpSocket can only be sent on TLS update"),p=p||80,C=cHe.connect({highWaterMark:64*1024,...o,localAddress:m,port:p,host:c});if(o.keepAlive==null||o.keepAlive){let w=o.keepAliveInitialDelay===void 0?6e4:o.keepAliveInitialDelay;C.setKeepAlive(!0,w)}let E=hHe(new WeakRef(C),{timeout:n,hostname:c,port:p});return C.setNoDelay(!0).once(f==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(E),v){let w=v;v=null,w(null,this)}}).on("error",function(w){if(queueMicrotask(E),v){let B=v;v=null,B(w)}}),C}}var hHe=process.platform==="win32"?(e,t)=>{if(!t.timeout)return Qte;let r=null,n=null,i=eD.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>Nte(e.deref(),t))})},t.timeout);return()=>{eD.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(e,t)=>{if(!t.timeout)return Qte;let r=null,n=eD.setFastTimeout(()=>{r=setImmediate(()=>{Nte(e.deref(),t)})},t.timeout);return()=>{eD.clearFastTimeout(n),clearImmediate(r)}};function Nte(e,t){if(e==null)return;let r="Connect Timeout Error";Array.isArray(e.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${e.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${t.hostname}:${t.port},`,r+=` timeout: ${t.timeout}ms)`,Pte.destroy(e,new dHe(r))}Lte.exports=fHe});var Ute=_(tD=>{"use strict";Object.defineProperty(tD,"__esModule",{value:!0});tD.enumToMap=void 0;function gHe(e){let t={};return Object.keys(e).forEach(r=>{let n=e[r];typeof n=="number"&&(t[r]=n)}),t}tD.enumToMap=gHe});var Ote=_(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.SPECIAL_HEADERS=xe.HEADER_STATE=xe.MINOR=xe.MAJOR=xe.CONNECTION_TOKEN_CHARS=xe.HEADER_CHARS=xe.TOKEN=xe.STRICT_TOKEN=xe.HEX=xe.URL_CHAR=xe.STRICT_URL_CHAR=xe.USERINFO_CHARS=xe.MARK=xe.ALPHANUM=xe.NUM=xe.HEX_MAP=xe.NUM_MAP=xe.ALPHA=xe.FINISH=xe.H_METHOD_MAP=xe.METHOD_MAP=xe.METHODS_RTSP=xe.METHODS_ICE=xe.METHODS_HTTP=xe.METHODS=xe.LENIENT_FLAGS=xe.FLAGS=xe.TYPE=xe.ERROR=void 0;var pHe=Ute(),mHe;(function(e){e[e.OK=0]="OK",e[e.INTERNAL=1]="INTERNAL",e[e.STRICT=2]="STRICT",e[e.LF_EXPECTED=3]="LF_EXPECTED",e[e.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",e[e.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",e[e.INVALID_METHOD=6]="INVALID_METHOD",e[e.INVALID_URL=7]="INVALID_URL",e[e.INVALID_CONSTANT=8]="INVALID_CONSTANT",e[e.INVALID_VERSION=9]="INVALID_VERSION",e[e.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",e[e.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",e[e.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",e[e.INVALID_STATUS=13]="INVALID_STATUS",e[e.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",e[e.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",e[e.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",e[e.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",e[e.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",e[e.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",e[e.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",e[e.PAUSED=21]="PAUSED",e[e.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",e[e.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",e[e.USER=24]="USER"})(mHe=xe.ERROR||(xe.ERROR={}));var AHe;(function(e){e[e.BOTH=0]="BOTH",e[e.REQUEST=1]="REQUEST",e[e.RESPONSE=2]="RESPONSE"})(AHe=xe.TYPE||(xe.TYPE={}));var yHe;(function(e){e[e.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",e[e.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",e[e.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",e[e.CHUNKED=8]="CHUNKED",e[e.UPGRADE=16]="UPGRADE",e[e.CONTENT_LENGTH=32]="CONTENT_LENGTH",e[e.SKIPBODY=64]="SKIPBODY",e[e.TRAILING=128]="TRAILING",e[e.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(yHe=xe.FLAGS||(xe.FLAGS={}));var vHe;(function(e){e[e.HEADERS=1]="HEADERS",e[e.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",e[e.KEEP_ALIVE=4]="KEEP_ALIVE"})(vHe=xe.LENIENT_FLAGS||(xe.LENIENT_FLAGS={}));var lt;(function(e){e[e.DELETE=0]="DELETE",e[e.GET=1]="GET",e[e.HEAD=2]="HEAD",e[e.POST=3]="POST",e[e.PUT=4]="PUT",e[e.CONNECT=5]="CONNECT",e[e.OPTIONS=6]="OPTIONS",e[e.TRACE=7]="TRACE",e[e.COPY=8]="COPY",e[e.LOCK=9]="LOCK",e[e.MKCOL=10]="MKCOL",e[e.MOVE=11]="MOVE",e[e.PROPFIND=12]="PROPFIND",e[e.PROPPATCH=13]="PROPPATCH",e[e.SEARCH=14]="SEARCH",e[e.UNLOCK=15]="UNLOCK",e[e.BIND=16]="BIND",e[e.REBIND=17]="REBIND",e[e.UNBIND=18]="UNBIND",e[e.ACL=19]="ACL",e[e.REPORT=20]="REPORT",e[e.MKACTIVITY=21]="MKACTIVITY",e[e.CHECKOUT=22]="CHECKOUT",e[e.MERGE=23]="MERGE",e[e["M-SEARCH"]=24]="M-SEARCH",e[e.NOTIFY=25]="NOTIFY",e[e.SUBSCRIBE=26]="SUBSCRIBE",e[e.UNSUBSCRIBE=27]="UNSUBSCRIBE",e[e.PATCH=28]="PATCH",e[e.PURGE=29]="PURGE",e[e.MKCALENDAR=30]="MKCALENDAR",e[e.LINK=31]="LINK",e[e.UNLINK=32]="UNLINK",e[e.SOURCE=33]="SOURCE",e[e.PRI=34]="PRI",e[e.DESCRIBE=35]="DESCRIBE",e[e.ANNOUNCE=36]="ANNOUNCE",e[e.SETUP=37]="SETUP",e[e.PLAY=38]="PLAY",e[e.PAUSE=39]="PAUSE",e[e.TEARDOWN=40]="TEARDOWN",e[e.GET_PARAMETER=41]="GET_PARAMETER",e[e.SET_PARAMETER=42]="SET_PARAMETER",e[e.REDIRECT=43]="REDIRECT",e[e.RECORD=44]="RECORD",e[e.FLUSH=45]="FLUSH"})(lt=xe.METHODS||(xe.METHODS={}));xe.METHODS_HTTP=[lt.DELETE,lt.GET,lt.HEAD,lt.POST,lt.PUT,lt.CONNECT,lt.OPTIONS,lt.TRACE,lt.COPY,lt.LOCK,lt.MKCOL,lt.MOVE,lt.PROPFIND,lt.PROPPATCH,lt.SEARCH,lt.UNLOCK,lt.BIND,lt.REBIND,lt.UNBIND,lt.ACL,lt.REPORT,lt.MKACTIVITY,lt.CHECKOUT,lt.MERGE,lt["M-SEARCH"],lt.NOTIFY,lt.SUBSCRIBE,lt.UNSUBSCRIBE,lt.PATCH,lt.PURGE,lt.MKCALENDAR,lt.LINK,lt.UNLINK,lt.PRI,lt.SOURCE];xe.METHODS_ICE=[lt.SOURCE];xe.METHODS_RTSP=[lt.OPTIONS,lt.DESCRIBE,lt.ANNOUNCE,lt.SETUP,lt.PLAY,lt.PAUSE,lt.TEARDOWN,lt.GET_PARAMETER,lt.SET_PARAMETER,lt.REDIRECT,lt.RECORD,lt.FLUSH,lt.GET,lt.POST];xe.METHOD_MAP=pHe.enumToMap(lt);xe.H_METHOD_MAP={};Object.keys(xe.METHOD_MAP).forEach(e=>{/^H/.test(e)&&(xe.H_METHOD_MAP[e]=xe.METHOD_MAP[e])});var CHe;(function(e){e[e.SAFE=0]="SAFE",e[e.SAFE_WITH_CB=1]="SAFE_WITH_CB",e[e.UNSAFE=2]="UNSAFE"})(CHe=xe.FINISH||(xe.FINISH={}));xe.ALPHA=[];for(let e=65;e<=90;e++)xe.ALPHA.push(String.fromCharCode(e)),xe.ALPHA.push(String.fromCharCode(e+32));xe.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};xe.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};xe.NUM=["0","1","2","3","4","5","6","7","8","9"];xe.ALPHANUM=xe.ALPHA.concat(xe.NUM);xe.MARK=["-","_",".","!","~","*","'","(",")"];xe.USERINFO_CHARS=xe.ALPHANUM.concat(xe.MARK).concat(["%",";",":","&","=","+","$",","]);xe.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(xe.ALPHANUM);xe.URL_CHAR=xe.STRICT_URL_CHAR.concat(["	","\f"]);for(let e=128;e<=255;e++)xe.URL_CHAR.push(e);xe.HEX=xe.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);xe.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(xe.ALPHANUM);xe.TOKEN=xe.STRICT_TOKEN.concat([" "]);xe.HEADER_CHARS=["	"];for(let e=32;e<=255;e++)e!==127&&xe.HEADER_CHARS.push(e);xe.CONNECTION_TOKEN_CHARS=xe.HEADER_CHARS.filter(e=>e!==44);xe.MAJOR=xe.NUM_MAP;xe.MINOR=xe.MAJOR;var E0;(function(e){e[e.GENERAL=0]="GENERAL",e[e.CONNECTION=1]="CONNECTION",e[e.CONTENT_LENGTH=2]="CONTENT_LENGTH",e[e.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",e[e.UPGRADE=4]="UPGRADE",e[e.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",e[e.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",e[e.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",e[e.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(E0=xe.HEADER_STATE||(xe.HEADER_STATE={}));xe.SPECIAL_HEADERS={connection:E0.CONNECTION,"content-length":E0.CONTENT_LENGTH,"proxy-connection":E0.CONNECTION,"transfer-encoding":E0.TRANSFER_ENCODING,upgrade:E0.UPGRADE}});var Eq=_((UDt,qte)=>{"use strict";var{Buffer:bHe}=require("buffer");qte.exports=bHe.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var Hte=_((ODt,Vte)=>{"use strict";var{Buffer:EHe}=require("buffer");Vte.exports=EHe.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var Xb=_((qDt,jte)=>{"use strict";var Wte=["GET","HEAD","POST"],_He=new Set(Wte),xHe=[101,204,205,304],Gte=[301,302,303,307,308],wHe=new Set(Gte),$te=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],SHe=new Set($te),Yte=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],IHe=new Set(Yte),BHe=["follow","manual","error"],Kte=["GET","HEAD","OPTIONS","TRACE"],DHe=new Set(Kte),THe=["navigate","same-origin","no-cors","cors"],RHe=["omit","same-origin","include"],kHe=["default","no-store","reload","no-cache","force-cache","only-if-cached"],MHe=["content-encoding","content-language","content-location","content-type","content-length"],FHe=["half"],zte=["CONNECT","TRACE","TRACK"],QHe=new Set(zte),Jte=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],NHe=new Set(Jte);jte.exports={subresource:Jte,forbiddenMethods:zte,requestBodyHeader:MHe,referrerPolicy:Yte,requestRedirect:BHe,requestMode:THe,requestCredentials:RHe,requestCache:kHe,redirectStatus:Gte,corsSafeListedMethods:Wte,nullBodyStatus:xHe,safeMethods:Kte,badPorts:$te,requestDuplex:FHe,subresourceSet:NHe,badPortsSet:SHe,redirectStatusSet:wHe,corsSafeListedMethodsSet:_He,safeMethodsSet:DHe,forbiddenMethodsSet:QHe,referrerPolicySet:IHe}});var xq=_((VDt,Zte)=>{"use strict";var _q=Symbol.for("undici.globalOrigin.1");function PHe(){return globalThis[_q]}function LHe(e){if(e===void 0){Object.defineProperty(globalThis,_q,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let t=new URL(e);if(t.protocol!=="http:"&&t.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${t.protocol}`);Object.defineProperty(globalThis,_q,{value:t,writable:!0,enumerable:!1,configurable:!1})}Zte.exports={getGlobalOrigin:PHe,setGlobalOrigin:LHe}});var Go=_((HDt,sre)=>{"use strict";var nD=require("assert"),UHe=new TextEncoder,eE=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,OHe=/[\u000A\u000D\u0009\u0020]/,qHe=/[\u0009\u000A\u000C\u000D\u0020]/g,VHe=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function HHe(e){nD(e.protocol==="data:");let t=tre(e,!0);t=t.slice(5);let r={position:0},n=_0(",",t,r),i=n.length;if(n=zHe(n,!0,!0),r.position>=t.length)return"failure";r.position++;let s=t.slice(i+1),o=rre(s);if(/;(\u0020){0,}base64$/i.test(n)){let l=ire(o);if(o=GHe(l),o==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let a=wq(n);return a==="failure"&&(a=wq("text/plain;charset=US-ASCII")),{mimeType:a,body:o}}function tre(e,t=!1){if(!t)return e.href;let r=e.href,n=e.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}function iD(e,t,r){let n="";for(;r.position<t.length&&e(t[r.position]);)n+=t[r.position],r.position++;return n}function _0(e,t,r){let n=t.indexOf(e,r.position),i=r.position;return n===-1?(r.position=t.length,t.slice(i)):(r.position=n,t.slice(i,r.position))}function rre(e){let t=UHe.encode(e);return WHe(t)}function Xte(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function ere(e){return e>=48&&e<=57?e-48:(e&223)-55}function WHe(e){let t=e.length,r=new Uint8Array(t),n=0;for(let i=0;i<t;++i){let s=e[i];s!==37?r[n++]=s:s===37&&!(Xte(e[i+1])&&Xte(e[i+2]))?r[n++]=37:(r[n++]=ere(e[i+1])<<4|ere(e[i+2]),i+=2)}return t===n?r:r.subarray(0,n)}function wq(e){e=rD(e,!0,!0);let t={position:0},r=_0("/",e,t);if(r.length===0||!eE.test(r)||t.position>e.length)return"failure";t.position++;let n=_0(";",e,t);if(n=rD(n,!1,!0),n.length===0||!eE.test(n))return"failure";let i=r.toLowerCase(),s=n.toLowerCase(),o={type:i,subtype:s,parameters:new Map,essence:`${i}/${s}`};for(;t.position<e.length;){t.position++,iD(c=>OHe.test(c),e,t);let a=iD(c=>c!==";"&&c!=="=",e,t);if(a=a.toLowerCase(),t.position<e.length){if(e[t.position]===";")continue;t.position++}if(t.position>e.length)break;let l=null;if(e[t.position]==='"')l=nre(e,t,!0),_0(";",e,t);else if(l=_0(";",e,t),l=rD(l,!1,!0),l.length===0)continue;a.length!==0&&eE.test(a)&&(l.length===0||VHe.test(l))&&!o.parameters.has(a)&&o.parameters.set(a,l)}return o}function GHe(e){e=e.replace(qHe,"");let t=e.length;if(t%4===0&&e.charCodeAt(t-1)===61&&(--t,e.charCodeAt(t-1)===61&&--t),t%4===1||/[^+/0-9A-Za-z]/.test(e.length===t?e:e.substring(0,t)))return"failure";let r=Buffer.from(e,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function nre(e,t,r){let n=t.position,i="";for(nD(e[t.position]==='"'),t.position++;i+=iD(o=>o!=='"'&&o!=="\\",e,t),!(t.position>=e.length);){let s=e[t.position];if(t.position++,s==="\\"){if(t.position>=e.length){i+="\\";break}i+=e[t.position],t.position++}else{nD(s==='"');break}}return r?i:e.slice(n,t.position)}function $He(e){nD(e!=="failure");let{parameters:t,essence:r}=e,n=r;for(let[i,s]of t.entries())n+=";",n+=i,n+="=",eE.test(s)||(s=s.replace(/(\\|")/g,"\\$1"),s='"'+s,s+='"'),n+=s;return n}function YHe(e){return e===13||e===10||e===9||e===32}function rD(e,t=!0,r=!0){return Sq(e,t,r,YHe)}function KHe(e){return e===13||e===10||e===9||e===12||e===32}function zHe(e,t=!0,r=!0){return Sq(e,t,r,KHe)}function Sq(e,t,r,n){let i=0,s=e.length-1;if(t)for(;i<e.length&&n(e.charCodeAt(i));)i++;if(r)for(;s>0&&n(e.charCodeAt(s));)s--;return i===0&&s===e.length-1?e:e.slice(i,s+1)}function ire(e){let t=e.length;if(65535>t)return String.fromCharCode.apply(null,e);let r="",n=0,i=65535;for(;n<t;)n+i>t&&(i=t-n),r+=String.fromCharCode.apply(null,e.subarray(n,n+=i));return r}function JHe(e){switch(e.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return e.subtype.endsWith("+json")?"application/json":e.subtype.endsWith("+xml")?"application/xml":""}sre.exports={dataURLProcessor:HHe,URLSerializer:tre,collectASequenceOfCodePoints:iD,collectASequenceOfCodePointsFast:_0,stringPercentDecode:rre,parseMIMEType:wq,collectAnHTTPQuotedString:nre,serializeAMimeType:$He,removeChars:Sq,removeHTTPWhitespace:rD,minimizeSupportedMimeType:JHe,HTTP_TOKEN_CODEPOINTS:eE,isomorphicDecode:ire}});var xs=_((WDt,ore)=>{"use strict";var{types:mu,inspect:jHe}=require("util"),{markAsUncloneable:ZHe}=require("worker_threads"),{toUSVString:XHe}=nr(),_e={};_e.converters={};_e.util={};_e.errors={};_e.errors.exception=function(e){return new TypeError(`${e.header}: ${e.message}`)};_e.errors.conversionFailed=function(e){let t=e.types.length===1?"":" one of",r=`${e.argument} could not be converted to${t}: ${e.types.join(", ")}.`;return _e.errors.exception({header:e.prefix,message:r})};_e.errors.invalidArgument=function(e){return _e.errors.exception({header:e.prefix,message:`"${e.value}" is an invalid ${e.type}.`})};_e.brandCheck=function(e,t,r){if(r?.strict!==!1){if(!(e instanceof t)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(e?.[Symbol.toStringTag]!==t.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};_e.argumentLengthCheck=function({length:e},t,r){if(e<t)throw _e.errors.exception({message:`${t} argument${t!==1?"s":""} required, but${e?" only":""} ${e} found.`,header:r})};_e.illegalConstructor=function(){throw _e.errors.exception({header:"TypeError",message:"Illegal constructor"})};_e.util.Type=function(e){switch(typeof e){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return e===null?"Null":"Object"}};_e.util.markAsUncloneable=ZHe||(()=>{});_e.util.ConvertToInt=function(e,t,r,n){let i,s;t===64?(i=Math.pow(2,53)-1,r==="unsigned"?s=0:s=Math.pow(-2,53)+1):r==="unsigned"?(s=0,i=Math.pow(2,t)-1):(s=Math.pow(-2,t)-1,i=Math.pow(2,t-1)-1);let o=Number(e);if(o===0&&(o=0),n?.enforceRange===!0){if(Number.isNaN(o)||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)throw _e.errors.exception({header:"Integer conversion",message:`Could not convert ${_e.util.Stringify(e)} to an integer.`});if(o=_e.util.IntegerPart(o),o<s||o>i)throw _e.errors.exception({header:"Integer conversion",message:`Value must be between ${s}-${i}, got ${o}.`});return o}return!Number.isNaN(o)&&n?.clamp===!0?(o=Math.min(Math.max(o,s),i),Math.floor(o)%2===0?o=Math.floor(o):o=Math.ceil(o),o):Number.isNaN(o)||o===0&&Object.is(0,o)||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY?0:(o=_e.util.IntegerPart(o),o=o%Math.pow(2,t),r==="signed"&&o>=Math.pow(2,t)-1?o-Math.pow(2,t):o)};_e.util.IntegerPart=function(e){let t=Math.floor(Math.abs(e));return e<0?-1*t:t};_e.util.Stringify=function(e){switch(_e.util.Type(e)){case"Symbol":return`Symbol(${e.description})`;case"Object":return jHe(e);case"String":return`"${e}"`;default:return`${e}`}};_e.sequenceConverter=function(e){return(t,r,n,i)=>{if(_e.util.Type(t)!=="Object")throw _e.errors.exception({header:r,message:`${n} (${_e.util.Stringify(t)}) is not iterable.`});let s=typeof i=="function"?i():t?.[Symbol.iterator]?.(),o=[],a=0;if(s===void 0||typeof s.next!="function")throw _e.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:c}=s.next();if(l)break;o.push(e(c,r,`${n}[${a++}]`))}return o}};_e.recordConverter=function(e,t){return(r,n,i)=>{if(_e.util.Type(r)!=="Object")throw _e.errors.exception({header:n,message:`${i} ("${_e.util.Type(r)}") is not an Object.`});let s={};if(!mu.isProxy(r)){let a=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of a){let c=e(l,n,i),u=t(r[l],n,i);s[c]=u}return s}let o=Reflect.ownKeys(r);for(let a of o)if(Reflect.getOwnPropertyDescriptor(r,a)?.enumerable){let c=e(a,n,i),u=t(r[a],n,i);s[c]=u}return s}};_e.interfaceConverter=function(e){return(t,r,n,i)=>{if(i?.strict!==!1&&!(t instanceof e))throw _e.errors.exception({header:r,message:`Expected ${n} ("${_e.util.Stringify(t)}") to be an instance of ${e.name}.`});return t}};_e.dictionaryConverter=function(e){return(t,r,n)=>{let i=_e.util.Type(t),s={};if(i==="Null"||i==="Undefined")return s;if(i!=="Object")throw _e.errors.exception({header:r,message:`Expected ${t} to be one of: Null, Undefined, Object.`});for(let o of e){let{key:a,defaultValue:l,required:c,converter:u}=o;if(c===!0&&!Object.hasOwn(t,a))throw _e.errors.exception({header:r,message:`Missing required key "${a}".`});let f=t[a],p=Object.hasOwn(o,"defaultValue");if(p&&f!==null&&(f??=l()),c||p||f!==void 0){if(f=u(f,r,`${n}.${a}`),o.allowedValues&&!o.allowedValues.includes(f))throw _e.errors.exception({header:r,message:`${f} is not an accepted type. Expected one of ${o.allowedValues.join(", ")}.`});s[a]=f}}return s}};_e.nullableConverter=function(e){return(t,r,n)=>t===null?t:e(t,r,n)};_e.converters.DOMString=function(e,t,r,n){if(e===null&&n?.legacyNullToEmptyString)return"";if(typeof e=="symbol")throw _e.errors.exception({header:t,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(e)};_e.converters.ByteString=function(e,t,r){let n=_e.converters.DOMString(e,t,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};_e.converters.USVString=XHe;_e.converters.boolean=function(e){return!!e};_e.converters.any=function(e){return e};_e.converters["long long"]=function(e,t,r){return _e.util.ConvertToInt(e,64,"signed",void 0,t,r)};_e.converters["unsigned long long"]=function(e,t,r){return _e.util.ConvertToInt(e,64,"unsigned",void 0,t,r)};_e.converters["unsigned long"]=function(e,t,r){return _e.util.ConvertToInt(e,32,"unsigned",void 0,t,r)};_e.converters["unsigned short"]=function(e,t,r,n){return _e.util.ConvertToInt(e,16,"unsigned",n,t,r)};_e.converters.ArrayBuffer=function(e,t,r,n){if(_e.util.Type(e)!=="Object"||!mu.isAnyArrayBuffer(e))throw _e.errors.conversionFailed({prefix:t,argument:`${r} ("${_e.util.Stringify(e)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&mu.isSharedArrayBuffer(e))throw _e.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.resizable||e.growable)throw _e.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};_e.converters.TypedArray=function(e,t,r,n,i){if(_e.util.Type(e)!=="Object"||!mu.isTypedArray(e)||e.constructor.name!==t.name)throw _e.errors.conversionFailed({prefix:r,argument:`${n} ("${_e.util.Stringify(e)}")`,types:[t.name]});if(i?.allowShared===!1&&mu.isSharedArrayBuffer(e.buffer))throw _e.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.buffer.resizable||e.buffer.growable)throw _e.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};_e.converters.DataView=function(e,t,r,n){if(_e.util.Type(e)!=="Object"||!mu.isDataView(e))throw _e.errors.exception({header:t,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&mu.isSharedArrayBuffer(e.buffer))throw _e.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.buffer.resizable||e.buffer.growable)throw _e.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};_e.converters.BufferSource=function(e,t,r,n){if(mu.isAnyArrayBuffer(e))return _e.converters.ArrayBuffer(e,t,r,{...n,allowShared:!1});if(mu.isTypedArray(e))return _e.converters.TypedArray(e,e.constructor,t,r,{...n,allowShared:!1});if(mu.isDataView(e))return _e.converters.DataView(e,t,r,{...n,allowShared:!1});throw _e.errors.conversionFailed({prefix:t,argument:`${r} ("${_e.util.Stringify(e)}")`,types:["BufferSource"]})};_e.converters["sequence<ByteString>"]=_e.sequenceConverter(_e.converters.ByteString);_e.converters["sequence<sequence<ByteString>>"]=_e.sequenceConverter(_e.converters["sequence<ByteString>"]);_e.converters["record<ByteString, ByteString>"]=_e.recordConverter(_e.converters.ByteString,_e.converters.ByteString);ore.exports={webidl:_e}});var wa=_((GDt,Cre)=>{"use strict";var{Transform:eWe}=require("stream"),are=require("zlib"),{redirectStatusSet:tWe,referrerPolicySet:rWe,badPortsSet:nWe}=Xb(),{getGlobalOrigin:lre}=xq(),{collectASequenceOfCodePoints:Cp,collectAnHTTPQuotedString:iWe,removeChars:sWe,parseMIMEType:oWe}=Go(),{performance:aWe}=require("perf_hooks"),{isBlobLike:lWe,ReadableStreamFrom:cWe,isValidHTTPToken:cre,normalizedMethodRecordsBase:uWe}=nr(),bp=require("assert"),{isUint8Array:dWe}=require("util/types"),{webidl:tE}=xs(),ure=[],oD;try{oD=require("crypto");let e=["sha256","sha384","sha512"];ure=oD.getHashes().filter(t=>e.includes(t))}catch{}function dre(e){let t=e.urlList,r=t.length;return r===0?null:t[r-1].toString()}function fWe(e,t){if(!tWe.has(e.status))return null;let r=e.headersList.get("location",!0);return r!==null&&hre(r)&&(fre(r)||(r=hWe(r)),r=new URL(r,dre(e))),r&&!r.hash&&(r.hash=t),r}function fre(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r>126||r<32)return!1}return!0}function hWe(e){return Buffer.from(e,"binary").toString("utf8")}function nE(e){return e.urlList[e.urlList.length-1]}function gWe(e){let t=nE(e);return yre(t)&&nWe.has(t.port)?"blocked":"allowed"}function pWe(e){return e instanceof Error||e?.constructor?.name==="Error"||e?.constructor?.name==="DOMException"}function mWe(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}var AWe=cre;function hre(e){return(e[0]==="	"||e[0]===" "||e[e.length-1]==="	"||e[e.length-1]===" "||e.includes(`
`)||e.includes("\r")||e.includes("\0"))===!1}function yWe(e,t){let{headersList:r}=t,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let s=n.length;s!==0;s--){let o=n[s-1].trim();if(rWe.has(o)){i=o;break}}i!==""&&(e.referrerPolicy=i)}function vWe(){return"allowed"}function CWe(){return"success"}function bWe(){return"success"}function EWe(e){let t=null;t=e.mode,e.headersList.set("sec-fetch-mode",t,!0)}function _We(e){let t=e.origin;if(!(t==="client"||t===void 0)){if(e.responseTainting==="cors"||e.mode==="websocket")e.headersList.append("origin",t,!0);else if(e.method!=="GET"&&e.method!=="HEAD"){switch(e.referrerPolicy){case"no-referrer":t=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":e.origin&&Bq(e.origin)&&!Bq(nE(e))&&(t=null);break;case"same-origin":aD(e,nE(e))||(t=null);break;default:}e.headersList.append("origin",t,!0)}}}function x0(e,t){return e}function xWe(e,t,r){return!e?.startTime||e.startTime<t?{domainLookupStartTime:t,domainLookupEndTime:t,connectionStartTime:t,connectionEndTime:t,secureConnectionStartTime:t,ALPNNegotiatedProtocol:e?.ALPNNegotiatedProtocol}:{domainLookupStartTime:x0(e.domainLookupStartTime,r),domainLookupEndTime:x0(e.domainLookupEndTime,r),connectionStartTime:x0(e.connectionStartTime,r),connectionEndTime:x0(e.connectionEndTime,r),secureConnectionStartTime:x0(e.secureConnectionStartTime,r),ALPNNegotiatedProtocol:e.ALPNNegotiatedProtocol}}function wWe(e){return x0(aWe.now(),e)}function SWe(e){return{startTime:e.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:e.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}function gre(){return{referrerPolicy:"strict-origin-when-cross-origin"}}function IWe(e){return{referrerPolicy:e.referrerPolicy}}function BWe(e){let t=e.referrerPolicy;bp(t);let r=null;if(e.referrer==="client"){let a=lre();if(!a||a.origin==="null")return"no-referrer";r=new URL(a)}else e.referrer instanceof URL&&(r=e.referrer);let n=Iq(r),i=Iq(r,!0);n.toString().length>4096&&(n=i);let s=aD(e,n),o=rE(n)&&!rE(e.url);switch(t){case"origin":return i??Iq(r,!0);case"unsafe-url":return n;case"same-origin":return s?i:"no-referrer";case"origin-when-cross-origin":return s?n:i;case"strict-origin-when-cross-origin":{let a=nE(e);return aD(n,a)?n:rE(n)&&!rE(a)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return o?"no-referrer":i}}function Iq(e,t){return bp(e instanceof URL),e=new URL(e),e.protocol==="file:"||e.protocol==="about:"||e.protocol==="blank:"?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e)}function rE(e){if(!(e instanceof URL))return!1;if(e.href==="about:blank"||e.href==="about:srcdoc"||e.protocol==="data:"||e.protocol==="file:")return!0;return t(e.origin);function t(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}function DWe(e,t){if(oD===void 0)return!0;let r=pre(t);if(r==="no metadata"||r.length===0)return!0;let n=RWe(r),i=kWe(r,n);for(let s of i){let o=s.algo,a=s.hash,l=oD.createHash(o).update(e).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),MWe(l,a))return!0}return!1}var TWe=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function pre(e){let t=[],r=!0;for(let n of e.split(" ")){r=!1;let i=TWe.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let s=i.groups.algo.toLowerCase();ure.includes(s)&&t.push(i.groups)}return r===!0?"no metadata":t}function RWe(e){let t=e[0].algo;if(t[3]==="5")return t;for(let r=1;r<e.length;++r){let n=e[r];if(n.algo[3]==="5"){t="sha512";break}else{if(t[3]==="3")continue;n.algo[3]==="3"&&(t="sha384")}}return t}function kWe(e,t){if(e.length===1)return e;let r=0;for(let n=0;n<e.length;++n)e[n].algo===t&&(e[r++]=e[n]);return e.length=r,e}function MWe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r]){if(e[r]==="+"&&t[r]==="-"||e[r]==="/"&&t[r]==="_")continue;return!1}return!0}function FWe(e){}function aD(e,t){return e.origin===t.origin&&e.origin==="null"||e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port}function QWe(){let e,t;return{promise:new Promise((n,i)=>{e=n,t=i}),resolve:e,reject:t}}function NWe(e){return e.controller.state==="aborted"}function PWe(e){return e.controller.state==="aborted"||e.controller.state==="terminated"}function LWe(e){return uWe[e.toLowerCase()]??e}function UWe(e){let t=JSON.stringify(e);if(t===void 0)throw new TypeError("Value is not JSON serializable");return bp(typeof t=="string"),t}var OWe=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function mre(e,t,r=0,n=1){class i{#e;#t;#i;constructor(o,a){this.#e=o,this.#t=a,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${e} Iterator.`);let o=this.#i,a=this.#e[t],l=a.length;if(o>=l)return{value:void 0,done:!0};let{[r]:c,[n]:u}=a[o];this.#i=o+1;let f;switch(this.#t){case"key":f=c;break;case"value":f=u;break;case"key+value":f=[c,u];break}return{value:f,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,OWe),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${e} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(s,o){return new i(s,o)}}function qWe(e,t,r,n=0,i=1){let s=mre(e,r,n,i),o={keys:{writable:!0,enumerable:!0,configurable:!0,value:function(){return tE.brandCheck(this,t),s(this,"key")}},values:{writable:!0,enumerable:!0,configurable:!0,value:function(){return tE.brandCheck(this,t),s(this,"value")}},entries:{writable:!0,enumerable:!0,configurable:!0,value:function(){return tE.brandCheck(this,t),s(this,"key+value")}},forEach:{writable:!0,enumerable:!0,configurable:!0,value:function(l,c=globalThis){if(tE.brandCheck(this,t),tE.argumentLengthCheck(arguments,1,`${e}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${e}': parameter 1 is not of type 'Function'.`);for(let{0:u,1:f}of s(this,"key+value"))l.call(c,f,u,this)}}};return Object.defineProperties(t.prototype,{...o,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:o.entries.value}})}async function VWe(e,t,r){let n=t,i=r,s;try{s=e.stream.getReader()}catch(o){i(o);return}try{n(await Are(s))}catch(o){i(o)}}function HWe(e){return e instanceof ReadableStream||e[Symbol.toStringTag]==="ReadableStream"&&typeof e.tee=="function"}function WWe(e){try{e.close(),e.byobRequest?.respond(0)}catch(t){if(!t.message.includes("Controller is already closed")&&!t.message.includes("ReadableStream is already closed"))throw t}}var GWe=/[^\x00-\xFF]/;function sD(e){return bp(!GWe.test(e)),e}async function Are(e){let t=[],r=0;for(;;){let{done:n,value:i}=await e.read();if(n)return Buffer.concat(t,r);if(!dWe(i))throw new TypeError("Received non-Uint8Array chunk");t.push(i),r+=i.length}}function $We(e){bp("protocol"in e);let t=e.protocol;return t==="about:"||t==="blob:"||t==="data:"}function Bq(e){return typeof e=="string"&&e[5]===":"&&e[0]==="h"&&e[1]==="t"&&e[2]==="t"&&e[3]==="p"&&e[4]==="s"||e.protocol==="https:"}function yre(e){bp("protocol"in e);let t=e.protocol;return t==="http:"||t==="https:"}function YWe(e,t){let r=e;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(t&&Cp(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,t&&Cp(l=>l==="	"||l===" ",r,n);let i=Cp(l=>{let c=l.charCodeAt(0);return c>=48&&c<=57},r,n),s=i.length?Number(i):null;if(t&&Cp(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,t&&Cp(l=>l==="	"||l===" ",r,n);let o=Cp(l=>{let c=l.charCodeAt(0);return c>=48&&c<=57},r,n),a=o.length?Number(o):null;return n.position<r.length||a===null&&s===null||s>a?"failure":{rangeStartValue:s,rangeEndValue:a}}function KWe(e,t,r){let n="bytes ";return n+=sD(`${e}`),n+="-",n+=sD(`${t}`),n+="/",n+=sD(`${r}`),n}var Dq=class extends eWe{#e;constructor(t){super(),this.#e=t}_transform(t,r,n){if(!this._inflateStream){if(t.length===0){n();return}this._inflateStream=(t[0]&15)===8?are.createInflate(this.#e):are.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(t,r,n)}_final(t){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),t()}};function zWe(e){return new Dq(e)}function JWe(e){let t=null,r=null,n=null,i=vre("content-type",e);if(i===null)return"failure";for(let s of i){let o=oWe(s);o==="failure"||o.essence==="*/*"||(n=o,n.essence!==r?(t=null,n.parameters.has("charset")&&(t=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&t!==null&&n.parameters.set("charset",t))}return n??"failure"}function jWe(e){let t=e,r={position:0},n=[],i="";for(;r.position<t.length;){if(i+=Cp(s=>s!=='"'&&s!==",",t,r),r.position<t.length)if(t.charCodeAt(r.position)===34){if(i+=iWe(t,r),r.position<t.length)continue}else bp(t.charCodeAt(r.position)===44),r.position++;i=sWe(i,!0,!0,s=>s===9||s===32),n.push(i),i=""}return n}function vre(e,t){let r=t.get(e,!0);return r===null?null:jWe(r)}var ZWe=new TextDecoder;function XWe(e){return e.length===0?"":(e[0]===239&&e[1]===187&&e[2]===191&&(e=e.subarray(3)),ZWe.decode(e))}var Tq=class{get baseUrl(){return lre()}get origin(){return this.baseUrl?.origin}policyContainer=gre()},Rq=class{settingsObject=new Tq},eGe=new Rq;Cre.exports={isAborted:NWe,isCancelled:PWe,isValidEncodedURL:fre,createDeferredPromise:QWe,ReadableStreamFrom:cWe,tryUpgradeRequestToAPotentiallyTrustworthyURL:FWe,clampAndCoarsenConnectionTimingInfo:xWe,coarsenedSharedCurrentTime:wWe,determineRequestsReferrer:BWe,makePolicyContainer:gre,clonePolicyContainer:IWe,appendFetchMetadata:EWe,appendRequestOriginHeader:_We,TAOCheck:bWe,corsCheck:CWe,crossOriginResourcePolicyCheck:vWe,createOpaqueTimingInfo:SWe,setRequestReferrerPolicyOnRedirect:yWe,isValidHTTPToken:cre,requestBadPort:gWe,requestCurrentURL:nE,responseURL:dre,responseLocationURL:fWe,isBlobLike:lWe,isURLPotentiallyTrustworthy:rE,isValidReasonPhrase:mWe,sameOrigin:aD,normalizeMethod:LWe,serializeJavascriptValueToJSONString:UWe,iteratorMixin:qWe,createIterator:mre,isValidHeaderName:AWe,isValidHeaderValue:hre,isErrorLike:pWe,fullyReadBody:VWe,bytesMatch:DWe,isReadableStreamLike:HWe,readableStreamClose:WWe,isomorphicEncode:sD,urlIsLocal:$We,urlHasHttpsScheme:Bq,urlIsHttpHttpsScheme:yre,readAllBytes:Are,simpleRangeHeaderValue:YWe,buildContentRange:KWe,parseMetadata:pre,createInflate:zWe,extractMimeType:JWe,getDecodeSplit:vre,utf8DecodeBytes:XWe,environmentSettingsObject:eGe}});var ah=_(($Dt,bre)=>{"use strict";bre.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var Mq=_((YDt,Ere)=>{"use strict";var{Blob:tGe,File:rGe}=require("buffer"),{kState:Ld}=ah(),{webidl:Au}=xs(),kq=class e{constructor(t,r,n={}){let i=r,s=n.type,o=n.lastModified??Date.now();this[Ld]={blobLike:t,name:i,type:s,lastModified:o}}stream(...t){return Au.brandCheck(this,e),this[Ld].blobLike.stream(...t)}arrayBuffer(...t){return Au.brandCheck(this,e),this[Ld].blobLike.arrayBuffer(...t)}slice(...t){return Au.brandCheck(this,e),this[Ld].blobLike.slice(...t)}text(...t){return Au.brandCheck(this,e),this[Ld].blobLike.text(...t)}get size(){return Au.brandCheck(this,e),this[Ld].blobLike.size}get type(){return Au.brandCheck(this,e),this[Ld].blobLike.type}get name(){return Au.brandCheck(this,e),this[Ld].name}get lastModified(){return Au.brandCheck(this,e),this[Ld].lastModified}get[Symbol.toStringTag](){return"File"}};Au.converters.Blob=Au.interfaceConverter(tGe);function nGe(e){return e instanceof rGe||e&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&e[Symbol.toStringTag]==="File"}Ere.exports={FileLike:kq,isFileLike:nGe}});var sE=_((KDt,Ire)=>{"use strict";var{isBlobLike:lD,iteratorMixin:iGe}=wa(),{kState:po}=ah(),{kEnumerableProperty:w0}=nr(),{FileLike:_re,isFileLike:sGe}=Mq(),{webidl:bn}=xs(),{File:Sre}=require("buffer"),xre=require("util"),wre=globalThis.File??Sre,iE=class e{constructor(t){if(bn.util.markAsUncloneable(this),t!==void 0)throw bn.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[po]=[]}append(t,r,n=void 0){bn.brandCheck(this,e);let i="FormData.append";if(bn.argumentLengthCheck(arguments,2,i),arguments.length===3&&!lD(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");t=bn.converters.USVString(t,i,"name"),r=lD(r)?bn.converters.Blob(r,i,"value",{strict:!1}):bn.converters.USVString(r,i,"value"),n=arguments.length===3?bn.converters.USVString(n,i,"filename"):void 0;let s=Fq(t,r,n);this[po].push(s)}delete(t){bn.brandCheck(this,e);let r="FormData.delete";bn.argumentLengthCheck(arguments,1,r),t=bn.converters.USVString(t,r,"name"),this[po]=this[po].filter(n=>n.name!==t)}get(t){bn.brandCheck(this,e);let r="FormData.get";bn.argumentLengthCheck(arguments,1,r),t=bn.converters.USVString(t,r,"name");let n=this[po].findIndex(i=>i.name===t);return n===-1?null:this[po][n].value}getAll(t){bn.brandCheck(this,e);let r="FormData.getAll";return bn.argumentLengthCheck(arguments,1,r),t=bn.converters.USVString(t,r,"name"),this[po].filter(n=>n.name===t).map(n=>n.value)}has(t){bn.brandCheck(this,e);let r="FormData.has";return bn.argumentLengthCheck(arguments,1,r),t=bn.converters.USVString(t,r,"name"),this[po].findIndex(n=>n.name===t)!==-1}set(t,r,n=void 0){bn.brandCheck(this,e);let i="FormData.set";if(bn.argumentLengthCheck(arguments,2,i),arguments.length===3&&!lD(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");t=bn.converters.USVString(t,i,"name"),r=lD(r)?bn.converters.Blob(r,i,"name",{strict:!1}):bn.converters.USVString(r,i,"name"),n=arguments.length===3?bn.converters.USVString(n,i,"name"):void 0;let s=Fq(t,r,n),o=this[po].findIndex(a=>a.name===t);o!==-1?this[po]=[...this[po].slice(0,o),s,...this[po].slice(o+1).filter(a=>a.name!==t)]:this[po].push(s)}[xre.inspect.custom](t,r){let n=this[po].reduce((s,o)=>(s[o.name]?Array.isArray(s[o.name])?s[o.name].push(o.value):s[o.name]=[s[o.name],o.value]:s[o.name]=o.value,s),{__proto__:null});r.depth??=t,r.colors??=!0;let i=xre.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};iGe("FormData",iE,po,"name","value");Object.defineProperties(iE.prototype,{append:w0,delete:w0,get:w0,getAll:w0,has:w0,set:w0,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function Fq(e,t,r){if(typeof t!="string"){if(sGe(t)||(t=t instanceof Blob?new wre([t],"blob",{type:t.type}):new _re(t,"blob",{type:t.type})),r!==void 0){let n={type:t.type,lastModified:t.lastModified};t=t instanceof Sre?new wre([t],r,n):new _re(t,r,n)}}return{name:e,value:t}}Ire.exports={FormData:iE,makeEntry:Fq}});var Mre=_((zDt,kre)=>{"use strict";var{isUSVString:Bre,bufferToLowerCasedHeaderName:oGe}=nr(),{utf8DecodeBytes:aGe}=wa(),{HTTP_TOKEN_CODEPOINTS:lGe,isomorphicDecode:Dre}=Go(),{isFileLike:cGe}=Mq(),{makeEntry:uGe}=sE(),cD=require("assert"),{File:dGe}=require("buffer"),fGe=globalThis.File??dGe,hGe=Buffer.from('form-data; name="'),Tre=Buffer.from("; filename"),gGe=Buffer.from("--"),pGe=Buffer.from(`--\r
`);function mGe(e){for(let t=0;t<e.length;++t)if(e.charCodeAt(t)&-128)return!1;return!0}function AGe(e){let t=e.length;if(t<27||t>70)return!1;for(let r=0;r<t;++r){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}function yGe(e,t){cD(t!=="failure"&&t.essence==="multipart/form-data");let r=t.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],s={position:0};for(;e[s.position]===13&&e[s.position+1]===10;)s.position+=2;let o=e.length;for(;e[o-1]===10&&e[o-2]===13;)o-=2;for(o!==e.length&&(e=e.subarray(0,o));;){if(e.subarray(s.position,s.position+n.length).equals(n))s.position+=n.length;else return"failure";if(s.position===e.length-2&&uD(e,gGe,s)||s.position===e.length-4&&uD(e,pGe,s))return i;if(e[s.position]!==13||e[s.position+1]!==10)return"failure";s.position+=2;let a=vGe(e,s);if(a==="failure")return"failure";let{name:l,filename:c,contentType:u,encoding:f}=a;s.position+=2;let p;{let m=e.indexOf(n.subarray(2),s.position);if(m===-1)return"failure";p=e.subarray(s.position,m-4),s.position+=p.length,f==="base64"&&(p=Buffer.from(p.toString(),"base64"))}if(e[s.position]!==13||e[s.position+1]!==10)return"failure";s.position+=2;let g;c!==null?(u??="text/plain",mGe(u)||(u=""),g=new fGe([p],c,{type:u})):g=aGe(Buffer.from(p)),cD(Bre(l)),cD(typeof g=="string"&&Bre(g)||cGe(g)),i.push(uGe(l,g,c))}}function vGe(e,t){let r=null,n=null,i=null,s=null;for(;;){if(e[t.position]===13&&e[t.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:s};let o=S0(a=>a!==10&&a!==13&&a!==58,e,t);if(o=Qq(o,!0,!0,a=>a===9||a===32),!lGe.test(o.toString())||e[t.position]!==58)return"failure";switch(t.position++,S0(a=>a===32||a===9,e,t),oGe(o)){case"content-disposition":{if(r=n=null,!uD(e,hGe,t)||(t.position+=17,r=Rre(e,t),r===null))return"failure";if(uD(e,Tre,t)){let a=t.position+Tre.length;if(e[a]===42&&(t.position+=1,a+=1),e[a]!==61||e[a+1]!==34||(t.position+=12,n=Rre(e,t),n===null))return"failure"}break}case"content-type":{let a=S0(l=>l!==10&&l!==13,e,t);a=Qq(a,!1,!0,l=>l===9||l===32),i=Dre(a);break}case"content-transfer-encoding":{let a=S0(l=>l!==10&&l!==13,e,t);a=Qq(a,!1,!0,l=>l===9||l===32),s=Dre(a);break}default:S0(a=>a!==10&&a!==13,e,t)}if(e[t.position]!==13&&e[t.position+1]!==10)return"failure";t.position+=2}}function Rre(e,t){cD(e[t.position-1]===34);let r=S0(n=>n!==10&&n!==13&&n!==34,e,t);return e[t.position]!==34?null:(t.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}function S0(e,t,r){let n=r.position;for(;n<t.length&&e(t[n]);)++n;return t.subarray(r.position,r.position=n)}function Qq(e,t,r,n){let i=0,s=e.length-1;if(t)for(;i<e.length&&n(e[i]);)i++;if(r)for(;s>0&&n(e[s]);)s--;return i===0&&s===e.length-1?e:e.subarray(i,s+1)}function uD(e,t,r){if(e.length<t.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[r.position+n])return!1;return!0}kre.exports={multipartFormDataParser:yGe,validateBoundary:AGe}});var D0=_((JDt,qre)=>{"use strict";var oE=nr(),{ReadableStreamFrom:CGe,isBlobLike:Fre,isReadableStreamLike:bGe,readableStreamClose:EGe,createDeferredPromise:_Ge,fullyReadBody:xGe,extractMimeType:wGe,utf8DecodeBytes:Pre}=wa(),{FormData:Qre}=sE(),{kState:B0}=ah(),{webidl:SGe}=xs(),{Blob:IGe}=require("buffer"),Nq=require("assert"),{isErrored:Lre,isDisturbed:BGe}=require("stream"),{isArrayBuffer:DGe}=require("util/types"),{serializeAMimeType:TGe}=Go(),{multipartFormDataParser:RGe}=Mre(),Pq;try{let e=require("crypto");Pq=t=>e.randomInt(0,t)}catch{Pq=e=>Math.floor(Math.random(e))}var dD=new TextEncoder;function kGe(){}var Lq=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Uq;Lq&&(Uq=new FinalizationRegistry(e=>{let t=e.deref();t&&!t.locked&&!BGe(t)&&!Lre(t)&&t.cancel("Response object has been garbage collected").catch(kGe)}));function Ure(e,t=!1){let r=null;e instanceof ReadableStream?r=e:Fre(e)?r=e.stream():r=new ReadableStream({async pull(l){let c=typeof i=="string"?dD.encode(i):i;c.byteLength&&l.enqueue(c),queueMicrotask(()=>EGe(l))},start(){},type:"bytes"}),Nq(bGe(r));let n=null,i=null,s=null,o=null;if(typeof e=="string")i=e,o="text/plain;charset=UTF-8";else if(e instanceof URLSearchParams)i=e.toString(),o="application/x-www-form-urlencoded;charset=UTF-8";else if(DGe(e))i=new Uint8Array(e.slice());else if(ArrayBuffer.isView(e))i=new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));else if(oE.isFormDataLike(e)){let l=`----formdata-undici-0${`${Pq(1e11)}`.padStart(11,"0")}`,c=`--${l}\r
Content-Disposition: form-data`;let u=v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),f=v=>v.replace(/\r?\n|\r/g,`\r
`),p=[],g=new Uint8Array([13,10]);s=0;let m=!1;for(let[v,C]of e)if(typeof C=="string"){let E=dD.encode(c+`; name="${u(f(v))}"\r
\r
${f(C)}\r
`);p.push(E),s+=E.byteLength}else{let E=dD.encode(`${c}; name="${u(f(v))}"`+(C.name?`; filename="${u(C.name)}"`:"")+`\r
Content-Type: ${C.type||"application/octet-stream"}\r
\r
`);p.push(E,C,g),typeof C.size=="number"?s+=E.byteLength+C.size+g.byteLength:m=!0}let y=dD.encode(`--${l}--`);p.push(y),s+=y.byteLength,m&&(s=null),i=e,n=async function*(){for(let v of p)v.stream?yield*v.stream():yield v},o=`multipart/form-data; boundary=${l}`}else if(Fre(e))i=e,s=e.size,e.type&&(o=e.type);else if(typeof e[Symbol.asyncIterator]=="function"){if(t)throw new TypeError("keepalive");if(oE.isDisturbed(e)||e.locked)throw new TypeError("Response body object should not be disturbed or locked");r=e instanceof ReadableStream?e:CGe(e)}if((typeof i=="string"||oE.isBuffer(i))&&(s=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(e)[Symbol.asyncIterator]()},async pull(c){let{value:u,done:f}=await l.next();if(f)queueMicrotask(()=>{c.close(),c.byobRequest?.respond(0)});else if(!Lre(r)){let p=new Uint8Array(u);p.byteLength&&c.enqueue(p)}return c.desiredSize>0},async cancel(c){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:s},o]}function MGe(e,t=!1){return e instanceof ReadableStream&&(Nq(!oE.isDisturbed(e),"The body has already been consumed."),Nq(!e.locked,"The stream is locked.")),Ure(e,t)}function FGe(e,t){let[r,n]=t.stream.tee();return Lq&&Uq.register(e,new WeakRef(r)),t.stream=r,{stream:n,length:t.length,source:t.source}}function QGe(e){if(e.aborted)throw new DOMException("The operation was aborted.","AbortError")}function NGe(e){return{blob(){return I0(this,r=>{let n=Nre(this);return n===null?n="":n&&(n=TGe(n)),new IGe([r],{type:n})},e)},arrayBuffer(){return I0(this,r=>new Uint8Array(r).buffer,e)},text(){return I0(this,Pre,e)},json(){return I0(this,LGe,e)},formData(){return I0(this,r=>{let n=Nre(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=RGe(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let s=new Qre;return s[B0]=i,s}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),s=new Qre;for(let[o,a]of i)s.append(o,a);return s}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},e)},bytes(){return I0(this,r=>new Uint8Array(r),e)}}}function PGe(e){Object.assign(e.prototype,NGe(e))}async function I0(e,t,r){if(SGe.brandCheck(e,r),Ore(e))throw new TypeError("Body is unusable: Body has already been read");QGe(e[B0]);let n=_Ge(),i=o=>n.reject(o),s=o=>{try{n.resolve(t(o))}catch(a){i(a)}};return e[B0].body==null?(s(Buffer.allocUnsafe(0)),n.promise):(await xGe(e[B0].body,s,i),n.promise)}function Ore(e){let t=e[B0].body;return t!=null&&(t.stream.locked||oE.isDisturbed(t.stream))}function LGe(e){return JSON.parse(Pre(e))}function Nre(e){let t=e[B0].headersList,r=wGe(t);return r==="failure"?null:r}qre.exports={extractBody:Ure,safelyExtractBody:MGe,cloneBody:FGe,mixinBody:PGe,streamRegistry:Uq,hasFinalizationRegistry:Lq,bodyUnusable:Ore}});var Zre=_((jDt,jre)=>{"use strict";var gt=require("assert"),Bt=nr(),{channels:Vre}=m0(),Oq=vq(),{RequestContentLengthMismatchError:Ep,ResponseContentLengthMismatchError:UGe,RequestAbortedError:Kre,HeadersTimeoutError:OGe,HeadersOverflowError:qGe,SocketError:AD,InformationalError:T0,BodyTimeoutError:VGe,HTTPParserError:HGe,ResponseExceededMaxSizeError:WGe}=zr(),{kUrl:zre,kReset:$o,kClient:Wq,kParser:li,kBlocking:cE,kRunning:Hs,kPending:GGe,kSize:Hre,kWriting:ch,kQueue:vc,kNoRef:aE,kKeepAliveDefaultTimeout:$Ge,kHostHeader:YGe,kPendingIdx:KGe,kRunningIdx:Cl,kError:bl,kPipelining:pD,kSocket:R0,kKeepAliveTimeoutValue:yD,kMaxHeadersSize:qq,kKeepAliveMaxTimeout:zGe,kKeepAliveTimeoutThreshold:JGe,kHeadersTimeout:jGe,kBodyTimeout:ZGe,kStrictContentLength:Gq,kMaxRequests:Wre,kCounter:XGe,kMaxResponseSize:e4e,kOnError:t4e,kResume:lh,kHTTPContext:Jre}=Gn(),yu=Ote(),r4e=Buffer.alloc(0),fD=Buffer[Symbol.species],hD=Bt.addListener,n4e=Bt.removeAllListeners,Vq;async function i4e(){let e=process.env.JEST_WORKER_ID?Eq():void 0,t;try{t=await WebAssembly.compile(Hte())}catch{t=await WebAssembly.compile(e||Eq())}return await WebAssembly.instantiate(t,{env:{wasm_on_url:(r,n,i)=>0,wasm_on_status:(r,n,i)=>{gt($i.ptr===r);let s=n-Cu+vu.byteOffset;return $i.onStatus(new fD(vu.buffer,s,i))||0},wasm_on_message_begin:r=>(gt($i.ptr===r),$i.onMessageBegin()||0),wasm_on_header_field:(r,n,i)=>{gt($i.ptr===r);let s=n-Cu+vu.byteOffset;return $i.onHeaderField(new fD(vu.buffer,s,i))||0},wasm_on_header_value:(r,n,i)=>{gt($i.ptr===r);let s=n-Cu+vu.byteOffset;return $i.onHeaderValue(new fD(vu.buffer,s,i))||0},wasm_on_headers_complete:(r,n,i,s)=>(gt($i.ptr===r),$i.onHeadersComplete(n,!!i,!!s)||0),wasm_on_body:(r,n,i)=>{gt($i.ptr===r);let s=n-Cu+vu.byteOffset;return $i.onBody(new fD(vu.buffer,s,i))||0},wasm_on_message_complete:r=>(gt($i.ptr===r),$i.onMessageComplete()||0)}})}var Hq=null,$q=i4e();$q.catch();var $i=null,vu=null,gD=0,Cu=null,s4e=0,lE=1,k0=2|lE,mD=4|lE,Yq=8|s4e,Kq=class{constructor(t,r,{exports:n}){gt(Number.isFinite(t[qq])&&t[qq]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(yu.TYPE.RESPONSE),this.client=t,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=t[qq],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=t[e4e]}setTimeout(t,r){t!==this.timeoutValue||r&lE^this.timeoutType&lE?(this.timeout&&(Oq.clearTimeout(this.timeout),this.timeout=null),t&&(r&lE?this.timeout=Oq.setFastTimeout(Gre,t,new WeakRef(this)):(this.timeout=setTimeout(Gre,t,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=t):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(gt(this.ptr!=null),gt($i==null),this.llhttp.llhttp_resume(this.ptr),gt(this.timeoutType===mD),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||r4e),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let t=this.socket.read();if(t===null)break;this.execute(t)}}execute(t){gt(this.ptr!=null),gt($i==null),gt(!this.paused);let{socket:r,llhttp:n}=this;t.length>gD&&(Cu&&n.free(Cu),gD=Math.ceil(t.length/4096)*4096,Cu=n.malloc(gD)),new Uint8Array(n.memory.buffer,Cu,gD).set(t);try{let i;try{vu=t,$i=this,i=n.llhttp_execute(this.ptr,Cu,t.length)}catch(o){throw o}finally{$i=null,vu=null}let s=n.llhttp_get_error_pos(this.ptr)-Cu;if(i===yu.ERROR.PAUSED_UPGRADE)this.onUpgrade(t.slice(s));else if(i===yu.ERROR.PAUSED)this.paused=!0,r.unshift(t.slice(s));else if(i!==yu.ERROR.OK){let o=n.llhttp_get_error_reason(this.ptr),a="";if(o){let l=new Uint8Array(n.memory.buffer,o).indexOf(0);a="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,o,l).toString()+")"}throw new HGe(a,yu.ERROR[i],t.slice(s))}}catch(i){Bt.destroy(r,i)}}destroy(){gt(this.ptr!=null),gt($i==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Oq.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(t){this.statusText=t.toString()}onMessageBegin(){let{socket:t,client:r}=this;if(t.destroyed)return-1;let n=r[vc][r[Cl]];if(!n)return-1;n.onResponseStarted()}onHeaderField(t){let r=this.headers.length;r&1?this.headers[r-1]=Buffer.concat([this.headers[r-1],t]):this.headers.push(t),this.trackHeader(t.length)}onHeaderValue(t){let r=this.headers.length;(r&1)===1?(this.headers.push(t),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],t]);let n=this.headers[r-2];if(n.length===10){let i=Bt.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=t.toString():i==="connection"&&(this.connection+=t.toString())}else n.length===14&&Bt.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=t.toString());this.trackHeader(t.length)}trackHeader(t){this.headersSize+=t,this.headersSize>=this.headersMaxSize&&Bt.destroy(this.socket,new qGe)}onUpgrade(t){let{upgrade:r,client:n,socket:i,headers:s,statusCode:o}=this;gt(r),gt(n[R0]===i),gt(!i.destroyed),gt(!this.paused),gt((s.length&1)===0);let a=n[vc][n[Cl]];gt(a),gt(a.upgrade||a.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(t),i[li].destroy(),i[li]=null,i[Wq]=null,i[bl]=null,n4e(i),n[R0]=null,n[Jre]=null,n[vc][n[Cl]++]=null,n.emit("disconnect",n[zre],[n],new T0("upgrade"));try{a.onUpgrade(o,s,i)}catch(l){Bt.destroy(i,l)}n[lh]()}onHeadersComplete(t,r,n){let{client:i,socket:s,headers:o,statusText:a}=this;if(s.destroyed)return-1;let l=i[vc][i[Cl]];if(!l)return-1;if(gt(!this.upgrade),gt(this.statusCode<200),t===100)return Bt.destroy(s,new AD("bad response",Bt.getSocketInfo(s))),-1;if(r&&!l.upgrade)return Bt.destroy(s,new AD("bad upgrade",Bt.getSocketInfo(s))),-1;if(gt(this.timeoutType===k0),this.statusCode=t,this.shouldKeepAlive=n||l.method==="HEAD"&&!s[$o]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let u=l.bodyTimeout!=null?l.bodyTimeout:i[ZGe];this.setTimeout(u,mD)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return gt(i[Hs]===1),this.upgrade=!0,2;if(r)return gt(i[Hs]===1),this.upgrade=!0,2;if(gt((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[pD]){let u=this.keepAlive?Bt.parseKeepAliveTimeout(this.keepAlive):null;if(u!=null){let f=Math.min(u-i[JGe],i[zGe]);f<=0?s[$o]=!0:i[yD]=f}else i[yD]=i[$Ge]}else s[$o]=!0;let c=l.onHeaders(t,o,this.resume,a)===!1;return l.aborted?-1:l.method==="HEAD"||t<200?1:(s[cE]&&(s[cE]=!1,i[lh]()),c?yu.ERROR.PAUSED:0)}onBody(t){let{client:r,socket:n,statusCode:i,maxResponseSize:s}=this;if(n.destroyed)return-1;let o=r[vc][r[Cl]];if(gt(o),gt(this.timeoutType===mD),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),gt(i>=200),s>-1&&this.bytesRead+t.length>s)return Bt.destroy(n,new WGe),-1;if(this.bytesRead+=t.length,o.onData(t)===!1)return yu.ERROR.PAUSED}onMessageComplete(){let{client:t,socket:r,statusCode:n,upgrade:i,headers:s,contentLength:o,bytesRead:a,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;gt(n>=100),gt((this.headers.length&1)===0);let c=t[vc][t[Cl]];if(gt(c),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(c.method!=="HEAD"&&o&&a!==parseInt(o,10))return Bt.destroy(r,new UGe),-1;if(c.onComplete(s),t[vc][t[Cl]++]=null,r[ch])return gt(t[Hs]===0),Bt.destroy(r,new T0("reset")),yu.ERROR.PAUSED;if(l){if(r[$o]&&t[Hs]===0)return Bt.destroy(r,new T0("reset")),yu.ERROR.PAUSED;t[pD]==null||t[pD]===1?setImmediate(()=>t[lh]()):t[lh]()}else return Bt.destroy(r,new T0("reset")),yu.ERROR.PAUSED}}};function Gre(e){let{socket:t,timeoutType:r,client:n,paused:i}=e.deref();r===k0?(!t[ch]||t.writableNeedDrain||n[Hs]>1)&&(gt(!i,"cannot be paused while waiting for headers"),Bt.destroy(t,new OGe)):r===mD?i||Bt.destroy(t,new VGe):r===Yq&&(gt(n[Hs]===0&&n[yD]),Bt.destroy(t,new T0("socket idle timeout")))}async function o4e(e,t){e[R0]=t,Hq||(Hq=await $q,$q=null),t[aE]=!1,t[ch]=!1,t[$o]=!1,t[cE]=!1,t[li]=new Kq(e,t,Hq),hD(t,"error",function(n){gt(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[li];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[bl]=n,this[Wq][t4e](n)}),hD(t,"readable",function(){let n=this[li];n&&n.readMore()}),hD(t,"end",function(){let n=this[li];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}Bt.destroy(this,new AD("other side closed",Bt.getSocketInfo(this)))}),hD(t,"close",function(){let n=this[Wq],i=this[li];i&&(!this[bl]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[li].destroy(),this[li]=null);let s=this[bl]||new AD("closed",Bt.getSocketInfo(this));if(n[R0]=null,n[Jre]=null,n.destroyed){gt(n[GGe]===0);let o=n[vc].splice(n[Cl]);for(let a=0;a<o.length;a++){let l=o[a];Bt.errorRequest(n,l,s)}}else if(n[Hs]>0&&s.code!=="UND_ERR_INFO"){let o=n[vc][n[Cl]];n[vc][n[Cl]++]=null,Bt.errorRequest(n,o,s)}n[KGe]=n[Cl],gt(n[Hs]===0),n.emit("disconnect",n[zre],[n],s),n[lh]()});let r=!1;return t.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return c4e(e,...n)},resume(){a4e(e)},destroy(n,i){r?queueMicrotask(i):t.destroy(n).on("close",i)},get destroyed(){return t.destroyed},busy(n){return!!(t[ch]||t[$o]||t[cE]||n&&(e[Hs]>0&&!n.idempotent||e[Hs]>0&&(n.upgrade||n.method==="CONNECT")||e[Hs]>0&&Bt.bodyLength(n.body)!==0&&(Bt.isStream(n.body)||Bt.isAsyncIterable(n.body)||Bt.isFormDataLike(n.body))))}}}function a4e(e){let t=e[R0];if(t&&!t.destroyed){if(e[Hre]===0?!t[aE]&&t.unref&&(t.unref(),t[aE]=!0):t[aE]&&t.ref&&(t.ref(),t[aE]=!1),e[Hre]===0)t[li].timeoutType!==Yq&&t[li].setTimeout(e[yD],Yq);else if(e[Hs]>0&&t[li].statusCode<200&&t[li].timeoutType!==k0){let r=e[vc][e[Cl]],n=r.headersTimeout!=null?r.headersTimeout:e[jGe];t[li].setTimeout(n,k0)}}}function l4e(e){return e!=="GET"&&e!=="HEAD"&&e!=="OPTIONS"&&e!=="TRACE"&&e!=="CONNECT"}function c4e(e,t){let{method:r,path:n,host:i,upgrade:s,blocking:o,reset:a}=t,{body:l,headers:c,contentLength:u}=t,f=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(Bt.isFormDataLike(l)){Vq||(Vq=D0().extractBody);let[v,C]=Vq(l);t.contentType==null&&c.push("content-type",C),l=v.stream,u=v.length}else Bt.isBlobLike(l)&&t.contentType==null&&l.type&&c.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let p=Bt.bodyLength(l);if(u=p??u,u===null&&(u=t.contentLength),u===0&&!f&&(u=null),l4e(r)&&u>0&&t.contentLength!==null&&t.contentLength!==u){if(e[Gq])return Bt.errorRequest(e,t,new Ep),!1;process.emitWarning(new Ep)}let g=e[R0],m=v=>{t.aborted||t.completed||(Bt.errorRequest(e,t,v||new Kre),Bt.destroy(l),Bt.destroy(g,new T0("aborted")))};try{t.onConnect(m)}catch(v){Bt.errorRequest(e,t,v)}if(t.aborted)return!1;r==="HEAD"&&(g[$o]=!0),(s||r==="CONNECT")&&(g[$o]=!0),a!=null&&(g[$o]=a),e[Wre]&&g[XGe]++>=e[Wre]&&(g[$o]=!0),o&&(g[cE]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=e[YGe],s?y+=`connection: upgrade\r
upgrade: ${s}\r
`:e[pD]&&!g[$o]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(c))for(let v=0;v<c.length;v+=2){let C=c[v+0],E=c[v+1];if(Array.isArray(E))for(let w=0;w<E.length;w++)y+=`${C}: ${E[w]}\r
`;else y+=`${C}: ${E}\r
`}return Vre.sendHeaders.hasSubscribers&&Vre.sendHeaders.publish({request:t,headers:y,socket:g}),!l||p===0?$re(m,null,e,t,g,u,y,f):Bt.isBuffer(l)?$re(m,l,e,t,g,u,y,f):Bt.isBlobLike(l)?typeof l.stream=="function"?Yre(m,l.stream(),e,t,g,u,y,f):d4e(m,l,e,t,g,u,y,f):Bt.isStream(l)?u4e(m,l,e,t,g,u,y,f):Bt.isIterable(l)?Yre(m,l,e,t,g,u,y,f):gt(!1),!0}function u4e(e,t,r,n,i,s,o,a){gt(s!==0||r[Hs]===0,"stream body cannot be pipelined");let l=!1,c=new vD({abort:e,socket:i,request:n,contentLength:s,client:r,expectsPayload:a,header:o}),u=function(m){if(!l)try{!c.write(m)&&this.pause&&this.pause()}catch(y){Bt.destroy(this,y)}},f=function(){l||t.resume&&t.resume()},p=function(){if(queueMicrotask(()=>{t.removeListener("error",g)}),!l){let m=new Kre;queueMicrotask(()=>g(m))}},g=function(m){if(!l){if(l=!0,gt(i.destroyed||i[ch]&&r[Hs]<=1),i.off("drain",f).off("error",g),t.removeListener("data",u).removeListener("end",g).removeListener("close",p),!m)try{c.end()}catch(y){m=y}c.destroy(m),m&&(m.code!=="UND_ERR_INFO"||m.message!=="reset")?Bt.destroy(t,m):Bt.destroy(t)}};t.on("data",u).on("end",g).on("error",g).on("close",p),t.resume&&t.resume(),i.on("drain",f).on("error",g),t.errorEmitted??t.errored?setImmediate(()=>g(t.errored)):(t.endEmitted??t.readableEnded)&&setImmediate(()=>g(null)),(t.closeEmitted??t.closed)&&setImmediate(p)}function $re(e,t,r,n,i,s,o,a){try{t?Bt.isBuffer(t)&&(gt(s===t.byteLength,"buffer body must have content length"),i.cork(),i.write(`${o}content-length: ${s}\r
\r
`,"latin1"),i.write(t),i.uncork(),n.onBodySent(t),!a&&n.reset!==!1&&(i[$o]=!0)):s===0?i.write(`${o}content-length: 0\r
\r
`,"latin1"):(gt(s===null,"no body must not have content length"),i.write(`${o}\r
`,"latin1")),n.onRequestSent(),r[lh]()}catch(l){e(l)}}async function d4e(e,t,r,n,i,s,o,a){gt(s===t.size,"blob body must have content length");try{if(s!=null&&s!==t.size)throw new Ep;let l=Buffer.from(await t.arrayBuffer());i.cork(),i.write(`${o}content-length: ${s}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!a&&n.reset!==!1&&(i[$o]=!0),r[lh]()}catch(l){e(l)}}async function Yre(e,t,r,n,i,s,o,a){gt(s!==0||r[Hs]===0,"iterator body cannot be pipelined");let l=null;function c(){if(l){let p=l;l=null,p()}}let u=()=>new Promise((p,g)=>{gt(l===null),i[bl]?g(i[bl]):l=p});i.on("close",c).on("drain",c);let f=new vD({abort:e,socket:i,request:n,contentLength:s,client:r,expectsPayload:a,header:o});try{for await(let p of t){if(i[bl])throw i[bl];f.write(p)||await u()}f.end()}catch(p){f.destroy(p)}finally{i.off("close",c).off("drain",c)}}var vD=class{constructor({abort:t,socket:r,request:n,contentLength:i,client:s,expectsPayload:o,header:a}){this.socket=r,this.request=n,this.contentLength=i,this.client=s,this.bytesWritten=0,this.expectsPayload=o,this.header=a,this.abort=t,r[ch]=!0}write(t){let{socket:r,request:n,contentLength:i,client:s,bytesWritten:o,expectsPayload:a,header:l}=this;if(r[bl])throw r[bl];if(r.destroyed)return!1;let c=Buffer.byteLength(t);if(!c)return!0;if(i!==null&&o+c>i){if(s[Gq])throw new Ep;process.emitWarning(new Ep)}r.cork(),o===0&&(!a&&n.reset!==!1&&(r[$o]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${c.toString(16)}\r
`,"latin1"),this.bytesWritten+=c;let u=r.write(t);return r.uncork(),n.onBodySent(t),u||r[li].timeout&&r[li].timeoutType===k0&&r[li].timeout.refresh&&r[li].timeout.refresh(),u}end(){let{socket:t,contentLength:r,client:n,bytesWritten:i,expectsPayload:s,header:o,request:a}=this;if(a.onRequestSent(),t[ch]=!1,t[bl])throw t[bl];if(!t.destroyed){if(i===0?s?t.write(`${o}content-length: 0\r
\r
`,"latin1"):t.write(`${o}\r
`,"latin1"):r===null&&t.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[Gq])throw new Ep;process.emitWarning(new Ep)}t[li].timeout&&t[li].timeoutType===k0&&t[li].timeout.refresh&&t[li].timeout.refresh(),n[lh]()}}destroy(t){let{socket:r,client:n,abort:i}=this;r[ch]=!1,t&&(gt(n[Hs]<=1,"pipeline should only contain this request"),i(t))}};jre.exports=o4e});var one=_((ZDt,sne)=>{"use strict";var El=require("assert"),{pipeline:f4e}=require("stream"),Ar=nr(),{RequestContentLengthMismatchError:zq,RequestAbortedError:Xre,SocketError:uE,InformationalError:Jq}=zr(),{kUrl:CD,kReset:ED,kClient:M0,kRunning:_D,kPending:h4e,kQueue:uh,kPendingIdx:jq,kRunningIdx:Cc,kError:Ec,kSocket:rs,kStrictContentLength:g4e,kOnError:Zq,kMaxConcurrentStreams:ine,kHTTP2Session:bc,kResume:dh,kSize:p4e,kHTTPContext:m4e}=Gn(),Ud=Symbol("open streams"),ene,tne=!1,bD;try{bD=require("http2")}catch{bD={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:A4e,HTTP2_HEADER_METHOD:y4e,HTTP2_HEADER_PATH:v4e,HTTP2_HEADER_SCHEME:C4e,HTTP2_HEADER_CONTENT_LENGTH:b4e,HTTP2_HEADER_EXPECT:E4e,HTTP2_HEADER_STATUS:_4e}}=bD;function x4e(e){let t=[];for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let i of n)t.push(Buffer.from(r),Buffer.from(i));else t.push(Buffer.from(r),Buffer.from(n));return t}async function w4e(e,t){e[rs]=t,tne||(tne=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=bD.connect(e[CD],{createConnection:()=>t,peerMaxConcurrentStreams:e[ine]});r[Ud]=0,r[M0]=e,r[rs]=t,Ar.addListener(r,"error",I4e),Ar.addListener(r,"frameError",B4e),Ar.addListener(r,"end",D4e),Ar.addListener(r,"goaway",T4e),Ar.addListener(r,"close",function(){let{[M0]:i}=this,{[rs]:s}=i,o=this[rs][Ec]||this[Ec]||new uE("closed",Ar.getSocketInfo(s));if(i[bc]=null,i.destroyed){El(i[h4e]===0);let a=i[uh].splice(i[Cc]);for(let l=0;l<a.length;l++){let c=a[l];Ar.errorRequest(i,c,o)}}}),r.unref(),e[bc]=r,t[bc]=r,Ar.addListener(t,"error",function(i){El(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Ec]=i,this[M0][Zq](i)}),Ar.addListener(t,"end",function(){Ar.destroy(this,new uE("other side closed",Ar.getSocketInfo(this)))}),Ar.addListener(t,"close",function(){let i=this[Ec]||new uE("closed",Ar.getSocketInfo(this));e[rs]=null,this[bc]!=null&&this[bc].destroy(i),e[jq]=e[Cc],El(e[_D]===0),e.emit("disconnect",e[CD],[e],i),e[dh]()});let n=!1;return t.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return k4e(e,...i)},resume(){S4e(e)},destroy(i,s){n?queueMicrotask(s):t.destroy(i).on("close",s)},get destroyed(){return t.destroyed},busy(){return!1}}}function S4e(e){let t=e[rs];t?.destroyed===!1&&(e[p4e]===0&&e[ine]===0?(t.unref(),e[bc].unref()):(t.ref(),e[bc].ref()))}function I4e(e){El(e.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[rs][Ec]=e,this[M0][Zq](e)}function B4e(e,t,r){if(r===0){let n=new Jq(`HTTP/2: "frameError" received - type ${e}, code ${t}`);this[rs][Ec]=n,this[M0][Zq](n)}}function D4e(){let e=new uE("other side closed",Ar.getSocketInfo(this[rs]));this.destroy(e),Ar.destroy(this[rs],e)}function T4e(e){let t=this[Ec]||new uE(`HTTP/2: "GOAWAY" frame received with code ${e}`,Ar.getSocketInfo(this)),r=this[M0];if(r[rs]=null,r[m4e]=null,this[bc]!=null&&(this[bc].destroy(t),this[bc]=null),Ar.destroy(this[rs],t),r[Cc]<r[uh].length){let n=r[uh][r[Cc]];r[uh][r[Cc]++]=null,Ar.errorRequest(r,n,t),r[jq]=r[Cc]}El(r[_D]===0),r.emit("disconnect",r[CD],[r],t),r[dh]()}function R4e(e){return e!=="GET"&&e!=="HEAD"&&e!=="OPTIONS"&&e!=="TRACE"&&e!=="CONNECT"}function k4e(e,t){let r=e[bc],{method:n,path:i,host:s,upgrade:o,expectContinue:a,signal:l,headers:c}=t,{body:u}=t;if(o)return Ar.errorRequest(e,t,new Error("Upgrade not supported for H2")),!1;let f={};for(let B=0;B<c.length;B+=2){let R=c[B+0],N=c[B+1];if(Array.isArray(N))for(let W=0;W<N.length;W++)f[R]?f[R]+=`,${N[W]}`:f[R]=N[W];else f[R]=N}let p,{hostname:g,port:m}=e[CD];f[A4e]=s||`${g}${m?`:${m}`:""}`,f[y4e]=n;let y=B=>{t.aborted||t.completed||(B=B||new Xre,Ar.errorRequest(e,t,B),p!=null&&Ar.destroy(p,B),Ar.destroy(u,B),e[uh][e[Cc]++]=null,e[dh]())};try{t.onConnect(y)}catch(B){Ar.errorRequest(e,t,B)}if(t.aborted)return!1;if(n==="CONNECT")return r.ref(),p=r.request(f,{endStream:!1,signal:l}),p.id&&!p.pending?(t.onUpgrade(null,null,p),++r[Ud],e[uh][e[Cc]++]=null):p.once("ready",()=>{t.onUpgrade(null,null,p),++r[Ud],e[uh][e[Cc]++]=null}),p.once("close",()=>{r[Ud]-=1,r[Ud]===0&&r.unref()}),!0;f[v4e]=i,f[C4e]="https";let v=n==="PUT"||n==="POST"||n==="PATCH";u&&typeof u.read=="function"&&u.read(0);let C=Ar.bodyLength(u);if(Ar.isFormDataLike(u)){ene??=D0().extractBody;let[B,R]=ene(u);f["content-type"]=R,u=B.stream,C=B.length}if(C==null&&(C=t.contentLength),(C===0||!v)&&(C=null),R4e(n)&&C>0&&t.contentLength!=null&&t.contentLength!==C){if(e[g4e])return Ar.errorRequest(e,t,new zq),!1;process.emitWarning(new zq)}C!=null&&(El(u,"no body must not have content length"),f[b4e]=`${C}`),r.ref();let E=n==="GET"||n==="HEAD"||u===null;return a?(f[E4e]="100-continue",p=r.request(f,{endStream:E,signal:l}),p.once("continue",w)):(p=r.request(f,{endStream:E,signal:l}),w()),++r[Ud],p.once("response",B=>{let{[_4e]:R,...N}=B;if(t.onResponseStarted(),t.aborted){let W=new Xre;Ar.errorRequest(e,t,W),Ar.destroy(p,W);return}t.onHeaders(Number(R),x4e(N),p.resume.bind(p),"")===!1&&p.pause(),p.on("data",W=>{t.onData(W)===!1&&p.pause()})}),p.once("end",()=>{(p.state?.state==null||p.state.state<6)&&t.onComplete([]),r[Ud]===0&&r.unref(),y(new Jq("HTTP/2: stream half-closed (remote)")),e[uh][e[Cc]++]=null,e[jq]=e[Cc],e[dh]()}),p.once("close",()=>{r[Ud]-=1,r[Ud]===0&&r.unref()}),p.once("error",function(B){y(B)}),p.once("frameError",(B,R)=>{y(new Jq(`HTTP/2: "frameError" received - type ${B}, code ${R}`))}),!0;function w(){!u||C===0?rne(y,p,null,e,t,e[rs],C,v):Ar.isBuffer(u)?rne(y,p,u,e,t,e[rs],C,v):Ar.isBlobLike(u)?typeof u.stream=="function"?nne(y,p,u.stream(),e,t,e[rs],C,v):F4e(y,p,u,e,t,e[rs],C,v):Ar.isStream(u)?M4e(y,e[rs],v,p,u,e,t,C):Ar.isIterable(u)?nne(y,p,u,e,t,e[rs],C,v):El(!1)}}function rne(e,t,r,n,i,s,o,a){try{r!=null&&Ar.isBuffer(r)&&(El(o===r.byteLength,"buffer body must have content length"),t.cork(),t.write(r),t.uncork(),t.end(),i.onBodySent(r)),a||(s[ED]=!0),i.onRequestSent(),n[dh]()}catch(l){e(l)}}function M4e(e,t,r,n,i,s,o,a){El(a!==0||s[_D]===0,"stream body cannot be pipelined");let l=f4e(i,n,u=>{u?(Ar.destroy(l,u),e(u)):(Ar.removeAllListeners(l),o.onRequestSent(),r||(t[ED]=!0),s[dh]())});Ar.addListener(l,"data",c);function c(u){o.onBodySent(u)}}async function F4e(e,t,r,n,i,s,o,a){El(o===r.size,"blob body must have content length");try{if(o!=null&&o!==r.size)throw new zq;let l=Buffer.from(await r.arrayBuffer());t.cork(),t.write(l),t.uncork(),t.end(),i.onBodySent(l),i.onRequestSent(),a||(s[ED]=!0),n[dh]()}catch(l){e(l)}}async function nne(e,t,r,n,i,s,o,a){El(o!==0||n[_D]===0,"iterator body cannot be pipelined");let l=null;function c(){if(l){let f=l;l=null,f()}}let u=()=>new Promise((f,p)=>{El(l===null),s[Ec]?p(s[Ec]):l=f});t.on("close",c).on("drain",c);try{for await(let f of r){if(s[Ec])throw s[Ec];let p=t.write(f);i.onBodySent(f),p||await u()}t.end(),i.onRequestSent(),a||(s[ED]=!0),n[dh]()}catch(f){e(f)}finally{t.off("close",c).off("drain",c)}}sne.exports=w4e});var wD=_((XDt,cne)=>{"use strict";var bu=nr(),{kBodyUsed:dE}=Gn(),eV=require("assert"),{InvalidArgumentError:Q4e}=zr(),N4e=require("events"),P4e=[300,301,302,303,307,308],ane=Symbol("body"),xD=class{constructor(t){this[ane]=t,this[dE]=!1}async*[Symbol.asyncIterator](){eV(!this[dE],"disturbed"),this[dE]=!0,yield*this[ane]}},Xq=class{constructor(t,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new Q4e("maxRedirections must be a positive number");bu.validateHandler(i,n.method,n.upgrade),this.dispatch=t,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,bu.isStream(this.opts.body)?(bu.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){eV(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[dE]=!1,N4e.prototype.on.call(this.opts.body,"data",function(){this[dE]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new xD(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&bu.isIterable(this.opts.body)&&(this.opts.body=new xD(this.opts.body))}onConnect(t){this.abort=t,this.handler.onConnect(t,{history:this.history})}onUpgrade(t,r,n){this.handler.onUpgrade(t,r,n)}onError(t){this.handler.onError(t)}onHeaders(t,r,n,i){if(this.location=this.history.length>=this.maxRedirections||bu.isDisturbed(this.opts.body)?null:L4e(t,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(t,r,n,i);let{origin:s,pathname:o,search:a}=bu.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=a?`${o}${a}`:o;this.opts.headers=U4e(this.opts.headers,t===303,this.opts.origin!==s),this.opts.path=l,this.opts.origin=s,this.opts.maxRedirections=0,this.opts.query=null,t===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(t){if(!this.location)return this.handler.onData(t)}onComplete(t){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(t)}onBodySent(t){this.handler.onBodySent&&this.handler.onBodySent(t)}};function L4e(e,t){if(P4e.indexOf(e)===-1)return null;for(let r=0;r<t.length;r+=2)if(t[r].length===8&&bu.headerNameToString(t[r])==="location")return t[r+1]}function lne(e,t,r){if(e.length===4)return bu.headerNameToString(e)==="host";if(t&&bu.headerNameToString(e).startsWith("content-"))return!0;if(r&&(e.length===13||e.length===6||e.length===19)){let n=bu.headerNameToString(e);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}function U4e(e,t,r){let n=[];if(Array.isArray(e))for(let i=0;i<e.length;i+=2)lne(e[i],t,r)||n.push(e[i],e[i+1]);else if(e&&typeof e=="object")for(let i of Object.keys(e))lne(i,t,r)||n.push(i,e[i]);else eV(e==null,"headers must be an object or an array");return n}cne.exports=Xq});var SD=_((eTt,une)=>{"use strict";var O4e=wD();function q4e({maxRedirections:e}){return t=>function(n,i){let{maxRedirections:s=e}=n;if(!s)return t(n,i);let o=new O4e(t,s,n,i);return n={...n,maxRedirections:0},t(n,o)}}une.exports=q4e});var yE=_((tTt,Cne)=>{"use strict";var Od=require("assert"),mne=require("net"),V4e=require("http"),_p=nr(),{channels:F0}=m0(),H4e=Ite(),W4e=C0(),{InvalidArgumentError:_i,InformationalError:G4e,ClientDestroyedError:$4e}=zr(),Y4e=Zb(),{kUrl:Eu,kServerName:fh,kClient:K4e,kBusy:tV,kConnect:z4e,kResuming:xp,kRunning:mE,kPending:AE,kSize:pE,kQueue:_c,kConnected:J4e,kConnecting:Q0,kNeedDrain:gh,kKeepAliveDefaultTimeout:dne,kHostHeader:j4e,kPendingIdx:xc,kRunningIdx:qd,kError:Z4e,kPipelining:ID,kKeepAliveTimeoutValue:X4e,kMaxHeadersSize:e8e,kKeepAliveMaxTimeout:t8e,kKeepAliveTimeoutThreshold:r8e,kHeadersTimeout:n8e,kBodyTimeout:i8e,kStrictContentLength:s8e,kConnector:fE,kMaxRedirections:o8e,kMaxRequests:rV,kCounter:a8e,kClose:l8e,kDestroy:c8e,kDispatch:u8e,kInterceptors:fne,kLocalAddress:hE,kMaxResponseSize:d8e,kOnError:f8e,kHTTPContext:xi,kMaxConcurrentStreams:h8e,kResume:gE}=Gn(),g8e=Zre(),p8e=one(),hne=!1,hh=Symbol("kClosedResolve"),gne=()=>{};function Ane(e){return e[ID]??e[xi]?.defaultPipelining??1}var nV=class extends W4e{constructor(t,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:s,requestTimeout:o,connectTimeout:a,bodyTimeout:l,idleTimeout:c,keepAlive:u,keepAliveTimeout:f,maxKeepAliveTimeout:p,keepAliveMaxTimeout:g,keepAliveTimeoutThreshold:m,socketPath:y,pipelining:v,tls:C,strictContentLength:E,maxCachedSessions:w,maxRedirections:B,connect:R,maxRequestsPerClient:N,localAddress:W,maxResponseSize:Z,autoSelectFamily:te,autoSelectFamilyAttemptTimeout:Y,maxConcurrentStreams:U,allowH2:ce}={}){if(super(),u!==void 0)throw new _i("unsupported keepAlive, use pipelining=0 instead");if(s!==void 0)throw new _i("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(o!==void 0)throw new _i("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(c!==void 0)throw new _i("unsupported idleTimeout, use keepAliveTimeout instead");if(p!==void 0)throw new _i("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new _i("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new _i("invalid socketPath");if(a!=null&&(!Number.isFinite(a)||a<0))throw new _i("invalid connectTimeout");if(f!=null&&(!Number.isFinite(f)||f<=0))throw new _i("invalid keepAliveTimeout");if(g!=null&&(!Number.isFinite(g)||g<=0))throw new _i("invalid keepAliveMaxTimeout");if(m!=null&&!Number.isFinite(m))throw new _i("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new _i("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new _i("bodyTimeout must be a positive integer or zero");if(R!=null&&typeof R!="function"&&typeof R!="object")throw new _i("connect must be a function or an object");if(B!=null&&(!Number.isInteger(B)||B<0))throw new _i("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new _i("maxRequestsPerClient must be a positive number");if(W!=null&&(typeof W!="string"||mne.isIP(W)===0))throw new _i("localAddress must be valid string IP address");if(Z!=null&&(!Number.isInteger(Z)||Z<-1))throw new _i("maxResponseSize must be a positive number");if(Y!=null&&(!Number.isInteger(Y)||Y<-1))throw new _i("autoSelectFamilyAttemptTimeout must be a positive number");if(ce!=null&&typeof ce!="boolean")throw new _i("allowH2 must be a valid boolean value");if(U!=null&&(typeof U!="number"||U<1))throw new _i("maxConcurrentStreams must be a positive integer, greater than 0");typeof R!="function"&&(R=Y4e({...C,maxCachedSessions:w,allowH2:ce,socketPath:y,timeout:a,...te?{autoSelectFamily:te,autoSelectFamilyAttemptTimeout:Y}:void 0,...R})),r?.Client&&Array.isArray(r.Client)?(this[fne]=r.Client,hne||(hne=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[fne]=[m8e({maxRedirections:B})],this[Eu]=_p.parseOrigin(t),this[fE]=R,this[ID]=v??1,this[e8e]=n||V4e.maxHeaderSize,this[dne]=f??4e3,this[t8e]=g??6e5,this[r8e]=m??2e3,this[X4e]=this[dne],this[fh]=null,this[hE]=W??null,this[xp]=0,this[gh]=0,this[j4e]=`host: ${this[Eu].hostname}${this[Eu].port?`:${this[Eu].port}`:""}\r
`,this[i8e]=l??3e5,this[n8e]=i??3e5,this[s8e]=E??!0,this[o8e]=B,this[rV]=N,this[hh]=null,this[d8e]=Z>-1?Z:-1,this[h8e]=U??100,this[xi]=null,this[_c]=[],this[qd]=0,this[xc]=0,this[gE]=Ie=>iV(this,Ie),this[f8e]=Ie=>yne(this,Ie)}get pipelining(){return this[ID]}set pipelining(t){this[ID]=t,this[gE](!0)}get[AE](){return this[_c].length-this[xc]}get[mE](){return this[xc]-this[qd]}get[pE](){return this[_c].length-this[qd]}get[J4e](){return!!this[xi]&&!this[Q0]&&!this[xi].destroyed}get[tV](){return!!(this[xi]?.busy(null)||this[pE]>=(Ane(this)||1)||this[AE]>0)}[z4e](t){vne(this),this.once("connect",t)}[u8e](t,r){let n=t.origin||this[Eu].origin,i=new H4e(n,t,r);return this[_c].push(i),this[xp]||(_p.bodyLength(i.body)==null&&_p.isIterable(i.body)?(this[xp]=1,queueMicrotask(()=>iV(this))):this[gE](!0)),this[xp]&&this[gh]!==2&&this[tV]&&(this[gh]=2),this[gh]<2}async[l8e](){return new Promise(t=>{this[pE]?this[hh]=t:t(null)})}async[c8e](t){return new Promise(r=>{let n=this[_c].splice(this[xc]);for(let s=0;s<n.length;s++){let o=n[s];_p.errorRequest(this,o,t)}let i=()=>{this[hh]&&(this[hh](),this[hh]=null),r(null)};this[xi]?(this[xi].destroy(t,i),this[xi]=null):queueMicrotask(i),this[gE]()})}},m8e=SD();function yne(e,t){if(e[mE]===0&&t.code!=="UND_ERR_INFO"&&t.code!=="UND_ERR_SOCKET"){Od(e[xc]===e[qd]);let r=e[_c].splice(e[qd]);for(let n=0;n<r.length;n++){let i=r[n];_p.errorRequest(e,i,t)}Od(e[pE]===0)}}async function vne(e){Od(!e[Q0]),Od(!e[xi]);let{host:t,hostname:r,protocol:n,port:i}=e[Eu];if(r[0]==="["){let s=r.indexOf("]");Od(s!==-1);let o=r.substring(1,s);Od(mne.isIP(o)),r=o}e[Q0]=!0,F0.beforeConnect.hasSubscribers&&F0.beforeConnect.publish({connectParams:{host:t,hostname:r,protocol:n,port:i,version:e[xi]?.version,servername:e[fh],localAddress:e[hE]},connector:e[fE]});try{let s=await new Promise((o,a)=>{e[fE]({host:t,hostname:r,protocol:n,port:i,servername:e[fh],localAddress:e[hE]},(l,c)=>{l?a(l):o(c)})});if(e.destroyed){_p.destroy(s.on("error",gne),new $4e);return}Od(s);try{e[xi]=s.alpnProtocol==="h2"?await p8e(e,s):await g8e(e,s)}catch(o){throw s.destroy().on("error",gne),o}e[Q0]=!1,s[a8e]=0,s[rV]=e[rV],s[K4e]=e,s[Z4e]=null,F0.connected.hasSubscribers&&F0.connected.publish({connectParams:{host:t,hostname:r,protocol:n,port:i,version:e[xi]?.version,servername:e[fh],localAddress:e[hE]},connector:e[fE],socket:s}),e.emit("connect",e[Eu],[e])}catch(s){if(e.destroyed)return;if(e[Q0]=!1,F0.connectError.hasSubscribers&&F0.connectError.publish({connectParams:{host:t,hostname:r,protocol:n,port:i,version:e[xi]?.version,servername:e[fh],localAddress:e[hE]},connector:e[fE],error:s}),s.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(Od(e[mE]===0);e[AE]>0&&e[_c][e[xc]].servername===e[fh];){let o=e[_c][e[xc]++];_p.errorRequest(e,o,s)}else yne(e,s);e.emit("connectionError",e[Eu],[e],s)}e[gE]()}function pne(e){e[gh]=0,e.emit("drain",e[Eu],[e])}function iV(e,t){e[xp]!==2&&(e[xp]=2,A8e(e,t),e[xp]=0,e[qd]>256&&(e[_c].splice(0,e[qd]),e[xc]-=e[qd],e[qd]=0))}function A8e(e,t){for(;;){if(e.destroyed){Od(e[AE]===0);return}if(e[hh]&&!e[pE]){e[hh](),e[hh]=null;return}if(e[xi]&&e[xi].resume(),e[tV])e[gh]=2;else if(e[gh]===2){t?(e[gh]=1,queueMicrotask(()=>pne(e))):pne(e);continue}if(e[AE]===0||e[mE]>=(Ane(e)||1))return;let r=e[_c][e[xc]];if(e[Eu].protocol==="https:"&&e[fh]!==r.servername){if(e[mE]>0)return;e[fh]=r.servername,e[xi]?.destroy(new G4e("servername changed"),()=>{e[xi]=null,iV(e)})}if(e[Q0])return;if(!e[xi]){vne(e);return}if(e[xi].destroyed||e[xi].busy(r))return;!r.aborted&&e[xi].write(r)?e[xc]++:e[_c].splice(e[xc],1)}}Cne.exports=nV});var sV=_((nTt,bne)=>{"use strict";var BD=class{constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(t){this.list[this.top]=t,this.top=this.top+1&2047}shift(){let t=this.list[this.bottom];return t===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,t)}};bne.exports=class{constructor(){this.head=this.tail=new BD}isEmpty(){return this.head.isEmpty()}push(t){this.head.isFull()&&(this.head=this.head.next=new BD),this.head.push(t)}shift(){let t=this.tail,r=t.shift();return t.isEmpty()&&t.next!==null&&(this.tail=t.next),r}}});var _ne=_((iTt,Ene)=>{"use strict";var{kFree:y8e,kConnected:v8e,kPending:C8e,kQueued:b8e,kRunning:E8e,kSize:_8e}=Gn(),wp=Symbol("pool"),oV=class{constructor(t){this[wp]=t}get connected(){return this[wp][v8e]}get free(){return this[wp][y8e]}get pending(){return this[wp][C8e]}get queued(){return this[wp][b8e]}get running(){return this[wp][E8e]}get size(){return this[wp][_8e]}};Ene.exports=oV});var fV=_((sTt,Mne)=>{"use strict";var x8e=C0(),w8e=sV(),{kConnected:aV,kSize:xne,kRunning:wne,kPending:Sne,kQueued:vE,kBusy:S8e,kFree:I8e,kUrl:B8e,kClose:D8e,kDestroy:T8e,kDispatch:R8e}=Gn(),k8e=_ne(),Yo=Symbol("clients"),mo=Symbol("needDrain"),CE=Symbol("queue"),lV=Symbol("closed resolve"),cV=Symbol("onDrain"),Ine=Symbol("onConnect"),Bne=Symbol("onDisconnect"),Dne=Symbol("onConnectionError"),uV=Symbol("get dispatcher"),Rne=Symbol("add client"),kne=Symbol("remove client"),Tne=Symbol("stats"),dV=class extends x8e{constructor(){super(),this[CE]=new w8e,this[Yo]=[],this[vE]=0;let t=this;this[cV]=function(n,i){let s=t[CE],o=!1;for(;!o;){let a=s.shift();if(!a)break;t[vE]--,o=!this.dispatch(a.opts,a.handler)}this[mo]=o,!this[mo]&&t[mo]&&(t[mo]=!1,t.emit("drain",n,[t,...i])),t[lV]&&s.isEmpty()&&Promise.all(t[Yo].map(a=>a.close())).then(t[lV])},this[Ine]=(r,n)=>{t.emit("connect",r,[t,...n])},this[Bne]=(r,n,i)=>{t.emit("disconnect",r,[t,...n],i)},this[Dne]=(r,n,i)=>{t.emit("connectionError",r,[t,...n],i)},this[Tne]=new k8e(this)}get[S8e](){return this[mo]}get[aV](){return this[Yo].filter(t=>t[aV]).length}get[I8e](){return this[Yo].filter(t=>t[aV]&&!t[mo]).length}get[Sne](){let t=this[vE];for(let{[Sne]:r}of this[Yo])t+=r;return t}get[wne](){let t=0;for(let{[wne]:r}of this[Yo])t+=r;return t}get[xne](){let t=this[vE];for(let{[xne]:r}of this[Yo])t+=r;return t}get stats(){return this[Tne]}async[D8e](){this[CE].isEmpty()?await Promise.all(this[Yo].map(t=>t.close())):await new Promise(t=>{this[lV]=t})}async[T8e](t){for(;;){let r=this[CE].shift();if(!r)break;r.handler.onError(t)}await Promise.all(this[Yo].map(r=>r.destroy(t)))}[R8e](t,r){let n=this[uV]();return n?n.dispatch(t,r)||(n[mo]=!0,this[mo]=!this[uV]()):(this[mo]=!0,this[CE].push({opts:t,handler:r}),this[vE]++),!this[mo]}[Rne](t){return t.on("drain",this[cV]).on("connect",this[Ine]).on("disconnect",this[Bne]).on("connectionError",this[Dne]),this[Yo].push(t),this[mo]&&queueMicrotask(()=>{this[mo]&&this[cV](t[B8e],[this,t])}),this}[kne](t){t.close(()=>{let r=this[Yo].indexOf(t);r!==-1&&this[Yo].splice(r,1)}),this[mo]=this[Yo].some(r=>!r[mo]&&r.closed!==!0&&r.destroyed!==!0)}};Mne.exports={PoolBase:dV,kClients:Yo,kNeedDrain:mo,kAddClient:Rne,kRemoveClient:kne,kGetDispatcher:uV}});var N0=_((oTt,Lne)=>{"use strict";var{PoolBase:M8e,kClients:Fne,kNeedDrain:F8e,kAddClient:Q8e,kGetDispatcher:N8e}=fV(),P8e=yE(),{InvalidArgumentError:hV}=zr(),Qne=nr(),{kUrl:Nne,kInterceptors:L8e}=Gn(),U8e=Zb(),gV=Symbol("options"),pV=Symbol("connections"),Pne=Symbol("factory");function O8e(e,t){return new P8e(e,t)}var mV=class extends M8e{constructor(t,{connections:r,factory:n=O8e,connect:i,connectTimeout:s,tls:o,maxCachedSessions:a,socketPath:l,autoSelectFamily:c,autoSelectFamilyAttemptTimeout:u,allowH2:f,...p}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new hV("invalid connections");if(typeof n!="function")throw new hV("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new hV("connect must be a function or an object");typeof i!="function"&&(i=U8e({...o,maxCachedSessions:a,allowH2:f,socketPath:l,timeout:s,...c?{autoSelectFamily:c,autoSelectFamilyAttemptTimeout:u}:void 0,...i})),this[L8e]=p.interceptors?.Pool&&Array.isArray(p.interceptors.Pool)?p.interceptors.Pool:[],this[pV]=r||null,this[Nne]=Qne.parseOrigin(t),this[gV]={...Qne.deepClone(p),connect:i,allowH2:f},this[gV].interceptors=p.interceptors?{...p.interceptors}:void 0,this[Pne]=n}[N8e](){for(let t of this[Fne])if(!t[F8e])return t;if(!this[pV]||this[Fne].length<this[pV]){let t=this[Pne](this[Nne],this[gV]);return this[Q8e](t),t}}};Lne.exports=mV});var Hne=_((aTt,Vne)=>{"use strict";var{BalancedPoolMissingUpstreamError:q8e,InvalidArgumentError:V8e}=zr(),{PoolBase:H8e,kClients:Ws,kNeedDrain:bE,kAddClient:W8e,kRemoveClient:G8e,kGetDispatcher:$8e}=fV(),Y8e=N0(),{kUrl:AV,kInterceptors:K8e}=Gn(),{parseOrigin:Une}=nr(),One=Symbol("factory"),DD=Symbol("options"),qne=Symbol("kGreatestCommonDivisor"),Sp=Symbol("kCurrentWeight"),Ip=Symbol("kIndex"),_l=Symbol("kWeight"),TD=Symbol("kMaxWeightPerServer"),RD=Symbol("kErrorPenalty");function z8e(e,t){if(e===0)return t;for(;t!==0;){let r=t;t=e%t,e=r}return e}function J8e(e,t){return new Y8e(e,t)}var yV=class extends H8e{constructor(t=[],{factory:r=J8e,...n}={}){if(super(),this[DD]=n,this[Ip]=-1,this[Sp]=0,this[TD]=this[DD].maxWeightPerServer||100,this[RD]=this[DD].errorPenalty||15,Array.isArray(t)||(t=[t]),typeof r!="function")throw new V8e("factory must be a function.");this[K8e]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[One]=r;for(let i of t)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(t){let r=Une(t).origin;if(this[Ws].find(i=>i[AV].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[One](r,Object.assign({},this[DD]));this[W8e](n),n.on("connect",()=>{n[_l]=Math.min(this[TD],n[_l]+this[RD])}),n.on("connectionError",()=>{n[_l]=Math.max(1,n[_l]-this[RD]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let s=i[2];s&&s.code==="UND_ERR_SOCKET"&&(n[_l]=Math.max(1,n[_l]-this[RD]),this._updateBalancedPoolStats())});for(let i of this[Ws])i[_l]=this[TD];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let t=0;for(let r=0;r<this[Ws].length;r++)t=z8e(this[Ws][r][_l],t);this[qne]=t}removeUpstream(t){let r=Une(t).origin,n=this[Ws].find(i=>i[AV].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[G8e](n),this}get upstreams(){return this[Ws].filter(t=>t.closed!==!0&&t.destroyed!==!0).map(t=>t[AV].origin)}[$8e](){if(this[Ws].length===0)throw new q8e;if(!this[Ws].find(s=>!s[bE]&&s.closed!==!0&&s.destroyed!==!0)||this[Ws].map(s=>s[bE]).reduce((s,o)=>s&&o,!0))return;let n=0,i=this[Ws].findIndex(s=>!s[bE]);for(;n++<this[Ws].length;){this[Ip]=(this[Ip]+1)%this[Ws].length;let s=this[Ws][this[Ip]];if(s[_l]>this[Ws][i][_l]&&!s[bE]&&(i=this[Ip]),this[Ip]===0&&(this[Sp]=this[Sp]-this[qne],this[Sp]<=0&&(this[Sp]=this[TD])),s[_l]>=this[Sp]&&!s[bE])return s}return this[Sp]=this[Ws][i][_l],this[Ip]=i,this[Ws][i]}};Vne.exports=yV});var P0=_((lTt,Jne)=>{"use strict";var{InvalidArgumentError:kD}=zr(),{kClients:ph,kRunning:Wne,kClose:j8e,kDestroy:Z8e,kDispatch:X8e,kInterceptors:e6e}=Gn(),t6e=C0(),r6e=N0(),n6e=yE(),i6e=nr(),s6e=SD(),Gne=Symbol("onConnect"),$ne=Symbol("onDisconnect"),Yne=Symbol("onConnectionError"),o6e=Symbol("maxRedirections"),Kne=Symbol("onDrain"),zne=Symbol("factory"),vV=Symbol("options");function a6e(e,t){return t&&t.connections===1?new n6e(e,t):new r6e(e,t)}var CV=class extends t6e{constructor({factory:t=a6e,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof t!="function")throw new kD("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new kD("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new kD("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[e6e]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[s6e({maxRedirections:r})],this[vV]={...i6e.deepClone(i),connect:n},this[vV].interceptors=i.interceptors?{...i.interceptors}:void 0,this[o6e]=r,this[zne]=t,this[ph]=new Map,this[Kne]=(s,o)=>{this.emit("drain",s,[this,...o])},this[Gne]=(s,o)=>{this.emit("connect",s,[this,...o])},this[$ne]=(s,o,a)=>{this.emit("disconnect",s,[this,...o],a)},this[Yne]=(s,o,a)=>{this.emit("connectionError",s,[this,...o],a)}}get[Wne](){let t=0;for(let r of this[ph].values())t+=r[Wne];return t}[X8e](t,r){let n;if(t.origin&&(typeof t.origin=="string"||t.origin instanceof URL))n=String(t.origin);else throw new kD("opts.origin must be a non-empty string or URL.");let i=this[ph].get(n);return i||(i=this[zne](t.origin,this[vV]).on("drain",this[Kne]).on("connect",this[Gne]).on("disconnect",this[$ne]).on("connectionError",this[Yne]),this[ph].set(n,i)),i.dispatch(t,r)}async[j8e](){let t=[];for(let r of this[ph].values())t.push(r.close());this[ph].clear(),await Promise.all(t)}async[Z8e](t){let r=[];for(let n of this[ph].values())r.push(n.destroy(t));this[ph].clear(),await Promise.all(r)}};Jne.exports=CV});var _V=_((cTt,eie)=>{"use strict";var{kProxy:l6e,kClose:c6e,kDestroy:u6e,kInterceptors:d6e}=Gn(),{URL:EE}=require("url"),f6e=P0(),h6e=N0(),g6e=C0(),{InvalidArgumentError:QD,RequestAbortedError:p6e,SecureProxyConnectionError:m6e}=zr(),jne=Zb(),MD=Symbol("proxy agent"),FD=Symbol("proxy client"),_E=Symbol("proxy headers"),bV=Symbol("request tls settings"),Zne=Symbol("proxy tls settings"),Xne=Symbol("connect endpoint function");function A6e(e){return e==="https:"?443:80}function y6e(e,t){return new h6e(e,t)}var v6e=()=>{},EV=class extends g6e{constructor(t){if(super(),!t||typeof t=="object"&&!(t instanceof EE)&&!t.uri)throw new QD("Proxy uri is mandatory");let{clientFactory:r=y6e}=t;if(typeof r!="function")throw new QD("Proxy opts.clientFactory must be a function.");let n=this.#e(t),{href:i,origin:s,port:o,protocol:a,username:l,password:c,hostname:u}=n;if(this[l6e]={uri:i,protocol:a},this[d6e]=t.interceptors?.ProxyAgent&&Array.isArray(t.interceptors.ProxyAgent)?t.interceptors.ProxyAgent:[],this[bV]=t.requestTls,this[Zne]=t.proxyTls,this[_E]=t.headers||{},t.auth&&t.token)throw new QD("opts.auth cannot be used in combination with opts.token");t.auth?this[_E]["proxy-authorization"]=`Basic ${t.auth}`:t.token?this[_E]["proxy-authorization"]=t.token:l&&c&&(this[_E]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(c)}`).toString("base64")}`);let f=jne({...t.proxyTls});this[Xne]=jne({...t.requestTls}),this[FD]=r(n,{connect:f}),this[MD]=new f6e({...t,connect:async(p,g)=>{let m=p.host;p.port||(m+=`:${A6e(p.protocol)}`);try{let{socket:y,statusCode:v}=await this[FD].connect({origin:s,port:o,path:m,signal:p.signal,headers:{...this[_E],host:p.host},servername:this[Zne]?.servername||u});if(v!==200&&(y.on("error",v6e).destroy(),g(new p6e(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),p.protocol!=="https:"){g(null,y);return}let C;this[bV]?C=this[bV].servername:C=p.servername,this[Xne]({...p,servername:C,httpSocket:y},g)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?g(new m6e(y)):g(y)}}})}dispatch(t,r){let n=C6e(t.headers);if(b6e(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new EE(t.origin);n.host=i}return this[MD].dispatch({...t,headers:n},r)}#e(t){return typeof t=="string"?new EE(t):t instanceof EE?t:new EE(t.uri)}async[c6e](){await this[MD].close(),await this[FD].close()}async[u6e](){await this[MD].destroy(),await this[FD].destroy()}};function C6e(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2)t[e[r]]=e[r+1];return t}return e}function b6e(e){if(e&&Object.keys(e).find(r=>r.toLowerCase()==="proxy-authorization"))throw new QD("Proxy-Authorization should be sent in ProxyAgent constructor")}eie.exports=EV});var oie=_((uTt,sie)=>{"use strict";var E6e=C0(),{kClose:_6e,kDestroy:x6e,kClosed:tie,kDestroyed:rie,kDispatch:w6e,kNoProxyAgent:xE,kHttpProxyAgent:mh,kHttpsProxyAgent:Bp}=Gn(),nie=_V(),S6e=P0(),I6e={"http:":80,"https:":443},iie=!1,xV=class extends E6e{#e=null;#t=null;#i=null;constructor(t={}){super(),this.#i=t,iie||(iie=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...s}=t;this[xE]=new S6e(s);let o=r??process.env.http_proxy??process.env.HTTP_PROXY;o?this[mh]=new nie({...s,uri:o}):this[mh]=this[xE];let a=n??process.env.https_proxy??process.env.HTTPS_PROXY;a?this[Bp]=new nie({...s,uri:a}):this[Bp]=this[mh],this.#l()}[w6e](t,r){let n=new URL(t.origin);return this.#n(n).dispatch(t,r)}async[_6e](){await this[xE].close(),this[mh][tie]||await this[mh].close(),this[Bp][tie]||await this[Bp].close()}async[x6e](t){await this[xE].destroy(t),this[mh][rie]||await this[mh].destroy(t),this[Bp][rie]||await this[Bp].destroy(t)}#n(t){let{protocol:r,host:n,port:i}=t;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||I6e[r]||0,this.#r(n,i)?r==="https:"?this[Bp]:this[mh]:this[xE]}#r(t,r){if(this.#o&&this.#l(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(t.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(t===i.hostname)return!1}}return!0}#l(){let t=this.#i.noProxy??this.#u,r=t.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let s=r[i];if(!s)continue;let o=s.match(/^(.+):(\d+)$/);n.push({hostname:(o?o[1]:s).toLowerCase(),port:o?Number.parseInt(o[2],10):0})}this.#e=t,this.#t=n}get#o(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#u}get#u(){return process.env.no_proxy??process.env.NO_PROXY??""}};sie.exports=xV});var ND=_((dTt,uie)=>{"use strict";var L0=require("assert"),{kRetryHandlerDefaultRetry:aie}=Gn(),{RequestRetryError:wE}=zr(),{isDisturbed:lie,parseHeaders:B6e,parseRangeHeader:cie,wrapRequestBody:D6e}=nr();function T6e(e){let t=Date.now();return new Date(e).getTime()-t}var wV=class e{constructor(t,r){let{retryOptions:n,...i}=t,{retry:s,maxRetries:o,maxTimeout:a,minTimeout:l,timeoutFactor:c,methods:u,errorCodes:f,retryAfter:p,statusCodes:g}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:D6e(t.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:s??e[aie],retryAfter:p??!0,maxTimeout:a??30*1e3,minTimeout:l??500,timeoutFactor:c??2,maxRetries:o??5,methods:u??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:g??[500,502,503,504,429],errorCodes:f??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(m=>{this.aborted=!0,this.abort?this.abort(m):this.reason=m})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(t,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(t,r,n)}onConnect(t){this.aborted?t(this.reason):this.abort=t}onBodySent(t){if(this.handler.onBodySent)return this.handler.onBodySent(t)}static[aie](t,{state:r,opts:n},i){let{statusCode:s,code:o,headers:a}=t,{method:l,retryOptions:c}=n,{maxRetries:u,minTimeout:f,maxTimeout:p,timeoutFactor:g,statusCodes:m,errorCodes:y,methods:v}=c,{counter:C}=r;if(o&&o!=="UND_ERR_REQ_RETRY"&&!y.includes(o)){i(t);return}if(Array.isArray(v)&&!v.includes(l)){i(t);return}if(s!=null&&Array.isArray(m)&&!m.includes(s)){i(t);return}if(C>u){i(t);return}let E=a?.["retry-after"];E&&(E=Number(E),E=Number.isNaN(E)?T6e(E):E*1e3);let w=E>0?Math.min(E,p):Math.min(f*g**(C-1),p);setTimeout(()=>i(null),w)}onHeaders(t,r,n,i){let s=B6e(r);if(this.retryCount+=1,t>=300)return this.retryOpts.statusCodes.includes(t)===!1?this.handler.onHeaders(t,r,n,i):(this.abort(new wE("Request failed",t,{headers:s,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,t!==206&&(this.start>0||t!==200))return this.abort(new wE("server does not support the range header and the payload was partially consumed",t,{headers:s,data:{count:this.retryCount}})),!1;let a=cie(s["content-range"]);if(!a)return this.abort(new wE("Content-Range mismatch",t,{headers:s,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==s.etag)return this.abort(new wE("ETag mismatch",t,{headers:s,data:{count:this.retryCount}})),!1;let{start:l,size:c,end:u=c-1}=a;return L0(this.start===l,"content-range mismatch"),L0(this.end==null||this.end===u,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(t===206){let a=cie(s["content-range"]);if(a==null)return this.handler.onHeaders(t,r,n,i);let{start:l,size:c,end:u=c-1}=a;L0(l!=null&&Number.isFinite(l),"content-range mismatch"),L0(u!=null&&Number.isFinite(u),"invalid content-length"),this.start=l,this.end=u}if(this.end==null){let a=s["content-length"];this.end=a!=null?Number(a)-1:null}return L0(Number.isFinite(this.start)),L0(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=s.etag!=null?s.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(t,r,n,i)}let o=new wE("Request failed",t,{headers:s,data:{count:this.retryCount}});return this.abort(o),!1}onData(t){return this.start+=t.length,this.handler.onData(t)}onComplete(t){return this.retryCount=0,this.handler.onComplete(t)}onError(t){if(this.aborted||lie(this.opts.body))return this.handler.onError(t);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(t,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||lie(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}}};uie.exports=wV});var fie=_((fTt,die)=>{"use strict";var R6e=Jb(),k6e=ND(),SV=class extends R6e{#e=null;#t=null;constructor(t,r={}){super(r),this.#e=t,this.#t=r}dispatch(t,r){let n=new k6e({...t,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(t,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};die.exports=SV});var kV=_((hTt,bie)=>{"use strict";var Aie=require("assert"),{Readable:M6e}=require("stream"),{RequestAbortedError:yie,NotSupportedError:F6e,InvalidArgumentError:Q6e,AbortError:IV}=zr(),vie=nr(),{ReadableStreamFrom:N6e}=nr(),Sa=Symbol("kConsume"),SE=Symbol("kReading"),Ah=Symbol("kBody"),hie=Symbol("kAbort"),Cie=Symbol("kContentType"),gie=Symbol("kContentLength"),P6e=()=>{},BV=class extends M6e{constructor({resume:t,abort:r,contentType:n="",contentLength:i,highWaterMark:s=64*1024}){super({autoDestroy:!0,read:t,highWaterMark:s}),this._readableState.dataEmitted=!1,this[hie]=r,this[Sa]=null,this[Ah]=null,this[Cie]=n,this[gie]=i,this[SE]=!1}destroy(t){return!t&&!this._readableState.endEmitted&&(t=new yie),t&&this[hie](),super.destroy(t)}_destroy(t,r){this[SE]?r(t):setImmediate(()=>{r(t)})}on(t,...r){return(t==="data"||t==="readable")&&(this[SE]=!0),super.on(t,...r)}addListener(t,...r){return this.on(t,...r)}off(t,...r){let n=super.off(t,...r);return(t==="data"||t==="readable")&&(this[SE]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(t,...r){return this.off(t,...r)}push(t){return this[Sa]&&t!==null?(TV(this[Sa],t),this[SE]?super.push(t):!0):super.push(t)}async text(){return IE(this,"text")}async json(){return IE(this,"json")}async blob(){return IE(this,"blob")}async bytes(){return IE(this,"bytes")}async arrayBuffer(){return IE(this,"arrayBuffer")}async formData(){throw new F6e}get bodyUsed(){return vie.isDisturbed(this)}get body(){return this[Ah]||(this[Ah]=N6e(this),this[Sa]&&(this[Ah].getReader(),Aie(this[Ah].locked))),this[Ah]}async dump(t){let r=Number.isFinite(t?.limit)?t.limit:131072,n=t?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new Q6e("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,s)=>{this[gie]>r&&this.destroy(new IV);let o=()=>{this.destroy(n.reason??new IV)};n?.addEventListener("abort",o),this.on("close",function(){n?.removeEventListener("abort",o),n?.aborted?s(n.reason??new IV):i(null)}).on("error",P6e).on("data",function(a){r-=a.length,r<=0&&this.destroy()}).resume()})}};function L6e(e){return e[Ah]&&e[Ah].locked===!0||e[Sa]}function U6e(e){return vie.isDisturbed(e)||L6e(e)}async function IE(e,t){return Aie(!e[Sa]),new Promise((r,n)=>{if(U6e(e)){let i=e._readableState;i.destroyed&&i.closeEmitted===!1?e.on("error",s=>{n(s)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{e[Sa]={type:t,stream:e,resolve:r,reject:n,length:0,body:[]},e.on("error",function(i){RV(this[Sa],i)}).on("close",function(){this[Sa].body!==null&&RV(this[Sa],new yie)}),O6e(e[Sa])})})}function O6e(e){if(e.body===null)return;let{_readableState:t}=e.stream;if(t.bufferIndex){let r=t.bufferIndex,n=t.buffer.length;for(let i=r;i<n;i++)TV(e,t.buffer[i])}else for(let r of t.buffer)TV(e,r);for(t.endEmitted?mie(this[Sa]):e.stream.on("end",function(){mie(this[Sa])}),e.stream.resume();e.stream.read()!=null;);}function DV(e,t){if(e.length===0||t===0)return"";let r=e.length===1?e[0]:Buffer.concat(e,t),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}function pie(e,t){if(e.length===0||t===0)return new Uint8Array(0);if(e.length===1)return new Uint8Array(e[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(t).buffer),n=0;for(let i=0;i<e.length;++i){let s=e[i];r.set(s,n),n+=s.length}return r}function mie(e){let{type:t,body:r,resolve:n,stream:i,length:s}=e;try{t==="text"?n(DV(r,s)):t==="json"?n(JSON.parse(DV(r,s))):t==="arrayBuffer"?n(pie(r,s).buffer):t==="blob"?n(new Blob(r,{type:i[Cie]})):t==="bytes"&&n(pie(r,s)),RV(e)}catch(o){i.destroy(o)}}function TV(e,t){e.length+=t.length,e.body.push(t)}function RV(e,t){e.body!==null&&(t?e.reject(t):e.resolve(),e.type=null,e.stream=null,e.resolve=null,e.reject=null,e.length=0,e.body=null)}bie.exports={Readable:BV,chunksDecode:DV}});var MV=_((gTt,Sie)=>{"use strict";var q6e=require("assert"),{ResponseStatusCodeError:Eie}=zr(),{chunksDecode:_ie}=kV(),V6e=128*1024;async function H6e({callback:e,body:t,contentType:r,statusCode:n,statusMessage:i,headers:s}){q6e(t);let o=[],a=0;try{for await(let f of t)if(o.push(f),a+=f.length,a>V6e){o=[],a=0;break}}catch{o=[],a=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!a){queueMicrotask(()=>e(new Eie(l,n,s)));return}let c=Error.stackTraceLimit;Error.stackTraceLimit=0;let u;try{xie(r)?u=JSON.parse(_ie(o,a)):wie(r)&&(u=_ie(o,a))}catch{}finally{Error.stackTraceLimit=c}queueMicrotask(()=>e(new Eie(l,n,s,u)))}var xie=e=>e.length>15&&e[11]==="/"&&e[0]==="a"&&e[1]==="p"&&e[2]==="p"&&e[3]==="l"&&e[4]==="i"&&e[5]==="c"&&e[6]==="a"&&e[7]==="t"&&e[8]==="i"&&e[9]==="o"&&e[10]==="n"&&e[12]==="j"&&e[13]==="s"&&e[14]==="o"&&e[15]==="n",wie=e=>e.length>4&&e[4]==="/"&&e[0]==="t"&&e[1]==="e"&&e[2]==="x"&&e[3]==="t";Sie.exports={getResolveErrorBodyCallback:H6e,isContentTypeApplicationJson:xie,isContentTypeText:wie}});var Die=_((pTt,FV)=>{"use strict";var W6e=require("assert"),{Readable:G6e}=kV(),{InvalidArgumentError:U0,RequestAbortedError:Iie}=zr(),Ia=nr(),{getResolveErrorBodyCallback:$6e}=MV(),{AsyncResource:Y6e}=require("async_hooks"),PD=class extends Y6e{constructor(t,r){if(!t||typeof t!="object")throw new U0("invalid opts");let{signal:n,method:i,opaque:s,body:o,onInfo:a,responseHeaders:l,throwOnError:c,highWaterMark:u}=t;try{if(typeof r!="function")throw new U0("invalid callback");if(u&&(typeof u!="number"||u<0))throw new U0("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new U0("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new U0("invalid method");if(a&&typeof a!="function")throw new U0("invalid onInfo callback");super("UNDICI_REQUEST")}catch(f){throw Ia.isStream(o)&&Ia.destroy(o.on("error",Ia.nop),f),f}this.method=i,this.responseHeaders=l||null,this.opaque=s||null,this.callback=r,this.res=null,this.abort=null,this.body=o,this.trailers={},this.context=null,this.onInfo=a||null,this.throwOnError=c,this.highWaterMark=u,this.signal=n,this.reason=null,this.removeAbortListener=null,Ia.isStream(o)&&o.on("error",f=>{this.onError(f)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new Iie:this.removeAbortListener=Ia.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new Iie,this.res?Ia.destroy(this.res.on("error",Ia.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(t,r){if(this.reason){t(this.reason);return}W6e(this.callback),this.abort=t,this.context=r}onHeaders(t,r,n,i){let{callback:s,opaque:o,abort:a,context:l,responseHeaders:c,highWaterMark:u}=this,f=c==="raw"?Ia.parseRawHeaders(r):Ia.parseHeaders(r);if(t<200){this.onInfo&&this.onInfo({statusCode:t,headers:f});return}let p=c==="raw"?Ia.parseHeaders(r):f,g=p["content-type"],m=p["content-length"],y=new G6e({resume:n,abort:a,contentType:g,contentLength:this.method!=="HEAD"&&m?Number(m):null,highWaterMark:u});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,s!==null&&(this.throwOnError&&t>=400?this.runInAsyncScope($6e,null,{callback:s,body:y,contentType:g,statusCode:t,statusMessage:i,headers:f}):this.runInAsyncScope(s,null,null,{statusCode:t,headers:f,trailers:this.trailers,opaque:o,body:y,context:l}))}onData(t){return this.res.push(t)}onComplete(t){Ia.parseHeaders(t,this.trailers),this.res.push(null)}onError(t){let{res:r,callback:n,body:i,opaque:s}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,t,{opaque:s})})),r&&(this.res=null,queueMicrotask(()=>{Ia.destroy(r,t)})),i&&(this.body=null,Ia.destroy(i,t)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function Bie(e,t){if(t===void 0)return new Promise((r,n)=>{Bie.call(this,e,(i,s)=>i?n(i):r(s))});try{this.dispatch(e,new PD(e,t))}catch(r){if(typeof t!="function")throw r;let n=e?.opaque;queueMicrotask(()=>t(r,{opaque:n}))}}FV.exports=Bie;FV.exports.RequestHandler=PD});var BE=_((mTt,kie)=>{"use strict";var{addAbortListener:K6e}=nr(),{RequestAbortedError:z6e}=zr(),O0=Symbol("kListener"),_u=Symbol("kSignal");function Tie(e){e.abort?e.abort(e[_u]?.reason):e.reason=e[_u]?.reason??new z6e,Rie(e)}function J6e(e,t){if(e.reason=null,e[_u]=null,e[O0]=null,!!t){if(t.aborted){Tie(e);return}e[_u]=t,e[O0]=()=>{Tie(e)},K6e(e[_u],e[O0])}}function Rie(e){e[_u]&&("removeEventListener"in e[_u]?e[_u].removeEventListener("abort",e[O0]):e[_u].removeListener("abort",e[O0]),e[_u]=null,e[O0]=null)}kie.exports={addSignal:J6e,removeSignal:Rie}});var Nie=_((ATt,Qie)=>{"use strict";var j6e=require("assert"),{finished:Z6e,PassThrough:X6e}=require("stream"),{InvalidArgumentError:q0,InvalidReturnValueError:e9e}=zr(),wc=nr(),{getResolveErrorBodyCallback:t9e}=MV(),{AsyncResource:r9e}=require("async_hooks"),{addSignal:n9e,removeSignal:Mie}=BE(),QV=class extends r9e{constructor(t,r,n){if(!t||typeof t!="object")throw new q0("invalid opts");let{signal:i,method:s,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u}=t;try{if(typeof n!="function")throw new q0("invalid callback");if(typeof r!="function")throw new q0("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new q0("signal must be an EventEmitter or EventTarget");if(s==="CONNECT")throw new q0("invalid method");if(l&&typeof l!="function")throw new q0("invalid onInfo callback");super("UNDICI_STREAM")}catch(f){throw wc.isStream(a)&&wc.destroy(a.on("error",wc.nop),f),f}this.responseHeaders=c||null,this.opaque=o||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=a,this.onInfo=l||null,this.throwOnError=u||!1,wc.isStream(a)&&a.on("error",f=>{this.onError(f)}),n9e(this,i)}onConnect(t,r){if(this.reason){t(this.reason);return}j6e(this.callback),this.abort=t,this.context=r}onHeaders(t,r,n,i){let{factory:s,opaque:o,context:a,callback:l,responseHeaders:c}=this,u=c==="raw"?wc.parseRawHeaders(r):wc.parseHeaders(r);if(t<200){this.onInfo&&this.onInfo({statusCode:t,headers:u});return}this.factory=null;let f;if(this.throwOnError&&t>=400){let m=(c==="raw"?wc.parseHeaders(r):u)["content-type"];f=new X6e,this.callback=null,this.runInAsyncScope(t9e,null,{callback:l,body:f,contentType:m,statusCode:t,statusMessage:i,headers:u})}else{if(s===null)return;if(f=this.runInAsyncScope(s,null,{statusCode:t,headers:u,opaque:o,context:a}),!f||typeof f.write!="function"||typeof f.end!="function"||typeof f.on!="function")throw new e9e("expected Writable");Z6e(f,{readable:!1},g=>{let{callback:m,res:y,opaque:v,trailers:C,abort:E}=this;this.res=null,(g||!y.readable)&&wc.destroy(y,g),this.callback=null,this.runInAsyncScope(m,null,g||null,{opaque:v,trailers:C}),g&&E()})}return f.on("drain",n),this.res=f,(f.writableNeedDrain!==void 0?f.writableNeedDrain:f._writableState?.needDrain)!==!0}onData(t){let{res:r}=this;return r?r.write(t):!0}onComplete(t){let{res:r}=this;Mie(this),r&&(this.trailers=wc.parseHeaders(t),r.end())}onError(t){let{res:r,callback:n,opaque:i,body:s}=this;Mie(this),this.factory=null,r?(this.res=null,wc.destroy(r,t)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,t,{opaque:i})})),s&&(this.body=null,wc.destroy(s,t))}};function Fie(e,t,r){if(r===void 0)return new Promise((n,i)=>{Fie.call(this,e,t,(s,o)=>s?i(s):n(o))});try{this.dispatch(e,new QV(e,t,r))}catch(n){if(typeof r!="function")throw n;let i=e?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}Qie.exports=Fie});var Oie=_((yTt,Uie)=>{"use strict";var{Readable:Lie,Duplex:i9e,PassThrough:s9e}=require("stream"),{InvalidArgumentError:DE,InvalidReturnValueError:o9e,RequestAbortedError:NV}=zr(),xl=nr(),{AsyncResource:a9e}=require("async_hooks"),{addSignal:l9e,removeSignal:c9e}=BE(),Pie=require("assert"),V0=Symbol("resume"),PV=class extends Lie{constructor(){super({autoDestroy:!0}),this[V0]=null}_read(){let{[V0]:t}=this;t&&(this[V0]=null,t())}_destroy(t,r){this._read(),r(t)}},LV=class extends Lie{constructor(t){super({autoDestroy:!0}),this[V0]=t}_read(){this[V0]()}_destroy(t,r){!t&&!this._readableState.endEmitted&&(t=new NV),r(t)}},UV=class extends a9e{constructor(t,r){if(!t||typeof t!="object")throw new DE("invalid opts");if(typeof r!="function")throw new DE("invalid handler");let{signal:n,method:i,opaque:s,onInfo:o,responseHeaders:a}=t;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new DE("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new DE("invalid method");if(o&&typeof o!="function")throw new DE("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=s||null,this.responseHeaders=a||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=o||null,this.req=new PV().on("error",xl.nop),this.ret=new i9e({readableObjectMode:t.objectMode,autoDestroy:!0,read:()=>{let{body:l}=this;l?.resume&&l.resume()},write:(l,c,u)=>{let{req:f}=this;f.push(l,c)||f._readableState.destroyed?u():f[V0]=u},destroy:(l,c)=>{let{body:u,req:f,res:p,ret:g,abort:m}=this;!l&&!g._readableState.endEmitted&&(l=new NV),m&&l&&m(),xl.destroy(u,l),xl.destroy(f,l),xl.destroy(p,l),c9e(this),c(l)}}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,l9e(this,n)}onConnect(t,r){let{ret:n,res:i}=this;if(this.reason){t(this.reason);return}Pie(!i,"pipeline cannot be retried"),Pie(!n.destroyed),this.abort=t,this.context=r}onHeaders(t,r,n){let{opaque:i,handler:s,context:o}=this;if(t<200){if(this.onInfo){let l=this.responseHeaders==="raw"?xl.parseRawHeaders(r):xl.parseHeaders(r);this.onInfo({statusCode:t,headers:l})}return}this.res=new LV(n);let a;try{this.handler=null;let l=this.responseHeaders==="raw"?xl.parseRawHeaders(r):xl.parseHeaders(r);a=this.runInAsyncScope(s,null,{statusCode:t,headers:l,opaque:i,body:this.res,context:o})}catch(l){throw this.res.on("error",xl.nop),l}if(!a||typeof a.on!="function")throw new o9e("expected Readable");a.on("data",l=>{let{ret:c,body:u}=this;!c.push(l)&&u.pause&&u.pause()}).on("error",l=>{let{ret:c}=this;xl.destroy(c,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||xl.destroy(l,new NV)}),this.body=a}onData(t){let{res:r}=this;return r.push(t)}onComplete(t){let{res:r}=this;r.push(null)}onError(t){let{ret:r}=this;this.handler=null,xl.destroy(r,t)}};function u9e(e,t){try{let r=new UV(e,t);return this.dispatch({...e,body:r.req},r),r.ret}catch(r){return new s9e().destroy(r)}}Uie.exports=u9e});var $ie=_((vTt,Gie)=>{"use strict";var{InvalidArgumentError:OV,SocketError:d9e}=zr(),{AsyncResource:f9e}=require("async_hooks"),qie=nr(),{addSignal:h9e,removeSignal:Vie}=BE(),Hie=require("assert"),qV=class extends f9e{constructor(t,r){if(!t||typeof t!="object")throw new OV("invalid opts");if(typeof r!="function")throw new OV("invalid callback");let{signal:n,opaque:i,responseHeaders:s}=t;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new OV("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=s||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,h9e(this,n)}onConnect(t,r){if(this.reason){t(this.reason);return}Hie(this.callback),this.abort=t,this.context=null}onHeaders(){throw new d9e("bad upgrade",null)}onUpgrade(t,r,n){Hie(t===101);let{callback:i,opaque:s,context:o}=this;Vie(this),this.callback=null;let a=this.responseHeaders==="raw"?qie.parseRawHeaders(r):qie.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:a,socket:n,opaque:s,context:o})}onError(t){let{callback:r,opaque:n}=this;Vie(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,t,{opaque:n})}))}};function Wie(e,t){if(t===void 0)return new Promise((r,n)=>{Wie.call(this,e,(i,s)=>i?n(i):r(s))});try{let r=new qV(e,t);this.dispatch({...e,method:e.method||"GET",upgrade:e.protocol||"Websocket"},r)}catch(r){if(typeof t!="function")throw r;let n=e?.opaque;queueMicrotask(()=>t(r,{opaque:n}))}}Gie.exports=Wie});var jie=_((CTt,Jie)=>{"use strict";var g9e=require("assert"),{AsyncResource:p9e}=require("async_hooks"),{InvalidArgumentError:VV,SocketError:m9e}=zr(),Yie=nr(),{addSignal:A9e,removeSignal:Kie}=BE(),HV=class extends p9e{constructor(t,r){if(!t||typeof t!="object")throw new VV("invalid opts");if(typeof r!="function")throw new VV("invalid callback");let{signal:n,opaque:i,responseHeaders:s}=t;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new VV("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=s||null,this.callback=r,this.abort=null,A9e(this,n)}onConnect(t,r){if(this.reason){t(this.reason);return}g9e(this.callback),this.abort=t,this.context=r}onHeaders(){throw new m9e("bad connect",null)}onUpgrade(t,r,n){let{callback:i,opaque:s,context:o}=this;Kie(this),this.callback=null;let a=r;a!=null&&(a=this.responseHeaders==="raw"?Yie.parseRawHeaders(r):Yie.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:t,headers:a,socket:n,opaque:s,context:o})}onError(t){let{callback:r,opaque:n}=this;Kie(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,t,{opaque:n})}))}};function zie(e,t){if(t===void 0)return new Promise((r,n)=>{zie.call(this,e,(i,s)=>i?n(i):r(s))});try{let r=new HV(e,t);this.dispatch({...e,method:"CONNECT"},r)}catch(r){if(typeof t!="function")throw r;let n=e?.opaque;queueMicrotask(()=>t(r,{opaque:n}))}}Jie.exports=zie});var Zie=_((bTt,H0)=>{"use strict";H0.exports.request=Die();H0.exports.stream=Nie();H0.exports.pipeline=Oie();H0.exports.upgrade=$ie();H0.exports.connect=jie()});var GV=_((ETt,Xie)=>{"use strict";var{UndiciError:y9e}=zr(),WV=class e extends y9e{constructor(t){super(t),Error.captureStackTrace(this,e),this.name="MockNotMatchedError",this.message=t||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};Xie.exports={MockNotMatchedError:WV}});var W0=_((_Tt,ese)=>{"use strict";ese.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var TE=_((xTt,dse)=>{"use strict";var{MockNotMatchedError:Dp}=GV(),{kDispatches:LD,kMockAgent:v9e,kOriginalDispatch:C9e,kOrigin:b9e,kGetNetConnect:E9e}=W0(),{buildURL:_9e}=nr(),{STATUS_CODES:x9e}=require("http"),{types:{isPromise:w9e}}=require("util");function Vd(e,t){return typeof e=="string"?e===t:e instanceof RegExp?e.test(t):typeof e=="function"?e(t)===!0:!1}function rse(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t.toLocaleLowerCase(),r]))}function nse(e,t){if(Array.isArray(e)){for(let r=0;r<e.length;r+=2)if(e[r].toLocaleLowerCase()===t.toLocaleLowerCase())return e[r+1];return}else return typeof e.get=="function"?e.get(t):rse(e)[t.toLocaleLowerCase()]}function KV(e){let t=e.slice(),r=[];for(let n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return Object.fromEntries(r)}function ise(e,t){if(typeof e.headers=="function")return Array.isArray(t)&&(t=KV(t)),e.headers(t?rse(t):{});if(typeof e.headers>"u")return!0;if(typeof t!="object"||typeof e.headers!="object")return!1;for(let[r,n]of Object.entries(e.headers)){let i=nse(t,r);if(!Vd(n,i))return!1}return!0}function tse(e){if(typeof e!="string")return e;let t=e.split("?");if(t.length!==2)return e;let r=new URLSearchParams(t.pop());return r.sort(),[...t,r.toString()].join("?")}function S9e(e,{path:t,method:r,body:n,headers:i}){let s=Vd(e.path,t),o=Vd(e.method,r),a=typeof e.body<"u"?Vd(e.body,n):!0,l=ise(e,i);return s&&o&&a&&l}function sse(e){return Buffer.isBuffer(e)||e instanceof Uint8Array||e instanceof ArrayBuffer?e:typeof e=="object"?JSON.stringify(e):e.toString()}function ose(e,t){let r=t.query?_9e(t.path,t.query):t.path,n=typeof r=="string"?tse(r):r,i=e.filter(({consumed:s})=>!s).filter(({path:s})=>Vd(tse(s),n));if(i.length===0)throw new Dp(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:s})=>Vd(s,t.method)),i.length===0)throw new Dp(`Mock dispatch not matched for method '${t.method}' on path '${n}'`);if(i=i.filter(({body:s})=>typeof s<"u"?Vd(s,t.body):!0),i.length===0)throw new Dp(`Mock dispatch not matched for body '${t.body}' on path '${n}'`);if(i=i.filter(s=>ise(s,t.headers)),i.length===0){let s=typeof t.headers=="object"?JSON.stringify(t.headers):t.headers;throw new Dp(`Mock dispatch not matched for headers '${s}' on path '${n}'`)}return i[0]}function I9e(e,t,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},s={...n,...t,pending:!0,data:{error:null,...i}};return e.push(s),s}function $V(e,t){let r=e.findIndex(n=>n.consumed?S9e(n,t):!1);r!==-1&&e.splice(r,1)}function ase(e){let{path:t,method:r,body:n,headers:i,query:s}=e;return{path:t,method:r,body:n,headers:i,query:s}}function YV(e){let t=Object.keys(e),r=[];for(let n=0;n<t.length;++n){let i=t[n],s=e[i],o=Buffer.from(`${i}`);if(Array.isArray(s))for(let a=0;a<s.length;++a)r.push(o,Buffer.from(`${s[a]}`));else r.push(o,Buffer.from(`${s}`))}return r}function lse(e){return x9e[e]||"unknown"}async function B9e(e){let t=[];for await(let r of e)t.push(r);return Buffer.concat(t).toString("utf8")}function cse(e,t){let r=ase(e),n=ose(this[LD],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(e)});let{data:{statusCode:i,data:s,headers:o,trailers:a,error:l},delay:c,persist:u}=n,{timesInvoked:f,times:p}=n;if(n.consumed=!u&&f>=p,n.pending=f<p,l!==null)return $V(this[LD],r),t.onError(l),!0;typeof c=="number"&&c>0?setTimeout(()=>{g(this[LD])},c):g(this[LD]);function g(y,v=s){let C=Array.isArray(e.headers)?KV(e.headers):e.headers,E=typeof v=="function"?v({...e,headers:C}):v;if(w9e(E)){E.then(N=>g(y,N));return}let w=sse(E),B=YV(o),R=YV(a);t.onConnect?.(N=>t.onError(N),null),t.onHeaders?.(i,B,m,lse(i)),t.onData?.(Buffer.from(w)),t.onComplete?.(R),$V(y,r)}function m(){}return!0}function D9e(){let e=this[v9e],t=this[b9e],r=this[C9e];return function(i,s){if(e.isMockActive)try{cse.call(this,i,s)}catch(o){if(o instanceof Dp){let a=e[E9e]();if(a===!1)throw new Dp(`${o.message}: subsequent request to origin ${t} was not allowed (net.connect disabled)`);if(use(a,t))r.call(this,i,s);else throw new Dp(`${o.message}: subsequent request to origin ${t} was not allowed (net.connect is not enabled for this origin)`)}else throw o}else r.call(this,i,s)}}function use(e,t){let r=new URL(t);return e===!0?!0:!!(Array.isArray(e)&&e.some(n=>Vd(n,r.host)))}function T9e(e){if(e){let{agent:t,...r}=e;return r}}dse.exports={getResponseData:sse,getMockDispatch:ose,addMockDispatch:I9e,deleteMockDispatch:$V,buildKey:ase,generateKeyValues:YV,matchValue:Vd,getResponse:B9e,getStatusText:lse,mockDispatch:cse,buildMockDispatch:D9e,checkNetConnect:use,buildMockOptions:T9e,getHeaderByName:nse,buildHeadersFromArray:KV}});var t5=_((wTt,e5)=>{"use strict";var{getResponseData:R9e,buildKey:k9e,addMockDispatch:zV}=TE(),{kDispatches:UD,kDispatchKey:OD,kDefaultHeaders:JV,kDefaultTrailers:jV,kContentLength:ZV,kMockDispatch:qD}=W0(),{InvalidArgumentError:xu}=zr(),{buildURL:M9e}=nr(),G0=class{constructor(t){this[qD]=t}delay(t){if(typeof t!="number"||!Number.isInteger(t)||t<=0)throw new xu("waitInMs must be a valid integer > 0");return this[qD].delay=t,this}persist(){return this[qD].persist=!0,this}times(t){if(typeof t!="number"||!Number.isInteger(t)||t<=0)throw new xu("repeatTimes must be a valid integer > 0");return this[qD].times=t,this}},XV=class{constructor(t,r){if(typeof t!="object")throw new xu("opts must be an object");if(typeof t.path>"u")throw new xu("opts.path must be defined");if(typeof t.method>"u"&&(t.method="GET"),typeof t.path=="string")if(t.query)t.path=M9e(t.path,t.query);else{let n=new URL(t.path,"data://");t.path=n.pathname+n.search}typeof t.method=="string"&&(t.method=t.method.toUpperCase()),this[OD]=k9e(t),this[UD]=r,this[JV]={},this[jV]={},this[ZV]=!1}createMockScopeDispatchData({statusCode:t,data:r,responseOptions:n}){let i=R9e(r),s=this[ZV]?{"content-length":i.length}:{},o={...this[JV],...s,...n.headers},a={...this[jV],...n.trailers};return{statusCode:t,data:r,headers:o,trailers:a}}validateReplyParameters(t){if(typeof t.statusCode>"u")throw new xu("statusCode must be defined");if(typeof t.responseOptions!="object"||t.responseOptions===null)throw new xu("responseOptions must be an object")}reply(t){if(typeof t=="function"){let s=a=>{let l=t(a);if(typeof l!="object"||l===null)throw new xu("reply options callback must return an object");let c={data:"",responseOptions:{},...l};return this.validateReplyParameters(c),{...this.createMockScopeDispatchData(c)}},o=zV(this[UD],this[OD],s);return new G0(o)}let r={statusCode:t,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=zV(this[UD],this[OD],n);return new G0(i)}replyWithError(t){if(typeof t>"u")throw new xu("error must be defined");let r=zV(this[UD],this[OD],{error:t});return new G0(r)}defaultReplyHeaders(t){if(typeof t>"u")throw new xu("headers must be defined");return this[JV]=t,this}defaultReplyTrailers(t){if(typeof t>"u")throw new xu("trailers must be defined");return this[jV]=t,this}replyContentLength(){return this[ZV]=!0,this}};e5.exports.MockInterceptor=XV;e5.exports.MockScope=G0});var i5=_((STt,yse)=>{"use strict";var{promisify:F9e}=require("util"),Q9e=yE(),{buildMockDispatch:N9e}=TE(),{kDispatches:fse,kMockAgent:hse,kClose:gse,kOriginalClose:pse,kOrigin:mse,kOriginalDispatch:P9e,kConnected:r5}=W0(),{MockInterceptor:L9e}=t5(),Ase=Gn(),{InvalidArgumentError:U9e}=zr(),n5=class extends Q9e{constructor(t,r){if(super(t,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new U9e("Argument opts.agent must implement Agent");this[hse]=r.agent,this[mse]=t,this[fse]=[],this[r5]=1,this[P9e]=this.dispatch,this[pse]=this.close.bind(this),this.dispatch=N9e.call(this),this.close=this[gse]}get[Ase.kConnected](){return this[r5]}intercept(t){return new L9e(t,this[fse])}async[gse](){await F9e(this[pse])(),this[r5]=0,this[hse][Ase.kClients].delete(this[mse])}};yse.exports=n5});var a5=_((ITt,wse)=>{"use strict";var{promisify:O9e}=require("util"),q9e=N0(),{buildMockDispatch:V9e}=TE(),{kDispatches:vse,kMockAgent:Cse,kClose:bse,kOriginalClose:Ese,kOrigin:_se,kOriginalDispatch:H9e,kConnected:s5}=W0(),{MockInterceptor:W9e}=t5(),xse=Gn(),{InvalidArgumentError:G9e}=zr(),o5=class extends q9e{constructor(t,r){if(super(t,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new G9e("Argument opts.agent must implement Agent");this[Cse]=r.agent,this[_se]=t,this[vse]=[],this[s5]=1,this[H9e]=this.dispatch,this[Ese]=this.close.bind(this),this.dispatch=V9e.call(this),this.close=this[bse]}get[xse.kConnected](){return this[s5]}intercept(t){return new W9e(t,this[vse])}async[bse](){await O9e(this[Ese])(),this[s5]=0,this[Cse][xse.kClients].delete(this[_se])}};wse.exports=o5});var Ise=_((DTt,Sse)=>{"use strict";var $9e={pronoun:"it",is:"is",was:"was",this:"this"},Y9e={pronoun:"they",is:"are",was:"were",this:"these"};Sse.exports=class{constructor(t,r){this.singular=t,this.plural=r}pluralize(t){let r=t===1,n=r?$9e:Y9e,i=r?this.singular:this.plural;return{...n,count:t,noun:i}}}});var Dse=_((RTt,Bse)=>{"use strict";var{Transform:K9e}=require("stream"),{Console:z9e}=require("console"),J9e=process.versions.icu?"\u2705":"Y ",j9e=process.versions.icu?"\u274C":"N ";Bse.exports=class{constructor({disableColors:t}={}){this.transform=new K9e({transform(r,n,i){i(null,r)}}),this.logger=new z9e({stdout:this.transform,inspectOptions:{colors:!t&&!process.env.CI}})}format(t){let r=t.map(({method:n,path:i,data:{statusCode:s},persist:o,times:a,timesInvoked:l,origin:c})=>({Method:n,Origin:c,Path:i,"Status code":s,Persistent:o?J9e:j9e,Invocations:l,Remaining:o?1/0:a-l}));return this.logger.table(r),this.transform.read().toString()}}});var Mse=_((kTt,kse)=>{"use strict";var{kClients:Tp}=Gn(),Z9e=P0(),{kAgent:l5,kMockAgentSet:VD,kMockAgentGet:Tse,kDispatches:c5,kIsMockActive:HD,kNetConnect:Rp,kGetNetConnect:X9e,kOptions:WD,kFactory:GD}=W0(),e$e=i5(),t$e=a5(),{matchValue:r$e,buildMockOptions:n$e}=TE(),{InvalidArgumentError:Rse,UndiciError:i$e}=zr(),s$e=Jb(),o$e=Ise(),a$e=Dse(),u5=class extends s$e{constructor(t){if(super(t),this[Rp]=!0,this[HD]=!0,t?.agent&&typeof t.agent.dispatch!="function")throw new Rse("Argument opts.agent must implement Agent");let r=t?.agent?t.agent:new Z9e(t);this[l5]=r,this[Tp]=r[Tp],this[WD]=n$e(t)}get(t){let r=this[Tse](t);return r||(r=this[GD](t),this[VD](t,r)),r}dispatch(t,r){return this.get(t.origin),this[l5].dispatch(t,r)}async close(){await this[l5].close(),this[Tp].clear()}deactivate(){this[HD]=!1}activate(){this[HD]=!0}enableNetConnect(t){if(typeof t=="string"||typeof t=="function"||t instanceof RegExp)Array.isArray(this[Rp])?this[Rp].push(t):this[Rp]=[t];else if(typeof t>"u")this[Rp]=!0;else throw new Rse("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[Rp]=!1}get isMockActive(){return this[HD]}[VD](t,r){this[Tp].set(t,r)}[GD](t){let r=Object.assign({agent:this},this[WD]);return this[WD]&&this[WD].connections===1?new e$e(t,r):new t$e(t,r)}[Tse](t){let r=this[Tp].get(t);if(r)return r;if(typeof t!="string"){let n=this[GD]("http://localhost:9999");return this[VD](t,n),n}for(let[n,i]of Array.from(this[Tp]))if(i&&typeof n!="string"&&r$e(n,t)){let s=this[GD](t);return this[VD](t,s),s[c5]=i[c5],s}}[X9e](){return this[Rp]}pendingInterceptors(){let t=this[Tp];return Array.from(t.entries()).flatMap(([r,n])=>n[c5].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:t=new a$e}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new o$e("interceptor","interceptors").pluralize(r.length);throw new i$e(`
${n.count} ${n.noun} ${n.is} pending:

${t.format(r)}
`.trim())}};kse.exports=u5});var $D=_((MTt,Pse)=>{"use strict";var Fse=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:l$e}=zr(),c$e=P0();Nse()===void 0&&Qse(new c$e);function Qse(e){if(!e||typeof e.dispatch!="function")throw new l$e("Argument agent must implement Agent");Object.defineProperty(globalThis,Fse,{value:e,writable:!0,enumerable:!1,configurable:!1})}function Nse(){return globalThis[Fse]}Pse.exports={setGlobalDispatcher:Qse,getGlobalDispatcher:Nse}});var YD=_((QTt,Lse)=>{"use strict";Lse.exports=class{#e;constructor(t){if(typeof t!="object"||t===null)throw new TypeError("handler must be an object");this.#e=t}onConnect(...t){return this.#e.onConnect?.(...t)}onError(...t){return this.#e.onError?.(...t)}onUpgrade(...t){return this.#e.onUpgrade?.(...t)}onResponseStarted(...t){return this.#e.onResponseStarted?.(...t)}onHeaders(...t){return this.#e.onHeaders?.(...t)}onData(...t){return this.#e.onData?.(...t)}onComplete(...t){return this.#e.onComplete?.(...t)}onBodySent(...t){return this.#e.onBodySent?.(...t)}}});var Ose=_((NTt,Use)=>{"use strict";var u$e=wD();Use.exports=e=>{let t=e?.maxRedirections;return r=>function(i,s){let{maxRedirections:o=t,...a}=i;if(!o)return r(i,s);let l=new u$e(r,o,i,s);return r(a,l)}}});var Vse=_((PTt,qse)=>{"use strict";var d$e=ND();qse.exports=e=>t=>function(n,i){return t(n,new d$e({...n,retryOptions:{...e,...n.retryOptions}},{handler:i,dispatch:t}))}});var Wse=_((LTt,Hse)=>{"use strict";var f$e=nr(),{InvalidArgumentError:h$e,RequestAbortedError:g$e}=zr(),p$e=YD(),d5=class extends p$e{#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#l=null;#o=null;constructor({maxSize:t},r){if(super(r),t!=null&&(!Number.isFinite(t)||t<1))throw new h$e("maxSize must be a number greater than 0");this.#e=t??this.#e,this.#o=r}onConnect(t){this.#t=t,this.#o.onConnect(this.#u.bind(this))}#u(t){this.#n=!0,this.#l=t}onHeaders(t,r,n,i){let o=f$e.parseHeaders(r)["content-length"];if(o!=null&&o>this.#e)throw new g$e(`Response size (${o}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#o.onHeaders(t,r,n,i)}onError(t){this.#i||(t=this.#l??t,this.#o.onError(t))}onData(t){return this.#r=this.#r+t.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#o.onError(this.#l):this.#o.onComplete([])),!0}onComplete(t){if(!this.#i){if(this.#n){this.#o.onError(this.reason);return}this.#o.onComplete(t)}}};function m$e({maxSize:e}={maxSize:1024*1024}){return t=>function(n,i){let{dumpMaxSize:s=e}=n,o=new d5({maxSize:s},i);return t(n,o)}}Hse.exports=m$e});var Yse=_((UTt,$se)=>{"use strict";var{isIP:A$e}=require("net"),{lookup:y$e}=require("dns"),v$e=YD(),{InvalidArgumentError:$0,InformationalError:C$e}=zr(),Gse=Math.pow(2,31)-1,f5=class{#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(t){this.#e=t.maxTTL,this.#t=t.maxItems,this.dualStack=t.dualStack,this.affinity=t.affinity,this.lookup=t.lookup??this.#n,this.pick=t.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(t,r,n){let i=this.#i.get(t.hostname);if(i==null&&this.full){n(null,t.origin);return}let s={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(t,s,(o,a)=>{if(o||a==null||a.length===0){n(o??new C$e("No DNS entries found"));return}this.setRecords(t,a);let l=this.#i.get(t.hostname),c=this.pick(t,l,s.affinity),u;typeof c.port=="number"?u=`:${c.port}`:t.port!==""?u=`:${t.port}`:u="",n(null,`${t.protocol}//${c.family===6?`[${c.address}]`:c.address}${u}`)});else{let o=this.pick(t,i,s.affinity);if(o==null){this.#i.delete(t.hostname),this.runLookup(t,r,n);return}let a;typeof o.port=="number"?a=`:${o.port}`:t.port!==""?a=`:${t.port}`:a="",n(null,`${t.protocol}//${o.family===6?`[${o.address}]`:o.address}${a}`)}}#n(t,r,n){y$e(t.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,s)=>{if(i)return n(i);let o=new Map;for(let a of s)o.set(`${a.address}:${a.family}`,a);n(null,o.values())})}#r(t,r,n){let i=null,{records:s,offset:o}=r,a;if(this.dualStack?(n==null&&(o==null||o===Gse?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),s[n]!=null&&s[n].ips.length>0?a=s[n]:a=s[n===4?6:4]):a=s[n],a==null||a.ips.length===0)return i;a.offset==null||a.offset===Gse?a.offset=0:a.offset++;let l=a.offset%a.ips.length;return i=a.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(a.ips.splice(l,1),this.pick(t,r,n)):i}setRecords(t,r){let n=Date.now(),i={records:{4:null,6:null}};for(let s of r){s.timestamp=n,typeof s.ttl=="number"?s.ttl=Math.min(s.ttl,this.#e):s.ttl=this.#e;let o=i.records[s.family]??{ips:[]};o.ips.push(s),i.records[s.family]=o}this.#i.set(t.hostname,i)}getHandler(t,r){return new h5(this,t,r)}},h5=class extends v$e{#e=null;#t=null;#i=null;#n=null;#r=null;constructor(t,{origin:r,handler:n,dispatch:i},s){super(n),this.#r=r,this.#n=n,this.#t={...s},this.#e=t,this.#i=i}onError(t){switch(t.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(t);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(t);break}}};$se.exports=e=>{if(e?.maxTTL!=null&&(typeof e?.maxTTL!="number"||e?.maxTTL<0))throw new $0("Invalid maxTTL. Must be a positive number");if(e?.maxItems!=null&&(typeof e?.maxItems!="number"||e?.maxItems<1))throw new $0("Invalid maxItems. Must be a positive number and greater than zero");if(e?.affinity!=null&&e?.affinity!==4&&e?.affinity!==6)throw new $0("Invalid affinity. Must be either 4 or 6");if(e?.dualStack!=null&&typeof e?.dualStack!="boolean")throw new $0("Invalid dualStack. Must be a boolean");if(e?.lookup!=null&&typeof e?.lookup!="function")throw new $0("Invalid lookup. Must be a function");if(e?.pick!=null&&typeof e?.pick!="function")throw new $0("Invalid pick. Must be a function");let t=e?.dualStack??!0,r;t?r=e?.affinity??null:r=e?.affinity??4;let n={maxTTL:e?.maxTTL??1e4,lookup:e?.lookup??null,pick:e?.pick??null,dualStack:t,affinity:r,maxItems:e?.maxItems??1/0},i=new f5(n);return s=>function(a,l){let c=a.origin.constructor===URL?a.origin:new URL(a.origin);return A$e(c.hostname)!==0?s(a,l):(i.runLookup(c,a,(u,f)=>{if(u)return l.onError(u);let p=null;p={...a,servername:c.hostname,origin:f,headers:{host:c.hostname,...a.headers}},s(p,i.getHandler({origin:c,dispatch:s,handler:l},a))}),!0)}}});var kp=_((OTt,eoe)=>{"use strict";var{kConstruct:b$e}=Gn(),{kEnumerableProperty:Y0}=nr(),{iteratorMixin:E$e,isValidHeaderName:RE,isValidHeaderValue:zse}=wa(),{webidl:Br}=xs(),g5=require("assert"),KD=require("util"),Ti=Symbol("headers map"),Ba=Symbol("headers map sorted");function Kse(e){return e===10||e===13||e===9||e===32}function Jse(e){let t=0,r=e.length;for(;r>t&&Kse(e.charCodeAt(r-1));)--r;for(;r>t&&Kse(e.charCodeAt(t));)++t;return t===0&&r===e.length?e:e.substring(t,r)}function jse(e,t){if(Array.isArray(t))for(let r=0;r<t.length;++r){let n=t[r];if(n.length!==2)throw Br.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});p5(e,n[0],n[1])}else if(typeof t=="object"&&t!==null){let r=Object.keys(t);for(let n=0;n<r.length;++n)p5(e,r[n],t[r[n]])}else throw Br.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}function p5(e,t,r){if(r=Jse(r),RE(t)){if(!zse(r))throw Br.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Br.errors.invalidArgument({prefix:"Headers.append",value:t,type:"header name"});if(Xse(e)==="immutable")throw new TypeError("immutable");return m5(e).append(t,r,!1)}function Zse(e,t){return e[0]<t[0]?-1:1}var zD=class e{cookies=null;constructor(t){t instanceof e?(this[Ti]=new Map(t[Ti]),this[Ba]=t[Ba],this.cookies=t.cookies===null?null:[...t.cookies]):(this[Ti]=new Map(t),this[Ba]=null)}contains(t,r){return this[Ti].has(r?t:t.toLowerCase())}clear(){this[Ti].clear(),this[Ba]=null,this.cookies=null}append(t,r,n){this[Ba]=null;let i=n?t:t.toLowerCase(),s=this[Ti].get(i);if(s){let o=i==="cookie"?"; ":", ";this[Ti].set(i,{name:s.name,value:`${s.value}${o}${r}`})}else this[Ti].set(i,{name:t,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(t,r,n){this[Ba]=null;let i=n?t:t.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[Ti].set(i,{name:t,value:r})}delete(t,r){this[Ba]=null,r||(t=t.toLowerCase()),t==="set-cookie"&&(this.cookies=null),this[Ti].delete(t)}get(t,r){return this[Ti].get(r?t:t.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:t,1:{value:r}}of this[Ti])yield[t,r]}get entries(){let t={};if(this[Ti].size!==0)for(let{name:r,value:n}of this[Ti].values())t[r]=n;return t}rawValues(){return this[Ti].values()}get entriesList(){let t=[];if(this[Ti].size!==0)for(let{0:r,1:{name:n,value:i}}of this[Ti])if(r==="set-cookie")for(let s of this.cookies)t.push([n,s]);else t.push([n,i]);return t}toSortedArray(){let t=this[Ti].size,r=new Array(t);if(t<=32){if(t===0)return r;let n=this[Ti][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],g5(i[1].value!==null);for(let s=1,o=0,a=0,l=0,c=0,u,f;s<t;++s){for(f=n.next().value,u=r[s]=[f[0],f[1].value],g5(u[1]!==null),l=0,a=s;l<a;)c=l+(a-l>>1),r[c][0]<=u[0]?l=c+1:a=c;if(s!==c){for(o=s;o>l;)r[o]=r[--o];r[l]=u}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:s}}of this[Ti])r[n++]=[i,s],g5(s!==null);return r.sort(Zse)}}},Sc=class e{#e;#t;constructor(t=void 0){Br.util.markAsUncloneable(this),t!==b$e&&(this.#t=new zD,this.#e="none",t!==void 0&&(t=Br.converters.HeadersInit(t,"Headers contructor","init"),jse(this,t)))}append(t,r){Br.brandCheck(this,e),Br.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return t=Br.converters.ByteString(t,n,"name"),r=Br.converters.ByteString(r,n,"value"),p5(this,t,r)}delete(t){Br.brandCheck(this,e),Br.argumentLengthCheck(arguments,1,"Headers.delete");let r="Headers.delete";if(t=Br.converters.ByteString(t,r,"name"),!RE(t))throw Br.errors.invalidArgument({prefix:"Headers.delete",value:t,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(t,!1)&&this.#t.delete(t,!1)}get(t){Br.brandCheck(this,e),Br.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(t=Br.converters.ByteString(t,r,"name"),!RE(t))throw Br.errors.invalidArgument({prefix:r,value:t,type:"header name"});return this.#t.get(t,!1)}has(t){Br.brandCheck(this,e),Br.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(t=Br.converters.ByteString(t,r,"name"),!RE(t))throw Br.errors.invalidArgument({prefix:r,value:t,type:"header name"});return this.#t.contains(t,!1)}set(t,r){Br.brandCheck(this,e),Br.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(t=Br.converters.ByteString(t,n,"name"),r=Br.converters.ByteString(r,n,"value"),r=Jse(r),RE(t)){if(!zse(r))throw Br.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Br.errors.invalidArgument({prefix:n,value:t,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(t,r,!1)}getSetCookie(){Br.brandCheck(this,e);let t=this.#t.cookies;return t?[...t]:[]}get[Ba](){if(this.#t[Ba])return this.#t[Ba];let t=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[Ba]=r;for(let i=0;i<r.length;++i){let{0:s,1:o}=r[i];if(s==="set-cookie")for(let a=0;a<n.length;++a)t.push([s,n[a]]);else t.push([s,o])}return this.#t[Ba]=t}[KD.inspect.custom](t,r){return r.depth??=t,`Headers ${KD.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(t){return t.#e}static setHeadersGuard(t,r){t.#e=r}static getHeadersList(t){return t.#t}static setHeadersList(t,r){t.#t=r}},{getHeadersGuard:Xse,setHeadersGuard:_$e,getHeadersList:m5,setHeadersList:x$e}=Sc;Reflect.deleteProperty(Sc,"getHeadersGuard");Reflect.deleteProperty(Sc,"setHeadersGuard");Reflect.deleteProperty(Sc,"getHeadersList");Reflect.deleteProperty(Sc,"setHeadersList");E$e("Headers",Sc,Ba,0,1);Object.defineProperties(Sc.prototype,{append:Y0,delete:Y0,get:Y0,has:Y0,set:Y0,getSetCookie:Y0,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[KD.inspect.custom]:{enumerable:!1}});Br.converters.HeadersInit=function(e,t,r){if(Br.util.Type(e)==="Object"){let n=Reflect.get(e,Symbol.iterator);if(!KD.types.isProxy(e)&&n===Sc.prototype.entries)try{return m5(e).entriesList}catch{}return typeof n=="function"?Br.converters["sequence<sequence<ByteString>>"](e,t,r,n.bind(e)):Br.converters["record<ByteString, ByteString>"](e,t,r)}throw Br.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};eoe.exports={fill:jse,compareHeaderName:Zse,Headers:Sc,HeadersList:zD,getHeadersGuard:Xse,setHeadersGuard:_$e,setHeadersList:x$e,getHeadersList:m5}});var ME=_((qTt,uoe)=>{"use strict";var{Headers:ooe,HeadersList:toe,fill:w$e,getHeadersGuard:S$e,setHeadersGuard:aoe,setHeadersList:loe}=kp(),{extractBody:roe,cloneBody:I$e,mixinBody:B$e,hasFinalizationRegistry:D$e,streamRegistry:T$e,bodyUnusable:R$e}=D0(),A5=nr(),noe=require("util"),{kEnumerableProperty:Da}=A5,{isValidReasonPhrase:k$e,isCancelled:M$e,isAborted:F$e,isBlobLike:Q$e,serializeJavascriptValueToJSONString:N$e,isErrorLike:P$e,isomorphicEncode:L$e,environmentSettingsObject:U$e}=wa(),{redirectStatusSet:O$e,nullBodyStatus:q$e}=Xb(),{kState:ci,kHeaders:Hd}=ah(),{webidl:$t}=xs(),{FormData:V$e}=sE(),{URLSerializer:ioe}=Go(),{kConstruct:jD}=Gn(),y5=require("assert"),{types:H$e}=require("util"),W$e=new TextEncoder("utf-8"),Mp=class e{static error(){return kE(ZD(),"immutable")}static json(t,r={}){$t.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=$t.converters.ResponseInit(r));let n=W$e.encode(N$e(t)),i=roe(n),s=kE(K0({}),"response");return soe(s,r,{body:i[0],type:"application/json"}),s}static redirect(t,r=302){$t.argumentLengthCheck(arguments,1,"Response.redirect"),t=$t.converters.USVString(t),r=$t.converters["unsigned short"](r);let n;try{n=new URL(t,U$e.settingsObject.baseUrl)}catch(o){throw new TypeError(`Failed to parse URL from ${t}`,{cause:o})}if(!O$e.has(r))throw new RangeError(`Invalid status code ${r}`);let i=kE(K0({}),"immutable");i[ci].status=r;let s=L$e(ioe(n));return i[ci].headersList.append("location",s,!0),i}constructor(t=null,r={}){if($t.util.markAsUncloneable(this),t===jD)return;t!==null&&(t=$t.converters.BodyInit(t)),r=$t.converters.ResponseInit(r),this[ci]=K0({}),this[Hd]=new ooe(jD),aoe(this[Hd],"response"),loe(this[Hd],this[ci].headersList);let n=null;if(t!=null){let[i,s]=roe(t);n={body:i,type:s}}soe(this,r,n)}get type(){return $t.brandCheck(this,e),this[ci].type}get url(){$t.brandCheck(this,e);let t=this[ci].urlList,r=t[t.length-1]??null;return r===null?"":ioe(r,!0)}get redirected(){return $t.brandCheck(this,e),this[ci].urlList.length>1}get status(){return $t.brandCheck(this,e),this[ci].status}get ok(){return $t.brandCheck(this,e),this[ci].status>=200&&this[ci].status<=299}get statusText(){return $t.brandCheck(this,e),this[ci].statusText}get headers(){return $t.brandCheck(this,e),this[Hd]}get body(){return $t.brandCheck(this,e),this[ci].body?this[ci].body.stream:null}get bodyUsed(){return $t.brandCheck(this,e),!!this[ci].body&&A5.isDisturbed(this[ci].body.stream)}clone(){if($t.brandCheck(this,e),R$e(this))throw $t.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let t=v5(this[ci]);return kE(t,S$e(this[Hd]))}[noe.inspect.custom](t,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${noe.formatWithOptions(r,n)}`}};B$e(Mp);Object.defineProperties(Mp.prototype,{type:Da,url:Da,status:Da,ok:Da,redirected:Da,statusText:Da,headers:Da,clone:Da,body:Da,bodyUsed:Da,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(Mp,{json:Da,redirect:Da,error:Da});function v5(e){if(e.internalResponse)return coe(v5(e.internalResponse),e.type);let t=K0({...e,body:null});return e.body!=null&&(t.body=I$e(t,e.body)),t}function K0(e){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...e,headersList:e?.headersList?new toe(e?.headersList):new toe,urlList:e?.urlList?[...e.urlList]:[]}}function ZD(e){let t=P$e(e);return K0({type:"error",status:0,error:t?e:new Error(e&&String(e)),aborted:e&&e.name==="AbortError"})}function G$e(e){return e.type==="error"&&e.status===0}function JD(e,t){return t={internalResponse:e,...t},new Proxy(e,{get(r,n){return n in t?t[n]:r[n]},set(r,n,i){return y5(!(n in t)),r[n]=i,!0}})}function coe(e,t){if(t==="basic")return JD(e,{type:"basic",headersList:e.headersList});if(t==="cors")return JD(e,{type:"cors",headersList:e.headersList});if(t==="opaque")return JD(e,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(t==="opaqueredirect")return JD(e,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});y5(!1)}function $$e(e,t=null){return y5(M$e(e)),F$e(e)?ZD(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:t})):ZD(Object.assign(new DOMException("Request was cancelled."),{cause:t}))}function soe(e,t,r){if(t.status!==null&&(t.status<200||t.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in t&&t.statusText!=null&&!k$e(String(t.statusText)))throw new TypeError("Invalid statusText");if("status"in t&&t.status!=null&&(e[ci].status=t.status),"statusText"in t&&t.statusText!=null&&(e[ci].statusText=t.statusText),"headers"in t&&t.headers!=null&&w$e(e[Hd],t.headers),r){if(q$e.includes(e.status))throw $t.errors.exception({header:"Response constructor",message:`Invalid response status code ${e.status}`});e[ci].body=r.body,r.type!=null&&!e[ci].headersList.contains("content-type",!0)&&e[ci].headersList.append("content-type",r.type,!0)}}function kE(e,t){let r=new Mp(jD);return r[ci]=e,r[Hd]=new ooe(jD),loe(r[Hd],e.headersList),aoe(r[Hd],t),D$e&&e.body?.stream&&T$e.register(r,new WeakRef(e.body.stream)),r}$t.converters.ReadableStream=$t.interfaceConverter(ReadableStream);$t.converters.FormData=$t.interfaceConverter(V$e);$t.converters.URLSearchParams=$t.interfaceConverter(URLSearchParams);$t.converters.XMLHttpRequestBodyInit=function(e,t,r){return typeof e=="string"?$t.converters.USVString(e,t,r):Q$e(e)?$t.converters.Blob(e,t,r,{strict:!1}):ArrayBuffer.isView(e)||H$e.isArrayBuffer(e)?$t.converters.BufferSource(e,t,r):A5.isFormDataLike(e)?$t.converters.FormData(e,t,r,{strict:!1}):e instanceof URLSearchParams?$t.converters.URLSearchParams(e,t,r):$t.converters.DOMString(e,t,r)};$t.converters.BodyInit=function(e,t,r){return e instanceof ReadableStream?$t.converters.ReadableStream(e,t,r):e?.[Symbol.asyncIterator]?e:$t.converters.XMLHttpRequestBodyInit(e,t,r)};$t.converters.ResponseInit=$t.dictionaryConverter([{key:"status",converter:$t.converters["unsigned short"],defaultValue:()=>200},{key:"statusText",converter:$t.converters.ByteString,defaultValue:()=>""},{key:"headers",converter:$t.converters.HeadersInit}]);uoe.exports={isNetworkError:G$e,makeNetworkError:ZD,makeResponse:K0,makeAppropriateNetworkError:$$e,filterResponse:coe,Response:Mp,cloneResponse:v5,fromInnerResponse:kE}});var goe=_((VTt,hoe)=>{"use strict";var{kConnected:doe,kSize:foe}=Gn(),C5=class{constructor(t){this.value=t}deref(){return this.value[doe]===0&&this.value[foe]===0?void 0:this.value}},b5=class{constructor(t){this.finalizer=t}register(t,r){t.on&&t.on("disconnect",()=>{t[doe]===0&&t[foe]===0&&this.finalizer(r)})}unregister(t){}};hoe.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:C5,FinalizationRegistry:b5}):{WeakRef,FinalizationRegistry}}});var z0=_((HTt,Doe)=>{"use strict";var{extractBody:Y$e,mixinBody:K$e,cloneBody:z$e,bodyUnusable:poe}=D0(),{Headers:xoe,fill:J$e,HeadersList:rT,setHeadersGuard:_5,getHeadersGuard:j$e,setHeadersList:woe,getHeadersList:moe}=kp(),{FinalizationRegistry:Z$e}=goe()(),eT=nr(),Aoe=require("util"),{isValidHTTPToken:X$e,sameOrigin:yoe,environmentSettingsObject:XD}=wa(),{forbiddenMethodsSet:eYe,corsSafeListedMethodsSet:tYe,referrerPolicy:rYe,requestRedirect:nYe,requestMode:iYe,requestCredentials:sYe,requestCache:oYe,requestDuplex:aYe}=Xb(),{kEnumerableProperty:Ri,normalizedMethodRecordsBase:lYe,normalizedMethodRecords:cYe}=eT,{kHeaders:Ta,kSignal:tT,kState:Qn,kDispatcher:E5}=ah(),{webidl:pt}=xs(),{URLSerializer:uYe}=Go(),{kConstruct:nT}=Gn(),dYe=require("assert"),{getMaxListeners:voe,setMaxListeners:Coe,getEventListeners:fYe,defaultMaxListeners:boe}=require("events"),hYe=Symbol("abortController"),Soe=new Z$e(({signal:e,abort:t})=>{e.removeEventListener("abort",t)}),iT=new WeakMap;function Eoe(e){return t;function t(){let r=e.deref();if(r!==void 0){Soe.unregister(t),this.removeEventListener("abort",t),r.abort(this.reason);let n=iT.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let s=i.deref();s!==void 0&&s.abort(this.reason)}n.clear()}iT.delete(r.signal)}}}}var _oe=!1,yh=class e{constructor(t,r={}){if(pt.util.markAsUncloneable(this),t===nT)return;let n="Request constructor";pt.argumentLengthCheck(arguments,1,n),t=pt.converters.RequestInfo(t,n,"input"),r=pt.converters.RequestInit(r,n,"init");let i=null,s=null,o=XD.settingsObject.baseUrl,a=null;if(typeof t=="string"){this[E5]=r.dispatcher;let C;try{C=new URL(t,o)}catch(E){throw new TypeError("Failed to parse URL from "+t,{cause:E})}if(C.username||C.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+t);i=sT({urlList:[C]}),s="cors"}else this[E5]=r.dispatcher||t[E5],dYe(t instanceof e),i=t[Qn],a=t[tT];let l=XD.settingsObject.origin,c="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&yoe(i.window,l)&&(c=i.window),r.window!=null)throw new TypeError(`'window' option '${c}' must be null`);"window"in r&&(c="no-window"),i=sT({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:XD.settingsObject,window:c,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let u=Object.keys(r).length!==0;if(u&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let C=r.referrer;if(C==="")i.referrer="no-referrer";else{let E;try{E=new URL(C,o)}catch(w){throw new TypeError(`Referrer "${C}" is not a valid URL.`,{cause:w})}E.protocol==="about:"&&E.hostname==="client"||l&&!yoe(E,XD.settingsObject.baseUrl)?i.referrer="client":i.referrer=E}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let f;if(r.mode!==void 0?f=r.mode:f=s,f==="navigate")throw pt.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(f!=null&&(i.mode=f),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let C=r.method,E=cYe[C];if(E!==void 0)i.method=E;else{if(!X$e(C))throw new TypeError(`'${C}' is not a valid HTTP method.`);let w=C.toUpperCase();if(eYe.has(w))throw new TypeError(`'${C}' HTTP method is unsupported.`);C=lYe[w]??C,i.method=C}!_oe&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),_oe=!0)}r.signal!==void 0&&(a=r.signal),this[Qn]=i;let p=new AbortController;if(this[tT]=p.signal,a!=null){if(!a||typeof a.aborted!="boolean"||typeof a.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(a.aborted)p.abort(a.reason);else{this[hYe]=p;let C=new WeakRef(p),E=Eoe(C);try{(typeof voe=="function"&&voe(a)===boe||fYe(a,"abort").length>=boe)&&Coe(1500,a)}catch{}eT.addAbortListener(a,E),Soe.register(p,{signal:a,abort:E},E)}}if(this[Ta]=new xoe(nT),woe(this[Ta],i.headersList),_5(this[Ta],"request"),f==="no-cors"){if(!tYe.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);_5(this[Ta],"request-no-cors")}if(u){let C=moe(this[Ta]),E=r.headers!==void 0?r.headers:new rT(C);if(C.clear(),E instanceof rT){for(let{name:w,value:B}of E.rawValues())C.append(w,B,!1);C.cookies=E.cookies}else J$e(this[Ta],E)}let g=t instanceof e?t[Qn].body:null;if((r.body!=null||g!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let m=null;if(r.body!=null){let[C,E]=Y$e(r.body,i.keepalive);m=C,E&&!moe(this[Ta]).contains("content-type",!0)&&this[Ta].append("content-type",E)}let y=m??g;if(y!=null&&y.source==null){if(m!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let v=y;if(m==null&&g!=null){if(poe(t))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let C=new TransformStream;g.stream.pipeThrough(C),v={source:g.source,length:g.length,stream:C.readable}}this[Qn].body=v}get method(){return pt.brandCheck(this,e),this[Qn].method}get url(){return pt.brandCheck(this,e),uYe(this[Qn].url)}get headers(){return pt.brandCheck(this,e),this[Ta]}get destination(){return pt.brandCheck(this,e),this[Qn].destination}get referrer(){return pt.brandCheck(this,e),this[Qn].referrer==="no-referrer"?"":this[Qn].referrer==="client"?"about:client":this[Qn].referrer.toString()}get referrerPolicy(){return pt.brandCheck(this,e),this[Qn].referrerPolicy}get mode(){return pt.brandCheck(this,e),this[Qn].mode}get credentials(){return this[Qn].credentials}get cache(){return pt.brandCheck(this,e),this[Qn].cache}get redirect(){return pt.brandCheck(this,e),this[Qn].redirect}get integrity(){return pt.brandCheck(this,e),this[Qn].integrity}get keepalive(){return pt.brandCheck(this,e),this[Qn].keepalive}get isReloadNavigation(){return pt.brandCheck(this,e),this[Qn].reloadNavigation}get isHistoryNavigation(){return pt.brandCheck(this,e),this[Qn].historyNavigation}get signal(){return pt.brandCheck(this,e),this[tT]}get body(){return pt.brandCheck(this,e),this[Qn].body?this[Qn].body.stream:null}get bodyUsed(){return pt.brandCheck(this,e),!!this[Qn].body&&eT.isDisturbed(this[Qn].body.stream)}get duplex(){return pt.brandCheck(this,e),"half"}clone(){if(pt.brandCheck(this,e),poe(this))throw new TypeError("unusable");let t=Ioe(this[Qn]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=iT.get(this.signal);n===void 0&&(n=new Set,iT.set(this.signal,n));let i=new WeakRef(r);n.add(i),eT.addAbortListener(r.signal,Eoe(i))}return Boe(t,r.signal,j$e(this[Ta]))}[Aoe.inspect.custom](t,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${Aoe.formatWithOptions(r,n)}`}};K$e(yh);function sT(e){return{method:e.method??"GET",localURLsOnly:e.localURLsOnly??!1,unsafeRequest:e.unsafeRequest??!1,body:e.body??null,client:e.client??null,reservedClient:e.reservedClient??null,replacesClientId:e.replacesClientId??"",window:e.window??"client",keepalive:e.keepalive??!1,serviceWorkers:e.serviceWorkers??"all",initiator:e.initiator??"",destination:e.destination??"",priority:e.priority??null,origin:e.origin??"client",policyContainer:e.policyContainer??"client",referrer:e.referrer??"client",referrerPolicy:e.referrerPolicy??"",mode:e.mode??"no-cors",useCORSPreflightFlag:e.useCORSPreflightFlag??!1,credentials:e.credentials??"same-origin",useCredentials:e.useCredentials??!1,cache:e.cache??"default",redirect:e.redirect??"follow",integrity:e.integrity??"",cryptoGraphicsNonceMetadata:e.cryptoGraphicsNonceMetadata??"",parserMetadata:e.parserMetadata??"",reloadNavigation:e.reloadNavigation??!1,historyNavigation:e.historyNavigation??!1,userActivation:e.userActivation??!1,taintedOrigin:e.taintedOrigin??!1,redirectCount:e.redirectCount??0,responseTainting:e.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:e.preventNoCacheCacheControlHeaderModification??!1,done:e.done??!1,timingAllowFailed:e.timingAllowFailed??!1,urlList:e.urlList,url:e.urlList[0],headersList:e.headersList?new rT(e.headersList):new rT}}function Ioe(e){let t=sT({...e,body:null});return e.body!=null&&(t.body=z$e(t,e.body)),t}function Boe(e,t,r){let n=new yh(nT);return n[Qn]=e,n[tT]=t,n[Ta]=new xoe(nT),woe(n[Ta],e.headersList),_5(n[Ta],r),n}Object.defineProperties(yh.prototype,{method:Ri,url:Ri,headers:Ri,redirect:Ri,clone:Ri,signal:Ri,duplex:Ri,destination:Ri,body:Ri,bodyUsed:Ri,isHistoryNavigation:Ri,isReloadNavigation:Ri,keepalive:Ri,integrity:Ri,cache:Ri,credentials:Ri,attribute:Ri,referrerPolicy:Ri,referrer:Ri,mode:Ri,[Symbol.toStringTag]:{value:"Request",configurable:!0}});pt.converters.Request=pt.interfaceConverter(yh);pt.converters.RequestInfo=function(e,t,r){return typeof e=="string"?pt.converters.USVString(e,t,r):e instanceof yh?pt.converters.Request(e,t,r):pt.converters.USVString(e,t,r)};pt.converters.AbortSignal=pt.interfaceConverter(AbortSignal);pt.converters.RequestInit=pt.dictionaryConverter([{key:"method",converter:pt.converters.ByteString},{key:"headers",converter:pt.converters.HeadersInit},{key:"body",converter:pt.nullableConverter(pt.converters.BodyInit)},{key:"referrer",converter:pt.converters.USVString},{key:"referrerPolicy",converter:pt.converters.DOMString,allowedValues:rYe},{key:"mode",converter:pt.converters.DOMString,allowedValues:iYe},{key:"credentials",converter:pt.converters.DOMString,allowedValues:sYe},{key:"cache",converter:pt.converters.DOMString,allowedValues:oYe},{key:"redirect",converter:pt.converters.DOMString,allowedValues:nYe},{key:"integrity",converter:pt.converters.DOMString},{key:"keepalive",converter:pt.converters.boolean},{key:"signal",converter:pt.nullableConverter(e=>pt.converters.AbortSignal(e,"RequestInit","signal",{strict:!1}))},{key:"window",converter:pt.converters.any},{key:"duplex",converter:pt.converters.DOMString,allowedValues:aYe},{key:"dispatcher",converter:pt.converters.any}]);Doe.exports={Request:yh,makeRequest:sT,fromInnerRequest:Boe,cloneRequest:Ioe}});var QE=_((WTt,Woe)=>{"use strict";var{makeNetworkError:dn,makeAppropriateNetworkError:oT,filterResponse:x5,makeResponse:aT,fromInnerResponse:gYe}=ME(),{HeadersList:Toe}=kp(),{Request:pYe,cloneRequest:mYe}=z0(),vh=require("zlib"),{bytesMatch:AYe,makePolicyContainer:yYe,clonePolicyContainer:vYe,requestBadPort:CYe,TAOCheck:bYe,appendRequestOriginHeader:EYe,responseLocationURL:_Ye,requestCurrentURL:wu,setRequestReferrerPolicyOnRedirect:xYe,tryUpgradeRequestToAPotentiallyTrustworthyURL:wYe,createOpaqueTimingInfo:D5,appendFetchMetadata:SYe,corsCheck:IYe,crossOriginResourcePolicyCheck:BYe,determineRequestsReferrer:DYe,coarsenedSharedCurrentTime:FE,createDeferredPromise:TYe,isBlobLike:RYe,sameOrigin:B5,isCancelled:Fp,isAborted:Roe,isErrorLike:kYe,fullyReadBody:MYe,readableStreamClose:FYe,isomorphicEncode:lT,urlIsLocal:QYe,urlIsHttpHttpsScheme:T5,urlHasHttpsScheme:NYe,clampAndCoarsenConnectionTimingInfo:PYe,simpleRangeHeaderValue:LYe,buildContentRange:UYe,createInflate:OYe,extractMimeType:qYe}=wa(),{kState:Qoe,kDispatcher:VYe}=ah(),Qp=require("assert"),{safelyExtractBody:R5,extractBody:koe}=D0(),{redirectStatusSet:Noe,nullBodyStatus:Poe,safeMethodsSet:HYe,requestBodyHeader:WYe,subresourceSet:GYe}=Xb(),$Ye=require("events"),{Readable:YYe,pipeline:KYe,finished:zYe}=require("stream"),{addAbortListener:JYe,isErrored:jYe,isReadable:cT,bufferToLowerCasedHeaderName:Moe}=nr(),{dataURLProcessor:ZYe,serializeAMimeType:XYe,minimizeSupportedMimeType:eKe}=Go(),{getGlobalDispatcher:tKe}=$D(),{webidl:rKe}=xs(),{STATUS_CODES:nKe}=require("http"),iKe=["GET","HEAD"],sKe=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",w5,uT=class extends $Ye{constructor(t){super(),this.dispatcher=t,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(t){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(t),this.emit("terminated",t))}abort(t){this.state==="ongoing"&&(this.state="aborted",t||(t=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=t,this.connection?.destroy(t),this.emit("terminated",t))}};function oKe(e){Loe(e,"fetch")}function aKe(e,t=void 0){rKe.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=TYe(),n;try{n=new pYe(e,t)}catch(u){return r.reject(u),r.promise}let i=n[Qoe];if(n.signal.aborted)return S5(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let o=null,a=!1,l=null;return JYe(n.signal,()=>{a=!0,Qp(l!=null),l.abort(n.signal.reason);let u=o?.deref();S5(r,i,u,n.signal.reason)}),l=Ooe({request:i,processResponseEndOfBody:oKe,processResponse:u=>{if(!a){if(u.aborted){S5(r,i,o,l.serializedAbortReason);return}if(u.type==="error"){r.reject(new TypeError("fetch failed",{cause:u.error}));return}o=new WeakRef(gYe(u,"immutable")),r.resolve(o.deref()),r=null}},dispatcher:n[VYe]}),r.promise}function Loe(e,t="other"){if(e.type==="error"&&e.aborted||!e.urlList?.length)return;let r=e.urlList[0],n=e.timingInfo,i=e.cacheState;T5(r)&&n!==null&&(e.timingAllowPassed||(n=D5({startTime:n.startTime}),i=""),n.endTime=FE(),e.timingInfo=n,Uoe(n,r.href,t,globalThis,i))}var Uoe=performance.markResourceTiming;function S5(e,t,r,n){if(e&&e.reject(n),t.body!=null&&cT(t.body?.stream)&&t.body.stream.cancel(n).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s}),r==null)return;let i=r[Qoe];i.body!=null&&cT(i.body?.stream)&&i.body.stream.cancel(n).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s})}function Ooe({request:e,processRequestBodyChunkLength:t,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:s,useParallelQueue:o=!1,dispatcher:a=tKe()}){Qp(a);let l=null,c=!1;e.client!=null&&(l=e.client.globalObject,c=e.client.crossOriginIsolatedCapability);let u=FE(c),f=D5({startTime:u}),p={controller:new uT(a),request:e,timingInfo:f,processRequestBodyChunkLength:t,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:s,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:c};if(Qp(!e.body||e.body.stream),e.window==="client"&&(e.window=e.client?.globalObject?.constructor?.name==="Window"?e.client:"no-window"),e.origin==="client"&&(e.origin=e.client.origin),e.policyContainer==="client"&&(e.client!=null?e.policyContainer=vYe(e.client.policyContainer):e.policyContainer=yYe()),!e.headersList.contains("accept",!0)){let g="*/*";e.headersList.append("accept",g,!0)}return e.headersList.contains("accept-language",!0)||e.headersList.append("accept-language","*",!0),e.priority,GYe.has(e.destination),qoe(p).catch(g=>{p.controller.terminate(g)}),p.controller}async function qoe(e,t=!1){let r=e.request,n=null;if(r.localURLsOnly&&!QYe(wu(r))&&(n=dn("local URLs only")),wYe(r),CYe(r)==="blocked"&&(n=dn("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=DYe(r)),n===null&&(n=await(async()=>{let s=wu(r);return B5(s,r.url)&&r.responseTainting==="basic"||s.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await Foe(e)):r.mode==="same-origin"?dn('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?dn('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await Foe(e)):T5(wu(r))?(r.responseTainting="cors",await Voe(e)):dn("URL scheme must be a HTTP(S) scheme")})()),t)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=x5(n,"basic"):r.responseTainting==="cors"?n=x5(n,"cors"):r.responseTainting==="opaque"?n=x5(n,"opaque"):Qp(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=dn()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||Poe.includes(i.status))&&(i.body=null,e.controller.dump=!0),r.integrity){let s=a=>I5(e,dn(a));if(r.responseTainting==="opaque"||n.body==null){s(n.error);return}let o=a=>{if(!AYe(a,r.integrity)){s("integrity mismatch");return}n.body=R5(a)[0],I5(e,n)};await MYe(n.body,o,s)}else I5(e,n)}function Foe(e){if(Fp(e)&&e.request.redirectCount===0)return Promise.resolve(oT(e));let{request:t}=e,{protocol:r}=wu(t);switch(r){case"about:":return Promise.resolve(dn("about scheme is not supported"));case"blob:":{w5||(w5=require("buffer").resolveObjectURL);let n=wu(t);if(n.search.length!==0)return Promise.resolve(dn("NetworkError when attempting to fetch resource."));let i=w5(n.toString());if(t.method!=="GET"||!RYe(i))return Promise.resolve(dn("invalid method"));let s=aT(),o=i.size,a=lT(`${o}`),l=i.type;if(t.headersList.contains("range",!0)){s.rangeRequested=!0;let c=t.headersList.get("range",!0),u=LYe(c,!0);if(u==="failure")return Promise.resolve(dn("failed to fetch the data URL"));let{rangeStartValue:f,rangeEndValue:p}=u;if(f===null)f=o-p,p=f+p-1;else{if(f>=o)return Promise.resolve(dn("Range start is greater than the blob's size."));(p===null||p>=o)&&(p=o-1)}let g=i.slice(f,p,l),m=koe(g);s.body=m[0];let y=lT(`${g.size}`),v=UYe(f,p,o);s.status=206,s.statusText="Partial Content",s.headersList.set("content-length",y,!0),s.headersList.set("content-type",l,!0),s.headersList.set("content-range",v,!0)}else{let c=koe(i);s.statusText="OK",s.body=c[0],s.headersList.set("content-length",a,!0),s.headersList.set("content-type",l,!0)}return Promise.resolve(s)}case"data:":{let n=wu(t),i=ZYe(n);if(i==="failure")return Promise.resolve(dn("failed to fetch the data URL"));let s=XYe(i.mimeType);return Promise.resolve(aT({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:s}]],body:R5(i.body)[0]}))}case"file:":return Promise.resolve(dn("not implemented... yet..."));case"http:":case"https:":return Voe(e).catch(n=>dn(n));default:return Promise.resolve(dn("unknown scheme"))}}function lKe(e,t){e.request.done=!0,e.processResponseDone!=null&&queueMicrotask(()=>e.processResponseDone(t))}function I5(e,t){let r=e.timingInfo,n=()=>{let s=Date.now();e.request.destination==="document"&&(e.controller.fullTimingInfo=r),e.controller.reportTimingSteps=()=>{if(e.request.url.protocol!=="https:")return;r.endTime=s;let a=t.cacheState,l=t.bodyInfo;t.timingAllowPassed||(r=D5(r),a="");let c=0;if(e.request.mode!=="navigator"||!t.hasCrossOriginRedirects){c=t.status;let u=qYe(t.headersList);u!=="failure"&&(l.contentType=eKe(u))}e.request.initiatorType!=null&&Uoe(r,e.request.url.href,e.request.initiatorType,globalThis,a,l,c)};let o=()=>{e.request.done=!0,e.processResponseEndOfBody!=null&&queueMicrotask(()=>e.processResponseEndOfBody(t)),e.request.initiatorType!=null&&e.controller.reportTimingSteps()};queueMicrotask(()=>o())};e.processResponse!=null&&queueMicrotask(()=>{e.processResponse(t),e.processResponse=null});let i=t.type==="error"?t:t.internalResponse??t;i.body==null?n():zYe(i.body.stream,()=>{n()})}async function Voe(e){let t=e.request,r=null,n=null,i=e.timingInfo;if(t.serviceWorkers,r===null){if(t.redirect==="follow"&&(t.serviceWorkers="none"),n=r=await Hoe(e),t.responseTainting==="cors"&&IYe(t,r)==="failure")return dn("cors failure");bYe(t,r)==="failure"&&(t.timingAllowFailed=!0)}return(t.responseTainting==="opaque"||r.type==="opaque")&&BYe(t.origin,t.client,t.destination,n)==="blocked"?dn("blocked"):(Noe.has(n.status)&&(t.redirect!=="manual"&&e.controller.connection.destroy(void 0,!1),t.redirect==="error"?r=dn("unexpected redirect"):t.redirect==="manual"?r=n:t.redirect==="follow"?r=await cKe(e,r):Qp(!1)),r.timingInfo=i,r)}function cKe(e,t){let r=e.request,n=t.internalResponse?t.internalResponse:t,i;try{if(i=_Ye(n,wu(r).hash),i==null)return t}catch(o){return Promise.resolve(dn(o))}if(!T5(i))return Promise.resolve(dn("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(dn("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!B5(r,i))return Promise.resolve(dn('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(dn('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(dn());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!iKe.includes(r.method)){r.method="GET",r.body=null;for(let o of WYe)r.headersList.delete(o)}B5(wu(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(Qp(r.body.source!=null),r.body=R5(r.body.source)[0]);let s=e.timingInfo;return s.redirectEndTime=s.postRedirectStartTime=FE(e.crossOriginIsolatedCapability),s.redirectStartTime===0&&(s.redirectStartTime=s.startTime),r.urlList.push(i),xYe(r,n),qoe(e,!0)}async function Hoe(e,t=!1,r=!1){let n=e.request,i=null,s=null,o=null,a=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=e,s=n):(s=mYe(n),i={...e},i.request=s);let c=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",u=s.body?s.body.length:null,f=null;if(s.body==null&&["POST","PUT"].includes(s.method)&&(f="0"),u!=null&&(f=lT(`${u}`)),f!=null&&s.headersList.append("content-length",f,!0),u!=null&&s.keepalive,s.referrer instanceof URL&&s.headersList.append("referer",lT(s.referrer.href),!0),EYe(s),SYe(s),s.headersList.contains("user-agent",!0)||s.headersList.append("user-agent",sKe),s.cache==="default"&&(s.headersList.contains("if-modified-since",!0)||s.headersList.contains("if-none-match",!0)||s.headersList.contains("if-unmodified-since",!0)||s.headersList.contains("if-match",!0)||s.headersList.contains("if-range",!0))&&(s.cache="no-store"),s.cache==="no-cache"&&!s.preventNoCacheCacheControlHeaderModification&&!s.headersList.contains("cache-control",!0)&&s.headersList.append("cache-control","max-age=0",!0),(s.cache==="no-store"||s.cache==="reload")&&(s.headersList.contains("pragma",!0)||s.headersList.append("pragma","no-cache",!0),s.headersList.contains("cache-control",!0)||s.headersList.append("cache-control","no-cache",!0)),s.headersList.contains("range",!0)&&s.headersList.append("accept-encoding","identity",!0),s.headersList.contains("accept-encoding",!0)||(NYe(wu(s))?s.headersList.append("accept-encoding","br, gzip, deflate",!0):s.headersList.append("accept-encoding","gzip, deflate",!0)),s.headersList.delete("host",!0),a==null&&(s.cache="no-store"),s.cache!=="no-store"&&s.cache,o==null){if(s.cache==="only-if-cached")return dn("only if cached");let p=await uKe(i,c,r);!HYe.has(s.method)&&p.status>=200&&p.status<=399,l&&p.status,o==null&&(o=p)}if(o.urlList=[...s.urlList],s.headersList.contains("range",!0)&&(o.rangeRequested=!0),o.requestIncludesCredentials=c,o.status===407)return n.window==="no-window"?dn():Fp(e)?oT(e):dn("proxy authentication required");if(o.status===421&&!r&&(n.body==null||n.body.source!=null)){if(Fp(e))return oT(e);e.controller.connection.destroy(),o=await Hoe(e,t,!0)}return o}async function uKe(e,t=!1,r=!1){Qp(!e.controller.connection||e.controller.connection.destroyed),e.controller.connection={abort:null,destroyed:!1,destroy(m,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(m??new DOMException("The operation was aborted.","AbortError")))}};let n=e.request,i=null,s=e.timingInfo;null==null&&(n.cache="no-store");let a=r?"yes":"no";n.mode;let l=null;if(n.body==null&&e.processRequestEndOfBody)queueMicrotask(()=>e.processRequestEndOfBody());else if(n.body!=null){let m=async function*(C){Fp(e)||(yield C,e.processRequestBodyChunkLength?.(C.byteLength))},y=()=>{Fp(e)||e.processRequestEndOfBody&&e.processRequestEndOfBody()},v=C=>{Fp(e)||(C.name==="AbortError"?e.controller.abort():e.controller.terminate(C))};l=async function*(){try{for await(let C of n.body.stream)yield*m(C);y()}catch(C){v(C)}}()}try{let{body:m,status:y,statusText:v,headersList:C,socket:E}=await g({body:l});if(E)i=aT({status:y,statusText:v,headersList:C,socket:E});else{let w=m[Symbol.asyncIterator]();e.controller.next=()=>w.next(),i=aT({status:y,statusText:v,headersList:C})}}catch(m){return m.name==="AbortError"?(e.controller.connection.destroy(),oT(e,m)):dn(m)}let c=async()=>{await e.controller.resume()},u=m=>{Fp(e)||e.controller.abort(m)},f=new ReadableStream({async start(m){e.controller.controller=m},async pull(m){await c(m)},async cancel(m){await u(m)},type:"bytes"});i.body={stream:f,source:null,length:null},e.controller.onAborted=p,e.controller.on("terminated",p),e.controller.resume=async()=>{for(;;){let m,y;try{let{done:C,value:E}=await e.controller.next();if(Roe(e))break;m=C?void 0:E}catch(C){e.controller.ended&&!s.encodedBodySize?m=void 0:(m=C,y=!0)}if(m===void 0){FYe(e.controller.controller),lKe(e,i);return}if(s.decodedBodySize+=m?.byteLength??0,y){e.controller.terminate(m);return}let v=new Uint8Array(m);if(v.byteLength&&e.controller.controller.enqueue(v),jYe(f)){e.controller.terminate();return}if(e.controller.controller.desiredSize<=0)return}};function p(m){Roe(e)?(i.aborted=!0,cT(f)&&e.controller.controller.error(e.controller.serializedAbortReason)):cT(f)&&e.controller.controller.error(new TypeError("terminated",{cause:kYe(m)?m:void 0})),e.controller.connection.destroy()}return i;function g({body:m}){let y=wu(n),v=e.controller.dispatcher;return new Promise((C,E)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:v.isMockActive?n.body&&(n.body.source||n.body.stream):m,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(w){let{connection:B}=e.controller;s.finalConnectionTimingInfo=PYe(void 0,s.postRedirectStartTime,e.crossOriginIsolatedCapability),B.destroyed?w(new DOMException("The operation was aborted.","AbortError")):(e.controller.on("terminated",w),this.abort=B.abort=w),s.finalNetworkRequestStartTime=FE(e.crossOriginIsolatedCapability)},onResponseStarted(){s.finalNetworkResponseStartTime=FE(e.crossOriginIsolatedCapability)},onHeaders(w,B,R,N){if(w<200)return;let W=[],Z="",te=new Toe;for(let Q=0;Q<B.length;Q+=2)te.append(Moe(B[Q]),B[Q+1].toString("latin1"),!0);let Y=te.get("content-encoding",!0);Y&&(W=Y.toLowerCase().split(",").map(Q=>Q.trim())),Z=te.get("location",!0),this.body=new YYe({read:R});let U=[],ce=Z&&n.redirect==="follow"&&Noe.has(w);if(W.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!Poe.includes(w)&&!ce)for(let Q=W.length-1;Q>=0;--Q){let se=W[Q];if(se==="x-gzip"||se==="gzip")U.push(vh.createGunzip({flush:vh.constants.Z_SYNC_FLUSH,finishFlush:vh.constants.Z_SYNC_FLUSH}));else if(se==="deflate")U.push(OYe({flush:vh.constants.Z_SYNC_FLUSH,finishFlush:vh.constants.Z_SYNC_FLUSH}));else if(se==="br")U.push(vh.createBrotliDecompress({flush:vh.constants.BROTLI_OPERATION_FLUSH,finishFlush:vh.constants.BROTLI_OPERATION_FLUSH}));else{U.length=0;break}}let Ie=this.onError.bind(this);return C({status:w,statusText:N,headersList:te,body:U.length?KYe(this.body,...U,Q=>{Q&&this.onError(Q)}).on("error",Ie):this.body.on("error",Ie)}),!0},onData(w){if(e.controller.dump)return;let B=w;return s.encodedBodySize+=B.byteLength,this.body.push(B)},onComplete(){this.abort&&e.controller.off("terminated",this.abort),e.controller.onAborted&&e.controller.off("terminated",e.controller.onAborted),e.controller.ended=!0,this.body.push(null)},onError(w){this.abort&&e.controller.off("terminated",this.abort),this.body?.destroy(w),e.controller.terminate(w),E(w)},onUpgrade(w,B,R){if(w!==101)return;let N=new Toe;for(let W=0;W<B.length;W+=2)N.append(Moe(B[W]),B[W+1].toString("latin1"),!0);return C({status:w,statusText:nKe[w],headersList:N,socket:R}),!0}}))}}Woe.exports={fetch:aKe,Fetch:uT,fetching:Ooe,finalizeAndReportTiming:Loe}});var k5=_((GTt,Goe)=>{"use strict";Goe.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var Yoe=_(($Tt,$oe)=>{"use strict";var{webidl:Ra}=xs(),dT=Symbol("ProgressEvent state"),M5=class e extends Event{constructor(t,r={}){t=Ra.converters.DOMString(t,"ProgressEvent constructor","type"),r=Ra.converters.ProgressEventInit(r??{}),super(t,r),this[dT]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return Ra.brandCheck(this,e),this[dT].lengthComputable}get loaded(){return Ra.brandCheck(this,e),this[dT].loaded}get total(){return Ra.brandCheck(this,e),this[dT].total}};Ra.converters.ProgressEventInit=Ra.dictionaryConverter([{key:"lengthComputable",converter:Ra.converters.boolean,defaultValue:()=>!1},{key:"loaded",converter:Ra.converters["unsigned long long"],defaultValue:()=>0},{key:"total",converter:Ra.converters["unsigned long long"],defaultValue:()=>0},{key:"bubbles",converter:Ra.converters.boolean,defaultValue:()=>!1},{key:"cancelable",converter:Ra.converters.boolean,defaultValue:()=>!1},{key:"composed",converter:Ra.converters.boolean,defaultValue:()=>!1}]);$oe.exports={ProgressEvent:M5}});var zoe=_((YTt,Koe)=>{"use strict";function dKe(e){if(!e)return"failure";switch(e.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}Koe.exports={getEncoding:dKe}});var nae=_((KTt,rae)=>{"use strict";var{kState:J0,kError:F5,kResult:Joe,kAborted:NE,kLastProgressEventFired:Q5}=k5(),{ProgressEvent:fKe}=Yoe(),{getEncoding:joe}=zoe(),{serializeAMimeType:hKe,parseMIMEType:Zoe}=Go(),{types:gKe}=require("util"),{StringDecoder:Xoe}=require("string_decoder"),{btoa:eae}=require("buffer"),pKe={enumerable:!0,writable:!1,configurable:!1};function mKe(e,t,r,n){if(e[J0]==="loading")throw new DOMException("Invalid state","InvalidStateError");e[J0]="loading",e[Joe]=null,e[F5]=null;let s=t.stream().getReader(),o=[],a=s.read(),l=!0;(async()=>{for(;!e[NE];)try{let{done:c,value:u}=await a;if(l&&!e[NE]&&queueMicrotask(()=>{Ch("loadstart",e)}),l=!1,!c&&gKe.isUint8Array(u))o.push(u),(e[Q5]===void 0||Date.now()-e[Q5]>=50)&&!e[NE]&&(e[Q5]=Date.now(),queueMicrotask(()=>{Ch("progress",e)})),a=s.read();else if(c){queueMicrotask(()=>{e[J0]="done";try{let f=AKe(o,r,t.type,n);if(e[NE])return;e[Joe]=f,Ch("load",e)}catch(f){e[F5]=f,Ch("error",e)}e[J0]!=="loading"&&Ch("loadend",e)});break}}catch(c){if(e[NE])return;queueMicrotask(()=>{e[J0]="done",e[F5]=c,Ch("error",e),e[J0]!=="loading"&&Ch("loadend",e)});break}})()}function Ch(e,t){let r=new fKe(e,{bubbles:!1,cancelable:!1});t.dispatchEvent(r)}function AKe(e,t,r,n){switch(t){case"DataURL":{let i="data:",s=Zoe(r||"application/octet-stream");s!=="failure"&&(i+=hKe(s)),i+=";base64,";let o=new Xoe("latin1");for(let a of e)i+=eae(o.write(a));return i+=eae(o.end()),i}case"Text":{let i="failure";if(n&&(i=joe(n)),i==="failure"&&r){let s=Zoe(r);s!=="failure"&&(i=joe(s.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),yKe(e,i)}case"ArrayBuffer":return tae(e).buffer;case"BinaryString":{let i="",s=new Xoe("latin1");for(let o of e)i+=s.write(o);return i+=s.end(),i}}}function yKe(e,t){let r=tae(e),n=vKe(r),i=0;n!==null&&(t=n,i=n==="UTF-8"?3:2);let s=r.slice(i);return new TextDecoder(t).decode(s)}function vKe(e){let[t,r,n]=e;return t===239&&r===187&&n===191?"UTF-8":t===254&&r===255?"UTF-16BE":t===255&&r===254?"UTF-16LE":null}function tae(e){let t=e.reduce((n,i)=>n+i.byteLength,0),r=0;return e.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(t))}rae.exports={staticPropertyDescriptors:pKe,readOperation:mKe,fireAProgressEvent:Ch}});var aae=_((zTt,oae)=>{"use strict";var{staticPropertyDescriptors:j0,readOperation:fT,fireAProgressEvent:iae}=nae(),{kState:Np,kError:sae,kResult:hT,kEvents:Jr,kAborted:CKe}=k5(),{webidl:gn}=xs(),{kEnumerableProperty:Ko}=nr(),Ic=class e extends EventTarget{constructor(){super(),this[Np]="empty",this[hT]=null,this[sae]=null,this[Jr]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(t){gn.brandCheck(this,e),gn.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),t=gn.converters.Blob(t,{strict:!1}),fT(this,t,"ArrayBuffer")}readAsBinaryString(t){gn.brandCheck(this,e),gn.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),t=gn.converters.Blob(t,{strict:!1}),fT(this,t,"BinaryString")}readAsText(t,r=void 0){gn.brandCheck(this,e),gn.argumentLengthCheck(arguments,1,"FileReader.readAsText"),t=gn.converters.Blob(t,{strict:!1}),r!==void 0&&(r=gn.converters.DOMString(r,"FileReader.readAsText","encoding")),fT(this,t,"Text",r)}readAsDataURL(t){gn.brandCheck(this,e),gn.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),t=gn.converters.Blob(t,{strict:!1}),fT(this,t,"DataURL")}abort(){if(this[Np]==="empty"||this[Np]==="done"){this[hT]=null;return}this[Np]==="loading"&&(this[Np]="done",this[hT]=null),this[CKe]=!0,iae("abort",this),this[Np]!=="loading"&&iae("loadend",this)}get readyState(){switch(gn.brandCheck(this,e),this[Np]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return gn.brandCheck(this,e),this[hT]}get error(){return gn.brandCheck(this,e),this[sae]}get onloadend(){return gn.brandCheck(this,e),this[Jr].loadend}set onloadend(t){gn.brandCheck(this,e),this[Jr].loadend&&this.removeEventListener("loadend",this[Jr].loadend),typeof t=="function"?(this[Jr].loadend=t,this.addEventListener("loadend",t)):this[Jr].loadend=null}get onerror(){return gn.brandCheck(this,e),this[Jr].error}set onerror(t){gn.brandCheck(this,e),this[Jr].error&&this.removeEventListener("error",this[Jr].error),typeof t=="function"?(this[Jr].error=t,this.addEventListener("error",t)):this[Jr].error=null}get onloadstart(){return gn.brandCheck(this,e),this[Jr].loadstart}set onloadstart(t){gn.brandCheck(this,e),this[Jr].loadstart&&this.removeEventListener("loadstart",this[Jr].loadstart),typeof t=="function"?(this[Jr].loadstart=t,this.addEventListener("loadstart",t)):this[Jr].loadstart=null}get onprogress(){return gn.brandCheck(this,e),this[Jr].progress}set onprogress(t){gn.brandCheck(this,e),this[Jr].progress&&this.removeEventListener("progress",this[Jr].progress),typeof t=="function"?(this[Jr].progress=t,this.addEventListener("progress",t)):this[Jr].progress=null}get onload(){return gn.brandCheck(this,e),this[Jr].load}set onload(t){gn.brandCheck(this,e),this[Jr].load&&this.removeEventListener("load",this[Jr].load),typeof t=="function"?(this[Jr].load=t,this.addEventListener("load",t)):this[Jr].load=null}get onabort(){return gn.brandCheck(this,e),this[Jr].abort}set onabort(t){gn.brandCheck(this,e),this[Jr].abort&&this.removeEventListener("abort",this[Jr].abort),typeof t=="function"?(this[Jr].abort=t,this.addEventListener("abort",t)):this[Jr].abort=null}};Ic.EMPTY=Ic.prototype.EMPTY=0;Ic.LOADING=Ic.prototype.LOADING=1;Ic.DONE=Ic.prototype.DONE=2;Object.defineProperties(Ic.prototype,{EMPTY:j0,LOADING:j0,DONE:j0,readAsArrayBuffer:Ko,readAsBinaryString:Ko,readAsText:Ko,readAsDataURL:Ko,abort:Ko,readyState:Ko,result:Ko,error:Ko,onloadstart:Ko,onprogress:Ko,onload:Ko,onabort:Ko,onerror:Ko,onloadend:Ko,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Ic,{EMPTY:j0,LOADING:j0,DONE:j0});oae.exports={FileReader:Ic}});var gT=_((JTt,lae)=>{"use strict";lae.exports={kConstruct:Gn().kConstruct}});var dae=_((jTt,uae)=>{"use strict";var bKe=require("assert"),{URLSerializer:cae}=Go(),{isValidHeaderName:EKe}=wa();function _Ke(e,t,r=!1){let n=cae(e,r),i=cae(t,r);return n===i}function xKe(e){bKe(e!==null);let t=[];for(let r of e.split(","))r=r.trim(),EKe(r)&&t.push(r);return t}uae.exports={urlEquals:_Ke,getFieldValues:xKe}});var gae=_((ZTt,hae)=>{"use strict";var{kConstruct:wKe}=gT(),{urlEquals:SKe,getFieldValues:N5}=dae(),{kEnumerableProperty:Pp,isDisturbed:IKe}=nr(),{webidl:tt}=xs(),{Response:BKe,cloneResponse:DKe,fromInnerResponse:TKe}=ME(),{Request:Wd,fromInnerRequest:RKe}=z0(),{kState:Bc}=ah(),{fetching:kKe}=QE(),{urlIsHttpHttpsScheme:pT,createDeferredPromise:Z0,readAllBytes:MKe}=wa(),P5=require("assert"),mT=class e{#e;constructor(){arguments[0]!==wKe&&tt.illegalConstructor(),tt.util.markAsUncloneable(this),this.#e=arguments[1]}async match(t,r={}){tt.brandCheck(this,e);let n="Cache.match";tt.argumentLengthCheck(arguments,1,n),t=tt.converters.RequestInfo(t,n,"request"),r=tt.converters.CacheQueryOptions(r,n,"options");let i=this.#r(t,r,1);if(i.length!==0)return i[0]}async matchAll(t=void 0,r={}){tt.brandCheck(this,e);let n="Cache.matchAll";return t!==void 0&&(t=tt.converters.RequestInfo(t,n,"request")),r=tt.converters.CacheQueryOptions(r,n,"options"),this.#r(t,r)}async add(t){tt.brandCheck(this,e);let r="Cache.add";tt.argumentLengthCheck(arguments,1,r),t=tt.converters.RequestInfo(t,r,"request");let n=[t];return await this.addAll(n)}async addAll(t){tt.brandCheck(this,e);let r="Cache.addAll";tt.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let p of t){if(p===void 0)throw tt.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(p=tt.converters.RequestInfo(p),typeof p=="string")continue;let g=p[Bc];if(!pT(g.url)||g.method!=="GET")throw tt.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let s=[];for(let p of t){let g=new Wd(p)[Bc];if(!pT(g.url))throw tt.errors.exception({header:r,message:"Expected http/s scheme."});g.initiator="fetch",g.destination="subresource",i.push(g);let m=Z0();s.push(kKe({request:g,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)m.reject(tt.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=N5(y.headersList.get("vary"));for(let C of v)if(C==="*"){m.reject(tt.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let E of s)E.abort();return}}},processResponseEndOfBody(y){if(y.aborted){m.reject(new DOMException("aborted","AbortError"));return}m.resolve(y)}})),n.push(m.promise)}let a=await Promise.all(n),l=[],c=0;for(let p of a){let g={type:"put",request:i[c],response:p};l.push(g),c++}let u=Z0(),f=null;try{this.#t(l)}catch(p){f=p}return queueMicrotask(()=>{f===null?u.resolve(void 0):u.reject(f)}),u.promise}async put(t,r){tt.brandCheck(this,e);let n="Cache.put";tt.argumentLengthCheck(arguments,2,n),t=tt.converters.RequestInfo(t,n,"request"),r=tt.converters.Response(r,n,"response");let i=null;if(t instanceof Wd?i=t[Bc]:i=new Wd(t)[Bc],!pT(i.url)||i.method!=="GET")throw tt.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let s=r[Bc];if(s.status===206)throw tt.errors.exception({header:n,message:"Got 206 status"});if(s.headersList.contains("vary")){let g=N5(s.headersList.get("vary"));for(let m of g)if(m==="*")throw tt.errors.exception({header:n,message:"Got * vary field value"})}if(s.body&&(IKe(s.body.stream)||s.body.stream.locked))throw tt.errors.exception({header:n,message:"Response body is locked or disturbed"});let o=DKe(s),a=Z0();if(s.body!=null){let m=s.body.stream.getReader();MKe(m).then(a.resolve,a.reject)}else a.resolve(void 0);let l=[],c={type:"put",request:i,response:o};l.push(c);let u=await a.promise;o.body!=null&&(o.body.source=u);let f=Z0(),p=null;try{this.#t(l)}catch(g){p=g}return queueMicrotask(()=>{p===null?f.resolve():f.reject(p)}),f.promise}async delete(t,r={}){tt.brandCheck(this,e);let n="Cache.delete";tt.argumentLengthCheck(arguments,1,n),t=tt.converters.RequestInfo(t,n,"request"),r=tt.converters.CacheQueryOptions(r,n,"options");let i=null;if(t instanceof Wd){if(i=t[Bc],i.method!=="GET"&&!r.ignoreMethod)return!1}else P5(typeof t=="string"),i=new Wd(t)[Bc];let s=[],o={type:"delete",request:i,options:r};s.push(o);let a=Z0(),l=null,c;try{c=this.#t(s)}catch(u){l=u}return queueMicrotask(()=>{l===null?a.resolve(!!c?.length):a.reject(l)}),a.promise}async keys(t=void 0,r={}){tt.brandCheck(this,e);let n="Cache.keys";t!==void 0&&(t=tt.converters.RequestInfo(t,n,"request")),r=tt.converters.CacheQueryOptions(r,n,"options");let i=null;if(t!==void 0)if(t instanceof Wd){if(i=t[Bc],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof t=="string"&&(i=new Wd(t)[Bc]);let s=Z0(),o=[];if(t===void 0)for(let a of this.#e)o.push(a[0]);else{let a=this.#i(i,r);for(let l of a)o.push(l[0])}return queueMicrotask(()=>{let a=[];for(let l of o){let c=RKe(l,new AbortController().signal,"immutable");a.push(c)}s.resolve(Object.freeze(a))}),s.promise}#t(t){let r=this.#e,n=[...r],i=[],s=[];try{for(let o of t){if(o.type!=="delete"&&o.type!=="put")throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(o.type==="delete"&&o.response!=null)throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(o.request,o.options,i).length)throw new DOMException("???","InvalidStateError");let a;if(o.type==="delete"){if(a=this.#i(o.request,o.options),a.length===0)return[];for(let l of a){let c=r.indexOf(l);P5(c!==-1),r.splice(c,1)}}else if(o.type==="put"){if(o.response==null)throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=o.request;if(!pT(l.url))throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(o.options!=null)throw tt.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});a=this.#i(o.request);for(let c of a){let u=r.indexOf(c);P5(u!==-1),r.splice(u,1)}r.push([o.request,o.response]),i.push([o.request,o.response])}s.push([o.request,o.response])}return s}catch(o){throw this.#e.length=0,this.#e=n,o}}#i(t,r,n){let i=[],s=n??this.#e;for(let o of s){let[a,l]=o;this.#n(t,a,l,r)&&i.push(o)}return i}#n(t,r,n=null,i){let s=new URL(t.url),o=new URL(r.url);if(i?.ignoreSearch&&(o.search="",s.search=""),!SKe(s,o,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let a=N5(n.headersList.get("vary"));for(let l of a){if(l==="*")return!1;let c=r.headersList.get(l),u=t.headersList.get(l);if(c!==u)return!1}return!0}#r(t,r,n=1/0){let i=null;if(t!==void 0)if(t instanceof Wd){if(i=t[Bc],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof t=="string"&&(i=new Wd(t)[Bc]);let s=[];if(t===void 0)for(let a of this.#e)s.push(a[1]);else{let a=this.#i(i,r);for(let l of a)s.push(l[1])}let o=[];for(let a of s){let l=TKe(a,"immutable");if(o.push(l.clone()),o.length>=n)break}return Object.freeze(o)}};Object.defineProperties(mT.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:Pp,matchAll:Pp,add:Pp,addAll:Pp,put:Pp,delete:Pp,keys:Pp});var fae=[{key:"ignoreSearch",converter:tt.converters.boolean,defaultValue:()=>!1},{key:"ignoreMethod",converter:tt.converters.boolean,defaultValue:()=>!1},{key:"ignoreVary",converter:tt.converters.boolean,defaultValue:()=>!1}];tt.converters.CacheQueryOptions=tt.dictionaryConverter(fae);tt.converters.MultiCacheQueryOptions=tt.dictionaryConverter([...fae,{key:"cacheName",converter:tt.converters.DOMString}]);tt.converters.Response=tt.interfaceConverter(BKe);tt.converters["sequence<RequestInfo>"]=tt.sequenceConverter(tt.converters.RequestInfo);hae.exports={Cache:mT}});var mae=_((XTt,pae)=>{"use strict";var{kConstruct:PE}=gT(),{Cache:AT}=gae(),{webidl:Gs}=xs(),{kEnumerableProperty:LE}=nr(),yT=class e{#e=new Map;constructor(){arguments[0]!==PE&&Gs.illegalConstructor(),Gs.util.markAsUncloneable(this)}async match(t,r={}){if(Gs.brandCheck(this,e),Gs.argumentLengthCheck(arguments,1,"CacheStorage.match"),t=Gs.converters.RequestInfo(t),r=Gs.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new AT(PE,n).match(t,r)}}else for(let n of this.#e.values()){let s=await new AT(PE,n).match(t,r);if(s!==void 0)return s}}async has(t){Gs.brandCheck(this,e);let r="CacheStorage.has";return Gs.argumentLengthCheck(arguments,1,r),t=Gs.converters.DOMString(t,r,"cacheName"),this.#e.has(t)}async open(t){Gs.brandCheck(this,e);let r="CacheStorage.open";if(Gs.argumentLengthCheck(arguments,1,r),t=Gs.converters.DOMString(t,r,"cacheName"),this.#e.has(t)){let i=this.#e.get(t);return new AT(PE,i)}let n=[];return this.#e.set(t,n),new AT(PE,n)}async delete(t){Gs.brandCheck(this,e);let r="CacheStorage.delete";return Gs.argumentLengthCheck(arguments,1,r),t=Gs.converters.DOMString(t,r,"cacheName"),this.#e.delete(t)}async keys(){return Gs.brandCheck(this,e),[...this.#e.keys()]}};Object.defineProperties(yT.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:LE,has:LE,open:LE,delete:LE,keys:LE});pae.exports={CacheStorage:yT}});var yae=_((eRt,Aae)=>{"use strict";Aae.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var L5=_((tRt,_ae)=>{"use strict";function FKe(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}function vae(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}function Cae(e){let t=e.length,r=0;if(e[0]==='"'){if(t===1||e[t-1]!=='"')throw new Error("Invalid cookie value");--t,++r}for(;r<t;){let n=e.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}function bae(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}function QKe(e){if(e.startsWith("-")||e.endsWith(".")||e.endsWith("-"))throw new Error("Invalid cookie domain")}var NKe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],PKe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vT=Array(61).fill(0).map((e,t)=>t.toString().padStart(2,"0"));function Eae(e){return typeof e=="number"&&(e=new Date(e)),`${NKe[e.getUTCDay()]}, ${vT[e.getUTCDate()]} ${PKe[e.getUTCMonth()]} ${e.getUTCFullYear()} ${vT[e.getUTCHours()]}:${vT[e.getUTCMinutes()]}:${vT[e.getUTCSeconds()]} GMT`}function LKe(e){if(e<0)throw new Error("Invalid cookie max-age")}function UKe(e){if(e.name.length===0)return null;vae(e.name),Cae(e.value);let t=[`${e.name}=${e.value}`];e.name.startsWith("__Secure-")&&(e.secure=!0),e.name.startsWith("__Host-")&&(e.secure=!0,e.domain=null,e.path="/"),e.secure&&t.push("Secure"),e.httpOnly&&t.push("HttpOnly"),typeof e.maxAge=="number"&&(LKe(e.maxAge),t.push(`Max-Age=${e.maxAge}`)),e.domain&&(QKe(e.domain),t.push(`Domain=${e.domain}`)),e.path&&(bae(e.path),t.push(`Path=${e.path}`)),e.expires&&e.expires.toString()!=="Invalid Date"&&t.push(`Expires=${Eae(e.expires)}`),e.sameSite&&t.push(`SameSite=${e.sameSite}`);for(let r of e.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");t.push(`${n.trim()}=${i.join("=")}`)}return t.join("; ")}_ae.exports={isCTLExcludingHtab:FKe,validateCookieName:vae,validateCookiePath:bae,validateCookieValue:Cae,toIMFDate:Eae,stringify:UKe}});var wae=_((rRt,xae)=>{"use strict";var{maxNameValuePairSize:OKe,maxAttributeValueSize:qKe}=yae(),{isCTLExcludingHtab:VKe}=L5(),{collectASequenceOfCodePointsFast:CT}=Go(),HKe=require("assert");function WKe(e){if(VKe(e))return null;let t="",r="",n="",i="";if(e.includes(";")){let s={position:0};t=CT(";",e,s),r=e.slice(s.position)}else t=e;if(!t.includes("="))i=t;else{let s={position:0};n=CT("=",t,s),i=t.slice(s.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>OKe?null:{name:n,value:i,...X0(r)}}function X0(e,t={}){if(e.length===0)return t;HKe(e[0]===";"),e=e.slice(1);let r="";e.includes(";")?(r=CT(";",e,{position:0}),e=e.slice(r.length)):(r=e,e="");let n="",i="";if(r.includes("=")){let o={position:0};n=CT("=",r,o),i=r.slice(o.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>qKe)return X0(e,t);let s=n.toLowerCase();if(s==="expires"){let o=new Date(i);t.expires=o}else if(s==="max-age"){let o=i.charCodeAt(0);if((o<48||o>57)&&i[0]!=="-"||!/^\d+$/.test(i))return X0(e,t);let a=Number(i);t.maxAge=a}else if(s==="domain"){let o=i;o[0]==="."&&(o=o.slice(1)),o=o.toLowerCase(),t.domain=o}else if(s==="path"){let o="";i.length===0||i[0]!=="/"?o="/":o=i,t.path=o}else if(s==="secure")t.secure=!0;else if(s==="httponly")t.httpOnly=!0;else if(s==="samesite"){let o="Default",a=i.toLowerCase();a.includes("none")&&(o="None"),a.includes("strict")&&(o="Strict"),a.includes("lax")&&(o="Lax"),t.sameSite=o}else t.unparsed??=[],t.unparsed.push(`${n}=${i}`);return X0(e,t)}xae.exports={parseSetCookie:WKe,parseUnparsedAttributes:X0}});var Bae=_((nRt,Iae)=>{"use strict";var{parseSetCookie:GKe}=wae(),{stringify:$Ke}=L5(),{webidl:yr}=xs(),{Headers:bT}=kp();function YKe(e){yr.argumentLengthCheck(arguments,1,"getCookies"),yr.brandCheck(e,bT,{strict:!1});let t=e.get("cookie"),r={};if(!t)return r;for(let n of t.split(";")){let[i,...s]=n.split("=");r[i.trim()]=s.join("=")}return r}function KKe(e,t,r){yr.brandCheck(e,bT,{strict:!1});let n="deleteCookie";yr.argumentLengthCheck(arguments,2,n),t=yr.converters.DOMString(t,n,"name"),r=yr.converters.DeleteCookieAttributes(r),Sae(e,{name:t,value:"",expires:new Date(0),...r})}function zKe(e){yr.argumentLengthCheck(arguments,1,"getSetCookies"),yr.brandCheck(e,bT,{strict:!1});let t=e.getSetCookie();return t?t.map(r=>GKe(r)):[]}function Sae(e,t){yr.argumentLengthCheck(arguments,2,"setCookie"),yr.brandCheck(e,bT,{strict:!1}),t=yr.converters.Cookie(t);let r=$Ke(t);r&&e.append("Set-Cookie",r)}yr.converters.DeleteCookieAttributes=yr.dictionaryConverter([{converter:yr.nullableConverter(yr.converters.DOMString),key:"path",defaultValue:()=>null},{converter:yr.nullableConverter(yr.converters.DOMString),key:"domain",defaultValue:()=>null}]);yr.converters.Cookie=yr.dictionaryConverter([{converter:yr.converters.DOMString,key:"name"},{converter:yr.converters.DOMString,key:"value"},{converter:yr.nullableConverter(e=>typeof e=="number"?yr.converters["unsigned long long"](e):new Date(e)),key:"expires",defaultValue:()=>null},{converter:yr.nullableConverter(yr.converters["long long"]),key:"maxAge",defaultValue:()=>null},{converter:yr.nullableConverter(yr.converters.DOMString),key:"domain",defaultValue:()=>null},{converter:yr.nullableConverter(yr.converters.DOMString),key:"path",defaultValue:()=>null},{converter:yr.nullableConverter(yr.converters.boolean),key:"secure",defaultValue:()=>null},{converter:yr.nullableConverter(yr.converters.boolean),key:"httpOnly",defaultValue:()=>null},{converter:yr.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:yr.sequenceConverter(yr.converters.DOMString),key:"unparsed",defaultValue:()=>new Array(0)}]);Iae.exports={getCookies:YKe,deleteCookie:KKe,getSetCookies:zKe,setCookie:Sae}});var ty=_((iRt,Tae)=>{"use strict";var{webidl:Xe}=xs(),{kEnumerableProperty:zo}=nr(),{kConstruct:Dae}=Gn(),{MessagePort:JKe}=require("worker_threads"),ey=class e extends Event{#e;constructor(t,r={}){if(t===Dae){super(arguments[1],arguments[2]),Xe.util.markAsUncloneable(this);return}let n="MessageEvent constructor";Xe.argumentLengthCheck(arguments,1,n),t=Xe.converters.DOMString(t,n,"type"),r=Xe.converters.MessageEventInit(r,n,"eventInitDict"),super(t,r),this.#e=r,Xe.util.markAsUncloneable(this)}get data(){return Xe.brandCheck(this,e),this.#e.data}get origin(){return Xe.brandCheck(this,e),this.#e.origin}get lastEventId(){return Xe.brandCheck(this,e),this.#e.lastEventId}get source(){return Xe.brandCheck(this,e),this.#e.source}get ports(){return Xe.brandCheck(this,e),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(t,r=!1,n=!1,i=null,s="",o="",a=null,l=[]){return Xe.brandCheck(this,e),Xe.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new e(t,{bubbles:r,cancelable:n,data:i,origin:s,lastEventId:o,source:a,ports:l})}static createFastMessageEvent(t,r){let n=new e(Dae,t,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:jKe}=ey;delete ey.createFastMessageEvent;var ET=class e extends Event{#e;constructor(t,r={}){let n="CloseEvent constructor";Xe.argumentLengthCheck(arguments,1,n),t=Xe.converters.DOMString(t,n,"type"),r=Xe.converters.CloseEventInit(r),super(t,r),this.#e=r,Xe.util.markAsUncloneable(this)}get wasClean(){return Xe.brandCheck(this,e),this.#e.wasClean}get code(){return Xe.brandCheck(this,e),this.#e.code}get reason(){return Xe.brandCheck(this,e),this.#e.reason}},_T=class e extends Event{#e;constructor(t,r){let n="ErrorEvent constructor";Xe.argumentLengthCheck(arguments,1,n),super(t,r),Xe.util.markAsUncloneable(this),t=Xe.converters.DOMString(t,n,"type"),r=Xe.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return Xe.brandCheck(this,e),this.#e.message}get filename(){return Xe.brandCheck(this,e),this.#e.filename}get lineno(){return Xe.brandCheck(this,e),this.#e.lineno}get colno(){return Xe.brandCheck(this,e),this.#e.colno}get error(){return Xe.brandCheck(this,e),this.#e.error}};Object.defineProperties(ey.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:zo,origin:zo,lastEventId:zo,source:zo,ports:zo,initMessageEvent:zo});Object.defineProperties(ET.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:zo,code:zo,wasClean:zo});Object.defineProperties(_T.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:zo,filename:zo,lineno:zo,colno:zo,error:zo});Xe.converters.MessagePort=Xe.interfaceConverter(JKe);Xe.converters["sequence<MessagePort>"]=Xe.sequenceConverter(Xe.converters.MessagePort);var U5=[{key:"bubbles",converter:Xe.converters.boolean,defaultValue:()=>!1},{key:"cancelable",converter:Xe.converters.boolean,defaultValue:()=>!1},{key:"composed",converter:Xe.converters.boolean,defaultValue:()=>!1}];Xe.converters.MessageEventInit=Xe.dictionaryConverter([...U5,{key:"data",converter:Xe.converters.any,defaultValue:()=>null},{key:"origin",converter:Xe.converters.USVString,defaultValue:()=>""},{key:"lastEventId",converter:Xe.converters.DOMString,defaultValue:()=>""},{key:"source",converter:Xe.nullableConverter(Xe.converters.MessagePort),defaultValue:()=>null},{key:"ports",converter:Xe.converters["sequence<MessagePort>"],defaultValue:()=>new Array(0)}]);Xe.converters.CloseEventInit=Xe.dictionaryConverter([...U5,{key:"wasClean",converter:Xe.converters.boolean,defaultValue:()=>!1},{key:"code",converter:Xe.converters["unsigned short"],defaultValue:()=>0},{key:"reason",converter:Xe.converters.USVString,defaultValue:()=>""}]);Xe.converters.ErrorEventInit=Xe.dictionaryConverter([...U5,{key:"message",converter:Xe.converters.DOMString,defaultValue:()=>""},{key:"filename",converter:Xe.converters.USVString,defaultValue:()=>""},{key:"lineno",converter:Xe.converters["unsigned long"],defaultValue:()=>0},{key:"colno",converter:Xe.converters["unsigned long"],defaultValue:()=>0},{key:"error",converter:Xe.converters.any}]);Tae.exports={MessageEvent:ey,CloseEvent:ET,ErrorEvent:_T,createFastMessageEvent:jKe}});var Lp=_((sRt,Rae)=>{"use strict";var ZKe="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",XKe={enumerable:!0,writable:!1,configurable:!1},eze={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},tze={NOT_SENT:0,PROCESSING:1,SENT:2},rze={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},nze=2**16-1,ize={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},sze=Buffer.allocUnsafe(0),oze={string:1,typedArray:2,arrayBuffer:3,blob:4};Rae.exports={uid:ZKe,sentCloseFrameState:tze,staticPropertyDescriptors:XKe,states:eze,opcodes:rze,maxUnsigned16Bit:nze,parserStates:ize,emptyBuffer:sze,sendHints:oze}});var UE=_((oRt,kae)=>{"use strict";kae.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var VE=_((aRt,qae)=>{"use strict";var{kReadyState:OE,kController:aze,kResponse:lze,kBinaryType:cze,kWebSocketURL:uze}=UE(),{states:qE,opcodes:bh}=Lp(),{ErrorEvent:dze,createFastMessageEvent:fze}=ty(),{isUtf8:hze}=require("buffer"),{collectASequenceOfCodePointsFast:gze,removeHTTPWhitespace:Mae}=Go();function pze(e){return e[OE]===qE.CONNECTING}function mze(e){return e[OE]===qE.OPEN}function Aze(e){return e[OE]===qE.CLOSING}function yze(e){return e[OE]===qE.CLOSED}function O5(e,t,r=(i,s)=>new Event(i,s),n={}){let i=r(e,n);t.dispatchEvent(i)}function vze(e,t,r){if(e[OE]!==qE.OPEN)return;let n;if(t===bh.TEXT)try{n=Oae(r)}catch{Qae(e,"Received invalid UTF-8 in text frame.");return}else t===bh.BINARY&&(e[cze]==="blob"?n=new Blob([r]):n=Cze(r));O5("message",e,fze,{origin:e[uze].origin,data:n})}function Cze(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function bze(e){if(e.length===0)return!1;for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}function Eze(e){return e>=1e3&&e<1015?e!==1004&&e!==1005&&e!==1006:e>=3e3&&e<=4999}function Qae(e,t){let{[aze]:r,[lze]:n}=e;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),t&&O5("error",e,(i,s)=>new dze(i,s),{error:new Error(t),message:t})}function Nae(e){return e===bh.CLOSE||e===bh.PING||e===bh.PONG}function Pae(e){return e===bh.CONTINUATION}function Lae(e){return e===bh.TEXT||e===bh.BINARY}function _ze(e){return Lae(e)||Pae(e)||Nae(e)}function xze(e){let t={position:0},r=new Map;for(;t.position<e.length;){let n=gze(";",e,t),[i,s=""]=n.split("=");r.set(Mae(i,!0,!1),Mae(s,!1,!0)),t.position++}return r}function wze(e){for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r<48||r>57)return!1}return!0}var Uae=typeof process.versions.icu=="string",Fae=Uae?new TextDecoder("utf-8",{fatal:!0}):void 0,Oae=Uae?Fae.decode.bind(Fae):function(e){if(hze(e))return e.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};qae.exports={isConnecting:pze,isEstablished:mze,isClosing:Aze,isClosed:yze,fireEvent:O5,isValidSubprotocol:bze,isValidStatusCode:Eze,failWebsocketConnection:Qae,websocketMessageReceived:vze,utf8Decode:Oae,isControlFrame:Nae,isContinuationFrame:Pae,isTextBinaryFrame:Lae,isValidOpcode:_ze,parseExtensions:xze,isValidClientWindowBits:wze}});var wT=_((lRt,Vae)=>{"use strict";var{maxUnsigned16Bit:Sze}=Lp(),xT=16386,q5,HE=null,ry=xT;try{q5=require("crypto")}catch{q5={randomFillSync:function(t,r,n){for(let i=0;i<t.length;++i)t[i]=Math.random()*255|0;return t}}}function Ize(){return ry===xT&&(ry=0,q5.randomFillSync(HE??=Buffer.allocUnsafe(xT),0,xT)),[HE[ry++],HE[ry++],HE[ry++],HE[ry++]]}var V5=class{constructor(t){this.frameData=t}createFrame(t){let r=this.frameData,n=Ize(),i=r?.byteLength??0,s=i,o=6;i>Sze?(o+=8,s=127):i>125&&(o+=2,s=126);let a=Buffer.allocUnsafe(i+o);a[0]=a[1]=0,a[0]|=128,a[0]=(a[0]&240)+t;a[o-4]=n[0],a[o-3]=n[1],a[o-2]=n[2],a[o-1]=n[3],a[1]=s,s===126?a.writeUInt16BE(i,2):s===127&&(a[2]=a[3]=0,a.writeUIntBE(i,4,6)),a[1]|=128;for(let l=0;l<i;++l)a[o+l]=r[l]^n[l&3];return a}};Vae.exports={WebsocketFrameSend:V5}});var W5=_((cRt,zae)=>{"use strict";var{uid:Bze,states:WE,sentCloseFrameState:ST,emptyBuffer:Dze,opcodes:Tze}=Lp(),{kReadyState:GE,kSentClose:IT,kByteParser:Wae,kReceivedClose:Hae,kResponse:Gae}=UE(),{fireEvent:Rze,failWebsocketConnection:Eh,isClosing:kze,isClosed:Mze,isEstablished:Fze,parseExtensions:Qze}=VE(),{channels:ny}=m0(),{CloseEvent:Nze}=ty(),{makeRequest:Pze}=z0(),{fetching:Lze}=QE(),{Headers:Uze,getHeadersList:Oze}=kp(),{getDecodeSplit:qze}=wa(),{WebsocketFrameSend:Vze}=wT(),H5;try{H5=require("crypto")}catch{}function Hze(e,t,r,n,i,s){let o=e;o.protocol=e.protocol==="ws:"?"http:":"https:";let a=Pze({urlList:[o],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(s.headers){let f=Oze(new Uze(s.headers));a.headersList=f}let l=H5.randomBytes(16).toString("base64");a.headersList.append("sec-websocket-key",l),a.headersList.append("sec-websocket-version","13");for(let f of t)a.headersList.append("sec-websocket-protocol",f);let c="permessage-deflate; client_max_window_bits";return a.headersList.append("sec-websocket-extensions",c),Lze({request:a,useParallelQueue:!0,dispatcher:s.dispatcher,processResponse(f){if(f.type==="error"||f.status!==101){Eh(n,"Received network error or non-101 status code.");return}if(t.length!==0&&!f.headersList.get("Sec-WebSocket-Protocol")){Eh(n,"Server did not respond with sent protocols.");return}if(f.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Eh(n,'Server did not set Upgrade header to "websocket".');return}if(f.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Eh(n,'Server did not set Connection header to "upgrade".');return}let p=f.headersList.get("Sec-WebSocket-Accept"),g=H5.createHash("sha1").update(l+Bze).digest("base64");if(p!==g){Eh(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let m=f.headersList.get("Sec-WebSocket-Extensions"),y;if(m!==null&&(y=Qze(m),!y.has("permessage-deflate"))){Eh(n,"Sec-WebSocket-Extensions header does not match.");return}let v=f.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!qze("sec-websocket-protocol",a.headersList).includes(v)){Eh(n,"Protocol was not set in the opening handshake.");return}f.socket.on("data",$ae),f.socket.on("close",Yae),f.socket.on("error",Kae),ny.open.hasSubscribers&&ny.open.publish({address:f.socket.address(),protocol:v,extensions:m}),i(f,y)}})}function Wze(e,t,r,n){if(!(kze(e)||Mze(e)))if(!Fze(e))Eh(e,"Connection was closed before it was established."),e[GE]=WE.CLOSING;else if(e[IT]===ST.NOT_SENT){e[IT]=ST.PROCESSING;let i=new Vze;t!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(t,0)):t!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(t,0),i.frameData.write(r,2,"utf-8")):i.frameData=Dze,e[Gae].socket.write(i.createFrame(Tze.CLOSE)),e[IT]=ST.SENT,e[GE]=WE.CLOSING}else e[GE]=WE.CLOSING}function $ae(e){this.ws[Wae].write(e)||this.pause()}function Yae(){let{ws:e}=this,{[Gae]:t}=e;t.socket.off("data",$ae),t.socket.off("close",Yae),t.socket.off("error",Kae);let r=e[IT]===ST.SENT&&e[Hae],n=1005,i="",s=e[Wae].closingInfo;s&&!s.error?(n=s.code??1005,i=s.reason):e[Hae]||(n=1006),e[GE]=WE.CLOSED,Rze("close",e,(o,a)=>new Nze(o,a),{wasClean:r,code:n,reason:i}),ny.close.hasSubscribers&&ny.close.publish({websocket:e,code:n,reason:i})}function Kae(e){let{ws:t}=this;t[GE]=WE.CLOSING,ny.socketError.hasSubscribers&&ny.socketError.publish(e),this.destroy()}zae.exports={establishWebSocketConnection:Hze,closeWebSocketConnection:Wze}});var jae=_((uRt,Jae)=>{"use strict";var{createInflateRaw:Gze,Z_DEFAULT_WINDOWBITS:$ze}=require("zlib"),{isValidClientWindowBits:Yze}=VE(),Kze=Buffer.from([0,0,255,255]),BT=Symbol("kBuffer"),DT=Symbol("kLength"),G5=class{#e;#t={};constructor(t){this.#t.serverNoContextTakeover=t.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=t.get("server_max_window_bits")}decompress(t,r,n){if(!this.#e){let i=$ze;if(this.#t.serverMaxWindowBits){if(!Yze(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=Gze({windowBits:i}),this.#e[BT]=[],this.#e[DT]=0,this.#e.on("data",s=>{this.#e[BT].push(s),this.#e[DT]+=s.length}),this.#e.on("error",s=>{this.#e=null,n(s)})}this.#e.write(t),r&&this.#e.write(Kze),this.#e.flush(()=>{let i=Buffer.concat(this.#e[BT],this.#e[DT]);this.#e[BT].length=0,this.#e[DT]=0,n(null,i)})}};Jae.exports={PerMessageDeflate:G5}});var lle=_((dRt,ale)=>{"use strict";var{Writable:zze}=require("stream"),Jze=require("assert"),{parserStates:Jo,opcodes:iy,states:jze,emptyBuffer:Zae,sentCloseFrameState:Xae}=Lp(),{kReadyState:Zze,kSentClose:ele,kResponse:tle,kReceivedClose:rle}=UE(),{channels:TT}=m0(),{isValidStatusCode:Xze,isValidOpcode:eJe,failWebsocketConnection:wl,websocketMessageReceived:nle,utf8Decode:tJe,isControlFrame:ile,isTextBinaryFrame:$5,isContinuationFrame:rJe}=VE(),{WebsocketFrameSend:sle}=wT(),{closeWebSocketConnection:ole}=W5(),{PerMessageDeflate:nJe}=jae(),Y5=class extends zze{#e=[];#t=0;#i=!1;#n=Jo.INFO;#r={};#l=[];#o;constructor(t,r){super(),this.ws=t,this.#o=r??new Map,this.#o.has("permessage-deflate")&&this.#o.set("permessage-deflate",new nJe(r))}_write(t,r,n){this.#e.push(t),this.#t+=t.length,this.#i=!0,this.run(n)}run(t){for(;this.#i;)if(this.#n===Jo.INFO){if(this.#t<2)return t();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,s=(r[1]&128)===128,o=!n&&i!==iy.CONTINUATION,a=r[1]&127,l=r[0]&64,c=r[0]&32,u=r[0]&16;if(!eJe(i))return wl(this.ws,"Invalid opcode received"),t();if(s)return wl(this.ws,"Frame cannot be masked"),t();if(l!==0&&!this.#o.has("permessage-deflate")){wl(this.ws,"Expected RSV1 to be clear.");return}if(c!==0||u!==0){wl(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(o&&!$5(i)){wl(this.ws,"Invalid frame type was fragmented.");return}if($5(i)&&this.#l.length>0){wl(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&o){wl(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((a>125||o)&&ile(i)){wl(this.ws,"Control frame either too large or fragmented");return}if(rJe(i)&&this.#l.length===0&&!this.#r.compressed){wl(this.ws,"Unexpected continuation frame");return}a<=125?(this.#r.payloadLength=a,this.#n=Jo.READ_DATA):a===126?this.#n=Jo.PAYLOADLENGTH_16:a===127&&(this.#n=Jo.PAYLOADLENGTH_64),$5(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=s,this.#r.fin=n,this.#r.fragmented=o}else if(this.#n===Jo.PAYLOADLENGTH_16){if(this.#t<2)return t();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=Jo.READ_DATA}else if(this.#n===Jo.PAYLOADLENGTH_64){if(this.#t<8)return t();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){wl(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=Jo.READ_DATA}else if(this.#n===Jo.READ_DATA){if(this.#t<this.#r.payloadLength)return t();let r=this.consume(this.#r.payloadLength);if(ile(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=Jo.INFO;else if(this.#r.compressed){this.#o.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){ole(this.ws,1007,n.message,n.message.length);return}if(this.#l.push(i),!this.#r.fin){this.#n=Jo.INFO,this.#i=!0,this.run(t);return}nle(this.ws,this.#r.binaryType,Buffer.concat(this.#l)),this.#i=!0,this.#n=Jo.INFO,this.#l.length=0,this.run(t)}),this.#i=!1;break}else{if(this.#l.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#l);nle(this.ws,this.#r.binaryType,n),this.#l.length=0}this.#n=Jo.INFO}}}consume(t){if(t>this.#t)throw new Error("Called consume() before buffers satiated.");if(t===0)return Zae;if(this.#e[0].length===t)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(t),n=0;for(;n!==t;){let i=this.#e[0],{length:s}=i;if(s+n===t){r.set(this.#e.shift(),n);break}else if(s+n>t){r.set(i.subarray(0,t-n),n),this.#e[0]=i.subarray(t-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=t,r}parseCloseBody(t){Jze(t.length!==1);let r;if(t.length>=2&&(r=t.readUInt16BE(0)),r!==void 0&&!Xze(r))return{code:1002,reason:"Invalid status code",error:!0};let n=t.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=tJe(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(t){let{opcode:r,payloadLength:n}=this.#r;if(r===iy.CLOSE){if(n===1)return wl(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(t),this.#r.closeInfo.error){let{code:i,reason:s}=this.#r.closeInfo;return ole(this.ws,i,s,s.length),wl(this.ws,s),!1}if(this.ws[ele]!==Xae.SENT){let i=Zae;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let s=new sle(i);this.ws[tle].socket.write(s.createFrame(iy.CLOSE),o=>{o||(this.ws[ele]=Xae.SENT)})}return this.ws[Zze]=jze.CLOSING,this.ws[rle]=!0,!1}else if(r===iy.PING){if(!this.ws[rle]){let i=new sle(t);this.ws[tle].socket.write(i.createFrame(iy.PONG)),TT.ping.hasSubscribers&&TT.ping.publish({payload:t})}}else r===iy.PONG&&TT.pong.hasSubscribers&&TT.pong.publish({payload:t});return!0}get closingInfo(){return this.#r.closeInfo}};ale.exports={ByteParser:Y5}});var hle=_((fRt,fle)=>{"use strict";var{WebsocketFrameSend:iJe}=wT(),{opcodes:cle,sendHints:sy}=Lp(),sJe=sV(),ule=Buffer[Symbol.species],K5=class{#e=new sJe;#t=!1;#i;constructor(t){this.#i=t}add(t,r,n){if(n!==sy.blob){let s=dle(t,n);if(!this.#t)this.#i.write(s,r);else{let o={promise:null,callback:r,frame:s};this.#e.push(o)}return}let i={promise:t.arrayBuffer().then(s=>{i.promise=null,i.frame=dle(s,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let t=this.#e;for(;!t.isEmpty();){let r=t.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function dle(e,t){return new iJe(oJe(e,t)).createFrame(t===sy.string?cle.TEXT:cle.BINARY)}function oJe(e,t){switch(t){case sy.string:return Buffer.from(e);case sy.arrayBuffer:case sy.blob:return new ule(e);case sy.typedArray:return new ule(e.buffer,e.byteOffset,e.byteLength)}}fle.exports={SendQueue:K5}});var Ele=_((hRt,ble)=>{"use strict";var{webidl:xt}=xs(),{URLSerializer:aJe}=Go(),{environmentSettingsObject:gle}=wa(),{staticPropertyDescriptors:_h,states:$E,sentCloseFrameState:lJe,sendHints:RT}=Lp(),{kWebSocketURL:ple,kReadyState:z5,kController:cJe,kBinaryType:kT,kResponse:mle,kSentClose:uJe,kByteParser:dJe}=UE(),{isConnecting:fJe,isEstablished:hJe,isClosing:gJe,isValidSubprotocol:pJe,fireEvent:Ale}=VE(),{establishWebSocketConnection:mJe,closeWebSocketConnection:yle}=W5(),{ByteParser:AJe}=lle(),{kEnumerableProperty:Sl,isBlobLike:vle}=nr(),{getGlobalDispatcher:yJe}=$D(),{types:Cle}=require("util"),{ErrorEvent:vJe,CloseEvent:CJe}=ty(),{SendQueue:bJe}=hle(),ka=class e extends EventTarget{#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(t,r=[]){super(),xt.util.markAsUncloneable(this);let n="WebSocket constructor";xt.argumentLengthCheck(arguments,1,n);let i=xt.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");t=xt.converters.USVString(t,n,"url"),r=i.protocols;let s=gle.settingsObject.baseUrl,o;try{o=new URL(t,s)}catch(l){throw new DOMException(l,"SyntaxError")}if(o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),o.protocol!=="ws:"&&o.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${o.protocol}`,"SyntaxError");if(o.hash||o.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>pJe(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[ple]=new URL(o.href);let a=gle.settingsObject;this[cJe]=mJe(o,r,a,this,(l,c)=>this.#l(l,c),i),this[z5]=e.CONNECTING,this[uJe]=lJe.NOT_SENT,this[kT]="blob"}close(t=void 0,r=void 0){xt.brandCheck(this,e);let n="WebSocket.close";if(t!==void 0&&(t=xt.converters["unsigned short"](t,n,"code",{clamp:!0})),r!==void 0&&(r=xt.converters.USVString(r,n,"reason")),t!==void 0&&t!==1e3&&(t<3e3||t>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");yle(this,t,r,i)}send(t){xt.brandCheck(this,e);let r="WebSocket.send";if(xt.argumentLengthCheck(arguments,1,r),t=xt.converters.WebSocketSendData(t,r,"data"),fJe(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!hJe(this)||gJe(this)))if(typeof t=="string"){let n=Buffer.byteLength(t);this.#t+=n,this.#r.add(t,()=>{this.#t-=n},RT.string)}else Cle.isArrayBuffer(t)?(this.#t+=t.byteLength,this.#r.add(t,()=>{this.#t-=t.byteLength},RT.arrayBuffer)):ArrayBuffer.isView(t)?(this.#t+=t.byteLength,this.#r.add(t,()=>{this.#t-=t.byteLength},RT.typedArray)):vle(t)&&(this.#t+=t.size,this.#r.add(t,()=>{this.#t-=t.size},RT.blob))}get readyState(){return xt.brandCheck(this,e),this[z5]}get bufferedAmount(){return xt.brandCheck(this,e),this.#t}get url(){return xt.brandCheck(this,e),aJe(this[ple])}get extensions(){return xt.brandCheck(this,e),this.#n}get protocol(){return xt.brandCheck(this,e),this.#i}get onopen(){return xt.brandCheck(this,e),this.#e.open}set onopen(t){xt.brandCheck(this,e),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof t=="function"?(this.#e.open=t,this.addEventListener("open",t)):this.#e.open=null}get onerror(){return xt.brandCheck(this,e),this.#e.error}set onerror(t){xt.brandCheck(this,e),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof t=="function"?(this.#e.error=t,this.addEventListener("error",t)):this.#e.error=null}get onclose(){return xt.brandCheck(this,e),this.#e.close}set onclose(t){xt.brandCheck(this,e),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof t=="function"?(this.#e.close=t,this.addEventListener("close",t)):this.#e.close=null}get onmessage(){return xt.brandCheck(this,e),this.#e.message}set onmessage(t){xt.brandCheck(this,e),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof t=="function"?(this.#e.message=t,this.addEventListener("message",t)):this.#e.message=null}get binaryType(){return xt.brandCheck(this,e),this[kT]}set binaryType(t){xt.brandCheck(this,e),t!=="blob"&&t!=="arraybuffer"?this[kT]="blob":this[kT]=t}#l(t,r){this[mle]=t;let n=new AJe(this,r);n.on("drain",EJe),n.on("error",_Je.bind(this)),t.socket.ws=this,this[dJe]=n,this.#r=new bJe(t.socket),this[z5]=$E.OPEN;let i=t.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let s=t.headersList.get("sec-websocket-protocol");s!==null&&(this.#i=s),Ale("open",this)}};ka.CONNECTING=ka.prototype.CONNECTING=$E.CONNECTING;ka.OPEN=ka.prototype.OPEN=$E.OPEN;ka.CLOSING=ka.prototype.CLOSING=$E.CLOSING;ka.CLOSED=ka.prototype.CLOSED=$E.CLOSED;Object.defineProperties(ka.prototype,{CONNECTING:_h,OPEN:_h,CLOSING:_h,CLOSED:_h,url:Sl,readyState:Sl,bufferedAmount:Sl,onopen:Sl,onerror:Sl,onclose:Sl,close:Sl,onmessage:Sl,binaryType:Sl,send:Sl,extensions:Sl,protocol:Sl,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(ka,{CONNECTING:_h,OPEN:_h,CLOSING:_h,CLOSED:_h});xt.converters["sequence<DOMString>"]=xt.sequenceConverter(xt.converters.DOMString);xt.converters["DOMString or sequence<DOMString>"]=function(e,t,r){return xt.util.Type(e)==="Object"&&Symbol.iterator in e?xt.converters["sequence<DOMString>"](e):xt.converters.DOMString(e,t,r)};xt.converters.WebSocketInit=xt.dictionaryConverter([{key:"protocols",converter:xt.converters["DOMString or sequence<DOMString>"],defaultValue:()=>new Array(0)},{key:"dispatcher",converter:xt.converters.any,defaultValue:()=>yJe()},{key:"headers",converter:xt.nullableConverter(xt.converters.HeadersInit)}]);xt.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(e){return xt.util.Type(e)==="Object"&&!(Symbol.iterator in e)?xt.converters.WebSocketInit(e):{protocols:xt.converters["DOMString or sequence<DOMString>"](e)}};xt.converters.WebSocketSendData=function(e){if(xt.util.Type(e)==="Object"){if(vle(e))return xt.converters.Blob(e,{strict:!1});if(ArrayBuffer.isView(e)||Cle.isArrayBuffer(e))return xt.converters.BufferSource(e)}return xt.converters.USVString(e)};function EJe(){this.ws[mle].socket.resume()}function _Je(e){let t,r;e instanceof CJe?(t=e.reason,r=e.code):t=e.message,Ale("error",this,()=>new vJe("error",{error:e,message:t})),yle(this,r)}ble.exports={WebSocket:ka}});var J5=_((gRt,_le)=>{"use strict";function xJe(e){return e.indexOf("\0")===-1}function wJe(e){if(e.length===0)return!1;for(let t=0;t<e.length;t++)if(e.charCodeAt(t)<48||e.charCodeAt(t)>57)return!1;return!0}function SJe(e){return new Promise(t=>{setTimeout(t,e).unref()})}_le.exports={isValidLastEventId:xJe,isASCIINumber:wJe,delay:SJe}});var Ile=_((pRt,Sle)=>{"use strict";var{Transform:IJe}=require("stream"),{isASCIINumber:xle,isValidLastEventId:wle}=J5(),Gd=[239,187,191],j5=10,MT=13,BJe=58,DJe=32,Z5=class extends IJe{state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(t={}){t.readableObjectMode=!0,super(t),this.state=t.eventSourceSettings||{},t.push&&(this.push=t.push)}_transform(t,r,n){if(t.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,t]):this.buffer=t,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===Gd[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===Gd[0]&&this.buffer[1]===Gd[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===Gd[0]&&this.buffer[1]===Gd[1]&&this.buffer[2]===Gd[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===Gd[0]&&this.buffer[1]===Gd[1]&&this.buffer[2]===Gd[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===j5){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===j5||this.buffer[this.pos]===MT){this.buffer[this.pos]===MT&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===j5||this.buffer[this.pos]===MT){this.buffer[this.pos]===MT&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(t,r){if(t.length===0)return;let n=t.indexOf(BJe);if(n===0)return;let i="",s="";if(n!==-1){i=t.subarray(0,n).toString("utf8");let o=n+1;t[o]===DJe&&++o,s=t.subarray(o).toString("utf8")}else i=t.toString("utf8"),s="";switch(i){case"data":r[i]===void 0?r[i]=s:r[i]+=`
${s}`;break;case"retry":xle(s)&&(r[i]=s);break;case"id":wle(s)&&(r[i]=s);break;case"event":s.length>0&&(r[i]=s);break}}processEvent(t){t.retry&&xle(t.retry)&&(this.state.reconnectionTime=parseInt(t.retry,10)),t.id&&wle(t.id)&&(this.state.lastEventId=t.id),t.data!==void 0&&this.push({type:t.event||"message",options:{data:t.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};Sle.exports={EventSourceStream:Z5}});var Qle=_((mRt,Fle)=>{"use strict";var{pipeline:TJe}=require("stream"),{fetching:RJe}=QE(),{makeRequest:kJe}=z0(),{webidl:$d}=xs(),{EventSourceStream:MJe}=Ile(),{parseMIMEType:FJe}=Go(),{createFastMessageEvent:QJe}=ty(),{isNetworkError:Ble}=ME(),{delay:NJe}=J5(),{kEnumerableProperty:Up}=nr(),{environmentSettingsObject:Dle}=wa(),Tle=!1,Rle=3e3,YE=0,kle=1,KE=2,PJe="anonymous",LJe="use-credentials",oy=class e extends EventTarget{#e={open:null,error:null,message:null};#t=null;#i=!1;#n=YE;#r=null;#l=null;#o;#u;constructor(t,r={}){super(),$d.util.markAsUncloneable(this);let n="EventSource constructor";$d.argumentLengthCheck(arguments,1,n),Tle||(Tle=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),t=$d.converters.USVString(t,n,"url"),r=$d.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#o=r.dispatcher,this.#u={lastEventId:"",reconnectionTime:Rle};let i=Dle,s;try{s=new URL(t,i.settingsObject.baseUrl),this.#u.origin=s.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=s.href;let o=PJe;r.withCredentials&&(o=LJe,this.#i=!0);let a={redirect:"follow",keepalive:!0,mode:"cors",credentials:o==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};a.client=Dle.settingsObject,a.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],a.cache="no-store",a.initiator="other",a.urlList=[new URL(this.#t)],this.#r=kJe(a),this.#d()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#d(){if(this.#n===KE)return;this.#n=YE;let t={request:this.#r,dispatcher:this.#o},r=n=>{Ble(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#a()};t.processResponseEndOfBody=r,t.processResponse=n=>{if(Ble(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#a();return}let i=n.headersList.get("content-type",!0),s=i!==null?FJe(i):"failure",o=s!=="failure"&&s.essence==="text/event-stream";if(n.status!==200||o===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=kle,this.dispatchEvent(new Event("open")),this.#u.origin=n.urlList[n.urlList.length-1].origin;let a=new MJe({eventSourceSettings:this.#u,push:l=>{this.dispatchEvent(QJe(l.type,l.options))}});TJe(n.body.stream,a,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#l=RJe(t)}async#a(){this.#n!==KE&&(this.#n=YE,this.dispatchEvent(new Event("error")),await NJe(this.#u.reconnectionTime),this.#n===YE&&(this.#u.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#u.lastEventId,!0),this.#d()))}close(){$d.brandCheck(this,e),this.#n!==KE&&(this.#n=KE,this.#l.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(t){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof t=="function"?(this.#e.open=t,this.addEventListener("open",t)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(t){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof t=="function"?(this.#e.message=t,this.addEventListener("message",t)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(t){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof t=="function"?(this.#e.error=t,this.addEventListener("error",t)):this.#e.error=null}},Mle={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:YE,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:kle,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:KE,writable:!1}};Object.defineProperties(oy,Mle);Object.defineProperties(oy.prototype,Mle);Object.defineProperties(oy.prototype,{close:Up,onerror:Up,onmessage:Up,onopen:Up,readyState:Up,url:Up,withCredentials:Up});$d.converters.EventSourceInitDict=$d.dictionaryConverter([{key:"withCredentials",converter:$d.converters.boolean,defaultValue:()=>!1},{key:"dispatcher",converter:$d.converters.any}]);Fle.exports={EventSource:oy,defaultReconnectionTime:Rle}});var Ule=_((ARt,Ct)=>{"use strict";var UJe=yE(),Nle=Jb(),OJe=N0(),qJe=Hne(),VJe=P0(),HJe=_V(),WJe=oie(),GJe=fie(),Ple=zr(),QT=nr(),{InvalidArgumentError:FT}=Ple,ay=Zie(),$Je=Zb(),YJe=i5(),KJe=Mse(),zJe=a5(),JJe=GV(),jJe=ND(),{getGlobalDispatcher:Lle,setGlobalDispatcher:ZJe}=$D(),XJe=YD(),eje=wD(),tje=SD();Object.assign(Nle.prototype,ay);Ct.exports.Dispatcher=Nle;Ct.exports.Client=UJe;Ct.exports.Pool=OJe;Ct.exports.BalancedPool=qJe;Ct.exports.Agent=VJe;Ct.exports.ProxyAgent=HJe;Ct.exports.EnvHttpProxyAgent=WJe;Ct.exports.RetryAgent=GJe;Ct.exports.RetryHandler=jJe;Ct.exports.DecoratorHandler=XJe;Ct.exports.RedirectHandler=eje;Ct.exports.createRedirectInterceptor=tje;Ct.exports.interceptors={redirect:Ose(),retry:Vse(),dump:Wse(),dns:Yse()};Ct.exports.buildConnector=$Je;Ct.exports.errors=Ple;Ct.exports.util={parseHeaders:QT.parseHeaders,headerNameToString:QT.headerNameToString};function zE(e){return(t,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!t||typeof t!="string"&&typeof t!="object"&&!(t instanceof URL))throw new FT("invalid url");if(r!=null&&typeof r!="object")throw new FT("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new FT("invalid opts.path");let o=r.path;r.path.startsWith("/")||(o=`/${o}`),t=new URL(QT.parseOrigin(t).origin+o)}else r||(r=typeof t=="object"?t:{}),t=QT.parseURL(t);let{agent:i,dispatcher:s=Lle()}=r;if(i)throw new FT("unsupported opts.agent. Did you mean opts.client?");return e.call(s,{...r,origin:t.origin,path:t.search?`${t.pathname}${t.search}`:t.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}Ct.exports.setGlobalDispatcher=ZJe;Ct.exports.getGlobalDispatcher=Lle;var rje=QE().fetch;Ct.exports.fetch=async function(t,r=void 0){try{return await rje(t,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}};Ct.exports.Headers=kp().Headers;Ct.exports.Response=ME().Response;Ct.exports.Request=z0().Request;Ct.exports.FormData=sE().FormData;Ct.exports.File=globalThis.File??require("buffer").File;Ct.exports.FileReader=aae().FileReader;var{setGlobalOrigin:nje,getGlobalOrigin:ije}=xq();Ct.exports.setGlobalOrigin=nje;Ct.exports.getGlobalOrigin=ije;var{CacheStorage:sje}=mae(),{kConstruct:oje}=gT();Ct.exports.caches=new sje(oje);var{deleteCookie:aje,getCookies:lje,getSetCookies:cje,setCookie:uje}=Bae();Ct.exports.deleteCookie=aje;Ct.exports.getCookies=lje;Ct.exports.getSetCookies=cje;Ct.exports.setCookie=uje;var{parseMIMEType:dje,serializeAMimeType:fje}=Go();Ct.exports.parseMIMEType=dje;Ct.exports.serializeAMimeType=fje;var{CloseEvent:hje,ErrorEvent:gje,MessageEvent:pje}=ty();Ct.exports.WebSocket=Ele().WebSocket;Ct.exports.CloseEvent=hje;Ct.exports.ErrorEvent=gje;Ct.exports.MessageEvent=pje;Ct.exports.request=zE(ay.request);Ct.exports.stream=zE(ay.stream);Ct.exports.pipeline=zE(ay.pipeline);Ct.exports.connect=zE(ay.connect);Ct.exports.upgrade=zE(ay.upgrade);Ct.exports.MockClient=YJe;Ct.exports.MockPool=zJe;Ct.exports.MockAgent=KJe;Ct.exports.mockErrors=JJe;var{EventSource:mje}=Qle();Ct.exports.EventSource=mje});var Jt=_((yRt,Ole)=>{"use strict";Ole.exports={options:{usePureJavaScript:!1}}});var Hle=_((vRt,Vle)=>{"use strict";var X5={};Vle.exports=X5;var qle={};X5.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Aje(e,t);else{var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var l=0,c=e[i];l<a.length;++l)c+=a[l]<<8,a[l]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n};X5.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=qle[t];if(!r){r=qle[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),o=[0],n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var l=0,c=a;l<o.length;++l)c+=o[l]*i,o[l]=c&255,c>>=8;for(;c>0;)o.push(c&255),c>>=8}for(var u=0;e[u]===s&&u<e.length-1;++u)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function Aje(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var l="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)l+=i;for(r=s.length-1;r>=0;--r)l+=t[s[r]];return l}});var Nr=_((CRt,Yle)=>{"use strict";var Wle=Jt(),Gle=Hle(),$=Yle.exports=Wle.util=Wle.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){$.nextTick=process.nextTick,typeof setImmediate=="function"?$.setImmediate=setImmediate:$.setImmediate=$.nextTick;return}if(typeof setImmediate=="function"){$.setImmediate=function(){return setImmediate.apply(void 0,arguments)},$.nextTick=function(a){return setImmediate(a)};return}if($.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(l){if(l.source===window&&l.data===e){l.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(u){u()})}};var o=a,e="forge.setImmediate",t=[];$.setImmediate=function(l){t.push(l),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var l=t.slice();t.length=0,l.forEach(function(c){c()})}).observe(i,{attributes:!0});var s=$.setImmediate;$.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),s(l)):(t.push(l),t.length===1&&i.setAttribute("a",n=!n))}}$.nextTick=$.setImmediate})();$.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;$.globalScope=function(){return $.isNodejs?global:typeof self>"u"?window:self}();$.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};$.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};$.isArrayBufferView=function(e){return e&&$.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function JE(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}$.ByteBuffer=e3;function e3(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if($.isArrayBuffer(e)||$.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof e3||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}$.ByteStringBuffer=e3;var yje=4096;$.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>yje&&(this.data.substr(0,1),this._constructedStringLength=0)};$.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};$.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};$.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};$.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};$.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};$.ByteStringBuffer.prototype.putString=function(e){return this.putBytes($.encodeUtf8(e))};$.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};$.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};$.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};$.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};$.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};$.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};$.ByteStringBuffer.prototype.putInt=function(e,t){JE(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};$.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};$.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};$.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};$.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};$.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};$.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};$.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};$.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};$.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};$.ByteStringBuffer.prototype.getInt=function(e){JE(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};$.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};$.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};$.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};$.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};$.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};$.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};$.ByteStringBuffer.prototype.copy=function(){var e=$.createBuffer(this.data);return e.read=this.read,e};$.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};$.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};$.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};$.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};$.ByteStringBuffer.prototype.toString=function(){return $.decodeUtf8(this.bytes())};function vje(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=$.isArrayBuffer(e),n=$.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}$.DataBuffer=vje;$.DataBuffer.prototype.length=function(){return this.write-this.read};$.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};$.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};$.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};$.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};$.DataBuffer.prototype.putBytes=function(e,t){if($.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if($.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof $.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&$.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof $.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=$.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=$.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=$.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=$.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=$.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};$.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};$.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};$.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};$.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};$.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};$.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};$.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};$.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};$.DataBuffer.prototype.putInt=function(e,t){JE(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};$.DataBuffer.prototype.putSignedInt=function(e,t){return JE(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};$.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};$.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};$.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};$.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};$.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};$.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};$.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};$.DataBuffer.prototype.getInt=function(e){JE(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};$.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};$.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};$.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};$.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};$.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};$.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};$.DataBuffer.prototype.copy=function(){return new $.DataBuffer(this)};$.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};$.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};$.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};$.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};$.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return $.binary.raw.encode(t);if(e==="hex")return $.binary.hex.encode(t);if(e==="base64")return $.binary.base64.encode(t);if(e==="utf8")return $.text.utf8.decode(t);if(e==="utf16")return $.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};$.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=$.encodeUtf8(e)),new $.ByteBuffer(e)};$.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};$.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};$.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};$.bytesToHex=function(e){return $.createBuffer(e).toHex()};$.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var xh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",wh=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],$le="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";$.encode64=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.length;)i=e.charCodeAt(a++),s=e.charCodeAt(a++),o=e.charCodeAt(a++),r+=xh.charAt(i>>2),r+=xh.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=xh.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":xh.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};$.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,o=0;o<e.length;)r=wh[e.charCodeAt(o++)-43],n=wh[e.charCodeAt(o++)-43],i=wh[e.charCodeAt(o++)-43],s=wh[e.charCodeAt(o++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};$.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};$.decodeUtf8=function(e){return decodeURIComponent(escape(e))};$.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Gle.encode,decode:Gle.decode}};$.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};$.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};$.binary.hex.encode=$.bytesToHex;$.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};$.binary.base64.encode=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.byteLength;)i=e[a++],s=e[a++],o=e[a++],r+=xh.charAt(i>>2),r+=xh.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=xh.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":xh.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};$.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,l=0,c=r;l<e.length;)i=wh[e.charCodeAt(l++)-43],s=wh[e.charCodeAt(l++)-43],o=wh[e.charCodeAt(l++)-43],a=wh[e.charCodeAt(l++)-43],n[c++]=i<<2|s>>4,o!==64&&(n[c++]=(s&15)<<4|o>>2,a!==64&&(n[c++]=(o&3)<<6|a));return t?c-r:n.subarray(0,c)};$.binary.base58.encode=function(e,t){return $.binary.baseN.encode(e,$le,t)};$.binary.base58.decode=function(e,t){return $.binary.baseN.decode(e,$le,t)};$.text={utf8:{},utf16:{}};$.text.utf8.encode=function(e,t,r){e=$.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};$.text.utf8.decode=function(e){return $.decodeUtf8(String.fromCharCode.apply(null,e))};$.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n};$.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};$.deflate=function(e,t,r){if(t=$.decode64(e.deflate($.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};$.inflate=function(e,t,r){var n=e.inflate($.encode64(t)).rval;return n===null?null:$.decode64(n)};var t3=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=$.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},r3=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse($.decode64(r))),r},Cje=function(e,t,r,n){var i=r3(e,t);i===null&&(i={}),i[r]=n,t3(e,t,i)},bje=function(e,t,r){var n=r3(e,t);return n!==null&&(n=r in n?n[r]:null),n},Eje=function(e,t,r){var n=r3(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),t3(e,t,n)}},_je=function(e,t){t3(e,t,null)},NT=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0)}catch(l){o=l}if(s)break}if(!s)throw o;return n};$.setItem=function(e,t,r,n,i){NT(Cje,arguments,i)};$.getItem=function(e,t,r,n){return NT(bje,arguments,n)};$.removeItem=function(e,t,r,n){NT(Eje,arguments,n)};$.clearItems=function(e,t,r){NT(_je,arguments,r)};$.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};$.format=function(e){for(var t=/%./g,r,n,i=0,s=[],o=0;r=t.exec(e);){n=e.substring(o,t.lastIndex-2),n.length>0&&s.push(n),o=t.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")};$.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=r===void 0?",":r,a=n===void 0?".":n,l=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=c.length>3?c.length%3:0;return l+(u?c.substr(0,u)+a:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")};$.formatSize=function(e){return e>=1073741824?e=$.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=$.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=$.formatNumber(e/1024,0)+" KiB":e=$.formatNumber(e,0)+" bytes",e};$.bytesFromIP=function(e){return e.indexOf(".")!==-1?$.bytesFromIPv4(e):e.indexOf(":")!==-1?$.bytesFromIPv6(e):null};$.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=$.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};$.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(o){return o.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=$.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=$.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};$.bytesToIP=function(e){return e.length===4?$.bytesToIPv4(e):e.length===16?$.bytesToIPv6(e):null};$.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};$.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=$.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=t.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(s)}if(r.length>0){var l=r[n];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),l.start===0&&t.unshift(""),l.end===7&&t.push(""))}return t.join(":")};$.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in $&&!e.update)return t(null,$.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return $.cores=navigator.hardwareConcurrency,t(null,$.cores);if(typeof Worker>"u")return $.cores=1,t(null,$.cores);if(typeof Blob>"u")return $.cores=2,t(null,$.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),l=a+4;Date.now()<l;);self.postMessage({st:a,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,l){if(a===0){var c=Math.floor(o.reduce(function(u,f){return u+f},0)/o.length);return $.cores=Math.max(1,c),URL.revokeObjectURL(r),t(null,$.cores)}i(l,function(u,f){o.push(s(l,f)),n(o,a-1,l)})}function i(o,a){for(var l=[],c=[],u=0;u<o;++u){var f=new Worker(r);f.addEventListener("message",function(p){if(c.push(p.data),c.length===o){for(var g=0;g<o;++g)l[g].terminate();a(null,c)}}),l.push(f)}for(var u=0;u<o;++u)l[u].postMessage(u)}function s(o,a){for(var l=[],c=0;c<o;++c)for(var u=a[c],f=l[c]=[],p=0;p<o;++p)if(c!==p){var g=a[p];(u.st>g.st&&u.st<g.et||g.st>u.st&&g.st<u.et)&&f.push(p)}return l.reduce(function(m,y){return Math.max(m,y.length)},0)}}});var PT=_((bRt,Kle)=>{"use strict";var ns=Jt();Nr();Kle.exports=ns.cipher=ns.cipher||{};ns.cipher.algorithms=ns.cipher.algorithms||{};ns.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=ns.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new ns.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};ns.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=ns.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new ns.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};ns.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),ns.cipher.algorithms[e]=t};ns.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in ns.cipher.algorithms?ns.cipher.algorithms[e]:null};var n3=ns.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};n3.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=ns.util.createBuffer(),this.output=e.output||ns.util.createBuffer(),this.mode.start(t)};n3.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};n3.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var s3=_((ERt,zle)=>{"use strict";var is=Jt();Nr();is.cipher=is.cipher||{};var ur=zle.exports=is.cipher.modes=is.cipher.modes||{};ur.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ur.ecb.prototype.start=function(e){};ur.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};ur.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};ur.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};ur.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};ur.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ur.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=LT(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ur.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};ur.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};ur.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};ur.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};ur.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=is.util.createBuffer(),this._partialBytes=0};ur.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=LT(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ur.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ur.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ur.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=is.util.createBuffer(),this._partialBytes=0};ur.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=LT(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ur.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ur.ofb.prototype.decrypt=ur.ofb.prototype.encrypt;ur.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=is.util.createBuffer(),this._partialBytes=0};ur.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=LT(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ur.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}UT(this._inBlock)};ur.ctr.prototype.decrypt=ur.ctr.prototype.encrypt;ur.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=is.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ur.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=is.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=is.util.createBuffer(e.additionalData):r=is.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=is.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i3(n*8)))}this._inBlock=this._j0.slice(0),UT(this._inBlock),this._partialBytes=0,r=is.util.createBuffer(r),this._aDataLength=i3(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};ur.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),UT(this._inBlock)};ur.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),UT(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};ur.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=is.util.createBuffer();var n=this._aDataLength.concat(i3(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};ur.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};ur.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};ur.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};ur.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};ur.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],l=o/n|0,c=(n-1-o%n)*t;a[l]=1<<t-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s};ur.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],l=i[o];i[s+o]=[a[0]^l[0],a[1]^l[1],a[2]^l[2],a[3]^l[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};function LT(e,t){if(typeof e=="string"&&(e=is.util.createBuffer(e)),is.util.isArray(e)&&e.length>4){var r=e;e=is.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!is.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function UT(e){e[e.length-1]=e[e.length-1]+1&4294967295}function i3(e){return[e/4294967296|0,e&4294967295]}});var Sh=_((_Rt,Xle)=>{"use strict";var En=Jt();PT();s3();Nr();Xle.exports=En.aes=En.aes||{};En.aes.startEncrypting=function(e,t,r,n){var i=OT({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};En.aes.createEncryptionCipher=function(e,t){return OT({key:e,output:null,decrypt:!1,mode:t})};En.aes.startDecrypting=function(e,t,r,n){var i=OT({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};En.aes.createDecryptionCipher=function(e,t){return OT({key:e,output:null,decrypt:!0,mode:t})};En.aes.Algorithm=function(e,t){l3||jle();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return a3(r._w,n,i,!1)},decrypt:function(n,i){return a3(r._w,n,i,!0)}}}),r._init=!1};En.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=En.util.createBuffer(t);else if(En.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=En.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!En.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!En.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Zle(t,e.decrypt&&!o),this._init=!0}};En.aes._expandKey=function(e,t){return l3||jle(),Zle(e,t)};En.aes._updateBlock=a3;cy("AES-ECB",En.cipher.modes.ecb);cy("AES-CBC",En.cipher.modes.cbc);cy("AES-CFB",En.cipher.modes.cfb);cy("AES-OFB",En.cipher.modes.ofb);cy("AES-CTR",En.cipher.modes.ctr);cy("AES-GCM",En.cipher.modes.gcm);function cy(e,t){var r=function(){return new En.aes.Algorithm(e,t)};En.cipher.registerAlgorithm(e,r)}var l3=!1,ly=4,Ao,o3,Jle,Op,Dc;function jle(){l3=!0,Jle=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Ao=new Array(256),o3=new Array(256),Op=new Array(4),Dc=new Array(4);for(var t=0;t<4;++t)Op[t]=new Array(256),Dc[t]=new Array(256);for(var r=0,n=0,i,s,o,a,l,c,u,t=0;t<256;++t){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Ao[r]=a,o3[a]=r,l=e[a],i=e[r],s=e[i],o=e[s],c=l<<24^a<<16^a<<8^(a^l),u=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var f=0;f<4;++f)Op[f][r]=c,Dc[f][a]=u,c=c<<24|c>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^e[e[e[i^o]]],n^=e[e[n]])}}function Zle(e,t){for(var r=e.slice(0),n,i=1,s=r.length,o=s+6+1,a=ly*o,l=s;l<a;++l)n=r[l-1],l%s===0?(n=Ao[n>>>16&255]<<24^Ao[n>>>8&255]<<16^Ao[n&255]<<8^Ao[n>>>24]^Jle[i]<<24,i++):s>6&&l%s===4&&(n=Ao[n>>>24]<<24^Ao[n>>>16&255]<<16^Ao[n>>>8&255]<<8^Ao[n&255]),r[l]=r[l-s]^n;if(t){var c,u=Dc[0],f=Dc[1],p=Dc[2],g=Dc[3],m=r.slice(0);a=r.length;for(var l=0,y=a-ly;l<a;l+=ly,y-=ly)if(l===0||l===a-ly)m[l]=r[y],m[l+1]=r[y+3],m[l+2]=r[y+2],m[l+3]=r[y+1];else for(var v=0;v<ly;++v)c=r[y+v],m[l+(3&-v)]=u[Ao[c>>>24]]^f[Ao[c>>>16&255]]^p[Ao[c>>>8&255]]^g[Ao[c&255]];r=m}return r}function a3(e,t,r,n){var i=e.length/4-1,s,o,a,l,c;n?(s=Dc[0],o=Dc[1],a=Dc[2],l=Dc[3],c=o3):(s=Op[0],o=Op[1],a=Op[2],l=Op[3],c=Ao);var u,f,p,g,m,y,v;u=t[0]^e[0],f=t[n?3:1]^e[1],p=t[2]^e[2],g=t[n?1:3]^e[3];for(var C=3,E=1;E<i;++E)m=s[u>>>24]^o[f>>>16&255]^a[p>>>8&255]^l[g&255]^e[++C],y=s[f>>>24]^o[p>>>16&255]^a[g>>>8&255]^l[u&255]^e[++C],v=s[p>>>24]^o[g>>>16&255]^a[u>>>8&255]^l[f&255]^e[++C],g=s[g>>>24]^o[u>>>16&255]^a[f>>>8&255]^l[p&255]^e[++C],u=m,f=y,p=v;r[0]=c[u>>>24]<<24^c[f>>>16&255]<<16^c[p>>>8&255]<<8^c[g&255]^e[++C],r[n?3:1]=c[f>>>24]<<24^c[p>>>16&255]<<16^c[g>>>8&255]<<8^c[u&255]^e[++C],r[2]=c[p>>>24]<<24^c[g>>>16&255]<<16^c[u>>>8&255]<<8^c[f&255]^e[++C],r[n?1:3]=c[g>>>24]<<24^c[u>>>16&255]<<16^c[f>>>8&255]<<8^c[p&255]^e[++C]}function OT(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=En.cipher.createDecipher(r,e.key):n=En.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof En.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var Ih=_((xRt,ece)=>{"use strict";var jE=Jt();jE.pki=jE.pki||{};var c3=ece.exports=jE.pki.oids=jE.oids=jE.oids||{};function ye(e,t){c3[e]=t,c3[t]=e}function sn(e,t){c3[e]=t}ye("1.2.840.113549.1.1.1","rsaEncryption");ye("1.2.840.113549.1.1.4","md5WithRSAEncryption");ye("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ye("1.2.840.113549.1.1.7","RSAES-OAEP");ye("1.2.840.113549.1.1.8","mgf1");ye("1.2.840.113549.1.1.9","pSpecified");ye("1.2.840.113549.1.1.10","RSASSA-PSS");ye("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ye("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ye("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ye("1.3.101.112","EdDSA25519");ye("1.2.840.10040.4.3","dsa-with-sha1");ye("1.3.14.3.2.7","desCBC");ye("1.3.14.3.2.26","sha1");ye("1.3.14.3.2.29","sha1WithRSASignature");ye("2.16.840.1.101.3.4.2.1","sha256");ye("2.16.840.1.101.3.4.2.2","sha384");ye("2.16.840.1.101.3.4.2.3","sha512");ye("2.16.840.1.101.3.4.2.4","sha224");ye("2.16.840.1.101.3.4.2.5","sha512-224");ye("2.16.840.1.101.3.4.2.6","sha512-256");ye("1.2.840.113549.2.2","md2");ye("1.2.840.113549.2.5","md5");ye("1.2.840.113549.1.7.1","data");ye("1.2.840.113549.1.7.2","signedData");ye("1.2.840.113549.1.7.3","envelopedData");ye("1.2.840.113549.1.7.4","signedAndEnvelopedData");ye("1.2.840.113549.1.7.5","digestedData");ye("1.2.840.113549.1.7.6","encryptedData");ye("1.2.840.113549.1.9.1","emailAddress");ye("1.2.840.113549.1.9.2","unstructuredName");ye("1.2.840.113549.1.9.3","contentType");ye("1.2.840.113549.1.9.4","messageDigest");ye("1.2.840.113549.1.9.5","signingTime");ye("1.2.840.113549.1.9.6","counterSignature");ye("1.2.840.113549.1.9.7","challengePassword");ye("1.2.840.113549.1.9.8","unstructuredAddress");ye("1.2.840.113549.1.9.14","extensionRequest");ye("1.2.840.113549.1.9.20","friendlyName");ye("1.2.840.113549.1.9.21","localKeyId");ye("1.2.840.113549.1.9.22.1","x509Certificate");ye("1.2.840.113549.1.12.10.1.1","keyBag");ye("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ye("1.2.840.113549.1.12.10.1.3","certBag");ye("1.2.840.113549.1.12.10.1.4","crlBag");ye("1.2.840.113549.1.12.10.1.5","secretBag");ye("1.2.840.113549.1.12.10.1.6","safeContentsBag");ye("1.2.840.113549.1.5.13","pkcs5PBES2");ye("1.2.840.113549.1.5.12","pkcs5PBKDF2");ye("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ye("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ye("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ye("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ye("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ye("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ye("1.2.840.113549.2.7","hmacWithSHA1");ye("1.2.840.113549.2.8","hmacWithSHA224");ye("1.2.840.113549.2.9","hmacWithSHA256");ye("1.2.840.113549.2.10","hmacWithSHA384");ye("1.2.840.113549.2.11","hmacWithSHA512");ye("1.2.840.113549.3.7","des-EDE3-CBC");ye("2.16.840.1.101.3.4.1.2","aes128-CBC");ye("2.16.840.1.101.3.4.1.22","aes192-CBC");ye("2.16.840.1.101.3.4.1.42","aes256-CBC");ye("2.5.4.3","commonName");ye("2.5.4.4","surname");ye("2.5.4.5","serialNumber");ye("2.5.4.6","countryName");ye("2.5.4.7","localityName");ye("2.5.4.8","stateOrProvinceName");ye("2.5.4.9","streetAddress");ye("2.5.4.10","organizationName");ye("2.5.4.11","organizationalUnitName");ye("2.5.4.12","title");ye("2.5.4.13","description");ye("2.5.4.15","businessCategory");ye("2.5.4.17","postalCode");ye("2.5.4.42","givenName");ye("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ye("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ye("2.16.840.1.113730.1.1","nsCertType");ye("2.16.840.1.113730.1.13","nsComment");sn("2.5.29.1","authorityKeyIdentifier");sn("2.5.29.2","keyAttributes");sn("2.5.29.3","certificatePolicies");sn("2.5.29.4","keyUsageRestriction");sn("2.5.29.5","policyMapping");sn("2.5.29.6","subtreesConstraint");sn("2.5.29.7","subjectAltName");sn("2.5.29.8","issuerAltName");sn("2.5.29.9","subjectDirectoryAttributes");sn("2.5.29.10","basicConstraints");sn("2.5.29.11","nameConstraints");sn("2.5.29.12","policyConstraints");sn("2.5.29.13","basicConstraints");ye("2.5.29.14","subjectKeyIdentifier");ye("2.5.29.15","keyUsage");sn("2.5.29.16","privateKeyUsagePeriod");ye("2.5.29.17","subjectAltName");ye("2.5.29.18","issuerAltName");ye("2.5.29.19","basicConstraints");sn("2.5.29.20","cRLNumber");sn("2.5.29.21","cRLReason");sn("2.5.29.22","expirationDate");sn("2.5.29.23","instructionCode");sn("2.5.29.24","invalidityDate");sn("2.5.29.25","cRLDistributionPoints");sn("2.5.29.26","issuingDistributionPoint");sn("2.5.29.27","deltaCRLIndicator");sn("2.5.29.28","issuingDistributionPoint");sn("2.5.29.29","certificateIssuer");sn("2.5.29.30","nameConstraints");ye("2.5.29.31","cRLDistributionPoints");ye("2.5.29.32","certificatePolicies");sn("2.5.29.33","policyMappings");sn("2.5.29.34","policyConstraints");ye("2.5.29.35","authorityKeyIdentifier");sn("2.5.29.36","policyConstraints");ye("2.5.29.37","extKeyUsage");sn("2.5.29.46","freshestCRL");sn("2.5.29.54","inhibitAnyPolicy");ye("1.3.6.1.4.1.11129.2.4.2","timestampList");ye("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ye("1.3.6.1.5.5.7.3.1","serverAuth");ye("1.3.6.1.5.5.7.3.2","clientAuth");ye("1.3.6.1.5.5.7.3.3","codeSigning");ye("1.3.6.1.5.5.7.3.4","emailProtection");ye("1.3.6.1.5.5.7.3.8","timeStamping")});var Tc=_((wRt,rce)=>{"use strict";var Nn=Jt();Nr();Ih();var Me=rce.exports=Nn.asn1=Nn.asn1||{};Me.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Me.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Me.create=function(e,t,r,n,i){if(Nn.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:e,type:t,constructed:r,composed:r||Nn.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=Me.copy(a)),a};Me.copy=function(e,t){var r;if(Nn.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(Me.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:Me.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};Me.equals=function(e,t,r){if(Nn.util.isArray(e)){if(!Nn.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Me.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&Me.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};Me.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function ZE(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var xje=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;ZE(e,t,s),n=e.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Me.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Nn.util.createBuffer(e));var r=e.length(),n=qT(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function qT(e,t,r,n){var i;ZE(e,t,2);var s=e.getByte();t--;var o=s&192,a=s&31;i=e.length();var l=xje(e,t);if(t-=i-e.length(),l!==void 0&&l>t){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=l,c}l=t}var u,f,p=(s&32)===32;if(p)if(u=[],l===void 0)for(;;){if(ZE(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),u.push(qT(e,t,r+1,n)),t-=i-e.length()}else for(;l>0;)i=e.length(),u.push(qT(e,l,r+1,n)),t-=i-e.length(),l-=i-e.length();if(u===void 0&&o===Me.Class.UNIVERSAL&&a===Me.Type.BITSTRING&&(f=e.bytes(l)),u===void 0&&n.decodeBitStrings&&o===Me.Class.UNIVERSAL&&a===Me.Type.BITSTRING&&l>1){var g=e.read,m=t,y=0;if(a===Me.Type.BITSTRING&&(ZE(e,t,1),y=e.getByte(),t--),y===0)try{i=e.length();var v={strict:!0,decodeBitStrings:!0},C=qT(e,t,r+1,v),E=i-e.length();t-=E,a==Me.Type.BITSTRING&&E++;var w=C.tagClass;E===l&&(w===Me.Class.UNIVERSAL||w===Me.Class.CONTEXT_SPECIFIC)&&(u=[C])}catch{}u===void 0&&(e.read=g,t=m)}if(u===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=t}if(a===Me.Type.BMPSTRING)for(u="";l>0;l-=2)ZE(e,t,2),u+=String.fromCharCode(e.getInt16()),t-=2;else u=e.getBytes(l),t-=l}var B=f===void 0?null:{bitStringContents:f};return Me.create(o,a,p,u,B)}Me.toDer=function(e){var t=Nn.util.createBuffer(),r=e.tagClass|e.type,n=Nn.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=Me.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(Me.toDer(e.value[s]))}else if(e.type===Me.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===Me.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);t.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)t.putByte(a.charCodeAt(s))}return t.putBuffer(n),t};Me.oidToDer=function(e){var t=e.split("."),r=Nn.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,o,a=2;a<t.length;++a){n=!0,i=[],s=parseInt(t[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};Me.derToOid=function(e){var t;typeof e=="string"&&(e=Nn.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};Me.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var l=e.charAt(10),c=10;l!=="+"&&l!=="-"&&(a=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),c&&(l=e.charAt(c),l==="+"||l==="-")){var u=parseInt(e.substr(c+1,2),10),f=parseInt(e.substr(c+4,2),10),p=u*60+f;p*=6e4,l==="+"?t.setTime(+t-p):t.setTime(+t+p)}return t};Me.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),l=0,c=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var f=e.length-5,p=e.charAt(f);if(p==="+"||p==="-"){var g=parseInt(e.substr(f+1,2),10),m=parseInt(e.substr(f+4,2),10);c=g*60+m,c*=6e4,p==="+"&&(c*=-1),u=!0}return e.charAt(14)==="."&&(l=parseFloat(e.substr(14),10)*1e3),u?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,l),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(s,o,a,l)),t};Me.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};Me.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};Me.integerToDer=function(e){var t=Nn.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};Me.derToInteger=function(e){typeof e=="string"&&(e=Nn.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};Me.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&Nn.util.isArray(t.value))for(var s=0,o=0;i&&o<t.value.length;++o)i=t.value[o].optional||!1,e.value[s]&&(i=Me.validate(e.value[s],t.value[o],r,n),i?++s:t.value[o].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var a;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var l=e.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var tce=/[^\\u0000-\\u00ff]/;Me.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case Me.Class.UNIVERSAL:n+="Universal:";break;case Me.Class.APPLICATION:n+="Application:";break;case Me.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Me.Class.PRIVATE:n+="Private:";break}if(e.tagClass===Me.Class.UNIVERSAL)switch(n+=e.type,e.type){case Me.Type.NONE:n+=" (None)";break;case Me.Type.BOOLEAN:n+=" (Boolean)";break;case Me.Type.INTEGER:n+=" (Integer)";break;case Me.Type.BITSTRING:n+=" (Bit string)";break;case Me.Type.OCTETSTRING:n+=" (Octet string)";break;case Me.Type.NULL:n+=" (Null)";break;case Me.Type.OID:n+=" (Object Identifier)";break;case Me.Type.ODESC:n+=" (Object Descriptor)";break;case Me.Type.EXTERNAL:n+=" (External or Instance of)";break;case Me.Type.REAL:n+=" (Real)";break;case Me.Type.ENUMERATED:n+=" (Enumerated)";break;case Me.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Me.Type.UTF8:n+=" (UTF8)";break;case Me.Type.ROID:n+=" (Relative Object Identifier)";break;case Me.Type.SEQUENCE:n+=" (Sequence)";break;case Me.Type.SET:n+=" (Set)";break;case Me.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Me.Type.IA5String:n+=" (IA5String (ASCII))";break;case Me.Type.UTCTIME:n+=" (UTC time)";break;case Me.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Me.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var o=0,a="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(o+=1,a+=Me.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",e.type===Me.Type.OID){var l=Me.derToOid(e.value);n+=l,Nn.pki&&Nn.pki.oids&&l in Nn.pki.oids&&(n+=" ("+Nn.pki.oids[l]+") ")}if(e.type===Me.Type.INTEGER)try{n+=Me.derToInteger(e.value)}catch{n+="0x"+Nn.util.bytesToHex(e.value)}else if(e.type===Me.Type.BITSTRING){if(e.value.length>1?n+="0x"+Nn.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(e.type===Me.Type.OCTETSTRING)tce.test(e.value)||(n+="("+e.value+") "),n+="0x"+Nn.util.bytesToHex(e.value);else if(e.type===Me.Type.UTF8)try{n+=Nn.util.decodeUtf8(e.value)}catch(u){if(u.message==="URI malformed")n+="0x"+Nn.util.bytesToHex(e.value)+" (malformed UTF8)";else throw u}else e.type===Me.Type.PRINTABLESTRING||e.type===Me.Type.IA5String?n+=e.value:tce.test(e.value)?n+="0x"+Nn.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Su=_((SRt,nce)=>{"use strict";var VT=Jt();nce.exports=VT.md=VT.md||{};VT.md.algorithms=VT.md.algorithms||{}});var uy=_((IRt,ice)=>{"use strict";var Yd=Jt();Su();Nr();var wje=ice.exports=Yd.hmac=Yd.hmac||{};wje.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Yd.md.algorithms)t=Yd.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(o===null)o=e;else{if(typeof o=="string")o=Yd.util.createBuffer(o);else if(Yd.util.isArray(o)){var a=o;o=Yd.util.createBuffer();for(var l=0;l<a.length;++l)o.putByte(a[l])}var c=o.length();c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=Yd.util.createBuffer(),n=Yd.util.createBuffer(),c=o.length();for(var l=0;l<c;++l){var a=o.at(l);r.putByte(54^a),n.putByte(92^a)}if(c<t.blockLength)for(var a=t.blockLength-c,l=0;l<a;++l)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i}});var WT=_((BRt,lce)=>{"use strict";var Iu=Jt();Su();Nr();var oce=lce.exports=Iu.md5=Iu.md5||{};Iu.md.md5=Iu.md.algorithms.md5=oce;oce.create=function(){ace||Sje();var e=null,t=Iu.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Iu.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Iu.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),sce(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Iu.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(u3.substr(0,n.blockLength-o));for(var a,l=0,c=n.fullMessageLength.length-1;c>=0;--c)a=n.fullMessageLength[c]*8+l,l=a/4294967296>>>0,i.putInt32Le(a>>>0);var u={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};sce(u,r,i);var f=Iu.util.createBuffer();return f.putInt32Le(u.h0),f.putInt32Le(u.h1),f.putInt32Le(u.h2),f.putInt32Le(u.h3),f},n};var u3=null,HT=null,XE=null,dy=null,ace=!1;function Sje(){u3="\x80",u3+=Iu.util.fillString("\0",64),HT=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],XE=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],dy=new Array(64);for(var e=0;e<64;++e)dy[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);ace=!0}function sce(e,t,r){for(var n,i,s,o,a,l,c,u,f=r.length();f>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,u=0;u<16;++u)t[u]=r.getInt32Le(),l=a^s&(o^a),n=i+l+dy[u]+t[u],c=XE[u],i=a,a=o,o=s,s+=n<<c|n>>>32-c;for(;u<32;++u)l=o^a&(s^o),n=i+l+dy[u]+t[HT[u]],c=XE[u],i=a,a=o,o=s,s+=n<<c|n>>>32-c;for(;u<48;++u)l=s^o^a,n=i+l+dy[u]+t[HT[u]],c=XE[u],i=a,a=o,o=s,s+=n<<c|n>>>32-c;for(;u<64;++u)l=o^(s|~a),n=i+l+dy[u]+t[HT[u]],c=XE[u],i=a,a=o,o=s,s+=n<<c|n>>>32-c;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,f-=64}}});var qp=_((DRt,uce)=>{"use strict";var $T=Jt();Nr();var cce=uce.exports=$T.pem=$T.pem||{};cce.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=GT(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=GT(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=GT(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=GT(e.headers[i]);return e.procType&&(r+=`\r
`),r+=$T.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};cce.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var o=s[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:$T.util.decode64(s[3])};if(t.push(a),!!s[2]){for(var l=s[2].split(i),c=0;s&&c<l.length;){for(var u=l[c].replace(/\s+$/,""),f=c+1;f<l.length;++f){var p=l[f];if(!/\s/.test(p[0]))break;u+=p,c=f}if(s=u.match(n),s){for(var g={name:s[1],values:[]},m=s[2].split(","),y=0;y<m.length;++y)g.values.push(Ije(m[y]));if(a.procType)if(!a.contentDomain&&g.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&g.name==="DEK-Info"){if(g.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(g);else{if(g.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(g.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function GT(e){for(var t=e.name+": ",r=[],n=function(l,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var a=t[o];a===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+a+t.substr(o+1),s=i-o-1,o=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(o=i);return t}function Ije(e){return e.replace(/^\s+/,"")}});var e_=_((TRt,fce)=>{"use strict";var $n=Jt();PT();s3();Nr();fce.exports=$n.des=$n.des||{};$n.des.startEncrypting=function(e,t,r,n){var i=YT({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};$n.des.createEncryptionCipher=function(e,t){return YT({key:e,output:null,decrypt:!1,mode:t})};$n.des.startDecrypting=function(e,t,r,n){var i=YT({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};$n.des.createDecryptionCipher=function(e,t){return YT({key:e,output:null,decrypt:!0,mode:t})};$n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return dce(r._keys,n,i,!1)},decrypt:function(n,i){return dce(r._keys,n,i,!0)}}}),r._init=!1};$n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=$n.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=Nje(t),this._init=!0}};Bu("DES-ECB",$n.cipher.modes.ecb);Bu("DES-CBC",$n.cipher.modes.cbc);Bu("DES-CFB",$n.cipher.modes.cfb);Bu("DES-OFB",$n.cipher.modes.ofb);Bu("DES-CTR",$n.cipher.modes.ctr);Bu("3DES-ECB",$n.cipher.modes.ecb);Bu("3DES-CBC",$n.cipher.modes.cbc);Bu("3DES-CFB",$n.cipher.modes.cfb);Bu("3DES-OFB",$n.cipher.modes.ofb);Bu("3DES-CTR",$n.cipher.modes.ctr);function Bu(e,t){var r=function(){return new $n.des.Algorithm(e,t)};$n.cipher.registerAlgorithm(e,r)}var Bje=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Dje=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Tje=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Rje=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],kje=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Mje=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Fje=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Qje=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Nje(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=e.length()>8?3:1,v=[],C=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,w,B=0;B<y;B++){var R=e.getInt32(),N=e.getInt32();w=(R>>>4^N)&252645135,N^=w,R^=w<<4,w=(N>>>-16^R)&65535,R^=w,N^=w<<-16,w=(R>>>2^N)&858993459,N^=w,R^=w<<2,w=(N>>>-16^R)&65535,R^=w,N^=w<<-16,w=(R>>>1^N)&1431655765,N^=w,R^=w<<1,w=(N>>>8^R)&16711935,R^=w,N^=w<<8,w=(R>>>1^N)&1431655765,N^=w,R^=w<<1,w=R<<8|N>>>20&240,R=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=w;for(var W=0;W<C.length;++W){C[W]?(R=R<<2|R>>>26,N=N<<2|N>>>26):(R=R<<1|R>>>27,N=N<<1|N>>>27),R&=-15,N&=-15;var Z=t[R>>>28]|r[R>>>24&15]|n[R>>>20&15]|i[R>>>16&15]|s[R>>>12&15]|o[R>>>8&15]|a[R>>>4&15],te=l[N>>>28]|c[N>>>24&15]|u[N>>>20&15]|f[N>>>16&15]|p[N>>>12&15]|g[N>>>8&15]|m[N>>>4&15];w=(te>>>16^Z)&65535,v[E++]=Z^w,v[E++]=te^w<<16}}return v}function dce(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=t[0],l=t[1];o=(a>>>4^l)&252645135,l^=o,a^=o<<4,o=(a>>>16^l)&65535,l^=o,a^=o<<16,o=(l>>>2^a)&858993459,a^=o,l^=o<<2,o=(l>>>8^a)&16711935,a^=o,l^=o<<8,o=(a>>>1^l)&1431655765,l^=o,a^=o<<1,a=a<<1|a>>>31,l=l<<1|l>>>31;for(var c=0;c<i;c+=3){for(var u=s[c+1],f=s[c+2],p=s[c];p!=u;p+=f){var g=l^e[p],m=(l>>>4|l<<28)^e[p+1];o=a,a=l,l=o^(Dje[g>>>24&63]|Rje[g>>>16&63]|Mje[g>>>8&63]|Qje[g&63]|Bje[m>>>24&63]|Tje[m>>>16&63]|kje[m>>>8&63]|Fje[m&63])}o=a,a=l,l=o}a=a>>>1|a<<31,l=l>>>1|l<<31,o=(a>>>1^l)&1431655765,l^=o,a^=o<<1,o=(l>>>8^a)&16711935,a^=o,l^=o<<8,o=(l>>>2^a)&858993459,a^=o,l^=o<<2,o=(a>>>16^l)&65535,l^=o,a^=o<<16,o=(a>>>4^l)&252645135,l^=o,a^=o<<4,r[0]=a,r[1]=l}function YT(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=$n.cipher.createDecipher(r,e.key):n=$n.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof $n.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var KT=_((RRt,hce)=>{"use strict";var yo=Jt();uy();Su();Nr();var Pje=yo.pkcs5=yo.pkcs5||{},Kd;yo.util.isNodejs&&!yo.options.usePureJavaScript&&(Kd=require("crypto"));hce.exports=yo.pbkdf2=Pje.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),yo.util.isNodejs&&!yo.options.usePureJavaScript&&Kd.pbkdf2&&(i===null||typeof i!="object")&&(Kd.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?Kd.pbkdf2Sync.length===4?Kd.pbkdf2(e,t,r,n,function(w,B){if(w)return s(w);s(null,B.toString("binary"))}):Kd.pbkdf2(e,t,r,n,i,function(w,B){if(w)return s(w);s(null,B.toString("binary"))}):Kd.pbkdf2Sync.length===4?Kd.pbkdf2Sync(e,t,r,n).toString("binary"):Kd.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in yo.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=yo.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var l=Math.ceil(n/o),c=n-(l-1)*o,u=yo.hmac.create();u.start(i,e);var f="",p,g,m;if(!s){for(var y=1;y<=l;++y){u.start(null,null),u.update(t),u.update(yo.util.int32ToBytes(y)),p=m=u.digest().getBytes();for(var v=2;v<=r;++v)u.start(null,null),u.update(m),g=u.digest().getBytes(),p=yo.util.xorBytes(p,g,o),m=g;f+=y<l?p:p.substr(0,c)}return f}var y=1,v;function C(){if(y>l)return s(null,f);u.start(null,null),u.update(t),u.update(yo.util.int32ToBytes(y)),p=m=u.digest().getBytes(),v=2,E()}function E(){if(v<=r)return u.start(null,null),u.update(m),g=u.digest().getBytes(),p=yo.util.xorBytes(p,g,o),m=g,++v,yo.util.setImmediate(E);f+=y<l?p:p.substr(0,c),++y,C()}C()}});var f3=_((kRt,yce)=>{"use strict";var Du=Jt();Su();Nr();var pce=yce.exports=Du.sha256=Du.sha256||{};Du.md.sha256=Du.md.algorithms.sha256=pce;pce.create=function(){mce||Lje();var e=null,t=Du.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Du.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Du.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),gce(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Du.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(d3.substr(0,n.blockLength-o));for(var a,l,c=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,l=a/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};gce(f,r,i);var p=Du.util.createBuffer();return p.putInt32(f.h0),p.putInt32(f.h1),p.putInt32(f.h2),p.putInt32(f.h3),p.putInt32(f.h4),p.putInt32(f.h5),p.putInt32(f.h6),p.putInt32(f.h7),p},n};var d3=null,mce=!1,Ace=null;function Lje(){d3="\x80",d3+=Du.util.fillString("\0",64),Ace=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],mce=!0}function gce(e,t,r){for(var n,i,s,o,a,l,c,u,f,p,g,m,y,v,C,E=r.length();E>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=t[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(u=e.h0,f=e.h1,p=e.h2,g=e.h3,m=e.h4,y=e.h5,v=e.h6,C=e.h7,c=0;c<64;++c)o=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=v^m&(y^v),s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),l=u&f|p&(u^f),n=C+o+a+Ace[c]+t[c],i=s+l,C=v,v=y,y=m,m=g+n>>>0,g=p,p=f,f=u,u=n+i>>>0;e.h0=e.h0+u|0,e.h1=e.h1+f|0,e.h2=e.h2+p|0,e.h3=e.h3+g|0,e.h4=e.h4+m|0,e.h5=e.h5+y|0,e.h6=e.h6+v|0,e.h7=e.h7+C|0,E-=64}}});var h3=_((MRt,vce)=>{"use strict";var Tu=Jt();Nr();var zT=null;Tu.util.isNodejs&&!Tu.options.usePureJavaScript&&!process.versions["node-webkit"]&&(zT=require("crypto"));var Uje=vce.exports=Tu.prng=Tu.prng||{};Uje.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(c,u){if(!u)return t.generateSync(c);var f=t.plugin.cipher,p=t.plugin.increment,g=t.plugin.formatKey,m=t.plugin.formatSeed,y=Tu.util.createBuffer();t.key=null,v();function v(C){if(C)return u(C);if(y.length()>=c)return u(null,y.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return Tu.util.nextTick(function(){s(v)});var E=f(t.key,t.seed);t.generated+=E.length,y.putBytes(E),t.key=g(f(t.key,p(t.seed))),t.seed=m(f(t.key,t.seed)),Tu.util.setImmediate(v)}},t.generateSync=function(c){var u=t.plugin.cipher,f=t.plugin.increment,p=t.plugin.formatKey,g=t.plugin.formatSeed;t.key=null;for(var m=Tu.util.createBuffer();m.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&o();var y=u(t.key,t.seed);t.generated+=y.length,m.putBytes(y),t.key=p(u(t.key,f(t.seed))),t.seed=g(u(t.key,t.seed))}return m.getBytes(c)};function s(c){if(t.pools[0].messageLength>=32)return a(),c();var u=32-t.pools[0].messageLength<<5;t.seedFile(u,function(f,p){if(f)return c(f);t.collect(p),a(),c()})}function o(){if(t.pools[0].messageLength>=32)return a();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),a()}function a(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var u=1,f=0;f<32;++f)t.reseeds%u===0&&(c.update(t.pools[f].digest().getBytes()),t.pools[f].start()),u=u<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var p=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(p),t.generated=0}function l(c){var u=null,f=Tu.util.globalScope,p=f.crypto||f.msCrypto;p&&p.getRandomValues&&(u=function(R){return p.getRandomValues(R)});var g=Tu.util.createBuffer();if(u)for(;g.length()<c;){var m=Math.max(1,Math.min(c-g.length(),65536)/4),y=new Uint32Array(Math.floor(m));try{u(y);for(var v=0;v<y.length;++v)g.putInt32(y[v])}catch(R){if(!(typeof QuotaExceededError<"u"&&R instanceof QuotaExceededError))throw R}}if(g.length()<c)for(var C,E,w,B=Math.floor(Math.random()*65536);g.length()<c;){E=16807*(B&65535),C=16807*(B>>16),E+=(C&32767)<<16,E+=C>>15,E=(E&2147483647)+(E>>31),B=E&4294967295;for(var v=0;v<3;++v)w=B>>>(v<<3),w^=Math.floor(Math.random()*256),g.putByte(w&255)}return g.getBytes(c)}return zT?(t.seedFile=function(c,u){zT.randomBytes(c,function(f,p){if(f)return u(f);u(null,p.toString())})},t.seedFileSync=function(c){return zT.randomBytes(c).toString()}):(t.seedFile=function(c,u){try{u(null,l(c))}catch(f){u(f)}},t.seedFileSync=l),t.collect=function(c){for(var u=c.length,f=0;f<u;++f)t.pools[t.pool].update(c.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,u){for(var f="",p=0;p<u;p+=8)f+=String.fromCharCode(c>>p&255);t.collect(f)},t.registerWorker=function(c){if(c===self)t.seedFile=function(f,p){function g(m){var y=m.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",g),p(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:f}}})};else{var u=function(f){var p=f.data;p.forge&&p.forge.prng&&t.seedFile(p.forge.prng.needed,function(g,m){c.postMessage({forge:{prng:{err:g,bytes:m}}})})};c.addEventListener("message",u)}},t}});var Il=_((FRt,g3)=>{"use strict";var ss=Jt();Sh();f3();h3();Nr();(function(){if(ss.random&&ss.random.getBytes){g3.exports=ss.random;return}(function(e){var t={},r=new Array(4),n=ss.util.createBuffer();t.formatKey=function(f){var p=ss.util.createBuffer(f);return f=new Array(4),f[0]=p.getInt32(),f[1]=p.getInt32(),f[2]=p.getInt32(),f[3]=p.getInt32(),ss.aes._expandKey(f,!1)},t.formatSeed=function(f){var p=ss.util.createBuffer(f);return f=new Array(4),f[0]=p.getInt32(),f[1]=p.getInt32(),f[2]=p.getInt32(),f[3]=p.getInt32(),f},t.cipher=function(f,p){return ss.aes._updateBlock(f,p,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return++f[3],f},t.md=ss.md.sha256;function i(){var f=ss.prng.create(t);return f.getBytes=function(p,g){return f.generate(p,g)},f.getBytesSync=function(p){return f.generate(p)},f}var s=i(),o=null,a=ss.util.globalScope,l=a.crypto||a.msCrypto;if(l&&l.getRandomValues&&(o=function(f){return l.getRandomValues(f)}),ss.options.usePureJavaScript||!ss.util.isNodejs&&!o){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var u in navigator)try{typeof navigator[u]=="string"&&(c+=navigator[u])}catch{}s.collect(c),c=null}e&&(e().mousemove(function(f){s.collectInt(f.clientX,16),s.collectInt(f.clientY,16)}),e().keypress(function(f){s.collectInt(f.charCode,8)}))}if(!ss.random)ss.random=s;else for(var u in s)ss.random[u]=s[u];ss.random.createInstance=i,g3.exports=ss.random})(typeof jQuery<"u"?jQuery:null)})()});var m3=_((QRt,Ece)=>{"use strict";var jo=Jt();Nr();var p3=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Cce=[1,2,3,5],Oje=function(e,t){return e<<t&65535|(e&65535)>>16-t},qje=function(e,t){return(e&65535)>>t|e<<16-t&65535};Ece.exports=jo.rc2=jo.rc2||{};jo.rc2.expandKey=function(e,t){typeof e=="string"&&(e=jo.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(p3[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,p3[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,p3[r.at(a+1)^r.at(a+s)]);return r};var bce=function(e,t,r){var n=!1,i=null,s=null,o=null,a,l,c,u,f=[];for(e=jo.rc2.expandKey(e,t),c=0;c<64;c++)f.push(e.getInt16Le());r?(a=function(m){for(c=0;c<4;c++)m[c]+=f[u]+(m[(c+3)%4]&m[(c+2)%4])+(~m[(c+3)%4]&m[(c+1)%4]),m[c]=Oje(m[c],Cce[c]),u++},l=function(m){for(c=0;c<4;c++)m[c]+=f[m[(c+3)%4]&63]}):(a=function(m){for(c=3;c>=0;c--)m[c]=qje(m[c],Cce[c]),m[c]-=f[u]+(m[(c+3)%4]&m[(c+2)%4])+(~m[(c+3)%4]&m[(c+1)%4]),u--},l=function(m){for(c=3;c>=0;c--)m[c]-=f[m[(c+3)%4]&63]});var p=function(m){var y=[];for(c=0;c<4;c++){var v=i.getInt16Le();o!==null&&(r?v^=o.getInt16Le():o.putInt16Le(v)),y.push(v&65535)}u=r?0:63;for(var C=0;C<m.length;C++)for(var E=0;E<m[C][0];E++)m[C][1](y);for(c=0;c<4;c++)o!==null&&(r?o.putInt16Le(y[c]):y[c]^=o.getInt16Le()),s.putInt16Le(y[c])},g=null;return g={start:function(m,y){m&&typeof m=="string"&&(m=jo.util.createBuffer(m)),n=!1,i=jo.util.createBuffer(),s=y||new jo.util.createBuffer,o=m,g.output=s},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)p([[5,a],[1,l],[6,a],[1,l],[5,a]])},finish:function(m){var y=!0;if(r)if(m)y=m(8,i,!r);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(y&&(n=!0,g.update()),!r&&(y=i.length()===0,y))if(m)y=m(8,s,!r);else{var C=s.length(),E=s.at(C-1);E>C?y=!1:s.truncate(E)}return y}},g};jo.rc2.startEncrypting=function(e,t,r){var n=jo.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};jo.rc2.createEncryptionCipher=function(e,t){return bce(e,t,!0)};jo.rc2.startDecrypting=function(e,t,r){var n=jo.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};jo.rc2.createDecryptionCipher=function(e,t){return bce(e,t,!1)}});var r_=_((NRt,Tce)=>{"use strict";var A3=Jt();Tce.exports=A3.jsbn=A3.jsbn||{};var zd,Vje=0xdeadbeefcafe,_ce=(Vje&16777215)==15715070;function pe(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}A3.jsbn.BigInteger=pe;function Pr(){return new pe(null)}function Hje(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function Wje(e,t,r,n,i,s){for(var o=t&32767,a=t>>15;--s>=0;){var l=this.data[e]&32767,c=this.data[e++]>>15,u=a*l+c*o;l=o*l+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(u>>>15)+a*c+(i>>>30),r.data[n++]=l&1073741823}return i}function xce(e,t,r,n,i,s){for(var o=t&16383,a=t>>14;--s>=0;){var l=this.data[e]&16383,c=this.data[e++]>>14,u=a*l+c*o;l=o*l+((u&16383)<<14)+r.data[n]+i,i=(l>>28)+(u>>14)+a*c,r.data[n++]=l&268435455}return i}typeof navigator>"u"?(pe.prototype.am=xce,zd=28):_ce&&navigator.appName=="Microsoft Internet Explorer"?(pe.prototype.am=Wje,zd=30):_ce&&navigator.appName!="Netscape"?(pe.prototype.am=Hje,zd=26):(pe.prototype.am=xce,zd=28);pe.prototype.DB=zd;pe.prototype.DM=(1<<zd)-1;pe.prototype.DV=1<<zd;var y3=52;pe.prototype.FV=Math.pow(2,y3);pe.prototype.F1=y3-zd;pe.prototype.F2=2*zd-y3;var Gje="0123456789abcdefghijklmnopqrstuvwxyz",JT=new Array,fy,Bl;fy=48;for(Bl=0;Bl<=9;++Bl)JT[fy++]=Bl;fy=97;for(Bl=10;Bl<36;++Bl)JT[fy++]=Bl;fy=65;for(Bl=10;Bl<36;++Bl)JT[fy++]=Bl;function wce(e){return Gje.charAt(e)}function Sce(e,t){var r=JT[e.charCodeAt(t)];return r??-1}function $je(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Yje(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function Bh(e){var t=Pr();return t.fromInt(e),t}function Kje(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var o=r==8?e[n]&255:Sce(e,n);if(o<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&e[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&pe.ZERO.subTo(this,this)}function zje(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Jje(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=wce(n));o>=0;)a<t?(n=(this.data[o]&(1<<a)-1)<<t-a,n|=this.data[--o]>>(a+=this.DB-t)):(n=this.data[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=wce(n));return i?s:"0"}function jje(){var e=Pr();return pe.ZERO.subTo(this,e),e}function Zje(){return this.s<0?this.negate():this}function Xje(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function jT(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function e7e(){return this.t<=0?0:this.DB*(this.t-1)+jT(this.data[this.t-1]^this.s&this.DM)}function t7e(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function r7e(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function n7e(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)t.data[a]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function i7e(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function s7e(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function o7e(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&pe.ZERO.subTo(t,t)}function a7e(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function l7e(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Pr());var s=Pr(),o=this.s,a=e.s,l=this.DB-jT(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),i.lShiftTo(l,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,u=s.data[c-1];if(u!=0){var f=u*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),p=this.FV/f,g=(1<<this.F1)/f,m=1<<this.F2,y=r.t,v=y-c,C=t??Pr();for(s.dlShiftTo(v,C),r.compareTo(C)>=0&&(r.data[r.t++]=1,r.subTo(C,r)),pe.ONE.dlShiftTo(c,C),C.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--v>=0;){var E=r.data[--y]==u?this.DM:Math.floor(r.data[y]*p+(r.data[y-1]+m)*g);if((r.data[y]+=s.am(0,E,r,v,0,c))<E)for(s.dlShiftTo(v,C),r.subTo(C,r);r.data[y]<--E;)r.subTo(C,r)}t!=null&&(r.drShiftTo(c,t),o!=a&&pe.ZERO.subTo(t,t)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),o<0&&pe.ZERO.subTo(r,r)}}}function c7e(e){var t=Pr();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(pe.ZERO)>0&&e.subTo(t,t),t}function Vp(e){this.m=e}function u7e(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function d7e(e){return e}function f7e(e){e.divRemTo(this.m,null,e)}function h7e(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function g7e(e,t){e.squareTo(t),this.reduce(t)}Vp.prototype.convert=u7e;Vp.prototype.revert=d7e;Vp.prototype.reduce=f7e;Vp.prototype.mulTo=h7e;Vp.prototype.sqrTo=g7e;function p7e(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Hp(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function m7e(e){var t=Pr();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(pe.ZERO)>0&&this.m.subTo(t,t),t}function A7e(e){var t=Pr();return e.copyTo(t),this.reduce(t),t}function y7e(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function v7e(e,t){e.squareTo(t),this.reduce(t)}function C7e(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Hp.prototype.convert=m7e;Hp.prototype.revert=A7e;Hp.prototype.reduce=y7e;Hp.prototype.mulTo=C7e;Hp.prototype.sqrTo=v7e;function b7e(){return(this.t>0?this.data[0]&1:this.s)==0}function E7e(e,t){if(e>4294967295||e<1)return pe.ONE;var r=Pr(),n=Pr(),i=t.convert(this),s=jT(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)}function _7e(e,t){var r;return e<256||t.isEven()?r=new Vp(t):r=new Hp(t),this.exp(e,r)}pe.prototype.copyTo=$je;pe.prototype.fromInt=Yje;pe.prototype.fromString=Kje;pe.prototype.clamp=zje;pe.prototype.dlShiftTo=t7e;pe.prototype.drShiftTo=r7e;pe.prototype.lShiftTo=n7e;pe.prototype.rShiftTo=i7e;pe.prototype.subTo=s7e;pe.prototype.multiplyTo=o7e;pe.prototype.squareTo=a7e;pe.prototype.divRemTo=l7e;pe.prototype.invDigit=p7e;pe.prototype.isEven=b7e;pe.prototype.exp=E7e;pe.prototype.toString=Jje;pe.prototype.negate=jje;pe.prototype.abs=Zje;pe.prototype.compareTo=Xje;pe.prototype.bitLength=e7e;pe.prototype.mod=c7e;pe.prototype.modPowInt=_7e;pe.ZERO=Bh(0);pe.ONE=Bh(1);function x7e(){var e=Pr();return this.copyTo(e),e}function w7e(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function S7e(){return this.t==0?this.s:this.data[0]<<24>>24}function I7e(){return this.t==0?this.s:this.data[0]<<16>>16}function B7e(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function D7e(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function T7e(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Bh(r),i=Pr(),s=Pr(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o}function R7e(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,o=0,a=0;a<e.length;++a){var l=Sce(e,a);if(l<0){e.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=t*o+l,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&pe.ZERO.subTo(this,this)}function k7e(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(pe.ONE.shiftLeft(e-1),v3,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(pe.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function M7e(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function F7e(e){return this.compareTo(e)==0}function Q7e(e){return this.compareTo(e)<0?this:e}function N7e(e){return this.compareTo(e)>0?this:e}function P7e(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function L7e(e,t){return e&t}function U7e(e){var t=Pr();return this.bitwiseTo(e,L7e,t),t}function v3(e,t){return e|t}function O7e(e){var t=Pr();return this.bitwiseTo(e,v3,t),t}function Ice(e,t){return e^t}function q7e(e){var t=Pr();return this.bitwiseTo(e,Ice,t),t}function Bce(e,t){return e&~t}function V7e(e){var t=Pr();return this.bitwiseTo(e,Bce,t),t}function H7e(){for(var e=Pr(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function W7e(e){var t=Pr();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function G7e(e){var t=Pr();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function $7e(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function Y7e(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+$7e(this.data[e]);return this.s<0?this.t*this.DB:-1}function K7e(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function z7e(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=K7e(this.data[r]^t);return e}function J7e(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function j7e(e,t){var r=pe.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Z7e(e){return this.changeBit(e,v3)}function X7e(e){return this.changeBit(e,Bce)}function eZe(e){return this.changeBit(e,Ice)}function tZe(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function rZe(e){var t=Pr();return this.addTo(e,t),t}function nZe(e){var t=Pr();return this.subTo(e,t),t}function iZe(e){var t=Pr();return this.multiplyTo(e,t),t}function sZe(e){var t=Pr();return this.divRemTo(e,t,null),t}function oZe(e){var t=Pr();return this.divRemTo(e,null,t),t}function aZe(e){var t=Pr(),r=Pr();return this.divRemTo(e,t,r),new Array(t,r)}function lZe(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function cZe(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function t_(){}function Dce(e){return e}function uZe(e,t,r){e.multiplyTo(t,r)}function dZe(e,t){e.squareTo(t)}t_.prototype.convert=Dce;t_.prototype.revert=Dce;t_.prototype.mulTo=uZe;t_.prototype.sqrTo=dZe;function fZe(e){return this.exp(e,new t_)}function hZe(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function gZe(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function hy(e){this.r2=Pr(),this.q3=Pr(),pe.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function pZe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Pr();return e.copyTo(t),this.reduce(t),t}function mZe(e){return e}function AZe(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function yZe(e,t){e.squareTo(t),this.reduce(t)}function vZe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}hy.prototype.convert=pZe;hy.prototype.revert=mZe;hy.prototype.reduce=AZe;hy.prototype.mulTo=vZe;hy.prototype.sqrTo=yZe;function CZe(e,t){var r=e.bitLength(),n,i=Bh(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Vp(t):t.isEven()?s=new hy(t):s=new Hp(t);var o=new Array,a=3,l=n-1,c=(1<<n)-1;if(o[1]=s.convert(this),n>1){var u=Pr();for(s.sqrTo(o[1],u);a<=c;)o[a]=Pr(),s.mulTo(u,o[a-2],o[a]),a+=2}var f=e.t-1,p,g=!0,m=Pr(),y;for(r=jT(e.data[f])-1;f>=0;){for(r>=l?p=e.data[f]>>r-l&c:(p=(e.data[f]&(1<<r+1)-1)<<l-r,f>0&&(p|=e.data[f-1]>>this.DB+r-l)),a=n;!(p&1);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--f),g)o[p].copyTo(i),g=!1;else{for(;a>1;)s.sqrTo(i,m),s.sqrTo(m,i),a-=2;a>0?s.sqrTo(i,m):(y=i,i=m,m=y),s.mulTo(m,o[p],i)}for(;f>=0&&!(e.data[f]&1<<r);)s.sqrTo(i,m),y=i,i=m,m=y,--r<0&&(r=this.DB-1,--f)}return s.revert(i)}function bZe(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function EZe(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function _Ze(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return pe.ZERO;for(var r=e.clone(),n=this.clone(),i=Bh(1),s=Bh(0),o=Bh(0),a=Bh(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),t&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(pe.ONE)!=0)return pe.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}var Rc=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],xZe=(1<<26)/Rc[Rc.length-1];function wZe(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Rc[Rc.length-1]){for(t=0;t<Rc.length;++t)if(r.data[0]==Rc[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Rc.length;){for(var n=Rc[t],i=t+1;i<Rc.length&&n<xZe;)n*=Rc[i++];for(n=r.modInt(n);t<i;)if(n%Rc[t++]==0)return!1}return r.millerRabin(e)}function SZe(e){var t=this.subtract(pe.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=IZe(),s,o=0;o<e;++o){do s=new pe(this.bitLength(),i);while(s.compareTo(pe.ONE)<=0||s.compareTo(t)>=0);var a=s.modPow(n,this);if(a.compareTo(pe.ONE)!=0&&a.compareTo(t)!=0){for(var l=1;l++<r&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(pe.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}function IZe(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}pe.prototype.chunkSize=B7e;pe.prototype.toRadix=T7e;pe.prototype.fromRadix=R7e;pe.prototype.fromNumber=k7e;pe.prototype.bitwiseTo=P7e;pe.prototype.changeBit=j7e;pe.prototype.addTo=tZe;pe.prototype.dMultiply=lZe;pe.prototype.dAddOffset=cZe;pe.prototype.multiplyLowerTo=hZe;pe.prototype.multiplyUpperTo=gZe;pe.prototype.modInt=EZe;pe.prototype.millerRabin=SZe;pe.prototype.clone=x7e;pe.prototype.intValue=w7e;pe.prototype.byteValue=S7e;pe.prototype.shortValue=I7e;pe.prototype.signum=D7e;pe.prototype.toByteArray=M7e;pe.prototype.equals=F7e;pe.prototype.min=Q7e;pe.prototype.max=N7e;pe.prototype.and=U7e;pe.prototype.or=O7e;pe.prototype.xor=q7e;pe.prototype.andNot=V7e;pe.prototype.not=H7e;pe.prototype.shiftLeft=W7e;pe.prototype.shiftRight=G7e;pe.prototype.getLowestSetBit=Y7e;pe.prototype.bitCount=z7e;pe.prototype.testBit=J7e;pe.prototype.setBit=Z7e;pe.prototype.clearBit=X7e;pe.prototype.flipBit=eZe;pe.prototype.add=rZe;pe.prototype.subtract=nZe;pe.prototype.multiply=iZe;pe.prototype.divide=sZe;pe.prototype.remainder=oZe;pe.prototype.divideAndRemainder=aZe;pe.prototype.modPow=CZe;pe.prototype.modInverse=_Ze;pe.prototype.pow=fZe;pe.prototype.gcd=bZe;pe.prototype.isProbablePrime=wZe});var gy=_((PRt,Fce)=>{"use strict";var Ru=Jt();Su();Nr();var kce=Fce.exports=Ru.sha1=Ru.sha1||{};Ru.md.sha1=Ru.md.algorithms.sha1=kce;kce.create=function(){Mce||BZe();var e=null,t=Ru.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Ru.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Ru.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),Rce(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Ru.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(C3.substr(0,n.blockLength-o));for(var a,l,c=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,l=a/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Rce(f,r,i);var p=Ru.util.createBuffer();return p.putInt32(f.h0),p.putInt32(f.h1),p.putInt32(f.h2),p.putInt32(f.h3),p.putInt32(f.h4),p},n};var C3=null,Mce=!1;function BZe(){C3="\x80",C3+=Ru.util.fillString("\0",64),Mce=!0}function Rce(e,t,r){for(var n,i,s,o,a,l,c,u,f=r.length();f>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,l=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+l+1518500249+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+l+1518500249+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,c=s^o^a,n=(i<<5|i>>>27)+c+l+1859775393+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,c=s^o^a,n=(i<<5|i>>>27)+c+l+1859775393+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,c=s&o|a&(s^o),n=(i<<5|i>>>27)+c+l+2400959708+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,c=s^o^a,n=(i<<5|i>>>27)+c+l+3395469782+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+l|0,f-=64}}});var b3=_((LRt,Nce)=>{"use strict";var ku=Jt();Nr();Il();gy();var Qce=Nce.exports=ku.pkcs1=ku.pkcs1||{};Qce.encode_rsa_oaep=function(e,t,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=ku.md.sha1.create(),o||(o=s);var a=Math.ceil(e.n.bitLength()/8),l=a-2*s.digestLength-2;if(t.length>l){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=l,c}n||(n=""),s.update(n,"raw");for(var u=s.digest(),f="",p=l-t.length,g=0;g<p;g++)f+="\0";var m=u.getBytes()+f+""+t;if(!i)i=ku.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=s.digestLength,c}var y=ZT(i,a-s.digestLength-1,o),v=ku.util.xorBytes(m,y,m.length),C=ZT(v,s.digestLength,o),E=ku.util.xorBytes(i,C,i.length);return"\0"+E+v};Qce.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=t.length,v.expectedLength=o,v}if(i===void 0?i=ku.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),l=t.charAt(0),c=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),f=ZT(u,i.digestLength,s),p=ku.util.xorBytes(c,f,c.length),g=ZT(p,o-i.digestLength-1,s),m=ku.util.xorBytes(u,g,u.length),y=m.substring(0,i.digestLength),v=l!=="\0",C=0;C<i.digestLength;++C)v|=a.charAt(C)!==y.charAt(C);for(var E=1,w=i.digestLength,B=i.digestLength;B<m.length;B++){var R=m.charCodeAt(B),N=R&1^1,W=E?65534:0;v|=R&W,E=E&N,w+=E}if(v||m.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(w+1)};function ZT(e,t,r){r||(r=ku.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}});var _3=_((URt,E3)=>{"use strict";var Dh=Jt();Nr();r_();Il();(function(){if(Dh.prime){E3.exports=Dh.prime;return}var e=E3.exports=Dh.prime=Dh.prime||{},t=Dh.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(f,p){return f|p};e.generateProbablePrime=function(f,p,g){typeof p=="function"&&(g=p,p={}),p=p||{};var m=p.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var y=p.prng||Dh.random,v={nextBytes:function(C){for(var E=y.getBytesSync(C.length),w=0;w<C.length;++w)C[w]=E.charCodeAt(w)}};if(m.name==="PRIMEINC")return s(f,v,m.options,g);throw new Error("Invalid prime generation algorithm: "+m.name)};function s(f,p,g,m){return"workers"in g?l(f,p,g,m):o(f,p,g,m)}function o(f,p,g,m){var y=c(f,p),v=0,C=u(y.bitLength());"millerRabinTests"in g&&(C=g.millerRabinTests);var E=10;"maxBlockTime"in g&&(E=g.maxBlockTime),a(y,f,p,v,C,E,m)}function a(f,p,g,m,y,v,C){var E=+new Date;do{if(f.bitLength()>p&&(f=c(p,g)),f.isProbablePrime(y))return C(null,f);f.dAddOffset(r[m++%8],0)}while(v<0||+new Date-E<v);Dh.util.setImmediate(function(){a(f,p,g,m,y,v,C)})}function l(f,p,g,m){if(typeof Worker>"u")return o(f,p,g,m);var y=c(f,p),v=g.workers,C=g.workLoad||100,E=C*30/8,w=g.workerScript||"forge/prime.worker.js";if(v===-1)return Dh.util.estimateCores(function(R,N){R&&(N=2),v=N-1,B()});B();function B(){v=Math.max(1,v);for(var R=[],N=0;N<v;++N)R[N]=new Worker(w);for(var W=v,N=0;N<v;++N)R[N].addEventListener("message",te);var Z=!1;function te(Y){if(!Z){--W;var U=Y.data;if(U.found){for(var ce=0;ce<R.length;++ce)R[ce].terminate();return Z=!0,m(null,new t(U.prime,16))}y.bitLength()>f&&(y=c(f,p));var Ie=y.toString(16);Y.target.postMessage({hex:Ie,workLoad:C}),y.dAddOffset(E,0)}}}}function c(f,p){var g=new t(f,p),m=f-1;return g.testBit(m)||g.bitwiseTo(t.ONE.shiftLeft(m),i,g),g.dAddOffset(31-g.mod(n).byteValue(),0),g}function u(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})()});var n_=_((ORt,Hce)=>{"use strict";var rt=Jt();Tc();r_();Ih();b3();_3();Il();Nr();typeof Dr>"u"&&(Dr=rt.jsbn.BigInteger);var Dr,x3=rt.util.isNodejs?require("crypto"):null,ee=rt.asn1,Dl=rt.util;rt.pki=rt.pki||{};Hce.exports=rt.pki.rsa=rt.rsa=rt.rsa||{};var Qt=rt.pki,DZe=[6,4,2,4,2,4,6,2],TZe={name:"PrivateKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},RZe={name:"RSAPrivateKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},kZe={name:"RSAPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ee.Class.UNIVERSAL,type:ee.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},MZe=rt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},FZe={name:"DigestInfo",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ee.Class.UNIVERSAL,type:ee.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ee.Class.UNIVERSAL,type:ee.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ee.Class.UNIVERSAL,type:ee.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},QZe=function(e){var t;if(e.algorithm in Qt.oids)t=Qt.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=ee.oidToDer(t).getBytes(),i=ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[]),s=ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[]);s.value.push(ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,n)),s.value.push(ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,""));var o=ee.create(ee.Class.UNIVERSAL,ee.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(o),ee.toDer(i).getBytes()},qce=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Dr.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Dr.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new Dr(rt.util.bytesToHex(rt.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Dr.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var o=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return o=o.multiply(n.modInverse(t.n)).mod(t.n),o};Qt.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Vce(e,t,r)):(i=rt.util.createBuffer(),i.putBytes(e));for(var o=new Dr(i.toHex(),16),a=qce(o,t,n),l=a.toString(16),c=rt.util.createBuffer(),u=s-Math.ceil(l.length/2);u>0;)c.putByte(0),--u;return c.putBytes(rt.util.hexToBytes(l)),c.getBytes()};Qt.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var o=new Dr(rt.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=qce(o,t,r),l=a.toString(16),c=rt.util.createBuffer(),u=i-Math.ceil(l.length/2);u>0;)c.putByte(0),--u;return c.putBytes(rt.util.hexToBytes(l)),n!==!1?XT(c.getBytes(),t,r):c.getBytes()};Qt.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||rt.random,i={nextBytes:function(a){for(var l=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=l.charCodeAt(c)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new Dr(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};Qt.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Dr(null);r.fromInt(30);for(var n=0,i=function(f,p){return f|p},s=+new Date,o,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var l=e.p===null?e.pBits:e.qBits,c=l-1;e.pqState===0?(e.num=new Dr(l,e.rng),e.num.testBit(c)||e.num.bitwiseTo(Dr.ONE.shiftLeft(c),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(PZe(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(DZe[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(Dr.ONE).gcd(e.e).compareTo(Dr.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Dr.ONE),e.q1=e.q.subtract(Dr.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Dr.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:Qt.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Qt.rsa.setPublicKey(e.n,e.e)}}o=+new Date,a+=o-s,s=o}return e.keys!==null};Qt.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!rt.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(Pce("generateKeyPair"))return x3.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,l,c){if(a)return n(a);n(null,{privateKey:Qt.privateKeyFromPem(c),publicKey:Qt.publicKeyFromPem(l)})});if(Lce("generateKey")&&Lce("exportKey"))return Dl.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Oce(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Dl.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var l=Qt.privateKeyFromAsn1(ee.fromDer(rt.util.createBuffer(a)));n(null,{privateKey:l,publicKey:Qt.setRsaPublicKey(l.n,l.e)})}});if(Uce("generateKey")&&Uce("exportKey")){var i=Dl.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Oce(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var l=a.target.result,c=Dl.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);c.oncomplete=function(u){var f=u.target.result,p=Qt.privateKeyFromAsn1(ee.fromDer(rt.util.createBuffer(f)));n(null,{privateKey:p,publicKey:Qt.setRsaPublicKey(p.n,p.e)})},c.onerror=function(u){n(u)}},i.onerror=function(a){n(a)};return}}else if(Pce("generateKeyPairSync")){var s=x3.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Qt.privateKeyFromPem(s.privateKey),publicKey:Qt.publicKeyFromPem(s.publicKey)}}}var o=Qt.rsa.createKeyPairGenerationState(e,t,r);if(!n)return Qt.rsa.stepKeyPairGenerationState(o,0),o.keys;NZe(o,r,n)};Qt.setRsaPublicKey=Qt.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,l,c){return Vce(a,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,l){return rt.pkcs1.encode_rsa_oaep(l,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return Qt.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(l,c){c=XT(c,r,!0);var u=ee.fromDer(c,{parseAllBytes:o._parseAllDigestBytes}),f={},p=[];if(!ee.validate(u,FZe,f,p)){var g=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw g.errors=p,g}var m=ee.derToOid(f.algorithmIdentifier);if(!(m===rt.oids.md2||m===rt.oids.md5||m===rt.oids.sha1||m===rt.oids.sha224||m===rt.oids.sha256||m===rt.oids.sha384||m===rt.oids.sha512||m===rt.oids["sha512-224"]||m===rt.oids["sha512-256"])){var g=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw g.oid=m,g}if((m===rt.oids.md2||m===rt.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===f.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(l,c){return c=XT(c,r,!0),l===c}});var a=Qt.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())},r};Qt.setRsaPrivateKey=Qt.rsa.setPrivateKey=function(e,t,r,n,i,s,o,a){var l={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return l.decrypt=function(c,u,f){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var p=Qt.rsa.decrypt(c,l,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:XT};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(g,m){return rt.pkcs1.decode_rsa_oaep(m,g,f)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(g){return g}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(p,l,!1)},l.sign=function(c,u){var f=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:QZe},f=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return c}},f=1);var p=u.encode(c,l.n.bitLength());return Qt.rsa.encrypt(p,l,f)},l};Qt.wrapRsaPrivateKey=function(e){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ee.integerToDer(0).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,ee.oidToDer(Qt.oids.rsaEncryption).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,"")]),ee.create(ee.Class.UNIVERSAL,ee.Type.OCTETSTRING,!1,ee.toDer(e).getBytes())])};Qt.privateKeyFromAsn1=function(e){var t={},r=[];if(ee.validate(e,TZe,t,r)&&(e=ee.fromDer(rt.util.createBuffer(t.privateKey))),t={},r=[],!ee.validate(e,RZe,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,l,c,u,f;return i=rt.util.createBuffer(t.privateKeyModulus).toHex(),s=rt.util.createBuffer(t.privateKeyPublicExponent).toHex(),o=rt.util.createBuffer(t.privateKeyPrivateExponent).toHex(),a=rt.util.createBuffer(t.privateKeyPrime1).toHex(),l=rt.util.createBuffer(t.privateKeyPrime2).toHex(),c=rt.util.createBuffer(t.privateKeyExponent1).toHex(),u=rt.util.createBuffer(t.privateKeyExponent2).toHex(),f=rt.util.createBuffer(t.privateKeyCoefficient).toHex(),Qt.setRsaPrivateKey(new Dr(i,16),new Dr(s,16),new Dr(o,16),new Dr(a,16),new Dr(l,16),new Dr(c,16),new Dr(u,16),new Dr(f,16))};Qt.privateKeyToAsn1=Qt.privateKeyToRSAPrivateKey=function(e){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,ee.integerToDer(0).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.n)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.e)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.d)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.p)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.q)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.dP)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.dQ)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.qInv))])};Qt.publicKeyFromAsn1=function(e){var t={},r=[];if(ee.validate(e,MZe,t,r)){var n=ee.derToOid(t.publicKeyOid);if(n!==Qt.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!ee.validate(e,kZe,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=rt.util.createBuffer(t.publicKeyModulus).toHex(),o=rt.util.createBuffer(t.publicKeyExponent).toHex();return Qt.setRsaPublicKey(new Dr(s,16),new Dr(o,16))};Qt.publicKeyToAsn1=Qt.publicKeyToSubjectPublicKeyInfo=function(e){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.OID,!1,ee.oidToDer(Qt.oids.rsaEncryption).getBytes()),ee.create(ee.Class.UNIVERSAL,ee.Type.NULL,!1,"")]),ee.create(ee.Class.UNIVERSAL,ee.Type.BITSTRING,!1,[Qt.publicKeyToRSAPublicKey(e)])])};Qt.publicKeyToRSAPublicKey=function(e){return ee.create(ee.Class.UNIVERSAL,ee.Type.SEQUENCE,!0,[ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.n)),ee.create(ee.Class.UNIVERSAL,ee.Type.INTEGER,!1,Mu(e.e))])};function Vce(e,t,r){var n=rt.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-e.length,a;if(r===0||r===1){a=r===0?0:255;for(var l=0;l<o;++l)n.putByte(a)}else for(;o>0;){for(var c=0,u=rt.random.getBytes(o),l=0;l<o;++l)a=u.charCodeAt(l),a===0?++c:n.putByte(a);o=c}return n.putByte(0),n.putBytes(e),n}function XT(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=rt.util.createBuffer(e),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(a===0){l=i-3-n;for(var c=0;c<l;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(l=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++l}else if(a===2)for(l=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++l}var u=s.getByte();if(u!==0||l!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function NZe(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(a,l){if(a)return r(a);if(e.p=l,e.q!==null)return o(a,e.q);s(e.qBits,o)})}function s(a,l){rt.prime.generateProbablePrime(a,n,l)}function o(a,l){if(a)return r(a);if(e.q=l,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(Dr.ONE).gcd(e.e).compareTo(Dr.ONE)!==0){e.p=null,i();return}if(e.q.subtract(Dr.ONE).gcd(e.e).compareTo(Dr.ONE)!==0){e.q=null,s(e.qBits,o);return}if(e.p1=e.p.subtract(Dr.ONE),e.q1=e.q.subtract(Dr.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Dr.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,o);return}var u=e.e.modInverse(e.phi);e.keys={privateKey:Qt.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Qt.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Mu(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=rt.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function PZe(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Pce(e){return rt.util.isNodejs&&typeof x3[e]=="function"}function Lce(e){return typeof Dl.globalScope<"u"&&typeof Dl.globalScope.crypto=="object"&&typeof Dl.globalScope.crypto.subtle=="object"&&typeof Dl.globalScope.crypto.subtle[e]=="function"}function Uce(e){return typeof Dl.globalScope<"u"&&typeof Dl.globalScope.msCrypto=="object"&&typeof Dl.globalScope.msCrypto.subtle=="object"&&typeof Dl.globalScope.msCrypto.subtle[e]=="function"}function Oce(e){for(var t=rt.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var w3=_((qRt,Kce)=>{"use strict";var Ne=Jt();Sh();Tc();e_();Su();Ih();KT();qp();Il();m3();n_();Nr();typeof Wce>"u"&&(Wce=Ne.jsbn.BigInteger);var Wce,ae=Ne.asn1,Yt=Ne.pki=Ne.pki||{};Kce.exports=Yt.pbe=Ne.pbe=Ne.pbe||{};var Wp=Yt.oids,LZe={name:"EncryptedPrivateKeyInfo",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},UZe={name:"PBES2Algorithms",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},OZe={name:"pkcs-12PbeParams",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,capture:"iterations"}]};Yt.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Ne.random.getBytesSync(r.saltSize),i=r.count,s=ae.integerToDer(i),o,a,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,u,f;switch(r.algorithm){case"aes128":o=16,c=16,u=Wp["aes128-CBC"],f=Ne.aes.createEncryptionCipher;break;case"aes192":o=24,c=16,u=Wp["aes192-CBC"],f=Ne.aes.createEncryptionCipher;break;case"aes256":o=32,c=16,u=Wp["aes256-CBC"],f=Ne.aes.createEncryptionCipher;break;case"des":o=8,c=8,u=Wp.desCBC,f=Ne.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),m=Yce(g),y=Ne.pkcs5.pbkdf2(t,n,i,o,m),v=Ne.random.getBytesSync(c),C=f(y);C.start(v),C.update(ae.toDer(e)),C.finish(),l=C.output.getBytes();var E=qZe(n,s,o,g);a=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Wp.pkcs5PBES2).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Wp.pkcs5PBKDF2).getBytes()),E]),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(u).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){o=24;var w=new Ne.util.ByteBuffer(n),y=Yt.pbe.generatePkcs12Key(t,w,1,i,o),v=Yt.pbe.generatePkcs12Key(t,w,2,i,o),C=Ne.des.createEncryptionCipher(y);C.start(v),C.update(ae.toDer(e)),C.finish(),l=C.output.getBytes(),a=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Wp["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,n),ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,s.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=r.algorithm,p}var B=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[a,ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,l)]);return B};Yt.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!ae.validate(e,LZe,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=ae.derToOid(n.encryptionOid),a=Yt.pbe.getCipher(o,n.encryptionParams,t),l=Ne.util.createBuffer(n.encryptedData);return a.update(l),a.finish()&&(r=ae.fromDer(a.output)),r};Yt.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:ae.toDer(e).getBytes()};return Ne.pem.encode(r,{maxline:t})};Yt.encryptedPrivateKeyFromPem=function(e){var t=Ne.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ae.fromDer(t.body)};Yt.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=Yt.wrapRsaPrivateKey(Yt.privateKeyToAsn1(e));return n=Yt.encryptPrivateKeyInfo(n,t,r),Yt.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=Ne.random.getBytesSync(16),a=Ne.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=Ne.random.getBytesSync(16),a=Ne.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=Ne.random.getBytesSync(16),a=Ne.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=Ne.random.getBytesSync(8),a=Ne.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=Ne.random.getBytesSync(8),a=Ne.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var c=Ne.pbe.opensslDeriveBytes(t,s.substr(0,8),o),u=a(c);u.start(s),u.update(ae.toDer(Yt.privateKeyToAsn1(e))),u.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Ne.util.bytesToHex(s).toUpperCase()},body:u.output.getBytes()};return Ne.pem.encode(f)};Yt.decryptRsaPrivateKey=function(e,t){var r=null,n=Ne.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=Ne.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=Ne.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=Ne.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=Ne.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=Ne.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(f){return Ne.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":s=8,o=function(f){return Ne.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":s=16,o=function(f){return Ne.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=Ne.util.hexToBytes(n.dekInfo.parameters),l=Ne.pbe.opensslDeriveBytes(t,a.substr(0,8),s),c=o(l);if(c.start(a),c.update(Ne.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Yt.decryptPrivateKeyInfo(ae.fromDer(r),t):r=ae.fromDer(r),r!==null&&(r=Yt.privateKeyFromAsn1(r)),r};Yt.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var o,a;if(typeof s>"u"||s===null){if(!("sha1"in Ne.md))throw new Error('"sha1" hash algorithm unavailable.');s=Ne.md.sha1.create()}var l=s.digestLength,c=s.blockLength,u=new Ne.util.ByteBuffer,f=new Ne.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)f.putInt16(e.charCodeAt(a));f.putInt16(0)}var p=f.length(),g=t.length(),m=new Ne.util.ByteBuffer;m.fillWithByte(r,c);var y=c*Math.ceil(g/c),v=new Ne.util.ByteBuffer;for(a=0;a<y;a++)v.putByte(t.at(a%g));var C=c*Math.ceil(p/c),E=new Ne.util.ByteBuffer;for(a=0;a<C;a++)E.putByte(f.at(a%p));var w=v;w.putBuffer(E);for(var B=Math.ceil(i/l),R=1;R<=B;R++){var N=new Ne.util.ByteBuffer;N.putBytes(m.bytes()),N.putBytes(w.bytes());for(var W=0;W<n;W++)s.start(),s.update(N.getBytes()),N=s.digest();var Z=new Ne.util.ByteBuffer;for(a=0;a<c;a++)Z.putByte(N.at(a%l));var te=Math.ceil(g/c)+Math.ceil(p/c),Y=new Ne.util.ByteBuffer;for(o=0;o<te;o++){var U=new Ne.util.ByteBuffer(w.getBytes(c)),ce=511;for(a=Z.length()-1;a>=0;a--)ce=ce>>8,ce+=Z.at(a)+U.at(a),U.setAt(a,ce&255);Y.putBuffer(U)}w=Y,u.putBuffer(N)}return u.truncate(u.length()-i),u};Yt.pbe.getCipher=function(e,t,r){switch(e){case Yt.oids.pkcs5PBES2:return Yt.pbe.getCipherForPBES2(e,t,r);case Yt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Yt.oids["pbewithSHAAnd40BitRC2-CBC"]:return Yt.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Yt.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!ae.validate(t,UZe,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=ae.derToOid(n.kdfOid),e!==Yt.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=ae.derToOid(n.encOid),e!==Yt.oids["aes128-CBC"]&&e!==Yt.oids["aes192-CBC"]&&e!==Yt.oids["aes256-CBC"]&&e!==Yt.oids["des-EDE3-CBC"]&&e!==Yt.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=Ne.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var l,c;switch(Yt.oids[e]){case"aes128-CBC":l=16,c=Ne.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,c=Ne.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,c=Ne.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,c=Ne.des.createDecryptionCipher;break;case"desCBC":l=8,c=Ne.des.createDecryptionCipher;break}var u=$ce(n.prfOid),f=Ne.pkcs5.pbkdf2(r,o,a,l,u),p=n.encIv,g=c(f);return g.start(p),g};Yt.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!ae.validate(t,OZe,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=Ne.util.createBuffer(n.salt),a=Ne.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var l,c,u;switch(e){case Yt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,c=8,u=Ne.des.startDecrypting;break;case Yt.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,c=8,u=function(y,v){var C=Ne.rc2.createDecryptionCipher(y,40);return C.start(v,null),C};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var f=$ce(n.prfOid),p=Yt.pbe.generatePkcs12Key(r,o,1,a,l,f);f.start();var g=Yt.pbe.generatePkcs12Key(r,o,2,a,c,f);return u(p,g)};Yt.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in Ne.md))throw new Error('"md5" hash algorithm unavailable.');n=Ne.md.md5.create()}t===null&&(t="");for(var i=[Gce(n,e+t)],s=16,o=1;s<r;++o,s+=16)i.push(Gce(n,i[o-1]+e+t));return i.join("").substr(0,r)};function Gce(e,t){return e.start().update(t).digest().getBytes()}function $ce(e){var t;if(!e)t="hmacWithSHA1";else if(t=Yt.oids[ae.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Yce(t)}function Yce(e){var t=Ne.md;switch(e){case"hmacWithSHA224":t=Ne.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function qZe(e,t,r,n){var i=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,e),ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,Ne.util.hexToBytes(r.toString(16))),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Yt.oids[n]).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.NULL,!1,"")])),i}});var S3=_((VRt,jce)=>{"use strict";var py=Jt();Tc();Nr();var Qe=py.asn1,my=jce.exports=py.pkcs7asn1=py.pkcs7asn1||{};py.pkcs7=py.pkcs7||{};py.pkcs7.asn1=my;var zce={name:"ContentInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};my.contentInfoValidator=zce;var Jce={name:"EncryptedContentInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Qe.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};my.envelopedDataValidator={name:"EnvelopedData",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Jce)};my.encryptedDataValidator={name:"EncryptedData",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"version"}].concat(Jce)};var VZe={name:"SignerInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Qe.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};my.signedDataValidator={name:"SignedData",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},zce,{name:"SignedData.Certificates",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Qe.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SET,capture:"signerInfos",optional:!0,value:[VZe]}]};my.recipientInfoValidator={name:"RecipientInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Qe.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var I3=_((HRt,Zce)=>{"use strict";var Gp=Jt();Nr();Gp.mgf=Gp.mgf||{};var HZe=Zce.exports=Gp.mgf.mgf1=Gp.mgf1=Gp.mgf1||{};HZe.create=function(e){var t={generate:function(r,n){for(var i=new Gp.util.ByteBuffer,s=Math.ceil(n/e.digestLength),o=0;o<s;o++){var a=new Gp.util.ByteBuffer;a.putInt32(o),e.start(),e.update(r+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t}});var eue=_((WRt,Xce)=>{"use strict";var eR=Jt();I3();Xce.exports=eR.mgf=eR.mgf||{};eR.mgf.mgf1=eR.mgf1});var tR=_((GRt,tue)=>{"use strict";var $p=Jt();Il();Nr();var WZe=tue.exports=$p.pss=$p.pss||{};WZe.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=$p.util.createBuffer(i));var s;if("saltLength"in e)s=e.saltLength;else if(i!==null)s=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||$p.random,a={};return a.encode=function(l,c){var u,f=c-1,p=Math.ceil(f/8),g=l.digest().getBytes();if(p<n+s+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=o.getBytesSync(s):m=i.bytes();var y=new $p.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(g),y.putBytes(m),t.start(),t.update(y.getBytes());var v=t.digest().getBytes(),C=new $p.util.ByteBuffer;C.fillWithByte(0,p-s-n-2),C.putByte(1),C.putBytes(m);var E=C.getBytes(),w=p-n-1,B=r.generate(v,w),R="";for(u=0;u<w;u++)R+=String.fromCharCode(E.charCodeAt(u)^B.charCodeAt(u));var N=65280>>8*p-f&255;return R=String.fromCharCode(R.charCodeAt(0)&~N)+R.substr(1),R+v+"\xBC"},a.verify=function(l,c,u){var f,p=u-1,g=Math.ceil(p/8);if(c=c.substr(-g),g<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(g-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=g-n-1,y=c.substr(0,m),v=c.substr(m,n),C=65280>>8*g-p&255;if(y.charCodeAt(0)&C)throw new Error("Bits beyond keysize not zero as expected.");var E=r.generate(v,m),w="";for(f=0;f<m;f++)w+=String.fromCharCode(y.charCodeAt(f)^E.charCodeAt(f));w=String.fromCharCode(w.charCodeAt(0)&~C)+w.substr(1);var B=g-n-s-2;for(f=0;f<B;f++)if(w.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(w.charCodeAt(B)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var R=w.substr(-s),N=new $p.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(l),N.putBytes(R),t.start(),t.update(N.getBytes());var W=t.digest().getBytes();return v===W},a}});var iR=_(($Rt,oue)=>{"use strict";var nt=Jt();Sh();Tc();e_();Su();eue();Ih();qp();tR();n_();Nr();var D=nt.asn1,we=oue.exports=nt.pki=nt.pki||{},Tr=we.oids,ui={};ui.CN=Tr.commonName;ui.commonName="CN";ui.C=Tr.countryName;ui.countryName="C";ui.L=Tr.localityName;ui.localityName="L";ui.ST=Tr.stateOrProvinceName;ui.stateOrProvinceName="ST";ui.O=Tr.organizationName;ui.organizationName="O";ui.OU=Tr.organizationalUnitName;ui.organizationalUnitName="OU";ui.E=Tr.emailAddress;ui.emailAddress="E";var nue=nt.pki.rsa.publicKeyValidator,GZe={name:"Certificate",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:D.Class.UNIVERSAL,type:D.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:D.Class.UNIVERSAL,type:D.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:D.Class.UNIVERSAL,type:D.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:D.Class.UNIVERSAL,type:D.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},nue,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:D.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:D.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:D.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},$Ze={name:"rsapss",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:D.Class.UNIVERSAL,type:D.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:D.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:D.Class.UNIVERSAL,type:D.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:D.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:D.Class.UNIVERSAL,type:D.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:D.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:D.Class.UNIVERSAL,type:D.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},YZe={name:"CertificationRequestInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},nue,{name:"CertificationRequestInfo.attributes",tagClass:D.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0}]}]}]},KZe={name:"CertificationRequest",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[YZe,{name:"CertificationRequest.signatureAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:D.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};we.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,s,o=0;o<e.value.length;++o){n=e.value[o];for(var a=0;a<n.value.length;++a)s={},i=n.value[a],s.type=D.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in Tr&&(s.name=Tr[s.type],s.name in ui&&(s.shortName=ui[s.name])),t&&(t.update(s.type),t.update(s.value)),r.push(s)}return r};we.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=D.derToOid(n.value[0].value),s=n.value[1].value,o=0;o<s.length;++o){var a={};if(a.type=i,a.value=s[o].value,a.valueTagClass=s[o].type,a.type in Tr&&(a.name=Tr[a.type],a.name in ui&&(a.shortName=ui[a.name])),a.type===Tr.extensionRequest){a.extensions=[];for(var l=0;l<a.value.length;++l)a.extensions.push(we.certificateExtensionFromAsn1(a.value[l]))}t.push(a)}return t};function Th(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var rR=function(e,t,r){var n={};if(e!==Tr["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Tr.sha1},mgf:{algorithmOid:Tr.mgf1,hash:{algorithmOid:Tr.sha1}},saltLength:20});var i={},s=[];if(!D.validate(t,$Ze,i,s)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=s,o}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=D.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=D.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=D.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},nR=function(e){switch(Tr[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return nt.md.sha1.create();case"md5WithRSAEncryption":return nt.md.md5.create();case"sha256WithRSAEncryption":return nt.md.sha256.create();case"sha384WithRSAEncryption":return nt.md.sha384.create();case"sha512WithRSAEncryption":return nt.md.sha512.create();case"RSASSA-PSS":return nt.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},iue=function(e){var t=e.certificate,r;switch(t.signatureOid){case Tr.sha1WithRSAEncryption:case Tr.sha1WithRSASignature:break;case Tr["RSASSA-PSS"]:var n,i;if(n=Tr[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||nt.md[n]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=t.signatureParameters.mgf.hash.algorithmOid,s.name=n,s}if(i=Tr[t.signatureParameters.mgf.algorithmOid],i===void 0||nt.mgf[i]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=t.signatureParameters.mgf.algorithmOid,s.name=i,s}if(i=nt.mgf[i].create(nt.md[n].create()),n=Tr[t.signatureParameters.hash.algorithmOid],n===void 0||nt.md[n]===void 0){var s=new Error("Unsupported RSASSA-PSS hash function.");throw s.oid=t.signatureParameters.hash.algorithmOid,s.name=n,s}r=nt.pss.create(nt.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};we.certificateFromPem=function(e,t,r){var n=nt.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=D.fromDer(n.body,r);return we.certificateFromAsn1(s,t)};we.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:D.toDer(we.certificateToAsn1(e)).getBytes()};return nt.pem.encode(r,{maxline:t})};we.publicKeyFromPem=function(e){var t=nt.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=D.fromDer(t.body);return we.publicKeyFromAsn1(n)};we.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:D.toDer(we.publicKeyToAsn1(e)).getBytes()};return nt.pem.encode(r,{maxline:t})};we.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:D.toDer(we.publicKeyToRSAPublicKey(e)).getBytes()};return nt.pem.encode(r,{maxline:t})};we.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||nt.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=D.toDer(we.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=D.toDer(we.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var s=r.digest();if(t.encoding==="hex"){var o=s.toHex();return t.delimiter?o.match(/.{2}/g).join(t.delimiter):o}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};we.certificationRequestFromPem=function(e,t,r){var n=nt.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=D.fromDer(n.body,r);return we.certificationRequestFromAsn1(s,t)};we.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:D.toDer(we.certificationRequestToAsn1(e)).getBytes()};return nt.pem.encode(r,{maxline:t})};we.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Th(e.issuer,t)},e.issuer.addField=function(t){Tl([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Th(e.subject,t)},e.subject.addField=function(t){Tl([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){Tl(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){Tl(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)sue(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||nt.md.sha1.create();var n=Tr[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=we.getTBSCertificate(e);var s=D.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var o=t.md;if(o===null){o=nR({signatureOid:t.signatureOid,type:"certificate"});var a=t.tbsCertificate||we.getTBSCertificate(t),l=D.toDer(a);o.update(l.getBytes())}return o!==null&&(r=iue({certificate:e,md:o,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var s,o,a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],(s.type!==o.type||s.value!==o.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return we.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Tr.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return nt.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e};we.certificateFromAsn1=function(e,t){var r={},n=[];if(!D.validate(e,GZe,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var s=D.derToOid(r.publicKeyOid);if(s!==we.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=we.createCertificate();o.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=nt.util.createBuffer(r.certSerialNumber);o.serialNumber=a.toHex(),o.signatureOid=nt.asn1.derToOid(r.certSignatureOid),o.signatureParameters=rR(o.signatureOid,r.certSignatureParams,!0),o.siginfo.algorithmOid=nt.asn1.derToOid(r.certinfoSignatureOid),o.siginfo.parameters=rR(o.siginfo.algorithmOid,r.certinfoSignatureParams,!1),o.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(D.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(D.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(D.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(D.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=l[0],o.validity.notAfter=l[1],o.tbsCertificate=r.tbsCertificate,t){o.md=nR({signatureOid:o.signatureOid,type:"certificate"});var c=D.toDer(o.tbsCertificate);o.md.update(c.getBytes())}var u=nt.md.sha1.create(),f=D.toDer(r.certIssuer);u.update(f.getBytes()),o.issuer.getField=function(m){return Th(o.issuer,m)},o.issuer.addField=function(m){Tl([m]),o.issuer.attributes.push(m)},o.issuer.attributes=we.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(o.issuer.uniqueId=r.certIssuerUniqueId),o.issuer.hash=u.digest().toHex();var p=nt.md.sha1.create(),g=D.toDer(r.certSubject);return p.update(g.getBytes()),o.subject.getField=function(m){return Th(o.subject,m)},o.subject.addField=function(m){Tl([m]),o.subject.attributes.push(m)},o.subject.attributes=we.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(o.subject.uniqueId=r.certSubjectUniqueId),o.subject.hash=p.digest().toHex(),r.certExtensions?o.extensions=we.certificateExtensionsFromAsn1(r.certExtensions):o.extensions=[],o.publicKey=we.publicKeyFromAsn1(r.subjectPublicKeyInfo),o};we.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(we.certificateExtensionFromAsn1(n.value[i]));return t};we.certificateExtensionFromAsn1=function(e){var t={};if(t.id=D.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===D.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Tr){if(t.name=Tr[t.id],t.name==="keyUsage"){var r=D.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var r=D.fromDer(t.value);r.value.length>0&&r.value[0].type===D.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var s=null;r.value.length>0&&r.value[0].type===D.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(t.pathLenConstraint=D.derToInteger(s))}else if(t.name==="extKeyUsage")for(var r=D.fromDer(t.value),o=0;o<r.value.length;++o){var a=D.derToOid(r.value[o].value);a in Tr?t[Tr[a]]=!0:t[a]=!0}else if(t.name==="nsCertType"){var r=D.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var l,r=D.fromDer(t.value),c=0;c<r.value.length;++c){l=r.value[c];var u={type:l.type,value:l.value};switch(t.altNames.push(u),l.type){case 1:case 2:case 6:break;case 7:u.ip=nt.util.bytesToIP(l.value);break;case 8:u.oid=D.derToOid(l.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var r=D.fromDer(t.value);t.subjectKeyIdentifier=nt.util.bytesToHex(r.value)}}return t};we.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!D.validate(e,KZe,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var s=D.derToOid(r.publicKeyOid);if(s!==we.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=we.createCertificationRequest();if(o.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,o.signatureOid=nt.asn1.derToOid(r.csrSignatureOid),o.signatureParameters=rR(o.signatureOid,r.csrSignatureParams,!0),o.siginfo.algorithmOid=nt.asn1.derToOid(r.csrSignatureOid),o.siginfo.parameters=rR(o.siginfo.algorithmOid,r.csrSignatureParams,!1),o.signature=r.csrSignature,o.certificationRequestInfo=r.certificationRequestInfo,t){o.md=nR({signatureOid:o.signatureOid,type:"certification request"});var a=D.toDer(o.certificationRequestInfo);o.md.update(a.getBytes())}var l=nt.md.sha1.create();return o.subject.getField=function(c){return Th(o.subject,c)},o.subject.addField=function(c){Tl([c]),o.subject.attributes.push(c)},o.subject.attributes=we.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),o.subject.hash=l.digest().toHex(),o.publicKey=we.publicKeyFromAsn1(r.subjectPublicKeyInfo),o.getAttribute=function(c){return Th(o,c)},o.addAttribute=function(c){Tl([c]),o.attributes.push(c)},o.attributes=we.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),o};we.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Th(e.subject,t)},e.subject.addField=function(t){Tl([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Th(e,t)},e.addAttribute=function(t){Tl([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){Tl(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){Tl(t),e.attributes=t},e.sign=function(t,r){e.md=r||nt.md.sha1.create();var n=Tr[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=we.getCertificationRequestInfo(e);var s=D.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=nR({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||we.getCertificationRequestInfo(e),i=D.toDer(n);r.update(i.getBytes())}return r!==null&&(t=iue({certificate:e,md:r,signature:e.signature})),t},e};function Ay(e){for(var t=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,s=0;s<i.length;++s){r=i[s];var o=r.value,a=D.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===D.Type.UTF8&&(o=nt.util.encodeUtf8(o))),n=D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(r.type).getBytes()),D.create(D.Class.UNIVERSAL,a,!1,o)])]),t.value.push(n)}return t}function Tl(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name>"u"&&(t.type&&t.type in we.oids?t.name=we.oids[t.type]:t.shortName&&t.shortName in ui&&(t.name=we.oids[ui[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in we.oids)t.type=we.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName>"u"&&t.name&&t.name in ui&&(t.shortName=ui[t.name]),t.type===Tr.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=D.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(we.certificateExtensionToAsn1(sue(t.extensions[i])))}if(typeof t.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function sue(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in we.oids&&(e.name=we.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in we.oids)e.id=we.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var n=0,i=0,s=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(s|=128,n=7);var o=String.fromCharCode(n);s!==0?o+=String.fromCharCode(i)+String.fromCharCode(s):i!==0&&(o+=String.fromCharCode(i)),e.value=D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,o)}else if(e.name==="basicConstraints")e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(D.create(D.Class.UNIVERSAL,D.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in e&&e.value.value.push(D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);var a=e.value.value;for(var l in e)e[l]===!0&&(l in Tr?a.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Tr[l]).getBytes())):l.indexOf(".")!==-1&&a.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(l).getBytes())))}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var o=String.fromCharCode(n);i!==0&&(o+=String.fromCharCode(i)),e.value=D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,o)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);for(var c,u=0;u<e.altNames.length;++u){c=e.altNames[u];var o=c.value;if(c.type===7&&c.ip){if(o=nt.util.bytesFromIP(c.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else c.type===8&&(c.oid?o=D.oidToDer(D.oidToDer(c.oid)):o=D.oidToDer(o));e.value.value.push(D.create(D.Class.CONTEXT_SPECIFIC,c.type,!1,o))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=D.create(D.Class.UNIVERSAL,D.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);var a=e.value.value;if(e.keyIdentifier){var p=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;a.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!1,p))}if(e.authorityCertIssuer){var g=[D.create(D.Class.CONTEXT_SPECIFIC,4,!0,[Ay(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];a.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,g))}if(e.serialNumber){var m=nt.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);a.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(e.name==="cRLDistributionPoints"){e.value=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);for(var a=e.value.value,y=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),v=D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[]),c,u=0;u<e.altNames.length;++u){c=e.altNames[u];var o=c.value;if(c.type===7&&c.ip){if(o=nt.util.bytesFromIP(c.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else c.type===8&&(c.oid?o=D.oidToDer(D.oidToDer(c.oid)):o=D.oidToDer(o));v.value.push(D.create(D.Class.CONTEXT_SPECIFIC,c.type,!1,o))}y.value.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[v])),a.push(y)}if(typeof e.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function B3(e,t){switch(e){case Tr["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.hash.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.mgf.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(t.mgf.hash.algorithmOid).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(t.saltLength).getBytes())])),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,r);default:return D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")}}function zZe(e){var t=D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,o=D.Type.UTF8;"valueTagClass"in i&&(o=i.valueTagClass),o===D.Type.UTF8&&(s=nt.util.encodeUtf8(s));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var l=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(i.type).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,o,a,s)])]);t.value.push(l)}return t}var JZe=new Date("1950-01-01T00:00:00Z"),jZe=new Date("2050-01-01T00:00:00Z");function rue(e){return e>=JZe&&e<jZe?D.create(D.Class.UNIVERSAL,D.Type.UTCTIME,!1,D.dateToUtcTime(e)):D.create(D.Class.UNIVERSAL,D.Type.GENERALIZEDTIME,!1,D.dateToGeneralizedTime(e))}we.getTBSCertificate=function(e){var t=rue(e.validity.notBefore),r=rue(e.validity.notAfter),n=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.version).getBytes())]),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,nt.util.hexToBytes(e.serialNumber)),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.siginfo.algorithmOid).getBytes()),B3(e.siginfo.algorithmOid,e.siginfo.parameters)]),Ay(e.issuer),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[t,r]),Ay(e.subject),we.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(D.create(D.Class.CONTEXT_SPECIFIC,1,!0,[D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(D.create(D.Class.CONTEXT_SPECIFIC,2,!0,[D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(we.certificateExtensionsToAsn1(e.extensions)),n};we.getCertificationRequestInfo=function(e){var t=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(e.version).getBytes()),Ay(e.subject),we.publicKeyToAsn1(e.publicKey),zZe(e)]);return t};we.distinguishedNameToAsn1=function(e){return Ay(e)};we.certificateToAsn1=function(e){var t=e.tbsCertificate||we.getTBSCertificate(e);return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[t,D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.signatureOid).getBytes()),B3(e.signatureOid,e.signatureParameters)]),D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,"\0"+e.signature)])};we.certificateExtensionsToAsn1=function(e){var t=D.create(D.Class.CONTEXT_SPECIFIC,3,!0,[]),r=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(we.certificateExtensionToAsn1(e[n]));return t};we.certificateExtensionToAsn1=function(e){var t=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);t.value.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.id).getBytes())),e.critical&&t.value.push(D.create(D.Class.UNIVERSAL,D.Type.BOOLEAN,!1,"\xFF"));var r=e.value;return typeof e.value!="string"&&(r=D.toDer(r).getBytes()),t.value.push(D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,r)),t};we.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||we.getCertificationRequestInfo(e);return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[t,D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(e.signatureOid).getBytes()),B3(e.signatureOid,e.signatureParameters)]),D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,"\0"+e.signature)])};we.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(o){var a=r(o.issuer);return a},t.addCertificate=function(o){if(typeof o=="string"&&(o=nt.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))if(o.subject.hash in t.certs){var a=t.certs[o.subject.hash];nt.util.isArray(a)||(a=[a]),a.push(o),t.certs[o.subject.hash]=a}else t.certs[o.subject.hash]=o},t.hasCertificate=function(o){typeof o=="string"&&(o=nt.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;nt.util.isArray(a)||(a=[a]);for(var l=D.toDer(we.certificateToAsn1(o)).getBytes(),c=0;c<a.length;++c){var u=D.toDer(we.certificateToAsn1(a[c])).getBytes();if(l===u)return!0}return!1},t.listAllCertificates=function(){var o=[];for(var a in t.certs)if(t.certs.hasOwnProperty(a)){var l=t.certs[a];if(!nt.util.isArray(l))o.push(l);else for(var c=0;c<l.length;++c)o.push(l[c])}return o},t.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=nt.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))return null;var l=r(o.subject);if(!nt.util.isArray(l))return a=t.certs[o.subject.hash],delete t.certs[o.subject.hash],a;for(var c=D.toDer(we.certificateToAsn1(o)).getBytes(),u=0;u<l.length;++u){var f=D.toDer(we.certificateToAsn1(l[u])).getBytes();c===f&&(a=l[u],l.splice(u,1))}return l.length===0&&delete t.certs[o.subject.hash],a};function r(o){return n(o),t.certs[o.hash]||null}function n(o){if(!o.hash){var a=nt.md.sha1.create();o.attributes=we.RDNAttributesAsArray(Ay(o),a),o.hash=a.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s)}return t};we.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};we.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var s=!0,o=null,a=0;do{var l=t.shift(),c=null,u=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:we.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),o===null){if(c=t[0]||e.getIssuer(l),c===null&&l.isIssuer(l)&&(u=!0,c=l),c){var f=c;nt.util.isArray(f)||(f=[f]);for(var p=!1;!p&&f.length>0;){c=f.shift();try{p=c.verify(l)}catch{}}p||(o={message:"Certificate signature is invalid.",error:we.certificateError.bad_certificate})}o===null&&(!c||u)&&!e.hasCertificate(l)&&(o={message:"Certificate is not trusted.",error:we.certificateError.unknown_ca})}if(o===null&&c&&!l.isIssuer(c)&&(o={message:"Certificate issuer is invalid.",error:we.certificateError.bad_certificate}),o===null)for(var g={keyUsage:!0,basicConstraints:!0},m=0;o===null&&m<l.extensions.length;++m){var y=l.extensions[m];y.critical&&!(y.name in g)&&(o={message:"Certificate has an unsupported critical extension.",error:we.certificateError.unsupported_certificate})}if(o===null&&(!s||t.length===0&&(!c||u))){var v=l.getExtension("basicConstraints"),C=l.getExtension("keyUsage");if(C!==null&&(!C.keyCertSign||v===null)&&(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:we.certificateError.bad_certificate}),o===null&&v!==null&&!v.cA&&(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:we.certificateError.bad_certificate}),o===null&&C!==null&&"pathLenConstraint"in v){var E=a-1;E>v.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:we.certificateError.bad_certificate})}}var w=o===null?!0:o.error,B=r.verify?r.verify(w,a,n):w;if(B===!0)o=null;else throw w===!0&&(o={message:"The application rejected the certificate.",error:we.certificateError.bad_certificate}),(B||B===0)&&(typeof B=="object"&&!nt.util.isArray(B)?(B.message&&(o.message=B.message),B.error&&(o.error=B.error)):typeof B=="string"&&(o.error=B)),o;s=!1,++a}while(t.length>0);return!0}});var T3=_((YRt,lue)=>{"use strict";var _n=Jt();Tc();uy();Ih();S3();w3();Il();n_();gy();Nr();iR();var V=_n.asn1,dr=_n.pki,s_=lue.exports=_n.pkcs12=_n.pkcs12||{},aue={name:"ContentInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:V.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},ZZe={name:"PFX",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"version"},aue,{name:"PFX.macData",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:V.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},XZe={name:"SafeBag",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:V.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:V.Class.UNIVERSAL,type:V.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},eXe={name:"Attribute",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:V.Class.UNIVERSAL,type:V.Type.SET,constructed:!0,capture:"values"}]},tXe={name:"CertBag",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:V.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:V.Class.UNIVERSAL,type:V.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function i_(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<e[s].safeBags.length;o++){var a=e[s].safeBags[o];if(!(n!==void 0&&a.type!==n)){if(t===null){i.push(a);continue}a.attributes[t]!==void 0&&a.attributes[t].indexOf(r)>=0&&i.push(a)}}return i}s_.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!V.validate(e,ZZe,n,i)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var o={version:n.version.charCodeAt(0),safeContents:[],getBags:function(v){var C={},E;return"localKeyId"in v?E=v.localKeyId:"localKeyIdHex"in v&&(E=_n.util.hexToBytes(v.localKeyIdHex)),E===void 0&&!("friendlyName"in v)&&"bagType"in v&&(C[v.bagType]=i_(o.safeContents,null,null,v.bagType)),E!==void 0&&(C.localKeyId=i_(o.safeContents,"localKeyId",E,v.bagType)),"friendlyName"in v&&(C.friendlyName=i_(o.safeContents,"friendlyName",v.friendlyName,v.bagType)),C},getBagsByFriendlyName:function(v,C){return i_(o.safeContents,"friendlyName",v,C)},getBagsByLocalKeyId:function(v,C){return i_(o.safeContents,"localKeyId",v,C)}};if(n.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=n.version.charCodeAt(0),s}if(V.derToOid(n.contentType)!==dr.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=V.derToOid(n.contentType),s}var a=n.content.value[0];if(a.tagClass!==V.Class.UNIVERSAL||a.type!==V.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(a=D3(a),n.mac){var l=null,c=0,u=V.derToOid(n.macAlgorithm);switch(u){case dr.oids.sha1:l=_n.md.sha1.create(),c=20;break;case dr.oids.sha256:l=_n.md.sha256.create(),c=32;break;case dr.oids.sha384:l=_n.md.sha384.create(),c=48;break;case dr.oids.sha512:l=_n.md.sha512.create(),c=64;break;case dr.oids.md5:l=_n.md.md5.create(),c=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+u);var f=new _n.util.ByteBuffer(n.macSalt),p="macIterations"in n?parseInt(_n.util.bytesToHex(n.macIterations),16):1,g=s_.generateKey(r,f,3,p,c,l),m=_n.hmac.create();m.start(l,g),m.update(a.value);var y=m.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return rXe(o,a.value,t,r),o};function D3(e){if(e.composed||e.constructed){for(var t=_n.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function rXe(e,t,r,n){if(t=V.fromDer(t,r),t.tagClass!==V.Class.UNIVERSAL||t.type!==V.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var s=t.value[i],o={},a=[];if(!V.validate(s,aue,o,a)){var l=new Error("Cannot read ContentInfo.");throw l.errors=a,l}var c={encrypted:!1},u=null,f=o.content.value[0];switch(V.derToOid(o.contentType)){case dr.oids.data:if(f.tagClass!==V.Class.UNIVERSAL||f.type!==V.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");u=D3(f).value;break;case dr.oids.encryptedData:u=nXe(f,n),c.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=V.derToOid(o.contentType),l}c.safeBags=iXe(u,r,n),e.safeContents.push(c)}}function nXe(e,t){var r={},n=[];if(!V.validate(e,_n.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var s=V.derToOid(r.contentType);if(s!==dr.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=s,i}s=V.derToOid(r.encAlgorithm);var o=dr.pbe.getCipher(s,r.encParameter,t),a=D3(r.encryptedContentAsn1),l=_n.util.createBuffer(a.value);if(o.update(l),!o.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return o.output.getBytes()}function iXe(e,t,r){if(!t&&e.length===0)return[];if(e=V.fromDer(e,t),e.tagClass!==V.Class.UNIVERSAL||e.type!==V.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],o={},a=[];if(!V.validate(s,XZe,o,a)){var l=new Error("Cannot read SafeBag.");throw l.errors=a,l}var c={type:V.derToOid(o.bagId),attributes:sXe(o.bagAttributes)};n.push(c);var u,f,p=o.bagValue.value[0];switch(c.type){case dr.oids.pkcs8ShroudedKeyBag:if(p=dr.decryptPrivateKeyInfo(p,r),p===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case dr.oids.keyBag:try{c.key=dr.privateKeyFromAsn1(p)}catch{c.key=null,c.asn1=p}continue;case dr.oids.certBag:u=tXe,f=function(){if(V.derToOid(o.certId)!==dr.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=V.derToOid(o.certId),m}var y=V.fromDer(o.cert,t);try{c.cert=dr.certificateFromAsn1(y,!0)}catch{c.cert=null,c.asn1=y}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=c.type,l}if(u!==void 0&&!V.validate(p,u,o,a)){var l=new Error("Cannot read PKCS#12 "+u.name);throw l.errors=a,l}f()}return n}function sXe(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!V.validate(e[r],eXe,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var o=V.derToOid(n.oid);if(dr.oids[o]!==void 0){t[dr.oids[o]]=[];for(var a=0;a<n.values.length;++a)t[dr.oids[o]].push(n.values[a].value)}}return t}s_.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,s;if(i!==null)i=_n.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var o=_n.util.isArray(t)?t[0]:t;typeof o=="string"&&(o=dr.certificateFromPem(o));var a=_n.md.sha1.create();a.update(V.toDer(dr.certificateToAsn1(o)).getBytes()),i=a.digest().getBytes()}else i=_n.random.getBytes(20);var l=[];i!==null&&l.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.localKeyId).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.friendlyName).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[V.create(V.Class.UNIVERSAL,V.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(s=V.create(V.Class.UNIVERSAL,V.Type.SET,!0,l));var c=[],u=[];t!==null&&(_n.util.isArray(t)?u=t:u=[t]);for(var f=[],p=0;p<u.length;++p){t=u[p],typeof t=="string"&&(t=dr.certificateFromPem(t));var g=p===0?s:void 0,m=dr.certificateToAsn1(t),y=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.certBag).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.x509Certificate).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,V.toDer(m).getBytes())])])]),g]);f.push(y)}if(f.length>0){var v=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,f),C=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.data).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,V.toDer(v).getBytes())])]);c.push(C)}var E=null;if(e!==null){var w=dr.wrapRsaPrivateKey(dr.privateKeyToAsn1(e));r===null?E=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.keyBag).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[w]),s]):E=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.pkcs8ShroudedKeyBag).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[dr.encryptPrivateKeyInfo(w,r,n)]),s]);var B=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[E]),R=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.data).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,V.toDer(B).getBytes())])]);c.push(R)}var N=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,c),W;if(n.useMac){var a=_n.md.sha1.create(),Z=new _n.util.ByteBuffer(_n.random.getBytes(n.saltSize)),te=n.count,e=s_.generateKey(r,Z,3,te,20),Y=_n.hmac.create();Y.start(a,e),Y.update(V.toDer(N).getBytes());var U=Y.getMac();W=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.sha1).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,U.getBytes())]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,Z.getBytes()),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(te).getBytes())])}return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(3).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(dr.oids.data).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,V.toDer(N).getBytes())])]),W])};s_.generateKey=_n.pbe.generatePkcs12Key});var k3=_((KRt,cue)=>{"use strict";var Rh=Jt();Tc();Ih();w3();qp();KT();T3();tR();n_();Nr();iR();var R3=Rh.asn1,yy=cue.exports=Rh.pki=Rh.pki||{};yy.pemToDer=function(e){var t=Rh.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Rh.util.createBuffer(t.body)};yy.privateKeyFromPem=function(e){var t=Rh.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=R3.fromDer(t.body);return yy.privateKeyFromAsn1(n)};yy.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:R3.toDer(yy.privateKeyToAsn1(e)).getBytes()};return Rh.pem.encode(r,{maxline:t})};yy.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:R3.toDer(e).getBytes()};return Rh.pem.encode(r,{maxline:t})}});var L3=_((zRt,Aue)=>{"use strict";var me=Jt();Tc();uy();WT();qp();k3();Il();gy();Nr();var lR=function(e,t,r,n){var i=me.util.createBuffer(),s=e.length>>1,o=s+(e.length&1),a=e.substr(0,o),l=e.substr(s,o),c=me.util.createBuffer(),u=me.hmac.create();r=t+r;var f=Math.ceil(n/16),p=Math.ceil(n/20);u.start("MD5",a);var g=me.util.createBuffer();c.putBytes(r);for(var m=0;m<f;++m)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),g.putBuffer(u.digest());u.start("SHA1",l);var y=me.util.createBuffer();c.clear(),c.putBytes(r);for(var m=0;m<p;++m)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),y.putBuffer(u.digest());return i.putBytes(me.util.xorBytes(g.getBytes(),y.getBytes(),n)),i},oXe=function(e,t,r){var n=me.hmac.create();n.start("SHA1",e);var i=me.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},aXe=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=me.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},lXe=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=me.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},Ma=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return me.util.createBuffer(e.getBytes(r))},Rl=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},M={};M.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};M.SupportedVersions=[M.Versions.TLS_1_1,M.Versions.TLS_1_0];M.Version=M.SupportedVersions[0];M.MaxFragment=15360;M.ConnectionEnd={server:0,client:1};M.PRFAlgorithm={tls_prf_sha256:0};M.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};M.CipherType={stream:0,block:1,aead:2};M.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};M.CompressionMethod={none:0,deflate:1};M.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};M.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};M.Alert={};M.Alert.Level={warning:1,fatal:2};M.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};M.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};M.CipherSuites={};M.getCipherSuite=function(e){var t=null;for(var r in M.CipherSuites){var n=M.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};M.handleUnexpected=function(e,t){var r=!e.open&&e.entity===M.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.unexpected_message}})};M.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(M.queue(e,M.createAlert(e,{level:M.Alert.Level.warning,description:M.Alert.Description.no_renegotiation})),M.flush(e)),e.process()};M.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===M.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.illegal_parameter}});else{var s=t.fragment,o=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:me.util.createBuffer(s.getBytes(32)),session_id:Ma(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=Ma(s,2),n.compression_methods=Ma(s,1)),o=r-(o-s.length()),o>0){for(var a=Ma(s,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:Ma(a,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var c=n.extensions[l];if(c.type[0]===0&&c.type[1]===0)for(var u=Ma(c.data,2);u.length()>0;){var f=u.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(Ma(u,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=M.getCipherSuite(n.cipher_suite);else for(var p=me.util.createBuffer(n.cipher_suites.bytes());p.length()>0&&(e.session.cipherSuite=M.getCipherSuite(p.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.handshake_failure},cipherSuite:me.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=M.CompressionMethod.none}return n};M.createSecurityParameters=function(e,t){var r=e.entity===M.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:M.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:M.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}};M.handleServerHello=function(e,t,r){var n=M.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=fue,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=uXe,e.session.resuming=!1,M.createSecurityParameters(e,n)),e.session.id=i,e.process()}};M.handleClientHello=function(e,t,r){var n=M.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),s===null?i="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i="")),i.length===0&&(i=me.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var o,a=1;a<M.SupportedVersions.length&&(o=M.SupportedVersions[a],!(o.minor<=n.version.minor));++a);e.version={major:o.major,minor:o.minor},e.session.version=e.version}s!==null?(e.expect=N3,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?AXe:Q3,e.session.resuming=!1,M.createSecurityParameters(e,n)),e.open=!0,M.queue(e,M.createRecord(e,{type:M.ContentType.handshake,data:M.createServerHello(e)})),e.session.resuming?(M.queue(e,M.createRecord(e,{type:M.ContentType.change_cipher_spec,data:M.createChangeCipherSpec()})),e.state.pending=M.createConnectionState(e),e.state.current.write=e.state.pending.write,M.queue(e,M.createRecord(e,{type:M.ContentType.handshake,data:M.createFinished(e)}))):(M.queue(e,M.createRecord(e,{type:M.ContentType.handshake,data:M.createCertificate(e)})),e.fail||(M.queue(e,M.createRecord(e,{type:M.ContentType.handshake,data:M.createServerKeyExchange(e)})),e.verifyClient!==!1&&M.queue(e,M.createRecord(e,{type:M.ContentType.handshake,data:M.createCertificateRequest(e)})),M.queue(e,M.createRecord(e,{type:M.ContentType.handshake,data:M.createServerHelloDone(e)})))),M.flush(e),e.process()}};M.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:Ma(n,3)},s,o,a=[];try{for(;i.certificate_list.length()>0;)s=Ma(i.certificate_list,3),o=me.asn1.fromDer(s),s=me.pki.certificateFromAsn1(o,!0),a.push(s)}catch(c){return e.error(e,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.bad_certificate}})}var l=e.entity===M.ConnectionEnd.client;(l||e.verifyClient===!0)&&a.length===0?e.error(e,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.illegal_parameter}}):a.length===0?e.expect=l?uue:Q3:(l?e.session.serverCertificate=a[0]:e.session.clientCertificate=a[0],M.verifyCertificateChain(e,a)&&(e.expect=l?uue:Q3)),e.process()};M.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.unsupported_certificate}});e.expect=dXe,e.process()};M.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:Ma(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=me.pki.privateKeyFromPem(s)}catch(l){e.error(e,{message:"Could not get private key.",cause:l,send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.internal_error}})}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.internal_error}});try{var o=e.session.sp;o.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var a=e.session.clientHelloVersion;if(a.major!==o.pre_master_secret.charCodeAt(0)||a.minor!==o.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{o.pre_master_secret=me.random.getBytes(48)}e.expect=N3,e.session.clientCertificate!==null&&(e.expect=yXe),e.process()};M.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:Ma(n,1),certificate_authorities:Ma(n,2)};e.session.certificateRequest=i,e.expect=fXe,e.process()};M.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:Ma(n,2).getBytes()},o=me.util.createBuffer();o.putBuffer(e.session.md5.digest()),o.putBuffer(e.session.sha1.digest()),o=o.getBytes();try{var a=e.session.clientCertificate;if(!a.publicKey.verify(o,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.handshake_failure}})}e.expect=N3,e.process()};M.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.insufficient_security}},i=0,s=e.verify(e,n.alert.description,i,[]);if(s!==!0)return(s||s===0)&&(typeof s=="object"&&!me.util.isArray(s)?(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert)):typeof s=="number"&&(n.alert.description=s)),e.error(e,n)}e.session.certificateRequest!==null&&(t=M.createRecord(e,{type:M.ContentType.handshake,data:M.createCertificate(e)}),M.queue(e,t)),t=M.createRecord(e,{type:M.ContentType.handshake,data:M.createClientKeyExchange(e)}),M.queue(e,t),e.expect=pXe;var o=function(a,l){a.session.certificateRequest!==null&&a.session.clientCertificate!==null&&M.queue(a,M.createRecord(a,{type:M.ContentType.handshake,data:M.createCertificateVerify(a,l)})),M.queue(a,M.createRecord(a,{type:M.ContentType.change_cipher_spec,data:M.createChangeCipherSpec()})),a.state.pending=M.createConnectionState(a),a.state.current.write=a.state.pending.write,M.queue(a,M.createRecord(a,{type:M.ContentType.handshake,data:M.createFinished(a)})),a.expect=fue,M.flush(a),a.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return o(e,null);M.getClientSignature(e,o)};M.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.illegal_parameter}});var r=e.entity===M.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=M.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?hXe:vXe,e.process()};M.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();n=me.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var o=e.entity===M.ConnectionEnd.client,a=o?"server finished":"client finished",l=e.session.sp,c=12,u=lR;if(n=u(l.master_secret,a,n.getBytes(),c),n.getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&o||!e.session.resuming&&!o)&&(M.queue(e,M.createRecord(e,{type:M.ContentType.change_cipher_spec,data:M.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,M.queue(e,M.createRecord(e,{type:M.ContentType.handshake,data:M.createFinished(e)}))),e.expect=o?gXe:CXe,e.handshaking=!1,++e.handshakes,e.peerCertificate=o?e.session.serverCertificate:e.session.clientCertificate,M.flush(e),e.isConnected=!0,e.connected(e),e.process()};M.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case M.Alert.Description.close_notify:i="Connection closed.";break;case M.Alert.Description.unexpected_message:i="Unexpected message.";break;case M.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case M.Alert.Description.decryption_failed:i="Decryption failed.";break;case M.Alert.Description.record_overflow:i="Record overflow.";break;case M.Alert.Description.decompression_failure:i="Decompression failed.";break;case M.Alert.Description.handshake_failure:i="Handshake failure.";break;case M.Alert.Description.bad_certificate:i="Bad certificate.";break;case M.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case M.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case M.Alert.Description.certificate_expired:i="Certificate expired.";break;case M.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case M.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case M.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case M.Alert.Description.access_denied:i="Access denied.";break;case M.Alert.Description.decode_error:i="Decode error.";break;case M.Alert.Description.decrypt_error:i="Decrypt error.";break;case M.Alert.Description.export_restriction:i="Export restriction.";break;case M.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case M.Alert.Description.insufficient_security:i="Insufficient security.";break;case M.Alert.Description.internal_error:i="Internal error.";break;case M.Alert.Description.user_canceled:i="User canceled.";break;case M.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===M.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===M.ConnectionEnd.client?"server":"client",alert:n}),e.process()};M.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=me.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in aR[e.entity][e.expect]?(e.entity===M.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:me.md.md5.create(),sha1:me.md.sha1.create()}),n!==M.HandshakeType.hello_request&&n!==M.HandshakeType.certificate_verify&&n!==M.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),aR[e.entity][e.expect][n](e,t,i)):M.handleUnexpected(e,t)};M.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};M.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===M.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();M.queue(e,M.createRecord(e,{type:M.ContentType.heartbeat,data:M.createHeartbeat(M.HeartbeatMessageType.heartbeat_response,s)})),M.flush(e)}else if(n===M.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,me.util.createBuffer(s))}e.process()};var cXe=0,uXe=1,uue=2,dXe=3,fXe=4,fue=5,hXe=6,gXe=7,pXe=8,mXe=0,AXe=1,Q3=2,yXe=3,N3=4,vXe=5,CXe=6,T=M.handleUnexpected,hue=M.handleChangeCipherSpec,ws=M.handleAlert,vo=M.handleHandshake,gue=M.handleApplicationData,Ss=M.handleHeartbeat,P3=[];P3[M.ConnectionEnd.client]=[[T,ws,vo,T,Ss],[T,ws,vo,T,Ss],[T,ws,vo,T,Ss],[T,ws,vo,T,Ss],[T,ws,vo,T,Ss],[hue,ws,T,T,Ss],[T,ws,vo,T,Ss],[T,ws,vo,gue,Ss],[T,ws,vo,T,Ss]];P3[M.ConnectionEnd.server]=[[T,ws,vo,T,Ss],[T,ws,vo,T,Ss],[T,ws,vo,T,Ss],[T,ws,vo,T,Ss],[hue,ws,T,T,Ss],[T,ws,vo,T,Ss],[T,ws,vo,gue,Ss],[T,ws,vo,T,Ss]];var kh=M.handleHelloRequest,bXe=M.handleServerHello,pue=M.handleCertificate,due=M.handleServerKeyExchange,M3=M.handleCertificateRequest,sR=M.handleServerHelloDone,mue=M.handleFinished,aR=[];aR[M.ConnectionEnd.client]=[[T,T,bXe,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[kh,T,T,T,T,T,T,T,T,T,T,pue,due,M3,sR,T,T,T,T,T,T],[kh,T,T,T,T,T,T,T,T,T,T,T,due,M3,sR,T,T,T,T,T,T],[kh,T,T,T,T,T,T,T,T,T,T,T,T,M3,sR,T,T,T,T,T,T],[kh,T,T,T,T,T,T,T,T,T,T,T,T,T,sR,T,T,T,T,T,T],[kh,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[kh,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,mue],[kh,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[kh,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];var EXe=M.handleClientHello,_Xe=M.handleClientKeyExchange,xXe=M.handleCertificateVerify;aR[M.ConnectionEnd.server]=[[T,EXe,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,pue,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,_Xe,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,xXe,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,mue],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];M.generateKeys=function(e,t){var r=lR,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===M.Versions.TLS_1_0.major&&e.version.minor===M.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var o=r(t.master_secret,"key expansion",n,i),a={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return s&&(a.client_write_IV=o.getBytes(t.fixed_iv_length),a.server_write_IV=o.getBytes(t.fixed_iv_length)),a};M.createConnectionState=function(e){var t=e.entity===M.ConnectionEnd.client,r=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(o){return!0},compressionState:null,compressFunction:function(o){return!0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]}};return s},n={read:r(),write:r()};if(n.read.update=function(s,o){return n.read.cipherFunction(o,n.read)?n.read.compressFunction(s,o,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,o){return n.write.compressFunction(s,o,n.write)?n.write.cipherFunction(o,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=M.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case M.CompressionMethod.none:break;case M.CompressionMethod.deflate:n.read.compressFunction=lXe,n.write.compressFunction=aXe;break;default:throw new Error("Unsupported compression algorithm.")}}return n};M.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=me.util.createBuffer();return r.putInt32(t),r.putBytes(me.random.getBytes(28)),r};M.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};M.createAlert=function(e,t){var r=me.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),M.createRecord(e,{type:M.ContentType.alert,data:r})};M.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=me.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),s=me.util.createBuffer();s.putByte(M.CompressionMethod.none);var o=s.length(),a=me.util.createBuffer();if(e.virtualHost){var l=me.util.createBuffer();l.putByte(0),l.putByte(0);var c=me.util.createBuffer();c.putByte(0),Rl(c,2,me.util.createBuffer(e.virtualHost));var u=me.util.createBuffer();Rl(u,2,c),Rl(l,2,u),a.putBuffer(l)}var f=a.length();f>0&&(f+=2);var p=e.session.id,g=p.length+1+2+4+28+2+i+1+o+f,m=me.util.createBuffer();return m.putByte(M.HandshakeType.client_hello),m.putInt24(g),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),Rl(m,1,me.util.createBuffer(p)),Rl(m,2,t),Rl(m,1,s),f>0&&Rl(m,2,a),m};M.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=me.util.createBuffer();return n.putByte(M.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),Rl(n,1,me.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};M.createCertificate=function(e){var t=e.entity===M.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=me.util.createBuffer();if(r!==null)try{me.util.isArray(r)||(r=[r]);for(var s=null,o=0;o<r.length;++o){var a=me.pem.decode(r[o])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=a.type,l}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=me.util.createBuffer(a.body);s===null&&(s=me.asn1.fromDer(c.bytes(),!1));var u=me.util.createBuffer();Rl(u,3,c),i.putBuffer(u)}r=me.pki.certificateFromAsn1(s),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(g){return e.error(e,{message:"Could not send certificate list.",cause:g,send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.bad_certificate}})}var f=3+i.length(),p=me.util.createBuffer();return p.putByte(M.HandshakeType.certificate),p.putInt24(f),Rl(p,3,i),p};M.createClientKeyExchange=function(e){var t=me.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(me.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,s=me.util.createBuffer();return s.putByte(M.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s};M.createServerKeyExchange=function(e){var t=0,r=me.util.createBuffer();return t>0&&(r.putByte(M.HandshakeType.server_key_exchange),r.putInt24(t)),r};M.getClientSignature=function(e,t){var r=me.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,s){var o=null;if(n.getPrivateKey)try{o=n.getPrivateKey(n,n.session.clientCertificate),o=me.pki.privateKeyFromPem(o)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.internal_error}})}o===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.internal_error}}):i=o.sign(i,null),s(n,i)},e.getSignature(e,r,t)};M.createCertificateVerify=function(e,t){var r=t.length+2,n=me.util.createBuffer();return n.putByte(M.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};M.createCertificateRequest=function(e){var t=me.util.createBuffer();t.putByte(1);var r=me.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=me.pki.distinguishedNameToAsn1(i.subject),o=me.asn1.toDer(s);r.putInt16(o.length()),r.putBuffer(o)}var a=1+t.length()+2+r.length(),l=me.util.createBuffer();return l.putByte(M.HandshakeType.certificate_request),l.putInt24(a),Rl(l,1,t),Rl(l,2,r),l};M.createServerHelloDone=function(e){var t=me.util.createBuffer();return t.putByte(M.HandshakeType.server_hello_done),t.putInt24(0),t};M.createChangeCipherSpec=function(){var e=me.util.createBuffer();return e.putByte(1),e};M.createFinished=function(e){var t=me.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===M.ConnectionEnd.client,n=e.session.sp,i=12,s=lR,o=r?"client finished":"server finished";t=s(n.master_secret,o,t.getBytes(),i);var a=me.util.createBuffer();return a.putByte(M.HandshakeType.finished),a.putInt24(t.length()),a.putBuffer(t),a};M.createHeartbeat=function(e,t,r){typeof r>"u"&&(r=t.length);var n=me.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=Math.max(16,i-r-3);return n.putBytes(me.random.getBytes(s)),n};M.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===M.ContentType.handshake||t.type===M.ContentType.alert||t.type===M.ContentType.change_cipher_spec))){if(t.type===M.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=M.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>M.MaxFragment;)n.push(M.createRecord(e,{type:t.type,data:me.util.createBuffer(i.slice(0,M.MaxFragment))})),i=i.slice(M.MaxFragment);i.length>0&&n.push(M.createRecord(e,{type:t.type,data:me.util.createBuffer(i)}))}for(var s=0;s<n.length&&!e.fail;++s){var o=n[s],a=e.state.current.write;a.update(e,o)&&e.records.push(o)}}};M.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var F3=function(e){switch(e){case!0:return!0;case me.pki.certificateError.bad_certificate:return M.Alert.Description.bad_certificate;case me.pki.certificateError.unsupported_certificate:return M.Alert.Description.unsupported_certificate;case me.pki.certificateError.certificate_revoked:return M.Alert.Description.certificate_revoked;case me.pki.certificateError.certificate_expired:return M.Alert.Description.certificate_expired;case me.pki.certificateError.certificate_unknown:return M.Alert.Description.certificate_unknown;case me.pki.certificateError.unknown_ca:return M.Alert.Description.unknown_ca;default:return M.Alert.Description.bad_certificate}},wXe=function(e){switch(e){case!0:return!0;case M.Alert.Description.bad_certificate:return me.pki.certificateError.bad_certificate;case M.Alert.Description.unsupported_certificate:return me.pki.certificateError.unsupported_certificate;case M.Alert.Description.certificate_revoked:return me.pki.certificateError.certificate_revoked;case M.Alert.Description.certificate_expired:return me.pki.certificateError.certificate_expired;case M.Alert.Description.certificate_unknown:return me.pki.certificateError.certificate_unknown;case M.Alert.Description.unknown_ca:return me.pki.certificateError.unknown_ca;default:return me.pki.certificateError.bad_certificate}};M.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(s,o,a){var l=F3(s),c=e.verify(e,s,o,a);if(c!==!0){if(typeof c=="object"&&!me.util.isArray(c)){var u=new Error("The application rejected the certificate.");throw u.send=!0,u.alert={level:M.Alert.Level.fatal,description:M.Alert.Description.bad_certificate},c.message&&(u.message=c.message),c.alert&&(u.alert.description=c.alert),u}c!==s&&(c=wXe(c))}return c},me.pki.verifyCertificateChain(e.caStore,t,r)}catch(s){var i=s;(typeof i!="object"||me.util.isArray(i))&&(i={send:!0,alert:{level:M.Alert.Level.fatal,description:F3(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:M.Alert.Level.fatal,description:F3(i.error)}),e.error(e,i)}return!e.fail};M.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var s=null,o=null;if(i?o=me.util.bytesToHex(i):r.order.length>0&&(o=r.order[0]),o!==null&&o in r.cache){s=r.cache[o],delete r.cache[o];for(var a in r.order)if(r.order[a]===o){r.order.splice(a,1);break}}return s},r.setSession=function(i,s){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}var o=me.util.bytesToHex(i);r.order.push(o),r.cache[o]=s}}return r};M.createConnection=function(e){var t=null;e.caStore?me.util.isArray(e.caStore)?t=me.pki.createCaStore(e.caStore):t=e.caStore:t=me.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in M.CipherSuites)r.push(M.CipherSuites[n])}var i=e.server?M.ConnectionEnd.server:M.ConnectionEnd.client,s=e.sessionCache?M.createSessionCache(e.sessionCache):null,o={version:{major:M.Version.major,minor:M.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(u,f,p,g){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:me.util.createBuffer(),tlsData:me.util.createBuffer(),data:me.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(u,f){f.origin=f.origin||(u.entity===M.ConnectionEnd.client?"client":"server"),f.send&&(M.queue(u,M.createAlert(u,f.alert)),M.flush(u));var p=f.fatal!==!1;p&&(u.fail=!0),e.error(u,f),p&&u.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};o.reset=function(u){o.version={major:M.Version.major,minor:M.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=o.entity===M.ConnectionEnd.client?cXe:mXe,o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(u||typeof u>"u"),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=M.createConnectionState(o)},o.reset();var a=function(u,f){var p=f.type-M.ContentType.change_cipher_spec,g=P3[u.entity][u.expect];p in g?g[p](u,f):M.handleUnexpected(u,f)},l=function(u){var f=0,p=u.input,g=p.length();if(g<5)f=5-g;else{u.record={type:p.getByte(),version:{major:p.getByte(),minor:p.getByte()},length:p.getInt16(),fragment:me.util.createBuffer(),ready:!1};var m=u.record.version.major===u.version.major;m&&u.session&&u.session.version&&(m=u.record.version.minor===u.version.minor),m||u.error(u,{message:"Incompatible TLS version.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.protocol_version}})}return f},c=function(u){var f=0,p=u.input,g=p.length();if(g<u.record.length)f=u.record.length-g;else{u.record.fragment.putBytes(p.getBytes(u.record.length)),p.compact();var m=u.state.current.read;m.update(u,u.record)&&(u.fragmented!==null&&(u.fragmented.type===u.record.type?(u.fragmented.fragment.putBuffer(u.record.fragment),u.record=u.fragmented):u.error(u,{message:"Invalid fragmented record.",send:!0,alert:{level:M.Alert.Level.fatal,description:M.Alert.Description.unexpected_message}})),u.record.ready=!0)}return f};return o.handshake=function(u){if(o.entity!==M.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&o.handshakes===0&&(o.fail=!1),o.handshaking=!0,u=u||"";var f=null;u.length>0&&(o.sessionCache&&(f=o.sessionCache.getSession(u)),f===null&&(u="")),u.length===0&&o.sessionCache&&(f=o.sessionCache.getSession(),f!==null&&(u=f.id)),o.session={id:u,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:me.md.md5.create(),sha1:me.md.sha1.create()},f&&(o.version=f.version,o.session.sp=f.sp),o.session.sp.client_random=M.createRandom().getBytes(),o.open=!0,M.queue(o,M.createRecord(o,{type:M.ContentType.handshake,data:M.createClientHello(o)})),M.flush(o)}},o.process=function(u){var f=0;return u&&o.input.putBytes(u),o.fail||(o.record!==null&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),o.record===null&&(f=l(o)),!o.fail&&o.record!==null&&!o.record.ready&&(f=c(o)),!o.fail&&o.record!==null&&o.record.ready&&a(o,o.record)),f},o.prepare=function(u){return M.queue(o,M.createRecord(o,{type:M.ContentType.application_data,data:me.util.createBuffer(u)})),M.flush(o)},o.prepareHeartbeatRequest=function(u,f){return u instanceof me.util.ByteBuffer&&(u=u.bytes()),typeof f>"u"&&(f=u.length),o.expectedHeartbeatPayload=u,M.queue(o,M.createRecord(o,{type:M.ContentType.heartbeat,data:M.createHeartbeat(M.HeartbeatMessageType.heartbeat_request,u,f)})),M.flush(o)},o.close=function(u){if(!o.fail&&o.sessionCache&&o.session){var f={id:o.session.id,version:o.session.version,sp:o.session.sp};f.sp.keys=null,o.sessionCache.setSession(f.id,f)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,M.queue(o,M.createAlert(o,{level:M.Alert.Level.warning,description:M.Alert.Description.close_notify})),M.flush(o)),o.closed(o)),o.reset(u)},o};Aue.exports=me.tls=me.tls||{};for(oR in M)typeof M[oR]!="function"&&(me.tls[oR]=M[oR]);var oR;me.tls.prf_tls1=lR;me.tls.hmac_sha1=oXe;me.tls.createSessionCache=M.createSessionCache;me.tls.createConnection=M.createConnection});var Cue=_((JRt,vue)=>{"use strict";var Mh=Jt();Sh();L3();var kl=vue.exports=Mh.tls;kl.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=kl.BulkCipherAlgorithm.aes,e.cipher_type=kl.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=kl.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:yue};kl.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=kl.BulkCipherAlgorithm.aes,e.cipher_type=kl.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=kl.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:yue};function yue(e,t,r){var n=t.entity===Mh.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:Mh.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:Mh.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=DXe,e.write.cipherFunction=SXe,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=kl.hmac_sha1}function SXe(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===kl.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=Mh.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:i}),e.version.minor>=kl.Versions.TLS_1_1.minor&&s.output.putBytes(i),s.update(e.fragment),s.finish(IXe)&&(e.fragment=s.output,e.length=e.fragment.length(),r=!0),r}function IXe(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function BXe(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),o=i-1-s;o<i-1;++o)n=n&&t.at(o)==s;n&&t.truncate(s+1)}return n}function DXe(e,t){var r=!1,n;e.version.minor===kl.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(BXe);var s=t.macLength,o=Mh.random.getBytesSync(s),a=i.output.length();a>=s?(e.fragment=i.output.getBytes(a-s),o=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=Mh.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=TXe(t.macKey,o,l)&&r,r}function TXe(e,t,r){var n=Mh.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var q3=_((jRt,xue)=>{"use strict";var Pn=Jt();Su();Nr();var o_=xue.exports=Pn.sha512=Pn.sha512||{};Pn.md.sha512=Pn.md.algorithms.sha512=o_;var Eue=Pn.sha384=Pn.sha512.sha384=Pn.sha512.sha384||{};Eue.create=function(){return o_.create("SHA-384")};Pn.md.sha384=Pn.md.algorithms.sha384=Eue;Pn.sha512.sha256=Pn.sha512.sha256||{create:function(){return o_.create("SHA-512/256")}};Pn.md["sha512/256"]=Pn.md.algorithms["sha512/256"]=Pn.sha512.sha256;Pn.sha512.sha224=Pn.sha512.sha224||{create:function(){return o_.create("SHA-512/224")}};Pn.md["sha512/224"]=Pn.md.algorithms["sha512/224"]=Pn.sha512.sha224;o_.create=function(e){if(_ue||RXe(),typeof e>"u"&&(e="SHA-512"),!(e in Yp))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Yp[e],r=null,n=Pn.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var l=a.messageLengthSize/4,c=0;c<l;++c)a.fullMessageLength.push(0);n=Pn.util.createBuffer(),r=new Array(t.length);for(var c=0;c<t.length;++c)r[c]=t[c].slice(0);return a},a.start(),a.update=function(l,c){c==="utf8"&&(l=Pn.util.encodeUtf8(l));var u=l.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var f=a.fullMessageLength.length-1;f>=0;--f)a.fullMessageLength[f]+=u[1],u[1]=u[0]+(a.fullMessageLength[f]/4294967296>>>0),a.fullMessageLength[f]=a.fullMessageLength[f]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(l),bue(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var l=Pn.util.createBuffer();l.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=c&a.blockLength-1;l.putBytes(U3.substr(0,a.blockLength-u));for(var f,p,g=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)f=a.fullMessageLength[m+1]*8,p=f/4294967296>>>0,g+=p,l.putInt32(g>>>0),g=f>>>0;l.putInt32(g);for(var y=new Array(r.length),m=0;m<r.length;++m)y[m]=r[m].slice(0);bue(y,i,l);var v=Pn.util.createBuffer(),C;e==="SHA-512"?C=y.length:e==="SHA-384"?C=y.length-2:C=y.length-4;for(var m=0;m<C;++m)v.putInt32(y[m][0]),(m!==C-1||e!=="SHA-512/224")&&v.putInt32(y[m][1]);return v},a};var U3=null,_ue=!1,O3=null,Yp=null;function RXe(){U3="\x80",U3+=Pn.util.fillString("\0",128),O3=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Yp={},Yp["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Yp["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Yp["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Yp["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_ue=!0}function bue(e,t,r){for(var n,i,s,o,a,l,c,u,f,p,g,m,y,v,C,E,w,B,R,N,W,Z,te,Y,U,ce,Ie,Q,se,z,ie,Pe,dt,ve,Rt,Zt=r.length();Zt>=128;){for(se=0;se<16;++se)t[se][0]=r.getInt32()>>>0,t[se][1]=r.getInt32()>>>0;for(;se<80;++se)Pe=t[se-2],z=Pe[0],ie=Pe[1],n=((z>>>19|ie<<13)^(ie>>>29|z<<3)^z>>>6)>>>0,i=((z<<13|ie>>>19)^(ie<<3|z>>>29)^(z<<26|ie>>>6))>>>0,ve=t[se-15],z=ve[0],ie=ve[1],s=((z>>>1|ie<<31)^(z>>>8|ie<<24)^z>>>7)>>>0,o=((z<<31|ie>>>1)^(z<<24|ie>>>8)^(z<<25|ie>>>7))>>>0,dt=t[se-7],Rt=t[se-16],ie=i+dt[1]+o+Rt[1],t[se][0]=n+dt[0]+s+Rt[0]+(ie/4294967296>>>0)>>>0,t[se][1]=ie>>>0;for(y=e[0][0],v=e[0][1],C=e[1][0],E=e[1][1],w=e[2][0],B=e[2][1],R=e[3][0],N=e[3][1],W=e[4][0],Z=e[4][1],te=e[5][0],Y=e[5][1],U=e[6][0],ce=e[6][1],Ie=e[7][0],Q=e[7][1],se=0;se<80;++se)c=((W>>>14|Z<<18)^(W>>>18|Z<<14)^(Z>>>9|W<<23))>>>0,u=((W<<18|Z>>>14)^(W<<14|Z>>>18)^(Z<<23|W>>>9))>>>0,f=(U^W&(te^U))>>>0,p=(ce^Z&(Y^ce))>>>0,a=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,l=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,g=(y&C|w&(y^C))>>>0,m=(v&E|B&(v^E))>>>0,ie=Q+u+p+O3[se][1]+t[se][1],n=Ie+c+f+O3[se][0]+t[se][0]+(ie/4294967296>>>0)>>>0,i=ie>>>0,ie=l+m,s=a+g+(ie/4294967296>>>0)>>>0,o=ie>>>0,Ie=U,Q=ce,U=te,ce=Y,te=W,Y=Z,ie=N+i,W=R+n+(ie/4294967296>>>0)>>>0,Z=ie>>>0,R=w,N=B,w=C,B=E,C=y,E=v,ie=i+o,y=n+s+(ie/4294967296>>>0)>>>0,v=ie>>>0;ie=e[0][1]+v,e[0][0]=e[0][0]+y+(ie/4294967296>>>0)>>>0,e[0][1]=ie>>>0,ie=e[1][1]+E,e[1][0]=e[1][0]+C+(ie/4294967296>>>0)>>>0,e[1][1]=ie>>>0,ie=e[2][1]+B,e[2][0]=e[2][0]+w+(ie/4294967296>>>0)>>>0,e[2][1]=ie>>>0,ie=e[3][1]+N,e[3][0]=e[3][0]+R+(ie/4294967296>>>0)>>>0,e[3][1]=ie>>>0,ie=e[4][1]+Z,e[4][0]=e[4][0]+W+(ie/4294967296>>>0)>>>0,e[4][1]=ie>>>0,ie=e[5][1]+Y,e[5][0]=e[5][0]+te+(ie/4294967296>>>0)>>>0,e[5][1]=ie>>>0,ie=e[6][1]+ce,e[6][0]=e[6][0]+U+(ie/4294967296>>>0)>>>0,e[6][1]=ie>>>0,ie=e[7][1]+Q,e[7][0]=e[7][0]+Ie+(ie/4294967296>>>0)>>>0,e[7][1]=ie>>>0,Zt-=128}}});var wue=_(V3=>{"use strict";var kXe=Jt();Tc();var os=kXe.asn1;V3.privateKeyValidator={name:"PrivateKeyInfo",tagClass:os.Class.UNIVERSAL,type:os.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:os.Class.UNIVERSAL,type:os.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:os.Class.UNIVERSAL,type:os.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:os.Class.UNIVERSAL,type:os.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:os.Class.UNIVERSAL,type:os.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};V3.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:os.Class.UNIVERSAL,type:os.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:os.Class.UNIVERSAL,type:os.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:os.Class.UNIVERSAL,type:os.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:os.Class.UNIVERSAL,type:os.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Lue=_((XRt,Pue)=>{"use strict";var Is=Jt();r_();Il();q3();Nr();var Rue=wue(),MXe=Rue.publicKeyValidator,FXe=Rue.privateKeyValidator;typeof Sue>"u"&&(Sue=Is.jsbn.BigInteger);var Sue,G3=Is.util.ByteBuffer,Zo=typeof Buffer>"u"?Uint8Array:Buffer;Is.pki=Is.pki||{};Pue.exports=Is.pki.ed25519=Is.ed25519=Is.ed25519||{};var fr=Is.ed25519;fr.constants={};fr.constants.PUBLIC_KEY_BYTE_LENGTH=32;fr.constants.PRIVATE_KEY_BYTE_LENGTH=64;fr.constants.SEED_BYTE_LENGTH=32;fr.constants.SIGN_BYTE_LENGTH=64;fr.constants.HASH_BYTE_LENGTH=64;fr.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Is.random.getBytesSync(fr.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==fr.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+fr.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Jd({message:t,encoding:"binary"});for(var r=new Zo(fr.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Zo(fr.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return LXe(r,n),{publicKey:r,privateKey:n}};fr.privateKeyFromAsn1=function(e){var t={},r=[],n=Is.asn1.validate(e,FXe,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=Is.asn1.derToOid(t.privateKeyOid),o=Is.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var a=t.privateKey,l=Jd({message:Is.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:l}};fr.publicKeyFromAsn1=function(e){var t={},r=[],n=Is.asn1.validate(e,MXe,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=Is.asn1.derToOid(t.publicKeyOid),o=Is.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var a=t.ed25519PublicKey;if(a.length!==fr.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Jd({message:a,encoding:"binary"})};fr.publicKeyFromPrivateKey=function(e){e=e||{};var t=Jd({message:e.privateKey,encoding:"binary"});if(t.length!==fr.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+fr.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Zo(fr.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};fr.sign=function(e){e=e||{};var t=Jd(e),r=Jd({message:e.privateKey,encoding:"binary"});if(r.length===fr.constants.SEED_BYTE_LENGTH){var n=fr.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==fr.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+fr.constants.SEED_BYTE_LENGTH+" or "+fr.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Zo(fr.constants.SIGN_BYTE_LENGTH+t.length);UXe(i,t,t.length,r);for(var s=new Zo(fr.constants.SIGN_BYTE_LENGTH),o=0;o<s.length;++o)s[o]=i[o];return s};fr.verify=function(e){e=e||{};var t=Jd(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Jd({message:e.signature,encoding:"binary"});if(r.length!==fr.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+fr.constants.SIGN_BYTE_LENGTH);var n=Jd({message:e.publicKey,encoding:"binary"});if(n.length!==fr.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+fr.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Zo(fr.constants.SIGN_BYTE_LENGTH+t.length),s=new Zo(fr.constants.SIGN_BYTE_LENGTH+t.length),o;for(o=0;o<fr.constants.SIGN_BYTE_LENGTH;++o)i[o]=r[o];for(o=0;o<t.length;++o)i[o+fr.constants.SIGN_BYTE_LENGTH]=t[o];return OXe(s,i,i.length,n)>=0};function Jd(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Zo)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,r);t=new G3(t,r)}else if(!(t instanceof G3))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Zo(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var $3=mt(),cR=mt([1]),QXe=mt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),NXe=mt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Iue=mt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Bue=mt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),H3=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),PXe=mt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function a_(e,t){var r=Is.md.sha512.create(),n=new G3(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var s=new Zo(fr.constants.HASH_BYTE_LENGTH),o=0;o<64;++o)s[o]=i.charCodeAt(o);return s}function LXe(e,t){var r=[mt(),mt(),mt(),mt()],n,i=a_(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,J3(r,i),z3(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function UXe(e,t,r,n){var i,s,o=new Float64Array(64),a=[mt(),mt(),mt(),mt()],l=a_(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var c=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=l[32+i];var u=a_(e.subarray(32),r+32);for(Y3(u),J3(a,u),z3(e,a),i=32;i<64;++i)e[i]=n[i];var f=a_(e,r+64);for(Y3(f),i=32;i<64;++i)o[i]=0;for(i=0;i<32;++i)o[i]=u[i];for(i=0;i<32;++i)for(s=0;s<32;s++)o[i+s]+=f[i]*l[s];return kue(e.subarray(32),o),c}function OXe(e,t,r,n){var i,s,o=new Zo(32),a=[mt(),mt(),mt(),mt()],l=[mt(),mt(),mt(),mt()];if(s=-1,r<64||qXe(l,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var c=a_(e,r);if(Y3(c),Que(a,l,c),J3(l,t.subarray(32)),K3(a,l),z3(o,a),r-=64,Mue(t,0,o,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return s=r,s}function kue(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*H3[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*H3[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*H3[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function Y3(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;kue(e,t)}function K3(e,t){var r=mt(),n=mt(),i=mt(),s=mt(),o=mt(),a=mt(),l=mt(),c=mt(),u=mt();Cy(r,e[1],e[0]),Cy(u,t[1],t[0]),yn(r,r,u),vy(n,e[0],e[1]),vy(u,t[0],t[1]),yn(n,n,u),yn(i,e[3],t[3]),yn(i,i,NXe),yn(s,e[2],t[2]),vy(s,s,s),Cy(o,n,r),Cy(a,s,i),vy(l,s,i),vy(c,n,r),yn(e[0],o,a),yn(e[1],c,l),yn(e[2],l,a),yn(e[3],o,c)}function Due(e,t,r){for(var n=0;n<4;++n)Nue(e[n],t[n],r)}function z3(e,t){var r=mt(),n=mt(),i=mt();GXe(i,t[2]),yn(r,t[0],i),yn(n,t[1],i),uR(e,n),e[31]^=Fue(r)<<7}function uR(e,t){var r,n,i,s=mt(),o=mt();for(r=0;r<16;++r)o[r]=t[r];for(W3(o),W3(o),W3(o),n=0;n<2;++n){for(s[0]=o[0]-65517,r=1;r<15;++r)s[r]=o[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=o[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,Nue(o,s,1-i)}for(r=0;r<16;r++)e[2*r]=o[r]&255,e[2*r+1]=o[r]>>8}function qXe(e,t){var r=mt(),n=mt(),i=mt(),s=mt(),o=mt(),a=mt(),l=mt();return Fh(e[2],cR),VXe(e[1],t),Kp(i,e[1]),yn(s,i,QXe),Cy(i,i,e[2]),vy(s,e[2],s),Kp(o,s),Kp(a,o),yn(l,a,o),yn(r,l,i),yn(r,r,s),HXe(r,r),yn(r,r,i),yn(r,r,s),yn(r,r,s),yn(e[0],r,s),Kp(n,e[0]),yn(n,n,s),Tue(n,i)&&yn(e[0],e[0],PXe),Kp(n,e[0]),yn(n,n,s),Tue(n,i)?-1:(Fue(e[0])===t[31]>>7&&Cy(e[0],$3,e[0]),yn(e[3],e[0],e[1]),0)}function VXe(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function HXe(e,t){var r=mt(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)Kp(r,r),n!==1&&yn(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function Tue(e,t){var r=new Zo(32),n=new Zo(32);return uR(r,e),uR(n,t),Mue(r,0,n,0)}function Mue(e,t,r,n){return WXe(e,t,r,n,32)}function WXe(e,t,r,n,i){var s,o=0;for(s=0;s<i;++s)o|=e[t+s]^r[n+s];return(1&o-1>>>8)-1}function Fue(e){var t=new Zo(32);return uR(t,e),t[0]&1}function Que(e,t,r){var n,i;for(Fh(e[0],$3),Fh(e[1],cR),Fh(e[2],cR),Fh(e[3],$3),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Due(e,t,n),K3(t,e),K3(e,e),Due(e,t,n)}function J3(e,t){var r=[mt(),mt(),mt(),mt()];Fh(r[0],Iue),Fh(r[1],Bue),Fh(r[2],cR),yn(r[3],Iue,Bue),Que(e,r,t)}function Fh(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function GXe(e,t){var r=mt(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)Kp(r,r),n!==2&&n!==4&&yn(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function W3(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function Nue(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function mt(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function vy(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function Cy(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function Kp(e,t){yn(e,t,t)}function yn(e,t,r){var n,i,s=0,o=0,a=0,l=0,c=0,u=0,f=0,p=0,g=0,m=0,y=0,v=0,C=0,E=0,w=0,B=0,R=0,N=0,W=0,Z=0,te=0,Y=0,U=0,ce=0,Ie=0,Q=0,se=0,z=0,ie=0,Pe=0,dt=0,ve=r[0],Rt=r[1],Zt=r[2],tr=r[3],ue=r[4],wr=r[5],sr=r[6],Hr=r[7],Ge=r[8],ln=r[9],Wr=r[10],pr=r[11],Ee=r[12],Ur=r[13],he=r[14],be=r[15];n=t[0],s+=n*ve,o+=n*Rt,a+=n*Zt,l+=n*tr,c+=n*ue,u+=n*wr,f+=n*sr,p+=n*Hr,g+=n*Ge,m+=n*ln,y+=n*Wr,v+=n*pr,C+=n*Ee,E+=n*Ur,w+=n*he,B+=n*be,n=t[1],o+=n*ve,a+=n*Rt,l+=n*Zt,c+=n*tr,u+=n*ue,f+=n*wr,p+=n*sr,g+=n*Hr,m+=n*Ge,y+=n*ln,v+=n*Wr,C+=n*pr,E+=n*Ee,w+=n*Ur,B+=n*he,R+=n*be,n=t[2],a+=n*ve,l+=n*Rt,c+=n*Zt,u+=n*tr,f+=n*ue,p+=n*wr,g+=n*sr,m+=n*Hr,y+=n*Ge,v+=n*ln,C+=n*Wr,E+=n*pr,w+=n*Ee,B+=n*Ur,R+=n*he,N+=n*be,n=t[3],l+=n*ve,c+=n*Rt,u+=n*Zt,f+=n*tr,p+=n*ue,g+=n*wr,m+=n*sr,y+=n*Hr,v+=n*Ge,C+=n*ln,E+=n*Wr,w+=n*pr,B+=n*Ee,R+=n*Ur,N+=n*he,W+=n*be,n=t[4],c+=n*ve,u+=n*Rt,f+=n*Zt,p+=n*tr,g+=n*ue,m+=n*wr,y+=n*sr,v+=n*Hr,C+=n*Ge,E+=n*ln,w+=n*Wr,B+=n*pr,R+=n*Ee,N+=n*Ur,W+=n*he,Z+=n*be,n=t[5],u+=n*ve,f+=n*Rt,p+=n*Zt,g+=n*tr,m+=n*ue,y+=n*wr,v+=n*sr,C+=n*Hr,E+=n*Ge,w+=n*ln,B+=n*Wr,R+=n*pr,N+=n*Ee,W+=n*Ur,Z+=n*he,te+=n*be,n=t[6],f+=n*ve,p+=n*Rt,g+=n*Zt,m+=n*tr,y+=n*ue,v+=n*wr,C+=n*sr,E+=n*Hr,w+=n*Ge,B+=n*ln,R+=n*Wr,N+=n*pr,W+=n*Ee,Z+=n*Ur,te+=n*he,Y+=n*be,n=t[7],p+=n*ve,g+=n*Rt,m+=n*Zt,y+=n*tr,v+=n*ue,C+=n*wr,E+=n*sr,w+=n*Hr,B+=n*Ge,R+=n*ln,N+=n*Wr,W+=n*pr,Z+=n*Ee,te+=n*Ur,Y+=n*he,U+=n*be,n=t[8],g+=n*ve,m+=n*Rt,y+=n*Zt,v+=n*tr,C+=n*ue,E+=n*wr,w+=n*sr,B+=n*Hr,R+=n*Ge,N+=n*ln,W+=n*Wr,Z+=n*pr,te+=n*Ee,Y+=n*Ur,U+=n*he,ce+=n*be,n=t[9],m+=n*ve,y+=n*Rt,v+=n*Zt,C+=n*tr,E+=n*ue,w+=n*wr,B+=n*sr,R+=n*Hr,N+=n*Ge,W+=n*ln,Z+=n*Wr,te+=n*pr,Y+=n*Ee,U+=n*Ur,ce+=n*he,Ie+=n*be,n=t[10],y+=n*ve,v+=n*Rt,C+=n*Zt,E+=n*tr,w+=n*ue,B+=n*wr,R+=n*sr,N+=n*Hr,W+=n*Ge,Z+=n*ln,te+=n*Wr,Y+=n*pr,U+=n*Ee,ce+=n*Ur,Ie+=n*he,Q+=n*be,n=t[11],v+=n*ve,C+=n*Rt,E+=n*Zt,w+=n*tr,B+=n*ue,R+=n*wr,N+=n*sr,W+=n*Hr,Z+=n*Ge,te+=n*ln,Y+=n*Wr,U+=n*pr,ce+=n*Ee,Ie+=n*Ur,Q+=n*he,se+=n*be,n=t[12],C+=n*ve,E+=n*Rt,w+=n*Zt,B+=n*tr,R+=n*ue,N+=n*wr,W+=n*sr,Z+=n*Hr,te+=n*Ge,Y+=n*ln,U+=n*Wr,ce+=n*pr,Ie+=n*Ee,Q+=n*Ur,se+=n*he,z+=n*be,n=t[13],E+=n*ve,w+=n*Rt,B+=n*Zt,R+=n*tr,N+=n*ue,W+=n*wr,Z+=n*sr,te+=n*Hr,Y+=n*Ge,U+=n*ln,ce+=n*Wr,Ie+=n*pr,Q+=n*Ee,se+=n*Ur,z+=n*he,ie+=n*be,n=t[14],w+=n*ve,B+=n*Rt,R+=n*Zt,N+=n*tr,W+=n*ue,Z+=n*wr,te+=n*sr,Y+=n*Hr,U+=n*Ge,ce+=n*ln,Ie+=n*Wr,Q+=n*pr,se+=n*Ee,z+=n*Ur,ie+=n*he,Pe+=n*be,n=t[15],B+=n*ve,R+=n*Rt,N+=n*Zt,W+=n*tr,Z+=n*ue,te+=n*wr,Y+=n*sr,U+=n*Hr,ce+=n*Ge,Ie+=n*ln,Q+=n*Wr,se+=n*pr,z+=n*Ee,ie+=n*Ur,Pe+=n*he,dt+=n*be,s+=38*R,o+=38*N,a+=38*W,l+=38*Z,c+=38*te,u+=38*Y,f+=38*U,p+=38*ce,g+=38*Ie,m+=38*Q,y+=38*se,v+=38*z,C+=38*ie,E+=38*Pe,w+=38*dt,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=l,e[4]=c,e[5]=u,e[6]=f,e[7]=p,e[8]=g,e[9]=m,e[10]=y,e[11]=v,e[12]=C,e[13]=E,e[14]=w,e[15]=B}});var Vue=_((ekt,que)=>{"use strict";var Fa=Jt();Nr();Il();r_();que.exports=Fa.kem=Fa.kem||{};var Uue=Fa.jsbn.BigInteger;Fa.kem.rsa={};Fa.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||Fa.random,n={};return n.encrypt=function(i,s){var o=Math.ceil(i.n.bitLength()/8),a;do a=new Uue(Fa.util.bytesToHex(r.getBytesSync(o)),16).mod(i.n);while(a.compareTo(Uue.ONE)<=0);a=Fa.util.hexToBytes(a.toString(16));var l=o-a.length;l>0&&(a=Fa.util.fillString("\0",l)+a);var c=i.encrypt(a,"NONE"),u=e.generate(a,s);return{encapsulation:c,key:u}},n.decrypt=function(i,s,o){var a=i.decrypt(s,"NONE");return e.generate(a,o)},n};Fa.kem.kdf1=function(e,t){Oue(this,e,0,t||e.digestLength)};Fa.kem.kdf2=function(e,t){Oue(this,e,1,t||e.digestLength)};function Oue(e,t,r,n){e.generate=function(i,s){for(var o=new Fa.util.ByteBuffer,a=Math.ceil(s/n)+r,l=new Fa.util.ByteBuffer,c=r;c<a;++c){l.putInt32(c),t.start(),t.update(i+l.getBytes());var u=t.digest();o.putBytes(u.getBytes(n))}return o.truncate(o.length()-s),o.getBytes()}}});var $ue=_((tkt,Gue)=>{"use strict";var vr=Jt();Nr();Gue.exports=vr.log=vr.log||{};vr.log.levels=["none","error","warning","info","debug","verbose","max"];var dR={},X3=[],c_=null;vr.log.LEVEL_LOCKED=2;vr.log.NO_LEVEL_CHECK=4;vr.log.INTERPOLATE=8;for(Fu=0;Fu<vr.log.levels.length;++Fu)j3=vr.log.levels[Fu],dR[j3]={index:Fu,name:j3.toUpperCase()};var j3,Fu;vr.log.logMessage=function(e){for(var t=dR[e.level].index,r=0;r<X3.length;++r){var n=X3[r];if(n.flags&vr.log.NO_LEVEL_CHECK)n.f(e);else{var i=dR[n.level].index;t<=i&&n.f(n,e)}}};vr.log.prepareStandard=function(e){"standard"in e||(e.standard=dR[e.level].name+" ["+e.category+"] "+e.message)};vr.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=vr.util.format.apply(this,t)}};vr.log.prepareStandardFull=function(e){"standardFull"in e||(vr.log.prepareStandard(e),e.standardFull=e.standard)};for(Z3=["error","warning","info","debug","verbose"],Fu=0;Fu<Z3.length;++Fu)(function(t){vr.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:t,category:r,message:n,arguments:i};vr.log.logMessage(s)}})(Z3[Fu]);var Z3,Fu;vr.log.makeLogger=function(e){var t={flags:0,f:e};return vr.log.setLevel(t,"none"),t};vr.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&vr.log.LEVEL_LOCKED))for(var n=0;n<vr.log.levels.length;++n){var i=vr.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};vr.log.lock=function(e,t){typeof t>"u"||t?e.flags|=vr.log.LEVEL_LOCKED:e.flags&=~vr.log.LEVEL_LOCKED};vr.log.addLogger=function(e){X3.push(e)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Hue={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},u_=function(e,t){vr.log.prepareStandard(t);var r=Hue[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)},by=vr.log.makeLogger(u_)):(u_=function(t,r){vr.log.prepareStandardFull(r),console.log(r.standardFull)},by=vr.log.makeLogger(u_)),vr.log.setLevel(by,"debug"),vr.log.addLogger(by),c_=by):console={log:function(){}};var by,Hue,u_;c_!==null&&typeof window<"u"&&window.location&&(l_=new URL(window.location.href).searchParams,l_.has("console.level")&&vr.log.setLevel(c_,l_.get("console.level").slice(-1)[0]),l_.has("console.lock")&&(Wue=l_.get("console.lock").slice(-1)[0],Wue=="true"&&vr.log.lock(c_)));var l_,Wue;vr.log.consoleLogger=c_});var Kue=_((rkt,Yue)=>{"use strict";Yue.exports=Su();WT();gy();f3();q3()});var jue=_((nkt,Jue)=>{"use strict";var Te=Jt();Sh();Tc();e_();Ih();qp();S3();Il();Nr();iR();var G=Te.asn1,Co=Jue.exports=Te.pkcs7=Te.pkcs7||{};Co.messageFromPem=function(e){var t=Te.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=G.fromDer(t.body);return Co.messageFromAsn1(n)};Co.messageToPem=function(e,t){var r={type:"PKCS7",body:G.toDer(e.toAsn1()).getBytes()};return Te.pem.encode(r,{maxline:t})};Co.messageFromAsn1=function(e){var t={},r=[];if(!G.validate(e,Co.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=G.derToOid(t.contentType),s;switch(i){case Te.pki.oids.envelopedData:s=Co.createEnvelopedData();break;case Te.pki.oids.encryptedData:s=Co.createEncryptedData();break;case Te.pki.oids.signedData:s=Co.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s};Co.createSignedData=function(){var e=null;return e={type:Te.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(tH(e,n,Co.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,s=0;s<i.length;++s)e.certificates.push(Te.pki.certificateFromAsn1(i[s]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(Te.pki.certificateToAsn1(e.certificates[i]));var s=[],o=G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(e.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&o.value[0].value.push(G.create(G.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&o.value[0].value.push(G.create(G.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(G.create(G.Class.UNIVERSAL,G.Type.SET,!0,e.signerInfos)),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.type).getBytes()),o])},addSigner:function(n){var i=n.issuer,s=n.serialNumber;if(n.certificate){var o=n.certificate;typeof o=="string"&&(o=Te.pki.certificateFromPem(o)),i=o.issuer.attributes,s=o.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Te.pki.privateKeyFromPem(a));var l=n.digestAlgorithm||Te.pki.oids.sha1;switch(l){case Te.pki.oids.sha1:case Te.pki.oids.sha256:case Te.pki.oids.sha384:case Te.pki.oids.sha512:case Te.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var c=n.authenticatedAttributes||[];if(c.length>0){for(var u=!1,f=!1,p=0;p<c.length;++p){var g=c[p];if(!u&&g.type===Te.pki.oids.contentType){if(u=!0,f)break;continue}if(!f&&g.type===Te.pki.oids.messageDigest){if(f=!0,u)break;continue}}if(!u||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:a,version:1,issuer:i,serialNumber:s,digestAlgorithm:l,signatureAlgorithm:Te.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(Te.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof Te.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=Te.util.encodeUtf8(e.content)),n.detached?e.detachedContent=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var s=t();r(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Te.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var s=e.signers[i],o=s.digestAlgorithm;o in n||(n[o]=Te.md[Te.pki.oids[o]].create()),s.authenticatedAttributes.length===0?s.md=n[o]:s.md=Te.md[Te.pki.oids[o]].create()}e.digestAlgorithmIdentifiers=[];for(var o in n)e.digestAlgorithmIdentifiers.push(G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(o).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=G.derToOid(e.contentInfo.value[0].value),o=G.toDer(i);o.getByte(),G.getBerValueLength(o),o=o.getBytes();for(var a in n)n[a].start().update(o);for(var l=new Date,c=0;c<e.signers.length;++c){var u=e.signers[c];if(u.authenticatedAttributes.length===0){if(s!==Te.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{u.authenticatedAttributesAsn1=G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=G.create(G.Class.UNIVERSAL,G.Type.SET,!0,[]),p=0;p<u.authenticatedAttributes.length;++p){var g=u.authenticatedAttributes[p];g.type===Te.pki.oids.messageDigest?g.value=n[u.digestAlgorithm].digest():g.type===Te.pki.oids.signingTime&&(g.value||(g.value=l)),f.value.push(eH(g)),u.authenticatedAttributesAsn1.value.push(eH(g))}o=G.toDer(f).getBytes(),u.md.start().update(o)}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=jXe(e.signers)}};Co.createEncryptedData=function(){var e=null;return e={type:Te.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Te.pki.oids["aes256-CBC"]},fromAsn1:function(t){tH(e,t,Co.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),zue(e)}},e};Co.createEnvelopedData=function(){var e=null;return e={type:Te.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Te.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=tH(e,t,Co.asn1.envelopedDataValidator);e.recipients=KXe(r.recipientInfos.value)},toAsn1:function(){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.type).getBytes()),G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(e.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,zXe(e.recipients)),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,ZXe(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case Te.pki.oids.rsaEncryption:case Te.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=Te.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}zue(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Te.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,s;switch(r){case Te.pki.oids["aes128-CBC"]:n=16,i=16,s=Te.aes.createEncryptionCipher;break;case Te.pki.oids["aes192-CBC"]:n=24,i=16,s=Te.aes.createEncryptionCipher;break;case Te.pki.oids["aes256-CBC"]:n=32,i=16,s=Te.aes.createEncryptionCipher;break;case Te.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=Te.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=Te.util.createBuffer(Te.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=Te.util.createBuffer(Te.random.getBytes(i));var o=s(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var a=0;a<e.recipients.length;++a){var l=e.recipients[a];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case Te.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}},e};function $Xe(e){var t={},r=[];if(!G.validate(e,Co.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:Te.pki.RDNAttributesAsArray(t.issuer),serialNumber:Te.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:G.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function YXe(e){return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(e.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[Te.pki.distinguishedNameToAsn1({attributes:e.issuer}),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Te.util.hexToBytes(e.serialNumber))]),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.encryptedContent.algorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")]),G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function KXe(e){for(var t=[],r=0;r<e.length;++r)t.push($Xe(e[r]));return t}function zXe(e){for(var t=[],r=0;r<e.length;++r)t.push(YXe(e[r]));return t}function JXe(e){var t=G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,G.integerToDer(e.version).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[Te.pki.distinguishedNameToAsn1({attributes:e.issuer}),G.create(G.Class.UNIVERSAL,G.Type.INTEGER,!1,Te.util.hexToBytes(e.serialNumber))]),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.digestAlgorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.signatureAlgorithm).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.NULL,!1,"")])),t.value.push(G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=G.create(G.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(eH(i))}t.value.push(r)}return t}function jXe(e){for(var t=[],r=0;r<e.length;++r)t.push(JXe(e[r]));return t}function eH(e){var t;if(e.type===Te.pki.oids.contentType)t=G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.value).getBytes());else if(e.type===Te.pki.oids.messageDigest)t=G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Te.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);isNaN(s)?i.length===13?i=G.utcTimeToDate(i):i=G.generalizedTimeToDate(i):i=new Date(s)}i>=r&&i<n?t=G.create(G.Class.UNIVERSAL,G.Type.UTCTIME,!1,G.dateToUtcTime(i)):t=G.create(G.Class.UNIVERSAL,G.Type.GENERALIZEDTIME,!1,G.dateToGeneralizedTime(i))}return G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.type).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SET,!0,[t])])}function ZXe(e){return[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(Te.pki.oids.data).getBytes()),G.create(G.Class.UNIVERSAL,G.Type.SEQUENCE,!0,[G.create(G.Class.UNIVERSAL,G.Type.OID,!1,G.oidToDer(e.algorithm).getBytes()),e.parameter?G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),G.create(G.Class.CONTEXT_SPECIFIC,0,!0,[G.create(G.Class.UNIVERSAL,G.Type.OCTETSTRING,!1,e.content.getBytes())])]}function tH(e,t,r){var n={},i=[];if(!G.validate(t,r,n,i)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var o=G.derToOid(n.contentType);if(o!==Te.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(Te.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==G.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[l].value}else a=n.encryptedContent;e.encryptedContent={algorithm:G.derToOid(n.encAlgorithm),parameter:Te.util.createBuffer(n.encParameter.value),content:Te.util.createBuffer(a)}}if(n.content){var a="";if(Te.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==G.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[l].value}else a=n.content;e.content=Te.util.createBuffer(a)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function zue(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Te.pki.oids["aes128-CBC"]:case Te.pki.oids["aes192-CBC"]:case Te.pki.oids["aes256-CBC"]:t=Te.aes.createDecryptionCipher(e.encryptedContent.key);break;case Te.pki.oids.desCBC:case Te.pki.oids["des-EDE3-CBC"]:t=Te.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var Xue=_((ikt,Zue)=>{"use strict";var ki=Jt();Sh();uy();WT();gy();Nr();var hR=Zue.exports=ki.ssh=ki.ssh||{};hR.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+r+`\r
`;var o=ki.util.createBuffer();Ey(o,n),Qu(o,e.e),Qu(o,e.n);var a=ki.util.encode64(o.bytes(),64),l=Math.floor(a.length/66)+1;s+="Public-Lines: "+l+`\r
`,s+=a;var c=ki.util.createBuffer();Qu(c,e.d),Qu(c,e.p),Qu(c,e.q),Qu(c,e.qInv);var u;if(!t)u=ki.util.encode64(c.bytes(),64);else{var f=c.length()+16-1;f-=f%16;var p=fR(c.bytes());p.truncate(p.length()-f+c.length()),c.putBuffer(p);var g=ki.util.createBuffer();g.putBuffer(fR("\0\0\0\0",t)),g.putBuffer(fR("\0\0\0",t));var m=ki.aes.createEncryptionCipher(g.truncate(8),"CBC");m.start(ki.util.createBuffer().fillWithByte(0,16)),m.update(c.copy()),m.finish();var y=m.output;y.truncate(16),u=ki.util.encode64(y.bytes(),64)}l=Math.floor(u.length/66)+1,s+=`\r
Private-Lines: `+l+`\r
`,s+=u;var v=fR("putty-private-key-file-mac-key",t),C=ki.util.createBuffer();Ey(C,n),Ey(C,i),Ey(C,r),C.putInt32(o.length()),C.putBuffer(o),C.putInt32(c.length()),C.putBuffer(c);var E=ki.hmac.create();return E.start("sha1",v),E.update(C.bytes()),s+=`\r
Private-MAC: `+E.digest().toHex()+`\r
`,s};hR.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=ki.util.createBuffer();return Ey(n,r),Qu(n,e.e),Qu(n,e.n),r+" "+ki.util.encode64(n.bytes())+" "+t};hR.privateKeyToOpenSSH=function(e,t){return t?ki.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):ki.pki.privateKeyToPem(e)};hR.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||ki.md.md5.create(),n="ssh-rsa",i=ki.util.createBuffer();Ey(i,n),Qu(i,e.e),Qu(i,e.n),r.start(),r.update(i.getBytes());var s=r.digest();if(t.encoding==="hex"){var o=s.toHex();return t.delimiter?o.match(/.{2}/g).join(t.delimiter):o}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};function Qu(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=ki.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function Ey(e,t){e.putInt32(t.length),e.putString(t)}function fR(){for(var e=ki.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var tde=_((skt,ede)=>{"use strict";ede.exports=Jt();Sh();Cue();Tc();PT();e_();Lue();uy();Vue();$ue();Kue();I3();KT();qp();b3();T3();jue();k3();_3();h3();tR();Il();m3();Xue();L3();Nr()});var ide=_(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.convert=zp.Format=void 0;var d_=tde(),Qh;(function(e){e.der="der",e.pem="pem",e.txt="txt",e.asn1="asn1",e.x509="x509",e.fingerprint="fingerprint"})(Qh=zp.Format||(zp.Format={}));function rde(e){var t=d_.pki.pemToDer(e),r=d_.asn1,n=r.fromDer(t.data.toString("binary")).value[0].value,i=n[0],s=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,o=n.slice(s);return{serial:o[0],issuer:o[2],valid:o[3],subject:o[4]}}function XXe(e){var t=rde(e),r=t.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=t.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(e)].join(`
`)}function nde(e,t){switch(t){case Qh.der:return d_.pki.pemToDer(e);case Qh.pem:return e;case Qh.txt:return XXe(e);case Qh.asn1:return rde(e);case Qh.fingerprint:var r=d_.md.sha1.create(),n=nde(e,Qh.der);return r.update(n.getBytes()),r.digest().toHex();case Qh.x509:return d_.pki.certificateFromPem(e);default:throw new Error("unknown format ".concat(t))}}zp.convert=nde});var ude=_(Xo=>{"use strict";var Nh=Xo&&Xo.__assign||function(){return Nh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Nh.apply(this,arguments)},gR=Xo&&Xo.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.convert=Xo.Format=Xo.addToGlobalAgent=Xo.get=void 0;var rH=require("https"),eet=require("tls"),sde=require("child_process"),ode=Ule(),jd=ide();Object.defineProperty(Xo,"Format",{enumerable:!0,get:function(){return jd.Format}});Object.defineProperty(Xo,"convert",{enumerable:!0,get:function(){return jd.convert}});var ade=process.platform==="darwin",lde=rH.globalAgent,mR={keychain:"all",unique:!0,excludeBundled:!0,format:jd.Format.pem};function cde(e){if(e===void 0&&(e=mR),!ade)return[];e=Nh(Nh({},mR),e);var t=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(e.keychain==="all"||e.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",s=(0,sde.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(t).map(function(c){return c.trim()});n=gR(gR([],n,!0),s,!0)}if(e.keychain==="all"||e.keychain==="current"){var o=(0,sde.spawnSync)("/usr/bin/security",r).stdout.toString().split(t).map(function(c){return c.trim()});n=gR(gR([],n,!0),o,!0)}if(e.unique||e.excludeBundled){var a=n.map(function(c){return(0,jd.convert)(c,jd.Format.fingerprint)}),l=e.excludeBundled?eet.rootCertificates.map(function(c){return(0,jd.convert)(c,jd.Format.fingerprint)}):[];n=n.filter(function(c,u){var f=a[u];return!(e.unique&&u!==a.indexOf(f)||e.excludeBundled&&l.includes(f))})}return n.map(function(c){return(0,jd.convert)(c,e.format)})}Xo.get=cde;var pR=lde.options.ca,tet=function(e){if(e===void 0&&(e=mR),!!ade){var t;Array.isArray(pR)?t=Array.from(pR):t=typeof pR<"u"?[pR]:[],cde(Nh(Nh(Nh({},mR),e),{format:jd.Format.pem,excludeBundled:!1})).forEach(function(r){return t.push(r)}),lde.options.ca=t,rH.Agent=function(r){return function(n){var i=typeof n<"u"?Nh({},n):{};return typeof i.ca>"u"&&(i.ca=t),r.call(this,i)}}(rH.Agent),(0,ode.setGlobalDispatcher)(new ode.Agent({connect:{ca:t}}))}};Xo.addToGlobalAgent=tet});var Ade=_((Nkt,mde)=>{"use strict";function iet(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}mde.exports=iet});var vde=_((Pkt,yde)=>{"use strict";var set=oh(),oet=function(){try{var e=set(Object,"defineProperty");return e({},"",{}),e}catch{}}();yde.exports=oet});var oH=_((Lkt,bde)=>{"use strict";var Cde=vde();function aet(e,t,r){t=="__proto__"&&Cde?Cde(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}bde.exports=aet});var aH=_((Ukt,Ede)=>{"use strict";var cet=oH(),uet=RB(),det=Object.prototype,fet=det.hasOwnProperty;function het(e,t,r){var n=e[t];(!(fet.call(e,t)&&uet(n,r))||r===void 0&&!(t in e))&&cet(e,t,r)}Ede.exports=het});var f_=_((Okt,_de)=>{"use strict";var get=aH(),pet=oH();function met(e,t,r,n){var i=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=n?n(r[a],e[a],a,r,e):void 0;l===void 0&&(l=e[a]),i?pet(r,a,l):get(r,a,l)}return r}_de.exports=met});var wde=_((qkt,xde)=>{"use strict";var Aet=f_(),yet=UB();function vet(e,t){return e&&Aet(t,yet(t),e)}xde.exports=vet});var Ide=_((Vkt,Sde)=>{"use strict";function Cet(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}Sde.exports=Cet});var Dde=_((Hkt,Bde)=>{"use strict";var bet=wd(),Eet=LB(),_et=Ide(),xet=Object.prototype,wet=xet.hasOwnProperty;function Iet(e){if(!bet(e))return _et(e);var t=Eet(e),r=[];for(var n in e)n=="constructor"&&(t||!wet.call(e,n))||r.push(n);return r}Bde.exports=Iet});var bR=_((Wkt,Tde)=>{"use strict";var Bet=wO(),Det=Dde(),Tet=IO();function Ret(e){return Tet(e)?Bet(e,!0):Det(e)}Tde.exports=Ret});var kde=_((Gkt,Rde)=>{"use strict";var ket=f_(),Met=bR();function Fet(e,t){return e&&ket(t,Met(t),e)}Rde.exports=Fet});var Pde=_((h_,xy)=>{"use strict";var Qet=hl(),Nde=typeof h_=="object"&&h_&&!h_.nodeType&&h_,Mde=Nde&&typeof xy=="object"&&xy&&!xy.nodeType&&xy,Net=Mde&&Mde.exports===Nde,Fde=Net?Qet.Buffer:void 0,Qde=Fde?Fde.allocUnsafe:void 0;function Pet(e,t){if(t)return e.slice();var r=e.length,n=Qde?Qde(r):new e.constructor(r);return e.copy(n),n}xy.exports=Pet});var Ude=_(($kt,Lde)=>{"use strict";function Let(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}Lde.exports=Let});var qde=_((Ykt,Ode)=>{"use strict";var Uet=f_(),Oet=FB();function qet(e,t){return Uet(e,Oet(e),t)}Ode.exports=qet});var lH=_((Kkt,Vde)=>{"use strict";var Vet=SO(),Het=Vet(Object.getPrototypeOf,Object);Vde.exports=Het});var cH=_((zkt,Hde)=>{"use strict";var Wet=vO(),Get=lH(),$et=FB(),Yet=bO(),Ket=Object.getOwnPropertySymbols,zet=Ket?function(e){for(var t=[];e;)Wet(t,$et(e)),e=Get(e);return t}:Yet;Hde.exports=zet});var Gde=_((Jkt,Wde)=>{"use strict";var Jet=f_(),jet=cH();function Zet(e,t){return Jet(e,jet(e),t)}Wde.exports=Zet});var Yde=_((jkt,$de)=>{"use strict";var Xet=CO(),ett=cH(),ttt=bR();function rtt(e){return Xet(e,ttt,ett)}$de.exports=rtt});var zde=_((Zkt,Kde)=>{"use strict";var ntt=Object.prototype,itt=ntt.hasOwnProperty;function stt(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&itt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}Kde.exports=stt});var ER=_((Xkt,jde)=>{"use strict";var Jde=AO();function ott(e){var t=new e.constructor(e.byteLength);return new Jde(t).set(new Jde(e)),t}jde.exports=ott});var Xde=_((eMt,Zde)=>{"use strict";var att=ER();function ltt(e,t){var r=t?att(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}Zde.exports=ltt});var tfe=_((tMt,efe)=>{"use strict";var ctt=/\w*$/;function utt(e){var t=new e.constructor(e.source,ctt.exec(e));return t.lastIndex=e.lastIndex,t}efe.exports=utt});var ofe=_((rMt,sfe)=>{"use strict";var rfe=XC(),nfe=rfe?rfe.prototype:void 0,ife=nfe?nfe.valueOf:void 0;function dtt(e){return ife?Object(ife.call(e)):{}}sfe.exports=dtt});var lfe=_((nMt,afe)=>{"use strict";var ftt=ER();function htt(e,t){var r=t?ftt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}afe.exports=htt});var ufe=_((iMt,cfe)=>{"use strict";var gtt=ER(),ptt=Xde(),mtt=tfe(),Att=ofe(),ytt=lfe(),vtt="[object Boolean]",Ctt="[object Date]",btt="[object Map]",Ett="[object Number]",_tt="[object RegExp]",xtt="[object Set]",wtt="[object String]",Stt="[object Symbol]",Itt="[object ArrayBuffer]",Btt="[object DataView]",Dtt="[object Float32Array]",Ttt="[object Float64Array]",Rtt="[object Int8Array]",ktt="[object Int16Array]",Mtt="[object Int32Array]",Ftt="[object Uint8Array]",Qtt="[object Uint8ClampedArray]",Ntt="[object Uint16Array]",Ptt="[object Uint32Array]";function Ltt(e,t,r){var n=e.constructor;switch(t){case Itt:return gtt(e);case vtt:case Ctt:return new n(+e);case Btt:return ptt(e,r);case Dtt:case Ttt:case Rtt:case ktt:case Mtt:case Ftt:case Qtt:case Ntt:case Ptt:return ytt(e,r);case btt:return new n;case Ett:case wtt:return new n(e);case _tt:return mtt(e);case xtt:return new n;case Stt:return Att(e)}}cfe.exports=Ltt});var hfe=_((sMt,ffe)=>{"use strict";var Utt=wd(),dfe=Object.create,Ott=function(){function e(){}return function(t){if(!Utt(t))return{};if(dfe)return dfe(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();ffe.exports=Ott});var pfe=_((oMt,gfe)=>{"use strict";var qtt=hfe(),Vtt=lH(),Htt=LB();function Wtt(e){return typeof e.constructor=="function"&&!Htt(e)?qtt(Vtt(e)):{}}gfe.exports=Wtt});var Afe=_((aMt,mfe)=>{"use strict";var Gtt=Kb(),$tt=Wf(),Ytt="[object Map]";function Ktt(e){return $tt(e)&&Gtt(e)==Ytt}mfe.exports=Ktt});var bfe=_((lMt,Cfe)=>{"use strict";var ztt=Afe(),Jtt=NB(),yfe=PB(),vfe=yfe&&yfe.isMap,jtt=vfe?Jtt(vfe):ztt;Cfe.exports=jtt});var _fe=_((cMt,Efe)=>{"use strict";var Ztt=Kb(),Xtt=Wf(),ert="[object Set]";function trt(e){return Xtt(e)&&Ztt(e)==ert}Efe.exports=trt});var Ife=_((uMt,Sfe)=>{"use strict";var rrt=_fe(),nrt=NB(),xfe=PB(),wfe=xfe&&xfe.isSet,irt=wfe?nrt(wfe):rrt;Sfe.exports=irt});var kfe=_((dMt,Rfe)=>{"use strict";var srt=pO(),ort=Ade(),art=aH(),lrt=wde(),crt=kde(),urt=Pde(),drt=Ude(),frt=qde(),hrt=Gde(),grt=BO(),prt=Yde(),mrt=Kb(),Art=zde(),yrt=ufe(),vrt=pfe(),Crt=Wb(),brt=QB(),Ert=bfe(),_rt=wd(),xrt=Ife(),wrt=UB(),Srt=bR(),Irt=1,Brt=2,Drt=4,Bfe="[object Arguments]",Trt="[object Array]",Rrt="[object Boolean]",krt="[object Date]",Mrt="[object Error]",Dfe="[object Function]",Frt="[object GeneratorFunction]",Qrt="[object Map]",Nrt="[object Number]",Tfe="[object Object]",Prt="[object RegExp]",Lrt="[object Set]",Urt="[object String]",Ort="[object Symbol]",qrt="[object WeakMap]",Vrt="[object ArrayBuffer]",Hrt="[object DataView]",Wrt="[object Float32Array]",Grt="[object Float64Array]",$rt="[object Int8Array]",Yrt="[object Int16Array]",Krt="[object Int32Array]",zrt="[object Uint8Array]",Jrt="[object Uint8ClampedArray]",jrt="[object Uint16Array]",Zrt="[object Uint32Array]",xn={};xn[Bfe]=xn[Trt]=xn[Vrt]=xn[Hrt]=xn[Rrt]=xn[krt]=xn[Wrt]=xn[Grt]=xn[$rt]=xn[Yrt]=xn[Krt]=xn[Qrt]=xn[Nrt]=xn[Tfe]=xn[Prt]=xn[Lrt]=xn[Urt]=xn[Ort]=xn[zrt]=xn[Jrt]=xn[jrt]=xn[Zrt]=!0;xn[Mrt]=xn[Dfe]=xn[qrt]=!1;function _R(e,t,r,n,i,s){var o,a=t&Irt,l=t&Brt,c=t&Drt;if(r&&(o=i?r(e,n,i,s):r(e)),o!==void 0)return o;if(!_rt(e))return e;var u=Crt(e);if(u){if(o=Art(e),!a)return drt(e,o)}else{var f=mrt(e),p=f==Dfe||f==Frt;if(brt(e))return urt(e,a);if(f==Tfe||f==Bfe||p&&!i){if(o=l||p?{}:vrt(e),!a)return l?hrt(e,crt(o,e)):frt(e,lrt(o,e))}else{if(!xn[f])return i?e:{};o=yrt(e,f,a)}}s||(s=new srt);var g=s.get(e);if(g)return g;s.set(e,o),xrt(e)?e.forEach(function(v){o.add(_R(v,t,r,v,e,s))}):Ert(e)&&e.forEach(function(v,C){o.set(C,_R(v,t,r,C,e,s))});var m=c?l?prt:grt:l?Srt:wrt,y=u?void 0:m(e);return ort(y||e,function(v,C){y&&(C=v,v=e[C]),art(o,C,_R(v,t,r,C,e,s))}),o}Rfe.exports=_R});var Ffe=_((fMt,Mfe)=>{"use strict";var Xrt=kfe(),ent=1,tnt=4;function rnt(e){return Xrt(e,ent|tnt)}Mfe.exports=rnt});var ea=_((hMt,Qfe)=>{"use strict";var uH=class e extends Error{constructor(t){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${t.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,e)}};Qfe.exports=e=>{if(e.length>2)throw new uH(e);function t(n={}){this.options=n}t.prototype.transform=e;function r(n){return new t(n)}return r.Format=t,r}});var Ufe=_((gMt,Lfe)=>{"use strict";var Pfe={};Lfe.exports=Pfe;var Nfe={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(Nfe).forEach(function(e){var t=Nfe[e],r=Pfe[e]=[];r.open="\x1B["+t[0]+"m",r.close="\x1B["+t[1]+"m"})});var qfe=_((pMt,Ofe)=>{"use strict";Ofe.exports=function(e,t){t=t||process.argv||[];var r=t.indexOf("--"),n=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(n+e);return i!==-1&&(r===-1?!0:i<r)}});var Hfe=_((mMt,Vfe)=>{"use strict";var nnt=require("os"),Mc=qfe(),bo=process.env,wy=void 0;Mc("no-color")||Mc("no-colors")||Mc("color=false")?wy=!1:(Mc("color")||Mc("colors")||Mc("color=true")||Mc("color=always"))&&(wy=!0);"FORCE_COLOR"in bo&&(wy=bo.FORCE_COLOR.length===0||parseInt(bo.FORCE_COLOR,10)!==0);function int(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function snt(e){if(wy===!1)return 0;if(Mc("color=16m")||Mc("color=full")||Mc("color=truecolor"))return 3;if(Mc("color=256"))return 2;if(e&&!e.isTTY&&wy!==!0)return 0;var t=wy?1:0;if(process.platform==="win32"){var r=nnt.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in bo)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in bo})||bo.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in bo)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(bo.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in bo){var n=parseInt((bo.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(bo.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(bo.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(bo.TERM)||"COLORTERM"in bo?1:(bo.TERM==="dumb",t)}function dH(e){var t=snt(e);return int(t)}Vfe.exports={supportsColor:dH,stdout:dH(process.stdout),stderr:dH(process.stderr)}});var Gfe=_((AMt,Wfe)=>{"use strict";Wfe.exports=function(t,r){var n="";t=t||"Run the trap, drop the bass",t=t.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return t.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var Yfe=_((yMt,$fe)=>{"use strict";$fe.exports=function(t,r){t=t||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(l){var c=Math.floor(Math.random()*l);return c}function o(l){var c=!1;return i.filter(function(u){c=u===l}),c}function a(l,c){var u="",f,p;c=c||{},c.up=typeof c.up<"u"?c.up:!0,c.mid=typeof c.mid<"u"?c.mid:!0,c.down=typeof c.down<"u"?c.down:!0,c.size=typeof c.size<"u"?c.size:"maxi",l=l.split("");for(p in l)if(!o(p)){switch(u=u+l[p],f={up:0,down:0,mid:0},c.size){case"mini":f.up=s(8),f.mid=s(2),f.down=s(8);break;case"maxi":f.up=s(16)+3,f.mid=s(4)+1,f.down=s(64)+3;break;default:f.up=s(8)+1,f.mid=s(6)/2,f.down=s(8)+1;break}var g=["up","mid","down"];for(var m in g)for(var y=g[m],v=0;v<=f[y];v++)c[y]&&(u=u+n[y][s(n[y].length)])}return u}return a(t,r)}});var zfe=_((vMt,Kfe)=>{"use strict";Kfe.exports=function(e){return function(t,r,n){if(t===" ")return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}});var jfe=_((CMt,Jfe)=>{"use strict";Jfe.exports=function(e){return function(t,r,n){return r%2===0?t:e.inverse(t)}}});var Xfe=_((bMt,Zfe)=>{"use strict";Zfe.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:e[t[n++%t.length]](r)}}});var the=_((EMt,ehe)=>{"use strict";ehe.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}});var ahe=_((xMt,ohe)=>{"use strict";var hr={};ohe.exports=hr;hr.themes={};var ont=require("util"),Zp=hr.styles=Ufe(),nhe=Object.defineProperties,ant=new RegExp(/[\r\n]+/g);hr.supportsColor=Hfe().supportsColor;typeof hr.enabled>"u"&&(hr.enabled=hr.supportsColor()!==!1);hr.enable=function(){hr.enabled=!0};hr.disable=function(){hr.enabled=!1};hr.stripColors=hr.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var _Mt=hr.stylize=function(t,r){if(!hr.enabled)return t+"";var n=Zp[r];return!n&&r in hr?hr[r](t):n.open+t+n.close},lnt=/[|\\{}()[\]^$+*?.]/g,cnt=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(lnt,"\\$&")};function ihe(e){var t=function r(){return dnt.apply(r,arguments)};return t._styles=e,t.__proto__=unt,t}var she=function(){var e={};return Zp.grey=Zp.gray,Object.keys(Zp).forEach(function(t){Zp[t].closeRe=new RegExp(cnt(Zp[t].close),"g"),e[t]={get:function(){return ihe(this._styles.concat(t))}}}),e}(),unt=nhe(function(){},she);function dnt(){var e=Array.prototype.slice.call(arguments),t=e.map(function(o){return o!=null&&o.constructor===String?o:ont.inspect(o)}).join(" ");if(!hr.enabled||!t)return t;for(var r=t.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=Zp[n[i]];t=s.open+t.replace(s.closeRe,s.open)+s.close,r&&(t=t.replace(ant,function(o){return s.close+o+s.open}))}return t}hr.setTheme=function(e){if(typeof e=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var t in e)(function(r){hr[r]=function(n){if(typeof e[r]=="object"){var i=n;for(var s in e[r])i=hr[e[r][s]](i);return i}return hr[e[r]](n)}})(t)};function fnt(){var e={};return Object.keys(she).forEach(function(t){e[t]={get:function(){return ihe([t])}}}),e}var hnt=function(t,r){var n=r.split("");return n=n.map(t),n.join("")};hr.trap=Gfe();hr.zalgo=Yfe();hr.maps={};hr.maps.america=zfe()(hr);hr.maps.zebra=jfe()(hr);hr.maps.rainbow=Xfe()(hr);hr.maps.random=the()(hr);for(rhe in hr.maps)(function(e){hr[e]=function(t){return hnt(hr.maps[e],t)}})(rhe);var rhe;nhe(hr,fnt())});var fH=_((wMt,lhe)=>{"use strict";var gnt=ahe();lhe.exports=gnt});var che=_(hH=>{"use strict";hH.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};hH.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var uhe=_(gH=>{"use strict";gH.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};gH.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var dhe=_(pH=>{"use strict";pH.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};pH.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var fhe=_(xR=>{"use strict";Object.defineProperty(xR,"cli",{value:che()});Object.defineProperty(xR,"npm",{value:uhe()});Object.defineProperty(xR,"syslog",{value:dhe()})});var Fi=_(g_=>{"use strict";Object.defineProperty(g_,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(g_,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(g_,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(g_,"configs",{value:fhe()})});var IR=_((RMt,SR)=>{"use strict";var yH=fH(),{LEVEL:mH,MESSAGE:AH}=Fi();yH.enabled=!0;var hhe=/\s+/,wR=class e{constructor(t={}){t.colors&&this.addColors(t.colors),this.options=t}static addColors(t){let r=Object.keys(t).reduce((n,i)=>(n[i]=hhe.test(t[i])?t[i].split(hhe):t[i],n),{});return e.allColors=Object.assign({},e.allColors||{},r),e.allColors}addColors(t){return e.addColors(t)}colorize(t,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(e.allColors[t]))return yH[e.allColors[t]](n);for(let i=0,s=e.allColors[t].length;i<s;i++)n=yH[e.allColors[t][i]](n);return n}transform(t,r){return r.all&&typeof t[AH]=="string"&&(t[AH]=this.colorize(t[mH],t.level,t[AH])),(r.level||r.all||!r.message)&&(t.level=this.colorize(t[mH],t.level)),(r.all||r.message)&&(t.message=this.colorize(t[mH],t.level,t.message)),t}};SR.exports=e=>new wR(e);SR.exports.Colorizer=SR.exports.Format=wR});var phe=_((kMt,ghe)=>{"use strict";var{Colorizer:pnt}=IR();ghe.exports=e=>(pnt.addColors(e.colors||e),e)});var Ahe=_((MMt,mhe)=>{"use strict";var mnt=ea();mhe.exports=mnt(e=>(e.message=`	${e.message}`,e))});var Che=_((FMt,vhe)=>{"use strict";var Ant=ea(),{LEVEL:yhe,MESSAGE:vH}=Fi();vhe.exports=Ant((e,{stack:t,cause:r})=>{if(e instanceof Error){let i=Object.assign({},e,{level:e.level,[yhe]:e[yhe]||e.level,message:e.message,[vH]:e[vH]||e.message});return t&&(i.stack=e.stack),r&&(i.cause=e.cause),i}if(!(e.message instanceof Error))return e;let n=e.message;return Object.assign(e,n),e.message=n.message,e[vH]=n.message,t&&(e.stack=n.stack),r&&(e.cause=n.cause),e})});var bH=_((QMt,DR)=>{"use strict";var{configs:ynt,LEVEL:bhe,MESSAGE:CH}=Fi(),BR=class e{constructor(t={levels:ynt.npm.levels}){this.paddings=e.paddingForLevels(t.levels,t.filler),this.options=t}static getLongestLevel(t){let r=Object.keys(t).map(n=>n.length);return Math.max(...r)}static paddingForLevel(t,r,n){let i=n+1-t.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(t,r=" "){let n=e.getLongestLevel(t);return Object.keys(t).reduce((i,s)=>(i[s]=e.paddingForLevel(s,r,n),i),{})}transform(t,r){return t.message=`${this.paddings[t[bhe]]}${t.message}`,t[CH]&&(t[CH]=`${this.paddings[t[bhe]]}${t[CH]}`),t}};DR.exports=e=>new BR(e);DR.exports.Padder=DR.exports.Format=BR});var Ehe=_((NMt,EH)=>{"use strict";var{Colorizer:vnt}=IR(),{Padder:Cnt}=bH(),{configs:bnt,MESSAGE:Ent}=Fi(),TR=class{constructor(t={}){t.levels||(t.levels=bnt.cli.levels),this.colorizer=new vnt(t),this.padder=new Cnt(t),this.options=t}transform(t,r){return this.colorizer.transform(this.padder.transform(t,r),r),t[Ent]=`${t.level}:${t.message}`,t}};EH.exports=e=>new TR(e);EH.exports.Format=TR});var xhe=_((PMt,_H)=>{"use strict";var _nt=ea();function _he(e){if(e.every(xnt))return t=>{let r=t;for(let n=0;n<e.length;n++)if(r=e[n].transform(r,e[n].options),!r)return!1;return r}}function xnt(e){if(typeof e.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}_H.exports=(...e)=>{let t=_nt(_he(e)),r=t();return r.Format=t.Format,r};_H.exports.cascade=_he});var p_=_((IH,Bhe)=>{"use strict";var{hasOwnProperty:RR}=Object.prototype,em=SH();em.configure=SH;em.stringify=em;em.default=em;IH.stringify=em;IH.configure=SH;Bhe.exports=em;var wnt=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function Lh(e){return e.length<5e3&&!wnt.test(e)?`"${e}"`:JSON.stringify(e)}function xH(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}var Snt=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function wH(e){return Snt.call(e)!==void 0&&e.length!==0}function whe(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let s=1;s<r;s++)i+=`${t}"${s}":${n}${e[s]}`;return i}function Int(e){if(RR.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function She(e,t){let r;if(RR.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function Ihe(e,t){let r;if(RR.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function Xp(e){return e===1?"1 item":`${e} items`}function Bnt(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function Dnt(e){if(RR.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function SH(e){e={...e};let t=Dnt(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=Int(e),n=She(e,"bigint"),i=She(e,"deterministic"),s=Ihe(e,"maximumDepth"),o=Ihe(e,"maximumBreadth");function a(p,g,m,y,v,C){let E=g[p];switch(typeof E=="object"&&E!==null&&typeof E.toJSON=="function"&&(E=E.toJSON(p)),E=y.call(g,p,E),typeof E){case"string":return Lh(E);case"object":{if(E===null)return"null";if(m.indexOf(E)!==-1)return r;let w="",B=",",R=C;if(Array.isArray(E)){if(E.length===0)return"[]";if(s<m.length+1)return'"[Array]"';m.push(E),v!==""&&(C+=v,w+=`
${C}`,B=`,
${C}`);let U=Math.min(E.length,o),ce=0;for(;ce<U-1;ce++){let Q=a(String(ce),E,m,y,v,C);w+=Q!==void 0?Q:"null",w+=B}let Ie=a(String(ce),E,m,y,v,C);if(w+=Ie!==void 0?Ie:"null",E.length-1>o){let Q=E.length-o-1;w+=`${B}"... ${Xp(Q)} not stringified"`}return v!==""&&(w+=`
${R}`),m.pop(),`[${w}]`}let N=Object.keys(E),W=N.length;if(W===0)return"{}";if(s<m.length+1)return'"[Object]"';let Z="",te="";v!==""&&(C+=v,B=`,
${C}`,Z=" ");let Y=Math.min(W,o);i&&!wH(E)&&(N=xH(N)),m.push(E);for(let U=0;U<Y;U++){let ce=N[U],Ie=a(ce,E,m,y,v,C);Ie!==void 0&&(w+=`${te}${Lh(ce)}:${Z}${Ie}`,te=B)}if(W>o){let U=W-o;w+=`${te}"...":${Z}"${Xp(U)} not stringified"`,te=B}return v!==""&&te.length>1&&(w=`
${C}${w}
${R}`),m.pop(),`{${w}}`}case"number":return isFinite(E)?String(E):t?t(E):"null";case"boolean":return E===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(E);default:return t?t(E):void 0}}function l(p,g,m,y,v,C){switch(typeof g=="object"&&g!==null&&typeof g.toJSON=="function"&&(g=g.toJSON(p)),typeof g){case"string":return Lh(g);case"object":{if(g===null)return"null";if(m.indexOf(g)!==-1)return r;let E=C,w="",B=",";if(Array.isArray(g)){if(g.length===0)return"[]";if(s<m.length+1)return'"[Array]"';m.push(g),v!==""&&(C+=v,w+=`
${C}`,B=`,
${C}`);let W=Math.min(g.length,o),Z=0;for(;Z<W-1;Z++){let Y=l(String(Z),g[Z],m,y,v,C);w+=Y!==void 0?Y:"null",w+=B}let te=l(String(Z),g[Z],m,y,v,C);if(w+=te!==void 0?te:"null",g.length-1>o){let Y=g.length-o-1;w+=`${B}"... ${Xp(Y)} not stringified"`}return v!==""&&(w+=`
${E}`),m.pop(),`[${w}]`}m.push(g);let R="";v!==""&&(C+=v,B=`,
${C}`,R=" ");let N="";for(let W of y){let Z=l(W,g[W],m,y,v,C);Z!==void 0&&(w+=`${N}${Lh(W)}:${R}${Z}`,N=B)}return v!==""&&N.length>1&&(w=`
${C}${w}
${E}`),m.pop(),`{${w}}`}case"number":return isFinite(g)?String(g):t?t(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return t?t(g):void 0}}function c(p,g,m,y,v){switch(typeof g){case"string":return Lh(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(g=g.toJSON(p),typeof g!="object")return c(p,g,m,y,v);if(g===null)return"null"}if(m.indexOf(g)!==-1)return r;let C=v;if(Array.isArray(g)){if(g.length===0)return"[]";if(s<m.length+1)return'"[Array]"';m.push(g),v+=y;let Z=`
${v}`,te=`,
${v}`,Y=Math.min(g.length,o),U=0;for(;U<Y-1;U++){let Ie=c(String(U),g[U],m,y,v);Z+=Ie!==void 0?Ie:"null",Z+=te}let ce=c(String(U),g[U],m,y,v);if(Z+=ce!==void 0?ce:"null",g.length-1>o){let Ie=g.length-o-1;Z+=`${te}"... ${Xp(Ie)} not stringified"`}return Z+=`
${C}`,m.pop(),`[${Z}]`}let E=Object.keys(g),w=E.length;if(w===0)return"{}";if(s<m.length+1)return'"[Object]"';v+=y;let B=`,
${v}`,R="",N="",W=Math.min(w,o);wH(g)&&(R+=whe(g,B,o),E=E.slice(g.length),W-=g.length,N=B),i&&(E=xH(E)),m.push(g);for(let Z=0;Z<W;Z++){let te=E[Z],Y=c(te,g[te],m,y,v);Y!==void 0&&(R+=`${N}${Lh(te)}: ${Y}`,N=B)}if(w>o){let Z=w-o;R+=`${N}"...": "${Xp(Z)} not stringified"`,N=B}return N!==""&&(R=`
${v}${R}
${C}`),m.pop(),`{${R}}`}case"number":return isFinite(g)?String(g):t?t(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return t?t(g):void 0}}function u(p,g,m){switch(typeof g){case"string":return Lh(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(g=g.toJSON(p),typeof g!="object")return u(p,g,m);if(g===null)return"null"}if(m.indexOf(g)!==-1)return r;let y="";if(Array.isArray(g)){if(g.length===0)return"[]";if(s<m.length+1)return'"[Array]"';m.push(g);let B=Math.min(g.length,o),R=0;for(;R<B-1;R++){let W=u(String(R),g[R],m);y+=W!==void 0?W:"null",y+=","}let N=u(String(R),g[R],m);if(y+=N!==void 0?N:"null",g.length-1>o){let W=g.length-o-1;y+=`,"... ${Xp(W)} not stringified"`}return m.pop(),`[${y}]`}let v=Object.keys(g),C=v.length;if(C===0)return"{}";if(s<m.length+1)return'"[Object]"';let E="",w=Math.min(C,o);wH(g)&&(y+=whe(g,",",o),v=v.slice(g.length),w-=g.length,E=","),i&&(v=xH(v)),m.push(g);for(let B=0;B<w;B++){let R=v[B],N=u(R,g[R],m);N!==void 0&&(y+=`${E}${Lh(R)}:${N}`,E=",")}if(C>o){let B=C-o;y+=`${E}"...":"${Xp(B)} not stringified"`}return m.pop(),`{${y}}`}case"number":return isFinite(g)?String(g):t?t(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return t?t(g):void 0}}function f(p,g,m){if(arguments.length>1){let y="";if(typeof m=="number"?y=" ".repeat(Math.min(m,10)):typeof m=="string"&&(y=m.slice(0,10)),g!=null){if(typeof g=="function")return a("",{"":p},[],g,y,"");if(Array.isArray(g))return l("",p,[],Bnt(g),y,"")}if(y.length!==0)return c("",p,[],y,"")}return u("",p,[])}return f}});var BH=_((LMt,Dhe)=>{"use strict";var Tnt=ea(),{MESSAGE:Rnt}=Fi(),knt=p_();function Mnt(e,t){return typeof t=="bigint"?t.toString():t}Dhe.exports=Tnt((e,t)=>{let r=knt.configure(t);return e[Rnt]=r(e,t.replacer||Mnt,t.space),e})});var Rhe=_((UMt,The)=>{"use strict";var Fnt=ea();The.exports=Fnt((e,t)=>t.message?(e.message=`[${t.label}] ${e.message}`,e):(e.label=t.label,e))});var Mhe=_((OMt,khe)=>{"use strict";var Qnt=ea(),{MESSAGE:Nnt}=Fi(),Pnt=p_();khe.exports=Qnt(e=>{let t={};return e.message&&(t["@message"]=e.message,delete e.message),e.timestamp&&(t["@timestamp"]=e.timestamp,delete e.timestamp),t["@fields"]=e,e[Nnt]=Pnt(t),e})});var Qhe=_((qMt,Fhe)=>{"use strict";var Lnt=ea();function Unt(e,t,r){let n=t.reduce((s,o)=>(s[o]=e[o],delete e[o],s),{}),i=Object.keys(e).reduce((s,o)=>(s[o]=e[o],delete e[o],s),{});return Object.assign(e,n,{[r]:i}),e}function Ont(e,t,r){return e[r]=t.reduce((n,i)=>(n[i]=e[i],delete e[i],n),{}),e}Fhe.exports=Lnt((e,t={})=>{let r="metadata";t.key&&(r=t.key);let n=[];return!t.fillExcept&&!t.fillWith&&(n.push("level"),n.push("message")),t.fillExcept&&(n=t.fillExcept),n.length>0?Unt(e,n,r):t.fillWith?Ont(e,t.fillWith,r):e})});var MR=_((VMt,Nhe)=>{"use strict";var Sy=1e3,Iy=Sy*60,By=Iy*60,tm=By*24,qnt=tm*7,Vnt=tm*365.25;Nhe.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Hnt(e);if(r==="number"&&isFinite(e))return t.long?Gnt(e):Wnt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Hnt(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Vnt;case"weeks":case"week":case"w":return r*qnt;case"days":case"day":case"d":return r*tm;case"hours":case"hour":case"hrs":case"hr":case"h":return r*By;case"minutes":case"minute":case"mins":case"min":case"m":return r*Iy;case"seconds":case"second":case"secs":case"sec":case"s":return r*Sy;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Wnt(e){var t=Math.abs(e);return t>=tm?Math.round(e/tm)+"d":t>=By?Math.round(e/By)+"h":t>=Iy?Math.round(e/Iy)+"m":t>=Sy?Math.round(e/Sy)+"s":e+"ms"}function Gnt(e){var t=Math.abs(e);return t>=tm?kR(e,t,tm,"day"):t>=By?kR(e,t,By,"hour"):t>=Iy?kR(e,t,Iy,"minute"):t>=Sy?kR(e,t,Sy,"second"):e+" ms"}function kR(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Lhe=_((m_,Phe)=>{"use strict";var $nt=ea(),Ynt=MR();Phe.exports=$nt(e=>{let t=+new Date;return m_.diff=t-(m_.prevTime||t),m_.prevTime=t,e.ms=`+${Ynt(m_.diff)}`,e})});var qhe=_((HMt,Ohe)=>{"use strict";var Knt=require("util").inspect,znt=ea(),{LEVEL:Jnt,MESSAGE:Uhe,SPLAT:jnt}=Fi();Ohe.exports=znt((e,t={})=>{let r=Object.assign({},e);return delete r[Jnt],delete r[Uhe],delete r[jnt],e[Uhe]=Knt(r,!1,t.depth||null,t.colorize),e})});var Vhe=_((WMt,QR)=>{"use strict";var{MESSAGE:Znt}=Fi(),FR=class{constructor(t){this.template=t}transform(t){return t[Znt]=this.template(t),t}};QR.exports=e=>new FR(e);QR.exports.Printf=QR.exports.Format=FR});var Ghe=_((GMt,Whe)=>{"use strict";var Xnt=ea(),{MESSAGE:Hhe}=Fi(),eit=p_();Whe.exports=Xnt(e=>{let t=eit(Object.assign({},e,{level:void 0,message:void 0,splat:void 0})),r=e.padding&&e.padding[e.level]||"";return t!=="{}"?e[Hhe]=`${e.level}:${r} ${e.message} ${t}`:e[Hhe]=`${e.level}:${r} ${e.message}`,e})});var Khe=_(($Mt,Yhe)=>{"use strict";var tit=require("util"),{SPLAT:$he}=Fi(),rit=/%[scdjifoO%]/g,nit=/%%/g,DH=class{constructor(t){this.options=t}_splat(t,r){let n=t.message,i=t[$he]||t.splat||[],s=n.match(nit),o=s&&s.length||0,l=r.length-o-i.length,c=l<0?i.splice(l,-1*l):[],u=c.length;if(u)for(let f=0;f<u;f++)Object.assign(t,c[f]);return t.message=tit.format(n,...i),t}transform(t){let r=t.message,n=t[$he]||t.splat;if(!n||!n.length)return t;let i=r&&r.match&&r.match(rit);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(t,s[a]);return t}return i?this._splat(t,i):t}};Yhe.exports=e=>new DH(e)});var Jhe=_((NR,zhe)=>{"use strict";(function(e,t){typeof NR=="object"&&typeof zhe<"u"?t(NR):typeof define=="function"&&define.amd?define(["exports"],t):t(e.fecha={})})(NR,function(e){"use strict";var t=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function l(z,ie){for(var Pe=[],dt=0,ve=z.length;dt<ve;dt++)Pe.push(z[dt].substr(0,ie));return Pe}var c=function(z){return function(ie,Pe){var dt=Pe[z].map(function(Rt){return Rt.toLowerCase()}),ve=dt.indexOf(ie.toLowerCase());return ve>-1?ve:null}};function u(z){for(var ie=[],Pe=1;Pe<arguments.length;Pe++)ie[Pe-1]=arguments[Pe];for(var dt=0,ve=ie;dt<ve.length;dt++){var Rt=ve[dt];for(var Zt in Rt)z[Zt]=Rt[Zt]}return z}var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],g=l(p,3),m=l(f,3),y={dayNamesShort:m,dayNames:f,monthNamesShort:g,monthNames:p,amPm:["am","pm"],DoFn:function(z){return z+["th","st","nd","rd"][z%10>3?0:(z-z%10!==10?1:0)*z%10]}},v=u({},y),C=function(z){return v=u(v,z)},E=function(z){return z.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},w=function(z,ie){for(ie===void 0&&(ie=2),z=String(z);z.length<ie;)z="0"+z;return z},B={D:function(z){return String(z.getDate())},DD:function(z){return w(z.getDate())},Do:function(z,ie){return ie.DoFn(z.getDate())},d:function(z){return String(z.getDay())},dd:function(z){return w(z.getDay())},ddd:function(z,ie){return ie.dayNamesShort[z.getDay()]},dddd:function(z,ie){return ie.dayNames[z.getDay()]},M:function(z){return String(z.getMonth()+1)},MM:function(z){return w(z.getMonth()+1)},MMM:function(z,ie){return ie.monthNamesShort[z.getMonth()]},MMMM:function(z,ie){return ie.monthNames[z.getMonth()]},YY:function(z){return w(String(z.getFullYear()),4).substr(2)},YYYY:function(z){return w(z.getFullYear(),4)},h:function(z){return String(z.getHours()%12||12)},hh:function(z){return w(z.getHours()%12||12)},H:function(z){return String(z.getHours())},HH:function(z){return w(z.getHours())},m:function(z){return String(z.getMinutes())},mm:function(z){return w(z.getMinutes())},s:function(z){return String(z.getSeconds())},ss:function(z){return w(z.getSeconds())},S:function(z){return String(Math.round(z.getMilliseconds()/100))},SS:function(z){return w(Math.round(z.getMilliseconds()/10),2)},SSS:function(z){return w(z.getMilliseconds(),3)},a:function(z,ie){return z.getHours()<12?ie.amPm[0]:ie.amPm[1]},A:function(z,ie){return z.getHours()<12?ie.amPm[0].toUpperCase():ie.amPm[1].toUpperCase()},ZZ:function(z){var ie=z.getTimezoneOffset();return(ie>0?"-":"+")+w(Math.floor(Math.abs(ie)/60)*100+Math.abs(ie)%60,4)},Z:function(z){var ie=z.getTimezoneOffset();return(ie>0?"-":"+")+w(Math.floor(Math.abs(ie)/60),2)+":"+w(Math.abs(ie)%60,2)}},R=function(z){return+z-1},N=[null,r],W=[null,o],Z=["isPm",o,function(z,ie){var Pe=z.toLowerCase();return Pe===ie.amPm[0]?0:Pe===ie.amPm[1]?1:null}],te=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(z){var ie=(z+"").match(/([+-]|\d\d)/gi);if(ie){var Pe=+ie[1]*60+parseInt(ie[2],10);return ie[0]==="+"?Pe:-Pe}return 0}],Y={D:["day",r],DD:["day",n],Do:["day",r+o,function(z){return parseInt(z,10)}],M:["month",r,R],MM:["month",n,R],YY:["year",n,function(z){var ie=new Date,Pe=+(""+ie.getFullYear()).substr(0,2);return+(""+(+z>68?Pe-1:Pe)+z)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(z){return+z*100}],SS:["millisecond",n,function(z){return+z*10}],SSS:["millisecond",i],d:N,dd:N,ddd:W,dddd:W,MMM:["month",o,c("monthNamesShort")],MMMM:["month",o,c("monthNames")],a:Z,A:Z,ZZ:te,Z:te},U={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ce=function(z){return u(U,z)},Ie=function(z,ie,Pe){if(ie===void 0&&(ie=U.default),Pe===void 0&&(Pe={}),typeof z=="number"&&(z=new Date(z)),Object.prototype.toString.call(z)!=="[object Date]"||isNaN(z.getTime()))throw new Error("Invalid Date pass to format");ie=U[ie]||ie;var dt=[];ie=ie.replace(a,function(Rt,Zt){return dt.push(Zt),"@@@"});var ve=u(u({},v),Pe);return ie=ie.replace(t,function(Rt){return B[Rt](z,ve)}),ie.replace(/@@@/g,function(){return dt.shift()})};function Q(z,ie,Pe){if(Pe===void 0&&(Pe={}),typeof ie!="string")throw new Error("Invalid format in fecha parse");if(ie=U[ie]||ie,z.length>1e3)return null;var dt=new Date,ve={year:dt.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Rt=[],Zt=[],tr=ie.replace(a,function(_t,hn){return Zt.push(E(hn)),"@@@"}),ue={},wr={};tr=E(tr).replace(t,function(_t){var hn=Y[_t],Dn=hn[0],Ii=hn[1],no=hn[3];if(ue[Dn])throw new Error("Invalid format. "+Dn+" specified twice in format");return ue[Dn]=!0,no&&(wr[no]=!0),Rt.push(hn),"("+Ii+")"}),Object.keys(wr).forEach(function(_t){if(!ue[_t])throw new Error("Invalid format. "+_t+" is required in specified format")}),tr=tr.replace(/@@@/g,function(){return Zt.shift()});var sr=z.match(new RegExp(tr,"i"));if(!sr)return null;for(var Hr=u(u({},v),Pe),Ge=1;Ge<sr.length;Ge++){var ln=Rt[Ge-1],Wr=ln[0],pr=ln[2],Ee=pr?pr(sr[Ge],Hr):+sr[Ge];if(Ee==null)return null;ve[Wr]=Ee}ve.isPm===1&&ve.hour!=null&&+ve.hour!=12?ve.hour=+ve.hour+12:ve.isPm===0&&+ve.hour==12&&(ve.hour=0);var Ur;if(ve.timezoneOffset==null){Ur=new Date(ve.year,ve.month,ve.day,ve.hour,ve.minute,ve.second,ve.millisecond);for(var he=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Ge=0,be=he.length;Ge<be;Ge++)if(ue[he[Ge][0]]&&ve[he[Ge][0]]!==Ur[he[Ge][1]]())return null}else if(Ur=new Date(Date.UTC(ve.year,ve.month,ve.day,ve.hour,ve.minute-ve.timezoneOffset,ve.second,ve.millisecond)),ve.month>11||ve.month<0||ve.day>31||ve.day<1||ve.hour>23||ve.hour<0||ve.minute>59||ve.minute<0||ve.second>59||ve.second<0)return null;return Ur}var se={format:Ie,parse:Q,defaultI18n:y,setGlobalDateI18n:C,setGlobalDateMasks:ce};e.assign=u,e.default=se,e.format=Ie,e.parse=Q,e.defaultI18n=y,e.setGlobalDateI18n=C,e.setGlobalDateMasks=ce,Object.defineProperty(e,"__esModule",{value:!0})})});var Zhe=_((YMt,jhe)=>{"use strict";var iit=Jhe(),sit=ea();jhe.exports=sit((e,t={})=>(t.format&&(e.timestamp=typeof t.format=="function"?t.format():iit.format(new Date,t.format)),e.timestamp||(e.timestamp=new Date().toISOString()),t.alias&&(e[t.alias]=e.timestamp),e))});var ege=_((KMt,Xhe)=>{"use strict";var TH=fH(),oit=ea(),{MESSAGE:RH}=Fi();Xhe.exports=oit((e,t)=>(t.level!==!1&&(e.level=TH.strip(e.level)),t.message!==!1&&(e.message=TH.strip(String(e.message))),t.raw!==!1&&e[RH]&&(e[RH]=TH.strip(String(e[RH]))),e))});var MH=_(kH=>{"use strict";var ait=kH.format=ea();kH.levels=phe();function Ds(e,t){Object.defineProperty(ait,e,{get(){return t()},configurable:!0})}Ds("align",function(){return Ahe()});Ds("errors",function(){return Che()});Ds("cli",function(){return Ehe()});Ds("combine",function(){return xhe()});Ds("colorize",function(){return IR()});Ds("json",function(){return BH()});Ds("label",function(){return Rhe()});Ds("logstash",function(){return Mhe()});Ds("metadata",function(){return Qhe()});Ds("ms",function(){return Lhe()});Ds("padLevels",function(){return bH()});Ds("prettyPrint",function(){return qhe()});Ds("printf",function(){return Vhe()});Ds("simple",function(){return Ghe()});Ds("splat",function(){return Khe()});Ds("timestamp",function(){return Zhe()});Ds("uncolorize",function(){return ege()})});var FH=_(PR=>{"use strict";var{format:tge}=require("util");PR.warn={deprecated(e){return()=>{throw new Error(tge("{ %s } was removed in winston@3.0.0.",e))}},useFormat(e){return()=>{throw new Error([tge("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(e,t,r){r.forEach(n=>{e[n]=PR.warn[t](n)})},forProperties(e,t,r){r.forEach(n=>{let i=PR.warn[t](n);Object.defineProperty(e,n,{get:i,set:i})})}}});var rge=_((jMt,lit)=>{lit.exports={name:"winston",description:"A logger for just about everything.",version:"3.11.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.4.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.5.0"},devDependencies:{"@babel/cli":"^7.17.0","@babel/core":"^7.17.2","@babel/preset-env":"^7.16.7","@dabh/eslint-config-populist":"^5.0.0","@types/node":"^20.3.1","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.9.0",hock:"^1.4.1",mocha:"8.1.3",nyc:"^15.1.0",rimraf:"^5.0.5",split2:"^4.1.0","std-mocks":"^1.0.1",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var ige=_((ZMt,nge)=>{"use strict";nge.exports=require("util").deprecate});var QH=_((XMt,sge)=>{"use strict";sge.exports=require("stream")});var PH=_((eFt,age)=>{"use strict";function cit(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(NH,this,e)):process.nextTick(NH,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!t&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(LR,r):(r._writableState.errorEmitted=!0,process.nextTick(oge,r,s)):process.nextTick(oge,r,s):t?(process.nextTick(LR,r),t(s)):process.nextTick(LR,r)}),this)}function oge(e,t){NH(e,t),LR(e)}function LR(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function uit(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function NH(e,t){e.emit("error",t)}function dit(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}age.exports={destroy:cit,undestroy:uit,errorOrDestroy:dit}});var Uh=_((tFt,uge)=>{"use strict";var cge={};function Ml(e,t,r){r||(r=Error);function n(s,o,a){return typeof t=="string"?t:t(s,o,a)}class i extends r{constructor(o,a,l){super(n(o,a,l))}}i.prototype.name=r.name,i.prototype.code=e,cge[e]=i}function lge(e,t){if(Array.isArray(e)){let r=e.length;return e=e.map(n=>String(n)),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:r===2?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}else return`of ${t} ${String(e)}`}function fit(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function hit(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function git(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Ml("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Ml("ERR_INVALID_ARG_TYPE",function(e,t,r){let n;typeof t=="string"&&fit(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";let i;if(hit(e," argument"))i=`The ${e} ${n} ${lge(t,"type")}`;else{let s=git(e,".")?"property":"argument";i=`The "${e}" ${s} ${n} ${lge(t,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);Ml("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ml("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Ml("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ml("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Ml("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ml("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ml("ERR_STREAM_WRITE_AFTER_END","write after end");Ml("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ml("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Ml("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");uge.exports.codes=cge});var LH=_((rFt,dge)=>{"use strict";var pit=Uh().codes.ERR_INVALID_OPT_VALUE;function mit(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function Ait(e,t,r,n){var i=mit(t,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new pit(s,i)}return Math.floor(i)}return e.objectMode?16:16*1024}dge.exports={getHighWaterMark:Ait}});var fge=_((nFt,UH)=>{"use strict";typeof Object.create=="function"?UH.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:UH.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var Dy=_((iFt,qH)=>{"use strict";try{if(OH=require("util"),typeof OH.inherits!="function")throw"";qH.exports=OH.inherits}catch{qH.exports=fge()}var OH});var yge=_((sFt,Age)=>{"use strict";function hge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hge(Object(r),!0).forEach(function(n){yit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hge(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yit(e,t,r){return t=mge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mge(n.key),n)}}function Cit(e,t,r){return t&&pge(e.prototype,t),r&&pge(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mge(e){var t=bit(e,"string");return typeof t=="symbol"?t:String(t)}function bit(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eit=require("buffer"),UR=Eit.Buffer,_it=require("util"),VH=_it.inspect,xit=VH&&VH.custom||"inspect";function wit(e,t,r){UR.prototype.copy.call(e,t,r)}Age.exports=function(){function e(){vit(this,e),this.head=null,this.tail=null,this.length=0}return Cit(e,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return UR.alloc(0);for(var n=UR.allocUnsafe(r>>>0),i=this.head,s=0;i;)wit(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=UR.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:xit,value:function(r,n){return VH(this,gge(gge({},n),{},{depth:0,customInspect:!1}))}}]),e}()});var bge=_((HH,Cge)=>{"use strict";var OR=require("buffer"),Nu=OR.Buffer;function vge(e,t){for(var r in e)t[r]=e[r]}Nu.from&&Nu.alloc&&Nu.allocUnsafe&&Nu.allocUnsafeSlow?Cge.exports=OR:(vge(OR,HH),HH.Buffer=rm);function rm(e,t,r){return Nu(e,t,r)}rm.prototype=Object.create(Nu.prototype);vge(Nu,rm);rm.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Nu(e,t,r)};rm.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Nu(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};rm.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Nu(e)};rm.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return OR.SlowBuffer(e)}});var $H=_(_ge=>{"use strict";var GH=bge().Buffer,Ege=GH.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Sit(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Iit(e){var t=Sit(e);if(typeof t!="string"&&(GH.isEncoding===Ege||!Ege(e)))throw new Error("Unknown encoding: "+e);return t||e}_ge.StringDecoder=A_;function A_(e){this.encoding=Iit(e);var t;switch(this.encoding){case"utf16le":this.text=Mit,this.end=Fit,t=4;break;case"utf8":this.fillLast=Tit,t=4;break;case"base64":this.text=Qit,this.end=Nit,t=3;break;default:this.write=Pit,this.end=Lit;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=GH.allocUnsafe(t)}A_.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};A_.prototype.end=kit;A_.prototype.text=Rit;A_.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function WH(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Bit(e,t,r){var n=t.length-1;if(n<r)return 0;var i=WH(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=WH(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=WH(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function Dit(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Tit(e){var t=this.lastTotal-this.lastNeed,r=Dit(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Rit(e,t){var r=Bit(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function kit(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function Mit(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Fit(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Qit(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Nit(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Pit(e){return e.toString(this.encoding)}function Lit(e){return e&&e.length?this.write(e):""}});var qR=_((aFt,Sge)=>{"use strict";var xge=Uh().codes.ERR_STREAM_PREMATURE_CLOSE;function Uit(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function Oit(){}function qit(e){return e.setHeader&&typeof e.abort=="function"}function wge(e,t,r){if(typeof t=="function")return wge(e,null,t);t||(t={}),r=Uit(r||Oit);var n=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,s=function(){e.writable||a()},o=e._writableState&&e._writableState.finished,a=function(){i=!1,o=!0,n||r.call(e)},l=e._readableState&&e._readableState.endEmitted,c=function(){n=!1,l=!0,i||r.call(e)},u=function(m){r.call(e,m)},f=function(){var m;if(n&&!l)return(!e._readableState||!e._readableState.ended)&&(m=new xge),r.call(e,m);if(i&&!o)return(!e._writableState||!e._writableState.ended)&&(m=new xge),r.call(e,m)},p=function(){e.req.on("finish",a)};return qit(e)?(e.on("complete",a),e.on("abort",f),e.req?p():e.on("request",p)):i&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",c),e.on("finish",a),t.error!==!1&&e.on("error",u),e.on("close",f),function(){e.removeListener("complete",a),e.removeListener("abort",f),e.removeListener("request",p),e.req&&e.req.removeListener("finish",a),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",a),e.removeListener("end",c),e.removeListener("error",u),e.removeListener("close",f)}}Sge.exports=wge});var Bge=_((lFt,Ige)=>{"use strict";var VR;function Oh(e,t,r){return t=Vit(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vit(e){var t=Hit(e,"string");return typeof t=="symbol"?t:String(t)}function Hit(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wit=qR(),qh=Symbol("lastResolve"),nm=Symbol("lastReject"),y_=Symbol("error"),HR=Symbol("ended"),im=Symbol("lastPromise"),YH=Symbol("handlePromise"),sm=Symbol("stream");function Vh(e,t){return{value:e,done:t}}function Git(e){var t=e[qh];if(t!==null){var r=e[sm].read();r!==null&&(e[im]=null,e[qh]=null,e[nm]=null,t(Vh(r,!1)))}}function $it(e){process.nextTick(Git,e)}function Yit(e,t){return function(r,n){e.then(function(){if(t[HR]){r(Vh(void 0,!0));return}t[YH](r,n)},n)}}var Kit=Object.getPrototypeOf(function(){}),zit=Object.setPrototypeOf((VR={get stream(){return this[sm]},next:function(){var t=this,r=this[y_];if(r!==null)return Promise.reject(r);if(this[HR])return Promise.resolve(Vh(void 0,!0));if(this[sm].destroyed)return new Promise(function(o,a){process.nextTick(function(){t[y_]?a(t[y_]):o(Vh(void 0,!0))})});var n=this[im],i;if(n)i=new Promise(Yit(n,this));else{var s=this[sm].read();if(s!==null)return Promise.resolve(Vh(s,!1));i=new Promise(this[YH])}return this[im]=i,i}},Oh(VR,Symbol.asyncIterator,function(){return this}),Oh(VR,"return",function(){var t=this;return new Promise(function(r,n){t[sm].destroy(null,function(i){if(i){n(i);return}r(Vh(void 0,!0))})})}),VR),Kit),Jit=function(t){var r,n=Object.create(zit,(r={},Oh(r,sm,{value:t,writable:!0}),Oh(r,qh,{value:null,writable:!0}),Oh(r,nm,{value:null,writable:!0}),Oh(r,y_,{value:null,writable:!0}),Oh(r,HR,{value:t._readableState.endEmitted,writable:!0}),Oh(r,YH,{value:function(s,o){var a=n[sm].read();a?(n[im]=null,n[qh]=null,n[nm]=null,s(Vh(a,!1))):(n[qh]=s,n[nm]=o)},writable:!0}),r));return n[im]=null,Wit(t,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[nm];s!==null&&(n[im]=null,n[qh]=null,n[nm]=null,s(i)),n[y_]=i;return}var o=n[qh];o!==null&&(n[im]=null,n[qh]=null,n[nm]=null,o(Vh(void 0,!0))),n[HR]=!0}),t.on("readable",$it.bind(null,n)),n};Ige.exports=Jit});var kge=_((cFt,Rge)=>{"use strict";function Dge(e,t,r,n,i,s,o){try{var a=e[s](o),l=a.value}catch(c){r(c);return}a.done?t(l):Promise.resolve(l).then(n,i)}function jit(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function o(l){Dge(s,n,i,o,a,"next",l)}function a(l){Dge(s,n,i,o,a,"throw",l)}o(void 0)})}}function Tge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zit(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tge(Object(r),!0).forEach(function(n){Xit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tge(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xit(e,t,r){return t=est(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function est(e){var t=tst(e,"string");return typeof t=="symbol"?t:String(t)}function tst(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rst=Uh().codes.ERR_INVALID_ARG_TYPE;function nst(e,t,r){var n;if(t&&typeof t.next=="function")n=t;else if(t&&t[Symbol.asyncIterator])n=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])n=t[Symbol.iterator]();else throw new rst("iterable",["Iterable"],t);var i=new e(Zit({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=jit(function*(){try{var l=yield n.next(),c=l.value,u=l.done;u?i.push(null):i.push(yield c)?o():s=!1}catch(f){i.destroy(f)}}),a.apply(this,arguments)}return i}Rge.exports=nst});var nW=_((dFt,Vge)=>{"use strict";Vge.exports=Lr;var Ty;Lr.ReadableState=Nge;var uFt=require("events").EventEmitter,Qge=function(t,r){return t.listeners(r).length},C_=QH(),WR=require("buffer").Buffer,ist=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function sst(e){return WR.from(e)}function ost(e){return WR.isBuffer(e)||e instanceof ist}var KH=require("util"),ir;KH&&KH.debuglog?ir=KH.debuglog("stream"):ir=function(){};var ast=yge(),tW=PH(),lst=LH(),cst=lst.getHighWaterMark,GR=Uh().codes,ust=GR.ERR_INVALID_ARG_TYPE,dst=GR.ERR_STREAM_PUSH_AFTER_EOF,fst=GR.ERR_METHOD_NOT_IMPLEMENTED,hst=GR.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ry,zH,JH;Dy()(Lr,C_);var v_=tW.errorOrDestroy,jH=["error","close","destroy","pause","resume"];function gst(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Nge(e,t,r){Ty=Ty||om(),e=e||{},typeof r!="boolean"&&(r=t instanceof Ty),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=cst(this,e,"readableHighWaterMark",r),this.buffer=new ast,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Ry||(Ry=$H().StringDecoder),this.decoder=new Ry(e.encoding),this.encoding=e.encoding)}function Lr(e){if(Ty=Ty||om(),!(this instanceof Lr))return new Lr(e);var t=this instanceof Ty;this._readableState=new Nge(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),C_.call(this)}Object.defineProperty(Lr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});Lr.prototype.destroy=tW.destroy;Lr.prototype._undestroy=tW.undestroy;Lr.prototype._destroy=function(e,t){t(e)};Lr.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=WR.from(e,t),t=""),n=!0),Pge(this,e,t,!1,n)};Lr.prototype.unshift=function(e){return Pge(this,e,null,!0,!1)};function Pge(e,t,r,n,i){ir("readableAddChunk",t);var s=e._readableState;if(t===null)s.reading=!1,Ast(e,s);else{var o;if(i||(o=pst(s,t)),o)v_(e,o);else if(s.objectMode||t&&t.length>0)if(typeof t!="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==WR.prototype&&(t=sst(t)),n)s.endEmitted?v_(e,new hst):ZH(e,s,t,!0);else if(s.ended)v_(e,new dst);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||t.length!==0?ZH(e,s,t,!1):eW(e,s)):ZH(e,s,t,!1)}else n||(s.reading=!1,eW(e,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function ZH(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&$R(e)),eW(e,t)}function pst(e,t){var r;return!ost(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new ust("chunk",["string","Buffer","Uint8Array"],t)),r}Lr.prototype.isPaused=function(){return this._readableState.flowing===!1};Lr.prototype.setEncoding=function(e){Ry||(Ry=$H().StringDecoder);var t=new Ry(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Mge=1073741824;function mst(e){return e>=Mge?e=Mge:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Fge(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=mst(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Lr.prototype.read=function(e){ir("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return ir("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?XH(this):$R(this),null;if(e=Fge(e,t),e===0&&t.ended)return t.length===0&&XH(this),null;var n=t.needReadable;ir("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,ir("length less than watermark",n)),t.ended||t.reading?(n=!1,ir("reading or ended",n)):n&&(ir("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Fge(r,t)));var i;return e>0?i=Oge(e,t):i=null,i===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&XH(this)),i!==null&&this.emit("data",i),i};function Ast(e,t){if(ir("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?$R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,Lge(e)))}}function $R(e){var t=e._readableState;ir("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(ir("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(Lge,e))}function Lge(e){var t=e._readableState;ir("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,rW(e)}function eW(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(yst,e,t))}function yst(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var r=t.length;if(ir("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}Lr.prototype._read=function(e){v_(this,new fst("_read()"))};Lr.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,ir("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,s=i?a:y;n.endEmitted?process.nextTick(s):r.once("end",s),e.on("unpipe",o);function o(v,C){ir("onunpipe"),v===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,u())}function a(){ir("onend"),e.end()}var l=vst(r);e.on("drain",l);var c=!1;function u(){ir("cleanup"),e.removeListener("close",g),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",f),c=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}r.on("data",f);function f(v){ir("ondata");var C=e.write(v);ir("dest.write",C),C===!1&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&qge(n.pipes,e)!==-1)&&!c&&(ir("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(v){ir("onerror",v),y(),e.removeListener("error",p),Qge(e,"error")===0&&v_(e,v)}gst(e,"error",p);function g(){e.removeListener("finish",m),y()}e.once("close",g);function m(){ir("onfinish"),e.removeListener("close",g),y()}e.once("finish",m);function y(){ir("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(ir("pipe resume"),r.resume()),e};function vst(e){return function(){var r=e._readableState;ir("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Qge(e,"data")&&(r.flowing=!0,rW(e))}}Lr.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=qge(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};Lr.prototype.on=function(e,t){var r=C_.prototype.on.call(this,e,t),n=this._readableState;return e==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):e==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ir("on readable",n.length,n.reading),n.length?$R(this):n.reading||process.nextTick(Cst,this)),r};Lr.prototype.addListener=Lr.prototype.on;Lr.prototype.removeListener=function(e,t){var r=C_.prototype.removeListener.call(this,e,t);return e==="readable"&&process.nextTick(Uge,this),r};Lr.prototype.removeAllListeners=function(e){var t=C_.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&process.nextTick(Uge,this),t};function Uge(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function Cst(e){ir("readable nexttick read 0"),e.read(0)}Lr.prototype.resume=function(){var e=this._readableState;return e.flowing||(ir("resume"),e.flowing=!e.readableListening,bst(this,e)),e.paused=!1,this};function bst(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(Est,e,t))}function Est(e,t){ir("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),rW(e),t.flowing&&!t.reading&&e.read(0)}Lr.prototype.pause=function(){return ir("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ir("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function rW(e){var t=e._readableState;for(ir("flow",t.flowing);t.flowing&&e.read()!==null;);}Lr.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(ir("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(ir("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=t.push(o);a||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(a){return function(){return e[a].apply(e,arguments)}}(i));for(var s=0;s<jH.length;s++)e.on(jH[s],this.emit.bind(this,jH[s]));return this._read=function(o){ir("wrapped _read",o),n&&(n=!1,e.resume())},this};typeof Symbol=="function"&&(Lr.prototype[Symbol.asyncIterator]=function(){return zH===void 0&&(zH=Bge()),zH(this)});Object.defineProperty(Lr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Lr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Lr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}});Lr._fromList=Oge;Object.defineProperty(Lr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Oge(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function XH(e){var t=e._readableState;ir("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(_st,t,e))}function _st(e,t){if(ir("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}typeof Symbol=="function"&&(Lr.from=function(e,t){return JH===void 0&&(JH=kge()),JH(Lr,e,t)});function qge(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var om=_((fFt,Wge)=>{"use strict";var xst=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Wge.exports=Pu;var Hge=nW(),sW=zR();Dy()(Pu,Hge);for(iW=xst(sW.prototype),YR=0;YR<iW.length;YR++)KR=iW[YR],Pu.prototype[KR]||(Pu.prototype[KR]=sW.prototype[KR]);var iW,KR,YR;function Pu(e){if(!(this instanceof Pu))return new Pu(e);Hge.call(this,e),sW.call(this,e),this.allowHalfOpen=!0,e&&(e.readable===!1&&(this.readable=!1),e.writable===!1&&(this.writable=!1),e.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",wst)))}Object.defineProperty(Pu.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Pu.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Pu.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function wst(){this._writableState.ended||process.nextTick(Sst,this)}function Sst(e){e.end()}Object.defineProperty(Pu.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})});var zR=_((hFt,Jge)=>{"use strict";Jge.exports=fi;function $ge(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Xst(t,e)}}var ky;fi.WritableState=E_;var Ist={deprecate:ige()},Yge=QH(),jR=require("buffer").Buffer,Bst=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Dst(e){return jR.from(e)}function Tst(e){return jR.isBuffer(e)||e instanceof Bst}var aW=PH(),Rst=LH(),kst=Rst.getHighWaterMark,Hh=Uh().codes,Mst=Hh.ERR_INVALID_ARG_TYPE,Fst=Hh.ERR_METHOD_NOT_IMPLEMENTED,Qst=Hh.ERR_MULTIPLE_CALLBACK,Nst=Hh.ERR_STREAM_CANNOT_PIPE,Pst=Hh.ERR_STREAM_DESTROYED,Lst=Hh.ERR_STREAM_NULL_VALUES,Ust=Hh.ERR_STREAM_WRITE_AFTER_END,Ost=Hh.ERR_UNKNOWN_ENCODING,My=aW.errorOrDestroy;Dy()(fi,Yge);function qst(){}function E_(e,t,r){ky=ky||om(),e=e||{},typeof r!="boolean"&&(r=t instanceof ky),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=kst(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Kst(t,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new $ge(this)}E_.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(E_.prototype,"buffer",{get:Ist.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var JR;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(JR=Function.prototype[Symbol.hasInstance],Object.defineProperty(fi,Symbol.hasInstance,{value:function(t){return JR.call(this,t)?!0:this!==fi?!1:t&&t._writableState instanceof E_}})):JR=function(t){return t instanceof this};function fi(e){ky=ky||om();var t=this instanceof ky;if(!t&&!JR.call(fi,this))return new fi(e);this._writableState=new E_(e,this,t),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Yge.call(this)}fi.prototype.pipe=function(){My(this,new Nst)};function Vst(e,t){var r=new Ust;My(e,r),process.nextTick(t,r)}function Hst(e,t,r,n){var i;return r===null?i=new Lst:typeof r!="string"&&!t.objectMode&&(i=new Mst("chunk",["string","Buffer"],r)),i?(My(e,i),process.nextTick(n,i),!1):!0}fi.prototype.write=function(e,t,r){var n=this._writableState,i=!1,s=!n.objectMode&&Tst(e);return s&&!jR.isBuffer(e)&&(e=Dst(e)),typeof t=="function"&&(r=t,t=null),s?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=qst),n.ending?Vst(this,r):(s||Hst(this,n,e,r))&&(n.pendingcb++,i=Gst(this,n,s,e,t,r)),i};fi.prototype.cork=function(){this._writableState.corked++};fi.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&Kge(this,e))};fi.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new Ost(t);return this._writableState.defaultEncoding=t,this};Object.defineProperty(fi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Wst(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=jR.from(t,r)),t}Object.defineProperty(fi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Gst(e,t,r,n,i,s){if(!r){var o=Wst(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else oW(e,t,!1,a,n,i,s);return l}function oW(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new Pst("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function $st(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(b_,e,t),e._writableState.errorEmitted=!0,My(e,n)):(i(n),e._writableState.errorEmitted=!0,My(e,n),b_(e,t))}function Yst(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Kst(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Qst;if(Yst(r),t)$st(e,r,n,t,i);else{var s=zge(r)||e.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Kge(e,r),n?process.nextTick(Gge,e,r,s,i):Gge(e,r,s,i)}}function Gge(e,t,r,n){r||zst(e,t),t.pendingcb--,n(),b_(e,t)}function zst(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Kge(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,oW(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new $ge(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback,f=t.objectMode?1:l.length;if(oW(e,t,!1,f,l,c,u),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}fi.prototype._write=function(e,t,r){r(new Fst("_write()"))};fi.prototype._writev=null;fi.prototype.end=function(e,t,r){var n=this._writableState;return typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||Zst(this,n,r),this};Object.defineProperty(fi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function zge(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Jst(e,t){e._final(function(r){t.pendingcb--,r&&My(e,r),t.prefinished=!0,e.emit("prefinish"),b_(e,t)})}function jst(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,process.nextTick(Jst,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function b_(e,t){var r=zge(t);if(r&&(jst(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function Zst(e,t,r){t.ending=!0,b_(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Xst(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}Object.defineProperty(fi.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});fi.prototype.destroy=aW.destroy;fi.prototype._undestroy=aW.undestroy;fi.prototype._destroy=function(e,t){t(e)}});var cW=_((gFt,Zge)=>{"use strict";var eot=require("util"),{LEVEL:lW}=Fi(),jge=Wh(),__=Zge.exports=function(t={}){if(jge.call(this,t),!t.transport||typeof t.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=t.transport,this.level=this.level||t.transport.level,this.handleExceptions=this.handleExceptions||t.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};eot.inherits(__,jge);__.prototype._write=function(t,r,n){if(this.silent||t.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[t[lW]])&&this.transport.log(t[lW],t.message,t,this._nop),n(null)};__.prototype._writev=function(t,r){for(let n=0;n<t.length;n++)this._accept(t[n])&&(this.transport.log(t[n].chunk[lW],t[n].chunk.message,t[n].chunk,this._nop),t[n].callback());return r(null)};__.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};__.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var Wh=_((pFt,uW)=>{"use strict";var tot=require("util"),Xge=zR(),{LEVEL:epe}=Fi(),x_=uW.exports=function(t={}){Xge.call(this,{objectMode:!0,highWaterMark:t.highWaterMark}),this.format=t.format,this.level=t.level,this.handleExceptions=t.handleExceptions,this.handleRejections=t.handleRejections,this.silent=t.silent,t.log&&(this.log=t.log),t.logv&&(this.logv=t.logv),t.close&&(this.close=t.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};tot.inherits(x_,Xge);x_.prototype._write=function(t,r,n){if(this.silent||t.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[t[epe]]){if(t&&!this.format)return this.log(t,n);let s,o;try{o=this.format.transform(Object.assign({},t),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};x_.prototype._writev=function(t,r){if(this.logv){let n=t.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<t.length;n++){if(!this._accept(t[n]))continue;if(t[n].chunk&&!this.format){this.log(t[n].chunk,t[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},t[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(t[n].callback(),i)throw r(null),i}else this.log(s,t[n].callback)}return r(null)};x_.prototype._accept=function(t){let r=t.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[epe]])&&(this.handleExceptions||r.exception!==!0))};x_.prototype._nop=function(){};uW.exports.LegacyTransportStream=cW()});var npe=_((AFt,rpe)=>{"use strict";var rot=require("os"),{LEVEL:tpe,MESSAGE:Fy}=Fi(),not=Wh();rpe.exports=class extends not{constructor(t={}){super(t),this.name=t.name||"console",this.stderrLevels=this._stringArrayToSet(t.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(t.consoleWarnLevels),this.eol=typeof t.eol=="string"?t.eol:rot.EOL,this.setMaxListeners(30)}log(t,r){if(setImmediate(()=>this.emit("logged",t)),this.stderrLevels[t[tpe]]){console._stderr?console._stderr.write(`${t[Fy]}${this.eol}`):console.error(t[Fy]),r&&r();return}else if(this.consoleWarnLevels[t[tpe]]){console._stderr?console._stderr.write(`${t[Fy]}${this.eol}`):console.warn(t[Fy]),r&&r();return}console._stdout?console._stdout.write(`${t[Fy]}${this.eol}`):console.log(t[Fy]),r&&r()}_stringArrayToSet(t,r){if(!t)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(t))throw new Error(r);return t.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var XR=_((ZR,ipe)=>{"use strict";Object.defineProperty(ZR,"__esModule",{value:!0});ZR.default=iot;function iot(e){return e&&typeof e.length=="number"&&e.length>=0&&e.length%1===0}ipe.exports=ZR.default});var ope=_((ek,spe)=>{"use strict";Object.defineProperty(ek,"__esModule",{value:!0});ek.default=function(e){return function(...t){var r=t.pop();return e.call(this,t,r)}};spe.exports=ek.default});var cpe=_(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.fallback=ape;Gh.wrap=lpe;var sot=Gh.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,oot=Gh.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,aot=Gh.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function ape(e){setTimeout(e,0)}function lpe(e){return(t,...r)=>e(()=>t(...r))}var w_;sot?w_=queueMicrotask:oot?w_=setImmediate:aot?w_=process.nextTick:w_=ape;Gh.default=lpe(w_)});var gpe=_((tk,hpe)=>{"use strict";Object.defineProperty(tk,"__esModule",{value:!0});tk.default=hot;var lot=ope(),cot=fpe(lot),uot=cpe(),dot=fpe(uot),fot=am();function fpe(e){return e&&e.__esModule?e:{default:e}}function hot(e){return(0,fot.isAsync)(e)?function(...t){let r=t.pop(),n=e.apply(this,t);return upe(n,r)}:(0,cot.default)(function(t,r){var n;try{n=e.apply(this,t)}catch(i){return r(i)}if(n&&typeof n.then=="function")return upe(n,r);r(null,n)})}function upe(e,t){return e.then(r=>{dpe(t,null,r)},r=>{dpe(t,r&&(r instanceof Error||r.message)?r:new Error(r))})}function dpe(e,t,r){try{e(t,r)}catch(n){(0,dot.default)(i=>{throw i},n)}}hpe.exports=tk.default});var am=_(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.isAsyncIterable=Zd.isAsyncGenerator=Zd.isAsync=void 0;var got=gpe(),pot=mot(got);function mot(e){return e&&e.__esModule?e:{default:e}}function ppe(e){return e[Symbol.toStringTag]==="AsyncFunction"}function Aot(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function yot(e){return typeof e[Symbol.asyncIterator]=="function"}function vot(e){if(typeof e!="function")throw new Error("expected a function");return ppe(e)?(0,pot.default)(e):e}Zd.default=vot;Zd.isAsync=ppe;Zd.isAsyncGenerator=Aot;Zd.isAsyncIterable=yot});var Qy=_((rk,mpe)=>{"use strict";Object.defineProperty(rk,"__esModule",{value:!0});rk.default=Cot;function Cot(e,t){if(t||(t=e.length),!t)throw new Error("arity is undefined");function r(...n){return typeof n[t-1]=="function"?e.apply(this,n):new Promise((i,s)=>{n[t-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},e.apply(this,n)})}return r}mpe.exports=rk.default});var ype=_((nk,Ape)=>{"use strict";Object.defineProperty(nk,"__esModule",{value:!0});var bot=XR(),Eot=dW(bot),_ot=am(),xot=dW(_ot),wot=Qy(),Sot=dW(wot);function dW(e){return e&&e.__esModule?e:{default:e}}nk.default=(0,Sot.default)((e,t,r)=>{var n=(0,Eot.default)(t)?[]:{};e(t,(i,s,o)=>{(0,xot.default)(i)((a,...l)=>{l.length<2&&([l]=l),n[s]=l,o(a)})},i=>r(i,n))},3);Ape.exports=nk.default});var fW=_((ik,vpe)=>{"use strict";Object.defineProperty(ik,"__esModule",{value:!0});ik.default=Iot;function Iot(e){function t(...r){if(e!==null){var n=e;e=null,n.apply(this,r)}}return Object.assign(t,e),t}vpe.exports=ik.default});var bpe=_((sk,Cpe)=>{"use strict";Object.defineProperty(sk,"__esModule",{value:!0});sk.default=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()};Cpe.exports=sk.default});var xpe=_((ok,_pe)=>{"use strict";Object.defineProperty(ok,"__esModule",{value:!0});ok.default=Qot;var Bot=XR(),Dot=Epe(Bot),Tot=bpe(),Rot=Epe(Tot);function Epe(e){return e&&e.__esModule?e:{default:e}}function kot(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}function Mot(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}function Fot(e){var t=e?Object.keys(e):[],r=-1,n=t.length;return function i(){var s=t[++r];return s==="__proto__"?i():r<n?{value:e[s],key:s}:null}}function Qot(e){if((0,Dot.default)(e))return kot(e);var t=(0,Rot.default)(e);return t?Mot(t):Fot(e)}_pe.exports=ok.default});var hW=_((ak,wpe)=>{"use strict";Object.defineProperty(ak,"__esModule",{value:!0});ak.default=Not;function Not(e){return function(...t){if(e===null)throw new Error("Callback was already called.");var r=e;e=null,r.apply(this,t)}}wpe.exports=ak.default});var ck=_((lk,Spe)=>{"use strict";Object.defineProperty(lk,"__esModule",{value:!0});var Pot={};lk.default=Pot;Spe.exports=lk.default});var Bpe=_((uk,Ipe)=>{"use strict";Object.defineProperty(uk,"__esModule",{value:!0});uk.default=qot;var Lot=ck(),Uot=Oot(Lot);function Oot(e){return e&&e.__esModule?e:{default:e}}function qot(e,t,r,n){let i=!1,s=!1,o=!1,a=0,l=0;function c(){a>=t||o||i||(o=!0,e.next().then(({value:p,done:g})=>{if(!(s||i)){if(o=!1,g){i=!0,a<=0&&n(null);return}a++,r(p,l,u),l++,c()}}).catch(f))}function u(p,g){if(a-=1,!s){if(p)return f(p);if(p===!1){i=!0,s=!0;return}if(g===Uot.default||i&&a<=0)return i=!0,n(null);c()}}function f(p){s||(o=!1,i=!0,n(p))}c()}Ipe.exports=uk.default});var kpe=_((dk,Rpe)=>{"use strict";Object.defineProperty(dk,"__esModule",{value:!0});var Vot=fW(),Hot=S_(Vot),Wot=xpe(),Got=S_(Wot),$ot=hW(),Yot=S_($ot),Dpe=am(),Kot=Bpe(),Tpe=S_(Kot),zot=ck(),Jot=S_(zot);function S_(e){return e&&e.__esModule?e:{default:e}}dk.default=e=>(t,r,n)=>{if(n=(0,Hot.default)(n),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return n(null);if((0,Dpe.isAsyncGenerator)(t))return(0,Tpe.default)(t,e,r,n);if((0,Dpe.isAsyncIterable)(t))return(0,Tpe.default)(t[Symbol.asyncIterator](),e,r,n);var i=(0,Got.default)(t),s=!1,o=!1,a=0,l=!1;function c(f,p){if(!o)if(a-=1,f)s=!0,n(f);else if(f===!1)s=!0,o=!0;else{if(p===Jot.default||s&&a<=0)return s=!0,n(null);l||u()}}function u(){for(l=!0;a<e&&!s;){var f=i();if(f===null){s=!0,a<=0&&n(null);return}a+=1,r(f.value,f.key,(0,Yot.default)(c))}l=!1}u()};Rpe.exports=dk.default});var pW=_((fk,Mpe)=>{"use strict";Object.defineProperty(fk,"__esModule",{value:!0});var jot=kpe(),Zot=gW(jot),Xot=am(),eat=gW(Xot),tat=Qy(),rat=gW(tat);function gW(e){return e&&e.__esModule?e:{default:e}}function nat(e,t,r,n){return(0,Zot.default)(t)(e,(0,eat.default)(r),n)}fk.default=(0,rat.default)(nat,4);Mpe.exports=fk.default});var Npe=_((hk,Qpe)=>{"use strict";Object.defineProperty(hk,"__esModule",{value:!0});var iat=pW(),sat=Fpe(iat),oat=Qy(),aat=Fpe(oat);function Fpe(e){return e&&e.__esModule?e:{default:e}}function lat(e,t,r){return(0,sat.default)(e,1,t,r)}hk.default=(0,aat.default)(lat,3);Qpe.exports=hk.default});var Upe=_((gk,Lpe)=>{"use strict";Object.defineProperty(gk,"__esModule",{value:!0});gk.default=hat;var cat=ype(),uat=Ppe(cat),dat=Npe(),fat=Ppe(dat);function Ppe(e){return e&&e.__esModule?e:{default:e}}function hat(e,t){return(0,uat.default)(fat.default,e,t)}Lpe.exports=gk.default});var mW=_((CFt,qpe)=>{"use strict";qpe.exports=Xd;var pk=Uh().codes,gat=pk.ERR_METHOD_NOT_IMPLEMENTED,pat=pk.ERR_MULTIPLE_CALLBACK,mat=pk.ERR_TRANSFORM_ALREADY_TRANSFORMING,Aat=pk.ERR_TRANSFORM_WITH_LENGTH_0,mk=om();Dy()(Xd,mk);function yat(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new pat);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Xd(e){if(!(this instanceof Xd))return new Xd(e);mk.call(this,e),this._transformState={afterTransform:yat.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",vat)}function vat(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){Ope(e,t,r)}):Ope(this,null,null)}Xd.prototype.push=function(e,t){return this._transformState.needTransform=!1,mk.prototype.push.call(this,e,t)};Xd.prototype._transform=function(e,t,r){r(new gat("_transform()"))};Xd.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Xd.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Xd.prototype._destroy=function(e,t){mk.prototype._destroy.call(this,e,function(r){t(r)})};function Ope(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Aat;if(e._transformState.transforming)throw new mat;return e.push(null)}});var Wpe=_((bFt,Hpe)=>{"use strict";Hpe.exports=I_;var Vpe=mW();Dy()(I_,Vpe);function I_(e){if(!(this instanceof I_))return new I_(e);Vpe.call(this,e)}I_.prototype._transform=function(e,t,r){r(null,e)}});var zpe=_((EFt,Kpe)=>{"use strict";var AW;function Cat(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Ype=Uh().codes,bat=Ype.ERR_MISSING_ARGS,Eat=Ype.ERR_STREAM_DESTROYED;function Gpe(e){if(e)throw e}function _at(e){return e.setHeader&&typeof e.abort=="function"}function xat(e,t,r,n){n=Cat(n);var i=!1;e.on("close",function(){i=!0}),AW===void 0&&(AW=qR()),AW(e,{readable:t,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,_at(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(o||new Eat("pipe"))}}}function $pe(e){e()}function wat(e,t){return e.pipe(t)}function Sat(e){return!e.length||typeof e[e.length-1]!="function"?Gpe:e.pop()}function Iat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Sat(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new bat("streams");var i,s=t.map(function(o,a){var l=a<t.length-1,c=a>0;return xat(o,l,c,function(u){i||(i=u),u&&s.forEach($pe),!l&&(s.forEach($pe),n(i))})});return t.reduce(wat)}Kpe.exports=Iat});var Ny=_((Fl,D_)=>{"use strict";var B_=require("stream");process.env.READABLE_STREAM==="disable"&&B_?(D_.exports=B_.Readable,Object.assign(D_.exports,B_),D_.exports.Stream=B_):(Fl=D_.exports=nW(),Fl.Stream=B_||Fl,Fl.Readable=Fl,Fl.Writable=zR(),Fl.Duplex=om(),Fl.Transform=mW(),Fl.PassThrough=Wpe(),Fl.finished=qR(),Fl.pipeline=zpe())});var xW=_((_Ft,jpe)=>{"use strict";var Py=[],T_=[],yW=function(){};function CW(e){return~Py.indexOf(e)?!1:(Py.push(e),!0)}function bW(e){yW=e}function Bat(e){for(var t=[],r=0;r<Py.length;r++){if(Py[r].async){t.push(Py[r]);continue}if(Py[r](e))return!0}return t.length?new Promise(function(i){Promise.all(t.map(function(o){return o(e)})).then(function(o){i(o.some(Boolean))})}):!1}function EW(e){return~T_.indexOf(e)?!1:(T_.push(e),!0)}function vW(){yW.apply(yW,arguments)}function Jpe(e){for(var t=0;t<T_.length;t++)e=T_[t].apply(T_[t],arguments);return e}function _W(e,t){var r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e}function Dat(e){return e.enabled=!1,e.modify=EW,e.set=bW,e.use=CW,_W(function(){return!1},e)}function Tat(e){function t(){var r=Array.prototype.slice.call(arguments,0);return vW.call(vW,e,Jpe(r,e)),!0}return e.enabled=!0,e.modify=EW,e.set=bW,e.use=CW,_W(t,e)}jpe.exports=function(t){return t.introduce=_W,t.enabled=Bat,t.process=Jpe,t.modify=EW,t.write=vW,t.nope=Dat,t.yep=Tat,t.set=bW,t.use=CW,t}});var Xpe=_((xFt,Zpe)=>{"use strict";var Rat=xW(),kat=Rat(function e(t,r){return r=r||{},r.namespace=t,r.prod=!0,r.dev=!1,r.force||e.force?e.yep(r):e.nope(r)});Zpe.exports=kat});var tme=_((wFt,eme)=>{"use strict";eme.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var nme=_((SFt,rme)=>{"use strict";rme.exports=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}});var ome=_((IFt,sme)=>{"use strict";var Mat=nme(),Fat=Array.prototype.concat,Qat=Array.prototype.slice,ime=sme.exports=function(t){for(var r=[],n=0,i=t.length;n<i;n++){var s=t[n];Mat(s)?r=Fat.call(r,Qat.call(s)):r.push(s)}return r};ime.wrap=function(e){return function(){return e(ime(arguments))}}});var ume=_((BFt,cme)=>{"use strict";var R_=tme(),k_=ome(),ame=Object.hasOwnProperty,lme=Object.create(null);for(Ak in R_)ame.call(R_,Ak)&&(lme[R_[Ak]]=Ak);var Ak,Pa=cme.exports={to:{},get:{}};Pa.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=Pa.get.hsl(e),n="hsl";break;case"hwb":r=Pa.get.hwb(e),n="hwb";break;default:r=Pa.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};Pa.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,l,c;if(a=e.match(r)){for(c=a[2],a=a[1],l=0;l<3;l++){var u=l*2;o[l]=parseInt(a.slice(u,u+2),16)}c&&(o[3]=parseInt(c,16)/255)}else if(a=e.match(t)){for(a=a[1],c=a[3],l=0;l<3;l++)o[l]=parseInt(a[l]+a[l],16);c&&(o[3]=parseInt(c+c,16)/255)}else if(a=e.match(n)){for(l=0;l<3;l++)o[l]=parseInt(a[l+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=e.match(i)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(a[l+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=e.match(s))?a[1]==="transparent"?[0,0,0,0]:ame.call(R_,a[1])?(o=R_[a[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=$h(o[l],0,255);return o[3]=$h(o[3],0,1),o};Pa.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=$h(parseFloat(r[2]),0,100),o=$h(parseFloat(r[3]),0,100),a=$h(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};Pa.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=$h(parseFloat(r[2]),0,100),o=$h(parseFloat(r[3]),0,100),a=$h(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};Pa.to.hex=function(){var e=k_(arguments);return"#"+yk(e[0])+yk(e[1])+yk(e[2])+(e[3]<1?yk(Math.round(e[3]*255)):"")};Pa.to.rgb=function(){var e=k_(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Pa.to.rgb.percent=function(){var e=k_(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};Pa.to.hsl=function(){var e=k_(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Pa.to.hwb=function(){var e=k_(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Pa.to.keyword=function(e){return lme[e.slice(0,3)]};function $h(e,t,r){return Math.min(Math.max(t,e),r)}function yk(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}});var fme=_((DFt,dme)=>{"use strict";dme.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var wW=_((TFt,mme)=>{"use strict";var lm=fme(),pme={};for(vk in lm)lm.hasOwnProperty(vk)&&(pme[lm[vk]]=vk);var vk,Ke=mme.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(Eo in Ke)if(Ke.hasOwnProperty(Eo)){if(!("channels"in Ke[Eo]))throw new Error("missing channels property: "+Eo);if(!("labels"in Ke[Eo]))throw new Error("missing channel labels property: "+Eo);if(Ke[Eo].labels.length!==Ke[Eo].channels)throw new Error("channel and label counts mismatch: "+Eo);hme=Ke[Eo].channels,gme=Ke[Eo].labels,delete Ke[Eo].channels,delete Ke[Eo].labels,Object.defineProperty(Ke[Eo],"channels",{value:hme}),Object.defineProperty(Ke[Eo],"labels",{value:gme})}var hme,gme,Eo;Ke.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=s-i,a,l,c;return s===i?a=0:t===s?a=(r-n)/o:r===s?a=2+(n-t)/o:n===s&&(a=4+(t-r)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(i+s)/2,s===i?l=0:c<=.5?l=o/(s+i):l=o/(2-s-i),[a,l*100,c*100]};Ke.rgb.hsv=function(e){var t,r,n,i,s,o=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),f=function(p){return(c-p)/6/u+1/2};return u===0?i=s=0:(s=u/c,t=f(o),r=f(a),n=f(l),o===c?i=n-r:a===c?i=1/3+t-n:l===c&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]};Ke.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],i=Ke.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,s*100,n*100]};Ke.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i,s,o,a;return a=Math.min(1-t,1-r,1-n),i=(1-t-a)/(1-a)||0,s=(1-r-a)/(1-a)||0,o=(1-n-a)/(1-a)||0,[i*100,s*100,o*100,a*100]};function Nat(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}Ke.rgb.keyword=function(e){var t=pme[e];if(t)return t;var r=1/0,n;for(var i in lm)if(lm.hasOwnProperty(i)){var s=lm[i],o=Nat(e,s);o<r&&(r=o,n=i)}return n};Ke.keyword.rgb=function(e){return lm[e]};Ke.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=t*.4124+r*.3576+n*.1805,s=t*.2126+r*.7152+n*.0722,o=t*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};Ke.rgb.lab=function(e){var t=Ke.rgb.xyz(e),r=t[0],n=t[1],i=t[2],s,o,a;return r/=95.047,n/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=116*n-16,o=500*(r-n),a=200*(n-i),[s,o,a]};Ke.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,i,s,o,a,l;if(r===0)return l=n*255,[l,l,l];n<.5?s=n*(1+r):s=n+r-n*r,i=2*n-s,a=[0,0,0];for(var c=0;c<3;c++)o=t+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?l=i+(s-i)*6*o:2*o<1?l=s:3*o<2?l=i+(s-i)*(2/3-o)*6:l=i,a[c]=l*255;return a};Ke.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=r,s=Math.max(n,.01),o,a;return n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s,a=(n+r)/2,o=n===0?2*i/(s+i):2*r/(n+r),[t,o*100,a*100]};Ke.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-r),a=255*n*(1-r*s),l=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}};Ke.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01),s,o,a;return a=(2-r)*n,s=(2-r)*i,o=r*i,o/=s<=1?s:2-s,o=o||0,a/=2,[t,o*100,a*100]};Ke.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,i=r+n,s,o,a,l;i>1&&(r/=i,n/=i),s=Math.floor(6*t),o=1-n,a=6*t-s,s&1&&(a=1-a),l=r+a*(o-r);var c,u,f;switch(s){default:case 6:case 0:c=o,u=l,f=r;break;case 1:c=l,u=o,f=r;break;case 2:c=r,u=o,f=l;break;case 3:c=r,u=l,f=o;break;case 4:c=l,u=r,f=o;break;case 5:c=o,u=r,f=l;break}return[c*255,u*255,f*255]};Ke.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100,s,o,a;return s=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i),[s*255,o*255,a*255]};Ke.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i,s,o;return i=t*3.2406+r*-1.5372+n*-.4986,s=t*-.9689+r*1.8758+n*.0415,o=t*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};Ke.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],i,s,o;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*r-16,s=500*(t-r),o=200*(r-n),[i,s,o]};Ke.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],i,s,o;s=(t+16)/116,i=r/500+s,o=s-n/200;var a=Math.pow(s,3),l=Math.pow(i,3),c=Math.pow(o,3);return s=a>.008856?a:(s-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};Ke.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],i,s,o;return i=Math.atan2(n,r),s=i*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(r*r+n*n),[t,o,s]};Ke.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],i,s,o;return o=n/360*2*Math.PI,i=r*Math.cos(o),s=r*Math.sin(o),[t,i,s]};Ke.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],i=1 in arguments?arguments[1]:Ke.rgb.hsv(e)[2];if(i=Math.round(i/50),i===0)return 30;var s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return i===2&&(s+=60),s};Ke.hsv.ansi16=function(e){return Ke.rgb.ansi16(Ke.hsv.rgb(e),e[2])};Ke.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var i=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};Ke.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,i=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[n,i,s]};Ke.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,i=Math.floor((r=e%36)/6)/5*255,s=r%6/5*255;return[n,i,s]};Ke.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};Ke.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(a){return a+a}).join(""));var n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};Ke.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),s=Math.min(Math.min(t,r),n),o=i-s,a,l;return o<1?a=s/(1-o):a=0,o<=0?l=0:i===t?l=(r-n)/o%6:i===r?l=2+(n-t)/o:l=4+(t-r)/o+4,l/=6,l%=1,[l*360,o*100,a*100]};Ke.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,i=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(i=(r-.5*n)/(1-n)),[e[0],n*100,i*100]};Ke.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],n*100,i*100]};Ke.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var i=[0,0,0],s=t%1*6,o=s%1,a=1-o,l=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};Ke.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),i=0;return n>0&&(i=t/n),[e[0],i*100,n*100]};Ke.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],i*100,n*100]};Ke.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};Ke.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,i=n-t,s=0;return i<1&&(s=(n-i)/(1-i)),[e[0],i*100,s*100]};Ke.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};Ke.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};Ke.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};Ke.gray.hsl=Ke.gray.hsv=function(e){return[0,0,e[0]]};Ke.gray.hwb=function(e){return[0,100,e[0]]};Ke.gray.cmyk=function(e){return[0,0,0,e[0]]};Ke.gray.lab=function(e){return[e[0],0,0]};Ke.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};Ke.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var yme=_((RFt,Ame)=>{"use strict";var Ck=wW();function Pat(){for(var e={},t=Object.keys(Ck),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function Lat(e){var t=Pat(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),i=Object.keys(Ck[n]),s=i.length,o=0;o<s;o++){var a=i[o],l=t[a];l.distance===-1&&(l.distance=t[n].distance+1,l.parent=n,r.unshift(a))}return t}function Uat(e,t){return function(r){return t(e(r))}}function Oat(e,t){for(var r=[t[e].parent,e],n=Ck[t[e].parent][e],i=t[e].parent;t[i].parent;)r.unshift(t[i].parent),n=Uat(Ck[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}Ame.exports=function(e){for(var t=Lat(e),r={},n=Object.keys(t),i=n.length,s=0;s<i;s++){var o=n[s],a=t[o];a.parent!==null&&(r[o]=Oat(o,t))}return r}});var Cme=_((kFt,vme)=>{"use strict";var SW=wW(),qat=yme(),Ly={},Vat=Object.keys(SW);function Hat(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function Wat(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var i=n.length,s=0;s<i;s++)n[s]=Math.round(n[s]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}Vat.forEach(function(e){Ly[e]={},Object.defineProperty(Ly[e],"channels",{value:SW[e].channels}),Object.defineProperty(Ly[e],"labels",{value:SW[e].labels});var t=qat(e),r=Object.keys(t);r.forEach(function(n){var i=t[n];Ly[e][n]=Wat(i),Ly[e][n].raw=Hat(i)})});vme.exports=Ly});var _me=_((MFt,Eme)=>{"use strict";var M_=ume(),La=Cme(),DW=[].slice,bme=["keyword","gray","hex"],IW={};Object.keys(La).forEach(function(e){IW[DW.call(La[e].labels).sort().join("")]=e});var bk={};function Ts(e,t){if(!(this instanceof Ts))return new Ts(e,t);if(t&&t in bme&&(t=null),t&&!(t in La))throw new Error("Unknown model: "+t);var r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Ts)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var i=M_.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,n=La[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(e.length){this.model=t||"rgb",n=La[this.model].channels;var s=DW.call(e,0,n);this.color=BW(s,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(e);"alpha"in e&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var a=o.sort().join("");if(!(a in IW))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=IW[a];var l=La[this.model].labels,c=[];for(r=0;r<l.length;r++)c.push(e[l[r]]);this.color=BW(c)}if(bk[this.model])for(n=La[this.model].channels,r=0;r<n;r++){var u=bk[this.model][r];u&&(this.color[r]=u(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ts.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in M_.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return M_.to[t.model](r)},percentString:function(e){var t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:t.color.concat(this.valpha);return M_.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=La[this.model].channels,r=La[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Ts(this.color.map($at(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Ts(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:hi("rgb",0,Yi(255)),green:hi("rgb",1,Yi(255)),blue:hi("rgb",2,Yi(255)),hue:hi(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:hi("hsl",1,Yi(100)),lightness:hi("hsl",2,Yi(100)),saturationv:hi("hsv",1,Yi(100)),value:hi("hsv",2,Yi(100)),chroma:hi("hcg",1,Yi(100)),gray:hi("hcg",2,Yi(100)),white:hi("hwb",1,Yi(100)),wblack:hi("hwb",2,Yi(100)),cyan:hi("cmyk",0,Yi(100)),magenta:hi("cmyk",1,Yi(100)),yellow:hi("cmyk",2,Yi(100)),black:hi("cmyk",3,Yi(100)),x:hi("xyz",0,Yi(100)),y:hi("xyz",1,Yi(100)),z:hi("xyz",2,Yi(100)),l:hi("lab",0,Yi(100)),a:hi("lab",1),b:hi("lab",2),keyword:function(e){return arguments.length?new Ts(e):La[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Ts(e):M_.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color,t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Ts.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),i=t===void 0?.5:t,s=2*i-1,o=r.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,l=1-a;return Ts.rgb(a*r.red()+l*n.red(),a*r.green()+l*n.green(),a*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(La).forEach(function(e){if(bme.indexOf(e)===-1){var t=La[e].channels;Ts.prototype[e]=function(){if(this.model===e)return new Ts(this);if(arguments.length)return new Ts(arguments,e);var r=typeof arguments[t]=="number"?t:this.valpha;return new Ts(Yat(La[this.model][e].raw(this.color)).concat(r),e)},Ts[e]=function(r){return typeof r=="number"&&(r=BW(DW.call(arguments),t)),new Ts(r,e)}}});function Gat(e,t){return Number(e.toFixed(t))}function $at(e){return function(t){return Gat(t,e)}}function hi(e,t,r){return e=Array.isArray(e)?e:[e],e.forEach(function(n){(bk[n]||(bk[n]=[]))[t]=r}),e=e[0],function(n){var i;return arguments.length?(r&&(n=r(n)),i=this[e](),i.color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function Yi(e){return function(t){return Math.max(0,Math.min(e,t))}}function Yat(e){return Array.isArray(e)?e:[e]}function BW(e,t){for(var r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}Eme.exports=Ts});var wme=_((FFt,xme)=>{"use strict";xme.exports=function(t){for(var r=0,n=0;r<t.length;n=t.charCodeAt(r++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i}});var Dme=_((QFt,Bme)=>{"use strict";var Sme=_me(),Ime=wme();Bme.exports=function(t,r){var n=t.split(r||":"),i=Ime(n[0]);if(!n.length)return i;for(var s=0,o=n.length-1;s<o;s++)i=Sme(i).mix(Sme(Ime(n[s+1]))).saturate(1).hex();return i}});var Rme=_((NFt,Tme)=>{"use strict";function Fc(e,t){if(t)return new Fc(e).style(t);if(!(this instanceof Fc))return new Fc(e);this.text=e}Fc.prototype.prefix="\x1B[";Fc.prototype.suffix="m";Fc.prototype.hex=function(t){t=t[0]==="#"?t.substring(1):t,t.length===3&&(t=t.split(""),t[5]=t[2],t[4]=t[2],t[3]=t[1],t[2]=t[1],t[1]=t[0],t=t.join(""));var r=t.substring(0,2),n=t.substring(2,4),i=t.substring(4,6);return[parseInt(r,16),parseInt(n,16),parseInt(i,16)]};Fc.prototype.rgb=function(t,r,n){var i=t/255*5,s=r/255*5,o=n/255*5;return this.ansi(i,s,o)};Fc.prototype.ansi=function(t,r,n){var i=Math.round(t),s=Math.round(r),o=Math.round(n);return 16+i*36+s*6+o};Fc.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};Fc.prototype.style=function(t){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(t))+this.suffix+this.text+this.reset()};Tme.exports=Fc});var Mme=_((PFt,kme)=>{"use strict";var Kat=Dme(),zat=Rme();kme.exports=function(t,r){var n=r.namespace,i=r.colors!==!1?zat(n+":",Kat(n)):n+":";return t[0]=i+" "+t[0],t}});var Qme=_((LFt,Fme)=>{"use strict";Fme.exports=function(t,r){if(!r)return!1;for(var n=r.split(/[\s,]+/),i=0;i<n.length;i++){if(r=n[i].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(t))return!1;continue}if(new RegExp("^"+r+"$").test(t))return!0}return!1}});var Pme=_((UFt,Nme)=>{"use strict";var Jat=Qme();Nme.exports=function(t){return function(n){try{return Jat(n,t())}catch{}return!1}}});var Ume=_((OFt,Lme)=>{"use strict";var jat=Pme();Lme.exports=jat(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var qme=_((qFt,Ome)=>{"use strict";Ome.exports=function(e,t){try{Function.prototype.apply.call(console.log,console,t)}catch{}}});var Hme=_((VFt,Vme)=>{"use strict";var Zat=xW(),Xat=require("tty").isatty(1),Ek=Zat(function e(t,r){return r=r||{},r.colors="colors"in r?r.colors:Xat,r.namespace=t,r.prod=!1,r.dev=!0,!e.enabled(t)&&!(r.force||e.force)?e.nope(r):e.yep(r)});Ek.modify(Mme());Ek.use(Ume());Ek.set(qme());Vme.exports=Ek});var F_=_((HFt,TW)=>{"use strict";process.env.NODE_ENV==="production"?TW.exports=Xpe():TW.exports=Hme()});var Gme=_((WFt,Wme)=>{"use strict";var RW=require("fs"),{StringDecoder:elt}=require("string_decoder"),{Stream:tlt}=Ny();function rlt(){}Wme.exports=(e,t)=>{let r=Buffer.alloc(65536),n=new elt("utf8"),i=new tlt,s="",o=0,a=0;return e.start===-1&&delete e.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},RW.open(e.file,"a+","0644",(l,c)=>{if(l){t?t(l):i.emit("error",l),i.destroy();return}(function u(){if(i.destroyed){RW.close(c,rlt);return}return RW.read(c,r,0,r.length,o,(f,p)=>{if(f){t?t(f):i.emit("error",f),i.destroy();return}if(!p)return s&&((e.start==null||a>e.start)&&(t?t(null,s):i.emit("line",s)),a++,s=""),setTimeout(u,1e3);let g=n.write(r.slice(0,p));t||i.emit("data",g),g=(s+g).split(/\n+/);let m=g.length-1,y=0;for(;y<m;y++)(e.start==null||a>e.start)&&(t?t(null,g[y]):i.emit("line",g[y])),a++;return s=g[m],o+=p,u()})})()}),t?i.destroy:i}});var Kme=_(($Ft,Yme)=>{"use strict";var ef=require("fs"),$s=require("path"),nlt=Upe(),ilt=require("zlib"),{MESSAGE:slt}=Fi(),{Stream:olt,PassThrough:$me}=Ny(),alt=Wh(),Qc=F_()("winston:file"),llt=require("os"),clt=Gme();Yme.exports=class extends alt{constructor(t={}){super(t),this.name=t.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(t[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new $me,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),t.filename||t.dirname)r("filename or dirname","stream"),this._basename=this.filename=t.filename?$s.basename(t.filename):"winston.log",this.dirname=t.dirname||$s.dirname(t.filename),this.options=t.options||{flags:"a"};else if(t.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(t.stream)),this.dirname=$s.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=t.maxsize||null,this.rotationFormat=t.rotationFormat||!1,this.zippedArchive=t.zippedArchive||!1,this.maxFiles=t.maxFiles||null,this.eol=typeof t.eol=="string"?t.eol:llt.EOL,this.tailable=t.tailable||!1,this.lazy=t.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(t,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(t,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(t,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(t,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(t,r)})});return}}let n=`${t[slt]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,Qc("logged %s %s",this._size,n),this.emit("logged",t),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),Qc("written",o,this._drain),this.finishIfEnding(),o}query(t,r){typeof t=="function"&&(r=t,t={}),t=f(t);let n=$s.join(this.dirname,this.filename),i="",s=[],o=0,a=ef.createReadStream(n,{encoding:"utf8"});a.on("error",p=>{if(a.readable&&a.destroy(),!!r)return p.code!=="ENOENT"?r(p):r(null,s)}),a.on("data",p=>{p=(i+p).split(/\n+/);let g=p.length-1,m=0;for(;m<g;m++)(!t.start||o>=t.start)&&l(p[m]),o++;i=p[g]}),a.on("close",()=>{i&&l(i,!0),t.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function l(p,g){try{let m=JSON.parse(p);u(m)&&c(m)}catch(m){g||a.emit("error",m)}}function c(p){if(t.rows&&s.length>=t.rows&&t.order!=="desc"){a.readable&&a.destroy();return}t.fields&&(p=t.fields.reduce((g,m)=>(g[m]=p[m],g),{})),t.order==="desc"&&s.length>=t.rows&&s.shift(),s.push(p)}function u(p){if(!p||typeof p!="object")return;let g=new Date(p.timestamp);if(!(t.from&&g<t.from||t.until&&g>t.until||t.level&&t.level!==p.level))return!0}function f(p){return p=p||{},p.rows=p.rows||p.limit||10,p.start=p.start||0,p.until=p.until||new Date,typeof p.until!="object"&&(p.until=new Date(p.until)),p.from=p.from||p.until-24*60*60*1e3,typeof p.from!="object"&&(p.from=new Date(p.from)),p.order=p.order||"desc",p}}stream(t={}){let r=$s.join(this.dirname,this.filename),n=new olt,i={file:r,start:t.start};return n.destroy=clt(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((t,r)=>{if(t)return this.emit("error",t);Qc("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.eventNames().includes("rotate")?this._stream.emit("rotate"):this._rotate=!1})})))}stat(t){let r=this._getFile(),n=$s.join(this.dirname,r);ef.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return Qc("ENOENT\xA0ok",n),this.filename=r,t(null,0);if(i)return Qc(`err ${i.code} ${n}`),t(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(t));this.filename=r,t(null,s.size)})}close(t){this._stream&&this._stream.end(()=>{t&&t(),this.emit("flush"),this.emit("closed")})}_needsNewFile(t){return t=t||this._size,this.maxsize&&t>=this.maxsize}_onError(t){this.emit("error",t)}_setupStream(t){return t.on("error",this._onError),t}_cleanupStream(t){return t.removeListener("error",this._onError),t.destroy(),t}_rotateFile(){this._incFile(()=>this.open())}_endStream(t=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),t()})):t()}_createStream(t){let r=$s.join(this.dirname,this.filename);Qc("create stream start",r,this.options);let n=ef.createWriteStream(r,this.options).on("error",i=>Qc(i)).on("close",()=>Qc("close",n.path,n.bytesWritten)).on("open",()=>{Qc("file open ok",r),this.emit("open",r),t.pipe(n),this.rotatedWhileOpening&&(this._stream=new $me,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),t.end())});if(Qc("create stream ok",r),this.zippedArchive){let i=ilt.createGzip();return i.pipe(n),i}return n}_incFile(t){Qc("_incFile",this.filename);let r=$s.extname(this._basename),n=$s.basename(this._basename,r);this.tailable?this._checkMaxFilesTailable(r,n,t):(this._created+=1,this._checkMaxFilesIncrementing(r,n,t))}_getFile(){let t=$s.extname(this._basename),r=$s.basename(this._basename,t),n=this.rotationFormat?this.rotationFormat():this._created,i=!this.tailable&&this._created?`${r}${n}${t}`:`${r}${t}`;return this.zippedArchive&&!this.tailable?`${i}.gz`:i}_checkMaxFilesIncrementing(t,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${t}${o}`,l=$s.join(this.dirname,a);ef.unlink(l,n)}_checkMaxFilesTailable(t,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,l){let c=`${r}${a-1}${t}${s}`,u=$s.join(this.dirname,c);ef.exists(u,f=>{if(!f)return l(null);c=`${r}${a}${t}${s}`,ef.rename(u,$s.join(this.dirname,c),l)})}.bind(this,o));nlt(i,()=>{ef.rename($s.join(this.dirname,`${r}${t}`),$s.join(this.dirname,`${r}1${t}${s}`),n)})}_createLogDirIfNotExist(t){ef.existsSync(t)||ef.mkdirSync(t,{recursive:!0})}}});var Jme=_((KFt,zme)=>{"use strict";var ult=require("http"),dlt=require("https"),{Stream:flt}=Ny(),hlt=Wh(),glt=p_();zme.exports=class extends hlt{constructor(t={}){super(t),this.options=t,this.name=t.name||"http",this.ssl=!!t.ssl,this.host=t.host||"localhost",this.port=t.port,this.auth=t.auth,this.path=t.path||"",this.agent=t.agent,this.headers=t.headers||{},this.headers["content-type"]="application/json",this.batch=t.batch||!1,this.batchInterval=t.batchInterval||5e3,this.batchCount=t.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(t,r){this._request(t,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",t)}),r&&setImmediate(r)}query(t,r){typeof t=="function"&&(r=t,t={}),t={method:"query",params:this.normalizeQuery(t)};let n=t.params.auth||null;delete t.params.auth;let i=t.params.path||null;delete t.params.path,this._request(t,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(l){return r(l)}r(null,a)})}stream(t={}){let r=new flt;t={method:"stream",params:t};let n=t.params.path||null;delete t.params.path;let i=t.params.auth||null;delete t.params.auth;let s="",o=this._request(t,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let l=a.length-1,c=0;for(;c<l;c++)try{r.emit("log",JSON.parse(a[c]))}catch(u){r.emit("error",u)}s=a[l]}),o.on("error",a=>r.emit("error",a)),r}_request(t,r,n,i){t=t||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(t,i,r,n):this._doRequest(t,i,r,n)}_doBatch(t,r,n,i){if(this.batchOptions.push(t),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(t,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,t,r,n)}_doRequest(t,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?dlt:ult).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",a=>a.on("end",()=>r(null,a)).resume()),o.end(Buffer.from(glt(t,this.options.replacer),"utf8"))}}});var kW=_((zFt,jme)=>{"use strict";var Lu=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";Lu.writable=e=>Lu(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";Lu.readable=e=>Lu(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";Lu.duplex=e=>Lu.writable(e)&&Lu.readable(e);Lu.transform=e=>Lu.duplex(e)&&typeof e._transform=="function";jme.exports=Lu});var Xme=_((jFt,Zme)=>{"use strict";var plt=kW(),{MESSAGE:mlt}=Fi(),Alt=require("os"),ylt=Wh();Zme.exports=class extends ylt{constructor(t={}){if(super(t),!t.stream||!plt(t.stream))throw new Error("options.stream is required.");this._stream=t.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=t.stream._writableState.objectMode,this.eol=typeof t.eol=="string"?t.eol:Alt.EOL}log(t,r){if(setImmediate(()=>this.emit("logged",t)),this.isObjectMode){this._stream.write(t),r&&r();return}this._stream.write(`${t[mlt]}${this.eol}`),r&&r()}}});var eAe=_(Q_=>{"use strict";Object.defineProperty(Q_,"Console",{configurable:!0,enumerable:!0,get(){return npe()}});Object.defineProperty(Q_,"File",{configurable:!0,enumerable:!0,get(){return Kme()}});Object.defineProperty(Q_,"Http",{configurable:!0,enumerable:!0,get(){return Jme()}});Object.defineProperty(Q_,"Stream",{configurable:!0,enumerable:!0,get(){return Xme()}})});var xk=_(N_=>{"use strict";var _k=MH(),{configs:MW}=Fi();N_.cli=_k.levels(MW.cli);N_.npm=_k.levels(MW.npm);N_.syslog=_k.levels(MW.syslog);N_.addColors=_k.levels});var rAe=_((wk,tAe)=>{"use strict";Object.defineProperty(wk,"__esModule",{value:!0});var vlt=XR(),Clt=cm(vlt),blt=ck(),Elt=cm(blt),_lt=pW(),xlt=cm(_lt),wlt=fW(),Slt=cm(wlt),Ilt=hW(),Blt=cm(Ilt),Dlt=am(),Tlt=cm(Dlt),Rlt=Qy(),klt=cm(Rlt);function cm(e){return e&&e.__esModule?e:{default:e}}function Mlt(e,t,r){r=(0,Slt.default)(r);var n=0,i=0,{length:s}=e,o=!1;s===0&&r(null);function a(l,c){l===!1&&(o=!0),o!==!0&&(l?r(l):(++i===s||c===Elt.default)&&r(null))}for(;n<s;n++)t(e[n],n,(0,Blt.default)(a))}function Flt(e,t,r){return(0,xlt.default)(e,1/0,t,r)}function Qlt(e,t,r){var n=(0,Clt.default)(e)?Mlt:Flt;return n(e,(0,Tlt.default)(t),r)}wk.default=(0,klt.default)(Qlt,3);tAe.exports=wk.default});var iAe=_((Sk,nAe)=>{"use strict";Object.defineProperty(Sk,"__esModule",{value:!0});Sk.default=Nlt;function Nlt(e){return(t,r,n)=>e(t,n)}nAe.exports=Sk.default});var Dk=_((Bk,sAe)=>{"use strict";Object.defineProperty(Bk,"__esModule",{value:!0});var Plt=rAe(),Llt=Ik(Plt),Ult=iAe(),Olt=Ik(Ult),qlt=am(),Vlt=Ik(qlt),Hlt=Qy(),Wlt=Ik(Hlt);function Ik(e){return e&&e.__esModule?e:{default:e}}function Glt(e,t,r){return(0,Llt.default)(e,(0,Olt.default)((0,Vlt.default)(t)),r)}Bk.default=(0,Wlt.default)(Glt,3);sAe.exports=Bk.default});var aAe=_((e1t,oAe)=>{"use strict";var $lt=Object.prototype.toString;oAe.exports=function(t){if(typeof t.displayName=="string"&&t.constructor.name)return t.displayName;if(typeof t.name=="string"&&t.name)return t.name;if(typeof t=="object"&&t.constructor&&typeof t.constructor.name=="string")return t.constructor.name;var r=t.toString(),n=$lt.call(t).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var FW=_((t1t,lAe)=>{"use strict";var Ylt=aAe();lAe.exports=function(t){var r=0,n;function i(){return r||(r=1,n=t.apply(this,arguments),t=null),n}return i.displayName=Ylt(t),i}});var QW=_(L_=>{"use strict";L_.get=function(e){var t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,e||L_.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=t,i};L_.parse=function(e){if(!e.stack)return[];var t=this,r=e.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,l=null,c=null,u=i[5]==="native";if(i[1]){a=i[1];var f=a.lastIndexOf(".");if(a[f-1]=="."&&f--,f>0){s=a.substr(0,f),o=a.substr(f+1);var p=s.indexOf(".Module");p>0&&(a=a.substr(p+1),s=s.substr(0,p))}l=null}o&&(l=s,c=o),o==="<anonymous>"&&(c=null,a=null);var g={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:l,methodName:c,columnNumber:parseInt(i[4],10)||null,native:u};return t._createParsedCallSite(g)}}).filter(function(n){return!!n})};function P_(e){for(var t in e)this[t]=e[t]}var Klt=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],zlt=["topLevel","eval","native","constructor"];Klt.forEach(function(e){P_.prototype[e]=null,P_.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}});zlt.forEach(function(e){P_.prototype[e]=!1,P_.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}});L_._createParsedCallSite=function(e){return new P_(e)}});var NW=_((i1t,cAe)=>{"use strict";var{Writable:Jlt}=Ny();cAe.exports=class extends Jlt{constructor(t){if(super({objectMode:!0}),!t)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=t}_write(t,r,n){return t.exception?this.transport.log(t,n):(n(),!0)}}});var LW=_((o1t,fAe)=>{"use strict";var uAe=require("os"),jlt=Dk(),PW=F_()("winston:exception"),Zlt=FW(),dAe=QW(),Xlt=NW();fAe.exports=class{constructor(t){if(!t)throw new Error("Logger is required to handle exceptions");this.logger=t,this.handlers=new Map}handle(...t){t.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(t=>this.logger.unpipe(t)))}getAllInfo(t){let r=null;return t&&(r=typeof t=="string"?t:t.message),{error:t,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,t&&t.stack||"  No stack trace"].join(`
`),stack:t&&t.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(t)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:uAe.loadavg(),uptime:uAe.uptime()}}getTrace(t){return(t?dAe.parse(t):dAe.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(t){if(!this.handlers.has(t)){t.handleExceptions=!0;let r=new Xlt(t);this.handlers.set(t,r),this.logger.pipe(r)}}_uncaughtException(t){let r=this.getAllInfo(t),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(t):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){PW("doExit",i),PW("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);jlt(n,(a,l)=>{let c=Zlt(l),u=a.transport||a;function f(p){return()=>{PW(p),c()}}u._ending=!0,u.once("finish",f("finished")),u.once("error",f("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(t=>(t.transport||t).handleExceptions)}}});var OW=_((l1t,pAe)=>{"use strict";var hAe=require("os"),ect=Dk(),UW=F_()("winston:rejection"),tct=FW(),gAe=QW(),rct=NW();pAe.exports=class{constructor(t){if(!t)throw new Error("Logger is required to handle rejections");this.logger=t,this.handlers=new Map}handle(...t){t.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(t=>this.logger.unpipe(t)))}getAllInfo(t){let r=null;return t&&(r=typeof t=="string"?t:t.message),{error:t,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,t&&t.stack||"  No stack trace"].join(`
`),stack:t&&t.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(t)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:hAe.loadavg(),uptime:hAe.uptime()}}getTrace(t){return(t?gAe.parse(t):gAe.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(t){if(!this.handlers.has(t)){t.handleRejections=!0;let r=new rct(t);this.handlers.set(t,r),this.logger.pipe(r)}}_unhandledRejection(t){let r=this.getAllInfo(t),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(t):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){UW("doExit",i),UW("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);ect(n,(a,l)=>{let c=tct(l),u=a.transport||a;function f(p){return()=>{UW(p),c()}}u._ending=!0,u.once("finish",f("finished")),u.once("error",f("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(t=>(t.transport||t).handleRejections)}}});var AAe=_((c1t,mAe)=>{"use strict";var qW=class{constructor(t){let r=Tk();if(typeof t!="object"||Array.isArray(t)||!(t instanceof r))throw new Error("Logger is required for profiling");this.logger=t,this.start=Date.now()}done(...t){typeof t[t.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),t.pop());let r=typeof t[t.length-1]=="object"?t.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};mAe.exports=qW});var Tk=_((u1t,bAe)=>{"use strict";var{Stream:nct,Transform:ict}=Ny(),yAe=Dk(),{LEVEL:Uu,SPLAT:vAe}=Fi(),CAe=kW(),sct=LW(),oct=OW(),act=cW(),lct=AAe(),{warn:cct}=FH(),uct=xk(),dct=/%[scdjifoO%]/g,Rk=class extends ict{constructor(t){super({objectMode:!0}),this.configure(t)}child(t){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},t,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:t,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:l,emitErrs:c,formatters:u,padLevels:f,rewriters:p,stripColors:g,exceptionHandlers:m,rejectionHandlers:y}={}){if(this.transports.length&&this.clear(),this.silent=t,this.format=r||this.format||BH()(),this.defaultMeta=n||null,this.levels=i||this.levels||uct.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new sct(this),this.rejections=new oct(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(v=>this.add(v))),l||c||u||f||p||g)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));m&&this.exceptions.handle(m),y&&this.rejections.handle(y)}isLevelEnabled(t){let r=VW(this.levels,t);if(r===null)return!1;let n=VW(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=VW(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(t,r,...n){if(arguments.length===1)return t[Uu]=t.level,this._addDefaultMeta(t),this.write(t),this;if(arguments.length===2)return r&&typeof r=="object"?(r[Uu]=r.level=t,this._addDefaultMeta(r),this.write(r),this):(r={[Uu]:t,level:t,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(dct))){let o=Object.assign({},this.defaultMeta,i,{[Uu]:t,[vAe]:n,level:t,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[Uu]:t,[vAe]:n,level:t,message:r})),this}_transform(t,r,n){if(this.silent)return n();t[Uu]||(t[Uu]=t.level),!this.levels[t[Uu]]&&this.levels[t[Uu]]!==0&&console.error("[winston] Unknown logger level: %s",t[Uu]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",t);try{this.push(this.format.transform(t,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(t){let r=this.transports.slice();yAe(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},t)}add(t){let r=!CAe(t)||t.log.length>2?new act({transport:t}):t;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),t.handleExceptions&&this.exceptions.handle(),t.handleRejections&&this.rejections.handle(),this}remove(t){if(!t)return this;let r=t;return(!CAe(t)||t.log.length>2)&&(r=this.transports.filter(n=>n.transport===t)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){cct.deprecated("setLevels")}query(t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n={},i=Object.assign({},t.query||{});function s(a,l){t.query&&typeof a.formatQuery=="function"&&(t.query=a.formatQuery(i)),a.query(t,(c,u)=>{if(c)return l(c);typeof a.formatResults=="function"&&(u=a.formatResults(u,t.format)),l(null,u)})}function o(a,l){s(a,(c,u)=>{l&&(u=c||u,u&&(n[a.name]=u),l()),l=null})}yAe(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(t={}){let r=new nct,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(t);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new lct(this)}profile(t,...r){let n=Date.now();if(this.profilers[t]){let i=this.profilers[t];delete this.profilers[t],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||t,this.write(s)}return this.profilers[t]=n,this}handleExceptions(...t){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...t)}unhandleExceptions(...t){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...t)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(t,r){function n(i){t==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(t,i,r)}r["__winston"+t]||(r["__winston"+t]=n.bind(this),r.on(t,r["__winston"+t]))}_addDefaultMeta(t){this.defaultMeta&&Object.assign(t,this.defaultMeta)}};function VW(e,t){let r=e[t];return!r&&r!==0?null:r}Object.defineProperty(Rk.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:e}=this._readableState;return Array.isArray(e)?e:[e].filter(Boolean)}});bAe.exports=Rk});var HW=_((d1t,EAe)=>{"use strict";var{LEVEL:fct}=Fi(),hct=xk(),gct=Tk(),pct=F_()("winston:create-logger");function mct(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}EAe.exports=function(e={}){e.levels=e.levels||hct.npm.levels;class t extends gct{constructor(i){super(i)}}let r=new t(e);return Object.keys(e.levels).forEach(function(n){if(pct('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}t.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[fct]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},t.prototype[mct(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var xAe=_((h1t,_Ae)=>{"use strict";var Act=HW();_Ae.exports=class{constructor(t={}){this.loggers=new Map,this.options=t}add(t,r){if(!this.loggers.has(t)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=Act(r);i.on("close",()=>this._delete(t)),this.loggers.set(t,i)}return this.loggers.get(t)}get(t,r){return this.add(t,r)}has(t){return!!this.loggers.has(t)}close(t){if(t)return this._removeLogger(t);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(t){if(!this.loggers.has(t))return;this.loggers.get(t).close(),this._delete(t)}_delete(t){this.loggers.delete(t)}}});var SAe=_(wn=>{"use strict";var wAe=MH(),{warn:U_}=FH();wn.version=rge().version;wn.transports=eAe();wn.config=xk();wn.addColors=wAe.levels;wn.format=wAe.format;wn.createLogger=HW();wn.Logger=Tk();wn.ExceptionHandler=LW();wn.RejectionHandler=OW();wn.Container=xAe();wn.Transport=Wh();wn.loggers=new wn.Container;var tf=wn.createLogger();Object.keys(wn.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(e=>wn[e]=(...t)=>tf[e](...t));Object.defineProperty(wn,"level",{get(){return tf.level},set(e){tf.level=e}});Object.defineProperty(wn,"exceptions",{get(){return tf.exceptions}});["exitOnError"].forEach(e=>{Object.defineProperty(wn,e,{get(){return tf[e]},set(t){tf[e]=t}})});Object.defineProperty(wn,"default",{get(){return{exceptionHandlers:tf.exceptionHandlers,rejectionHandlers:tf.rejectionHandlers,transports:tf.transports}}});U_.deprecated(wn,"setLevels");U_.forFunctions(wn,"useFormat",["cli"]);U_.forProperties(wn,"useFormat",["padLevels","stripColors"]);U_.forFunctions(wn,"deprecated",["addRewriter","addFilter","clone","extend"]);U_.forProperties(wn,"deprecated",["emitErrs","levelLength"])});var TAe=_((D1t,Cct)=>{Cct.exports=[{name:"C",vscode_name:"c",type:"programming",extensions:[".c",".cats",".h",".idc",".w"]},{name:"C++",vscode_name:"cpp",type:"programming",extensions:[".cpp",".c++",".cc",".cp",".cxx",".h",".h++",".hh",".hpp",".hxx",".inc",".inl",".ipp",".tcc",".tpp"]},{name:"Go",vscode_name:"go",type:"programming",extensions:[".go"]},{name:"Java",vscode_name:"java",type:"programming",extensions:[".java"]},{name:"JavaScript",vscode_name:"javascript",type:"programming",extensions:[".js","._js",".bones",".es",".es6",".frag",".gs",".jake",".jsb",".jscad",".jsfl",".jsm",".jss",".njs",".pac",".sjs",".ssjs",".sublime-build",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session",".xsjs",".xsjslib"]},{name:"Python",vscode_name:"python",type:"programming",extensions:[".py",".bzl",".cgi",".fcgi",".gyp",".lmi",".pyde",".pyp",".pyt",".pyw",".rpy",".tac",".wsgi",".xpy"]}]});var VAe=_((JQt,qAe)=>{"use strict";var OAe="Expected a function",LAe=NaN,Ict="[object Symbol]",Bct=/^\s+|\s+$/g,Dct=/^[-+]0x[0-9a-f]+$/i,Tct=/^0b[01]+$/i,Rct=/^0o[0-7]+$/i,kct=parseInt,Mct=typeof global=="object"&&global&&global.Object===Object&&global,Fct=typeof self=="object"&&self&&self.Object===Object&&self,Qct=Mct||Fct||Function("return this")(),Nct=Object.prototype,Pct=Nct.toString,Lct=Math.max,Uct=Math.min,ZW=function(){return Qct.Date.now()};function Oct(e,t,r){var n,i,s,o,a,l,c=0,u=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(OAe);t=UAe(t)||0,zk(r)&&(u=!!r.leading,f="maxWait"in r,s=f?Lct(UAe(r.maxWait)||0,t):s,p="trailing"in r?!!r.trailing:p);function g(N){var W=n,Z=i;return n=i=void 0,c=N,o=e.apply(Z,W),o}function m(N){return c=N,a=setTimeout(C,t),u?g(N):o}function y(N){var W=N-l,Z=N-c,te=t-W;return f?Uct(te,s-Z):te}function v(N){var W=N-l,Z=N-c;return l===void 0||W>=t||W<0||f&&Z>=s}function C(){var N=ZW();if(v(N))return E(N);a=setTimeout(C,y(N))}function E(N){return a=void 0,p&&n?g(N):(n=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function B(){return a===void 0?o:E(ZW())}function R(){var N=ZW(),W=v(N);if(n=arguments,i=this,l=N,W){if(a===void 0)return m(l);if(f)return a=setTimeout(C,t),g(l)}return a===void 0&&(a=setTimeout(C,t)),o}return R.cancel=w,R.flush=B,R}function qct(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(OAe);return zk(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Oct(e,t,{leading:n,maxWait:t,trailing:i})}function zk(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Vct(e){return!!e&&typeof e=="object"}function Hct(e){return typeof e=="symbol"||Vct(e)&&Pct.call(e)==Ict}function UAe(e){if(typeof e=="number")return e;if(Hct(e))return LAe;if(zk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=zk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Bct,"");var r=Tct.test(e);return r||Rct.test(e)?kct(e.slice(2),r?2:8):Dct.test(e)?LAe:+e}qAe.exports=qct});var WAe=_((jQt,HAe)=>{"use strict";var XW=class{constructor(t){this.value=t,this.next=void 0}},eG=class{constructor(){this.clear()}enqueue(t){let r=new XW(t);this._head?(this._tail.next=r,this._tail=r):(this._head=r,this._tail=r),this._size++}dequeue(){let t=this._head;if(t)return this._head=this._head.next,this._size--,t.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let t=this._head;for(;t;)yield t.value,t=t.next}};HAe.exports=eG});var $Ae=_((ZQt,GAe)=>{"use strict";var Wct=WAe(),Gct=e=>{if(!((Number.isInteger(e)||e===1/0)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let t=new Wct,r=0,n=()=>{r--,t.size>0&&t.dequeue()()},i=async(a,l,...c)=>{r++;let u=(async()=>a(...c))();l(u);try{await u}catch{}n()},s=(a,l,...c)=>{t.enqueue(i.bind(null,a,l,...c)),(async()=>(await Promise.resolve(),r<e&&t.size>0&&t.dequeue()()))()},o=(a,...l)=>new Promise(c=>{s(a,c,...l)});return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),o};GAe.exports=Gct});var j_=_((zNt,I0e)=>{"use strict";var aut="2.0.0",lut=Number.MAX_SAFE_INTEGER||9007199254740991,cut=16,uut=250,dut=["major","premajor","minor","preminor","patch","prepatch","prerelease"];I0e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:cut,MAX_SAFE_BUILD_LENGTH:uut,MAX_SAFE_INTEGER:lut,RELEASE_TYPES:dut,SEMVER_SPEC_VERSION:aut,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Z_=_((JNt,B0e)=>{"use strict";var fut=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};B0e.exports=fut});var zy=_((af,D0e)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:gG,MAX_SAFE_BUILD_LENGTH:hut,MAX_LENGTH:gut}=j_(),put=Z_();af=D0e.exports={};var mut=af.re=[],Aut=af.safeRe=[],Oe=af.src=[],qe=af.t={},yut=0,pG="[a-zA-Z0-9-]",vut=[["\\s",1],["\\d",gut],[pG,hut]],Cut=e=>{for(let[t,r]of vut)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},Nt=(e,t,r)=>{let n=Cut(t),i=yut++;put(e,i,t),qe[e]=i,Oe[i]=t,mut[i]=new RegExp(t,r?"g":void 0),Aut[i]=new RegExp(n,r?"g":void 0)};Nt("NUMERICIDENTIFIER","0|[1-9]\\d*");Nt("NUMERICIDENTIFIERLOOSE","\\d+");Nt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${pG}*`);Nt("MAINVERSION",`(${Oe[qe.NUMERICIDENTIFIER]})\\.(${Oe[qe.NUMERICIDENTIFIER]})\\.(${Oe[qe.NUMERICIDENTIFIER]})`);Nt("MAINVERSIONLOOSE",`(${Oe[qe.NUMERICIDENTIFIERLOOSE]})\\.(${Oe[qe.NUMERICIDENTIFIERLOOSE]})\\.(${Oe[qe.NUMERICIDENTIFIERLOOSE]})`);Nt("PRERELEASEIDENTIFIER",`(?:${Oe[qe.NUMERICIDENTIFIER]}|${Oe[qe.NONNUMERICIDENTIFIER]})`);Nt("PRERELEASEIDENTIFIERLOOSE",`(?:${Oe[qe.NUMERICIDENTIFIERLOOSE]}|${Oe[qe.NONNUMERICIDENTIFIER]})`);Nt("PRERELEASE",`(?:-(${Oe[qe.PRERELEASEIDENTIFIER]}(?:\\.${Oe[qe.PRERELEASEIDENTIFIER]})*))`);Nt("PRERELEASELOOSE",`(?:-?(${Oe[qe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Oe[qe.PRERELEASEIDENTIFIERLOOSE]})*))`);Nt("BUILDIDENTIFIER",`${pG}+`);Nt("BUILD",`(?:\\+(${Oe[qe.BUILDIDENTIFIER]}(?:\\.${Oe[qe.BUILDIDENTIFIER]})*))`);Nt("FULLPLAIN",`v?${Oe[qe.MAINVERSION]}${Oe[qe.PRERELEASE]}?${Oe[qe.BUILD]}?`);Nt("FULL",`^${Oe[qe.FULLPLAIN]}$`);Nt("LOOSEPLAIN",`[v=\\s]*${Oe[qe.MAINVERSIONLOOSE]}${Oe[qe.PRERELEASELOOSE]}?${Oe[qe.BUILD]}?`);Nt("LOOSE",`^${Oe[qe.LOOSEPLAIN]}$`);Nt("GTLT","((?:<|>)?=?)");Nt("XRANGEIDENTIFIERLOOSE",`${Oe[qe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Nt("XRANGEIDENTIFIER",`${Oe[qe.NUMERICIDENTIFIER]}|x|X|\\*`);Nt("XRANGEPLAIN",`[v=\\s]*(${Oe[qe.XRANGEIDENTIFIER]})(?:\\.(${Oe[qe.XRANGEIDENTIFIER]})(?:\\.(${Oe[qe.XRANGEIDENTIFIER]})(?:${Oe[qe.PRERELEASE]})?${Oe[qe.BUILD]}?)?)?`);Nt("XRANGEPLAINLOOSE",`[v=\\s]*(${Oe[qe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Oe[qe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Oe[qe.XRANGEIDENTIFIERLOOSE]})(?:${Oe[qe.PRERELEASELOOSE]})?${Oe[qe.BUILD]}?)?)?`);Nt("XRANGE",`^${Oe[qe.GTLT]}\\s*${Oe[qe.XRANGEPLAIN]}$`);Nt("XRANGELOOSE",`^${Oe[qe.GTLT]}\\s*${Oe[qe.XRANGEPLAINLOOSE]}$`);Nt("COERCEPLAIN",`(^|[^\\d])(\\d{1,${gG}})(?:\\.(\\d{1,${gG}}))?(?:\\.(\\d{1,${gG}}))?`);Nt("COERCE",`${Oe[qe.COERCEPLAIN]}(?:$|[^\\d])`);Nt("COERCEFULL",Oe[qe.COERCEPLAIN]+`(?:${Oe[qe.PRERELEASE]})?(?:${Oe[qe.BUILD]})?(?:$|[^\\d])`);Nt("COERCERTL",Oe[qe.COERCE],!0);Nt("COERCERTLFULL",Oe[qe.COERCEFULL],!0);Nt("LONETILDE","(?:~>?)");Nt("TILDETRIM",`(\\s*)${Oe[qe.LONETILDE]}\\s+`,!0);af.tildeTrimReplace="$1~";Nt("TILDE",`^${Oe[qe.LONETILDE]}${Oe[qe.XRANGEPLAIN]}$`);Nt("TILDELOOSE",`^${Oe[qe.LONETILDE]}${Oe[qe.XRANGEPLAINLOOSE]}$`);Nt("LONECARET","(?:\\^)");Nt("CARETTRIM",`(\\s*)${Oe[qe.LONECARET]}\\s+`,!0);af.caretTrimReplace="$1^";Nt("CARET",`^${Oe[qe.LONECARET]}${Oe[qe.XRANGEPLAIN]}$`);Nt("CARETLOOSE",`^${Oe[qe.LONECARET]}${Oe[qe.XRANGEPLAINLOOSE]}$`);Nt("COMPARATORLOOSE",`^${Oe[qe.GTLT]}\\s*(${Oe[qe.LOOSEPLAIN]})$|^$`);Nt("COMPARATOR",`^${Oe[qe.GTLT]}\\s*(${Oe[qe.FULLPLAIN]})$|^$`);Nt("COMPARATORTRIM",`(\\s*)${Oe[qe.GTLT]}\\s*(${Oe[qe.LOOSEPLAIN]}|${Oe[qe.XRANGEPLAIN]})`,!0);af.comparatorTrimReplace="$1$2$3";Nt("HYPHENRANGE",`^\\s*(${Oe[qe.XRANGEPLAIN]})\\s+-\\s+(${Oe[qe.XRANGEPLAIN]})\\s*$`);Nt("HYPHENRANGELOOSE",`^\\s*(${Oe[qe.XRANGEPLAINLOOSE]})\\s+-\\s+(${Oe[qe.XRANGEPLAINLOOSE]})\\s*$`);Nt("STAR","(<|>)?=?\\s*\\*");Nt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Nt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var lM=_((jNt,T0e)=>{"use strict";var but=Object.freeze({loose:!0}),Eut=Object.freeze({}),_ut=e=>e?typeof e!="object"?but:e:Eut;T0e.exports=_ut});var mG=_((ZNt,M0e)=>{"use strict";var R0e=/^[0-9]+$/,k0e=(e,t)=>{let r=R0e.test(e),n=R0e.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},xut=(e,t)=>k0e(t,e);M0e.exports={compareIdentifiers:k0e,rcompareIdentifiers:xut}});var Ys=_((XNt,P0e)=>{"use strict";var cM=Z_(),{MAX_LENGTH:F0e,MAX_SAFE_INTEGER:uM}=j_(),{safeRe:Q0e,t:N0e}=zy(),wut=lM(),{compareIdentifiers:Jy}=mG(),AG=class e{constructor(t,r){if(r=wut(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>F0e)throw new TypeError(`version is longer than ${F0e} characters`);cM("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?Q0e[N0e.LOOSE]:Q0e[N0e.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>uM||this.major<0)throw new TypeError("Invalid major version");if(this.minor>uM||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>uM||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<uM)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(cM("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Jy(this.major,t.major)||Jy(this.minor,t.minor)||Jy(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=t.prerelease[r];if(cM("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Jy(n,i)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],i=t.build[r];if(cM("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Jy(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Jy(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};P0e.exports=AG});var pm=_((e2t,U0e)=>{"use strict";var L0e=Ys(),Sut=(e,t,r=!1)=>{if(e instanceof L0e)return e;try{return new L0e(e,t)}catch(n){if(!r)return null;throw n}};U0e.exports=Sut});var q0e=_((t2t,O0e)=>{"use strict";var Iut=pm(),But=(e,t)=>{let r=Iut(e,t);return r?r.version:null};O0e.exports=But});var H0e=_((r2t,V0e)=>{"use strict";var Dut=pm(),Tut=(e,t)=>{let r=Dut(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};V0e.exports=Tut});var $0e=_((n2t,G0e)=>{"use strict";var W0e=Ys(),Rut=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new W0e(e instanceof W0e?e.version:e,r).inc(t,n,i).version}catch{return null}};G0e.exports=Rut});var z0e=_((i2t,K0e)=>{"use strict";var Y0e=pm(),kut=(e,t)=>{let r=Y0e(e,null,!0),n=Y0e(t,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let u=l?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};K0e.exports=kut});var j0e=_((s2t,J0e)=>{"use strict";var Mut=Ys(),Fut=(e,t)=>new Mut(e,t).major;J0e.exports=Fut});var X0e=_((o2t,Z0e)=>{"use strict";var Qut=Ys(),Nut=(e,t)=>new Qut(e,t).minor;Z0e.exports=Nut});var tye=_((a2t,eye)=>{"use strict";var Put=Ys(),Lut=(e,t)=>new Put(e,t).patch;eye.exports=Lut});var nye=_((l2t,rye)=>{"use strict";var Uut=pm(),Out=(e,t)=>{let r=Uut(e,t);return r&&r.prerelease.length?r.prerelease:null};rye.exports=Out});var ql=_((c2t,sye)=>{"use strict";var iye=Ys(),qut=(e,t,r)=>new iye(e,r).compare(new iye(t,r));sye.exports=qut});var aye=_((u2t,oye)=>{"use strict";var Vut=ql(),Hut=(e,t,r)=>Vut(t,e,r);oye.exports=Hut});var cye=_((d2t,lye)=>{"use strict";var Wut=ql(),Gut=(e,t)=>Wut(e,t,!0);lye.exports=Gut});var dM=_((f2t,dye)=>{"use strict";var uye=Ys(),$ut=(e,t,r)=>{let n=new uye(e,r),i=new uye(t,r);return n.compare(i)||n.compareBuild(i)};dye.exports=$ut});var hye=_((h2t,fye)=>{"use strict";var Yut=dM(),Kut=(e,t)=>e.sort((r,n)=>Yut(r,n,t));fye.exports=Kut});var pye=_((g2t,gye)=>{"use strict";var zut=dM(),Jut=(e,t)=>e.sort((r,n)=>zut(n,r,t));gye.exports=Jut});var X_=_((p2t,mye)=>{"use strict";var jut=ql(),Zut=(e,t,r)=>jut(e,t,r)>0;mye.exports=Zut});var fM=_((m2t,Aye)=>{"use strict";var Xut=ql(),edt=(e,t,r)=>Xut(e,t,r)<0;Aye.exports=edt});var yG=_((A2t,yye)=>{"use strict";var tdt=ql(),rdt=(e,t,r)=>tdt(e,t,r)===0;yye.exports=rdt});var vG=_((y2t,vye)=>{"use strict";var ndt=ql(),idt=(e,t,r)=>ndt(e,t,r)!==0;vye.exports=idt});var hM=_((v2t,Cye)=>{"use strict";var sdt=ql(),odt=(e,t,r)=>sdt(e,t,r)>=0;Cye.exports=odt});var gM=_((C2t,bye)=>{"use strict";var adt=ql(),ldt=(e,t,r)=>adt(e,t,r)<=0;bye.exports=ldt});var CG=_((b2t,Eye)=>{"use strict";var cdt=yG(),udt=vG(),ddt=X_(),fdt=hM(),hdt=fM(),gdt=gM(),pdt=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return cdt(e,r,n);case"!=":return udt(e,r,n);case">":return ddt(e,r,n);case">=":return fdt(e,r,n);case"<":return hdt(e,r,n);case"<=":return gdt(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};Eye.exports=pdt});var xye=_((E2t,_ye)=>{"use strict";var mdt=Ys(),Adt=pm(),{safeRe:pM,t:mM}=zy(),ydt=(e,t)=>{if(e instanceof mdt)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?pM[mM.COERCEFULL]:pM[mM.COERCE]);else{let l=t.includePrerelease?pM[mM.COERCERTLFULL]:pM[mM.COERCERTL],c;for(;(c=l.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return Adt(`${n}.${i}.${s}${o}${a}`,t)};_ye.exports=ydt});var Sye=_((_2t,wye)=>{"use strict";var bG=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}};wye.exports=bG});var Vl=_((x2t,Tye)=>{"use strict";var vdt=/\s+/g,EG=class e{constructor(t,r){if(r=bdt(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof _G)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(vdt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Bye(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Bdt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&Sdt)|(this.options.loose&&Idt))+":"+t,i=Iye.get(n);if(i)return i;let s=this.options.loose,o=s?ra[wo.HYPHENRANGELOOSE]:ra[wo.HYPHENRANGE];t=t.replace(o,Ldt(this.options.includePrerelease)),Un("hyphen replace",t),t=t.replace(ra[wo.COMPARATORTRIM],_dt),Un("comparator trim",t),t=t.replace(ra[wo.TILDETRIM],xdt),Un("tilde trim",t),t=t.replace(ra[wo.CARETTRIM],wdt),Un("caret trim",t);let a=t.split(" ").map(f=>Ddt(f,this.options)).join(" ").split(/\s+/).map(f=>Pdt(f,this.options));s&&(a=a.filter(f=>(Un("loose invalid filter",f,this.options),!!f.match(ra[wo.COMPARATORLOOSE])))),Un("range list",a);let l=new Map,c=a.map(f=>new _G(f,this.options));for(let f of c){if(Bye(f))return[f];l.set(f.value,f)}l.size>1&&l.has("")&&l.delete("");let u=[...l.values()];return Iye.set(n,u),u}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>Dye(n,r)&&t.set.some(i=>Dye(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new Edt(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Udt(this.set[r],t,this.options))return!0;return!1}};Tye.exports=EG;var Cdt=Sye(),Iye=new Cdt,bdt=lM(),_G=ex(),Un=Z_(),Edt=Ys(),{safeRe:ra,t:wo,comparatorTrimReplace:_dt,tildeTrimReplace:xdt,caretTrimReplace:wdt}=zy(),{FLAG_INCLUDE_PRERELEASE:Sdt,FLAG_LOOSE:Idt}=j_(),Bye=e=>e.value==="<0.0.0-0",Bdt=e=>e.value==="",Dye=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,t)),i=n.pop();return r},Ddt=(e,t)=>(Un("comp",e,t),e=kdt(e,t),Un("caret",e),e=Tdt(e,t),Un("tildes",e),e=Fdt(e,t),Un("xrange",e),e=Ndt(e,t),Un("stars",e),e),So=e=>!e||e.toLowerCase()==="x"||e==="*",Tdt=(e,t)=>e.trim().split(/\s+/).map(r=>Rdt(r,t)).join(" "),Rdt=(e,t)=>{let r=t.loose?ra[wo.TILDELOOSE]:ra[wo.TILDE];return e.replace(r,(n,i,s,o,a)=>{Un("tilde",e,n,i,s,o,a);let l;return So(i)?l="":So(s)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:So(o)?l=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Un("replaceTilde pr",a),l=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):l=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Un("tilde return",l),l})},kdt=(e,t)=>e.trim().split(/\s+/).map(r=>Mdt(r,t)).join(" "),Mdt=(e,t)=>{Un("caret",e,t);let r=t.loose?ra[wo.CARETLOOSE]:ra[wo.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(i,s,o,a,l)=>{Un("caret",e,i,s,o,a,l);let c;return So(s)?c="":So(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:So(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:l?(Un("replaceCaret pr",l),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${l} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${l} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${l} <${+s+1}.0.0-0`):(Un("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Un("caret return",c),c})},Fdt=(e,t)=>(Un("replaceXRanges",e,t),e.split(/\s+/).map(r=>Qdt(r,t)).join(" ")),Qdt=(e,t)=>{e=e.trim();let r=t.loose?ra[wo.XRANGELOOSE]:ra[wo.XRANGE];return e.replace(r,(n,i,s,o,a,l)=>{Un("xRange",e,n,i,s,o,a,l);let c=So(s),u=c||So(o),f=u||So(a),p=f;return i==="="&&p&&(i=""),l=t.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(u&&(o=0),a=0,i===">"?(i=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",u?s=+s+1:o=+o+1),i==="<"&&(l="-0"),n=`${i+s}.${o}.${a}${l}`):u?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${o}.0${l} <${s}.${+o+1}.0-0`),Un("xRange return",n),n})},Ndt=(e,t)=>(Un("replaceStars",e,t),e.trim().replace(ra[wo.STAR],"")),Pdt=(e,t)=>(Un("replaceGTE0",e,t),e.trim().replace(ra[t.includePrerelease?wo.GTE0PRE:wo.GTE0],"")),Ldt=e=>(t,r,n,i,s,o,a,l,c,u,f,p)=>(So(n)?r="":So(i)?r=`>=${n}.0.0${e?"-0":""}`:So(s)?r=`>=${n}.${i}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,So(c)?l="":So(u)?l=`<${+c+1}.0.0-0`:So(f)?l=`<${c}.${+u+1}.0-0`:p?l=`<=${c}.${u}.${f}-${p}`:e?l=`<${c}.${u}.${+f+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),Udt=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Un(e[n].semver),e[n].semver!==_G.ANY&&e[n].semver.prerelease.length>0){let i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}});var ex=_((w2t,Nye)=>{"use strict";var tx=Symbol("SemVer ANY"),SG=class e{static get ANY(){return tx}constructor(t,r){if(r=Rye(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),wG("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===tx?this.value="":this.value=this.operator+this.semver.version,wG("comp",this)}parse(t){let r=this.options.loose?kye[Mye.COMPARATORLOOSE]:kye[Mye.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Fye(n[2],this.options.loose):this.semver=tx}toString(){return this.value}test(t){if(wG("Comparator.test",t,this.options.loose),this.semver===tx||t===tx)return!0;if(typeof t=="string")try{t=new Fye(t,this.options)}catch{return!1}return xG(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Qye(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new Qye(this.value,r).test(t.semver):(r=Rye(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||xG(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||xG(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};Nye.exports=SG;var Rye=lM(),{safeRe:kye,t:Mye}=zy(),xG=CG(),wG=Z_(),Fye=Ys(),Qye=Vl()});var rx=_((S2t,Pye)=>{"use strict";var Odt=Vl(),qdt=(e,t,r)=>{try{t=new Odt(t,r)}catch{return!1}return t.test(e)};Pye.exports=qdt});var Uye=_((I2t,Lye)=>{"use strict";var Vdt=Vl(),Hdt=(e,t)=>new Vdt(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Lye.exports=Hdt});var qye=_((B2t,Oye)=>{"use strict";var Wdt=Ys(),Gdt=Vl(),$dt=(e,t,r)=>{let n=null,i=null,s=null;try{s=new Gdt(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Wdt(n,r))}),n};Oye.exports=$dt});var Hye=_((D2t,Vye)=>{"use strict";var Ydt=Ys(),Kdt=Vl(),zdt=(e,t,r)=>{let n=null,i=null,s=null;try{s=new Kdt(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new Ydt(n,r))}),n};Vye.exports=zdt});var $ye=_((T2t,Gye)=>{"use strict";var IG=Ys(),Jdt=Vl(),Wye=X_(),jdt=(e,t)=>{e=new Jdt(e,t);let r=new IG("0.0.0");if(e.test(r)||(r=new IG("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let i=e.set[n],s=null;i.forEach(o=>{let a=new IG(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Wye(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Wye(r,s))&&(r=s)}return r&&e.test(r)?r:null};Gye.exports=jdt});var Kye=_((R2t,Yye)=>{"use strict";var Zdt=Vl(),Xdt=(e,t)=>{try{return new Zdt(e,t).range||"*"}catch{return null}};Yye.exports=Xdt});var AM=_((k2t,Zye)=>{"use strict";var eft=Ys(),jye=ex(),{ANY:tft}=jye,rft=Vl(),nft=rx(),zye=X_(),Jye=fM(),ift=gM(),sft=hM(),oft=(e,t,r,n)=>{e=new eft(e,n),t=new rft(t,n);let i,s,o,a,l;switch(r){case">":i=zye,s=ift,o=Jye,a=">",l=">=";break;case"<":i=Jye,s=sft,o=zye,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(nft(e,t,n))return!1;for(let c=0;c<t.set.length;++c){let u=t.set[c],f=null,p=null;if(u.forEach(g=>{g.semver===tft&&(g=new jye(">=0.0.0")),f=f||g,p=p||g,i(g.semver,f.semver,n)?f=g:o(g.semver,p.semver,n)&&(p=g)}),f.operator===a||f.operator===l||(!p.operator||p.operator===a)&&s(e,p.semver))return!1;if(p.operator===l&&o(e,p.semver))return!1}return!0};Zye.exports=oft});var eve=_((M2t,Xye)=>{"use strict";var aft=AM(),lft=(e,t,r)=>aft(e,t,">",r);Xye.exports=lft});var rve=_((F2t,tve)=>{"use strict";var cft=AM(),uft=(e,t,r)=>cft(e,t,"<",r);tve.exports=uft});var sve=_((Q2t,ive)=>{"use strict";var nve=Vl(),dft=(e,t,r)=>(e=new nve(e,r),t=new nve(t,r),e.intersects(t,r));ive.exports=dft});var ave=_((N2t,ove)=>{"use strict";var fft=rx(),hft=ql();ove.exports=(e,t,r)=>{let n=[],i=null,s=null,o=e.sort((u,f)=>hft(u,f,r));for(let u of o)fft(u,t,r)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,f]of n)u===f?a.push(u):!f&&u===o[0]?a.push("*"):f?u===o[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let l=a.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return l.length<c.length?l:t}});var hve=_((P2t,fve)=>{"use strict";var lve=Vl(),DG=ex(),{ANY:BG}=DG,nx=rx(),TG=ql(),gft=(e,t,r={})=>{if(e===t)return!0;e=new lve(e,r),t=new lve(t,r);let n=!1;e:for(let i of e.set){for(let s of t.set){let o=mft(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},pft=[new DG(">=0.0.0-0")],cve=[new DG(">=0.0.0")],mft=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===BG){if(t.length===1&&t[0].semver===BG)return!0;r.includePrerelease?e=pft:e=cve}if(t.length===1&&t[0].semver===BG){if(r.includePrerelease)return!0;t=cve}let n=new Set,i,s;for(let g of e)g.operator===">"||g.operator===">="?i=uve(i,g,r):g.operator==="<"||g.operator==="<="?s=dve(s,g,r):n.add(g.semver);if(n.size>1)return null;let o;if(i&&s){if(o=TG(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let g of n){if(i&&!nx(g,String(i),r)||s&&!nx(g,String(s),r))return null;for(let m of t)if(!nx(g,String(m),r))return!1;return!0}let a,l,c,u,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let g of t){if(u=u||g.operator===">"||g.operator===">=",c=c||g.operator==="<"||g.operator==="<=",i){if(p&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===p.major&&g.semver.minor===p.minor&&g.semver.patch===p.patch&&(p=!1),g.operator===">"||g.operator===">="){if(a=uve(i,g,r),a===g&&a!==i)return!1}else if(i.operator===">="&&!nx(i.semver,String(g),r))return!1}if(s){if(f&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===f.major&&g.semver.minor===f.minor&&g.semver.patch===f.patch&&(f=!1),g.operator==="<"||g.operator==="<="){if(l=dve(s,g,r),l===g&&l!==s)return!1}else if(s.operator==="<="&&!nx(s.semver,String(g),r))return!1}if(!g.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&u&&!i&&o!==0||p||f)},uve=(e,t,r)=>{if(!e)return t;let n=TG(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},dve=(e,t,r)=>{if(!e)return t;let n=TG(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};fve.exports=gft});var Ave=_((L2t,mve)=>{"use strict";var RG=zy(),gve=j_(),Aft=Ys(),pve=mG(),yft=pm(),vft=q0e(),Cft=H0e(),bft=$0e(),Eft=z0e(),_ft=j0e(),xft=X0e(),wft=tye(),Sft=nye(),Ift=ql(),Bft=aye(),Dft=cye(),Tft=dM(),Rft=hye(),kft=pye(),Mft=X_(),Fft=fM(),Qft=yG(),Nft=vG(),Pft=hM(),Lft=gM(),Uft=CG(),Oft=xye(),qft=ex(),Vft=Vl(),Hft=rx(),Wft=Uye(),Gft=qye(),$ft=Hye(),Yft=$ye(),Kft=Kye(),zft=AM(),Jft=eve(),jft=rve(),Zft=sve(),Xft=ave(),eht=hve();mve.exports={parse:yft,valid:vft,clean:Cft,inc:bft,diff:Eft,major:_ft,minor:xft,patch:wft,prerelease:Sft,compare:Ift,rcompare:Bft,compareLoose:Dft,compareBuild:Tft,sort:Rft,rsort:kft,gt:Mft,lt:Fft,eq:Qft,neq:Nft,gte:Pft,lte:Lft,cmp:Uft,coerce:Oft,Comparator:qft,Range:Vft,satisfies:Hft,toComparators:Wft,maxSatisfying:Gft,minSatisfying:$ft,minVersion:Yft,validRange:Kft,outside:zft,gtr:Jft,ltr:jft,intersects:Zft,simplifyRange:Xft,subset:eht,SemVer:Aft,re:RG.re,src:RG.src,tokens:RG.t,SEMVER_SPEC_VERSION:gve.SEMVER_SPEC_VERSION,RELEASE_TYPES:gve.RELEASE_TYPES,compareIdentifiers:pve.compareIdentifiers,rcompareIdentifiers:pve.rcompareIdentifiers}});var k4=_((s3t,jbe)=>{"use strict";function Xmt(e){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=MR(),r.destroy=c,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let f=0;for(let p=0;p<u.length;p++)f=(f<<5)-f+u.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(u){let f,p=null,g,m;function y(...v){if(!y.enabled)return;let C=y,E=Number(new Date),w=E-(f||E);C.diff=w,C.prev=f,C.curr=E,f=E,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let B=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,W)=>{if(N==="%%")return"%";B++;let Z=r.formatters[W];if(typeof Z=="function"){let te=v[B];N=Z.call(C,te),v.splice(B,1),B--}return N}),r.formatArgs.call(C,v),(C.log||r.log).apply(C,v)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==r.namespaces&&(g=r.namespaces,m=r.enabled(u)),m),set:v=>{p=v}}),typeof r.init=="function"&&r.init(y),y}function n(u,f){let p=r(this.namespace+(typeof f>"u"?":":f)+u);return p.log=this.log,p}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(let p of f)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(u,f){let p=0,g=0,m=-1,y=0;for(;p<u.length;)if(g<f.length&&(f[g]===u[p]||f[g]==="*"))f[g]==="*"?(m=g,y=p,g++):(p++,g++);else if(m!==-1)g=m+1,y++,p=y;else return!1;for(;g<f.length&&f[g]==="*";)g++;return g===f.length}function o(){let u=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),u}function a(u){for(let f of r.skips)if(s(u,f))return!1;for(let f of r.names)if(s(u,f))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}jbe.exports=Xmt});var Zbe=_((Ka,qF)=>{"use strict";Ka.formatArgs=tAt;Ka.save=rAt;Ka.load=nAt;Ka.useColors=eAt;Ka.storage=iAt();Ka.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ka.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function eAt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function tAt(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+qF.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Ka.log=console.debug||console.log||(()=>{});function rAt(e){try{e?Ka.storage.setItem("debug",e):Ka.storage.removeItem("debug")}catch{}}function nAt(){let e;try{e=Ka.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function iAt(){try{return localStorage}catch{}}qF.exports=k4()(Ka);var{formatters:sAt}=qF.exports;sAt.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Q4={};XP(Q4,{createSupportsColor:()=>F4,default:()=>uAt});function $l(e,t=globalThis.Deno?globalThis.Deno.args:HF.default.argv){let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}function oAt(){if("FORCE_COLOR"in Zn)return Zn.FORCE_COLOR==="true"?1:Zn.FORCE_COLOR==="false"?0:Zn.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Zn.FORCE_COLOR,10),3)}function aAt(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function lAt(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let n=oAt();n!==void 0&&(VF=n);let i=r?VF:n;if(i===0)return 0;if(r){if($l("color=16m")||$l("color=full")||$l("color=truecolor"))return 3;if($l("color=256"))return 2}if("TF_BUILD"in Zn&&"AGENT_NAME"in Zn)return 1;if(e&&!t&&i===void 0)return 0;let s=i||0;if(Zn.TERM==="dumb")return s;if(HF.default.platform==="win32"){let o=Xbe.default.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in Zn)return"GITHUB_ACTIONS"in Zn||"GITEA_ACTIONS"in Zn?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(o=>o in Zn)||Zn.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in Zn)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Zn.TEAMCITY_VERSION)?1:0;if(Zn.COLORTERM==="truecolor"||Zn.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in Zn){let o=Number.parseInt((Zn.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Zn.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Zn.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Zn.TERM)||"COLORTERM"in Zn?1:s}function F4(e,t={}){let r=lAt(e,{streamIsTTY:e&&e.isTTY,...t});return aAt(r)}var HF,Xbe,M4,Zn,VF,cAt,uAt,N4=mFe(()=>{"use strict";HF=q(require("process")),Xbe=q(require("os")),M4=q(require("tty"));({env:Zn}=HF.default);$l("no-color")||$l("no-colors")||$l("color=false")||$l("color=never")?VF=0:($l("color")||$l("colors")||$l("color=true")||$l("color=always"))&&(VF=1);cAt={stdout:F4({isTTY:M4.default.isatty(1)}),stderr:F4({isTTY:M4.default.isatty(2)})},uAt=cAt});var tEe=_((as,GF)=>{"use strict";var dAt=require("tty"),WF=require("util");as.init=yAt;as.log=pAt;as.formatArgs=hAt;as.save=mAt;as.load=AAt;as.useColors=fAt;as.destroy=WF.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");as.colors=[6,2,3,4,5,1];try{let e=(N4(),eL(Q4));e&&(e.stderr||e).level>=2&&(as.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}as.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function fAt(){return"colors"in as.inspectOpts?!!as.inspectOpts.colors:dAt.isatty(process.stderr.fd)}function hAt(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+GF.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=gAt()+t+" "+e[0]}function gAt(){return as.inspectOpts.hideDate?"":new Date().toISOString()+" "}function pAt(...e){return process.stderr.write(WF.formatWithOptions(as.inspectOpts,...e)+`
`)}function mAt(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function AAt(){return process.env.DEBUG}function yAt(e){e.inspectOpts={};let t=Object.keys(as.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=as.inspectOpts[t[r]]}GF.exports=k4()(as);var{formatters:eEe}=GF.exports;eEe.o=function(e){return this.inspectOpts.colors=this.useColors,WF.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};eEe.O=function(e){return this.inspectOpts.colors=this.useColors,WF.inspect(e,this.inspectOpts)}});var rEe=_((o3t,P4)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?P4.exports=Zbe():P4.exports=tEe()});var nEe=_(za=>{"use strict";var vAt=za&&za.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(za,"__esModule",{value:!0});var CAt=require("fs"),bAt=vAt(rEe()),Cv=bAt.default("@kwsites/file-exists");function EAt(e,t,r){Cv("checking %s",e);try{let n=CAt.statSync(e);return n.isFile()&&t?(Cv("[OK] path represents a file"),!0):n.isDirectory()&&r?(Cv("[OK] path represents a directory"),!0):(Cv("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return Cv("[FAIL] path is not accessible: %o",n),!1;throw Cv("[FATAL] %o",n),n}}function _At(e,t=za.READABLE){return EAt(e,(t&za.FILE)>0,(t&za.FOLDER)>0)}za.exists=_At;za.FILE=1;za.FOLDER=2;za.READABLE=za.FILE+za.FOLDER});var iEe=_($F=>{"use strict";function xAt(e){for(var t in e)$F.hasOwnProperty(t)||($F[t]=e[t])}Object.defineProperty($F,"__esModule",{value:!0});xAt(nEe())});var L4=_((c3t,sEe)=>{"use strict";function wAt(e){r.debug=r,r.default=r,r.coerce=l,r.disable=s,r.enable=i,r.enabled=o,r.humanize=MR(),r.destroy=c,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let f=0;for(let p=0;p<u.length;p++)f=(f<<5)-f+u.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(u){let f,p=null,g,m;function y(...v){if(!y.enabled)return;let C=y,E=Number(new Date),w=E-(f||E);C.diff=w,C.prev=f,C.curr=E,f=E,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let B=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,W)=>{if(N==="%%")return"%";B++;let Z=r.formatters[W];if(typeof Z=="function"){let te=v[B];N=Z.call(C,te),v.splice(B,1),B--}return N}),r.formatArgs.call(C,v),(C.log||r.log).apply(C,v)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==r.namespaces&&(g=r.namespaces,m=r.enabled(u)),m),set:v=>{p=v}}),typeof r.init=="function"&&r.init(y),y}function n(u,f){let p=r(this.namespace+(typeof f>"u"?":":f)+u);return p.log=this.log,p}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f,p=(typeof u=="string"?u:"").split(/[\s,]+/),g=p.length;for(f=0;f<g;f++)p[f]&&(u=p[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(u))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}sEe.exports=wAt});var oEe=_((Ja,YF)=>{"use strict";Ja.formatArgs=IAt;Ja.save=BAt;Ja.load=DAt;Ja.useColors=SAt;Ja.storage=TAt();Ja.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ja.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function SAt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function IAt(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+YF.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Ja.log=console.debug||console.log||(()=>{});function BAt(e){try{e?Ja.storage.setItem("debug",e):Ja.storage.removeItem("debug")}catch{}}function DAt(){let e;try{e=Ja.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function TAt(){try{return localStorage}catch{}}YF.exports=L4()(Ja);var{formatters:RAt}=YF.exports;RAt.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var lEe=_((ls,zF)=>{"use strict";var kAt=require("tty"),KF=require("util");ls.init=UAt;ls.log=NAt;ls.formatArgs=FAt;ls.save=PAt;ls.load=LAt;ls.useColors=MAt;ls.destroy=KF.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ls.colors=[6,2,3,4,5,1];try{let e=(N4(),eL(Q4));e&&(e.stderr||e).level>=2&&(ls.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ls.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function MAt(){return"colors"in ls.inspectOpts?!!ls.inspectOpts.colors:kAt.isatty(process.stderr.fd)}function FAt(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+zF.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=QAt()+t+" "+e[0]}function QAt(){return ls.inspectOpts.hideDate?"":new Date().toISOString()+" "}function NAt(...e){return process.stderr.write(KF.formatWithOptions(ls.inspectOpts,...e)+`
`)}function PAt(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function LAt(){return process.env.DEBUG}function UAt(e){e.inspectOpts={};let t=Object.keys(ls.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=ls.inspectOpts[t[r]]}zF.exports=L4()(ls);var{formatters:aEe}=zF.exports;aEe.o=function(e){return this.inspectOpts.colors=this.useColors,KF.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};aEe.O=function(e){return this.inspectOpts.colors=this.useColors,KF.inspect(e,this.inspectOpts)}});var cEe=_((u3t,U4)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?U4.exports=oEe():U4.exports=lEe()});var q4=_(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.createDeferred=Im.deferred=void 0;function O4(){let e,t,r="pending";return{promise:new Promise((i,s)=>{e=i,t=s}),done(i){r==="pending"&&(r="resolved",e(i))},fail(i){r==="pending"&&(r="rejected",t(i))},get fulfilled(){return r!=="pending"},get status(){return r}}}Im.deferred=O4;Im.createDeferred=O4;Im.default=O4});var swe=_((s4t,L1)=>{"use strict";L1.exports.Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/;L1.exports.ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/;L1.exports.ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/});var N8=_((o4t,owe)=>{"use strict";var Q8=swe();owe.exports={isSpaceSeparator(e){return typeof e=="string"&&Q8.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||Q8.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e==="\u200C"||e==="\u200D"||Q8.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}}});var dwe=_((a4t,uwe)=>{"use strict";var cs=N8(),L8,ko,Cf,O1,hg,$c,us,q8,Hx;uwe.exports=function(t,r){L8=String(t),ko="start",Cf=[],O1=0,hg=1,$c=0,us=void 0,q8=void 0,Hx=void 0;do us=eCt(),nCt[ko]();while(us.type!=="eof");return typeof r=="function"?U8({"":Hx},"",r):Hx};function U8(e,t,r){let n=e[t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let i=0;i<n.length;i++){let s=String(i),o=U8(n,s,r);o===void 0?delete n[s]:Object.defineProperty(n,s,{value:o,writable:!0,enumerable:!0,configurable:!0})}else for(let i in n){let s=U8(n,i,r);s===void 0?delete n[i]:Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,t,n)}var jt,Ut,Vx,vf,Er;function eCt(){for(jt="default",Ut="",Vx=!1,vf=1;;){Er=bf();let e=lwe[jt]();if(e)return e}}function bf(){if(L8[O1])return String.fromCodePoint(L8.codePointAt(O1))}function ge(){let e=bf();return e===`
`?(hg++,$c=0):e?$c+=e.length:$c++,e&&(O1+=e.length),e}var lwe={default(){switch(Er){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":ge();return;case"/":ge(),jt="comment";return;case void 0:return ge(),On("eof")}if(cs.isSpaceSeparator(Er)){ge();return}return lwe[ko]()},comment(){switch(Er){case"*":ge(),jt="multiLineComment";return;case"/":ge(),jt="singleLineComment";return}throw qn(ge())},multiLineComment(){switch(Er){case"*":ge(),jt="multiLineCommentAsterisk";return;case void 0:throw qn(ge())}ge()},multiLineCommentAsterisk(){switch(Er){case"*":ge();return;case"/":ge(),jt="default";return;case void 0:throw qn(ge())}ge(),jt="multiLineComment"},singleLineComment(){switch(Er){case`
`:case"\r":case"\u2028":case"\u2029":ge(),jt="default";return;case void 0:return ge(),On("eof")}ge()},value(){switch(Er){case"{":case"[":return On("punctuator",ge());case"n":return ge(),Um("ull"),On("null",null);case"t":return ge(),Um("rue"),On("boolean",!0);case"f":return ge(),Um("alse"),On("boolean",!1);case"-":case"+":ge()==="-"&&(vf=-1),jt="sign";return;case".":Ut=ge(),jt="decimalPointLeading";return;case"0":Ut=ge(),jt="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Ut=ge(),jt="decimalInteger";return;case"I":return ge(),Um("nfinity"),On("numeric",1/0);case"N":return ge(),Um("aN"),On("numeric",NaN);case'"':case"'":Vx=ge()==='"',Ut="",jt="string";return}throw qn(ge())},identifierNameStartEscape(){if(Er!=="u")throw qn(ge());ge();let e=O8();switch(e){case"$":case"_":break;default:if(!cs.isIdStartChar(e))throw awe();break}Ut+=e,jt="identifierName"},identifierName(){switch(Er){case"$":case"_":case"\u200C":case"\u200D":Ut+=ge();return;case"\\":ge(),jt="identifierNameEscape";return}if(cs.isIdContinueChar(Er)){Ut+=ge();return}return On("identifier",Ut)},identifierNameEscape(){if(Er!=="u")throw qn(ge());ge();let e=O8();switch(e){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!cs.isIdContinueChar(e))throw awe();break}Ut+=e,jt="identifierName"},sign(){switch(Er){case".":Ut=ge(),jt="decimalPointLeading";return;case"0":Ut=ge(),jt="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Ut=ge(),jt="decimalInteger";return;case"I":return ge(),Um("nfinity"),On("numeric",vf*(1/0));case"N":return ge(),Um("aN"),On("numeric",NaN)}throw qn(ge())},zero(){switch(Er){case".":Ut+=ge(),jt="decimalPoint";return;case"e":case"E":Ut+=ge(),jt="decimalExponent";return;case"x":case"X":Ut+=ge(),jt="hexadecimal";return}return On("numeric",vf*0)},decimalInteger(){switch(Er){case".":Ut+=ge(),jt="decimalPoint";return;case"e":case"E":Ut+=ge(),jt="decimalExponent";return}if(cs.isDigit(Er)){Ut+=ge();return}return On("numeric",vf*Number(Ut))},decimalPointLeading(){if(cs.isDigit(Er)){Ut+=ge(),jt="decimalFraction";return}throw qn(ge())},decimalPoint(){switch(Er){case"e":case"E":Ut+=ge(),jt="decimalExponent";return}if(cs.isDigit(Er)){Ut+=ge(),jt="decimalFraction";return}return On("numeric",vf*Number(Ut))},decimalFraction(){switch(Er){case"e":case"E":Ut+=ge(),jt="decimalExponent";return}if(cs.isDigit(Er)){Ut+=ge();return}return On("numeric",vf*Number(Ut))},decimalExponent(){switch(Er){case"+":case"-":Ut+=ge(),jt="decimalExponentSign";return}if(cs.isDigit(Er)){Ut+=ge(),jt="decimalExponentInteger";return}throw qn(ge())},decimalExponentSign(){if(cs.isDigit(Er)){Ut+=ge(),jt="decimalExponentInteger";return}throw qn(ge())},decimalExponentInteger(){if(cs.isDigit(Er)){Ut+=ge();return}return On("numeric",vf*Number(Ut))},hexadecimal(){if(cs.isHexDigit(Er)){Ut+=ge(),jt="hexadecimalInteger";return}throw qn(ge())},hexadecimalInteger(){if(cs.isHexDigit(Er)){Ut+=ge();return}return On("numeric",vf*Number(Ut))},string(){switch(Er){case"\\":ge(),Ut+=tCt();return;case'"':if(Vx)return ge(),On("string",Ut);Ut+=ge();return;case"'":if(!Vx)return ge(),On("string",Ut);Ut+=ge();return;case`
`:case"\r":throw qn(ge());case"\u2028":case"\u2029":iCt(Er);break;case void 0:throw qn(ge())}Ut+=ge()},start(){switch(Er){case"{":case"[":return On("punctuator",ge())}jt="value"},beforePropertyName(){switch(Er){case"$":case"_":Ut=ge(),jt="identifierName";return;case"\\":ge(),jt="identifierNameStartEscape";return;case"}":return On("punctuator",ge());case'"':case"'":Vx=ge()==='"',jt="string";return}if(cs.isIdStartChar(Er)){Ut+=ge(),jt="identifierName";return}throw qn(ge())},afterPropertyName(){if(Er===":")return On("punctuator",ge());throw qn(ge())},beforePropertyValue(){jt="value"},afterPropertyValue(){switch(Er){case",":case"}":return On("punctuator",ge())}throw qn(ge())},beforeArrayValue(){if(Er==="]")return On("punctuator",ge());jt="value"},afterArrayValue(){switch(Er){case",":case"]":return On("punctuator",ge())}throw qn(ge())},end(){throw qn(ge())}};function On(e,t){return{type:e,value:t,line:hg,column:$c}}function Um(e){for(let t of e){if(bf()!==t)throw qn(ge());ge()}}function tCt(){switch(bf()){case"b":return ge(),"\b";case"f":return ge(),"\f";case"n":return ge(),`
`;case"r":return ge(),"\r";case"t":return ge(),"	";case"v":return ge(),"\v";case"0":if(ge(),cs.isDigit(bf()))throw qn(ge());return"\0";case"x":return ge(),rCt();case"u":return ge(),O8();case`
`:case"\u2028":case"\u2029":return ge(),"";case"\r":return ge(),bf()===`
`&&ge(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw qn(ge());case void 0:throw qn(ge())}return ge()}function rCt(){let e="",t=bf();if(!cs.isHexDigit(t)||(e+=ge(),t=bf(),!cs.isHexDigit(t)))throw qn(ge());return e+=ge(),String.fromCodePoint(parseInt(e,16))}function O8(){let e="",t=4;for(;t-- >0;){let r=bf();if(!cs.isHexDigit(r))throw qn(ge());e+=ge()}return String.fromCodePoint(parseInt(e,16))}var nCt={start(){if(us.type==="eof")throw Om();P8()},beforePropertyName(){switch(us.type){case"identifier":case"string":q8=us.value,ko="afterPropertyName";return;case"punctuator":U1();return;case"eof":throw Om()}},afterPropertyName(){if(us.type==="eof")throw Om();ko="beforePropertyValue"},beforePropertyValue(){if(us.type==="eof")throw Om();P8()},beforeArrayValue(){if(us.type==="eof")throw Om();if(us.type==="punctuator"&&us.value==="]"){U1();return}P8()},afterPropertyValue(){if(us.type==="eof")throw Om();switch(us.value){case",":ko="beforePropertyName";return;case"}":U1()}},afterArrayValue(){if(us.type==="eof")throw Om();switch(us.value){case",":ko="beforeArrayValue";return;case"]":U1()}},end(){}};function P8(){let e;switch(us.type){case"punctuator":switch(us.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=us.value;break}if(Hx===void 0)Hx=e;else{let t=Cf[Cf.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,q8,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")Cf.push(e),Array.isArray(e)?ko="beforeArrayValue":ko="beforePropertyName";else{let t=Cf[Cf.length-1];t==null?ko="end":Array.isArray(t)?ko="afterArrayValue":ko="afterPropertyValue"}}function U1(){Cf.pop();let e=Cf[Cf.length-1];e==null?ko="end":Array.isArray(e)?ko="afterArrayValue":ko="afterPropertyValue"}function qn(e){return q1(e===void 0?`JSON5: invalid end of input at ${hg}:${$c}`:`JSON5: invalid character '${cwe(e)}' at ${hg}:${$c}`)}function Om(){return q1(`JSON5: invalid end of input at ${hg}:${$c}`)}function awe(){return $c-=5,q1(`JSON5: invalid identifier character at ${hg}:${$c}`)}function iCt(e){console.warn(`JSON5: '${cwe(e)}' in strings is not valid ECMAScript; consider escaping`)}function cwe(e){let t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){let r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function q1(e){let t=new SyntaxError(e);return t.lineNumber=hg,t.columnNumber=$c,t}});var hwe=_((l4t,fwe)=>{"use strict";var V8=N8();fwe.exports=function(t,r,n){let i=[],s="",o,a,l="",c;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(n=r.space,c=r.quote,r=r.replacer),typeof r=="function")a=r;else if(Array.isArray(r)){o=[];for(let y of r){let v;typeof y=="string"?v=y:(typeof y=="number"||y instanceof String||y instanceof Number)&&(v=String(y)),v!==void 0&&o.indexOf(v)<0&&o.push(v)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),typeof n=="number"?n>0&&(n=Math.min(10,Math.floor(n)),l="          ".substr(0,n)):typeof n=="string"&&(l=n.substr(0,10)),u("",{"":t});function u(y,v){let C=v[y];switch(C!=null&&(typeof C.toJSON5=="function"?C=C.toJSON5(y):typeof C.toJSON=="function"&&(C=C.toJSON(y))),a&&(C=a.call(v,y,C)),C instanceof Number?C=Number(C):C instanceof String?C=String(C):C instanceof Boolean&&(C=C.valueOf()),C){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof C=="string")return f(C,!1);if(typeof C=="number")return String(C);if(typeof C=="object")return Array.isArray(C)?m(C):p(C)}function f(y){let v={"'":.1,'"':.2},C={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},E="";for(let B=0;B<y.length;B++){let R=y[B];switch(R){case"'":case'"':v[R]++,E+=R;continue;case"\0":if(V8.isDigit(y[B+1])){E+="\\x00";continue}}if(C[R]){E+=C[R];continue}if(R<" "){let N=R.charCodeAt(0).toString(16);E+="\\x"+("00"+N).substring(N.length);continue}E+=R}let w=c||Object.keys(v).reduce((B,R)=>v[B]<v[R]?B:R);return E=E.replace(new RegExp(w,"g"),C[w]),w+E+w}function p(y){if(i.indexOf(y)>=0)throw TypeError("Converting circular structure to JSON5");i.push(y);let v=s;s=s+l;let C=o||Object.keys(y),E=[];for(let B of C){let R=u(B,y);if(R!==void 0){let N=g(B)+":";l!==""&&(N+=" "),N+=R,E.push(N)}}let w;if(E.length===0)w="{}";else{let B;if(l==="")B=E.join(","),w="{"+B+"}";else{let R=`,
`+s;B=E.join(R),w=`{
`+s+B+`,
`+v+"}"}}return i.pop(),s=v,w}function g(y){if(y.length===0)return f(y,!0);let v=String.fromCodePoint(y.codePointAt(0));if(!V8.isIdStartChar(v))return f(y,!0);for(let C=v.length;C<y.length;C++)if(!V8.isIdContinueChar(String.fromCodePoint(y.codePointAt(C))))return f(y,!0);return y}function m(y){if(i.indexOf(y)>=0)throw TypeError("Converting circular structure to JSON5");i.push(y);let v=s;s=s+l;let C=[];for(let w=0;w<y.length;w++){let B=u(String(w),y);C.push(B!==void 0?B:"null")}let E;if(C.length===0)E="[]";else if(l==="")E="["+C.join(",")+"]";else{let w=`,
`+s,B=C.join(w);E=`[
`+s+B+`,
`+v+"]"}return i.pop(),s=v,E}}});var H8=_((c4t,gwe)=>{"use strict";var sCt=dwe(),oCt=hwe(),aCt={parse:sCt,stringify:oCt};gwe.exports=aCt});var x6=_((QZt,rIe)=>{"use strict";function ri(e,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}ri.prototype.peekAt=function(t){var r=t;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};ri.prototype.get=function(t){return this.peekAt(t)};ri.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};ri.prototype.peekFront=function(){return this.peek()};ri.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(ri.prototype,"length",{get:function(){return this.size()}});ri.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ri.prototype.unshift=function(t){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ri.prototype.shift=function(){var t=this._head;if(t!==this._tail){var r=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};ri.prototype.push=function(t){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=t,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ri.prototype.pop=function(){var t=this._tail;if(t!==this._head){var r=this._list.length;this._tail=t-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=r>>>2&&this._shrinkArray(),n}};ri.prototype.removeOne=function(t){var r=t;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(t<n/2){for(o=t;o>0;o--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(o=n-1-t;o>0;o--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}};ri.prototype.remove=function(t,r){var n=t,i,s=r;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||r<1)){if(n<0&&(n+=o),r===1||!r)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+r>=o)return i=this.toArray(),this.clear(),i;n+r>o&&(r=o-n);var l;for(i=new Array(r),l=0;l<r;l++)i[l]=this._list[this._head+n+l&this._capacityMask];if(n=this._head+n&this._capacityMask,t+r===o){for(this._tail=this._tail-r+a&this._capacityMask,l=r;l>0;l--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(t===0){for(this._head=this._head+r+a&this._capacityMask,l=r-1;l>0;l--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(n<o/2){for(this._head=this._head+t+r+a&this._capacityMask,l=t;l>0;l--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;s>0;)this._list[n=n-1+a&this._capacityMask]=void 0,s--;t<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+a&this._capacityMask,l=o-(r+t);l>0;l--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),i}}};ri.prototype.splice=function(t,r){var n=t;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,o,a,l=arguments.length,c=this._list.length,u=2;if(!i||n<i/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._head=this._head+n+c&this._capacityMask);l>u;)this.unshift(arguments[--l]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(i-(n+r));var f=o.length;for(s=0;s<f;s++)o[s]=this._list[this._head+n+r+s&this._capacityMask];for(r===0?(a=[],n!=i&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._tail=this._tail-f+c&this._capacityMask);u<l;)this.push(arguments[u++]);for(s=0;s<f;s++)this.push(o[s])}return a}else return this.remove(n,r)}};ri.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};ri.prototype.isEmpty=function(){return this._head===this._tail};ri.prototype.toArray=function(){return this._copyArray(!1)};ri.prototype._fromArray=function(t){var r=t.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var i=0;i<r;i++)this._list[i]=t[i]};ri.prototype._copyArray=function(t,r){var n=this._list,i=n.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(r),a=0,l;if(t||this._head>this._tail){for(l=this._head;l<i;l++)o[a++]=n[l];for(l=0;l<this._tail;l++)o[a++]=n[l]}else for(l=this._head;l<this._tail;l++)o[a++]=n[l];return o};ri.prototype._growArray=function(){if(this._head!=0){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};ri.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};ri.prototype._nextPowerOf2=function(t){var r=Math.log(t)/Math.log(2),n=1<<r+1;return Math.max(n,4)};rIe.exports=ri});var hIe=_((tXt,fIe)=>{"use strict";function iIe(e){return Array.isArray(e)?e:[e]}var lIe="",sIe=" ",S6="\\",JCt=/^\s+$/,jCt=/(?:[^\\]|^)\\$/,ZCt=/^\\!/,XCt=/^\\#/,ebt=/\r?\n/g,tbt=/^\.*\/|^\.+$/,I6="/",cIe="node-ignore";typeof Symbol<"u"&&(cIe=Symbol.for("node-ignore"));var oIe=cIe,rbt=(e,t,r)=>Object.defineProperty(e,t,{value:r}),nbt=/([0-z])-([0-z])/g,uIe=()=>!1,ibt=e=>e.replace(nbt,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:lIe),sbt=e=>{let{length:t}=e;return e.slice(0,t-t%2)},obt=[[/\\?\s+$/,e=>e.indexOf("\\")===0?sIe:lIe],[/\\\s/g,()=>sIe],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>S6],[/\\\\/g,()=>S6],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===S6?`\\[${r}${sbt(n)}${i}`:i==="]"&&n.length%2===0?`[${ibt(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],aIe=Object.create(null),abt=(e,t)=>{let r=aIe[e];return r||(r=obt.reduce((n,i)=>n.replace(i[0],i[1].bind(e)),e),aIe[e]=r),t?new RegExp(r,"i"):new RegExp(r)},T6=e=>typeof e=="string",lbt=e=>e&&T6(e)&&!JCt.test(e)&&!jCt.test(e)&&e.indexOf("#")!==0,cbt=e=>e.split(ebt),B6=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},ubt=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(ZCt,"!").replace(XCt,"#");let i=abt(e,t);return new B6(r,e,n,i)},dbt=(e,t)=>{throw new t(e)},If=(e,t,r)=>T6(e)?e?If.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),dIe=e=>tbt.test(e);If.isNotRelative=dIe;If.convert=e=>e;var D6=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){rbt(this,oIe,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[oIe]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(lbt(t)){let r=ubt(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,iIe(T6(t)?cbt(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(s=>{let{negative:o}=s;if(i===o&&n!==i||o&&!n&&!i&&!r)return;s.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let s=t&&If.convert(t);return If(s,t,this._allowRelativePaths?uIe:dbt),this._t(s,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(I6)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let s=this._t(i.join(I6)+I6,r,n,i);if(s.ignored)return r[t]=s;let o=this._testOne(t,n);return r[t]={ignored:o.ignored,unignored:s.unignored||o.unignored}}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return iIe(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},zN=e=>new D6(e),fbt=e=>If(e&&If.convert(e),e,uIe);zN.isPathValid=fbt;zN.default=zN;fIe.exports=zN;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");If.convert=e;let t=/^[a-z]:\//i;If.isNotRelative=r=>t.test(r)||dIe(r)}});var $bt={};XP($bt,{AugmentExtension:()=>Hm,_exportedForTesting:()=>Gbt,activate:()=>Wbt,getSessionId:()=>qIe});module.exports=eL($bt);var YC;function AY(e){if(YC){YC.warn("Attempting to initialize logger when one is already configured. Keeping existing logger.");return}YC=e}function ut(e){if(!YC)throw new Error("Logger not initialized. Call setLibraryLogger() before using getLogger().");return YC.child({prefix:e})}var KC=class{static _instance=void 0;static setPluginFileStore(t){if(this._instance!==void 0){ut("PluginFileStore").warn("Attempting to initialize client workspaces when one is already configured. Keeping existing client workspaces.");return}this._instance=t}static getPluginFileStore(){if(this._instance===void 0)throw new Error("PluginFileStore not set");return this._instance}static reset(){this._instance=void 0}},yY=e=>KC.setPluginFileStore(e),qg=()=>KC.getPluginFileStore(),vY=()=>KC.reset();var PS=class e{_logger=ut("AgentShardStorage");static storagePathKeyPrefix="agent-edit-shard-storage";static manifestKey="manifest";static serializedStoreKey="serialized-store";async save(t){await this._saveJson(this._getStoragePath(xd.serializedStore,e.serializedStoreKey),t)}async load(){return this._loadJson(this._getStoragePath(xd.serializedStore,e.serializedStoreKey))}async _saveJson(t,r){let n=Buffer.from(JSON.stringify(r),"utf8");await qg().saveAsset(t,new Uint8Array(n))}async _loadJson(t){let r=await qg().loadAsset(t);if(!(!r||r.length===0))return JSON.parse(Buffer.from(r).toString("utf8"))}_getStoragePath(t,r){return`agent-edits/${t}/${e.storagePathKeyPrefix}-${r}.json`}async saveShard(t,r){await this._saveJson(this._getStoragePath(xd.shards,t),r)}async loadShard(t){return this._loadJson(this._getStoragePath(xd.shards,t))}async deleteShard(t){await qg().deleteAsset(this._getStoragePath(xd.shards,t))}async saveManifest(t){await this._saveJson(this._getStoragePath(xd.manifest,e.manifestKey),t)}async loadManifest(){return this._loadJson(this._getStoragePath(xd.manifest,e.manifestKey))}},xd;(function(e){e.shards="shards",e.manifest="manifest",e.serializedStore="serialized-store"})(xd||(xd={}));var zC=require("path");function Mt(e,t,r=!1){let n=(0,zC.join)(e,t);return r&&!n.endsWith(zC.sep)&&(n+=zC.sep),n}var Le=class e{rootPath;relPath;constructor(t,r){this.rootPath=t,this.relPath=r}static from(t){return new e(t.rootPath,t.relPath)}get absPath(){return Mt(this.rootPath,this.relPath)}equals(t){return e.equals(this,t)}static equals(t,r){if(t===r)return!0;if(t==null||r==null)return!1;let n=CY(t)?Mt(t.rootPath,t.relPath):t.fsPath,i=CY(r)?Mt(r.rootPath,r.relPath):r.fsPath;return n===i}};function CY(e){return e!=null&&typeof e=="object"&&("rootPath"in e||"relPath"in e)}function _A(e){return typeof e=="object"&&e!==null&&"document"in e&&typeof e.document=="object"&&e.document!==null&&"path"in e.document&&!("checkpointId"in e)}function xA(e){return typeof e=="object"&&e!==null&&"documentMetadata"in e&&typeof e.documentMetadata=="object"&&e.documentMetadata!==null&&"path"in e.documentMetadata&&!("document"in e)}function bY(e){return typeof e!="string"?{isValid:!1,reason:"Shard ID must be a string"}:e.length===0?{isValid:!1,reason:"Shard ID cannot be empty"}:{isValid:!0}}function tL(e){if(typeof e.version!="number"||typeof e.lastUpdated!="number")return{isValid:!1,reason:"Invalid manifest version or lastUpdated timestamp"};if(!e.shards||typeof e.shards!="object")return{isValid:!1,reason:"Missing or invalid shards object"};for(let[t,r]of Object.entries(e.shards)){let n=bY(t);if(!n.isValid)return n;if(!r||typeof r!="object")return{isValid:!1,reason:`Invalid metadata object for shard ${t}`};if(typeof r.size!="number")return{isValid:!1,reason:`Invalid size field for shard ${t}`};if(typeof r.checkpointCount!="number")return{isValid:!1,reason:`Invalid checkpointCount field for shard ${t}`};if(typeof r.lastModified!="number")return{isValid:!1,reason:`Invalid lastModified field for shard ${t}`};if(!Array.isArray(r.checkpointDocumentIds))return{isValid:!1,reason:`Invalid checkpointDocumentIds array for shard ${t}`};for(let i of r.checkpointDocumentIds)if(typeof i!="string"||i.length===0)return{isValid:!1,reason:`Invalid checkpoint document ID in shard ${t}: ${i}`}}return{isValid:!0}}function EY(e){let t={};for(let[n,i]of Object.entries(e.shards))AFe({id:n,checkpoints:{},metadata:i}).isValid&&(t[n]=i);let r=1;return typeof e.version=="number"&&e.version>=1?r=e.version+1:r=1,{...e,version:r,lastUpdated:Date.now(),shards:t}}function AFe(e){let t=bY(e.id);if(!t.isValid)return t;let r=tL({version:1,lastUpdated:Date.now(),shards:{[e.id]:e.metadata}});if(!r.isValid)return r;if(typeof e.checkpoints!="object"||!e.checkpoints)return{isValid:!1,reason:"Missing or invalid checkpoints object"};for(let[s,o]of Object.entries(e.checkpoints)){if(typeof s!="string"||s.length===0)return{isValid:!1,reason:`Invalid checkpoint ID: ${s}`};if(!Array.isArray(o))return{isValid:!1,reason:`Checkpoints for ID ${s} must be an array`};for(let a of o){if(typeof a!="object"||!a||typeof a.sourceToolCallRequestId!="string"||typeof a.timestamp!="number"||typeof a.conversationId!="string")return{isValid:!1,reason:`Invalid checkpoint common properties in ID ${s}`};if(_A(a)){let l=yFe(a.document,s);if(!l.isValid)return l}else if(xA(a)){if(typeof a.documentMetadata!="object"||!a.documentMetadata)return{isValid:!1,reason:`Invalid DehydratedCheckpoint structure in ID ${s}`}}else return{isValid:!1,reason:`Unknown checkpoint type in ID ${s}`}}}let n=new Set(Object.keys(e.checkpoints)),i=new Set(e.metadata.checkpointDocumentIds);if(n.size!==i.size)return{isValid:!1,reason:"Mismatch between checkpoint IDs in metadata and actual checkpoints"};for(let s of n)if(!i.has(s))return{isValid:!1,reason:"Mismatch between checkpoint IDs in metadata and actual checkpoints"};return{isValid:!0}}function yFe(e,t){if(typeof e!="object"||!e)return{isValid:!1,reason:`Invalid SerializedCheckpoint structure in ID ${t}`};let r=e;if(r.originalCode!==void 0&&typeof r.originalCode!="string"||r.modifiedCode!==void 0&&typeof r.modifiedCode!="string")return{isValid:!1,reason:`Invalid SerializedCheckpoint structure in ID ${t}`};if(typeof r.path!="object"||!r.path)return{isValid:!1,reason:`Invalid SerializedCheckpoint structure in ID ${t}`};let n=r.path;return typeof n.rootPath!="string"||typeof n.relPath!="string"?{isValid:!1,reason:`Invalid SerializedCheckpoint structure in ID ${t}`}:{isValid:!0}}function rL(e,t,r=!0){let{minTimestamp:n,maxTimestamp:i,minIdx:s,maxIdx:o}=t;return e.filter((a,l)=>{let c=(n===void 0||a.timestamp>=n)&&(i===void 0||a.timestamp<i),u=(s===void 0||l>=s)&&(o===void 0||l<o),f=n!==void 0||i!==void 0,p=s!==void 0||o!==void 0;if(!(f||p))return r;let m=(!f||c)&&(!p||u);return r?m:!m})}var Vg=class{_disposables=[];add(t){if(t===void 0)throw new Error("Attempt to add undefined disposable to DisposableCollection");return this._disposables.push(t),t}addAll(...t){t.forEach(r=>this.add(r))}adopt(t){this._disposables.push(...t._disposables),t._disposables.length=0}dispose(){for(let t of this._disposables)t.dispose();this._disposables.length=0}};var fl=class{_disposables=new Vg;_priorityDisposables=new Vg;constructor(t=new Vg,r=new Vg){this._disposables.adopt(t),this._priorityDisposables.adopt(r)}addDisposable(t,r=!1){return r?this._priorityDisposables.add(t):this._disposables.add(t)}addDisposables(...t){this._disposables.addAll(...t)}dispose(){this._priorityDisposables.dispose(),this._disposables.dispose()}};var un=class e extends fl{filePath;_originalCode;_modifiedCode;_opts;static EMPTY_PATH_NAME={rootPath:"",relPath:""};_originalListeners;_modifiedListeners;_isUntitled;constructor(t,r,n,i){super(),this.filePath=t,this._originalCode=r,this._modifiedCode=n,this._opts=i,this._isUntitled=this._opts.isUntitled??(()=>!1),this._originalListeners=new Set,this._modifiedListeners=new Set,this.addDisposable({dispose:()=>this._originalListeners.clear()}),this.addDisposable({dispose:()=>this._modifiedListeners.clear()}),this._opts?.logger?.debug(this.toString("constructor",!0))}toString(t,r=!1){let n=this.isUntitled?" (untitled)":"",i=this._originalCode!==this._modifiedCode,s=this._originalCode?this._originalCode.split(`
`).length:0,o=this._modifiedCode?this._modifiedCode.split(`
`).length:0,a=this._originalCode!==void 0,l=this._modifiedCode!==void 0;return r?[`[${t}] DiffViewDocument`,"----------------------------------------",`Path      : ${this.filePath.absPath}${n}`,`Original  : ${a?`${s} lines`:"(file deleted)"}`,`Modified  : ${l?`${o} lines`:"(file deleted)"}`,"----------------------------------------"].join(`
`):[`[${t}] DiffViewDocument`,"----------------------------------------",`Path      : ${this.filePath.absPath}${n}`,`Status    : ${i?"Modified":"Unchanged"}`,`Orig Size : ${a?`${this._originalCode?.length} chars`:"(file deleted)"}`,`Mod Size  : ${l?`${this._modifiedCode?.length} chars`:"(file deleted)"}`,"","Original Code:",a?this._originalCode||"(empty)":"(file deleted)","","Modified Code:",l?this._modifiedCode||"(empty)":"(file deleted)","----------------------------------------"].join(`
`)}static empty(){return new e(Le.from(e.EMPTY_PATH_NAME),"","",{})}static deleted(t){return new e(t,void 0,void 0,{})}get isEmptyDocument(){return this.filePath.equals(e.EMPTY_PATH_NAME)}get absPath(){return this.filePath.absPath}get originalCode(){return this.isEmptyDocument?"":this._originalCode}get modifiedCode(){return this.isEmptyDocument?"":this._modifiedCode}get isUntitled(){return this._isUntitled(this.filePath)}onOriginalUpdated=t=>(this._originalListeners.add(t),{dispose:()=>this._originalListeners.delete(t)});onModifiedUpdated=t=>(this._modifiedListeners.add(t),{dispose:()=>this._modifiedListeners.delete(t)});updateOriginal=t=>this.originalCode===t?!1:(this._originalCode=t,this._originalListeners.forEach(r=>r(this)),!0);updateBuffer=t=>this.modifiedCode===t?!1:(this._modifiedCode=t,this._modifiedListeners.forEach(r=>r(this)),!0);updateCodeVersions=(t,r)=>{let n=!1;return t===void 0&&r===void 0?(n=this.updateOriginal(void 0)||n,n=this.updateBuffer(void 0)||n,n):(t!==void 0&&(n=this.updateOriginal(t)||n),r!==void 0&&(n=this.updateBuffer(r)||n),n)}};var wA=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,xY=new Set,nL=typeof process=="object"&&process?process:{},wY=(e,t,r,n)=>{typeof nL.emitWarning=="function"?nL.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)},LS=globalThis.AbortController,_Y=globalThis.AbortSignal;if(typeof LS>"u"){_Y=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},LS=class{constructor(){t()}signal=new _Y;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let e=nL.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,wY("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var vFe=e=>!xY.has(e),gEt=Symbol("type"),Vf=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),SY=e=>Vf(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?SA:null:null,SA=class extends Array{constructor(t){super(t),this.fill(0)}},iL=class e{heap;length;static#e=!1;static create(t){let r=SY(t);if(!r)return[];e.#e=!0;let n=new e(t,r);return e.#e=!1,n}constructor(t,r){if(!e.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Hf=class e{#e;#t;#i;#n;#r;#l;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#o;#u;#d;#a;#s;#p;#A;#g;#f;#C;#h;#b;#E;#y;#_;#B;#m;static unsafeExposeInternals(t){return{starts:t.#E,ttls:t.#y,sizes:t.#b,keyMap:t.#d,keyList:t.#a,valList:t.#s,next:t.#p,prev:t.#A,get head(){return t.#g},get tail(){return t.#f},free:t.#C,isBackgroundFetch:r=>t.#c(r),backgroundFetch:(r,n,i,s)=>t.#F(r,n,i,s),moveToTail:r=>t.#R(r),indexes:r=>t.#x(r),rindexes:r=>t.#w(r),isStale:r=>t.#v(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#o}get fetchMethod(){return this.#r}get memoMethod(){return this.#l}get dispose(){return this.#i}get disposeAfter(){return this.#n}constructor(t){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:p,maxSize:g=0,maxEntrySize:m=0,sizeCalculation:y,fetchMethod:v,memoMethod:C,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:w,allowStaleOnFetchRejection:B,allowStaleOnFetchAbort:R,ignoreFetchAbort:N}=t;if(r!==0&&!Vf(r))throw new TypeError("max option must be a nonnegative integer");let W=r?SY(r):Array;if(!W)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=g,this.maxEntrySize=m||this.#t,this.sizeCalculation=y,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(C!==void 0&&typeof C!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#l=C,v!==void 0&&typeof v!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#r=v,this.#B=!!v,this.#d=new Map,this.#a=new Array(r).fill(void 0),this.#s=new Array(r).fill(void 0),this.#p=new W(r),this.#A=new W(r),this.#g=0,this.#f=0,this.#C=iL.create(r),this.#o=0,this.#u=0,typeof c=="function"&&(this.#i=c),typeof u=="function"?(this.#n=u,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#_=!!this.#i,this.#m=!!this.#n,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!E,this.allowStaleOnFetchRejection=!!B,this.allowStaleOnFetchAbort=!!R,this.ignoreFetchAbort=!!N,this.maxEntrySize!==0){if(this.#t!==0&&!Vf(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Vf(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#q()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!w,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Vf(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!Vf(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#Q()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Z="LRU_CACHE_UNBOUNDED";vFe(Z)&&(xY.add(Z),wY("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Z,e))}}getRemainingTTL(t){return this.#d.has(t)?1/0:0}#Q(){let t=new SA(this.#e),r=new SA(this.#e);this.#y=t,this.#E=r,this.#N=(s,o,a=wA.now())=>{if(r[s]=o!==0?a:0,t[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#v(s)&&this.#S(this.#a[s],"expire")},o+1);l.unref&&l.unref()}},this.#D=s=>{r[s]=t[s]!==0?wA.now():0},this.#I=(s,o)=>{if(t[o]){let a=t[o],l=r[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=n||i();let c=s.now-l;s.remainingTTL=a-c}};let n=0,i=()=>{let s=wA.now();if(this.ttlResolution>0){n=s;let o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#d.get(s);if(o===void 0)return 0;let a=t[o],l=r[o];if(!a||!l)return 1/0;let c=(n||i())-l;return a-c},this.#v=s=>{let o=r[s],a=t[s];return!!a&&!!o&&(n||i())-o>a}}#D=()=>{};#I=()=>{};#N=()=>{};#v=()=>!1;#q(){let t=new SA(this.#e);this.#u=0,this.#b=t,this.#T=r=>{this.#u-=t[r],t[r]=0},this.#P=(r,n,i,s)=>{if(this.#c(n))return 0;if(!Vf(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!Vf(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#k=(r,n,i)=>{if(t[r]=n,this.#t){let s=this.#t-t[r];for(;this.#u>s;)this.#M(!0)}this.#u+=t[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#T=t=>{};#k=(t,r,n)=>{};#P=(t,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#x({allowStale:t=this.allowStale}={}){if(this.#o)for(let r=this.#f;!(!this.#L(r)||((t||!this.#v(r))&&(yield r),r===this.#g));)r=this.#A[r]}*#w({allowStale:t=this.allowStale}={}){if(this.#o)for(let r=this.#g;!(!this.#L(r)||((t||!this.#v(r))&&(yield r),r===this.#f));)r=this.#p[r]}#L(t){return t!==void 0&&this.#d.get(this.#a[t])===t}*entries(){for(let t of this.#x())this.#s[t]!==void 0&&this.#a[t]!==void 0&&!this.#c(this.#s[t])&&(yield[this.#a[t],this.#s[t]])}*rentries(){for(let t of this.#w())this.#s[t]!==void 0&&this.#a[t]!==void 0&&!this.#c(this.#s[t])&&(yield[this.#a[t],this.#s[t]])}*keys(){for(let t of this.#x()){let r=this.#a[t];r!==void 0&&!this.#c(this.#s[t])&&(yield r)}}*rkeys(){for(let t of this.#w()){let r=this.#a[t];r!==void 0&&!this.#c(this.#s[t])&&(yield r)}}*values(){for(let t of this.#x())this.#s[t]!==void 0&&!this.#c(this.#s[t])&&(yield this.#s[t])}*rvalues(){for(let t of this.#w())this.#s[t]!==void 0&&!this.#c(this.#s[t])&&(yield this.#s[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,r={}){for(let n of this.#x()){let i=this.#s[n],s=this.#c(i)?i.__staleWhileFetching:i;if(s!==void 0&&t(s,this.#a[n],this))return this.get(this.#a[n],r)}}forEach(t,r=this){for(let n of this.#x()){let i=this.#s[n],s=this.#c(i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,this.#a[n],this)}}rforEach(t,r=this){for(let n of this.#w()){let i=this.#s[n],s=this.#c(i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,this.#a[n],this)}}purgeStale(){let t=!1;for(let r of this.#w({allowStale:!0}))this.#v(r)&&(this.#S(this.#a[r],"expire"),t=!0);return t}info(t){let r=this.#d.get(t);if(r===void 0)return;let n=this.#s[r],i=this.#c(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#y&&this.#E){let o=this.#y[r],a=this.#E[r];if(o&&a){let l=o-(wA.now()-a);s.ttl=l,s.start=Date.now()}}return this.#b&&(s.size=this.#b[r]),s}dump(){let t=[];for(let r of this.#x({allowStale:!0})){let n=this.#a[r],i=this.#s[r],s=this.#c(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let o={value:s};if(this.#y&&this.#E){o.ttl=this.#y[r];let a=wA.now()-this.#E[r];o.start=Math.floor(Date.now()-a)}this.#b&&(o.size=this.#b[r]),t.unshift([n,o])}return t}load(t){this.clear();for(let[r,n]of t){if(n.start){let i=Date.now()-n.start;n.start=wA.now()-i}this.set(r,n.value,n)}}set(t,r,n={}){if(r===void 0)return this.delete(t),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,u=this.#P(t,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#S(t,"set"),this;let f=this.#o===0?void 0:this.#d.get(t);if(f===void 0)f=this.#o===0?this.#f:this.#C.length!==0?this.#C.pop():this.#o===this.#e?this.#M(!1):this.#o,this.#a[f]=t,this.#s[f]=r,this.#d.set(t,f),this.#p[this.#f]=f,this.#A[f]=this.#f,this.#f=f,this.#o++,this.#k(f,u,l),l&&(l.set="add"),c=!1;else{this.#R(f);let p=this.#s[f];if(r!==p){if(this.#B&&this.#c(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:g}=p;g!==void 0&&!o&&(this.#_&&this.#i?.(g,t,"set"),this.#m&&this.#h?.push([g,t,"set"]))}else o||(this.#_&&this.#i?.(p,t,"set"),this.#m&&this.#h?.push([p,t,"set"]));if(this.#T(f),this.#k(f,u,l),this.#s[f]=r,l){l.set="replace";let g=p&&this.#c(p)?p.__staleWhileFetching:p;g!==void 0&&(l.oldValue=g)}}else l&&(l.set="update")}if(i!==0&&!this.#y&&this.#Q(),this.#y&&(c||this.#N(f,i,s),l&&this.#I(l,f)),!o&&this.#m&&this.#h){let p=this.#h,g;for(;g=p?.shift();)this.#n?.(...g)}return this}pop(){try{for(;this.#o;){let t=this.#s[this.#g];if(this.#M(!0),this.#c(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#m&&this.#h){let t=this.#h,r;for(;r=t?.shift();)this.#n?.(...r)}}}#M(t){let r=this.#g,n=this.#a[r],i=this.#s[r];return this.#B&&this.#c(i)?i.__abortController.abort(new Error("evicted")):(this.#_||this.#m)&&(this.#_&&this.#i?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#T(r),t&&(this.#a[r]=void 0,this.#s[r]=void 0,this.#C.push(r)),this.#o===1?(this.#g=this.#f=0,this.#C.length=0):this.#g=this.#p[r],this.#d.delete(n),this.#o--,r}has(t,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=this.#d.get(t);if(s!==void 0){let o=this.#s[s];if(this.#c(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#v(s))i&&(i.has="stale",this.#I(i,s));else return n&&this.#D(s),i&&(i.has="hit",this.#I(i,s)),!0}else i&&(i.has="miss");return!1}peek(t,r={}){let{allowStale:n=this.allowStale}=r,i=this.#d.get(t);if(i===void 0||!n&&this.#v(i))return;let s=this.#s[i];return this.#c(s)?s.__staleWhileFetching:s}#F(t,r,n,i){let s=r===void 0?void 0:this.#s[r];if(this.#c(s))return s;let o=new LS,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:n,context:i},c=(y,v=!1)=>{let{aborted:C}=o.signal,E=n.ignoreFetchAbort&&y!==void 0;if(n.status&&(C&&!v?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,E&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),C&&!E&&!v)return f(o.signal.reason);let w=g;return this.#s[r]===g&&(y===void 0?w.__staleWhileFetching?this.#s[r]=w.__staleWhileFetching:this.#S(t,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(t,y,l.options))),y},u=y=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=y),f(y)),f=y=>{let{aborted:v}=o.signal,C=v&&n.allowStaleOnFetchAbort,E=C||n.allowStaleOnFetchRejection,w=E||n.noDeleteOnFetchRejection,B=g;if(this.#s[r]===g&&(!w||B.__staleWhileFetching===void 0?this.#S(t,"fetch"):C||(this.#s[r]=B.__staleWhileFetching)),E)return n.status&&B.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),B.__staleWhileFetching;if(B.__returned===B)throw y},p=(y,v)=>{let C=this.#r?.(t,s,l);C&&C instanceof Promise&&C.then(E=>y(E===void 0?void 0:E),v),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(y(void 0),n.allowStaleOnFetchAbort&&(y=E=>c(E,!0)))})};n.status&&(n.status.fetchDispatched=!0);let g=new Promise(p).then(c,u),m=Object.assign(g,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(t,m,{...l.options,status:void 0}),r=this.#d.get(t)):this.#s[r]=m,m}#c(t){if(!this.#B)return!1;let r=t;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof LS}async fetch(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:y,forceRefresh:v=!1,status:C,signal:E}=r;if(!this.#B)return C&&(C.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:C});let w={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:m,ignoreFetchAbort:g,status:C,signal:E},B=this.#d.get(t);if(B===void 0){C&&(C.fetch="miss");let R=this.#F(t,B,w,y);return R.__returned=R}else{let R=this.#s[B];if(this.#c(R)){let Y=n&&R.__staleWhileFetching!==void 0;return C&&(C.fetch="inflight",Y&&(C.returnedStale=!0)),Y?R.__staleWhileFetching:R.__returned=R}let N=this.#v(B);if(!v&&!N)return C&&(C.fetch="hit"),this.#R(B),i&&this.#D(B),C&&this.#I(C,B),R;let W=this.#F(t,B,w,y),te=W.__staleWhileFetching!==void 0&&n;return C&&(C.fetch=N?"stale":"refresh",te&&N&&(C.returnedStale=!0)),te?W.__staleWhileFetching:W.__returned=W}}async forceFetch(t,r={}){let n=await this.fetch(t,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(t,r={}){let n=this.#l;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=r,a=this.get(t,o);if(!s&&a!==void 0)return a;let l=n(t,a,{options:o,context:i});return this.set(t,l,o),l}get(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=this.#d.get(t);if(a!==void 0){let l=this.#s[a],c=this.#c(l);return o&&this.#I(o,a),this.#v(a)?(o&&(o.get="stale"),c?(o&&n&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?l.__staleWhileFetching:void 0):(s||this.#S(t,"expire"),o&&n&&(o.returnedStale=!0),n?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#R(a),i&&this.#D(a),l))}else o&&(o.get="miss")}#U(t,r){this.#A[r]=t,this.#p[t]=r}#R(t){t!==this.#f&&(t===this.#g?this.#g=this.#p[t]:this.#U(this.#A[t],this.#p[t]),this.#U(this.#f,t),this.#f=t)}delete(t){return this.#S(t,"delete")}#S(t,r){let n=!1;if(this.#o!==0){let i=this.#d.get(t);if(i!==void 0)if(n=!0,this.#o===1)this.#O(r);else{this.#T(i);let s=this.#s[i];if(this.#c(s)?s.__abortController.abort(new Error("deleted")):(this.#_||this.#m)&&(this.#_&&this.#i?.(s,t,r),this.#m&&this.#h?.push([s,t,r])),this.#d.delete(t),this.#a[i]=void 0,this.#s[i]=void 0,i===this.#f)this.#f=this.#A[i];else if(i===this.#g)this.#g=this.#p[i];else{let o=this.#A[i];this.#p[o]=this.#p[i];let a=this.#p[i];this.#A[a]=this.#A[i]}this.#o--,this.#C.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,s;for(;s=i?.shift();)this.#n?.(...s)}return n}clear(){return this.#O("delete")}#O(t){for(let r of this.#w({allowStale:!0})){let n=this.#s[r];if(this.#c(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#a[r];this.#_&&this.#i?.(n,i,t),this.#m&&this.#h?.push([n,i,t])}}if(this.#d.clear(),this.#s.fill(void 0),this.#a.fill(void 0),this.#y&&this.#E&&(this.#y.fill(0),this.#E.fill(0)),this.#b&&this.#b.fill(0),this.#g=0,this.#f=0,this.#C.length=0,this.#u=0,this.#o=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var JC=new Hf({ttl:1e3*60*5,max:1e3,updateAgeOnGet:!0});function IY(e){let{conversationId:t,sourceToolCallRequestId:r,timestamp:n}=e,{path:i}=e.documentMetadata,o=(i.rootPath?`${i.rootPath}/${i.relPath}`:i.relPath).replace(/[/\\:*?"<>|]/g,"_");return`checkpoint-documents/${t}/document-${o}-${n}-${r}.json`}function CFe(e){return{path:{rootPath:e.rootPath,relPath:e.relPath}}}async function BY(e,t){let r=ut("CheckpointHydration");try{if(_A(e))return bFe(e,t,r);if(xA(e))return await EFe(e,r)}catch(n){r.warn(`Failed to hydrate checkpoint: ${String(n)}`)}return xFe(e)}function bFe(e,t,r){let n=e.document,i=Le.from(n.path),s=new un(i,n.originalCode,n.modifiedCode,{});return s.filePath.absPath!==i.absPath&&r.warn(`Document path mismatch: document has ${s.filePath.absPath}, but path parameter is ${i.absPath}`),{sourceToolCallRequestId:e.sourceToolCallRequestId,timestamp:e.timestamp,conversationId:e.conversationId,document:s}}async function EFe(e,t){let r=`${e.conversationId}-${e.sourceToolCallRequestId}-${e.timestamp}`;if(JC.has(r))return t.debug(`Cache hit for checkpoint: ${r}`),{sourceToolCallRequestId:e.sourceToolCallRequestId,timestamp:e.timestamp,conversationId:e.conversationId,document:JC.get(r)};t.debug(`Loading document for checkpoint: ${e.sourceToolCallRequestId}`);let n=IY(e),i=await qg().loadAsset(n);if(!i||i.length===0)throw new Error(`Checkpoint document not found at: ${n}`);let s=_Fe(i),o=(()=>{let a=Le.from(s.path),l=new un(a,s.originalCode,s.modifiedCode,{});return JC.set(r,l),l})();return JC.set(r,o),{sourceToolCallRequestId:e.sourceToolCallRequestId,timestamp:e.timestamp,conversationId:e.conversationId,document:o}}function _Fe(e){try{let t=JSON.parse(Buffer.from(e).toString("utf8"));if(!t||typeof t!="object")throw new Error("Invalid document format");return t}catch(t){throw new Error(`Failed to parse checkpoint document: ${t instanceof Error?t.message:String(t)}`)}}function xFe(e){return{sourceToolCallRequestId:e.sourceToolCallRequestId,timestamp:e.timestamp,conversationId:e.conversationId,document:un.empty()}}async function DY(e,t=!1){let r=ut("CheckpointHydration"),n=CFe(e.document.filePath);return t&&await wFe(e,n,r),{sourceToolCallRequestId:e.sourceToolCallRequestId,timestamp:e.timestamp,conversationId:e.conversationId,documentMetadata:n}}async function wFe(e,t,r){r.debug(`Storing document for checkpoint: ${e.sourceToolCallRequestId}`);try{let n=SFe(e.document),i={sourceToolCallRequestId:e.sourceToolCallRequestId,timestamp:e.timestamp,conversationId:e.conversationId,documentMetadata:t},s=IY(i);await qg().saveAsset(s,Buffer.from(JSON.stringify(n),"utf8"));let o=`${e.conversationId}-${e.sourceToolCallRequestId}-${e.timestamp}`;JC.set(o,e.document)}catch(n){r.error(`Failed to store checkpoint document: ${String(n)}`)}}function SFe(e){return{path:{rootPath:e.filePath.rootPath,relPath:e.filePath.relPath},originalCode:e.originalCode,modifiedCode:e.modifiedCode}}var jC=class e{_id;_checkpointDocumentIdFn;_checkpoints=new Map;_lastModified=Date.now();_isDirty=!1;_dirtyCheckpoints=new Set;constructor(t,r){this._id=t,this._checkpointDocumentIdFn=r}static async fromSerialized(t,r,n){if(r.id!==t)throw new Error(`Shard ID mismatch: expected ${t}, got ${r.id}`);try{let i=new e(t,n);for(let s of Object.entries(r.checkpoints))for(let o of s[1]){let a;if(_A(o))a=Le.from(o.document.path);else if(xA(o))a=Le.from(o.documentMetadata.path);else{ut("ShardData").warn(`Unknown checkpoint format: ${JSON.stringify(o)}`);continue}let l={conversationId:o.conversationId,path:a},c=await BY(o,a);i.addCheckpoint(l,c)}return i}catch(i){let s=`Failed to deserialize shard: ${i instanceof Error?i.message:String(i)}`;throw new Error(s)}}get id(){return this._id}get size(){return Array.from(this._checkpoints.values()).reduce((t,r)=>t+r.reduce((n,i)=>n+(i.document.originalCode?i.document.originalCode.length:0)+(i.document.modifiedCode?i.document.modifiedCode.length:0),0),0)}get checkpointCount(){return Array.from(this._checkpoints.values()).reduce((t,r)=>t+r.length,0)}get lastModified(){return this._lastModified}get checkpointDocumentIds(){return Array.from(this._checkpoints.keys())}getCheckpointsById(t){return this._checkpoints.get(t)}async serialize(){try{let t={id:this.id,checkpoints:{},metadata:this.getMetadata()};for(let r of this.checkpointDocumentIds){let n=this.getCheckpointsById(r);n&&(t.checkpoints[r]=await Promise.all(n.map(async i=>{let s=this.isCheckpointDirty(i),o=await DY(i,s);return this.markCheckpointClean(i),o})))}return t}catch(t){let r=`Failed to serialize shard: ${t instanceof Error?t.message:String(t)}`;throw new Error(r)}}getMetadata(){return{checkpointDocumentIds:this.checkpointDocumentIds,size:this.size,checkpointCount:this.checkpointCount,lastModified:this._lastModified}}get isDirty(){return this._isDirty}clearDirty(){this._isDirty=!1,this._dirtyCheckpoints.clear()}isCheckpointDirty(t){return this._dirtyCheckpoints.has(t.sourceToolCallRequestId)}markCheckpointDirty(t){this._dirtyCheckpoints.add(t.sourceToolCallRequestId),this._isDirty=!0}markCheckpointClean(t){this._dirtyCheckpoints.delete(t.sourceToolCallRequestId)}hasKey(t){return this._checkpoints.has(this._checkpointDocumentIdFn(t))}getAllCheckpoints(){return Array.from(this._checkpoints.values()).flat()}getAllCheckpointsSorted(){return this.getAllCheckpoints().sort((t,r)=>t.timestamp-r.timestamp)}get orderedCheckpointsByTime(){return this.getAllCheckpointsSorted()}get totalCheckpointCount(){return this.checkpointCount}getCheckpointNumberForToolCall(t){let r=this.orderedCheckpointsByTime.findIndex(n=>n.sourceToolCallRequestId===t);return r===-1?void 0:r}getCheckpointBySourceId(t){return this.getAllCheckpoints().find(r=>r.sourceToolCallRequestId===t)}getCheckpoints(t,r){let n=this._checkpoints.get(this._checkpointDocumentIdFn(t));if(!n?.length)return;if(!r)return n;let i=rL(n,r);return i.length>0?i:[]}getLatestCheckpoint(t){let r=this._checkpoints.get(this._checkpointDocumentIdFn(t));return r?.[r.length-1]}addCheckpoint(t,r){let n=this._checkpointDocumentIdFn(t),s=[...this._checkpoints.get(n)||[],r].sort((o,a)=>o.timestamp-a.timestamp);this._checkpoints.set(n,s),this.markCheckpointDirty(r),this._lastModified=Date.now()}updateCheckpoint(t,r){let n=this._checkpointDocumentIdFn(t),i=this._checkpoints.get(n)||[],s=i.findIndex(o=>o.sourceToolCallRequestId===r.sourceToolCallRequestId);s!==-1&&(i[s]=r,this._checkpoints.set(n,i),this.markCheckpointDirty(r),this._lastModified=Date.now())}getAllTrackedConversationIds(){let t=new Set;for(let r of this.getAllCheckpoints())t.add(r.conversationId);return Array.from(t)}getAllTrackedFilePaths(t){let r=new Map;for(let n of this.getAllCheckpoints())n.conversationId===t&&r.set(n.document.filePath.absPath,n.document.filePath);return Array.from(r.values())}removeCheckpoint(t,r){let n=this._checkpointDocumentIdFn(t),i=this._checkpoints.get(n);if(!i?.length)return!1;if(!r)return this._checkpoints.delete(n),this._lastModified=Date.now(),this._isDirty=!0,!0;let s=rL(i,r,!1);return s.length===i.length?!1:(s.length===0?this._checkpoints.delete(n):this._checkpoints.set(n,s),this._lastModified=Date.now(),this._isDirty=!0,!0)}clear(){this._checkpoints.clear(),this._lastModified=Date.now(),this._isDirty=!0}markAllCheckpointsDirty(){for(let t of this._checkpoints.values())for(let r of t)this.markCheckpointDirty(r)}};var ZC=class{static _instance=void 0;static setClientWorkspaces(t){if(this._instance!==void 0){ut("ClientWorkspaces").warn("Attempting to initialize client workspaces when one is already configured. Keeping existing client workspaces.");return}this._instance=t}static getClientWorkspaces(){if(this._instance===void 0)throw new Error("ClientWorkspaces not set");return this._instance}static reset(){this._instance=void 0}},TY=e=>ZC.setClientWorkspaces(e),Vi=()=>ZC.getClientWorkspaces(),RY=()=>ZC.reset();var aK=q(Gf());var US=class e extends fl{_storage;_shardFunction;_options;static DEFAULT_FLUSH_INTERVAL_MS=5e3;_shardCache=new Map;_manifest={version:1,lastUpdated:Date.now(),shards:{}};_accessOrder=[];_flushThrottled;_isDisposing=!1;_initializePromise;_logger;_checkpointDocumentIdFn;constructor(t,r,n={}){super(),this._storage=t,this._shardFunction=r,this._options=n,this._checkpointDocumentIdFn=i=>`${i.conversationId}:${i.path.absPath}`,this._logger=this._options.logger??ut("ShardManager"),this._flushThrottled=(0,aK.default)(()=>this._flush(),this._options.flushIntervalMs??e.DEFAULT_FLUSH_INTERVAL_MS,{leading:!1,trailing:!0})}get manifest(){return this._manifest}initialize=async()=>this._initializePromise?this._initializePromise:(this._initializePromise=(async()=>{try{let t=await this._storage.loadManifest();t?tL(t).isValid?this._manifest=t:(this._manifest=EY(t),await this._storage.saveManifest(this._manifest)):(this._manifest={version:1,lastUpdated:Date.now(),shards:{}},await this._storage.saveManifest(this._manifest))}catch(t){throw this._initializePromise=void 0,t}})(),this._initializePromise);_getShardId(t){let r=this._checkpointDocumentIdFn(t);for(let[n,i]of Object.entries(this._manifest.shards))if(i.checkpointDocumentIds.includes(r))return n;return this._shardFunction(t,{manifestSnapshot:this._manifest,pathStats:{checkpointCount:0,estimatedSize:0}})}_updateAccessTime(t){let r=this._accessOrder.indexOf(t);r>-1&&this._accessOrder.splice(r,1),this._accessOrder.push(t)}async _updateCheckpointsFromDisk(t){let r=[];for(let s of t.getAllTrackedConversationIds())for(let o of t.getAllTrackedFilePaths(s)){let a=t.getLatestCheckpoint({conversationId:s,path:o});a&&r.push({conversationId:s,path:o,latestCheckpoint:a})}if(r.length===0)return t;let n=await Promise.all(r.map(async s=>{try{let o=(await Vi().readFile(s.path.absPath)).contents;return{...s,onDiskContents:o,error:null}}catch(o){return this._logger.error(`Failed to read file ${s.path.absPath}:`,o),{...s,onDiskContents:null,error:o}}})),i=[];for(let s of n){if(s.error||!s.onDiskContents||s.onDiskContents===s.latestCheckpoint.document.modifiedCode)continue;let o=new un(s.path,s.latestCheckpoint.document.modifiedCode,s.onDiskContents,{});i.push({keyData:{conversationId:s.conversationId,path:s.path},checkpoint:{sourceToolCallRequestId:crypto.randomUUID(),timestamp:Date.now(),document:o,conversationId:s.conversationId}})}for(let{keyData:s,checkpoint:o}of i)t.addCheckpoint(s,o);return t}async _loadShard(t){let r=this._shardCache.get(t);if(r)return this._updateAccessTime(t),r;let n=await this._storage.loadShard(t);return this._logger.debug(`Loading shard ${t} from storage`),r=n?await jC.fromSerialized(t,n,this._checkpointDocumentIdFn):new jC(t,this._checkpointDocumentIdFn),r=await this._updateCheckpointsFromDisk(r),this._shardCache.set(t,r),this._updateAccessTime(t),r}_updateManifest(t,r){this._manifest.shards[t]=r.getMetadata(),this._manifest.lastUpdated=Date.now()}_triggerFlush(){if(this._isDisposing)return this._flush();this._flushThrottled()}async _flush(){let t=[],r=[],n=!1;for(let[i,s]of this._shardCache.entries())s.checkpointCount===0?(r.push(i),n=!0):s.isDirty&&(t.push(i),this._manifest.shards[i]=s.getMetadata(),n=!0);if(n){this._manifest.lastUpdated=Date.now();try{let i=new Map;for(let l of t){let c=this._shardCache.get(l);c&&i.set(l,await c.serialize())}await Promise.all(Array.from(i.entries()).map(([l,c])=>this._storage.saveShard(l,c))),await Promise.all(r.map(l=>this._storage.deleteShard(l)));let s=this._options.maxCachedShards??10,o=[],a=[];for(;this._shardCache.size>s&&this._accessOrder.length>0;){let l=this._accessOrder.shift();if(l){let c=this._shardCache.get(l);c&&c.isDirty&&a.push(this._storage.saveShard(l,await c.serialize())),o.push(l)}}await Promise.all(a),await this._storage.saveManifest(this._manifest);for(let l of t){let c=this._shardCache.get(l);c&&c.clearDirty()}for(let l of r)this._shardCache.delete(l),delete this._manifest.shards[l];for(let l of o)this._shardCache.delete(l)}catch(i){this._logger.error("Failed to flush shards:",i)}}}async flush(){await this._flush()}getCacheSize(){return this._shardCache.size}getShard=async t=>{let r=this._getShardId(t);return await this.getShardById(r)};getShardById=async t=>await this._loadShard(t);hasKey=async t=>{let r=this._getShardId(t);return(await this._loadShard(r)).hasKey(t)};getCheckpoints=async(t,r)=>{let n=this._getShardId(t);return(await this._loadShard(n)).getCheckpoints(t,r)||[]};getLatestCheckpoint=async t=>{let r=this._getShardId(t);return(await this._loadShard(r)).getLatestCheckpoint(t)};addCheckpoint=async(t,r)=>{await this._performShardOperation(t,n=>{n.addCheckpoint(t,r)})};updateCheckpoint=async(t,r)=>{await this._performShardOperation(t,n=>{n.updateCheckpoint(t,r)})};removeCheckpoint=async(t,r)=>{let n=!1;return await this._performShardOperation(t,i=>{n=i.removeCheckpoint(t,r)}),n};async _performShardOperation(t,r){let n=this._getShardId(t);await this._performShardOperationById(n,r)}async _performShardOperationById(t,r){let n=await this._loadShard(t);r(n),this._updateManifest(t,n),await this._triggerFlush()}clearShard=async t=>{await this._performShardOperationById(t,r=>{r.clear()})};clear=async()=>{for(let[,t]of this._shardCache)t.clear();this._manifest={version:1,lastUpdated:Date.now(),shards:{}},await this._flush(),this._shardCache.clear(),this._accessOrder=[]};dispose=async()=>{this._isDisposing=!0,this._flushThrottled.cancel&&this._flushThrottled.cancel(),await this._flush(),super.dispose()}};var vs=[];for(let e=0;e<256;++e)vs.push((e+256).toString(16).slice(1));function lK(e,t=0){return(vs[e[t+0]]+vs[e[t+1]]+vs[e[t+2]]+vs[e[t+3]]+"-"+vs[e[t+4]]+vs[e[t+5]]+"-"+vs[e[t+6]]+vs[e[t+7]]+"-"+vs[e[t+8]]+vs[e[t+9]]+"-"+vs[e[t+10]]+vs[e[t+11]]+vs[e[t+12]]+vs[e[t+13]]+vs[e[t+14]]+vs[e[t+15]]).toLowerCase()}var cK=require("crypto"),qS=new Uint8Array(256),OS=qS.length;function aL(){return OS>qS.length-16&&((0,cK.randomFillSync)(qS),OS=0),qS.slice(OS,OS+=16)}var uK=require("crypto"),lL={randomUUID:uK.randomUUID};function v1e(e,t,r){if(lL.randomUUID&&!t&&!e)return lL.randomUUID();e=e||{};let n=e.random??e.rng?.()??aL();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[r+i]=n[i];return t}return lK(n)}var cL=v1e;function uo(){return cL()}function cc(){}cc.prototype={diff:function(t,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.callback;typeof i=="function"&&(s=i,i={});var o=this;function a(B){return B=o.postProcess(B,i),s?(setTimeout(function(){s(B)},0),!0):B}t=this.castInput(t,i),r=this.castInput(r,i),t=this.removeEmpty(this.tokenize(t,i)),r=this.removeEmpty(this.tokenize(r,i));var l=r.length,c=t.length,u=1,f=l+c;i.maxEditLength!=null&&(f=Math.min(f,i.maxEditLength));var p=(n=i.timeout)!==null&&n!==void 0?n:1/0,g=Date.now()+p,m=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(m[0],r,t,0,i);if(m[0].oldPos+1>=c&&y+1>=l)return a(dK(o,m[0].lastComponent,r,t,o.useLongestToken));var v=-1/0,C=1/0;function E(){for(var B=Math.max(v,-u);B<=Math.min(C,u);B+=2){var R=void 0,N=m[B-1],W=m[B+1];N&&(m[B-1]=void 0);var Z=!1;if(W){var te=W.oldPos-B;Z=W&&0<=te&&te<l}var Y=N&&N.oldPos+1<c;if(!Z&&!Y){m[B]=void 0;continue}if(!Y||Z&&N.oldPos<W.oldPos?R=o.addToPath(W,!0,!1,0,i):R=o.addToPath(N,!1,!0,1,i),y=o.extractCommon(R,r,t,B,i),R.oldPos+1>=c&&y+1>=l)return a(dK(o,R.lastComponent,r,t,o.useLongestToken));m[B]=R,R.oldPos+1>=c&&(C=Math.min(C,B-1)),y+1>=l&&(v=Math.max(v,B+1))}u++}if(s)(function B(){setTimeout(function(){if(u>f||Date.now()>g)return s();E()||B()},0)})();else for(;u<=f&&Date.now()<=g;){var w=E();if(w)return w}},addToPath:function(t,r,n,i,s){var o=t.lastComponent;return o&&!s.oneChangePerToken&&o.added===r&&o.removed===n?{oldPos:t.oldPos+i,lastComponent:{count:o.count+1,added:r,removed:n,previousComponent:o.previousComponent}}:{oldPos:t.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:o}}},extractCommon:function(t,r,n,i,s){for(var o=r.length,a=n.length,l=t.oldPos,c=l-i,u=0;c+1<o&&l+1<a&&this.equals(n[l+1],r[c+1],s);)c++,l++,u++,s.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return u&&!s.oneChangePerToken&&(t.lastComponent={count:u,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=l,c},equals:function(t,r,n){return n.comparator?n.comparator(t,r):t===r||n.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return Array.from(t)},join:function(t){return t.join("")},postProcess:function(t){return t}};function dK(e,t,r,n,i){for(var s=[],o;t;)s.push(t),o=t.previousComponent,delete t.previousComponent,t=o;s.reverse();for(var a=0,l=s.length,c=0,u=0;a<l;a++){var f=s[a];if(f.removed)f.value=e.join(n.slice(u,u+f.count)),u+=f.count;else{if(!f.added&&i){var p=r.slice(c,c+f.count);p=p.map(function(g,m){var y=n[u+m];return y.length>g.length?y:g}),f.value=e.join(p)}else f.value=e.join(r.slice(c,c+f.count));c+=f.count,f.added||(u+=f.count)}}return s}var u_t=new cc;function fK(e,t){var r;for(r=0;r<e.length&&r<t.length;r++)if(e[r]!=t[r])return e.slice(0,r);return e.slice(0,r)}function hK(e,t){var r;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(r=0;r<e.length&&r<t.length;r++)if(e[e.length-(r+1)]!=t[t.length-(r+1)])return e.slice(-r);return e.slice(-r)}function dL(e,t,r){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return r+e.slice(t.length)}function fL(e,t,r){if(!t)return e+r;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+r}function tb(e,t){return dL(e,t,"")}function VS(e,t){return fL(e,t,"")}function gK(e,t){return t.slice(0,C1e(e,t))}function C1e(e,t){var r=0;e.length>t.length&&(r=e.length-t.length);var n=t.length;e.length<t.length&&(n=e.length);var i=Array(n),s=0;i[0]=0;for(var o=1;o<n;o++){for(t[o]==t[s]?i[o]=i[s]:i[o]=s;s>0&&t[o]!=t[s];)s=i[s];t[o]==t[s]&&s++}s=0;for(var a=r;a<e.length;a++){for(;s>0&&e[a]!=t[s];)s=i[s];e[a]==t[s]&&s++}return s}var HS="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",b1e=new RegExp("[".concat(HS,"]+|\\s+|[^").concat(HS,"]"),"ug"),$S=new cc;$S.equals=function(e,t,r){return r.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()};$S.tokenize=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(t.intlSegmenter){if(t.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(t.intlSegmenter.segment(e),function(s){return s.segment})}else r=e.match(b1e)||[];var n=[],i=null;return r.forEach(function(s){/\s/.test(s)?i==null?n.push(s):n.push(n.pop()+s):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+s):n.push(i+s):n.push(s),i=s}),n};$S.join=function(e){return e.map(function(t,r){return r==0?t:t.replace(/^\s+/,"")}).join("")};$S.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var r=null,n=null,i=null;return e.forEach(function(s){s.added?n=s:s.removed?i=s:((n||i)&&pK(r,i,n,s),r=s,n=null,i=null)}),(n||i)&&pK(r,i,n,null),e};function pK(e,t,r,n){if(t&&r){var i=t.value.match(/^\s*/)[0],s=t.value.match(/\s*$/)[0],o=r.value.match(/^\s*/)[0],a=r.value.match(/\s*$/)[0];if(e){var l=fK(i,o);e.value=fL(e.value,o,l),t.value=tb(t.value,l),r.value=tb(r.value,l)}if(n){var c=hK(s,a);n.value=dL(n.value,a,c),t.value=VS(t.value,c),r.value=VS(r.value,c)}}else if(r)e&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(e&&n){var u=n.value.match(/^\s*/)[0],f=t.value.match(/^\s*/)[0],p=t.value.match(/\s*$/)[0],g=fK(u,f);t.value=tb(t.value,g);var m=hK(tb(u,g),p);t.value=VS(t.value,m),n.value=dL(n.value,u,m),e.value=fL(e.value,u,u.slice(0,u.length-m.length))}else if(n){var y=n.value.match(/^\s*/)[0],v=t.value.match(/\s*$/)[0],C=gK(v,y);t.value=VS(t.value,C)}else if(e){var E=e.value.match(/\s*$/)[0],w=t.value.match(/^\s*/)[0],B=gK(E,w);t.value=tb(t.value,B)}}var E1e=new cc;E1e.tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(HS,"]+|[^\\S\\n\\r]+|[^").concat(HS,"]"),"ug");return e.match(t)||[]};var YS=new cc;YS.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var r=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var s=n[i];i%2&&!t.newlineIsToken?r[r.length-1]+=s:r.push(s)}return r};YS.equals=function(e,t,r){return r.ignoreWhitespace?((!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),t.endsWith(`
`)&&(t=t.slice(0,-1))),cc.prototype.equals.call(this,e,t,r)};function $f(e,t,r){return YS.diff(e,t,r)}var _1e=new cc;_1e.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var x1e=new cc;x1e.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function mK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function WS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mK(Object(r),!0).forEach(function(n){I1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S1e(e){var t=w1e(e,"string");return typeof t=="symbol"?t:t+""}function hL(e){"@babel/helpers - typeof";return hL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hL(e)}function I1e(e,t,r){return t=S1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uL(e){return B1e(e)||D1e(e)||T1e(e)||R1e()}function B1e(e){if(Array.isArray(e))return gL(e)}function D1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function T1e(e,t){if(e){if(typeof e=="string")return gL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gL(e,t)}}function gL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rb=new cc;rb.useLongestToken=!0;rb.tokenize=YS.tokenize;rb.castInput=function(e,t){var r=t.undefinedReplacement,n=t.stringifyReplacer,i=n===void 0?function(s,o){return typeof o>"u"?r:o}:n;return typeof e=="string"?e:JSON.stringify(pL(e,null,null,i),i,"  ")};rb.equals=function(e,t,r){return cc.prototype.equals.call(rb,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),r)};function pL(e,t,r,n,i){t=t||[],r=r||[],n&&(e=n(i,e));var s;for(s=0;s<t.length;s+=1)if(t[s]===e)return r[s];var o;if(Object.prototype.toString.call(e)==="[object Array]"){for(t.push(e),o=new Array(e.length),r.push(o),s=0;s<e.length;s+=1)o[s]=pL(e[s],t,r,n,i);return t.pop(),r.pop(),o}if(e&&e.toJSON&&(e=e.toJSON()),hL(e)==="object"&&e!==null){t.push(e),o={},r.push(o);var a=[],l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],o[l]=pL(e[l],t,r,n,l);t.pop(),r.pop()}else o=e;return o}var mL=new cc;mL.tokenize=function(e){return e.slice()};mL.join=mL.removeEmpty=function(e){return e};function GS(e,t,r,n,i,s,o){if(o||(o={}),typeof o=="function"&&(o={callback:o}),typeof o.context>"u"&&(o.context=4),o.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(o.callback){var a=o,l=a.callback;$f(r,n,WS(WS({},o),{},{callback:function(f){var p=c(f);l(p)}}))}else return c($f(r,n,o));function c(u){if(!u)return;u.push({value:"",lines:[]});function f(Z){return Z.map(function(te){return" "+te})}for(var p=[],g=0,m=0,y=[],v=1,C=1,E=function(){var te=u[w],Y=te.lines||k1e(te.value);if(te.lines=Y,te.added||te.removed){var U;if(!g){var ce=u[w-1];g=v,m=C,ce&&(y=o.context>0?f(ce.lines.slice(-o.context)):[],g-=y.length,m-=y.length)}(U=y).push.apply(U,uL(Y.map(function(ie){return(te.added?"+":"-")+ie}))),te.added?C+=Y.length:v+=Y.length}else{if(g)if(Y.length<=o.context*2&&w<u.length-2){var Ie;(Ie=y).push.apply(Ie,uL(f(Y)))}else{var Q,se=Math.min(Y.length,o.context);(Q=y).push.apply(Q,uL(f(Y.slice(0,se))));var z={oldStart:g,oldLines:v-g+se,newStart:m,newLines:C-m+se,lines:y};p.push(z),g=0,m=0,y=[]}v+=Y.length,C+=Y.length}},w=0;w<u.length;w++)E();for(var B=0,R=p;B<R.length;B++)for(var N=R[B],W=0;W<N.lines.length;W++)N.lines[W].endsWith(`
`)?N.lines[W]=N.lines[W].slice(0,-1):(N.lines.splice(W+1,0,"\\ No newline at end of file"),W++);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:s,hunks:p}}}function AL(e){if(Array.isArray(e))return e.map(AL).join(`
`);var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader>"u"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader>"u"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var n=e.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),t.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),t.push.apply(t,n.lines)}return t.join(`
`)+`
`}function KS(e,t,r,n,i,s,o){var a;if(typeof o=="function"&&(o={callback:o}),(a=o)!==null&&a!==void 0&&a.callback){var c=o,u=c.callback;GS(e,t,r,n,i,s,WS(WS({},o),{},{callback:function(p){p?u(AL(p)):u()}}))}else{var l=GS(e,t,r,n,i,s,o);return l?AL(l):void 0}}function k1e(e){var t=e.endsWith(`
`),r=e.split(`
`).map(function(n){return n+`
`});return t?r.pop():r.push(r.pop().slice(0,-1)),r}var zS=class extends fl{_storage;_getMemoriesAbsPath;_onDocumentChange;_onFileDeleted;_onFileDidMove;shardManager;_shardFunction=t=>`shard-${t.conversationId}`;_currentConversationId;_logger=ut("AggregateCheckpointManager");_agentEditListHasUpdatesCallbacks=new Set;constructor(t,r,n,i,s){super(),this._storage=t,this._getMemoriesAbsPath=r,this._onDocumentChange=n,this._onFileDeleted=i,this._onFileDidMove=s,this.shardManager=new US(this._storage,this._shardFunction),this.addDisposable(this._onDocumentChange(o=>{this._handleDocumentChange(o)})),this.addDisposable(this._onFileDeleted(o=>{this._handleFileDeleted(o)})),this.addDisposable(this._onFileDidMove(o=>{this._handleFileMoved(o)})),this.addDisposable({dispose:()=>{this._agentEditListHasUpdatesCallbacks.clear()}})}get currentConversationId(){return this._currentConversationId}setCurrentConversation(t){this._currentConversationId=t}getAgentMemoriesAbsPath=()=>this._getMemoriesAbsPath();onAgentEditListHasUpdates=t=>(this._agentEditListHasUpdatesCallbacks.add(t),{dispose:()=>{this._agentEditListHasUpdatesCallbacks.delete(t)}});_notifyAgentEditListHasUpdates=()=>{this._agentEditListHasUpdatesCallbacks.forEach(t=>t())};_getAllTrackedFiles=async t=>{await this.shardManager.initialize();let r=this._shardFunction({conversationId:t});return(await this.shardManager.getShardById(r)).getAllTrackedFilePaths(t)};_checkpointFileState=async(t,r,n={})=>{let i=(await Vi().readFile(r.absPath)).contents;if(i===void 0)return;let s={sourceToolCallRequestId:uo(),timestamp:n.timestamp??Date.now(),document:new un(r,i,i,{logger:this._logger}),conversationId:t},o={conversationId:t,path:r};return await this.shardManager.addCheckpoint(o,s),this._notifyAgentEditListHasUpdates(),s.sourceToolCallRequestId};_trackFile=async(t,r)=>{await this.shardManager.initialize();let n={conversationId:t,path:r};if((await this.shardManager.getCheckpoints(n)).length>0){this._logger.debug(`File already tracked: ${r.absPath}`);return}this._logger.debug(`Tracking file: ${r.absPath}`),await this._checkpointFileState(t,r,{timestamp:0})};storeCurrentFileStateAsCheckpoint=async(t,r)=>(await this.shardManager.initialize(),await this._checkpointFileState(t,r));addCheckpoint=async(t,r)=>{await this.shardManager.initialize(),await this._trackFile(t.conversationId,r.document.filePath),await this.shardManager.addCheckpoint(t,r),r.document.modifiedCode===void 0?(this._logger.debug(`Deleting file: ${r.document.filePath.absPath}`),await Vi().deleteFile(r.document.filePath)):(this._logger.debug(`Writing file: ${r.document.filePath.absPath}`),await Vi().writeFile(r.document.filePath,r.document.modifiedCode)),this._notifyAgentEditListHasUpdates()};_getFileStateAtTimestamp=async(t,r,n)=>{if(!await this.shardManager.hasKey({conversationId:t,path:r}))return null;let s={conversationId:t,path:r},a=(await this.shardManager.getCheckpoints(s,{maxTimestamp:n})).at(-1);if(a)return a.document.modifiedCode;let c=(await this.shardManager.getCheckpoints(s,{minTimestamp:n})).at(0);return c?c.document.originalCode:null};_handleDocumentChange=async t=>{let r=Le.from(t.document.qualifiedPathName);if(r===void 0||this._currentConversationId===void 0)return;let n=t.document.getText?.();await this.updateLatestCheckpoint(r,n)};_handleFileDeleted=async t=>{let r=Le.from(t.qualifiedPathName);if(r===void 0||this._currentConversationId===void 0)return;this._logger.debug(`Handling file deleted notification: ${r.absPath}`);let n={conversationId:this._currentConversationId,path:r},i=await this._getFileStateAtTimestamp(this._currentConversationId,r,Number.MAX_SAFE_INTEGER);i!==null&&(await this.addCheckpoint(n,{sourceToolCallRequestId:uo(),timestamp:Date.now(),document:new un(r,i,void 0,{}),conversationId:this._currentConversationId}),this._logger.debug(`Marked file deleted: ${r.absPath}`))};_handleFileMoved=async t=>{let r=Le.from(t.oldQualifiedPathName),n=Le.from(t.newQualifiedPathName);if(r===void 0||n===void 0||this._currentConversationId===void 0)return;this._logger.debug(`File moved: ${r.absPath} -> ${n.absPath}`);let i={conversationId:this._currentConversationId,path:r},s=await this.shardManager.getCheckpoints(i);if(s.length===0)return;let o={conversationId:this._currentConversationId,path:n};for(let a of s){let l={...a,document:new un(n,a.document.originalCode,a.document.modifiedCode,{})};await this.shardManager.addCheckpoint(o,l)}await this.shardManager.removeCheckpoint(i),this._notifyAgentEditListHasUpdates()};updateLatestCheckpoint=async(t,r,n)=>{if(this._currentConversationId===void 0){this._logger.warn("Cannot update latest checkpoint. No current conversation ID.");return}let i={conversationId:this._currentConversationId,path:t},o=(await this.shardManager.getCheckpoints(i)).at(-1);if(o===void 0)return;let a={...o,document:new un(t,o.document.originalCode,r,{})};await this.shardManager.updateCheckpoint(i,a),this._logger.debug(`Updated latest checkpoint for ${t.absPath} with ${r}`),this._notifyAgentEditListHasUpdates(),(n?.saveToWorkspace??!1)&&(r===void 0?(await Vi().deleteFile(t),this._logger.debug(`Deleted file: ${t.absPath}`)):(await Vi().writeFile(t,r),this._logger.debug(`Wrote file: ${t.absPath}`)))};getAggregateCheckpointForFile=async(t,r)=>{await this.shardManager.initialize();let n=this._currentConversationId;if(n===void 0)return{fromTimestamp:0,toTimestamp:1/0,conversationId:"",files:[]};let i=r.minTimestamp??0,s=r.maxTimestamp??1/0,o=await this._getFileStateAtTimestamp(n,t,i),a=await this._getFileStateAtTimestamp(n,t,s);if(o===null||a===null)return this._logger.warn(`Cannot get aggregate checkpoint for ${t.absPath}. No checkpoints found.`),{fromTimestamp:i,toTimestamp:s,conversationId:n,files:[]};let l=new un(t,o,a,{});return{fromTimestamp:i,toTimestamp:s,conversationId:n,files:[{changesSummary:yL(l),changeDocument:l}]}};getCheckpointByRequestId=async t=>{await this.shardManager.initialize();let r=this._currentConversationId;if(r===void 0)return;let n=this._shardFunction({conversationId:r}),s=(await this.shardManager.getShardById(n)).getCheckpointBySourceId(t);if(s!==void 0)return{fromTimestamp:s.timestamp,toTimestamp:s.timestamp,conversationId:r,files:[{changesSummary:yL(s.document),changeDocument:s.document}]}};getAggregateCheckpoint=async t=>{await this.shardManager.initialize();let r=t.minTimestamp??0,n=t.maxTimestamp??1/0,i=this._currentConversationId;if(i===void 0)return{fromTimestamp:0,toTimestamp:1/0,conversationId:"",files:[]};let s=await this._getAllTrackedFiles(i),o=await Promise.all(s.map(async a=>{let l=await this._getFileStateAtTimestamp(i,a,r),c=await this._getFileStateAtTimestamp(i,a,n);if(l===null||c===null){this._logger.warn(`Cannot get aggregate checkpoint for ${a.absPath}. No checkpoints found.`);return}return new un(a,l,c,{})}));return{fromTimestamp:r,toTimestamp:n,conversationId:i,files:o.filter(a=>a!==void 0).map(a=>({changesSummary:yL(a),changeDocument:a}))}};clearConversationCheckpoints=async t=>{await this.shardManager.initialize(),await this.shardManager.clearShard(this._shardFunction({conversationId:t}))};revertDocumentToTimestamp=async(t,r)=>{await this.shardManager.initialize();let n=this._currentConversationId;if(n===void 0)return;let i=await this._getFileStateAtTimestamp(n,t,r),s=await this._getFileStateAtTimestamp(n,t,Number.MAX_SAFE_INTEGER);i===null||s===null||await this.addCheckpoint({conversationId:n,path:t},{sourceToolCallRequestId:uo(),timestamp:Date.now(),document:new un(t,s??"",i,{}),conversationId:n})};revertToTimestamp=async t=>{if(await this.shardManager.initialize(),this._currentConversationId===void 0)return;let n=await this.getAggregateCheckpoint({minTimestamp:t,maxTimestamp:void 0});this._logger.debug(`Reverting to timestamp: ${t}. Includes files ${n.files.map(i=>i.changeDocument.filePath.absPath).join(", ")}`),await Promise.all(n.files.map(async i=>{await this.revertDocumentToTimestamp(i.changeDocument.filePath,t)}))}};function yL(e){let t=$f(e.originalCode??"",e.modifiedCode??""),r=t.filter(i=>i.added).reduce((i,s)=>i+(s.count??0),0),n=t.filter(i=>i.removed).reduce((i,s)=>i+(s.count??0),0);return{totalAddedLines:r,totalRemovedLines:n,changes:t}}var Sd=class extends Error{constructor(){super("The completion URL setting is invalid")}};var nb=class{static _instance=void 0;static setAPIClient(t){if(this._instance!==void 0){ut("APICLient").warn("Attempting to initialize API clientwhen one is already configured. Keeping existing client workspaces.");return}this._instance=t}static getAPIClient(){if(this._instance===void 0)throw new Error("API Client not set");return this._instance}static reset(){this._instance=void 0}},AK=e=>nb.setAPIClient(e),gl=()=>nb.getAPIClient(),yK=()=>nb.reset();var ib=class{static _instance=void 0;static setClientActions(t){if(this._instance!==void 0){ut("ClientActions").warn("Attempting to initialize client actions when one is already configured. Keeping existing client actions.");return}this._instance=t}static getClientActions(){if(this._instance===void 0)throw new Error("ClientActions not set");return this._instance}static reset(){this._instance=void 0}},vK=e=>ib.setClientActions(e),CK=()=>ib.getClientActions(),bK=()=>ib.reset();var JS=class{static _instance=void 0;static setClientAuth(t){if(this._instance!==void 0){ut("ClientAuth").warn("Attempting to initialize client auth when one is already configured. Keeping existing client auth.");return}this._instance=t}static getClientAuth(){if(this._instance===void 0)throw new Error("ClientAuth not set");return this._instance}static reset(){this._instance=void 0}},EK=e=>JS.setClientAuth(e),_K=()=>JS.getClientAuth();var jS=class{static _instance=void 0;static setClientConfig(t){if(this._instance!==void 0){ut("ClientConfig").warn("Attempting to initialize client config when one is already configured. Keeping existing client config.");return}this._instance=t}static getClientConfig(){if(this._instance===void 0)throw new Error("ClientConfig not set");return this._instance}static reset(){this._instance=void 0}},xK=e=>jS.setClientConfig(e),wK=()=>jS.getClientConfig();var sb=class{static _instance=void 0;static setClientFeatureFlags(t){if(this._instance!==void 0){ut("ClientFeatureFlags").warn("Attempting to initialize client feature flags when one is already configured. Keeping existing client feature flags.");return}this._instance=t}static getClientFeatureFlags(){if(this._instance===void 0)throw new Error("ClientFeatureFlags not set");return this._instance}static reset(){this._instance=void 0}},SK=e=>sb.setClientFeatureFlags(e),Ca=()=>sb.getClientFeatureFlags(),IK=()=>sb.reset();var au;(function(e){e.agent="agent"})(au||(au={}));var uc;(function(e){e.global="global"})(uc||(uc={}));var ob=class{static _instance=void 0;static setStateForSidecar(t){if(this._instance!==void 0){ut("PluginStateForSidecarSingleton").warn("Attempting to initialize plugin state when one is already configured. Keeping existing plugin state.");return}this._instance=t}static getStateForSidecar(){if(this._instance===void 0)throw new Error("PluginStateForSidecar not set");return this._instance}static reset(){this._instance=void 0}},BK=e=>ob.setStateForSidecar(e),DA=()=>ob.getStateForSidecar(),DK=()=>ob.reset();var ab=class{static _instance=void 0;static setWebviewMessagingClient(t){if(this._instance!==void 0){ut("WebviewMessages").warn("Attempting to initialize webview messages when one is already configured. Keeping existing webview message client.");return}this._instance=t}static getWebviewMessagingClient(){if(this._instance===void 0)throw new Error("Webview messaging client not set");return this._instance}static reset(){this._instance=void 0}},TK=e=>ab.setWebviewMessagingClient(e),M1e=()=>ab.getWebviewMessagingClient(),RK=()=>ab.reset();function kK(e,t){M1e().onMessage(e,t)}var $e;(function(e){e[e.ok=0]="ok",e[e.cancelled=1]="cancelled",e[e.unknown=2]="unknown",e[e.unavailable=3]="unavailable",e[e.unimplemented=4]="unimplemented",e[e.invalidArgument=5]="invalidArgument",e[e.resourceExhausted=6]="resourceExhausted",e[e.unauthenticated=7]="unauthenticated",e[e.permissionDenied=8]="permissionDenied",e[e.deadlineExceeded=9]="deadlineExceeded",e[e.augmentTooLarge=10]="augmentTooLarge"})($e||($e={}));var Sr=class e extends Error{status;constructor(t,r){super(r),this.status=t}static transientIssue(t){return new e($e.unavailable,t)}static fromResponse(t){return new e(F1e(t.status),`HTTP error: ${t.status} ${t.statusText}`)}static isAPIErrorWithStatus(t,r){return t instanceof e?t.status===r:!1}static isRetriableAPIError(t){return t instanceof e?Q1e.has(t.status):!1}};function F1e(e){switch(e){case 200:return $e.ok;case 400:return $e.invalidArgument;case 401:return $e.unauthenticated;case 403:return $e.permissionDenied;case 404:return $e.unimplemented;case 413:return $e.augmentTooLarge;case 429:return $e.resourceExhausted;case 499:return $e.cancelled;case 504:return $e.deadlineExceeded}return e>=500&&e<600?$e.unavailable:$e.unknown}var Q1e=new Set([$e.unavailable,$e.cancelled]);function N1e(e){return e.cause instanceof String?String(e.cause):e.cause instanceof Object?JSON.stringify(e.cause):""}function He(e,t=!1){if(e instanceof Error){if(t){let r=N1e(e);if(r!=="")return`${e.message} (due to ${r})`}return e.message}return String(e)}var lu=class{_maxItems;_insertCount=0;_emptySlots;_items;constructor(t){this._maxItems=t,this._items=new Array(t),this._emptySlots=t}get empty(){return this.length===0}get length(){return this._maxItems-this._emptySlots}addItem(t){this._items[this._insertCount%this._maxItems]=t,this._emptySlots=Math.max(this._emptySlots-1,0),this._insertCount++}shiftLeft(t){this._emptySlots=Math.min(this._emptySlots+t,this._maxItems)}shiftRight(t){this._insertCount-=Math.min(t,this.length),this._emptySlots=Math.min(this._emptySlots+t,this._maxItems)}at(t){if(t<0)return t<-this.length?void 0:this._items[(this._insertCount+t)%this._maxItems];if(!(t>=this.length))return this._items[(this._insertCount+this._emptySlots+t)%this._maxItems]}_normalizeSliceIdx(t){return t>=0?Math.min(t,this.length):Math.max(this.length+t,0)}_translateIdx(t){return(this._insertCount+this._emptySlots+t)%this._maxItems}slice(t,r){let n=this._normalizeSliceIdx(t??0),i=this._normalizeSliceIdx(r??this.length);if(n>i)return[];let s=i-n,o=this._translateIdx(n);return o+s<=this._maxItems?this._items.slice(o,o+s):this._items.slice(o).concat(this._items.slice(0,(o+s)%this._maxItems))}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.at(t)}clear(){this._emptySlots=this._maxItems}};var P1e={initialMS:100,mult:2,maxMS:3e4};function fo(e){return e===0?Promise.resolve():new Promise(t=>{setTimeout(t,e)})}async function Di(e,t,r=P1e){let n=0,i=r.maxTotalMs!==void 0?Date.now():void 0,s=r.canRetry?r.canRetry:o=>Sr.isRetriableAPIError(o);for(let o=0;;o++)try{let a=await e();return o>0&&t.info(`Operation succeeded after ${o} transient failures`),a}catch(a){if(!s(a))throw a;let l=o+1;if(r.maxTries!==void 0&&l>=r.maxTries||(n===0?n=r.initialMS:n=Math.min(n*r.mult,r.maxMS),t.info(`Operation failed with error ${a}, retrying in ${n} ms; retries = ${o}`),r.maxTotalMs!==void 0&&i!==void 0&&Date.now()-i+n>r.maxTotalMs))throw a;await fo(n)}}async function TA(e,t){let r=new Promise((n,i)=>{setTimeout(()=>{i(new Error("Execution aborted due to timeout."))},t)});return await Promise.race([e,r])}var ii=class{_uploadMsec;_uploadBatchSize;_logger;_store;_uploadIntervalId=void 0;_currentUploadPromise;constructor(t,r,n,i){this._uploadMsec=n,this._uploadBatchSize=i,this._store=new lu(r),this._logger=ut(t)}report(t){this._store.addItem(t)}get uploadEnabled(){return this._uploadIntervalId!==void 0}enableUpload(){this.uploadEnabled||(this._uploadIntervalId=setInterval(()=>{this._currentUploadPromise===void 0&&(async()=>{try{this._currentUploadPromise=this._doUpload(),await this._currentUploadPromise}finally{this._currentUploadPromise=void 0}})()},this._uploadMsec))}async uploadNow(){return this._doUpload()}async _doUpload(){if(this._store.length===0)return;let t=this._store.slice();this._store.clear();for(let r=0;r<t.length;r+=this._uploadBatchSize){let n=t.slice(r,r+this._uploadBatchSize);await Di(async()=>{if(this.uploadEnabled)try{return this._logger.debug(`Uploading ${n.length} metric(s)`),await this.performUpload(n)}catch(i){throw this._logger.error(`Error uploading metrics: ${i} ${i instanceof Error?i.stack:""}`),i}},this._logger)}}disableUpload(){clearInterval(this._uploadIntervalId),this._uploadIntervalId=void 0}dispose(){this.disableUpload()}};function Hn(e){let t=Math.floor(e/1e3),r=e%1e3*1e6;return[t,r]}var ZS=class e extends ii{static maxRecords=1e4;static batchSize=1e3;static uploadMsec=1e4;static instance=null;static getInstance(){return e.instance||(e.instance=new e,e.instance.enableUpload()),e.instance}static reset(){e.instance&&(e.instance.dispose(),e.instance=null)}constructor(){super("AgentRequestEventReporter",e.maxRecords,e.uploadMsec,e.batchSize)}reportEvent(t){let[r,n]=Hn(Date.now());this.report({event_time_sec:r,event_time_nsec:n,event_name:t.eventName,conversation_id:t.conversationId,request_id:t.requestId,chat_history_length:t.chatHistoryLength})}performUpload(t){return gl().logAgentRequestEvent(t)}};function MK(){return ZS.getInstance()}function FK(){ZS.reset()}var XS=class e extends ii{static maxRecords=1e4;static batchSize=1e3;static uploadMsec=1e4;static instance=null;static getInstance(){return e.instance||(e.instance=new e,e.instance.enableUpload()),e.instance}static reset(){e.instance&&(e.instance.dispose(),e.instance=null)}constructor(){super("AgentSessionEventReporter",e.maxRecords,e.uploadMsec,e.batchSize)}formatTracingData(t){return{flags:t.flags,nums:t.nums,string_stats:t.string_stats,request_ids:t.request_ids}}reportEvent(t){let[r,n]=Hn(Date.now()),i,s=Ca().flags.memoriesParams.enable_memories_tracing;if(t.eventData?.agentReversionData&&(i={agent_reversion_data:{}}),t.eventData?.agentInterruptionData&&(i={agent_interruption_data:{request_id:t.eventData.agentInterruptionData.requestId,curr_conversation_length:t.eventData.agentInterruptionData.currConversationLength}}),t.eventData?.rememberToolCallData){if(!s)return;i={remember_tool_call_data:{caller:t.eventData.rememberToolCallData.caller,is_complex_new_memory:t.eventData.rememberToolCallData.is_complex_new_memory,tracing_data:this.formatTracingData(t.eventData.rememberToolCallData.tracingData)}}}if(t.eventData?.initialOrientationData){if(!s)return;i={initial_orientation_data:{caller:t.eventData.initialOrientationData.caller,tracing_data:this.formatTracingData(t.eventData.initialOrientationData.tracingData)}}}if(t.eventData?.classifyAndDistillData){if(!s)return;i={classify_and_distill_data:{tracing_data:this.formatTracingData(t.eventData.classifyAndDistillData.tracingData)}}}if(t.eventData?.flushMemoriesData){if(!s)return;i={flush_memories_data:{tracing_data:this.formatTracingData(t.eventData.flushMemoriesData.tracingData)}}}t.eventData?.memoriesFileOpenData&&(i={memories_file_open_data:{memories_path_undefined:t.eventData.memoriesFileOpenData.memoriesPathUndefined}}),this.report({event_time_sec:r,event_time_nsec:n,event_name:t.eventName,conversation_id:t.conversationId,event_data:i})}performUpload(t){return gl().logAgentSessionEvent(t)}};function Mr(){return XS.getInstance()}function QK(){XS.reset()}var eI=class e extends ii{static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;constructor(t,r,n){super("ToolUseRequestEventReporter",t??e.defaultMaxRecords,r??e.defaultUploadMsec,n??e.defaultBatchSize)}reportEvent(t,r,n,i,s,o,a,l,c,u){let[f,p]=Hn(Date.now());this.report({requestId:t,toolName:r,toolUseId:n,toolInput:i,toolOutputIsError:s,toolRunDurationMs:o,isMcpTool:a,conversationId:l,chatHistoryLength:c,eventTimeSec:f,eventTimeNsec:p,toolRequestId:u})}performUpload(t){return gl().logToolUseRequestEvent(t)}};var Hi;(function(e){e.shell="shell",e.webFetch="web-fetch",e.strReplaceEditor="str-replace-editor",e.codebaseRetrieval="codebase-retrieval",e.removeFiles="remove-files",e.remember="remember"})(Hi||(Hi={}));var tI={strReplaceEditor:"str_replace_editor_tool",backendEditTool:"backend_edit_tool"};var ho;(function(e){e[e.TEXT=0]="TEXT",e[e.TOOL_RESULT=1]="TOOL_RESULT",e[e.IMAGE=2]="IMAGE",e[e.IMAGE_ID=3]="IMAGE_ID",e[e.IDE_STATE=4]="IDE_STATE",e[e.EDIT_EVENTS=5]="EDIT_EVENTS",e[e.CHECKPOINT_REF=6]="CHECKPOINT_REF",e[e.CHANGE_PERSONALITY=7]="CHANGE_PERSONALITY"})(ho||(ho={}));var rI;(function(e){e[e.IMAGE_FORMAT_UNSPECIFIED=0]="IMAGE_FORMAT_UNSPECIFIED",e[e.PNG=1]="PNG",e[e.JPEG=2]="JPEG",e[e.GIF=3]="GIF",e[e.WEBP=4]="WEBP"})(rI||(rI={}));var NK;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.USER_EDIT=1]="USER_EDIT",e[e.CHECKPOINT_REVERT=2]="CHECKPOINT_REVERT"})(NK||(NK={}));var PK;(function(e){e[e.CONTENT_TYPE_UNSPECIFIED=0]="CONTENT_TYPE_UNSPECIFIED",e[e.CONTENT_TEXT=1]="CONTENT_TEXT",e[e.CONTENT_IMAGE=2]="CONTENT_IMAGE"})(PK||(PK={}));var dc;(function(e){e[e.RAW_RESPONSE=0]="RAW_RESPONSE",e[e.SUGGESTED_QUESTIONS=1]="SUGGESTED_QUESTIONS",e[e.MAIN_TEXT_FINISHED=2]="MAIN_TEXT_FINISHED",e[e.TOOL_USE=5]="TOOL_USE",e[e.AGENT_MEMORY=6]="AGENT_MEMORY"})(dc||(dc={}));var Xr;(function(e){e.chat="CHAT",e.agent="AGENT",e.remoteAgent="REMOTE_AGENT",e.memories="MEMORIES",e.orientation="ORIENTATION",e.memoriesCompression="MEMORIES_COMPRESSION"})(Xr||(Xr={}));var LK;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.PROTOTYPER=1]="PROTOTYPER",e[e.BRAINSTORM=2]="BRAINSTORM",e[e.REVIEWER=3]="REVIEWER"})(LK||(LK={}));var rr;(function(e){e.modified="MODIFIED",e.added="ADDED",e.deleted="DELETED",e.renamed="RENAMED"})(rr||(rr={}));var Ir;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{let s={};for(let o of i)s[o]=o;return s},e.getValidEnumValues=i=>{let s=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(let a of s)o[a]=i[a];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},e.find=(i,s)=>{for(let o of i)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Ir||(Ir={}));var CL;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(CL||(CL={}));var Ue=Ir.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Bd=e=>{switch(typeof e){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(e)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(e)?Ue.array:e===null?Ue.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ue.promise:typeof Map<"u"&&e instanceof Map?Ue.map:typeof Set<"u"&&e instanceof Set?Ue.set:typeof Date<"u"&&e instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Ce=Ir.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),L1e=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ba=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(s){return s.message},n={_errors:[]},i=s=>{for(let o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){let c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ir.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};ba.create=e=>new ba(e);var MA=(e,t)=>{let r;switch(e.code){case Ce.invalid_type:e.received===Ue.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Ce.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Ir.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ir.joinValues(e.keys,", ")}`;break;case Ce.invalid_union:r="Invalid input";break;case Ce.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ir.joinValues(e.options)}`;break;case Ce.invalid_enum_value:r=`Invalid enum value. Expected ${Ir.joinValues(e.options)}, received '${e.received}'`;break;case Ce.invalid_arguments:r="Invalid function arguments";break;case Ce.invalid_return_type:r="Invalid function return type";break;case Ce.invalid_date:r="Invalid date";break;case Ce.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Ir.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Ce.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Ce.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Ce.custom:r="Invalid input";break;case Ce.invalid_intersection_types:r="Intersection results could not be merged";break;case Ce.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Ce.not_finite:r="Number must be finite";break;default:r=t.defaultError,Ir.assertNever(e)}return{message:r}},qK=MA;function U1e(e){qK=e}function nI(){return qK}var iI=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="",l=n.filter(c=>!!c).slice().reverse();for(let c of l)a=c(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}},O1e=[];function ke(e,t){let r=nI(),n=iI({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===MA?void 0:MA].filter(i=>!!i)});e.common.issues.push(n)}var Ls=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let n=[];for(let i of r){if(i.status==="aborted")return Et;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){let n=[];for(let i of r){let s=await i.key,o=await i.value;n.push({key:s,value:o})}return e.mergeObjectSync(t,n)}static mergeObjectSync(t,r){let n={};for(let i of r){let{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Et;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:t.value,value:n}}},Et=Object.freeze({status:"aborted"}),kA=e=>({status:"dirty",value:e}),go=e=>({status:"valid",value:e}),bL=e=>e.status==="aborted",EL=e=>e.status==="dirty",Hg=e=>e.status==="valid",ub=e=>typeof Promise<"u"&&e instanceof Promise;function sI(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function VK(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}var Je;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Je||(Je={}));var lb,cb,ml=class{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},UK=(e,t)=>{if(Hg(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ba(e.common.issues);return this._error=r,this._error}}};function Ot(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,a)=>{var l,c;let{message:u}=e;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??n)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??r)!==null&&c!==void 0?c:a.defaultError}},description:i}}var qt=class{get description(){return this._def.description}_getType(t){return Bd(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Bd(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ls,ctx:{common:t.parent.common,data:t.data,parsedType:Bd(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(ub(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Bd(t)},s=this._parseSync({data:t,path:i.path,parent:i});return UK(i,s)}"~validate"(t){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Bd(t)};if(!this["~standard"].async)try{let s=this._parseSync({data:t,path:[],parent:i});return Hg(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((n=(r=s?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(s=>Hg(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(t,r){let n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Bd(t)},i=this._parse({data:t,path:n.path,parent:n}),s=await(ub(i)?i:Promise.resolve(i));return UK(n,s)}refine(t,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{let o=t(i),a=()=>s.addIssue({code:Ce.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new Ea({schema:this,typeName:yt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return pl.create(this,this._def)}nullable(){return uu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Td.create(this)}promise(){return zf.create(this,this._def)}or(t){return Jg.create([this,t],this._def)}and(t){return jg.create(this,t,this._def)}transform(t){return new Ea({...Ot(this._def),schema:this,typeName:yt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new rp({...Ot(this._def),innerType:this,defaultValue:r,typeName:yt.ZodDefault})}brand(){return new db({typeName:yt.ZodBranded,type:this,...Ot(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new np({...Ot(this._def),innerType:this,catchValue:r,typeName:yt.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return fb.create(this,t)}readonly(){return ip.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},q1e=/^c[^\s-]{8,}$/i,V1e=/^[0-9a-z]+$/,H1e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,W1e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,G1e=/^[a-z0-9_-]{21}$/i,$1e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Y1e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K1e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,z1e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",vL,J1e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,j1e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Z1e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,X1e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eQe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tQe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,HK="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rQe=new RegExp(`^${HK}$`);function WK(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function nQe(e){return new RegExp(`^${WK(e)}$`)}function GK(e){let t=`${HK}T${WK(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function iQe(e,t){return!!((t==="v4"||!t)&&J1e.test(e)||(t==="v6"||!t)&&Z1e.test(e))}function sQe(e,t){if(!$1e.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function oQe(e,t){return!!((t==="v4"||!t)&&j1e.test(e)||(t==="v6"||!t)&&X1e.test(e))}var Yf=class e extends qt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ue.string){let s=this._getOrReturnCtx(t);return ke(s,{code:Ce.invalid_type,expected:Ue.string,received:s.parsedType}),Et}let n=new Ls,i;for(let s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){let o=t.data.length>s.value,a=t.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(t,i),o?ke(i,{code:Ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ke(i,{code:Ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")K1e.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"email",code:Ce.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")vL||(vL=new RegExp(z1e,"u")),vL.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"emoji",code:Ce.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")W1e.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"uuid",code:Ce.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")G1e.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"nanoid",code:Ce.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")q1e.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"cuid",code:Ce.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")V1e.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"cuid2",code:Ce.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")H1e.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"ulid",code:Ce.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),ke(i,{validation:"url",code:Ce.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"regex",code:Ce.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?GK(s).test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?rQe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?nQe(s).test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?Y1e.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"duration",code:Ce.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?iQe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"ip",code:Ce.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?sQe(t.data,s.alg)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"jwt",code:Ce.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?oQe(t.data,s.version)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"cidr",code:Ce.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?eQe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"base64",code:Ce.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?tQe.test(t.data)||(i=this._getOrReturnCtx(t,i),ke(i,{validation:"base64url",code:Ce.invalid_string,message:s.message}),n.dirty()):Ir.assertNever(s);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:Ce.invalid_string,...Je.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Je.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Je.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Je.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Je.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Je.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Je.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Je.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Je.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Je.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Je.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Je.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Je.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Je.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(r=t?.offset)!==null&&r!==void 0?r:!1,local:(n=t?.local)!==null&&n!==void 0?n:!1,...Je.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...Je.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...Je.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Je.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...Je.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Je.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Je.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Je.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Je.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Je.errToObj(r)})}nonempty(t){return this.min(1,Je.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Yf.create=e=>{var t;return new Yf({checks:[],typeName:yt.ZodString,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...Ot(e)})};function aQe(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}var Wg=class e extends qt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ue.number){let s=this._getOrReturnCtx(t);return ke(s,{code:Ce.invalid_type,expected:Ue.number,received:s.parsedType}),Et}let n,i=new Ls;for(let s of this._def.checks)s.kind==="int"?Ir.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ke(n,{code:Ce.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:Ce.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:Ce.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?aQe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),ke(n,{code:Ce.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ke(n,{code:Ce.not_finite,message:s.message}),i.dirty()):Ir.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Je.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Je.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Je.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Je.toString(r))}setLimit(t,r,n,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Je.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Je.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Je.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Je.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Je.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Je.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Je.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Je.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Je.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Je.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ir.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Wg.create=e=>new Wg({checks:[],typeName:yt.ZodNumber,coerce:e?.coerce||!1,...Ot(e)});var Gg=class e extends qt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ue.bigint)return this._getInvalidInput(t);let n,i=new Ls;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:Ce.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:Ce.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ke(n,{code:Ce.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Ir.assertNever(s);return{status:i.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return ke(r,{code:Ce.invalid_type,expected:Ue.bigint,received:r.parsedType}),Et}gte(t,r){return this.setLimit("min",t,!0,Je.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Je.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Je.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Je.toString(r))}setLimit(t,r,n,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Je.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Je.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Je.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Je.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Je.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Je.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Gg.create=e=>{var t;return new Gg({checks:[],typeName:yt.ZodBigInt,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...Ot(e)})};var $g=class extends qt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ue.boolean){let n=this._getOrReturnCtx(t);return ke(n,{code:Ce.invalid_type,expected:Ue.boolean,received:n.parsedType}),Et}return go(t.data)}};$g.create=e=>new $g({typeName:yt.ZodBoolean,coerce:e?.coerce||!1,...Ot(e)});var Yg=class e extends qt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ue.date){let s=this._getOrReturnCtx(t);return ke(s,{code:Ce.invalid_type,expected:Ue.date,received:s.parsedType}),Et}if(isNaN(t.data.getTime())){let s=this._getOrReturnCtx(t);return ke(s,{code:Ce.invalid_date}),Et}let n=new Ls,i;for(let s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),ke(i,{code:Ce.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Ir.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Je.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Je.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Yg.create=e=>new Yg({checks:[],coerce:e?.coerce||!1,typeName:yt.ZodDate,...Ot(e)});var FA=class extends qt{_parse(t){if(this._getType(t)!==Ue.symbol){let n=this._getOrReturnCtx(t);return ke(n,{code:Ce.invalid_type,expected:Ue.symbol,received:n.parsedType}),Et}return go(t.data)}};FA.create=e=>new FA({typeName:yt.ZodSymbol,...Ot(e)});var Kg=class extends qt{_parse(t){if(this._getType(t)!==Ue.undefined){let n=this._getOrReturnCtx(t);return ke(n,{code:Ce.invalid_type,expected:Ue.undefined,received:n.parsedType}),Et}return go(t.data)}};Kg.create=e=>new Kg({typeName:yt.ZodUndefined,...Ot(e)});var zg=class extends qt{_parse(t){if(this._getType(t)!==Ue.null){let n=this._getOrReturnCtx(t);return ke(n,{code:Ce.invalid_type,expected:Ue.null,received:n.parsedType}),Et}return go(t.data)}};zg.create=e=>new zg({typeName:yt.ZodNull,...Ot(e)});var Kf=class extends qt{constructor(){super(...arguments),this._any=!0}_parse(t){return go(t.data)}};Kf.create=e=>new Kf({typeName:yt.ZodAny,...Ot(e)});var Dd=class extends qt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return go(t.data)}};Dd.create=e=>new Dd({typeName:yt.ZodUnknown,...Ot(e)});var fc=class extends qt{_parse(t){let r=this._getOrReturnCtx(t);return ke(r,{code:Ce.invalid_type,expected:Ue.never,received:r.parsedType}),Et}};fc.create=e=>new fc({typeName:yt.ZodNever,...Ot(e)});var QA=class extends qt{_parse(t){if(this._getType(t)!==Ue.undefined){let n=this._getOrReturnCtx(t);return ke(n,{code:Ce.invalid_type,expected:Ue.void,received:n.parsedType}),Et}return go(t.data)}};QA.create=e=>new QA({typeName:yt.ZodVoid,...Ot(e)});var Td=class e extends qt{_parse(t){let{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==Ue.array)return ke(r,{code:Ce.invalid_type,expected:Ue.array,received:r.parsedType}),Et;if(i.exactLength!==null){let o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(ke(r,{code:o?Ce.too_big:Ce.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ke(r,{code:Ce.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ke(r,{code:Ce.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new ml(r,o,r.path,a)))).then(o=>Ls.mergeArray(n,o));let s=[...r.data].map((o,a)=>i.type._parseSync(new ml(r,o,r.path,a)));return Ls.mergeArray(n,s)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Je.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Je.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Je.toString(r)}})}nonempty(t){return this.min(1,t)}};Td.create=(e,t)=>new Td({type:e,minLength:null,maxLength:null,exactLength:null,typeName:yt.ZodArray,...Ot(t)});function RA(e){if(e instanceof qo){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=pl.create(RA(n))}return new qo({...e._def,shape:()=>t})}else return e instanceof Td?new Td({...e._def,type:RA(e.element)}):e instanceof pl?pl.create(RA(e.unwrap())):e instanceof uu?uu.create(RA(e.unwrap())):e instanceof cu?cu.create(e.items.map(t=>RA(t))):e}var qo=class e extends qt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=Ir.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==Ue.object){let c=this._getOrReturnCtx(t);return ke(c,{code:Ce.invalid_type,expected:Ue.object,received:c.parsedType}),Et}let{status:n,ctx:i}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof fc&&this._def.unknownKeys==="strip"))for(let c in i.data)o.includes(c)||a.push(c);let l=[];for(let c of o){let u=s[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new ml(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof fc){let c=this._def.unknownKeys;if(c==="passthrough")for(let u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(ke(i,{code:Ce.unrecognized_keys,keys:a}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let u of a){let f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new ml(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let c=[];for(let u of l){let f=await u.key,p=await u.value;c.push({key:f,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>Ls.mergeObjectSync(n,c)):Ls.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return Je.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,s,o,a;let l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Je.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:yt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};return Ir.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}omit(t){let r={};return Ir.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new e({...this._def,shape:()=>r})}deepPartial(){return RA(this)}partial(t){let r={};return Ir.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}),new e({...this._def,shape:()=>r})}required(t){let r={};return Ir.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof pl;)s=s._def.innerType;r[n]=s}}),new e({...this._def,shape:()=>r})}keyof(){return $K(Ir.objectKeys(this.shape))}};qo.create=(e,t)=>new qo({shape:()=>e,unknownKeys:"strip",catchall:fc.create(),typeName:yt.ZodObject,...Ot(t)});qo.strictCreate=(e,t)=>new qo({shape:()=>e,unknownKeys:"strict",catchall:fc.create(),typeName:yt.ZodObject,...Ot(t)});qo.lazycreate=(e,t)=>new qo({shape:e,unknownKeys:"strip",catchall:fc.create(),typeName:yt.ZodObject,...Ot(t)});var Jg=class extends qt{_parse(t){let{ctx:r}=this._processInputParams(t),n=this._def.options;function i(s){for(let a of s)if(a.result.status==="valid")return a.result;for(let a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let o=s.map(a=>new ba(a.ctx.common.issues));return ke(r,{code:Ce.invalid_union,unionErrors:o}),Et}if(r.common.async)return Promise.all(n.map(async s=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s,o=[];for(let l of n){let c={...r,common:{...r.common,issues:[]},parent:null},u=l._parseSync({data:r.data,path:r.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let a=o.map(l=>new ba(l));return ke(r,{code:Ce.invalid_union,unionErrors:a}),Et}}get options(){return this._def.options}};Jg.create=(e,t)=>new Jg({options:e,typeName:yt.ZodUnion,...Ot(t)});var Id=e=>e instanceof Zg?Id(e.schema):e instanceof Ea?Id(e.innerType()):e instanceof Xg?[e.value]:e instanceof ep?e.options:e instanceof tp?Ir.objectValues(e.enum):e instanceof rp?Id(e._def.innerType):e instanceof Kg?[void 0]:e instanceof zg?[null]:e instanceof pl?[void 0,...Id(e.unwrap())]:e instanceof uu?[null,...Id(e.unwrap())]:e instanceof db||e instanceof ip?Id(e.unwrap()):e instanceof np?Id(e._def.innerType):[],oI=class e extends qt{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ue.object)return ke(r,{code:Ce.invalid_type,expected:Ue.object,received:r.parsedType}),Et;let n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(ke(r,{code:Ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Et)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){let i=new Map;for(let s of r){let o=Id(s.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let a of o){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,s)}}return new e({typeName:yt.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...Ot(n)})}};function _L(e,t){let r=Bd(e),n=Bd(t);if(e===t)return{valid:!0,data:e};if(r===Ue.object&&n===Ue.object){let i=Ir.objectKeys(t),s=Ir.objectKeys(e).filter(a=>i.indexOf(a)!==-1),o={...e,...t};for(let a of s){let l=_L(e[a],t[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(r===Ue.array&&n===Ue.array){if(e.length!==t.length)return{valid:!1};let i=[];for(let s=0;s<e.length;s++){let o=e[s],a=t[s],l=_L(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Ue.date&&n===Ue.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var jg=class extends qt{_parse(t){let{status:r,ctx:n}=this._processInputParams(t),i=(s,o)=>{if(bL(s)||bL(o))return Et;let a=_L(s.value,o.value);return a.valid?((EL(s)||EL(o))&&r.dirty(),{status:r.value,value:a.data}):(ke(n,{code:Ce.invalid_intersection_types}),Et)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};jg.create=(e,t,r)=>new jg({left:e,right:t,typeName:yt.ZodIntersection,...Ot(r)});var cu=class e extends qt{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ue.array)return ke(n,{code:Ce.invalid_type,expected:Ue.array,received:n.parsedType}),Et;if(n.data.length<this._def.items.length)return ke(n,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Et;!this._def.rest&&n.data.length>this._def.items.length&&(ke(n,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...n.data].map((o,a)=>{let l=this._def.items[a]||this._def.rest;return l?l._parse(new ml(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Ls.mergeArray(r,o)):Ls.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};cu.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new cu({items:e,typeName:yt.ZodTuple,rest:null,...Ot(t)})};var aI=class e extends qt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ue.object)return ke(n,{code:Ce.invalid_type,expected:Ue.object,received:n.parsedType}),Et;let i=[],s=this._def.keyType,o=this._def.valueType;for(let a in n.data)i.push({key:s._parse(new ml(n,a,n.path,a)),value:o._parse(new ml(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Ls.mergeObjectAsync(r,i):Ls.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof qt?new e({keyType:t,valueType:r,typeName:yt.ZodRecord,...Ot(n)}):new e({keyType:Yf.create(),valueType:t,typeName:yt.ZodRecord,...Ot(r)})}},NA=class extends qt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ue.map)return ke(n,{code:Ce.invalid_type,expected:Ue.map,received:n.parsedType}),Et;let i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,l],c)=>({key:i._parse(new ml(n,a,n.path,[c,"key"])),value:s._parse(new ml(n,l,n.path,[c,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let l of o){let c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Et;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(c.value,u.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let l of o){let c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Et;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(c.value,u.value)}return{status:r.value,value:a}}}};NA.create=(e,t,r)=>new NA({valueType:t,keyType:e,typeName:yt.ZodMap,...Ot(r)});var PA=class e extends qt{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ue.set)return ke(n,{code:Ce.invalid_type,expected:Ue.set,received:n.parsedType}),Et;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ke(n,{code:Ce.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ke(n,{code:Ce.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let s=this._def.valueType;function o(l){let c=new Set;for(let u of l){if(u.status==="aborted")return Et;u.status==="dirty"&&r.dirty(),c.add(u.value)}return{status:r.value,value:c}}let a=[...n.data.values()].map((l,c)=>s._parse(new ml(n,l,n.path,c)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(t,r){return new e({...this._def,minSize:{value:t,message:Je.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Je.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};PA.create=(e,t)=>new PA({valueType:e,minSize:null,maxSize:null,typeName:yt.ZodSet,...Ot(t)});var lI=class e extends qt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ue.function)return ke(r,{code:Ce.invalid_type,expected:Ue.function,received:r.parsedType}),Et;function n(a,l){return iI({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,nI(),MA].filter(c=>!!c),issueData:{code:Ce.invalid_arguments,argumentsError:l}})}function i(a,l){return iI({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,nI(),MA].filter(c=>!!c),issueData:{code:Ce.invalid_return_type,returnTypeError:l}})}let s={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof zf){let a=this;return go(async function(...l){let c=new ba([]),u=await a._def.args.parseAsync(l,s).catch(g=>{throw c.addIssue(n(l,g)),c}),f=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(f,s).catch(g=>{throw c.addIssue(i(f,g)),c})})}else{let a=this;return go(function(...l){let c=a._def.args.safeParse(l,s);if(!c.success)throw new ba([n(l,c.error)]);let u=Reflect.apply(o,this,c.data),f=a._def.returns.safeParse(u,s);if(!f.success)throw new ba([i(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:cu.create(t).rest(Dd.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new e({args:t||cu.create([]).rest(Dd.create()),returns:r||Dd.create(),typeName:yt.ZodFunction,...Ot(n)})}},Zg=class extends qt{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Zg.create=(e,t)=>new Zg({getter:e,typeName:yt.ZodLazy,...Ot(t)});var Xg=class extends qt{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return ke(r,{received:r.data,code:Ce.invalid_literal,expected:this._def.value}),Et}return{status:"valid",value:t.data}}get value(){return this._def.value}};Xg.create=(e,t)=>new Xg({value:e,typeName:yt.ZodLiteral,...Ot(t)});function $K(e,t){return new ep({values:e,typeName:yt.ZodEnum,...Ot(t)})}var ep=class e extends qt{constructor(){super(...arguments),lb.set(this,void 0)}_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),n=this._def.values;return ke(r,{expected:Ir.joinValues(n),received:r.parsedType,code:Ce.invalid_type}),Et}if(sI(this,lb,"f")||VK(this,lb,new Set(this._def.values),"f"),!sI(this,lb,"f").has(t.data)){let r=this._getOrReturnCtx(t),n=this._def.values;return ke(r,{received:r.data,code:Ce.invalid_enum_value,options:n}),Et}return go(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}};lb=new WeakMap;ep.create=$K;var tp=class extends qt{constructor(){super(...arguments),cb.set(this,void 0)}_parse(t){let r=Ir.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Ue.string&&n.parsedType!==Ue.number){let i=Ir.objectValues(r);return ke(n,{expected:Ir.joinValues(i),received:n.parsedType,code:Ce.invalid_type}),Et}if(sI(this,cb,"f")||VK(this,cb,new Set(Ir.getValidEnumValues(this._def.values)),"f"),!sI(this,cb,"f").has(t.data)){let i=Ir.objectValues(r);return ke(n,{received:n.data,code:Ce.invalid_enum_value,options:i}),Et}return go(t.data)}get enum(){return this._def.values}};cb=new WeakMap;tp.create=(e,t)=>new tp({values:e,typeName:yt.ZodNativeEnum,...Ot(t)});var zf=class extends qt{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ue.promise&&r.common.async===!1)return ke(r,{code:Ce.invalid_type,expected:Ue.promise,received:r.parsedType}),Et;let n=r.parsedType===Ue.promise?r.data:Promise.resolve(r.data);return go(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};zf.create=(e,t)=>new zf({type:e,typeName:yt.ZodPromise,...Ot(t)});var Ea=class extends qt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===yt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:o=>{ke(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){let o=i.transform(n.data,s);if(n.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return Et;let l=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return l.status==="aborted"?Et:l.status==="dirty"||r.value==="dirty"?kA(l.value):l});{if(r.value==="aborted")return Et;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?Et:a.status==="dirty"||r.value==="dirty"?kA(a.value):a}}if(i.type==="refinement"){let o=a=>{let l=i.refinement(a,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Et:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Et:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Hg(o))return o;let a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Hg(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);Ir.assertNever(i)}};Ea.create=(e,t,r)=>new Ea({schema:e,typeName:yt.ZodEffects,effect:t,...Ot(r)});Ea.createWithPreprocess=(e,t,r)=>new Ea({schema:t,effect:{type:"preprocess",transform:e},typeName:yt.ZodEffects,...Ot(r)});var pl=class extends qt{_parse(t){return this._getType(t)===Ue.undefined?go(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};pl.create=(e,t)=>new pl({innerType:e,typeName:yt.ZodOptional,...Ot(t)});var uu=class extends qt{_parse(t){return this._getType(t)===Ue.null?go(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};uu.create=(e,t)=>new uu({innerType:e,typeName:yt.ZodNullable,...Ot(t)});var rp=class extends qt{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return r.parsedType===Ue.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};rp.create=(e,t)=>new rp({innerType:e,typeName:yt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ot(t)});var np=class extends qt{_parse(t){let{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ub(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ba(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ba(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};np.create=(e,t)=>new np({innerType:e,typeName:yt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ot(t)});var LA=class extends qt{_parse(t){if(this._getType(t)!==Ue.nan){let n=this._getOrReturnCtx(t);return ke(n,{code:Ce.invalid_type,expected:Ue.nan,received:n.parsedType}),Et}return{status:"valid",value:t.data}}};LA.create=e=>new LA({typeName:yt.ZodNaN,...Ot(e)});var lQe=Symbol("zod_brand"),db=class extends qt{_parse(t){let{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},fb=class e extends qt{_parse(t){let{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Et:s.status==="dirty"?(r.dirty(),kA(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Et:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new e({in:t,out:r,typeName:yt.ZodPipeline})}},ip=class extends qt{_parse(t){let r=this._def.innerType._parse(t),n=i=>(Hg(i)&&(i.value=Object.freeze(i.value)),i);return ub(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};ip.create=(e,t)=>new ip({innerType:e,typeName:yt.ZodReadonly,...Ot(t)});function YK(e,t={},r){return e?Kf.create().superRefine((n,i)=>{var s,o;if(!e(n)){let a=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,l=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):Kf.create()}var cQe={object:qo.lazycreate},yt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(yt||(yt={}));var uQe=(e,t={message:`Input not instance of ${e.name}`})=>YK(r=>r instanceof e,t),KK=Yf.create,zK=Wg.create,dQe=LA.create,fQe=Gg.create,JK=$g.create,hQe=Yg.create,gQe=FA.create,pQe=Kg.create,mQe=zg.create,AQe=Kf.create,yQe=Dd.create,vQe=fc.create,CQe=QA.create,bQe=Td.create,EQe=qo.create,_Qe=qo.strictCreate,xQe=Jg.create,wQe=oI.create,SQe=jg.create,IQe=cu.create,BQe=aI.create,DQe=NA.create,TQe=PA.create,RQe=lI.create,kQe=Zg.create,MQe=Xg.create,FQe=ep.create,QQe=tp.create,NQe=zf.create,OK=Ea.create,PQe=pl.create,LQe=uu.create,UQe=Ea.createWithPreprocess,OQe=fb.create,qQe=()=>KK().optional(),VQe=()=>zK().optional(),HQe=()=>JK().optional(),WQe={string:e=>Yf.create({...e,coerce:!0}),number:e=>Wg.create({...e,coerce:!0}),boolean:e=>$g.create({...e,coerce:!0}),bigint:e=>Gg.create({...e,coerce:!0}),date:e=>Yg.create({...e,coerce:!0})},GQe=Et,k=Object.freeze({__proto__:null,defaultErrorMap:MA,setErrorMap:U1e,getErrorMap:nI,makeIssue:iI,EMPTY_PATH:O1e,addIssueToContext:ke,ParseStatus:Ls,INVALID:Et,DIRTY:kA,OK:go,isAborted:bL,isDirty:EL,isValid:Hg,isAsync:ub,get util(){return Ir},get objectUtil(){return CL},ZodParsedType:Ue,getParsedType:Bd,ZodType:qt,datetimeRegex:GK,ZodString:Yf,ZodNumber:Wg,ZodBigInt:Gg,ZodBoolean:$g,ZodDate:Yg,ZodSymbol:FA,ZodUndefined:Kg,ZodNull:zg,ZodAny:Kf,ZodUnknown:Dd,ZodNever:fc,ZodVoid:QA,ZodArray:Td,ZodObject:qo,ZodUnion:Jg,ZodDiscriminatedUnion:oI,ZodIntersection:jg,ZodTuple:cu,ZodRecord:aI,ZodMap:NA,ZodSet:PA,ZodFunction:lI,ZodLazy:Zg,ZodLiteral:Xg,ZodEnum:ep,ZodNativeEnum:tp,ZodPromise:zf,ZodEffects:Ea,ZodTransformer:Ea,ZodOptional:pl,ZodNullable:uu,ZodDefault:rp,ZodCatch:np,ZodNaN:LA,BRAND:lQe,ZodBranded:db,ZodPipeline:fb,ZodReadonly:ip,custom:YK,Schema:qt,ZodSchema:qt,late:cQe,get ZodFirstPartyTypeKind(){return yt},coerce:WQe,any:AQe,array:bQe,bigint:fQe,boolean:JK,date:hQe,discriminatedUnion:wQe,effect:OK,enum:FQe,function:RQe,instanceof:uQe,intersection:SQe,lazy:kQe,literal:MQe,map:DQe,nan:dQe,nativeEnum:QQe,never:vQe,null:mQe,nullable:LQe,number:zK,object:EQe,oboolean:HQe,onumber:VQe,optional:PQe,ostring:qQe,pipeline:OQe,preprocess:UQe,promise:NQe,record:BQe,set:TQe,strictObject:_Qe,string:KK,symbol:gQe,transformer:OK,tuple:IQe,undefined:pQe,union:xQe,unknown:yQe,void:CQe,NEVER:GQe,ZodIssueCode:Ce,quotelessJson:L1e,ZodError:ba});var xL="2024-11-05",jK=[xL,"2024-10-07"],cI="2.0",ZK=k.union([k.string(),k.number().int()]),XK=k.string(),hc=k.object({_meta:k.optional(k.object({progressToken:k.optional(ZK)}).passthrough())}).passthrough(),_a=k.object({method:k.string(),params:k.optional(hc)}),hb=k.object({_meta:k.optional(k.object({}).passthrough())}).passthrough(),du=k.object({method:k.string(),params:k.optional(hb)}),gc=k.object({_meta:k.optional(k.object({}).passthrough())}).passthrough(),uI=k.union([k.string(),k.number().int()]),$Qe=k.object({jsonrpc:k.literal(cI),id:uI}).merge(_a).strict(),YQe=k.object({jsonrpc:k.literal(cI)}).merge(du).strict(),KQe=k.object({jsonrpc:k.literal(cI),id:uI,result:gc}).strict(),sp;(function(e){e[e.ConnectionClosed=-1]="ConnectionClosed",e[e.RequestTimeout=-2]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError"})(sp||(sp={}));var zQe=k.object({jsonrpc:k.literal(cI),id:uI,error:k.object({code:k.number().int(),message:k.string(),data:k.optional(k.unknown())})}).strict(),ez=k.union([$Qe,YQe,KQe,zQe]),op=gc.strict(),dI=du.extend({method:k.literal("notifications/cancelled"),params:hb.extend({requestId:uI,reason:k.string().optional()})}),tz=k.object({name:k.string(),version:k.string()}).passthrough(),JQe=k.object({experimental:k.optional(k.object({}).passthrough()),sampling:k.optional(k.object({}).passthrough()),roots:k.optional(k.object({listChanged:k.optional(k.boolean())}).passthrough())}).passthrough(),jQe=_a.extend({method:k.literal("initialize"),params:hc.extend({protocolVersion:k.string(),capabilities:JQe,clientInfo:tz})}),ZQe=k.object({experimental:k.optional(k.object({}).passthrough()),logging:k.optional(k.object({}).passthrough()),prompts:k.optional(k.object({listChanged:k.optional(k.boolean())}).passthrough()),resources:k.optional(k.object({subscribe:k.optional(k.boolean()),listChanged:k.optional(k.boolean())}).passthrough()),tools:k.optional(k.object({listChanged:k.optional(k.boolean())}).passthrough())}).passthrough(),wL=gc.extend({protocolVersion:k.string(),capabilities:ZQe,serverInfo:tz}),XQe=du.extend({method:k.literal("notifications/initialized")}),fI=_a.extend({method:k.literal("ping")}),eNe=k.object({progress:k.number(),total:k.optional(k.number())}).passthrough(),hI=du.extend({method:k.literal("notifications/progress"),params:hb.merge(eNe).extend({progressToken:ZK})}),gI=_a.extend({params:hc.extend({cursor:k.optional(XK)}).optional()}),pI=gc.extend({nextCursor:k.optional(XK)}),rz=k.object({uri:k.string(),mimeType:k.optional(k.string())}).passthrough(),nz=rz.extend({text:k.string()}),iz=rz.extend({blob:k.string().base64()}),tNe=k.object({uri:k.string(),name:k.string(),description:k.optional(k.string()),mimeType:k.optional(k.string())}).passthrough(),rNe=k.object({uriTemplate:k.string(),name:k.string(),description:k.optional(k.string()),mimeType:k.optional(k.string())}).passthrough(),nNe=gI.extend({method:k.literal("resources/list")}),SL=pI.extend({resources:k.array(tNe)}),iNe=gI.extend({method:k.literal("resources/templates/list")}),IL=pI.extend({resourceTemplates:k.array(rNe)}),sNe=_a.extend({method:k.literal("resources/read"),params:hc.extend({uri:k.string()})}),BL=gc.extend({contents:k.array(k.union([nz,iz]))}),oNe=du.extend({method:k.literal("notifications/resources/list_changed")}),aNe=_a.extend({method:k.literal("resources/subscribe"),params:hc.extend({uri:k.string()})}),lNe=_a.extend({method:k.literal("resources/unsubscribe"),params:hc.extend({uri:k.string()})}),cNe=du.extend({method:k.literal("notifications/resources/updated"),params:hb.extend({uri:k.string()})}),uNe=k.object({name:k.string(),description:k.optional(k.string()),required:k.optional(k.boolean())}).passthrough(),dNe=k.object({name:k.string(),description:k.optional(k.string()),arguments:k.optional(k.array(uNe))}).passthrough(),fNe=gI.extend({method:k.literal("prompts/list")}),DL=pI.extend({prompts:k.array(dNe)}),hNe=_a.extend({method:k.literal("prompts/get"),params:hc.extend({name:k.string(),arguments:k.optional(k.record(k.string()))})}),mI=k.object({type:k.literal("text"),text:k.string()}).passthrough(),AI=k.object({type:k.literal("image"),data:k.string().base64(),mimeType:k.string()}).passthrough(),sz=k.object({type:k.literal("resource"),resource:k.union([nz,iz])}).passthrough(),gNe=k.object({role:k.enum(["user","assistant"]),content:k.union([mI,AI,sz])}).passthrough(),TL=gc.extend({description:k.optional(k.string()),messages:k.array(gNe)}),pNe=du.extend({method:k.literal("notifications/prompts/list_changed")}),mNe=k.object({name:k.string(),description:k.optional(k.string()),inputSchema:k.object({type:k.literal("object"),properties:k.optional(k.object({}).passthrough())}).passthrough()}).passthrough(),ANe=gI.extend({method:k.literal("tools/list")}),RL=pI.extend({tools:k.array(mNe)}),OA=gc.extend({content:k.array(k.union([mI,AI,sz])),isError:k.boolean().default(!1).optional()}),uxt=OA.or(gc.extend({toolResult:k.unknown()})),yNe=_a.extend({method:k.literal("tools/call"),params:hc.extend({name:k.string(),arguments:k.optional(k.record(k.unknown()))})}),vNe=du.extend({method:k.literal("notifications/tools/list_changed")}),oz=k.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),CNe=_a.extend({method:k.literal("logging/setLevel"),params:hc.extend({level:oz})}),bNe=du.extend({method:k.literal("notifications/message"),params:hb.extend({level:oz,logger:k.optional(k.string()),data:k.unknown()})}),ENe=k.object({name:k.string().optional()}).passthrough(),_Ne=k.object({hints:k.optional(k.array(ENe)),costPriority:k.optional(k.number().min(0).max(1)),speedPriority:k.optional(k.number().min(0).max(1)),intelligencePriority:k.optional(k.number().min(0).max(1))}).passthrough(),xNe=k.object({role:k.enum(["user","assistant"]),content:k.union([mI,AI])}).passthrough(),wNe=_a.extend({method:k.literal("sampling/createMessage"),params:hc.extend({messages:k.array(xNe),systemPrompt:k.optional(k.string()),includeContext:k.optional(k.enum(["none","thisServer","allServers"])),temperature:k.optional(k.number()),maxTokens:k.number().int(),stopSequences:k.optional(k.array(k.string())),metadata:k.optional(k.object({}).passthrough()),modelPreferences:k.optional(_Ne)})}),SNe=gc.extend({model:k.string(),stopReason:k.optional(k.enum(["endTurn","stopSequence","maxTokens"]).or(k.string())),role:k.enum(["user","assistant"]),content:k.discriminatedUnion("type",[mI,AI])}),INe=k.object({type:k.literal("ref/resource"),uri:k.string()}).passthrough(),BNe=k.object({type:k.literal("ref/prompt"),name:k.string()}).passthrough(),DNe=_a.extend({method:k.literal("completion/complete"),params:hc.extend({ref:k.union([BNe,INe]),argument:k.object({name:k.string(),value:k.string()}).passthrough()})}),kL=gc.extend({completion:k.object({values:k.array(k.string()).max(100),total:k.optional(k.number().int()),hasMore:k.optional(k.boolean())}).passthrough()}),TNe=k.object({uri:k.string().startsWith("file://"),name:k.optional(k.string())}).passthrough(),RNe=_a.extend({method:k.literal("roots/list")}),kNe=gc.extend({roots:k.array(TNe)}),MNe=du.extend({method:k.literal("notifications/roots/list_changed")}),dxt=k.union([fI,jQe,DNe,CNe,hNe,fNe,nNe,iNe,sNe,aNe,lNe,yNe,ANe]),fxt=k.union([dI,hI,XQe,MNe]),hxt=k.union([op,SNe,kNe]),gxt=k.union([fI,wNe,RNe]),pxt=k.union([dI,hI,bNe,cNe,oNe,vNe,pNe]),mxt=k.union([op,wL,kL,TL,DL,SL,IL,BL,OA,RL]),UA=class extends Error{code;data;constructor(t,r,n){super(`MCP error ${t}: ${r}`),this.code=t,this.data=n}};var FNe=6e4,yI=class{_options;_transport;_requestMessageId=0;_requestHandlers=new Map;_requestHandlerAbortControllers=new Map;_notificationHandlers=new Map;_responseHandlers=new Map;_progressHandlers=new Map;onclose;onerror;fallbackRequestHandler;fallbackNotificationHandler;constructor(t){this._options=t,this.setNotificationHandler(dI,r=>{this._requestHandlerAbortControllers.get(r.params.requestId)?.abort(r.params.reason)}),this.setNotificationHandler(hI,r=>{this._onprogress(r)}),this.setRequestHandler(fI,r=>({}))}async connect(t){this._transport=t,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=r=>{this._onerror(r)},this._transport.onmessage=r=>{"method"in r?"id"in r?this._onrequest(r):this._onnotification(r):this._onresponse(r)},await this._transport.start()}_onclose(){let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,this.onclose?.();let r=new UA(sp.ConnectionClosed,"Connection closed");for(let n of t.values())n(r)}_onerror(t){this.onerror?.(t)}_onnotification(t){let r=this._notificationHandlers.get(t.method)??this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(t)).catch(n=>this._onerror(new Error(`Uncaught error in notification handler: ${n}`)))}_onrequest(t){let r=this._requestHandlers.get(t.method)??this.fallbackRequestHandler;if(r===void 0){this._transport?.send({jsonrpc:"2.0",id:t.id,error:{code:sp.MethodNotFound,message:"Method not found"}}).catch(i=>this._onerror(new Error(`Failed to send an error response: ${i}`)));return}let n=new AbortController;this._requestHandlerAbortControllers.set(t.id,n),Promise.resolve().then(()=>r(t,{signal:n.signal})).then(i=>{if(!n.signal.aborted)return this._transport?.send({result:i,jsonrpc:"2.0",id:t.id})},i=>{if(!n.signal.aborted)return this._transport?.send({jsonrpc:"2.0",id:t.id,error:{code:Number.isSafeInteger(i.code)?i.code:sp.InternalError,message:i.message??"Internal error"}})}).catch(i=>this._onerror(new Error(`Failed to send response: ${i}`))).finally(()=>{this._requestHandlerAbortControllers.delete(t.id)})}_onprogress(t){let{progressToken:r,...n}=t.params,i=this._progressHandlers.get(Number(r));if(i===void 0){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(t)}`));return}i(n)}_onresponse(t){let r=t.id,n=this._responseHandlers.get(Number(r));if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(t)}`));return}if(this._responseHandlers.delete(Number(r)),this._progressHandlers.delete(Number(r)),"result"in t)n(t);else{let i=new UA(t.error.code,t.error.message,t.error.data);n(i)}}get transport(){return this._transport}async close(){await this._transport?.close()}request(t,r,n){return new Promise((i,s)=>{if(!this._transport){s(new Error("Not connected"));return}this._options?.enforceStrictCapabilities===!0&&this.assertCapabilityForMethod(t.method),n?.signal?.throwIfAborted();let o=this._requestMessageId++,a={...t,jsonrpc:"2.0",id:o};n?.onprogress&&(this._progressHandlers.set(o,n.onprogress),a.params={...t.params,_meta:{progressToken:o}});let l;this._responseHandlers.set(o,f=>{if(l!==void 0&&clearTimeout(l),!n?.signal?.aborted){if(f instanceof Error)return s(f);try{let p=r.parse(f.result);i(p)}catch(p){s(p)}}});let c=f=>{this._responseHandlers.delete(o),this._progressHandlers.delete(o),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:o,reason:String(f)}}).catch(p=>this._onerror(new Error(`Failed to send cancellation: ${p}`))),s(f)};n?.signal?.addEventListener("abort",()=>{l!==void 0&&clearTimeout(l),c(n?.signal?.reason)});let u=n?.timeout??FNe;l=setTimeout(()=>c(new UA(sp.RequestTimeout,"Request timed out",{timeout:u})),u),this._transport.send(a).catch(f=>{l!==void 0&&clearTimeout(l),s(f)})})}async notification(t){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(t.method);let r={...t,jsonrpc:"2.0"};await this._transport.send(r)}setRequestHandler(t,r){let n=t.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,s)=>Promise.resolve(r(t.parse(i),s)))}removeRequestHandler(t){this._requestHandlers.delete(t)}setNotificationHandler(t,r){this._notificationHandlers.set(t.shape.method.value,n=>Promise.resolve(r(t.parse(n))))}removeNotificationHandler(t){this._notificationHandlers.delete(t)}};var vI=class extends yI{_clientInfo;_serverCapabilities;_serverVersion;_capabilities;constructor(t,r){super(r),this._clientInfo=t,this._capabilities=r.capabilities}assertCapability(t,r){if(!this._serverCapabilities?.[t])throw new Error(`Server does not support ${t} (required for ${r})`)}async connect(t){await super.connect(t);try{let r=await this.request({method:"initialize",params:{protocolVersion:xL,capabilities:this._capabilities,clientInfo:this._clientInfo}},wL);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!jK.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,await this.notification({method:"notifications/initialized"})}catch(r){throw this.close(),r}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}assertCapabilityForMethod(t){switch(t){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw new Error(`Server does not support resources (required for ${t})`);if(t==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${t})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw new Error(`Server does not support tools (required for ${t})`);break;case"completion/complete":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(t){switch(t){case"notifications/roots/list_changed":if(!this._capabilities.roots?.listChanged)throw new Error(`Client does not support roots list changed notifications (required for ${t})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(t){switch(t){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${t})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${t})`);break;case"ping":break}}async ping(t){return this.request({method:"ping"},op,t)}async complete(t,r){return this.request({method:"completion/complete",params:t},kL,r)}async setLoggingLevel(t,r){return this.request({method:"logging/setLevel",params:{level:t}},op,r)}async getPrompt(t,r){return this.request({method:"prompts/get",params:t},TL,r)}async listPrompts(t,r){return this.request({method:"prompts/list",params:t},DL,r)}async listResources(t,r){return this.request({method:"resources/list",params:t},SL,r)}async listResourceTemplates(t,r){return this.request({method:"resources/templates/list",params:t},IL,r)}async readResource(t,r){return this.request({method:"resources/read",params:t},BL,r)}async subscribeResource(t,r){return this.request({method:"resources/subscribe",params:t},op,r)}async unsubscribeResource(t,r){return this.request({method:"resources/unsubscribe",params:t},op,r)}async callTool(t,r=OA,n){return this.request({method:"tools/call",params:t},r,n)}async listTools(t,r){return this.request({method:"tools/list",params:t},RL,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var lz=require("child_process"),gb=q(require("process"));var CI=class{_buffer;append(t){this._buffer=this._buffer?Buffer.concat([this._buffer,t]):t}readMessage(){if(!this._buffer)return null;let t=this._buffer.indexOf(`
`);if(t===-1)return null;let r=this._buffer.toString("utf8",0,t);return this._buffer=this._buffer.subarray(t+1),QNe(r)}clear(){this._buffer=void 0}};function QNe(e){return ez.parse(JSON.parse(e))}function az(e){return JSON.stringify(e)+`
`}var NNe=gb.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function ML(){let e={};for(let t of NNe){let r=gb.default.env[t];r!==void 0&&(r.startsWith("()")||(e[t]=r))}return e}var bI=class{_process;_abortController=new AbortController;_readBuffer=new CI;_serverParams;onclose;onerror;onmessage;constructor(t){this._serverParams=t}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((t,r)=>{this._process=(0,lz.spawn)(this._serverParams.command,this._serverParams.args??[],{env:this._serverParams.env??ML(),stdio:["pipe","pipe",this._serverParams.stderr??"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:gb.default.platform==="win32"&&PNe()}),this._process.on("error",n=>{if(n.name==="AbortError"){this.onclose?.();return}r(n),this.onerror?.(n)}),this._process.on("spawn",()=>{t()}),this._process.on("close",n=>{this._process=void 0,this.onclose?.()}),this._process.stdin?.on("error",n=>{this.onerror?.(n)}),this._process.stdout?.on("data",n=>{this._readBuffer.append(n),this.processReadBuffer()}),this._process.stdout?.on("error",n=>{this.onerror?.(n)})})}get stderr(){return this._process?.stderr??null}processReadBuffer(){for(;;)try{let t=this._readBuffer.readMessage();if(t===null)break;this.onmessage?.(t)}catch(t){this.onerror?.(t)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(t){return new Promise(r=>{if(!this._process?.stdin)throw new Error("Not connected");let n=az(t);this._process.stdin.write(n)?r():this._process.stdin.once("drain",r)})}};function PNe(){return"type"in gb.default}var uz=q(Cs());var Wi;(function(e){e.readFile="read-file",e.saveFile="save-file",e.editFile="edit-file",e.clarify="clarify",e.onboardingSubAgent="onboarding-sub-agent",e.launchProcess="launch-process",e.killProcess="kill-process",e.readProcess="read-process",e.writeProcess="write-process",e.listProcesses="list-processes",e.waitProcess="wait-process",e.openBrowser="open-browser",e.strReplaceEditor="str-replace-editor",e.diagnostics="diagnostics",e.setupScript="setup-script"})(Wi||(Wi={}));var Gi;(function(e){e.remoteToolHost="remoteToolHost",e.localToolHost="localToolHost",e.sidecarToolHost="sidecarToolHost",e.mcpHost="mcpHost"})(Gi||(Gi={}));var Jf;(function(e){e[e.ContentText=0]="ContentText",e[e.ContentImage=1]="ContentImage"})(Jf||(Jf={}));var Vt;(function(e){e[e.Unsafe=0]="Unsafe",e[e.Safe=1]="Safe",e[e.Check=2]="Check"})(Vt||(Vt={}));var Cn=class{name;toolSafety;constructor(t,r){this.name=t,this.toolSafety=r}version=1},Mn;(function(e){e[e.Unknown=0]="Unknown",e[e.WebSearch=1]="WebSearch",e[e.GitHubApi=8]="GitHubApi",e[e.Linear=12]="Linear",e[e.Jira=13]="Jira",e[e.Confluence=14]="Confluence",e[e.Notion=15]="Notion",e[e.Supabase=16]="Supabase",e[e.Glean=17]="Glean"})(Mn||(Mn={}));var jf;(function(e){e[e.UnknownStatus=0]="UnknownStatus",e[e.Available=1]="Available",e[e.UserConfigRequired=2]="UserConfigRequired"})(jf||(jf={}));var dz=require("child_process");function lr(e,t){return{text:e,isError:!1,requestId:t}}function ot(e,t){return{text:e,isError:!0,requestId:t}}function cz(e,t=!1,r){if(e.length===0)return t?ot("No content provided",r):lr("",r);let n="";for(let i of e)if(i.type===Jf.ContentText&&i.text_content){n=i.text_content;break}return{text:n,isError:t,requestId:r,contentNodes:e}}var mb=class e{_config;_onStartupError;_client=void 0;_initializingPromise;_closingPromise=void 0;_cancelledByUser=!1;_toolDefinitions=void 0;_runningTool=void 0;_serverName;_stdErrGenerator=void 0;static maxTimeoutMs=2147483647;static defaultTimeoutMs=2e9;constructor(t,r=void 0,n){this._config=t,this._onStartupError=n,this._client=new vI({name:"augment-mcp-client",version:"1.0.0"},{capabilities:{}}),this.validateConfig(t),this._serverName=t.name&&t.name.length>0?this.sanitizeServerName(t.name):this.extractServerName(t.command),this._initializingPromise=(async()=>{if(await r,this._closingPromise!==void 0)throw new Error("Client is closing");if(this._client===void 0)throw new Error("Client is undefined");let i=this._config.command,s=this._config.args||[];this._config.useShellInterpolation&&(process.platform==="win32"?(s=["/c",i],i="cmd.exe"):(s=["-c",i],i="/bin/sh"));let o=new FL({command:i,args:s,env:{...ML(),...this._config.env},stderr:"pipe"});this._stdErrGenerator=o,await this._client.connect(o);let a=await this._client.listTools();this._toolDefinitions=a?.tools.map(l=>{let c=this.createNamespacedToolName(l.name);return{definition:{name:c,description:l.description??"",input_schema_json:JSON.stringify(l.inputSchema),tool_safety:Vt.Unsafe,mcp_server_name:this._serverName,mcp_tool_name:l.name},identifier:{hostName:Gi.mcpHost,toolId:c},isConfigured:!0,enabled:!0,toolSafety:Vt.Unsafe}})??[]})().catch(i=>{let s;this._client!==void 0&&this._stdErrGenerator!==void 0&&(s=this._stdErrGenerator.capturedStderr),this._onStartupError({command:this._config.command,args:this._config.args,error:i instanceof Error?i.message:String(i),...s!==void 0&&{stderr:s}})}).finally(()=>{this._stdErrGenerator?.stopCapturing()})}isRequestActive(t,r){return this._runningTool?.requestId===t&&this._runningTool?.toolUseId===r}close(t=!1){return this._closingPromise===void 0&&(this._cancelledByUser=t,this._closingPromise=(async()=>{let r=this._stdErrGenerator?._process?.pid;if(this._config.useShellInterpolation&&(process.platform==="linux"||process.platform==="darwin")&&r)try{(0,dz.execSync)(`pkill -P ${r}`)}catch{}await(await this.getClient()).close()})()),this._closingPromise}closeAllToolProcesses(){return Promise.resolve()}async getToolDefinitions(){return await this.getClient(),this._toolDefinitions===void 0?[]:this._toolDefinitions}getAllToolDefinitions(t=!0){return this.getToolDefinitions()}getTool(t){}getName(){return Gi.mcpHost}async callTool(t,r,n,i,s){let o=await this.getClient();if(this._closingPromise!==void 0)return ot("MCP client is closing");this._runningTool={requestId:t,toolUseId:r};let a=this.extractOriginalToolName(n),l;try{let f={timeout:this._config.timeoutMs??e.defaultTimeoutMs};l=await o.callTool({name:a,arguments:i},OA,f)}catch(f){if(this._cancelledByUser)return ot("Cancelled by user.");throw f}finally{this._runningTool=void 0}let c=typeof l.isError=="boolean"?l.isError:!1;if(!Array.isArray(l.content))throw new Error("Unexpected result format: content is not an array");let u=[];for(let f of l.content)typeof f.type=="string"&&(f.type==="image"&&f.data&&typeof f.data=="string"&&typeof f.mimeType=="string"?u.push({type:Jf.ContentImage,image_content:{media_type:String(f.mimeType),image_data:String(f.data)}}):f.type==="text"&&typeof f.text=="string"&&u.push({type:Jf.ContentText,text_content:String(f.text)}));if(u.length===0){let f=c?"No result":"";return c?ot(f):lr(f)}if(u.length===1){let f=u[0];if(f.type===Jf.ContentText)return c?ot(f.text_content||"",t):lr(f.text_content||"",t)}return cz(u,c,t)}async checkToolCallSafe(t,r){return Promise.resolve(!1)}async getClient(){if(await this._initializingPromise,this._client===void 0)throw new Error("Client is undefined");return this._client}validateConfig(t){if(t?.timeoutMs!==void 0&&t?.timeoutMs>e.maxTimeoutMs)throw new Error(`Timeout is too large: ${t.timeoutMs}, max is ${e.maxTimeoutMs}.`)}sanitizeServerName(t){return t.replace(/[^a-zA-Z0-9_-]/g,"_")}extractServerName(t){let n=t.split(/\s+/)[0].split(/[/\\]/).pop()||"mcp";return this.sanitizeServerName(n)}_toolNameMap=new Map;createNamespacedToolName(t){let r=(0,uz.truncate)(`${t}_${this._serverName}`,{length:64,omission:""});return this._toolNameMap.set(r,t),r}extractOriginalToolName(t){let r=this._toolNameMap.get(t);if(r)return r;let n=`_${this._serverName}`;return t.endsWith(n)?t.substring(0,t.length-n.length):t}factory(t){return new e(this._config,t,this._onStartupError)}};var FL=class extends bI{_capturedStdErr=[];_capturing=!0;async start(){await super.start();let t=this.stderr;t&&t.on("data",r=>{this._capturing&&this._capturedStdErr.push(r.toString())})}get capturedStderr(){return this._capturedStdErr.join("")}stopCapturing(){this._capturing=!1}};function fz(e){return Object.keys(e).map(t=>Number.parseInt(t,10)).filter(t=>!Number.isNaN(t))}var hz=require("child_process"),gz=require("util");async function VA(e,t){let r=(0,gz.promisify)(hz.exec);try{let{stdout:n}=await r(e,t);return n.trim()}catch{return}}var EI=class{toolId=Mn.GitHubApi;constructor(){}async transform(t){let r=await this.getGitInfo();return r?{...t,description:t.description+`

`+r}:t}async getGitInfo(){let t=await Vi().getCwd();if(!t)return;let r={timeout:1e3,cwd:t};try{let n=await VA("git rev-parse --show-toplevel",r);if(!n)return;let i={timeout:1e3,cwd:n},[s,o,a,l]=await Promise.all([VA("git config --get remote.origin.url",i),VA("git rev-parse --abbrev-ref HEAD",i),VA("git rev-parse --abbrev-ref origin/HEAD",i),VA("git config --get user.email",i)]),c=a?.split("/").pop(),u=["Local Git Repository Information:"];return n&&u.push(`- Repository Root: ${n}`),s&&u.push(`- Remote URL: ${s}`),o&&u.push(`- Current Branch: ${o}`),c&&u.push(`- Default Branch: ${c}`),l&&u.push(`- Git User Email: ${l}`),u.push("REPOSITORY SCOPE:"),u.push("All queries MUST be limited to this repository only, unless explicitly requested otherwise. Always indicate in text outside of the tool use that you are limiting to this repo if you are doing so."),u.join(`
`)+`
`}catch{return}}};var _I=class e{_remoteInfoSource;_abortController=void 0;_toolMap=new Map;_logger=ut("RemoteToolHost");_transformationMap;_cachedToolDefinitions=null;_lastCacheUpdateTime=0;_cacheExpirationMs=60*60*1e3;constructor(t){this._remoteInfoSource=t;let r=new EI;this._transformationMap=new Map([[r.toolId,r]])}async getToolDefinitions(t=!0){let r=(await this._getToolDefinitions(t)).filter(n=>n.isConfigured);return this._toolMap.clear(),r.forEach(n=>{this._toolMap.set(n.identifier.toolId,n)}),r}async getAllToolDefinitions(t=!0){return await this._getToolDefinitions(t)}getTool(t){}getName(){return Gi.remoteToolHost}async _getToolDefinitions(t=!0){if(t&&this._cachedToolDefinitions!==null&&Date.now()-this._lastCacheUpdateTime<this._cacheExpirationMs)return this._cachedToolDefinitions;this._logger.debug("Fetching remote tool definitions from backend");try{let r=fz(Mn),n=await this._remoteInfoSource.retrieveRemoteTools(r),i=n.filter(c=>c.availabilityStatus===jf.UserConfigRequired).map(c=>c.remoteToolId),s=await this._remoteInfoSource.filterToolsWithExtraInput(i),o=c=>c.availabilityStatus===jf.Available?!0:c.availabilityStatus===jf.UserConfigRequired?s.has(c.remoteToolId):!1,l=(await Promise.all(n.map(async c=>{let u=this._transformationMap.get(c.remoteToolId);if(u){this._logger.debug(`Applying transformation for ${c.remoteToolId}`);let f=await u.transform(c.toolDefinition);return{...c,toolDefinition:f}}return c}))).map(c=>({definition:c.toolDefinition,identifier:{hostName:Gi.remoteToolHost,toolId:c.remoteToolId},isConfigured:o(c),enabled:!0,toolSafety:c.toolSafety,oauthUrl:c.oauthUrl}));return this._cachedToolDefinitions=l,this._lastCacheUpdateTime=Date.now(),l}catch(r){return this._logger.error("Failed to list remote tools",r),this._cachedToolDefinitions!==null?(this._logger.info("Using expired cache due to error fetching remote tools"),this._cachedToolDefinitions):[]}}findToolIdByName(t){for(let[r,n]of this._toolMap.entries())if(n.definition.name.toString()===t)return r;return Mn.Unknown}async callTool(t,r,n,i,s){try{let o=this._abortController=new AbortController,a=this.findToolIdByName(n);if(!this._toolMap.get(a))return this._logger.error(`Tool not found: ${n}`),{text:`Tool ${n} not found.`,isError:!0};let c=uo(),u=await this._remoteInfoSource.runRemoteTool(c,n,JSON.stringify(i),a,o.signal);return u.status!==Ab.ExecutionSuccess&&this._logger.error(`Failed to run remote tool ${n}: ${Ab[u.status]}`),{text:u.toolOutput,isError:u.status!==Ab.ExecutionSuccess,requestId:c}}catch(o){return{text:`Failed to run remote tool ${n} - ${o instanceof Error?o.message:o}`,isError:!0}}finally{this._abortController=void 0}}checkToolCallSafe(t,r){let n=this.findToolIdByName(t),i=this._toolMap.get(n);return i?.toolSafety===Vt.Check?gl().checkToolSafety(n,JSON.stringify(r)):Promise.resolve(i?.toolSafety===Vt.Safe)}isRequestActive(t,r){return this._abortController!==void 0}close(t=!1){return this._abortController?.abort(),Promise.resolve()}closeAllToolProcesses(){return Promise.resolve()}factory(t){return new e(this._remoteInfoSource)}},Ab;(function(e){e[e.ExecutionUnknownStatus=0]="ExecutionUnknownStatus",e[e.ExecutionSuccess=1]="ExecutionSuccess",e[e.NotFound=2]="NotFound",e[e.InvalidInput=3]="InvalidInput",e[e.ExecutionError=4]="ExecutionError",e[e.NotAvailable=5]="NotAvailable",e[e.AuthenticationError=6]="AuthenticationError"})(Ab||(Ab={}));var HA=class{_tools;hostName;_unsupportedTools;_runningTool=void 0;_abortController=void 0;constructor(t,r,n){this._tools=t,this.hostName=r,this._unsupportedTools=n}getToolDefinitions(){return Promise.resolve(this._tools.filter(t=>!this._unsupportedTools?.has(t.name)).map(t=>({definition:{name:t.name,description:t.description,input_schema_json:t.inputSchemaJson,tool_safety:t.toolSafety},identifier:{hostName:this.hostName,toolId:t.name},isConfigured:!0,enabled:!0,toolSafety:t.toolSafety})))}getAllToolDefinitions(t=!0){return this.getToolDefinitions()}getTool(t){return this._tools.find(r=>r.name===t)}getName(){return this.hostName}async callTool(t,r,n,i,s){let o=this._tools.find(a=>a.name.toString()===n);if(o===void 0)return{isError:!0,text:`Tool ${n} not found.`};this._runningTool={requestId:t,toolUseId:r,tool:o};try{let a=this._abortController=new AbortController;return await o.call(i,s,a.signal)}finally{this._runningTool=void 0,this._abortController=void 0}}async checkToolCallSafe(t,r){let n=this._tools.find(i=>i.name===t);return n===void 0?Promise.resolve(!1):n.checkToolCallSafe(r)}isRequestActive(t,r){return this._runningTool?.requestId===t&&this._runningTool?.toolUseId===r}close(t=!1){return this._abortController?.abort(),Promise.resolve()}closeAllToolProcesses(){return Promise.resolve()}};function pc(e,t,r=!1){let n=[...e];return n.length<=t?e:r?t<=3?"...":"..."+n.slice(3-t).join(""):n.slice(0,Math.max(t-3,0)).join("")+"..."}function xI(e,t){if(e.length<=t||e.length===0)return e;let r=e.split(`
`),i="... additional lines truncated ..."+(r[0].endsWith("\r")?"\r":""),s="";if(r.length<2||r[0].length+r[r.length-1].length+i.length>t){let o=Math.floor(t/2);s=[e.slice(0,o),"<...>",e.slice(-o)].join("")}else{let o=[],a=[],l=i.length+1;for(let c=0;c<Math.floor(r.length/2);c++){let u=r[c],f=r[r.length-1-c],p=u.length+f.length+2;if(l+p>t)break;l+=p,o.push(u),a.push(f)}o.push(i),o.push(...a.reverse()),s=o.join(`
`)}return s}var wI=class extends Cn{_maxRetrievalSize=2e4;constructor(){super(Hi.codebaseRetrieval,Vt.Safe)}description=`This tool is Augment's context engine, the world's best codebase context engine. It:
1. Takes in a natural language description of the code you are looking for;
2. Uses a proprietary retrieval/embedding model suite that produces the highest-quality recall of relevant code snippets from across the codebase;
3. Maintains a real-time index of the codebase, so the results are always up-to-date and reflects the current state of the codebase;
4. Can retrieve across different programming languages;
5. Only reflects the current state of the codebase on the disk, and has no information on version control or code history.`;inputSchemaJson=JSON.stringify({type:"object",properties:{information_request:{type:"string",description:"A description of the information you need."}},required:["information_request"]});version=2;checkToolCallSafe(t){return!0}async call(t,r,n){let i=uo();try{let s=t.information_request,o=await gl().agentCodebaseRetrieval(i,s,r,this._maxRetrievalSize,n),a=pc(o.formattedRetrieval,this._maxRetrievalSize);return lr(a,i)}catch(s){return ot(`Failed to retrieve codebase information: ${s instanceof Error?s.message:String(s)}`,i)}}};var SI=class extends Cn{_checkpointManager;constructor(t){super(Hi.removeFiles,Vt.Safe),this._checkpointManager=t}description="Remove files. ONLY use this tool to delete files in the user's workspace. This is the only safe tool to delete files in a way that the user can undo the change. Do NOT use the shell or launch-process tools to remove files.";inputSchemaJson=JSON.stringify({type:"object",properties:{file_paths:{type:"array",description:"The paths of the files to remove.",items:{type:"string"}}},required:["file_paths"]});checkToolCallSafe(t){return!0}async call(t,r,n){let i=t.file_paths,s=0,o;try{for(let a of i){let l=await Vi().readFile(a);if(l===void 0||l.contents===void 0||l.filepath===void 0){o=`Cannot read file: ${a}`;break}let c=l.filepath,u=l.contents,f=new un(c,u,void 0,{}),p=r.at(-1)?.request_id??uo(),g=this._checkpointManager.currentConversationId??"";try{await this._checkpointManager.addCheckpoint({conversationId:g,path:c},{sourceToolCallRequestId:p,timestamp:Date.now(),document:f,conversationId:g}),s++}catch(m){o=`Failed to delete file ${a}: ${m instanceof Error?m.message:String(m)}`;break}}}catch(a){o=`Failed to remove file(s): ${a instanceof Error?a.message:String(a)}`}return s===i.length&&o===void 0?lr(`File(s) removed: ${i.slice(0,s).join(", ")}`):ot(`Removed file(s) ${i.slice(0,s).join(", ")} but failed to remove file(s): ${i.slice(s).join(", ")}: ${o??""}`)}};function pz(e){let t=[],r="";for(let n=0;n<e.length;n++){let i=e[n];/[a-zA-Z0-9_]/.test(i)?r+=i:/\s/.test(i)?r&&(t.push(r),r=""):(r&&(t.push(r),r=""),t.push(i))}return r&&t.push(r),t}function LNe(e,t,r=100){let n=e.length,i=t.length,s=Array.from({length:n}).fill(-1);if(n===0||i===0)return s;let o=Array.from({length:n+1}).fill([]).map(()=>Array.from({length:2*r+1}).fill(0)),a=Array.from({length:n+1}).fill([]).map(()=>Array.from({length:2*r+1}).fill([0,0]));for(let m=1;m<=n;m++){let y=Math.max(1,m-r),v=Math.min(i,m+r);for(let C=y;C<=v;C++){let E=C-(m-r);if(e[m-1]===t[C-1]){let w=m-1,B=C-1;if(B>=Math.max(1,w-r)&&B<=Math.min(i,w+r)){let R=B-(w-r);o[m][E]=o[w][R]+1,a[m][E]=[-1,-1]}else o[m][E]=1,a[m][E]=[-1,-1]}else{let w=0,B=0;C-1>=y&&(w=o[m][E-1]);let R=m-1;if(C>=Math.max(1,R-r)&&C<=Math.min(i,R+r)){let N=C-(R-r);B=o[R][N]}w>=B?(o[m][E]=w,a[m][E]=[0,-1]):(o[m][E]=B,a[m][E]=[-1,0])}}}let l=n,c=i,u=0,f=i,p=Math.max(1,n-r),g=Math.min(i,n+r);for(let m=p;m<=g;m++){let y=m-(n-r);o[n][y]>u&&(u=o[n][y],f=m)}for(l=n,c=f;l>0&&c>0;){let m=c-(l-r);if(m<0||m>=2*r+1)break;let[y,v]=a[l][m];if(y===-1&&v===-1&&(s[l-1]=c-1),l+=y,c+=v,y===0&&v===0)break}return s}function mz(e,t){let r=e.map(f=>pz(f)),n=t.map(f=>pz(f));function i(f){let p=[],g=[];for(let m=0;m<f.length;m++)for(let y=0;y<f[m].length;y++)p.push(f[m][y]),g.push(m);return[p,g]}let[s,o]=i(r),[a,l]=i(n),c=LNe(s,a),u=Array.from({length:e.length}).fill([]).map(()=>[]);for(let f=0;f<c.length;f++){let p=c[f];if(p!==-1){let g=o[f],m=l[p];u[g].includes(m)||u[g].push(m)}}return u}var UNe=5e4,ONe="<response clipped><NOTE>To save on context only part of this file has been shown to you.</NOTE>";function qNe(e){let t=e.includes(`\r
`)?`\r
`:`
`;return e.split(t).map(i=>i.replace(/\s+$/,"")).join(t)}function Az(e,t,r=1,n){e=VNe(e),e=e.split(`
`).map((s,o)=>`${String(o+r).padStart(6)}	${s}`).join(`
`);let i=`Here's the result of running \`cat -n\` on ${t}:
${e}
`;return n!==void 0&&(i+=`Total lines in file: ${n}
`),i}function VNe(e,t=UNe){return e.length<=t?e:e.slice(0,t)+ONe}function QL(e){return e.replaceAll(`\r
`,`
`)}function HNe(e){return e.includes(`\r
`)?`\r
`:`
`}function WA(e){let t=HNe(e);return{content:QL(qNe(e)),originalLineEnding:t}}function NL(e,t){return t===`
`?e:e.replaceAll(`
`,t)}function yz(e,t,r){let n="";if(!Array.isArray(e)||e.length!==2||!e.every(o=>typeof o=="number"))return n=`Invalid view range provided. Showing entire file (lines 1-${t}).`,{initLine:1,finalLine:t,message:n};let i=e[0],s=e[1];if(i<1?(n+=`Start line ${i} is less than 1. Adjusted to 1.
`,i=1):i>t&&(n+=`Start line ${i} exceeds file length (${t}). Adjusted to 1.
`,i=1),s===-1)s=t;else if(s>t)n+=`End line ${s} exceeds file length (${t}). Adjusted to ${t}. `,s=t;else if(s<i)n+=`End line ${s} is less than start line ${i}. Adjusted to ${t}. `,s=t;else if(s-i+1<r){let o=Math.min(i+r-1,t);n+=`View range expanded to meet minimum size of ${r} lines. `,o>=t?n+=`End line adjusted to last line of file (${t}).`:n+=`New range: [${i}, ${o}].`,s=o}return n=n.trim(),{initLine:i,finalLine:s,message:n}}function WNe(e,t,r,n){let i=Math.max(0,t-n),s=t+r-1+n;return e=e.replaceAll(`\r
`,`
`),{snippet:e.split(`
`).slice(i,s+1).join(`
`),startLine:i}}function II(e,t,r,n){let{snippet:i,startLine:s}=WNe(e,t,r,n);return i.split(`
`).map((a,l)=>`${String(l+s+1).padStart(6)}	${a}`).join(`
`)}function BI(e){let t=e.split(`
`),r=0,n=0,i=0;for(let s of t){if(s.trim()==="")continue;let o=s.match(/^( +)/),a=s.match(/^(\t+)/);o?(r++,i===0&&(i=o[1].length)):a&&n++}return n>r?{type:"tab",size:1}:{type:"space",size:i||2}}function PL(e,t){let r=e.split(`
`),n=t.type==="tab"?/^\t/:new RegExp(`^ {1,${t.size}}`);return r.map(i=>i.replace(n,"")).join(`
`)}function LL(e,t){return e.split(`
`).every(n=>{if(n.trim()==="")return!0;let i=t.type==="tab"?/^\t/:new RegExp(`^ {1,${t.size}}`);return n.match(i)})}function UL(e,t){let r=e.split(`
`),n=t.split(`
`),i=[];if(t.trim()===""||n.length>r.length)return i;if(n.length===1)return r.forEach((c,u)=>{c.includes(t)&&i.push({startLine:u,endLine:u})}),i;let s=e,o=t,a=0,l;for(;(l=s.indexOf(o,a))!==-1;){let c=s.substring(0,l),u=s.substring(0,l+o.length),f=(c.match(/\n/g)||[]).length,p=(u.match(/\n/g)||[]).length;i.push({startLine:f,endLine:p}),a=l+1}return i}function vz(e,t,r,n){if(e.length===0)return-1;if(e.length===1)return 0;for(let u=0;u<e.length;u++){let f=e[u];if(f.startLine===t&&f.endLine===r)return u}if(n===0)return-1;let i=-1,s=Number.MAX_SAFE_INTEGER;for(let u=0;u<e.length;u++){let f=e[u],p=Math.abs(f.startLine-t);p<s&&(s=p,i=u)}if(n===1)return i;if(i===-1)return-1;let o=Number.MAX_SAFE_INTEGER,a=-1;for(let u=0;u<e.length;u++){if(u===i)continue;let f=e[u],p=Math.abs(f.startLine-t);p<o&&(o=p,a=u)}let l=Math.abs(e[a].startLine-e[i].startLine),c=Math.floor(l/2*n);return s<=c?i:-1}function DI(e){if(e===void 0)throw new Error("Missing required parameter `str_replace_entries` for `str_replace` command.");if(!Array.isArray(e))throw new Error("Invalid parameter `str_replace_entries` for `str_replace` command. It must be an array of objects.");if(e.length===0)throw new Error("Empty required parameter `str_replace_entries` for `str_replace` command.");let t=[];for(let[r,n]of e.entries()){if(typeof n!="object"||!n)throw new Error("Invalid parameter `str_replace_entries` for `str_replace` command. It must be an array of objects.");let i=n;if(i.old_str===void 0)throw new Error("Missing required parameter `old_str` for `str_replace` command.");if(i.new_str===void 0)throw new Error("Missing required parameter `new_str` for `str_replace` command.");if(i.old_str_start_line_number===0&&(i.old_str_start_line_number=void 0),i.old_str_end_line_number===0&&(i.old_str_end_line_number=void 0),i.old_str_start_line_number!==void 0&&(!Number.isInteger(i.old_str_start_line_number)||i.old_str_start_line_number<1))throw new Error("Invalid parameter `old_str_start_line_number` for `str_replace` command. It must be a positive integer.");if(i.old_str_end_line_number!==void 0&&(!Number.isInteger(i.old_str_end_line_number)||i.old_str_end_line_number<1))throw new Error("Invalid parameter `old_str_end_line_number` for `str_replace` command. It must be a positive integer.");t.push({index:i.index??r,old_str:i.old_str,new_str:i.new_str,old_str_start_line_number:i.old_str_start_line_number,old_str_end_line_number:i.old_str_end_line_number})}return t}function Cz(e){return e=GNe(e),e.sort((t,r)=>{let n=t.old_str_start_line_number??-1;return(r.old_str_start_line_number??-1)-n}),e}function bz(e,t){let r=e.old_str_start_line_number,n=e.old_str_end_line_number;if(!(r===void 0||n===void 0))for(let i of t){if(e.index==i.index||i.old_str_start_line_number===void 0||i.old_str_end_line_number===void 0)continue;let s={startLine:i.old_str_start_line_number,endLine:i.old_str_end_line_number};if(r<=s.startLine&&s.startLine<=n||r<=s.endLine&&s.endLine<=n||s.startLine<=r&&r<=s.endLine)return i}}function Ez(e,t){let r=e.old_str_start_line_number+1,n=e.old_str_end_line_number+1,i=t.old_str_start_line_number+1,s=t.old_str_end_line_number+1;return`old_str line numbers range overlaps with another entry.
This entry range: [${r}-${n}]
Overlapping entry index: ${t.index}
Overlapping entry range: [${i}-${s}]`}function TI(e){if(e===void 0)throw new Error("Missing required parameter `insert_line_entries` for `insert` command.");if(!Array.isArray(e))throw new Error("Invalid parameter `insert_line_entries` for `insert` command. It must be an array of objects.");if(e.length===0)throw new Error("Empty required parameter `insert_line_entries` for `insert` command.");let t=[];for(let[r,n]of e.entries()){if(typeof n!="object"||!n)throw new Error("Invalid parameter `insert_line_entries` for `insert` command. It must be an array of objects.");let i=n;if(i.insert_line===void 0)throw new Error("Missing required parameter `insert_line` for `insert` command.");if(i.new_str===void 0)throw new Error("Missing required parameter `new_str` for `insert` command.");if(!Number.isInteger(i.insert_line)||i.insert_line<0)throw new Error("Invalid parameter `insert_line` for `insert` command. It must be a non-negative integer.");t.push({index:i.index??r,insert_line:i.insert_line,new_str:i.new_str})}return t}function GNe(e){return e.map(t=>({...t,old_str_start_line_number:t.old_str_start_line_number!==void 0?t.old_str_start_line_number-1:void 0,old_str_end_line_number:t.old_str_end_line_number!==void 0?t.old_str_end_line_number-1:void 0}))}function _z(e,t){t=t.replaceAll(`\r
`,`
`);let r=e.newContent.split(`
`),n=t.split(`
`),i=mz(r,n);e.newStrStartLineNumber=i[e.newStrStartLineNumber][0]??e.newStrStartLineNumber,e.newStrEndLineNumber=i[e.newStrEndLineNumber][i[e.newStrEndLineNumber].length-1]??e.newStrEndLineNumber}function xz(e){let t=[];if("old_str"in e&&"new_str"in e){let n={index:0,old_str:e.old_str,new_str:e.new_str};"old_str_start_line_number"in e&&(n.old_str_start_line_number=e.old_str_start_line_number),"old_str_end_line_number"in e&&(n.old_str_end_line_number=e.old_str_end_line_number),t.push(n)}let r=Object.keys(e).filter(n=>n.startsWith("old_str_")&&/^old_str_\d+$/.test(n));r.sort((n,i)=>{let s=parseInt(n.replace("old_str_","")),o=parseInt(i.replace("old_str_",""));return s-o});for(let n of r){let i=n.replace("old_str_","");if(`new_str_${i}`in e){let s={index:parseInt(i),old_str:e[`old_str_${i}`],new_str:e[`new_str_${i}`]};`old_str_start_line_number_${i}`in e&&(s.old_str_start_line_number=e[`old_str_start_line_number_${i}`]),`old_str_end_line_number_${i}`in e&&(s.old_str_end_line_number=e[`old_str_end_line_number_${i}`]),t.push(s)}}return t}function wz(e){let t=[];"insert_line"in e&&"new_str"in e&&t.push({index:0,insert_line:e.insert_line,new_str:e.new_str});let r=Object.keys(e).filter(n=>n.startsWith("insert_line_")&&/^insert_line_\d+$/.test(n));r.sort((n,i)=>{let s=parseInt(n.replace("insert_line_","")),o=parseInt(i.replace("insert_line_",""));return s-o});for(let n of r){let i=n.replace("insert_line_","");`new_str_${i}`in e&&t.push({index:parseInt(i),insert_line:e[`insert_line_${i}`],new_str:e[`new_str_${i}`]})}return t}var RI=class{_logger;constructor(){this._logger=ut("StrReplaceEditorToolDefinitionFlat")}extractStrReplaceEntries(t){let r=xz(t);this._logger.debug(`Extracted ${r.length} str_replace entries from flat schema`);let n=DI(r);return this._logger.debug(`Validated ${n.length} str_replace entries from flat schema`),n}extractInsertLineEntries(t){let r=wz(t);this._logger.debug(`Extracted ${r.length} insert entries from flat schema`);let n=TI(r);return this._logger.debug(`Validated ${n.length} insert entries from flat schema`),n}description="Custom editing tool for viewing, creating and editing files\n* `path` is a file path relative to the workspace root\n* command `view` displays the result of applying `cat -n`.\n* If a `command` generates a long output, it will be truncated and marked with `<response clipped>`\n* `insert` and `str_replace` commands output a snippet of the edited section for each entry. This snippet reflects the final state of the file after all edits and IDE auto-formatting have been applied.\n\n\nNotes for using the `str_replace` command:\n* Specify `old_str_1`, `new_str_1`, `old_str_start_line_number_1` and `old_str_end_line_number_1` properties for the first replacement, `old_str_2`, `new_str_2`, `old_str_start_line_number_2` and `old_str_end_line_number_2` for the second replacement, and so on\n* The `old_str_start_line_number_1` and `old_str_end_line_number_1` parameters are 1-based line numbers\n* Both `old_str_start_line_number_1` and `old_str_end_line_number_1` are INCLUSIVE\n* The `old_str_1` parameter should match EXACTLY one or more consecutive lines from the original file. Be mindful of whitespace!\n* Empty `old_str_1` is allowed only when the file is empty or contains only whitespaces\n* It is important to specify `old_str_start_line_number_1` and `old_str_end_line_number_1` to disambiguate between multiple occurrences of `old_str_1` in the file\n* Make sure that `old_str_start_line_number_1` and `old_str_end_line_number_1` do not overlap with other `old_str_start_line_number_2` and `old_str_end_line_number_2` entries\n* The `new_str_1` parameter should contain the edited lines that should replace the `old_str_1`. Can be an empty string to delete content\n* To make multiple replacements in one tool call add multiple sets of replacement parameters. For example, `old_str_1`, `new_str_1`, `old_str_start_line_number_1` and `old_str_end_line_number_1` properties for the first replacement, `old_str_2`, `new_str_2`, `old_str_start_line_number_2`, `old_str_end_line_number_2` for the second replacement, etc.\n\nNotes for using the `insert` command:\n* Specify `insert_line_1` and `new_str_1` properties for the first insertion, `insert_line_2` and `new_str_2` for the second insertion, and so on\n* The `insert_line_1` parameter specifies the line number after which to insert the new string\n* The `insert_line_1` parameter is 1-based line number\n* To insert at the very beginning of the file, use `insert_line_1: 0`\n* To make multiple insertions in one tool call add multiple sets of insertion parameters. For example, `insert_line_1` and `new_str_1` properties for the first insertion, `insert_line_2` and `new_str_2` for the second insertion, etc.\n\nNotes for using the `view` command:\n* Strongly prefer to use larger ranges of at least 500 lines when scanning through files. One call with large range is much more efficient than many calls with small ranges\n\nIMPORTANT:\n* This is the only tool you should use for editing files.\n* If it fails try your best to fix inputs and retry.\n* DO NOT fall back to removing the whole file and recreating it from scratch.\n* DO NOT use sed or any other command line tools for editing files.\n* Try to fit as many edits in one tool call as possible\n* Use view command to read the file before editing it.\n";inputSchemaJson=JSON.stringify({type:"object",properties:{command:{type:"string",enum:["view","str_replace","insert"],description:"The commands to run. Allowed options are: 'view', 'str_replace', 'insert'."},path:{description:"Full path to file relative to the workspace root, e.g. 'services/api_proxy/file.py' or 'services/api_proxy'.",type:"string"},view_range:{description:"Optional parameter of `view` command when `path` points to a file. If none is given, the full file is shown. If provided, the file will be shown in the indicated line number range, e.g. [501, 1000] will show lines from 501 to 1000. Indices are 1-based and inclusive. Setting `[start_line, -1]` shows all lines from `start_line` to the end of the file.",type:"array",items:{type:"integer"}},insert_line_1:{description:"Required parameter of `insert` command. The line number after which to insert the new string. This line number is relative to the state of the file before any insertions in the current tool call have been applied.",type:"integer"},new_str_1:{description:"Required parameter of `str_replace` command containing the new string. Can be an empty string to delete content. Required parameter of `insert` command containing the string to insert.",type:"string"},old_str_1:{description:"Required parameter of `str_replace` command containing the string in `path` to replace.",type:"string"},old_str_start_line_number_1:{description:"The line number of the first line of `old_str_1` in the file. This is used to disambiguate between multiple occurrences of `old_str_1` in the file.",type:"integer"},old_str_end_line_number_1:{description:"The line number of the last line of `old_str_1` in the file. This is used to disambiguate between multiple occurrences of `old_str_1` in the file.",type:"integer"}},required:["command","path"]})};var kI=class{_logger;constructor(){this._logger=ut("StrReplaceEditorToolDefinitionNested")}extractStrReplaceEntries(t){let r=DI(t.str_replace_entries);return this._logger.debug(`Validated ${r.length} str_replace entries`),r}extractInsertLineEntries(t){let r=TI(t.insert_line_entries);return this._logger.debug(`Validated ${r.length} insert entries`),r}description="Custom editing tool for viewing, creating and editing files\n* `path` is a file path relative to the workspace root\n* command `view` displays the result of applying `cat -n`.\n* If a `command` generates a long output, it will be truncated and marked with `<response clipped>`\n* `insert` and `str_replace` commands output a snippet of the edited section for each entry. This snippet reflects the final state of the file after all edits and IDE auto-formatting have been applied.\n\n\nNotes for using the `str_replace` command:\n* Use the `str_replace_entries` parameter with an array of objects\n* Each object should have `old_str`, `new_str`, `old_str_start_line_number` and `old_str_end_line_number` properties\n* The `old_str_start_line_number` and `old_str_end_line_number` parameters are 1-based line numbers\n* Both `old_str_start_line_number` and `old_str_end_line_number` are INCLUSIVE\n* The `old_str` parameter should match EXACTLY one or more consecutive lines from the original file. Be mindful of whitespace!\n* Empty `old_str` is allowed only when the file is empty or contains only whitespaces\n* It is important to specify `old_str_start_line_number` and `old_str_end_line_number` to disambiguate between multiple occurrences of `old_str` in the file\n* Make sure that `old_str_start_line_number` and `old_str_end_line_number` do not overlap with other entries in `str_replace_entries`\n* The `new_str` parameter should contain the edited lines that should replace the `old_str`. Can be an empty string to delete content\n\nNotes for using the `insert` command:\n* Use the `insert_line_entries` parameter with an array of objects\n* Each object should have `insert_line` and `new_str` properties\n* The `insert_line` parameter specifies the line number after which to insert the new string\n* The `insert_line` parameter is 1-based line number\n* To insert at the very beginning of the file, use `insert_line: 0`\n\nNotes for using the `view` command:\n* Strongly prefer to use larger ranges of at least 500 lines when scanning through files. One call with large range is much more efficient than many calls with small ranges\n\nIMPORTANT:\n* This is the only tool you should use for editing files.\n* If it fails try your best to fix inputs and retry.\n* DO NOT fall back to removing the whole file and recreating it from scratch.\n* DO NOT use sed or any other command line tools for editing files.\n* Try to fit as many edits in one tool call as possible\n* Use view command to read the file before editing it.\n";inputSchemaJson=JSON.stringify({type:"object",properties:{command:{type:"string",enum:["view","str_replace","insert"],description:"The commands to run. Allowed options are: 'view', 'str_replace', 'insert'."},path:{description:"Full path to file relative to the workspace root, e.g. 'services/api_proxy/file.py' or 'services/api_proxy'.",type:"string"},view_range:{description:"Optional parameter of `view` command when `path` points to a file. If none is given, the full file is shown. If provided, the file will be shown in the indicated line number range, e.g. [501, 1000] will show lines from 501 to 1000. Indices are 1-based and inclusive. Setting `[start_line, -1]` shows all lines from `start_line` to the end of the file.",type:"array",items:{type:"integer"}},insert_line_entries:{description:"Required parameter of `insert` command. A list of entries to insert. Each entry is a dictionary with keys `insert_line` and `new_str`.",type:"array",items:{type:"object",properties:{insert_line:{description:"The line number after which to insert the new string. This line number is relative to the state of the file before any insertions in the current tool call have been applied.",type:"integer"},new_str:{description:"The string to insert. Can be an empty string.",type:"string"}},required:["insert_line","new_str"]}},str_replace_entries:{description:"Required parameter of `str_replace` command. A list of entries to replace. Each entry is a dictionary with keys `old_str`, `old_str_start_line_number`, `old_str_end_line_number` and `new_str`. `old_str` from different entries should not overlap.",type:"array",items:{type:"object",properties:{old_str:{description:"The string in `path` to replace.",type:"string"},old_str_start_line_number:{description:"The line number of the first line of `old_str` in the file. This is used to disambiguate between multiple occurrences of `old_str` in the file.",type:"integer"},old_str_end_line_number:{description:"The line number of the last line of `old_str` in the file. This is used to disambiguate between multiple occurrences of `old_str` in the file.",type:"integer"},new_str:{description:"The string to replace `old_str` with. Can be an empty string to delete content.",type:"string"}},required:["old_str","new_str","old_str_start_line_number","old_str_end_line_number"]}}},required:["command","path"]})};var OL=4,GA=class extends Cn{_checkpointManager;_lineNumberErrorTolerance;_waitForAutoFormatMs;_logger;_toolDefinition;constructor(t,r=.2,n=1e3,i){super(Hi.strReplaceEditor,Vt.Safe),this._checkpointManager=t,this._lineNumberErrorTolerance=r,this._waitForAutoFormatMs=n,i?this._toolDefinition=i:Ca().flags.agentEditToolSchemaType==="StrReplaceEditorToolDefinitionFlat"?this._toolDefinition=new RI:this._toolDefinition=new kI,this.description=this._toolDefinition.description,this.inputSchemaJson=this._toolDefinition.inputSchemaJson,this._logger=ut("StrReplaceEditorTool"),this._logger.debug(`Initialized with params: lineNumberErrorTolerance=${r}, waitForAutoFormatSec=${n}`)}description;inputSchemaJson;checkToolCallSafe(t){return!0}async readFile(t){this._logger.debug(`Reading file: ${t}`);try{let r=await Vi().readFile(t);if(r===void 0||r.contents===void 0||r.filepath===void 0)throw this._logger.error(`Failed to read file: ${t} - file details undefined`),new Error(`Cannot read file: ${t}`);return this._logger.debug(`Successfully read file: ${t} (${r.contents.length} bytes)`),{contents:r.contents,filepath:r.filepath}}catch(r){throw this._logger.error(`Error reading file ${t}: ${r instanceof Error?r.message:String(r)}`),new Error(`Ran into ${r instanceof Error?r.message:String(r)} while trying to read ${t}`)}}async createCheckpoint(t,r,n,i){this._logger.debug(`Creating checkpoint for file: ${t.absPath}`);let s=new un(t,r,n,{}),o=i.at(-1)?.request_id??uo(),a=this._checkpointManager.currentConversationId??"";this._logger.debug(`Adding checkpoint with conversationId: ${a}, requestId: ${o}`),await this._checkpointManager.addCheckpoint({conversationId:a,path:t},{sourceToolCallRequestId:o,timestamp:Date.now(),document:s,conversationId:a})}async call(t,r,n){try{this._logger.debug(`Tool called with command: ${String(t.command)}, path: ${String(t.path)}`);let i=t.command;if(t.path===void 0)return this._logger.error("Missing required parameter 'path'"),ot("Missing required parameter `path`");if(typeof t.path!="string")return this._logger.error("Invalid parameter 'path'. It must be a string."),ot("Invalid parameter `path`. It must be a string.");if(t.path.trim()==="")return this._logger.error("Invalid parameter 'path'. It must not be empty."),ot("Invalid parameter `path`. It must not be empty.");let s=t.path,o=await this.readFile(s);switch(i){case"view":return this._logger.debug(`Handling 'view' command for ${s} with range: ${JSON.stringify(t.view_range)}`),this.handleView(s,o,t.view_range);case"str_replace":return this._logger.debug(`Handling 'str_replace' command for ${s} with ${Array.isArray(t.str_replace_entries)?t.str_replace_entries.length:0} entries`),await this.handleStrReplace(s,o,this._toolDefinition.extractStrReplaceEntries(t),r);case"insert":return this._logger.debug(`Handling 'insert' command for ${s} with ${Array.isArray(t.insert_line_entries)?t.insert_line_entries.length:0} entries`),await this.handleInsert(s,o,this._toolDefinition.extractInsertLineEntries(t),r);default:return this._logger.error(`Unknown command: ${String(i)}`),ot(`Unknown command: ${String(i)}`)}}catch(i){return this._logger.error(`Error in tool call: ${i instanceof Error?i.message:String(i)}`),i instanceof Error?ot(i.message):ot(`Unknown error: ${String(i)}`)}}async prepareToolResponse(t,r,n,i,s,o,a,l){this._logger.debug(`Preparing tool response for ${a} command on ${t}`);let c=NL(n,i),u=NL(s,i);if(c!==u){this._logger.debug("Content changed, creating checkpoint and waiting for auto-formatting"),await this.createCheckpoint(r.filepath,c,u,o),await fo(this._waitForAutoFormatMs);let v=(await this.readFile(t)).contents,C=v!==u;C&&this._logger.debug("File was auto-formatted after edit"),l.sort((w,B)=>(w.newStrStartLineNumber??-1)-(B.newStrStartLineNumber??-1));let E=0;for(let w of l)w.newStrStartLineNumber!==void 0&&w.newStrEndLineNumber!==void 0&&(this._logger.debug(`Adjusting line numbers for result: start=${w.newStrStartLineNumber}, end=${w.newStrEndLineNumber}, shift=${E}`),w.newStrStartLineNumber+=E,w.newStrEndLineNumber+=E,w.newContent=s,C&&(_z(w,v),this._logger.debug(`Updated line numbers after reformatting: start=${w.newStrStartLineNumber}, end=${w.newStrEndLineNumber}`)),E+=w.numLinesDiff),w.newContent=v}else this._logger.debug("No content changes detected");let f=l.every(v=>v.isError),p=l.every(v=>!v.isError);this._logger.debug(`Results summary: all errors=${f}, all success=${p}, total results=${l.length}`);let m=l.map(v=>{let C=v.genMessageFunc?v.genMessageFunc(v):"No message available";return`Result for ${a} for entry with index [${v.index}]:
${C}
`}).join(`
`),y;return f?y=`Failed to edit the file ${t}. See below for details.
${m}
Fix failed ${a} entries accordingly and try again.
`:p?y=`Successfully edited the file ${t}.
${m}
Review the changes and make sure they are as expected (correct indentation, no duplicate lines, etc).
Edit the file again if necessary.
`:y=`Partially edited the file ${t}. See below for details.
${m}
Fix failed ${a} entries accordingly and try again.
`,f?(this._logger.debug(`Returning error response for ${t}`),ot(y)):(this._logger.debug(`Returning success response for ${t}`),lr(y))}handleView(t,r,n){this._logger.debug(`Handling view command for ${t} with range: ${JSON.stringify(n)}`);let s=QL(r.contents).split(`
`),o=s.length;this._logger.debug(`File ${t} has ${o} lines`);let a=1,l=o,c="";if(n)try{let p=Ca().flags?.agentEditToolMinViewSize??0,g=yz(n,o,p);a=g.initLine,l=g.finalLine,g.message&&(c=`Note:
${g.message}

`)}catch(p){throw p instanceof Error?p:new Error(`Invalid view_range: ${String(p)}`)}let u=l===-1?s.slice(a-1).join(`
`):s.slice(a-1,l).join(`
`),f=Az(u,t.toString(),a,o);return lr(c+f)}singleStrReplace(t,r,n,i,s,o,a){n=WA(n).content,i=WA(i).content;let l=(v,C,E,w,B,R)=>({isError:!1,index:s,oldStr:n,oldStrStartLineNumber:o,oldStrEndLineNumber:a,newContent:v,newStr:C,newStrStartLineNumber:E,newStrEndLineNumber:w,numLinesDiff:B,genMessageFunc:R}),c=v=>({isError:!0,index:s,oldStr:n,oldStrStartLineNumber:o,oldStrEndLineNumber:a,numLinesDiff:0,genMessageFunc:v}),u,f=0,p=0;if(n.trim()==="")if(r.trim()==="")u=i,f=0,p=i.split(`
`).length-1;else return c(()=>`No replacement was performed, old_str is empty which is only allowed when the file is empty or contains only whitespace. The file ${t} is not empty.`);else{let v=UL(r,n);if(v.length===0){let C=BI(r),E=BI(n),w=BI(i);if(C.type==="tab"&&E.type==="tab"&&w.type==="tab"&&LL(n,C)&&LL(i,C)){let B=PL(n,C),R=PL(i,C);v=UL(r,B),v.length>0&&(n=B,i=R)}if(v.length===0)return c(R=>{let N=`No replacement was performed, oldStr did not appear verbatim in ${t}.`;if(R.oldStrStartLineNumber!==void 0&&R.oldStrEndLineNumber!==void 0){let W=II(r,R.oldStrStartLineNumber,R.oldStrEndLineNumber-R.oldStrStartLineNumber+1,OL),Z=r.split(`
`).slice(R.oldStrStartLineNumber,R.oldStrEndLineNumber+1).join(`
`),te=KS("oldStr","regionContent",R.oldStr+`
`,Z+`
`,void 0,void 0,{context:3});N+=`
The content in the specified region is:
${W}

Diff between oldStr and the specified region is:
${te}`}return N})}if(v.length===1){let C=v[0];u=r.replace(n,E=>i),f=C.startLine,p=C.startLine+i.split(`
`).length-1}else{if(o===void 0||a===void 0)return c(()=>`Multiple occurrences of oldStr \`${n}\` found. Please provide line numbers to disambiguate.`);let C=vz(v,o,a,this._lineNumberErrorTolerance);if(C===-1){let Y=o+1,U=a+1;return c(()=>`No match found close to the provided line numbers (${Y}, ${U}).`)}let E=v[C],w=r.split(`
`),B=w.slice(0,E.startLine).join(`
`),R=w.slice(E.endLine+1).join(`
`),N=w.slice(E.startLine,E.endLine+1).join(`
`),W=N.indexOf(n);if(W===-1)return c(()=>"Internal error: Could not find the exact position of the match.");let Z=N.substring(0,W),te=N.substring(W+n.length);u=B+(B?`
`:"")+Z+i+te+(R?`
`:"")+R,f=E.startLine,p=E.startLine+i.split(`
`).length-1}}let g=n.split(`
`).length,y=i.split(`
`).length-g;return l(u,i,f,p,y,v=>`Replacement successful.
Edited section after IDE auto-formatting was applied:
${II(v.newContent,v.newStrStartLineNumber,v.newStrEndLineNumber-v.newStrStartLineNumber+1,OL)}`)}async handleStrReplace(t,r,n,i){this._logger.debug(`Handling str_replace command for ${t}`);let s=Cz(n),{content:o,originalLineEnding:a}=WA(r.contents),l=o,c=new Map;for(let u of s){let f=bz(u,s),p;f!==void 0?p={isError:!0,index:u.index,oldStr:u.old_str,oldStrStartLineNumber:u.old_str_start_line_number,oldStrEndLineNumber:u.old_str_end_line_number,numLinesDiff:0,genMessageFunc:()=>Ez(u,f)}:p=this.singleStrReplace(t,l,u.old_str,u.new_str,u.index,u.old_str_start_line_number,u.old_str_end_line_number),c.set(u.index,p),!p.isError&&p.newContent!==void 0&&(l=p.newContent)}return this.prepareToolResponse(t,r,o,a,l,i,"str_replace",Array.from(c.values()))}async handleInsert(t,r,n,i){this._logger.debug(`Handling insert command for ${t}`);let{content:s,originalLineEnding:o}=WA(r.contents),a=s,l=a.split(`
`);n.sort((u,f)=>f.insert_line-u.insert_line);let c=new Map;for(let u of n){let f=u.insert_line,p=WA(u.new_str).content;if(l=a.split(`
`),f<0||f>l.length){c.set(u.index,{isError:!0,index:u.index,oldStr:"",oldStrStartLineNumber:f,oldStrEndLineNumber:f,numLinesDiff:0,genMessageFunc:()=>`Invalid \`insert_line\` parameter: ${f}. It should be within the range of lines of the file: [0, ${l.length}]`});continue}let g=p.split(`
`);a=[...l.slice(0,f),...g,...l.slice(f)].join(`
`),c.set(u.index,{isError:!1,index:u.index,oldStr:"",oldStrStartLineNumber:f,oldStrEndLineNumber:f,newContent:a,newStr:p,newStrStartLineNumber:f,newStrEndLineNumber:f+g.length-1,numLinesDiff:g.length,genMessageFunc:y=>`Successfully inserted new_str.
Edited section after IDE auto-formatting was applied:
${II(y.newContent,y.newStrStartLineNumber,y.newStrEndLineNumber-y.newStrStartLineNumber+1,OL)}`})}return this.prepareToolResponse(t,r,s,o,a,i,"insert",Array.from(c.values()))}};var H7=q(V7()),XLe="Augment-WebFetch/1.0",AB=class extends Cn{_turndownService;_userAgent;constructor(t){super(Hi.webFetch,Vt.Unsafe);let r=new H7.default;r.addRule("removeStyleAndScriptTags",{filter:["style","script"],replacement:function(){return""}}),this._turndownService=r,this._userAgent=t||XLe}description=`Fetches data from a webpage and converts it into Markdown.

1. The tool takes in a URL and returns the content of the page in Markdown format;
2. If the return is not valid Markdown, it means the tool cannot successfully parse this page.`;inputSchemaJson=JSON.stringify({type:"object",properties:{url:{type:"string",description:"The URL to fetch."}},required:["url"]});checkToolCallSafe(t){return!1}async call(t,r,n){let i=t.url;try{let o=await(await fetch(i,{signal:n,headers:{"User-Agent":this._userAgent}})).text();return{text:this._turndownService.turndown(o),isError:!1}}catch(s){return{text:`Failed to fetch URL: ${i}: ${s instanceof Error?s.message:String(s)}`,isError:!0}}}};function eUe(e){return e===void 0?{num_lines:-1,num_chars:-1}:{num_lines:e.split(`
`).length,num_chars:e.length}}var yB=class{tracingData={flags:{},nums:{},string_stats:{},request_ids:{}};setFlag(t,r=!0){this.tracingData.flags[t]={value:r,timestamp:new Date().toISOString()}}getFlag(t){return this.tracingData.flags[t]?.value}setNum(t,r){this.tracingData.nums[t]={value:r,timestamp:new Date().toISOString()}}getNum(t){return this.tracingData.nums[t]?.value}setStringStats(t,r){this.tracingData.string_stats[t]={value:eUe(r),timestamp:new Date().toISOString()}}setRequestId(t,r){this.tracingData.request_ids[t]={value:r,timestamp:new Date().toISOString()}}},vB;(function(e){e[e.unspecified=0]="unspecified",e[e.classify_and_distill=1]="classify_and_distill",e[e.orientation=2]="orientation"})(vB||(vB={}));var rn;(function(e){e.memoriesRequestId="memoriesRequestId",e.exceptionThrown="exceptionThrown",e.toolOutputIsError="toolOutputIsError",e.injectionNoCodeWrapper="injectionNoCodeWrapper",e.rememberToolModelNameMissing="rememberToolModelNameMissing",e.compressionStarted="compressionStarted",e.compressionTargetMissing="compressionTargetMissing",e.compressionPromptMissing="compressionPromptMissing",e.compressionNumRecentMemoriesToKeepMissing="compressionNumRecentMemoriesToKeepMissing",e.compressionRecentMemoriesSubpromptMissing="compressionRecentMemoriesSubpromptMissing",e.compressionMemoriesQueueSize="compressionMemoriesQueueSize",e.compressionPromptStats="compressionPromptStats",e.compressionRequestId="compressionRequestId",e.compressionMemoriesStats="compressedMemoriesStats",e.compressionFailed="compressionFailed",e.setMemoriesStart="setMemoriesStart",e.setMemoriesUpperBoundSizeMissing="setMemoriesUpperBoundSizeMissing",e.setMemoriesNonEmptyLines="nonEmptyLines",e.setMemoriesNoMemoriesFile="noMemoriesFile",e.setMemoriesUpdateBufferFailed="updateBufferFailed",e.setMemoriesNoChangesMade="noChangesMade",e.injectionStarted="injectionStarted",e.injectionCurrentMemoriesStats="injectionCurrentMemoriesStats",e.injectionPromptMissing="injectionPromptMissing",e.injectionPromptStats="injectionPromptStats",e.injectionRequestId="injectionRequestId",e.injectionUpdatedMemoriesStats="injectionUpdatedMemoriesStats",e.injectionFailed="injectionFailed"})(rn||(rn={}));var CB=class e extends yB{caller;is_complex_new_memory;constructor(t,r){super(),this.caller=t,this.is_complex_new_memory=r}static create(t,r){return new e(t,r)}},W7;(function(e){e.start="start",e.end="end",e.memoriesRequestId="memoriesRequestId",e.exceptionThrown="exceptionThrown",e.lastUserExchangeRequestId="lastUserExchangeRequestId",e.noMemoryData="noMemoryData",e.agenticTurnHasRememberToolCall="agenticTurnHasRememberToolCall",e.emptyMemory="emptyMemory",e.removeUserExchangeMemoryFailed="removeUserExchangeMemoryFailed"})(W7||(W7={}));var Qr;(function(e){e.openedAgentConversation="opened-agent-conversation",e.revertCheckpoint="revert-checkpoint",e.agentInterruption="agent-interruption",e.sentUserMessage="sent-user-message",e.rememberToolCall="remember-tool-call",e.openedMemoriesFile="opened-memories-file",e.initialOrientation="initial-orientation",e.classifyAndDistill="classify-and-distill",e.flushMemories="flush-memories",e.vsCodeTerminalShellIntegrationNotAvailable="vs-code-terminal-shell-integration-not-available",e.vsCodeTerminalReadingApproximateOutput="vs-code-terminal-reading-approximate-output",e.vsCodeTerminalTimedOutWaitingForNoopCommand="vs-code-terminal-timed-out-waiting-for-noop-command",e.vsCodeTerminalFailedToUseShellIntegration="vs-code-terminal-failed-to-use-shell-integration",e.vsCodeTerminalLastCommandIsSameAsCurrent="vs-code-terminal-last-command-is-same-as-current",e.vsCodeTerminalPollingDeterminedProcessIsDone="vs-code-terminal-polling-determined-process-is-done",e.vsCodeTerminalFailedToReadOutput="vs-code-terminal-failed-to-read-output",e.vsCodeTerminalBuggyOutput="vs-code-terminal-buggy-output",e.vsCodeTerminalBuggyExecutionEvents="vs-code-terminal-buggy-execution-events",e.vsCodeTerminalUnsupportedVSCodeShell="vs-code-terminal-unsupported-vscode-shell",e.vsCodeTerminalFailedToFindGitBash="vs-code-terminal-failed-to-find-git-bash",e.vsCodeTerminalFailedToFindPowerShell="vs-code-terminal-failed-to-find-powershell",e.vsCodeTerminalNoSupportedShellsFound="vs-code-terminal-no-supported-shells-found",e.vsCodeTerminalSettingsChanged="vs-code-terminal-settings-changed",e.vsCodeTerminalWaitTimeout="vs-code-terminal-wait-timeout",e.vsCodeTerminalErrorLoadingSettings="vs-code-terminal-error-loading-settings",e.vsCodeTerminalErrorCheckingForShellUpdates="vs-code-terminal-error-checking-for-shell-updates",e.vsCodeTerminalErrorCleaningUpTempDir="vs-code-terminal-error-cleaning-up-temp-dir",e.vsCodeTerminalErrorInitializingShells="vs-code-terminal-error-initializing-shells",e.vsCodeTerminalErrorCheckingShellCapability="vs-code-terminal-error-checking-shell-capability",e.vsCodeTerminalErrorCreatingZshEnvironment="vs-code-terminal-error-creating-zsh-environment",e.chatHistoryTruncated="chat-history-truncated",e.enhancedPrompt="enhanced-prompt"})(Qr||(Qr={}));var G7;(function(e){e.sentUserMessage="sent-user-message"})(G7||(G7={}));var rh;(function(e){e[e.unspecified=0]="unspecified",e[e.onboarding=1]="onboarding",e[e.command=2]="command",e[e.automaticAfterIndexing=3]="automaticAfterIndexing"})(rh||(rh={}));var Ft;(function(e){e.exceptionThrown="exceptionThrown",e.start="start",e.end="end",e.concurrencyLevelMissing="concurrencyLevelMissing",e.initialOrientationDisabled="initialOrientationDisabled",e.noRootFolderFound="noRootFolderFound",e.retryWithLowerConcurrencyLevel="retryWithLowerConcurrencyLevel",e.localizationPromptMissing="localizationPromptMissing",e.detectLanguagesPromptMissing="detectLanguagesPromptMissing",e.orientationCompressionPromptMissing="orientationCompressionPromptMissing",e.orientationMaxLanguagesMissing="orientationMaxLanguagesMissing",e.orientationBuildTestQueryMissing="orientationBuildTestQueryMissing",e.orientationModelNameMissing="orientationModelNameMissing",e.topLanguagesNumFiles="topLanguagesNumFiles",e.topLanguagesNumCodeFiles="topLanguagesNumCodeFiles",e.topLanguagesRequestId="topLanguagesRequestId",e.topLanguagesModelResponseStats="topLanguagesModelResponseStats",e.topLanguagesNumDetectedLanguages="topLanguagesNumDetectedLanguages",e.topLanguagesNumFinalLanguages="topLanguagesNumFinalLanguages",e.localizationStarted="localizationStarted",e.localizationEnded="localizationEnded",e.localizationPromptStats_0="localizationPromptStats_0",e.localizationPromptStats_1="localizationPromptStats_1",e.localizationPromptStats_2="localizationPromptStats_2",e.localizationPromptStats_3="localizationPromptStats_3",e.localizationPromptStats_4="localizationPromptStats_4",e.localizationPromptStats_5="localizationPromptStats_5",e.localizationRequestId_0="localizationRequestId_0",e.localizationRequestId_1="localizationRequestId_1",e.localizationRequestId_2="localizationRequestId_2",e.localizationRequestId_3="localizationRequestId_3",e.localizationRequestId_4="localizationRequestId_4",e.localizationRequestId_5="localizationRequestId_5",e.localizationResponseStats_0="localizationResponseStats_0",e.localizationResponseStats_1="localizationResponseStats_1",e.localizationResponseStats_2="localizationResponseStats_2",e.localizationResponseStats_3="localizationResponseStats_3",e.localizationResponseStats_4="localizationResponseStats_4",e.localizationResponseStats_5="localizationResponseStats_5",e.localizationParsingFailed_0="localizationParsingFailed_0",e.localizationParsingFailed_1="localizationParsingFailed_1",e.localizationParsingFailed_2="localizationParsingFailed_2",e.localizationParsingFailed_3="localizationParsingFailed_3",e.localizationParsingFailed_4="localizationParsingFailed_4",e.localizationParsingFailed_5="localizationParsingFailed_5",e.localizationNumLocations_0="localizationNumLocations_0",e.localizationNumLocations_1="localizationNumLocations_1",e.localizationNumLocations_2="localizationNumLocations_2",e.localizationNumLocations_3="localizationNumLocations_3",e.localizationNumLocations_4="localizationNumLocations_4",e.localizationNumLocations_5="localizationNumLocations_5",e.failedToListRootFolder="failedToListRootFolder",e.agenticStarted="agenticStarted",e.agenticEnded="agenticEnded",e.agenticNumTurns_0="agenticNumTurns_0",e.agenticNumTurns_1="agenticNumTurns_1",e.agenticNumTurns_2="agenticNumTurns_2",e.agenticNumTurns_3="agenticNumTurns_3",e.agenticNumTurns_4="agenticNumTurns_4",e.agenticNumTurns_5="agenticNumTurns_5",e.agenticModelResponseStats_0="agenticModelResponseStats_0",e.agenticModelResponseStats_1="agenticModelResponseStats_1",e.agenticModelResponseStats_2="agenticModelResponseStats_2",e.agenticModelResponseStats_3="agenticModelResponseStats_3",e.agenticModelResponseStats_4="agenticModelResponseStats_4",e.agenticModelResponseStats_5="agenticModelResponseStats_5",e.agenticFailedToComplete_0="agenticFailedToComplete_0",e.agenticFailedToComplete_1="agenticFailedToComplete_1",e.agenticFailedToComplete_2="agenticFailedToComplete_2",e.agenticFailedToComplete_3="agenticFailedToComplete_3",e.agenticFailedToComplete_4="agenticFailedToComplete_4",e.agenticFailedToComplete_5="agenticFailedToComplete_5",e.agenticModelResponseStats="agenticModelResponseStats",e.compressionRequestId="compressionRequestId",e.compressionModelResponseStats="compressionModelResponseStats",e.compressionParsingFailed="compressionParsingFailed",e.rememberStarted="rememberStarted",e.rememberEnded="rememberEnded",e.failedToReadGuidelines="failedToReadGuidelines",e.failedToWriteGuidelines="failedToWriteGuidelines"})(Ft||(Ft={}));var bB=class e extends yB{caller;constructor(t){super(),this.caller=t}static create(t){return new e(t)}},$7;(function(e){e.memoriesRequestId="memoriesRequestId",e.exceptionThrown="exceptionThrown",e.start="start",e.end="end",e.noPendingUserMessage="noPendingUserMessage",e.startSendSilentExchange="startSendSilentExchange",e.sendSilentExchangeRequestId="sendSilentExchangeRequestId",e.sendSilentExchangeResponseStats="sendSilentExchangeResponseStats",e.noRequestId="noRequestId",e.conversationChanged="conversationChanged",e.explanationStats="explanationStats",e.contentStats="contentStats",e.invalidResponse="invalidResponse",e.worthRemembering="worthRemembering",e.lastUserExchangeRequestId="lastUserExchangeRequestId",e.noLastUserExchangeRequestId="noLastUserExchangeRequestId"})($7||($7={}));var Y7;(function(e){e.remoteAgentSetup="remote-agent-setup",e.setupScript="setup-script",e.sshInteraction="ssh-interaction",e.notificationBell="notification-bell",e.diffPanel="diff-panel"})(Y7||(Y7={}));var K7;(function(e){e[e.unknown=0]="unknown",e[e.completed=1]="completed",e[e.failed=2]="failed"})(K7||(K7={}));var z7;(function(e){e[e.unknown=0]="unknown",e[e.clicked=1]="clicked",e[e.remoteSessionStarted=2]="remoteSessionStarted"})(z7||(z7={}));var J7;(function(e){e[e.unknown=0]="unknown",e[e.activated=1]="activated",e[e.deactivated=2]="deactivated",e[e.notified=4]="notified",e[e.accepted=3]="accepted"})(J7||(J7={}));async function mp(e,t,r,n,i,s,o){return await gl().chatStream(e,t,r,n,i,s,o)}var EB=class extends un{constructor(t,r,n,i){super(t,r,n,{...i}),this.addDisposable(this.onModifiedUpdated(()=>void this.writeDocumentToFile()))}async writeDocumentToFile(){this.modifiedCode===void 0?await Vi().deleteFile(this.filePath):await Vi().writeFile(this.filePath,this.modifiedCode)}};var _B=class extends Cn{_getAgentMemories;_getAgentMemoriesAbsPath;_memoryUpdateManager;memoryRingBuffer;maxMemoryBufferSize=1e3;constructor(t,r,n){super(Hi.remember,Vt.Safe),this._getAgentMemories=t,this._getAgentMemoriesAbsPath=r,this._memoryUpdateManager=n,this.memoryRingBuffer=new lu(this.maxMemoryBufferSize)}description=`Call this tool when user asks you:
- to remember something
- to create memory/memories

Use this tool only with information that can be useful in the long-term.
Do not use this tool for temporary information.
`;inputSchemaJson=JSON.stringify({type:"object",properties:{memory:{type:"string",description:"The concise (1 sentence) memory to remember."}},required:["memory"]});checkToolCallSafe(t){return!0}async call(t,r,n){let i=t.memory;this.memoryRingBuffer.addItem(i);let s=t.isComplexNewMemory??!1,o=t.caller??vB.unspecified,a=t.memoriesRequestId,l=CB.create(o,s);a&&l.setRequestId(rn.memoriesRequestId,a);let c;try{c=await this.injectMemories(i,s,l)}catch{l.setFlag(rn.exceptionThrown)}finally{c===void 0&&(c=ot("Failed to save memory.")),l.setFlag(rn.toolOutputIsError,c.isError),Mr().reportEvent({eventName:Qr.rememberToolCall,conversationId:"",eventData:{rememberToolCallData:l}})}return c}async injectMemories(t,r,n){n.setFlag(rn.injectionStarted);let i=await this._getAgentMemories();if(n.setStringStats(rn.injectionCurrentMemoriesStats,i),!i)return t.trim().split(`
`).length===1&&(t=`- ${t}`),this._setMemories(t,"",n);let s;if(r?s=Ca().flags.memoriesParams.complex_injection_prompt:s=Ca().flags.memoriesParams.injection_prompt,!s)return n.setFlag(rn.injectionPromptMissing),ot("Failed to save memory.");s=s.replace("{currentMemories}",i).replace("{newMemory}",t),n.setStringStats(rn.injectionPromptStats,s);try{let o=uo();n.setRequestId(rn.injectionRequestId,o);let a=await this._callModel(s,o,n,Xr.memories);n.setStringStats(rn.injectionUpdatedMemoriesStats,a);let l=Math.abs(a.split(`
`).length-i.split(`
`).length),c=Math.abs(a.length-i.length);if(l>10||c>1e3)throw new Error("Injection failed");return this._setMemories(a,i,n)}catch{return n.setFlag(rn.injectionFailed),ot("Failed to save memory.")}}async _callModel(t,r,n,i){let s=await mp(t,r,[],[],[],i);for await(let{nodes:o=[]}of s){let a=o.find(l=>l.type===dc.RAW_RESPONSE)?.content;if(a){let l=a.indexOf("```"),c=a.lastIndexOf("```");return l!==-1&&c!==-1&&c>l+3?a.substring(l+3,c).trim():(n.setFlag(rn.injectionNoCodeWrapper),a.trim().replace(/^`+|`+$/g,"").trim())}}throw new Error("Model call failed")}async _setMemories(t,r,n){n.setFlag(rn.setMemoriesStart);let i=Ca().flags.memoriesParams.upper_bound_size;if(!i)return n.setFlag(rn.setMemoriesUpperBoundSizeMissing),Promise.resolve(ot("Failed to save memories: upper bound size missing"));let s=t.split(`
`).filter(c=>c.trim()).length;n.setNum(rn.setMemoriesNonEmptyLines,s),s>=i&&(t=await this._compressMemories(t,n));let o=this._getAgentMemoriesAbsPath();if(!o)return n.setFlag(rn.setMemoriesNoMemoriesFile),Promise.resolve(ot("Failed to save memories: no memories file available"));let a=new EB(new Le("",o),r,r,{}),l=a.updateBuffer(t);return n.setFlag(rn.setMemoriesUpdateBufferFailed,!l),t===r?(n.setFlag(rn.setMemoriesNoChangesMade),a.dispose(),Promise.resolve(lr("No changes made to memories"))):(a.dispose(),l&&this._memoryUpdateManager&&this._memoryUpdateManager.notifyMemoryHasUpdates(),Promise.resolve(l?lr("Memories saved successfully."):ot("Failed to update buffer")))}async _compressMemories(t,r){r.setFlag(rn.compressionStarted);let n=Ca().flags.memoriesParams.compression_target;if(!n)return r.setFlag(rn.compressionTargetMissing),t;let i=Ca().flags.memoriesParams.compression_prompt;if(!i)return r.setFlag(rn.compressionPromptMissing),t;let s=Ca().flags.memoriesParams.num_recent_memories_to_keep;if(s===void 0)return r.setFlag(rn.compressionNumRecentMemoriesToKeepMissing),t;if(r.setNum(rn.compressionMemoriesQueueSize,this.memoryRingBuffer.length),s>0&&i.includes("{recentMemoriesSubprompt}")&&this.memoryRingBuffer.length>0){let o=Ca().flags.memoriesParams.recent_memories_subprompt;if(o===void 0)return r.setFlag(rn.compressionRecentMemoriesSubpromptMissing),t;let a=this.memoryRingBuffer.slice(-s).map(l=>`- ${l}`).join(`
`);o=o.replace("{recentMemories}",a),i=i.replace("{recentMemoriesSubprompt}",o)}else i.includes("{recentMemoriesSubprompt}")&&(i=i.replace("{recentMemoriesSubprompt}",""));i=i.replace("{memories}",t).replace("{compressionTarget}",n.toString()),r.setStringStats(rn.compressionPromptStats,i);try{let o=uo();r.setRequestId(rn.compressionRequestId,o);let a=await this._callModel(i,o,r,Xr.memoriesCompression);return r.setStringStats(rn.compressionMemoriesStats,a),a.split(`
`).length>=t.split(`
`).length?t:a}catch{return r.setFlag(rn.compressionFailed),t}}};var j7=q(Gf()),xB=class e extends fl{static THROTTLE_DELAY_MS=500;_memoryHasUpdatesCallbacks=new Set;_throttledNotifyMemoryHasUpdates;constructor(){super(),this._throttledNotifyMemoryHasUpdates=(0,j7.default)(this._notifyMemoryHasUpdatesImmediate,e.THROTTLE_DELAY_MS,{trailing:!0})}onMemoryHasUpdates=t=>(this._memoryHasUpdatesCallbacks.add(t),{dispose:()=>{this._memoryHasUpdatesCallbacks.delete(t)}});notifyMemoryHasUpdates=()=>{this._throttledNotifyMemoryHasUpdates()};_notifyMemoryHasUpdatesImmediate=()=>{this._memoryHasUpdatesCallbacks.forEach(t=>t())}};var Pb=class e extends HA{_chatMode;_clientFeatureFlags;_checkpointManager;_getAgentMemories;_getAgentMemoriesAbsPath;_unsupportedSidecarTools;_userAgent;_memoryUpdateManager;constructor(t,r,n,i,s,o,a){let l=new xB,c=[new AB(a),new wI];t===Xr.agent&&c.push(new SI(n)),t===Xr.agent&&c.push(new _B(i,s,l)),t===Xr.agent&&r.flags.agentEditTool===tI.strReplaceEditor&&c.push(new GA(n)),super(c,Gi.sidecarToolHost,o),this._chatMode=t,this._clientFeatureFlags=r,this._checkpointManager=n,this._getAgentMemories=i,this._getAgentMemoriesAbsPath=s,this._unsupportedSidecarTools=o,this._userAgent=a,this._memoryUpdateManager=l}factory(){return new e(this._chatMode,this._clientFeatureFlags,this._checkpointManager,this._getAgentMemories,this._getAgentMemoriesAbsPath,this._unsupportedSidecarTools,this._userAgent)}getMemoryUpdateManager(){return this._memoryUpdateManager}};var Z7=require("events");var wB=class extends fl{_getMemoriesContent;_currentSnapshot;_currentConversationId;_lastActivityTime=0;_inactivityThresholdMs=5*60*1e3;constructor(t){super(),this._getMemoriesContent=t}async getMemorySnapshot(t){let r=Date.now();return this._shouldUpdateSnapshot(t,r)&&await this._updateSnapshot(t),this._lastActivityTime=r,this._currentSnapshot}async forceUpdateSnapshot(){await this._updateSnapshot(this._currentConversationId)}_shouldUpdateSnapshot(t,r){return!this._currentSnapshot||t!==this._currentConversationId||r-this._lastActivityTime>this._inactivityThresholdMs}async _updateSnapshot(t){try{let r=await this._getMemoriesContent();this._currentSnapshot=r,this._currentConversationId=t}catch{this._currentSnapshot=void 0}}dispose=()=>{super.dispose()}};var SB=class e{_mcpServers;_clientToolHostFactory;_remoteInfoSource;_mcpToolsStartupErrorFn;_clientFeatureFlags;_checkpointManager;_getAgentMemories;_getMemoriesAbsPath;_getToolUseRequestEventReporter;_options;static RESTART_HOSTS_EVENT="augment/clients/sidecar/events/restart-hosts";static CHAT_MODE_STORAGE_KEY="augment/clients/sidecar/chat-mode";_hosts=[];_allToolHosts=[];_chatMode;_logger=ut("ToolsModel");_memorySnapshotManager;_onRestartHostsEmitter=new Z7.EventEmitter;onRestartHosts=t=>(this._onRestartHostsEmitter.on(e.RESTART_HOSTS_EVENT,t),{dispose:()=>{this._onRestartHostsEmitter.off(e.RESTART_HOSTS_EVENT,t)}});constructor(t,r,n,i,s,o,a,l,c,u={}){this._mcpServers=t,this._clientToolHostFactory=r,this._remoteInfoSource=n,this._mcpToolsStartupErrorFn=i,this._clientFeatureFlags=s,this._checkpointManager=o,this._getAgentMemories=a,this._getMemoriesAbsPath=l,this._getToolUseRequestEventReporter=c,this._options=u,this._memorySnapshotManager=new wB(this._getAgentMemories),this.loadSavedMode().then(()=>{this.restartHosts()})}async loadSavedMode(){try{let r=await DA().getValue(au.agent,e.CHAT_MODE_STORAGE_KEY,uc.global);r&&Object.values(Xr).includes(r)&&this._chatMode===void 0&&(this._chatMode=r,this._logger.info(`Loaded saved chat mode: ${String(r)}`))}catch(t){this._logger.warn(`Failed to load saved chat mode: ${String(t)}`)}}get memoriesAbsPath(){return this._getMemoriesAbsPath()}async getAgentMemoriesWithSnapshot(t){return this._memorySnapshotManager.getMemorySnapshot(t)}async forceMemorySnapshotUpdate(){await this._memorySnapshotManager.forceUpdateSnapshot()}async getToolMap(){let t=new Map;for(let r of this.hosts){let n=await r.getToolDefinitions();for(let i of n)this.isEnabled(i.definition.name)&&t.set(i.definition.name.toString(),r)}return t}get hosts(){return this._hosts}get chatMode(){return this._chatMode??Xr.chat}getSidecarToolHost(){for(let t of this._hosts)if(t instanceof Pb)return t}setMode(t){if(t!==this._chatMode){this._chatMode=t;try{DA().setValue(au.agent,e.CHAT_MODE_STORAGE_KEY,t,uc.global),this._logger.info(`Saved chat mode: ${String(t)}`)}catch(r){this._logger.warn(`Failed to save chat mode: ${String(r)}`)}this.restartHosts()}}onFlagsChanged(){this.restartHosts()}setMcpServers(t){this._mcpServers=t,this.restartHosts(!0)}async getToolDefinitions(){let t=[];for(let r of this.hosts){let n=await r.getToolDefinitions();for(let i of n)this.isEnabled(i.definition.name)&&t.push(i)}return t}async getToolStatusForSettingsPanel(t=!0){let r=[];for(let n of this._allToolHosts){let i=await n.getAllToolDefinitions(t);r.push(...i)}return r}async callTool(t,r,n,i,s,o){let l=(await this.getToolMap()).get(n);if(l===void 0)return{isError:!0,text:`Tool ${n} not found.`};if(!this.isEnabled(n))return{isError:!0,text:`Tool ${n} is disabled.`};let c=Date.now(),u=await l.callTool(t,r,n,i,s),f=this._getToolUseRequestEventReporter();return f!==void 0&&f.reportEvent(t,n,r,i,u.isError,Date.now()-c,l instanceof mb,o,s.length,u.requestId),u}async checkToolCallSafe(t,r){let i=(await this.getToolMap()).get(t);if(i===void 0)throw new Error(`Cannot find the host for tool '${t}'.`);return await i.checkToolCallSafe(t,r)}async checkToolExists(t){return(await this.getToolMap()).has(t)}async cancelToolRun(t,r){for(let n=0;n<this.hosts.length;n++){let i=this.hosts[n];if(i.isRequestActive(t,r)){let s=i.close(!0);return this._hosts[n]=i.factory(s),s}}return Promise.resolve()}restartHosts(t=!1){let r=this._allToolHosts;t&&(r=this._allToolHosts.filter(u=>u.getName()===Gi.mcpHost));let n=r.map(u=>u.close()),i=Promise.all(n).then(()=>{}),s=this._mcpServers.map(u=>new mb(u,i,this._mcpToolsStartupErrorFn)),o,a,l;t&&(o=this._allToolHosts.find(u=>u.getName()===Gi.remoteToolHost),a=this._allToolHosts.find(u=>u.getName()===Gi.localToolHost),l=this._allToolHosts.find(u=>u.getName()===Gi.sidecarToolHost)),o=o??new _I(this._remoteInfoSource),a=a??this._clientToolHostFactory(this.chatMode),l=l??new Pb(this.chatMode,this._clientFeatureFlags,this._checkpointManager,this._getAgentMemories,this._getMemoriesAbsPath,this._options.unsupportedSidecarTools??new Set,this._options.userAgent),this._allToolHosts=[...s,a,o,l];let c=this._chatMode===Xr.chat&&this._clientFeatureFlags.flags.enableChatWithTools||this._chatMode===Xr.agent&&this._clientFeatureFlags.flags.enableAgentMode;this._hosts=[...s],c&&(this._hosts=this.hosts.concat([a,o,l])),this.logTools(),this._onRestartHostsEmitter.emit(e.RESTART_HOSTS_EVENT)}closeAllToolProcesses(){for(let t of this.hosts)t.closeAllToolProcesses()}getTool(t){for(let r of this.hosts){let n=r.getTool(t);if(n)return n}}async logTools(){this._logger.info(`Tools Mode: ${this._chatMode}`);for(let t of this.hosts){let r=await t.getToolDefinitions(),n=[],i=[];for(let a of r)(this.isEnabled(a.definition.name)?n:i).push(a.definition.name);let s=n.map(a=>` + ${a}`).join(`
`),o=i.map(a=>` - ${a}`).join(`
`);this._logger.info(`Host: ${t.getName()}
${s}
${o}`)}}isEnabled(t){return!0}};var Wo;(function(e){e.empty="empty"})(Wo||(Wo={}));var Ei;(function(e){e.getEditListRequest="agent-get-edit-list-request",e.getEditListResponse="agent-get-edit-list-response",e.getEditChangesByRequestIdRequest="agent-get-edit-changes-by-request-id-request",e.getEditChangesByRequestIdResponse="agent-get-edit-changes-by-request-id-response",e.setCurrentConversation="agent-set-current-conversation",e.revertToTimestamp="revert-to-timestamp",e.chatAgentEditAcceptAll="chat-agent-edit-accept-all",e.reportAgentSessionEvent="report-agent-session-event",e.reportAgentRequestEvent="report-agent-request-event",e.chatReviewAgentFile="chat-review-agent-file",e.getAgentEditContentsByRequestId="get-agent-edit-contents-by-request-id",e.getAgentEditContentsByRequestIdResponse="get-agent-edit-contents-by-request-id-response",e.checkHasEverUsedAgent="check-has-ever-used-agent",e.checkHasEverUsedAgentResponse="check-has-ever-used-agent-response",e.setHasEverUsedAgent="set-has-ever-used-agent"})(Ei||(Ei={}));var nh;(function(e){e.hasEverUsedAgent="hasEverUsedAgent"})(nh||(nh={}));var IB=class{_checkpointManager;_logger=ut("AgentWebviewMessageHandler");supportedTypes=Ei;constructor(t){this._checkpointManager=t}async handle(t,r){switch(t.type){case Ei.getEditListRequest:{let n=t,i=await this._getAgentEditList(n);r(i);break}case Ei.setCurrentConversation:{let n=t;this._checkpointManager.setCurrentConversation(n.data.conversationId),r({type:Wo.empty});break}case Ei.getEditChangesByRequestIdRequest:{let n=t,i=await this._getAgentEditChangesByRequestId(n);r(i);break}case Ei.revertToTimestamp:{let n=t;n.data.qualifiedPathNames?.length?await Promise.all(n.data.qualifiedPathNames.map(async i=>{await this._checkpointManager.revertDocumentToTimestamp(Le.from(i),n.data.timestamp)})):await this._checkpointManager.revertToTimestamp(n.data.timestamp),r({type:Wo.empty});break}case Ei.chatAgentEditAcceptAll:{r({type:Wo.empty});break}case Ei.reportAgentSessionEvent:{Mr().reportEvent(t.data),r({type:Wo.empty});break}case Ei.reportAgentRequestEvent:{MK().reportEvent(t.data),r({type:Wo.empty});break}case Ei.chatReviewAgentFile:{let n=t;await this._showAgentReview(n),r({type:Wo.empty});break}case Ei.checkHasEverUsedAgent:{let n=await DA().getValue(au.agent,nh.hasEverUsedAgent,uc.global);r({type:Ei.checkHasEverUsedAgentResponse,data:n??!1});break}case Ei.setHasEverUsedAgent:{let n=t;await DA().setValue(au.agent,nh.hasEverUsedAgent,n.data,uc.global),r({type:Wo.empty});break}case Ei.getAgentEditContentsByRequestId:{let n=t,i=await this._getAgentEditContentsByRequestId(n);r(i);break}}}async _getAgentEditContentsByRequestId(t){let r=await this._checkpointManager.getCheckpointByRequestId(t.data.requestId),n=r?.files.at(0);return r===void 0||n===void 0||r.files.length!==1?{type:Ei.getAgentEditContentsByRequestIdResponse,data:void 0}:{type:Ei.getAgentEditContentsByRequestIdResponse,data:{originalCode:n.changeDocument.originalCode,modifiedCode:n.changeDocument.modifiedCode}}}_getAgentEditList=async t=>{let{fromTimestamp:r=0,toTimestamp:n}=t.data,i=await this._checkpointManager.getAggregateCheckpoint({minTimestamp:r,maxTimestamp:n});return{type:Ei.getEditListResponse,data:{edits:i.files.map(s=>({qualifiedPathName:s.changeDocument.filePath,changesSummary:s.changesSummary}))}}};_getAgentEditChangesByRequestId=async t=>{let r=await this._checkpointManager.getCheckpointByRequestId(t.data.requestId);return r!==void 0?{type:Ei.getEditChangesByRequestIdResponse,data:r.files.at(0)?.changesSummary}:{type:Ei.getEditChangesByRequestIdResponse,data:void 0}};_showAgentReview=async t=>{let r=Le.from(t.data.qualifiedPathName),i=(await this._checkpointManager.getAggregateCheckpointForFile(r,{minTimestamp:t.data.fromTimestamp,maxTimestamp:t.data.toTimestamp})).files.at(0)?.changeDocument;return i?(await CK().showDiffView(i.filePath,i.originalCode,i.modifiedCode,{retainFocus:t.data.retainFocus}),Promise.resolve({type:Wo.empty})):Promise.resolve({type:Wo.empty})}};var ih;(function(e){e.closeAllToolProcesses="close-all-tool-processes",e.getToolIdentifierRequest="get-tool-identifier-request",e.getToolIdentifierResponse="get-tool-identifier-response"})(ih||(ih={}));var BB=class{_toolsModel;_logger=ut("ToolsWebviewMessageHandler");supportedTypes=ih;constructor(t){this._toolsModel=t}async handle(t,r){switch(t.type){case ih.closeAllToolProcesses:{this._logger.info("Received closeAllToolProcesses message"),this._toolsModel.closeAllToolProcesses(),r({type:Wo.empty});break}case ih.getToolIdentifierRequest:{let n=await this.getToolIdentifier(t);r(n);break}}return Promise.resolve()}getToolIdentifier=async t=>{let r=await this._toolsModel.getToolDefinitions();for(let n of r)if(n.definition.name===t.data.toolName)return{type:ih.getToolIdentifierResponse,data:{found:!0,toolIdentifier:n.identifier,mcpToolName:n.definition.mcp_tool_name,mcpServerName:n.definition.mcp_server_name}};return{type:ih.getToolIdentifierResponse,data:{found:!1}}}};var DB=class{_handlers=new Map;_logger=ut("WebviewMessageBroker");registerHandler(t){let r=Object.values(t.supportedTypes);for(let n of r)this._handlers.set(n,(i,s)=>t.handle(i,s))}handle(t,r){let n=this._handlers.get(t.type);return n?(n(t,r),!0):(this._logger.debug(`No webview message handler found for '${t.type}' in the sidecar broker.`),!1)}};var TB=class{_broker;constructor(t,r){this._broker=new DB;let i=[new IB(t),new BB(r)];for(let s of i)this._broker.registerHandler(s)}onMessage(t,r){return this._broker.handle(t,r)}};var X7=q(require("crypto")),Ub=2023102300,Lb=class extends Error{constructor(t){super(`content exceeds maximum size of ${t}`)}},sh=class{maxBlobSize;_textEncoder=new TextEncoder;constructor(t){this.maxBlobSize=t}_hash(t,r){let n=X7.createHash("sha256");return n.update(t),n.update(r),n.digest("hex")}calculateOrThrow(t,r,n=!0){if(typeof r=="string"&&(r=this._textEncoder.encode(r)),n&&r.length>this.maxBlobSize)throw new Lb(this.maxBlobSize);return this._hash(t,r)}calculate(t,r){try{return this.calculateOrThrow(t,r,!0)}catch{return}}calculateNoThrow(t,r){return this.calculateOrThrow(t,r,!1)}};var PIe=require("console"),LIe=require("crypto"),UIe=q(Cs()),x9=q(jee()),OIe=q(ude()),Q2=q(require("os"));var dde=q(require("crypto")),yR=new Uint8Array(256),AR=yR.length;function nH(){return AR>yR.length-16&&(dde.default.randomFillSync(yR),AR=0),yR.slice(AR,AR+=16)}var fde=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ret(e){return typeof e=="string"&&fde.test(e)}var iH=ret;var Bs=[];for(let e=0;e<256;++e)Bs.push((e+256).toString(16).slice(1));function hde(e,t=0){return Bs[e[t+0]]+Bs[e[t+1]]+Bs[e[t+2]]+Bs[e[t+3]]+"-"+Bs[e[t+4]]+Bs[e[t+5]]+"-"+Bs[e[t+6]]+Bs[e[t+7]]+"-"+Bs[e[t+8]]+Bs[e[t+9]]+"-"+Bs[e[t+10]]+Bs[e[t+11]]+Bs[e[t+12]]+Bs[e[t+13]]+Bs[e[t+14]]+Bs[e[t+15]]}var gde=q(require("crypto")),sH={randomUUID:gde.default.randomUUID};function net(e,t,r){if(sH.randomUUID&&!t&&!e)return sH.randomUUID();e=e||{};let n=e.random||(e.rng||nH)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return hde(n)}var Ph=net;var Ye=q(require("vscode"));function _y(e,t,r){if(!Array.isArray(r))throw new Error(`Value of ${e}.${t} is not Array`)}function Mi(e,t,r){let n=typeof r;if(n!=="number")throw new Error(`Value of ${e}.${t} has unexpected type. Expected number, received ${n}`);return r}function di(e,t,r){let n=typeof r;if(n!=="string")throw new Error(`Value of ${e}.${t} has unexpected type. Expected string, received ${n}`);return r}function Qa(e,t,r){_y(e,t,r);let n=[];for(let i of r)n.push(di(e,t,i));return n}function kc(e,t,r,n=!1){if(r===null)return n;let i=typeof r;if(i!=="boolean")throw new Error(`Value of ${e}.${t} has unexpected type. Expected boolean, received ${i}`);return r}function Na(e){return{checkpoint_id:e.checkpointId,added_blobs:e.addedBlobs.sort(),deleted_blobs:e.deletedBlobs.sort()}}function Jp(e){return{working_directory_changes:e.workingDirectory.map(t=>({before_path:t.beforePath,after_path:t.afterPath,change_type:t.changeType,head_blob_name:t.headBlobName,indexed_blob_name:t.indexedBlobName,current_blob_name:t.currentBlobName}))}}function vR(e){let t=di("BackChatResult","text",e.text),r=e.unknown_blob_names===void 0?[]:Qa("BackChatResult","unknown_blob_names",e.unknown_blob_names),n=e.checkpoint_not_found===void 0?!1:kc("BackChatResult","checkpoint_not_found",e.checkpoint_not_found,!1),i=e.workspace_file_chunks===void 0?[]:e.workspace_file_chunks.map(o=>({charStart:Mi("BackWorkspaceFileChunk","char_start",o.char_start),charEnd:Mi("BackWorkspaceFileChunk","char_end",o.char_end),blobName:di("BackWorkspaceFileChunk","blob_name",o.blob_name)})),s=e.nodes;return{text:t,unknownBlobNames:r,checkpointNotFound:n,workspaceFileChunks:i,nodes:s}}function jp(e,t=""){let r=[];if(typeof e!="object"||e===null)return pde(e);for(let[n,i]of Object.entries(e))if(Array.isArray(i)){r.push(`${t}${n}: (array) ${i.length} (array length) ${JSON.stringify(i).length} (char length)`);let s=20;i.slice(0,s).forEach((o,a)=>{r.push(`${t}  [${a}]: ${jp(o,t+"  ")}`)}),i.length>s&&r.push(`${t}  ${i.length-s} more items...`)}else typeof i=="object"&&i!==null?(r.push(`${t}${n}: (object) ${Object.keys(i).length} (object size) ${JSON.stringify(i).length} (char length)`),r.push(jp(i,t+"  "))):r.push(`${t}${n}: ${pde(i)}`);return r.join(`
`)}function pde(e){return typeof e=="string"?`${e.length} (string length)`:typeof e=="boolean"||e===null||typeof e=="number"?"1":"N/A"}var CR=class e{sessionId;userAgent;fetchFunction;static defaultRequestTimeoutMs=3e4;logger=ut("AugmentExtensionSidecar");clientConfig=wK();clientAuth=_K();constructor(t,r,n){this.sessionId=t,this.userAgent=r,this.fetchFunction=n}async chatStream(t,r,n,i,s,o,a,l,c,u,f,p,g,m,y,v,C,E,w,B,R,N,W,Z){let te=await this.clientConfig.getConfig(),Y={model:a??te.chat.model,path:m,prefix:p,selected_code:f,suffix:g,message:r,chat_history:n,lang:y,blobs:Na(i),user_guided_blobs:s,context_code_exchange_request_id:u,vcs_change:Jp(l),recency_info_recent_changes:c,external_source_ids:o,disable_auto_external_sources:C,user_guidelines:E,workspace_guidelines:w,feature_detection_flags:{support_raw_output:!0},tool_definitions:B??[],nodes:R??[],mode:N??Xr.chat,agent_memories:W,persona_type:Z};return await Di(()=>this.callApiStream(t,te,"chat-stream",Y,vR,te.chat.url,3e5,v),this.logger,{initialMS:250,mult:2,maxMS:5e3,maxTries:5,maxTotalMs:5e3})}async callApiStream(t,r,n,i,s=c=>c,o,a,l){let c=await this.clientAuth.getAPIToken();if(o=o??await this.clientAuth.getCompletionURL(),!o)throw new Error("Please configure Augment API URL");let u;try{u=new URL(n,o)}catch(w){throw this.logger.error("Augment API URL is invalid:",w),new Sd}if(!u.protocol.startsWith("http"))throw new Error("Augment API URL must start with 'http://' or 'https://'");let f=JSON.stringify(i,(w,B)=>B===void 0?null:B),p=a??e.defaultRequestTimeoutMs,g=AbortSignal.timeout(p),m="POST",y;try{let w={"Content-Type":"application/json","User-Agent":this.userAgent,"x-request-id":`${t}`,"x-request-session-id":`${l??this.sessionId}`};c&&(w.Authorization=`Bearer ${c}`),y=await TA(this.fetchFunction(u.toString(),{method:m,headers:w,body:f,signal:g}),p)}catch(w){throw w instanceof Error?(this.logger.error(`API request ${t} to ${u.toString()} failed: ${He(w,!0)}`),w.stack&&this.logger.error(w.stack),Sr.transientIssue(w.message)):w}if(!y.ok)throw y.status===499?Sr.fromResponse(y):(y.status===401&&this.clientAuth.removeAuthSession(),y.status===400&&r.enableDebugFeatures&&this.logger.error(`API request ${t} to ${u.toString()} failed: ${await y.text()}`),this.logger.error(`API request ${t} to ${u.toString()} response ${y.status}: ${y.statusText}`),Sr.fromResponse(y).status===$e.augmentTooLarge&&this.logger.debug(`object size is ${i?jp(i):0} `),Sr.fromResponse(y));let v=y.body.getReader(),C=this.logger;async function*E(w){let B=new TextDecoder,R="";for(;;){let{value:N,done:W}=await w.read(new Uint8Array);if(W)return;for(R+=B.decode(N,{stream:!0});R.includes(`
`);){let Z=R.indexOf(`
`),te=R.substring(0,Z);R=R.substring(Z+1);try{let Y=JSON.parse(te);yield s(Y)}catch(Y){C.error(`JSON parse failed for ${te}: ${He(Y)}`)}}}}return E(v)}};var Mk=q(Ffe()),q_=q(require("vscode"));var IAe=q(require("vscode")),Yh=q(SAe()),BAe=q(Wh()),yct=IAe.window.createOutputChannel("Augment",{log:!0}),WW=class extends BAe.default{constructor(r){super();this.outputChannel=r;this._logFns.set("info",r.info),this._logFns.set("debug",r.debug),this._logFns.set("warn",r.warn),this._logFns.set("error",r.error),this._logFns.set("verbose",r.trace)}_logFns=new Map;log(r,n){setImmediate(()=>{this.emit("logged",r)});let i=[r.prefix?`'${r.prefix}'`:"",r.message].join(" "),s=this._logFns.get(r.level);s?s(i):this.outputChannel.appendLine(i),n()}},DAe=[new WW(yct)];process.env.CONSOLE_LOG_LEVEL&&DAe.push(new Yh.transports.Console({level:process.env.CONSOLE_LOG_LEVEL}));var kk=(0,Yh.createLogger)({level:"debug",exitOnError:!1,format:Yh.format.combine(Yh.format.timestamp({format:"YYYY-MM-DD HH:mm:ss.SSS"}),Yh.format.printf(e=>`${e.timestamp} [${e.level}] '${e.prefix}': ${e.message}`)),transports:DAe});AY(kk);function j(e){return ut(e)}var O_=q(Cs()),Uy=class{constructor(t,r,n){this.name=t;this._logger=r;this._configListener=n}_isSet=!1;_value;get value(){return this._value}update(t){return this._isSet&&(0,O_.isEqual)(t,this._value)?!1:(this._isSet?this._logger.info(`${this.name} changed:
${this.diff(this.value,t).map(r=>`  - ${r}`).join(`
`)}`):this._logger.info(`${this.name} changed from <unset> to ${this._formatValue(t)}`),this._value=(0,O_.cloneDeep)(t),this._isSet=!0,!0)}diff(t,r,n=[]){if((0,O_.isEqual)(r,t))return[];if(!this.isObject(r)||!this.isObject(t))return[`${this._formatValue(t)} to ${this._formatValue(r)}`];let i=new Set([...Object.keys(t||{}),...Object.keys(r||{})]),s=[];for(let o of i){if(this._configListener&&o==="memoriesParams")continue;let a=r?r[o]:void 0,l=t?t[o]:void 0;!this.isObject(a)||!this.isObject(l)?a!==l&&s.push(`${n.concat(o).join(" > ")}: ${this._formatValue(l)} to ${this._formatValue(a)}`):s.push(...this.diff(l,a,n.concat(o)))}return s}isObject(t){return typeof t=="object"&&t!==null}toString(){return this._isSet?this._formatValue(this.value):"<unset>"}_formatValue(t){return t===void 0?"undefined":JSON.stringify(t)}};var Nc=class{_disposables=[];add(t){if(t===void 0)throw new Error("Attempt to add undefined disposable to DisposableCollection");return this._disposables.push(t),t}addAll(...t){t.forEach(r=>this.add(r))}adopt(t){this._disposables.push(...t._disposables),t._disposables.length=0}dispose(){for(let t of this._disposables)t.dispose();this._disposables.length=0}},X=class{_disposables=new Nc;_priorityDisposables=new Nc;constructor(t=new Nc,r=new Nc){this._disposables.adopt(t),this._priorityDisposables.adopt(r)}addDisposable(t,r=!1){return r?this._priorityDisposables.add(t):this._disposables.add(t)}addDisposables(...t){this._disposables.addAll(...t)}dispose(){this._priorityDisposables.dispose(),this._disposables.dispose()}};var vct=128*1024,um={gitDiff:!1,gitDiffPollingFrequencyMSec:0,additionalChatModels:"",smallSyncThreshold:15,bigSyncThreshold:1e3,enableWorkspaceManagerUi:!0,enableInstructions:!1,enableSmartPaste:!1,enableSmartPasteMinVersion:"",enableViewTextDocument:!1,bypassLanguageFilter:!1,enableHindsight:!1,maxUploadSizeBytes:vct,vscodeNextEditBottomPanelMinVersion:"",vscodeNextEditMinVersion:"",vscodeNextEditUx1MaxVersion:"",vscodeNextEditUx2MaxVersion:"",vscodeFlywheelMinVersion:"",vscodeExternalSourcesInChatMinVersion:"",vscodeShareMinVersion:"",maxTrackableFileCount:25e4,maxTrackableFileCountWithoutPermission:15e4,minUploadedPercentageWithoutPermission:90,memoryClassificationOnFirstToken:!1,vscodeSourcesMinVersion:"",vscodeChatHintDecorationMinVersion:"",nextEditDebounceMs:400,enableCompletionFileEditEvents:!1,vscodeEnableCpuProfile:!1,verifyFolderIsSourceRepo:!1,refuseToSyncHomeDirectories:!1,enableFileLimitsForSyncingPermission:!1,enableChatMermaidDiagrams:!1,enableSummaryTitles:!1,smartPastePrecomputeMode:"visible-hover",vscodeNewThreadsMenuMinVersion:"",vscodeEditableHistoryMinVersion:"",vscodeEnableChatMermaidDiagramsMinVersion:"",userGuidelinesLengthLimit:2e3,workspaceGuidelinesLengthLimit:2e3,enableGuidelines:!1,useCheckpointManagerContextMinVersion:"",validateCheckpointManagerContext:!1,vscodeDesignSystemRichTextEditorMinVersion:"",allowClientFeatureFlagOverrides:!1,vscodeChatWithToolsMinVersion:"",vscodeChatMultimodalMinVersion:"",vscodeAgentModeMinVersion:"",vscodeAgentModeMinStableVersion:"",vscodeBackgroundAgentsMinVersion:"",vscodeAgentEditTool:"backend_edit_tool",vscodeRichCheckpointInfoMinVersion:"",vscodeDirectApplyMinVersion:"",memoriesParams:{},eloModelConfiguration:{highPriorityModels:[],regularBattleModels:[],highPriorityThreshold:.5},vscodeVirtualizedMessageListMinVersion:"",vscodeChatStablePrefixTruncationMinVersion:"",agentEditToolMinViewSize:0,agentEditToolSchemaType:"StrReplaceEditorToolDefinitionNested",agentSaveFileToolInstructionsReminder:!1,vscodePersonalitiesMinVersion:"",useMemorySnapshotManager:!1},GW=class{constructor(t,r,n){this._watchedFlags=r;this._callback=n;this._currentFlags=(0,Mk.default)(t)}_disposed=!1;_currentFlags;get disposed(){return this._disposed}trigger(t){if(this._disposed)return;let r=[];for(let n of this._watchedFlags)t[n]!==this._currentFlags[n]&&r.push(n);r.length>0&&this._callback({previousFlags:this._currentFlags,newFlags:t,changedFlags:r})}dispose(){this._disposed=!0}},Fk=class extends X{_subscriptions=[];_refreshTimer;_disposed=!1;_logger=j("FeatureFlagManager");_flags;constructor(t,r){super(),this._flags=new Uy("feature flags",this._logger,r),this._flags.update(t?.initialFlags??um),this._setupRefreshTimer(t),this.addDisposable(q_.workspace.onDidChangeConfiguration(()=>{this._subscriptions=this._subscriptions.filter(n=>!n.disposed);for(let n of this._subscriptions)n.trigger(this.currentFlags)}))}get currentFlags(){if(this._disposed)throw Error("FeatureFlagManager has been disposed");return this._flags.value?.allowClientFeatureFlagOverrides?{...(0,Mk.default)(this._flags.value),...this.readOverridesFromConfig()}:(0,Mk.default)(this._flags.value)}readOverridesFromConfig(){let t=q_.workspace.getConfiguration("augment");if(t.advanced==null||typeof t.advanced!="object")return{};let r=t.advanced.featureFlagOverrides,n={};if(typeof r=="object")for(let i of Object.keys(r))um[i]===void 0?j("AugmentConfigListener").warn(`Feature flag override for ${i} is not a valid feature flag.`):typeof r[i]!=typeof um[i]?j("AugmentConfigListener").warn(`Feature flag override for ${i} is does not match default type ${typeof um[i]}.`):r[i]!==void 0&&um[i]!==void 0&&Object.assign(n,{[i]:r[i]});return n}update(t){if(this._disposed)throw Error("FeatureFlagManager has been disposed");this._flags.update(t),this._subscriptions=this._subscriptions.filter(r=>!r.disposed);for(let r of this._subscriptions)r.trigger(t)}subscribe(t,r){if(this._disposed)throw Error("FeatureFlagManager has been disposed");let n=new GW(this._flags.value,t,r);return this._subscriptions.push(n),n}_setupRefreshTimer(t){if(!t?.fetcher||!t?.refreshIntervalMSec)return;this._cleanupRefreshTimer();let r=new q_.CancellationTokenSource().token,n=t.fetcher,i=t.refreshIntervalMSec,s=async()=>{let o=await n(r);o?this.update(o):r.isCancellationRequested&&this._cleanupRefreshTimer()};this._refreshTimer=setInterval(()=>void s(),i)}_cleanupRefreshTimer(){clearInterval(this._refreshTimer),this._refreshTimer=void 0}dispose(){this._disposed||(super.dispose(),this._subscriptions.forEach(t=>t.dispose()),this._subscriptions=[],this._cleanupRefreshTimer(),this._disposed=!0)}};var bct=TAe(),$W=[],Ect=new Set;for(let e of bct){$W.push({name:e.name,vscodeName:e.vscodeName,extensions:e.extensions});for(let t of e.extensions)Ect.add(t)}var Rs=(se=>(se.Unknown="unknown",se.Command="command",se.Background="background",se.Global="global",se.Click="click",se.RightClick="right-click",se.HoverClick="hover-click",se.EditorActionClick="editor-action-click",se.Keybinding="keybinding",se.Keyboard="keyboard",se.ActiveEditorChanged="active-editor-changed",se.EditorSelectionChanged="editor-selection-changed",se.EditorVisibleRangesChanged="editor-visible-ranges-changed",se.HoveredOutsideSuggestion="hovered-outside-suggestion",se.DocumentChanged="document-changed",se.NextEditPanelItemFocusClick="next-edit-panel-item-focus-click",se.NextEditPanelItemClick="next-edit-panel-item-click",se.CodeAction="code-action",se.GutterClick="gutter-click",se.CodeLens="code-lens",se.Tutorial="tutorial",se.Error="error",se.ValidationExpected="validation-expected",se.ValidationUnexpected="validation-unexpected",se.DebugSession="debug-session",se.NotebookDocument="notebook-document",se.UnsupportedUri="unsupported-uri",se.MissingPathName="missing-path-name",se.NotActiveEditor="not-active-editor",se.NoContentChanges="no-content-changes",se.FreshSuggestions="fresh-suggestions",se))(Rs||{}),YW=class{constructor(t,r,n,i,s){this.path=t;this.range=r;this.charStart=n;this.charStop=i;this.header=s}},Qk=class extends YW{constructor(t,r,n,i,s){super(t,r,n,i,s)}};var Ql=(i=>(i.fresh="fresh",i.stale="stale",i.rejected="rejected",i.accepted="accepted",i))(Ql||{}),Nk=class{constructor(t,r,n,i,s,o,a){this.requestId=t;this.mode=r;this.scope=n;this.qualifiedPathName=i;this.apiResult=s;this.suggestions=o;this.requestTime=a}occurredAt=new Date};function Pk(e,t){return e!=null&&typeof e=="object"&&t in e}function jn(e){return e==null}function RAe(e){if(Pk(AbortSignal,"any")&&typeof AbortSignal.any=="function")return AbortSignal.any(e);let t=new AbortController;if(e.some(i=>i.aborted))return t.abort(),t.signal;let r=[],n=()=>{t.abort(),r.forEach(i=>i())};for(let i of e)i.addEventListener("abort",n),r.push(()=>i.removeEventListener("abort",n));return t.signal}function Nl(e){return[...e].length}function KW(e,t){return[...e].slice(0,t).join("").length}var zW=class{_items=new Map;_inProgress=!1;_stopping=!1;dispose(){this._stopping=!0}get size(){return this._items.size}cancel(t){this._items.delete(t)}_insert(t,r,n=!1){let i=this._items.has(t);return!n&&i?!1:(this._items.set(t,r),!i)}async kick(){if(!(this._inProgress||this._stopping||this._items.size===0)){for(this._inProgress=!0;this._items.size>0&&!this._stopping;){let t=this._items;this._items=new Map;for(let r of t){try{await this._processEntry(r)}catch{}if(this._stopping)break}}this._inProgress=!1,await this._processEntry(void 0)}}};var ta=class extends zW{constructor(r){super();this._processItem=r}insert(r,n,i=!1){return this._insert(r,n,i)}get(r){return this._items.get(r)}async _processEntry(r){return this._processItem(r)}},Ua=class{constructor(t){this._processItem=t}_keys=new Set;_items=new Array;_inProgress=!1;_stopping=!1;get size(){return this._items.length}dispose(){this._stopping=!0}insert(t){return this._keys.has(t)?!1:(this._keys.add(t),this._items.push(t),!0)}async kick(){if(!(this._inProgress||this._stopping)){for(this._inProgress=!0;this._items.length>0&&!this._stopping;){let t=this._items;this._keys.clear(),this._items=new Array;for(let r of t){try{await this._processItem(r)}catch{}if(this._stopping)break}}this._inProgress=!1,await this._processItem(void 0)}}},Pc=class{constructor(t,r){this._toKick=t;this._intervalId=setInterval(this._kick.bind(this),r)}_intervalId;_kick(){this._toKick.kick()}dispose(){this._intervalId!==void 0&&clearInterval(this._intervalId)}},Lk=class{constructor(t){this._processItem=t}_items=[];_inProgress=!1;_stopping=!1;get size(){return this._items.length}dispose(){this._stopping=!0}insert(t){return new Promise((r,n)=>{this._items.push({itemArg:t,resolve:r,reject:n})})}insertAndKick(t){let r=this.insert(t);return this.kick(),r}async kick(){if(!(this._inProgress||this._stopping)){for(this._inProgress=!0;this._items.length>0&&!this._stopping;){let t=this._items.pop();try{let r=await this._processItem(t.itemArg);t.resolve(r)}catch(r){t.reject(r)}}this._inProgress=!1,await this._processItem(void 0)}}};var qk=(o=>(o[o.Unknown=0]="Unknown",o[o.Unimplemented=1]="Unimplemented",o[o.NotFound=2]="NotFound",o[o.Success=3]="Success",o[o.NotActive=4]="NotActive",o[o.Failed=5]="Failed",o))(qk||{});var Uk=class extends Error{constructor(t,r){super(`Conversion failure: ${t}. Response = ${r}`)}},JW=class e extends CR{constructor(r,n,i,s,o){super(i,s,o);this._configListener=r;this._auth=n;this.sessionId=i;this._userAgent=s;this._fetchFunction=o}_sequenceId=new jW;_logger=j("AugmentExtension");getSessionId(){return this.sessionId}createRequestId(){return Ph()}async callApi(r,n,i,s,o,a,l,c,u){let f=n.apiToken,p=!1;if(this._auth.useOAuth){let N=await this._auth.getSession();N&&(f=N.accessToken,p=!0,a||(a=N.tenantURL))}else a||(a=n.completionURL);if(!a)throw new Error("Please configure Augment API URL");let g;try{g=new URL(i,a)}catch(N){throw this._logger.error("Augment API URL is invalid:",N),new Sd}if(!g.protocol.startsWith("http"))throw new Error("Augment API URL must start with 'http://' or 'https://'");let m=JSON.stringify(s,(N,W)=>W===void 0?null:W),y=l??e.defaultRequestTimeoutMs,v=AbortSignal.timeout(y),C="POST",E,w,B;try{let N={"Content-Type":"application/json","User-Agent":this._userAgent,"x-request-id":`${r}`,"x-request-session-id":`${this.sessionId}`,"x-api-version":"2"};f&&(N.Authorization=`Bearer ${f}`),w=Date.now(),E=await TA(this._fetchFunction(g.toString(),{method:C,headers:N,body:m,signal:RAe([v].concat(u?[u]:[]))}),y),B=Date.now()}catch(N){throw N instanceof Error?(this._logger.error(`API request ${r} to ${g.toString()} failed: ${He(N,!0)}`),Sr.transientIssue(N.message)):(this._logger.debug(`API request ${r} to ${g.toString()} failed`),N)}if(c&&(c.rpcStart=w,c.rpcEnd=B),!E.ok)throw E.status===499?Sr.fromResponse(E):(E.status===401&&p&&this._auth.removeSession(),E.status===400&&n.enableDebugFeatures&&this._logger.error(`API request ${r} to ${g.toString()} failed: ${await E.text()}`),this._logger.error(`API request ${r} to ${g.toString()} response ${E.status}: ${E.statusText}`),Sr.fromResponse(E).status===$e.augmentTooLarge&&this._logger.debug(`object size is ${jp(s)} `),Sr.fromResponse(E));let R;try{if(E.headers.get("content-length")==="0")return;R=await E.json()}catch(N){throw this._logger.error(`API request ${r} to ${g.toString()} failed to convert response to json: ${N.message}`),N}try{return o?o(R):R}catch(N){throw new Uk(He(N),JSON.stringify(R))}}_toCompletionItem(r){if(typeof r.text!="string")throw new Error(`Completion item text is not a string: ${JSON.stringify(r)}`);if(r.skipped_suffix!==void 0&&typeof r.skipped_suffix!="string")throw new Error(`Completion item skipped suffix is not a string: ${JSON.stringify(r)}`);if(r.suffix_replacement_text!==void 0&&typeof r.suffix_replacement_text!="string")throw new Error(`Completion item suffix replacement text is not a string: ${JSON.stringify(r)}`);return{text:r.text,suffixReplacementText:r.suffix_replacement_text??"",skippedSuffix:r.skipped_suffix??"",filterScore:r.filter_score??void 0}}_extractCompletions(r){return Array.isArray(r.completion_items)?r.completion_items.map(n=>this._toCompletionItem(n)):Array.isArray(r.completions)?Qa("BackCompletionResult","completions",r.completions).map(i=>({text:i,suffixReplacementText:"",skippedSuffix:""})):[{text:di("BackCompletionResult","text",r.text),suffixReplacementText:"",skippedSuffix:""}]}toCompleteResult(r){let n=this._extractCompletions(r),i=Qa("BackCompletionResult","unknown_blob_names/unknown_memory_names",r.unknown_blob_names??r.unknown_memory_names),s=r.checkpoint_not_found===void 0?!1:kc("BackCompletionResult","checkpoint_not_found",r.checkpoint_not_found,!1);return{completionItems:n,unknownBlobNames:i,checkpointNotFound:s,suggestedPrefixCharCount:r.suggested_prefix_char_count,suggestedSuffixCharCount:r.suggested_suffix_char_count,completionTimeoutMs:r.completion_timeout_ms}}toCheckpointBlobsResult(r){return{newCheckpointId:di("BackCheckpointBlobsResult","new_checkpoint_id",r.new_checkpoint_id)}}async complete(r,n,i,s,o,a,l,c,u,f,p,g,m){let y=this._configListener.config,v={recent_changes:u},C={model:y.modelName,prompt:n,suffix:i,path:s,blob_name:o,prefix_begin:a?.prefixBegin,cursor_position:a?.cursorPosition,suffix_end:a?.suffixEnd,lang:l,blobs:Na(c),recency_info:v,probe_only:g,sequence_id:this._sequenceId.next(),filter_threshold:y.completions.filterThreshold,edit_events:this.toFileDiffsPayload(f??[])};return await this.callApi(r,y,"completion",C,E=>this.toCompleteResult(E),void 0,p,m)}async checkpointBlobs(r){let n=this.createRequestId(),i=this._configListener.config,s={blobs:Na(r)},o=await this.callApi(n,i,"checkpoint-blobs",s,a=>this.toCheckpointBlobsResult(a));for(let a of this.getUniqueExtraURLs())(await this.callApi(n,i,"checkpoint-blobs",s,c=>this.toCheckpointBlobsResult(c),a)).newCheckpointId!==o.newCheckpointId&&this._logger.error(`Checkpoint blobs API returned different checkpoint IDs for ${a}`);return o}convertToCodeEditResult(r){let n=r.unknown_blob_names===void 0?[]:Qa("BackCodeEditResult","unknown_blob_names",r.unknown_blob_names),i=r.checkpoint_not_found===void 0?!1:kc("BackCodeEditResult","checkpoint_not_found",r.checkpoint_not_found,!1);return{unknownBlobNames:n,checkpointNotFound:i,modifiedCode:r.text}}async editCode(r,n,i,s,o,a,l,c,u,f,p){let g=this._configListener.config,y={model:g.codeInstruction.model,instruction:n,prefix:s,selected_text:i,suffix:o,blob_name:l,prefix_begin:c,suffix_end:u,lang:f,path:a,blobs:Na(p),sequence_id:this._sequenceId.next()};return await this.callApi(r,g,"edit",y,v=>this.convertToCodeEditResult(v),void 0,12e4)}async chat(r,n,i,s,o,a,l,c,u,f,p,g,m,y,v,C,E,w,B,R,N,W,Z,te){let Y=this._configListener.config,U={model:l??Y.chat.model,path:y,prefix:g,selected_code:p,suffix:m,message:n,chat_history:i,lang:v,blobs:Na(s),user_guided_blobs:o,external_source_ids:a,enable_preference_collection:Y.preferenceCollection.enable,context_code_exchange_request_id:f,vcs_change:Jp(c),recency_info_recent_changes:u,feature_detection_flags:{support_raw_output:!0},disable_auto_external_sources:E,user_guidelines:w,workspace_guidelines:B,tool_definitions:R??[],nodes:N??[],mode:W??Xr.chat,agent_memories:Z,persona_type:te};return await this.callApi(r,Y,"chat",U,ce=>vR(ce),Y.chat.url,3e5)}toChatInstructionStreamResult(r){let n=r.unknown_blob_names===void 0?[]:Qa("BackChatInstructionStreamResult","unknown_blob_names",r.unknown_blob_names),i=r.checkpoint_not_found===void 0?!1:kc("BackChatInstructionStreamResult","checkpoint_not_found",r.checkpoint_not_found,!1);return{text:r.text,unknownBlobNames:n,checkpointNotFound:i,replacementText:r.replacement_text,replacementOldText:r.replacement_old_text,replacementStartLine:r.replacement_start_line,replacementEndLine:r.replacement_end_line}}async chatInstructionStream(r,n,i,s,o="",a="",l="",c="",u="",f=void 0,p=void 0,g="",m,y,v){let C=this._configListener.config,E=n.length===0,w,B;E?(w=C.smartPaste.url??C.chat.url,B=C.smartPaste.model):(w=C.chat.url,B=C.instructions.model);let R={model:B,prefix:a,selected_text:o,suffix:l,path:c,instruction:n,lang:g,blob_name:u,prefix_begin:f,suffix_end:p,blobs:Na(i),chat_history:s,context_code_exchange_request_id:v,user_guidelines:m,workspace_guidelines:y};return await this.callApiStream(r,C,"instruction-stream",R,this.toChatInstructionStreamResult.bind(this),w,12e4)}_smartPasteQueue=new Lk(this._processSingleSmartPasteRequest.bind(this));async smartPasteStream(r,n,i,s,o="",a="",l="",c="",u="",f=void 0,p=void 0,g="",m="",y="",v="",C){let E={requestId:r,instruction:n,blobs:i,chatHistory:s,selectedText:o,prefix:a,suffix:l,pathName:c,blobName:u,prefixBegin:f,suffixEnd:p,language:g,codeBlock:m,targetFilePath:y,targetFileContent:v,contextCodeExchangeRequestId:C};return this._smartPasteQueue.insertAndKick(E)}async _processSingleSmartPasteRequest(r){if(r===void 0)return;if(r.requestServicedSignal!==void 0)return await r.requestServicedSignal;let n=this._configListener.config,i=r.instruction.length===0,s,o;i?(s=n.smartPaste.url??n.chat.url,o=n.smartPaste.model):s=n.chat.url;let a={model:o,prefix:r.prefix,selected_text:r.selectedText,suffix:r.suffix,path:r.pathName,instruction:r.instruction,lang:r.language,blob_name:r.blobName,prefix_begin:r.prefixBegin,suffix_end:r.suffixEnd,blobs:Na(r.blobs),chat_history:r.chatHistory,code_block:r.codeBlock,target_file_path:r.targetFilePath,target_file_content:r.targetFileContent,context_code_exchange_request_id:r.contextCodeExchangeRequestId},l;return r.requestServicedSignal=new Promise(u=>{l=u}),this._smartPasteQueue.insertAndKick(r),async function*(){try{yield*await this.callApiStream(r.requestId,n,"smart-paste-stream",a,this.toChatInstructionStreamResult.bind(this),s,12e4)}finally{l()}}.bind(this)()}toGenerateCommitMessageResult(r){return{text:r.text}}async generateCommitMessageStream(r,n){let i=this._configListener.config,s={changed_file_stats:n.changedFileStats,diff:n.diff,relevant_commit_messages:n.generatedCommitMessageSubrequest.relevant_commit_messages,example_commit_messages:n.generatedCommitMessageSubrequest.example_commit_messages};return await this.callApiStream(r,i,"generate-commit-message-stream",s,this.toGenerateCommitMessageResult.bind(this),void 0,12e4)}async createRemoteAgent(r,n,i,s){let o=this.createRequestId(),a=this._configListener.config,l={workspace_setup:r,initial_request_details:{request_nodes:n.request_nodes,user_guidelines:n.user_guidelines??a.chat.userGuidelines,workspace_guidelines:n.workspace_guidelines??"",agent_memories:n.agent_memories??""},model:i??a.modelName,setup_script:s};if(this._auth.useOAuth){let c=await this._auth.getSession();c&&(l.token=c.accessToken)}return console.log("Calling /remote-agents/create with payload: ",l),await this.callApi(o,a,"remote-agents/create",l)}async remoteAgentChat(r,n){let i=this.createRequestId(),s=this._configListener.config,o={remote_agent_id:r,request_details:{request_nodes:n.request_nodes,user_guidelines:n.user_guidelines??s.chat.userGuidelines,workspace_guidelines:n.workspace_guidelines??"",agent_memories:n.agent_memories??""}},a=await this.callApi(i,s,"remote-agents/chat",o);return{remoteAgentId:a.remote_agent_id,nodes:a.nodes}}async deleteRemoteAgent(r){let n=this.createRequestId(),i=this._configListener.config,s={remote_agent_id:r};return await this.callApi(n,i,"remote-agents/delete",s)}async interruptRemoteAgent(r){let n=this.createRequestId(),i=this._configListener.config,s={remote_agent_id:r};return await this.callApi(n,i,"remote-agents/interrupt",s)}async listRemoteAgents(){let r=this.createRequestId(),n=this._configListener.config;return await this.callApi(r,n,"remote-agents/list",{})}async getRemoteAgentChatHistory(r,n){let i=this.createRequestId(),s=this._configListener.config,o={remote_agent_id:r,last_processed_sequence_id:n};return await this.callApi(i,s,"remote-agents/get-chat-history",o)}async remoteAgentAddSSHKey(r,n){let i=this.createRequestId(),s=this._configListener.config,o={remote_agent_id:r,public_keys:n};return await this.callApi(i,s,"remote-agents/add-ssh-key",o)}async getRemoteAgentWorkspaceLogs(r){let n=this.createRequestId(),i=this._configListener.config,s={remote_agent_id:r};return await this.callApi(n,i,"remote-agents/logs",s)}toAutofixCommandPayload(r){return{input:r.input,output:r.output,exit_code:r.exitCode}}toBackTextReplacement(r){return{description:r.description,path:r.path,text:r.text,old_text:r.oldText,start_line:r.startLine,end_line:r.endLine,sequence_id:r.sequenceId,old_blob_name:r.oldBlobName}}toFileDiffsPayload(r){return r.map(n=>({path:n.path,before_blob_name:n.beforeBlobName,after_blob_name:n.afterBlobName,edits:n.edits.map(i=>({before_start:i.beforeStart,after_start:i.afterStart,before_text:i.beforeText,after_text:i.afterText}))}))}toFileCharRangePayload(r){return r.filter(n=>n.charStart!==void 0&&n.charStop!==void 0).map(n=>({path:n.path,char_start:n.charStart,char_end:n.charStop}))}toNextEditLocationResult(r){_y("BackNextEditLocationResult","candidate_locations",r.candidate_locations);let n=r.unknown_blob_names===void 0?[]:Qa("BackNextEditLocationResult","unknown_blob_names",r.unknown_blob_names),i=r.checkpoint_not_found===void 0?!1:kc("BackNextEditResult","checkpoint_not_found",r.checkpoint_not_found,!1),s=r.critical_errors===void 0||r.critical_errors===null?[]:Qa("BackNextEditResult","critical_errors",r.critical_errors),o=[];for(let a of r.candidate_locations){let l={start:Mi("BackLineRange","start",a.item.range.start),stop:Mi("BackLineRange","stop",a.item.range.stop)},u={item:{path:di("BackLocation","path",a.item.path),range:l},score:Mi("BackScored","score",a.score),debugInfo:a.debug_info};o.push(u)}return{candidateLocations:o,unknownBlobNames:n,checkpointNotFound:i,criticalErrors:s}}async nextEditLocation(r,n,i,s,o,a,l,c,u,f){let p=this._configListener.config,g={instruction:n,path:i,vcs_change:Jp(s),edit_events:this.toFileDiffsPayload(o),blobs:Na(a),recent_changes:l,diagnostics:c,num_results:u,is_single_file:f};return await this.callApi(r,p,"next_edit_loc",g,m=>this.toNextEditLocationResult(m),p.nextEdit.locationUrl,12e4)}convertToAutofixCheckResponse(r){return{containsFailure:kc("BackAutofixCheckResponse","contains_failure",r.contains_failure,!1),isCodeRelated:kc("BackAutofixCheckResponse","is_code_related",r.is_code_related,!1)}}convertToAutofixPlanResponse(r){return{unknownBlobNames:Qa("BackAutofixPlanResponse","unknown_blob_names",r.unknown_blob_names),checkpointNotFound:kc("BackAutofixPlanResponse","checkpoint_not_found",r.checkpoint_not_found,!1),summary:r.summary,replacements:r.replacements.map(n=>({description:n.description,path:n.path,text:n.text,oldText:n.old_text,startLine:n.start_line,endLine:n.end_line,sequenceId:n.sequence_id,oldBlobName:n.old_blob_name}))}}convertToNextEditGenerationResult(r){let n=r.unknown_blob_names===void 0?[]:Qa("BackNextEditGenerationResult","unknown_blob_names",r.unknown_blob_names),i=r.checkpoint_not_found===void 0?!1:kc("BackNextEditResult","checkpoint_not_found",r.checkpoint_not_found,!1);return{result:this.convertToNextEditResult(r.next_edit),unknownBlobNames:n,checkpointNotFound:i}}convertToNextEditResult(r){let n=di("BackNextEditResult","suggestion_id",r.suggestion_id),i=di("BackNextEditResult","path",r.path),s=di("BackNextEditResult","blob_name",r.blob_name),o=Mi("BackNextEditResult","char_start",r.char_start),a=Mi("BackNextEditResult","char_end",r.char_end),l=di("BackNextEditResult","existing_code",r.existing_code),c=di("BackNextEditResult","suggested_code",r.suggested_code),u=r.truncation_char===void 0||r.truncation_char===null?void 0:Mi("BackNextEditResult","truncation_char",r.truncation_char),f=r.change_description===void 0?"":di("BackNextEditResult","change_description",r.change_description),p=r.diff_spans?.map(v=>({original:{start:Mi("BackCharRange","start",v.original.start),stop:Mi("BackCharRange","stop",v.original.stop)},updated:{start:Mi("BackCharRange","start",v.updated.start),stop:Mi("BackCharRange","stop",v.updated.stop)}})),g=Mi("BackNextEditResult","editing_score",r.editing_score),m=Mi("BackNextEditResult","localization_score",r.localization_score),y=r.editing_score_threshold===void 0?1:Mi("BackNextEditResult","editing_score_threshold",r.editing_score_threshold);return{suggestionId:n,path:i,blobName:s,charStart:o,charEnd:a,existingCode:l,suggestedCode:c,truncationChar:u,changeDescription:f,diffSpans:p,editingScore:g,localizationScore:m,editingScoreThreshold:y}}async nextEditStream(r){let n=this._configListener.config,i=n.nextEdit.model,s=r.prefix?Nl(r.prefix):void 0,o={model:i,instruction:r.instruction??"",prefix:r.prefix,selected_text:r.selectedCode,suffix:r.suffix,selection_begin_char:s,selection_end_char:r.prefix!==void 0&&r.selectedCode!==void 0?s+Nl(r.selectedCode):void 0,blob_name:r.blobName,lang:r.language,path:r.pathName?.relPath,blobs:(r.blobs&&Na(r.blobs))??{checkpoint_id:void 0,added_blobs:[],deleted_blobs:[]},recent_changes:r.recentChanges,diagnostics:r.diagnostics,vcs_change:Jp({workingDirectory:[],commits:[]}),edit_events:this.toFileDiffsPayload(r.fileEditEvents??[]),blocked_locations:this.toFileCharRangePayload(r.blockedLocations??[]),mode:r.mode,scope:r.scope,api_version:3,sequence_id:this._sequenceId.next(),client_created_at:r.clientCreatedAt,unindexed_edit_events:this.toFileDiffsPayload(r.unindexedEditEvents),unindexed_edit_events_base_blob_names:r.unindexedEditEventsBaseBlobNames};return await this.callApiStream(r.requestId,n,"next-edit-stream",o,this.convertToNextEditGenerationResult.bind(this),n.nextEdit.generationUrl,12e4)}getUniqueExtraURLs(){let r=this._configListener.config,n=new Set;return r.nextEdit.url&&n.add(r.nextEdit.url),r.nextEdit.locationUrl&&n.add(r.nextEdit.locationUrl),r.nextEdit.generationUrl&&n.add(r.nextEdit.generationUrl),r.chat.url&&n.add(r.chat.url),n}toMemorizeResult(r){return{blobName:r.blob_name!==void 0?di("BackMemorizeResult","blob_name",r.blob_name):di("BackMemorizeResult","mem_object_name",r.mem_object_name)}}async memorize(r,n,i,s,o){let a=this.createRequestId(),l=this._configListener.config,c=await this.callApi(a,l,"memorize",{model:l.modelName,path:r,t:n,blob_name:i,metadata:s,timeout_ms:o},u=>this.toMemorizeResult(u));for(let u of this.getUniqueExtraURLs())await this.callApi(a,l,"memorize",{model:l.modelName,path:r,t:n,blob_name:i,metadata:s},f=>this.toMemorizeResult(f),u);return c}toBatchUploadResult(r){return{blobNames:r.blob_names}}async batchUpload(r){let n=this.createRequestId(),i=this._configListener.config;try{let s=await this.callApi(n,i,"batch-upload",{blobs:r.map(o=>({blob_name:o.blobName,path:o.pathName,content:o.text}))},this.toBatchUploadResult.bind(this));for(let o of this.getUniqueExtraURLs())await this.callApi(n,i,"batch-upload",{blobs:r.map(a=>({blob_name:a.blobName,path:a.pathName,content:a.text}))},this.toBatchUploadResult.bind(this),o);return s}catch(s){if(!Sr.isAPIErrorWithStatus(s,$e.unimplemented))throw s;let o=[];for(let a of r){let l=await this.memorize(a.pathName,a.text,a.blobName,a.metadata);o.push(l.blobName)}return{blobNames:o}}}toFindMissingResult(r){return{unknownBlobNames:Qa("BackFindMissingResult","unknown_memory_names",r.unknown_memory_names),nonindexedBlobNames:Qa("BackFindMissingResult","nonindexed_blob_names",r.nonindexed_blob_names)}}async findMissing(r){let n=this._configListener.config,i=this.createRequestId(),s=n.modelName,o=[...r].sort(),a=await this.callApi(i,n,"find-missing",{model:s,mem_object_names:o},l=>this.toFindMissingResult(l));for(let l of this.getUniqueExtraURLs()){let c=await this.callApi(i,n,"find-missing",{model:s,mem_object_names:o},u=>this.toFindMissingResult(u),l);a.unknownBlobNames=a.unknownBlobNames.concat(c.unknownBlobNames),a.nonindexedBlobNames=a.nonindexedBlobNames.concat(c.nonindexedBlobNames)}return a}async resolveCompletions(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"resolve-completions",{client_name:"vscode-extension",resolutions:r})}async logCodeEditResolution(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"resolve-edit",{client_name:"vscode-extension",...r})}async logSmartPasteResolution(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"resolve-smart-paste",{client_name:"vscode-extension",...r})}async logInstructionResolution(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"resolve-instruction",{client_name:"vscode-extension",...r})}async resolveNextEdits(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"resolve-next-edit",{client_name:"vscode-extension",resolutions:r},void 0,i.nextEdit.url)}async logNextEditSessionEvent(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"record-session-events",{client_name:"vscode-extension",events:r.map(s=>({time:new Date(s.event_time_sec*1e3+s.event_time_nsec/1e6).toISOString(),event:{next_edit_session_event:{...s,user_agent:this._userAgent}}}))},void 0,i.nextEdit.url)}async logOnboardingSessionEvent(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"record-session-events",{client_name:"vscode-extension",events:r.map(s=>({time:new Date(s.event_time_sec*1e3+s.event_time_nsec/1e6).toISOString(),event:{onboarding_session_event:{...s,user_agent:this._userAgent}}}))},void 0)}async logAgentSessionEvent(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"record-session-events",{client_name:"vscode-extension",events:r.map(s=>({time:new Date(s.event_time_sec*1e3+s.event_time_nsec/1e6).toISOString(),event:{agent_session_event:{...s,user_agent:this._userAgent}}}))},void 0)}async logRemoteAgentSessionEvent(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"record-session-events",{client_name:"vscode-extension",events:r.map(s=>({time:new Date(s.event_time_sec*1e3+s.event_time_nsec/1e6).toISOString(),event:{remote_agent_session_event:{...s,user_agent:this._userAgent}}}))},void 0)}async logAgentRequestEvent(r){let n=new Map;for(let i of r){let s=n.get(i.request_id)||[];n.has(i.request_id)||n.set(i.request_id,s);let{request_id:o,...a}=i;s.push(a)}for(let[i,s]of n){let o=this._configListener.config;await this.callApi(i,o,"record-request-events",{events:s.map(a=>({time:new Date(a.event_time_sec*1e3+a.event_time_nsec/1e6).toISOString(),event:{agent_request_event:{...a,user_agent:this._userAgent}}}))},void 0)}}async logExtensionSessionEvent(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"record-session-events",{client_name:"vscode-extension",events:r.map(s=>({time:s.time_iso,event:{extension_session_event:{...s,user_agent:this._userAgent}}}))},void 0)}async logToolUseRequestEvent(r){let n=new Map;for(let i of r){let s=n.get(i.requestId);s===void 0?n.set(i.requestId,[i]):s.push(i)}for(let[i,s]of n){let o=this._configListener.config;await this.callApi(i,o,"record-request-events",{events:s.map(a=>{let l={tool_name:a.toolName,tool_use_id:a.toolUseId,tool_output_is_error:a.toolOutputIsError,tool_run_duration_ms:a.toolRunDurationMs,tool_input:JSON.stringify(a.toolInput),is_mcp_tool:a.isMcpTool,conversation_id:a.conversationId,chat_history_length:a.chatHistoryLength,tool_request_id:a.toolRequestId};return{time:new Date(a.eventTimeSec*1e3+a.eventTimeNsec/1e6).toISOString(),event:{tool_use_data:l}}})},void 0)}}async recordPreferenceSample(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"record-preference-sample",{client_name:"vscode-extension",...r})}toModel(r){let n=r.completion_timeout_ms!==void 0?Mi("BackModelInfo","completion_timeout_ms",r.completion_timeout_ms):void 0;return{name:di("BackModelInfo","name",r.name),suggestedPrefixCharCount:Mi("BackModelInfo","suggested_prefix_char_count",r.suggested_prefix_char_count),suggestedSuffixCharCount:Mi("BackModelInfo","suggested_suffix_char_count",r.suggested_suffix_char_count),completionTimeoutMs:n,internalName:r.internal_name&&di("BackModelInfo","internal_name",r.internal_name)}}toLanguage(r){let n=di("BackLanguageInfo","name",r.name),i=di("BackLanguageInfo","vscodeName",r.vscode_name);_y("BackLanguageInfo","extensions",r.extensions);let s=[];for(let o of r.extensions)s.push(di("BackLanguageInfo","extensions",o));return{name:n,vscodeName:i,extensions:s}}toGetModelsResult(r){let n=di("BackGetModelsResult","default_model",r.default_model);_y("BackGetModelsResult","models",r.models);let i=[];for(let l of r.models)i.push(this.toModel(l));let s=um;if(r.feature_flags!==void 0){let l=r.feature_flags.git_diff_polling_freq_msec;if(l!==void 0&&l>0&&(s.gitDiff=!0,s.gitDiffPollingFrequencyMSec=l),r.feature_flags.small_sync_threshold!==void 0&&(s.smallSyncThreshold=r.feature_flags.small_sync_threshold),r.feature_flags.big_sync_threshold!==void 0&&(s.bigSyncThreshold=r.feature_flags.big_sync_threshold),r.feature_flags.enable_workspace_manager_ui_launch!==void 0&&(s.enableWorkspaceManagerUi=r.feature_flags.enable_workspace_manager_ui_launch),r.feature_flags.enable_instructions!==void 0&&(s.enableInstructions=r.feature_flags.enable_instructions),r.feature_flags.enable_smart_paste!==void 0&&(s.enableSmartPaste=r.feature_flags.enable_smart_paste),r.feature_flags.enable_smart_paste_min_version!==void 0&&(s.enableSmartPasteMinVersion=r.feature_flags.enable_smart_paste_min_version),r.feature_flags.enable_view_text_document!==void 0&&(s.enableViewTextDocument=r.feature_flags.enable_view_text_document),r.feature_flags.bypass_language_filter!==void 0&&(s.bypassLanguageFilter=r.feature_flags.bypass_language_filter),r.feature_flags.additional_chat_models!==void 0&&(s.additionalChatModels=r.feature_flags.additional_chat_models),r.feature_flags.enable_hindsight!==void 0&&(s.enableHindsight=r.feature_flags.enable_hindsight),r.feature_flags.max_upload_size_bytes!==void 0&&(s.maxUploadSizeBytes=r.feature_flags.max_upload_size_bytes),r.feature_flags.vscode_next_edit_min_version!==void 0&&(s.vscodeNextEditMinVersion=r.feature_flags.vscode_next_edit_min_version),r.feature_flags.vscode_flywheel_min_version!==void 0&&(s.vscodeFlywheelMinVersion=r.feature_flags.vscode_flywheel_min_version),r.feature_flags.vscode_external_sources_in_chat_min_version!==void 0&&(s.vscodeExternalSourcesInChatMinVersion=r.feature_flags.vscode_external_sources_in_chat_min_version),r.feature_flags.vscode_share_min_version!==void 0&&(s.vscodeShareMinVersion=r.feature_flags.vscode_share_min_version),r.feature_flags.max_trackable_file_count!==void 0&&(s.maxTrackableFileCount=r.feature_flags.max_trackable_file_count),r.feature_flags.max_trackable_file_count_without_permission!==void 0&&(s.maxTrackableFileCountWithoutPermission=r.feature_flags.max_trackable_file_count_without_permission),r.feature_flags.min_uploaded_percentage_without_permission!==void 0&&(s.minUploadedPercentageWithoutPermission=r.feature_flags.min_uploaded_percentage_without_permission),r.feature_flags.vscode_sources_min_version!==void 0&&(s.vscodeSourcesMinVersion=r.feature_flags.vscode_sources_min_version),r.feature_flags.vscode_chat_hint_decoration_min_version!==void 0&&(s.vscodeChatHintDecorationMinVersion=r.feature_flags.vscode_chat_hint_decoration_min_version),r.feature_flags.next_edit_debounce_ms!==void 0&&(s.nextEditDebounceMs=r.feature_flags.next_edit_debounce_ms),r.feature_flags.enable_completion_file_edit_events!==void 0&&(s.enableCompletionFileEditEvents=r.feature_flags.enable_completion_file_edit_events),r.feature_flags.vscode_enable_cpu_profile!==void 0&&(s.vscodeEnableCpuProfile=r.feature_flags.vscode_enable_cpu_profile),r.feature_flags.verify_folder_is_source_repo!==void 0&&(s.verifyFolderIsSourceRepo=r.feature_flags.verify_folder_is_source_repo),r.feature_flags.refuse_to_sync_home_directories!==void 0&&(s.refuseToSyncHomeDirectories=r.feature_flags.refuse_to_sync_home_directories),r.feature_flags.enable_file_limits_for_syncing_permission!==void 0&&(s.enableFileLimitsForSyncingPermission=r.feature_flags.enable_file_limits_for_syncing_permission),r.feature_flags.enable_chat_mermaid_diagrams!==void 0&&(s.enableChatMermaidDiagrams=r.feature_flags.enable_chat_mermaid_diagrams),r.feature_flags.enable_summary_titles!==void 0&&(s.enableSummaryTitles=r.feature_flags.enable_summary_titles),r.feature_flags.smart_paste_precompute_mode!==void 0&&(s.smartPastePrecomputeMode=r.feature_flags.smart_paste_precompute_mode),r.feature_flags.vscode_new_threads_menu_min_version!==void 0&&(s.vscodeNewThreadsMenuMinVersion=r.feature_flags.vscode_new_threads_menu_min_version),r.feature_flags.vscode_editable_history_min_version!==void 0&&(s.vscodeEditableHistoryMinVersion=r.feature_flags.vscode_editable_history_min_version),r.feature_flags.vscode_enable_chat_mermaid_diagrams_min_version!==void 0&&(s.vscodeEnableChatMermaidDiagramsMinVersion=r.feature_flags.vscode_enable_chat_mermaid_diagrams_min_version),r.feature_flags.enable_guidelines!==void 0&&(s.enableGuidelines=r.feature_flags.enable_guidelines),r.feature_flags.vscode_use_checkpoint_manager_context_min_version!==void 0&&(s.useCheckpointManagerContextMinVersion=r.feature_flags.vscode_use_checkpoint_manager_context_min_version),r.feature_flags.vscode_validate_checkpoint_manager_context!==void 0&&(s.validateCheckpointManagerContext=r.feature_flags.vscode_validate_checkpoint_manager_context),r.feature_flags.vscode_design_system_rich_text_editor_min_version!==void 0&&(s.vscodeDesignSystemRichTextEditorMinVersion=r.feature_flags.vscode_design_system_rich_text_editor_min_version),r.feature_flags.allow_client_feature_flag_overrides!==void 0&&(s.allowClientFeatureFlagOverrides=r.feature_flags.allow_client_feature_flag_overrides),r.feature_flags.vscode_chat_with_tools_min_version!==void 0&&(s.vscodeChatWithToolsMinVersion=r.feature_flags.vscode_chat_with_tools_min_version),r.feature_flags.vscode_agent_mode_min_version!==void 0&&(s.vscodeAgentModeMinVersion=r.feature_flags.vscode_agent_mode_min_version),r.feature_flags.vscode_agent_mode_min_stable_version!==void 0&&(s.vscodeAgentModeMinStableVersion=r.feature_flags.vscode_agent_mode_min_stable_version),r.feature_flags.vscode_background_agents_min_version!==void 0&&(s.vscodeBackgroundAgentsMinVersion=r.feature_flags.vscode_background_agents_min_version),r.feature_flags.vscode_agent_edit_tool!==void 0&&(s.vscodeAgentEditTool=r.feature_flags.vscode_agent_edit_tool),r.feature_flags.memories_params!==void 0)try{s.memoriesParams=JSON.parse(r.feature_flags.memories_params)}catch{this._logger.error('Parsing of "memories_params" failed.')}if(r.feature_flags.elo_model_configuration!==void 0)try{s.eloModelConfiguration=JSON.parse(r.feature_flags.elo_model_configuration)}catch{this._logger.error('Parsing of "elo_model_configuration" failed.')}r.feature_flags.vscode_chat_stable_prefix_truncation_min_version!==void 0&&(s.vscodeChatStablePrefixTruncationMinVersion=r.feature_flags.vscode_chat_stable_prefix_truncation_min_version),r.feature_flags.vscode_direct_apply_min_version!==void 0&&(s.vscodeDirectApplyMinVersion=r.feature_flags.vscode_direct_apply_min_version),r.feature_flags.vscode_next_edit_bottom_panel_min_version!==void 0&&(s.vscodeNextEditBottomPanelMinVersion=r.feature_flags.vscode_next_edit_bottom_panel_min_version),r.feature_flags.vscode_chat_multimodal_min_version!==void 0&&(s.vscodeChatMultimodalMinVersion=r.feature_flags.vscode_chat_multimodal_min_version),r.feature_flags.workspace_guidelines_length_limit!==void 0&&(s.workspaceGuidelinesLengthLimit=r.feature_flags.workspace_guidelines_length_limit),r.feature_flags.user_guidelines_length_limit!==void 0&&(s.userGuidelinesLengthLimit=r.feature_flags.user_guidelines_length_limit),r.feature_flags.vscode_rich_checkpoint_info_min_version!==void 0&&(s.vscodeRichCheckpointInfoMinVersion=r.feature_flags.vscode_rich_checkpoint_info_min_version),r.feature_flags.vscode_virtualized_message_list_min_version!==void 0&&(s.vscodeVirtualizedMessageListMinVersion=r.feature_flags.vscode_virtualized_message_list_min_version),r.feature_flags.agent_edit_tool_min_view_size!==void 0&&(s.agentEditToolMinViewSize=r.feature_flags.agent_edit_tool_min_view_size),r.feature_flags.agent_edit_tool_schema_type!==void 0&&(s.agentEditToolSchemaType=r.feature_flags.agent_edit_tool_schema_type),r.feature_flags.vscode_personalities_min_version!==void 0&&(s.vscodePersonalitiesMinVersion=r.feature_flags.vscode_personalities_min_version),r.feature_flags.memory_classification_on_first_token!==void 0&&(s.memoryClassificationOnFirstToken=r.feature_flags.memory_classification_on_first_token),r.feature_flags.agent_save_file_tool_instructions_reminder!==void 0&&(s.agentSaveFileToolInstructionsReminder=r.feature_flags.agent_save_file_tool_instructions_reminder),r.feature_flags.use_memory_snapshot_manager!==void 0&&(s.useMemorySnapshotManager=r.feature_flags.use_memory_snapshot_manager)}let o=[];if(r.languages===void 0)o=$W;else{_y("BackGetModelsResult","languages",r.languages),o=[];for(let l of r.languages)o.push(this.toLanguage(l))}let a=r.user_tier?.toLowerCase().replace("_tier","")??"unknown";return{defaultModel:n,models:i,languages:o,featureFlags:s,userTier:a}}async getModelConfig(){let r=this._configListener.config,n=this.createRequestId();return await this.callApi(n,r,"get-models",{},s=>this.toGetModelsResult(s))}async completionFeedback(r){let n=this._configListener.config,i=this.createRequestId();await this.callApi(i,n,"completion-feedback",{request_id:r.requestId,rating:r.rating,note:r.note},void 0)}async chatFeedback(r){let n=this._configListener.config,i=this.createRequestId();await this.callApi(i,n,"chat-feedback",{request_id:r.requestId,rating:r.rating,note:r.note,mode:r.mode},void 0)}async nextEditFeedback(r){let n=this._configListener.config,i=this.createRequestId();await this.callApi(i,n,"next-edit-feedback",{request_id:r.requestId,rating:r.rating,note:r.note},void 0,n.nextEdit.url)}async getAccessToken(r,n,i,s){let o=this._configListener.config,a=this.createRequestId(),l={grant_type:"authorization_code",client_id:o.oauth.clientID,code_verifier:i,redirect_uri:r,code:s};return await this.callApi(a,o,"token",l,c=>c.access_token,n)}async uploadUserEvents(r){let n=this.createRequestId();return await this.callApi(n,this._configListener.config,"record-user-events",{extension_data:r})}async clientMetrics(r){let n=this._configListener.config,i=this.createRequestId();await this.callApi(i,n,"client-metrics",{metrics:r},void 0,void 0,e.defaultRequestTimeoutMs)}async searchExternalSources(r,n){let i=this._configListener.config,s=this.createRequestId();return await this.callApi(s,i,"search-external-sources",{query:r,source_types:n},o=>o)}async getImplicitExternalSources(r){let n=this._configListener.config,i=this.createRequestId();return await this.callApi(i,n,"get-implicit-external-sources",{message:r},s=>s)}convertToAgentCodebaseRetrievalResult(r){return{formattedRetrieval:r.formatted_retrieval}}async agentCodebaseRetrieval(r,n,i,s,o,a){let l=this._configListener.config;return await this.callApi(r,l,"agents/codebase-retrieval",{information_request:n,blobs:Na(i),dialog:s,max_output_length:o},c=>this.convertToAgentCodebaseRetrievalResult(c),l.chat.url,12e4,void 0,a)}convertToAgentEditFileResult(r){return{modifiedFileContents:r.modified_file_contents,isError:r.is_error}}async agentEditFile(r,n,i,s,o,a){let l=this._configListener.config;return await this.callApi(r,l,"agents/edit-file",{file_path:n,edit_summary:i,detailed_edit_description:s,file_contents:o},c=>this.convertToAgentEditFileResult(c),l.chat.url,12e4,void 0,a)}convertToToolSafety(r){switch(r){case 0:return Vt.Unsafe;case 1:return Vt.Safe;case 2:return Vt.Check;default:return Vt.Unsafe}}convertToListRemoteToolsResult(r){return{tools:r.tools.map(n=>({toolDefinition:n.tool_definition,remoteToolId:n.remote_tool_id,availabilityStatus:n.availability_status,toolSafety:this.convertToToolSafety(n.tool_safety),oauthUrl:n.oauth_url}))}}async listRemoteTools(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"agents/list-remote-tools",{tool_id_list:{tool_ids:r}},s=>this.convertToListRemoteToolsResult(s),i.chat.url,12e4)}convertToCheckToolSafetyResult(r){return r.is_safe}async checkToolSafety(r,n){let i=this.createRequestId(),s=this._configListener.config;return await this.callApi(i,s,"agents/check-tool-safety",{tool_id:r,tool_input_json:n},o=>this.convertToCheckToolSafetyResult(o),s.chat.url,12e4)}convertToRunRemoteToolResult(r){return{toolOutput:r.tool_output,toolResultMessage:r.tool_result_message,status:r.status}}async runRemoteTool(r,n,i,s,o,a){let l=this._configListener.config,c={};if(o)if(s===Mn.Jira||s===Mn.Confluence){let u=o;c={extra_tool_input:{atlassian_tool_extra_input:{server_url:u.serverUrl,personal_api_token:u.personalApiToken,username:u.username}}}}else s===Mn.Notion?c={extra_tool_input:{notion_tool_extra_input:{api_token:o.apiToken}}}:s===Mn.Linear?c={extra_tool_input:{linear_tool_extra_input:{api_token:o.apiToken}}}:s===Mn.GitHubApi&&(c={extra_tool_input:{github_tool_extra_input:{api_token:o.apiToken}}});return await this.callApi(r,l,"agents/run-remote-tool",{tool_name:n,tool_input_json:i,tool_id:s,...c},u=>this.convertToRunRemoteToolResult(u),l.chat.url,12e4,void 0,a)}convertToRevokeToolAccessResult(r){return{status:r.status}}async revokeToolAccess(r){let n=this.createRequestId(),i=this._configListener.config;return await this.callApi(n,i,"agents/revoke-tool-access",{tool_id:r},s=>this.convertToRevokeToolAccessResult(s),i.chat.url)}reportError(r,n,i,s){return Promise.reject(new Error("reportError should only be used via APIServerImplWithErrorReporting"))}async reportClientCompletionTimelines(r){let n=this._configListener.config,i=this.createRequestId();await this.callApi(i,n,"/client-completion-timelines",{timelines:r},void 0,void 0,e.defaultRequestTimeoutMs)}async checkCommand(r,n,i){let s=this._configListener.config,o={command:r,output:n};return await this.callApi(i,s,"check_command",o,a=>a,s.autofix.autofixUrl,1e4)}async containErrors(r,n,i){let s=this._configListener.config,o={command:r,output:n};return await this.callApi(i,s,"contain_errors",o,a=>a,s.autofix.autofixUrl,1e4)}async createFixPlan(r,n,i,s,o){let a=this._configListener.config,l={output:{command:n,output:i},git_diff:r,edit_locations:s};return await this.callApi(o,a,"create_fix_plan",l,c=>c,a.autofix.autofixUrl,3e4)}async applyFileFix(r,n,i){let s=this._configListener.config,o={file_fix:r,source_content:n};return await this.callApi(i,s,"apply_file_fix",o,a=>a,s.autofix.autofixUrl,3e4)}async autofixCheck(r){let n=this._configListener.config,i=this.createRequestId();return await this.callApi(i,n,"/autofix/check",{command:this.toAutofixCommandPayload(r)},s=>this.convertToAutofixCheckResponse(s),n.autofix.autofixUrl,1e4)}async autofixPlan(r,n,i,s){let o=this._configListener.config,a=this.createRequestId();return await this.callApi(a,o,"/autofix/plan",{command:this.toAutofixCommandPayload(r),vcs_change:Jp(n),blobs:Na(i),steering_history:(s||[]).map(l=>({request_message:l.requestMessage,summary:l.summary,replacements:l.replacements.map(c=>this.toBackTextReplacement(c)),request_id:l.requestId}))},l=>this.convertToAutofixPlanResponse(l),o.autofix.autofixUrl,6e4)}async saveChat(r,n,i){let s=this._configListener.config,o=this.createRequestId(),a={conversation_id:r,chat:n.map(c=>({request_message:c.request_message,response_text:c.response_text,request_id:c.request_id})),title:i};return await this.callApi(o,s,"/save-chat",a,c=>c,s.chat.url,e.defaultRequestTimeoutMs)}},Ok=class extends JW{constructor(t,r,n,i,s){super(t,r,n,i,s)}async callApi(t,r,n,i,s=u=>u,o,a,l,c){let u=Date.now();try{return await super.callApi(t,r,n,i,s,o,a,l,c)}catch(f){throw await this.handleError(f,n,i,o??"",t,u),f}}async handleError(t,r,n,i,s,o){if(Sr.isAPIErrorWithStatus(t,$e.cancelled))throw t;let l=[{key:"body_length",value:`${JSON.stringify(n,(p,g)=>g===void 0?null:g).length}`},{key:"start_time",value:`${o}`},{key:"end_time",value:`${Date.now()}`},{key:"message",value:He(t)}],c=t instanceof Error?t.stack:void 0;t instanceof Sr&&t.status===$e.augmentTooLarge&&l.push({key:"object_size_breakdown",value:`${jp(n)}`});let u=t instanceof Sr?t.status:$e.unknown,f=`${r} call failed with APIStatus ${$e[u]}`;throw t instanceof Uk&&(f=`converting ${r} response failed`),i&&this.getUniqueExtraURLs().has(i)?this._logger.error(`API error ${r} to ${i}: ${f}`):await this.reportError(s,f,c??"",l),t}async callApiStream(t,r,n,i,s,o,a,l){let c=Date.now();try{return await super.callApiStream(t,r,n,i,s,o,a,l)}catch(u){throw await this.handleError(u,n,i,o??"",t,c),u}}async reportError(t,r,n,i){let s=this._configListener.config,o=this.createRequestId(),a=n.replace(/ \(\/[^()]+\)/g,"");try{return await super.callApi(o,s,"report-error",{original_request_id:t,sanitized_message:r,stack_trace:a,diagnostics:i},void 0,void 0,500)}catch(l){this._logger.error(`Dropping error report "${r}" due to error: ${He(l)}`)}}},jW=class{_sequenceId=0;next(){return this._sequenceId++}};var FAe=q(Cs()),Lc=q(require("vscode"));var _ct={Augment:null},xct=k.object({apiToken:k.string(),completionURL:k.string(),disableCompletionsByLanguage:k.array(k.string()),enableAutomaticCompletions:k.boolean(),completions:k.object({enableAutomaticCompletions:k.boolean(),disableCompletionsByLanguage:k.array(k.string()),enableQuickSuggestions:k.boolean()}),shortcutsDisplayDelayMS:k.number(),enableEmptyFileHint:k.boolean(),disableFocusOnEmptyWorkspace:k.boolean(),conflictingCodingAssistantCheck:k.boolean(),chat:k.object({userGuidelines:k.string()}),nextEdit:k.object({enableBackgroundSuggestions:k.boolean(),enableGlobalBackgroundSuggestions:k.boolean(),highlightSuggestionsInTheEditor:k.boolean(),showDiffInHover:k.boolean(),enableAutoApply:k.boolean()}),advanced:k.object({apiToken:k.string(),completionURL:k.string(),oauth:k.object({clientID:k.string(),url:k.string()}),model:k.string(),codeInstruction:k.object({model:k.string()}),chat:k.object({url:k.string(),model:k.string(),stream:k.boolean(),enableEditableHistory:k.boolean(),useRichTextHistory:k.boolean(),smartPasteUsePrecomputation:k.boolean(),experimentalFullFilePaste:k.boolean(),modelDisplayNameToId:k.record(k.string().nullable())}),autofix:k.object({enabled:k.boolean(),locationUrl:k.string(),autofixUrl:k.string()}),enableDebugFeatures:k.boolean(),enableWorkspaceUpload:k.boolean(),enableReviewerWorkflows:k.boolean(),completions:k.object({timeoutMs:k.number(),maxWaitMs:k.number(),addIntelliSenseSuggestions:k.boolean(),filterThreshold:k.number(),filter_threshold:k.number()}),openFileManager:k.object({v2Enabled:k.boolean()}),enableDataCollection:k.boolean(),nextEditURL:k.string(),nextEditLocationURL:k.string(),nextEditGenerationURL:k.string(),nextEditBackgroundGeneration:k.boolean(),nextEdit:k.object({enabled:k.boolean(),backgroundEnabled:k.boolean(),url:k.string(),locationUrl:k.string(),generationUrl:k.string(),model:k.string(),useDebounceMs:k.number(),useCursorDecorations:k.boolean(),allowDuringDebugging:k.boolean(),useMockResults:k.boolean(),noDiffModeUseCodeLens:k.boolean(),enableBottomPanel:k.boolean()}),recencySignalManager:k.object({collectTabSwitchEvents:k.boolean()}),preferenceCollection:k.object({enable:k.boolean(),enableRetrievalDataCollection:k.boolean(),enableRandomizedMode:k.boolean()}),vcs:k.object({watcherEnabled:k.boolean()}),smartPaste:k.object({url:k.string(),model:k.string()}),instructions:k.object({model:k.string()}),integrations:k.object({atlassian:k.object({serverUrl:k.string(),personalApiToken:k.string(),username:k.string()}),notion:k.object({apiToken:k.string()}),linear:k.object({apiToken:k.string()}),github:k.object({apiToken:k.string()})}),mcpServers:k.array(k.object({command:k.string(),args:k.array(k.string()),timeoutMs:k.number(),env:k.record(k.string())})),personalityPrompts:k.object({agent:k.string().optional(),prototyper:k.string().optional(),brainstorm:k.string().optional(),reviewer:k.string().optional()}).optional()})}),kAe=xct.deepPartial(),Vk=class e extends X{_config;_configChanged=new Lc.EventEmitter;_configMonitor;_logger=j("AugmentConfigListener");constructor(){super(),this._configMonitor=new Uy("Config",this._logger),this._refreshConfig(),this.addDisposable(Lc.workspace.onDidChangeConfiguration(()=>this._refreshConfig()))}get config(){return this._config}get onDidChange(){return this._configChanged.event}_refreshConfig(){let t=this._config;this._config=e.normalizeConfig(this._getRawSettings()),this._configMonitor.update(this._config)&&this._configChanged.fire({previousConfig:t,newConfig:this._config})}static normalizeConfig(t){return{apiToken:(t?.advanced?.apiToken??t.apiToken??"").trim().toUpperCase(),completionURL:(t?.advanced?.completionURL??t.completionURL??"").trim(),modelName:t?.advanced?.model??"",conflictingCodingAssistantCheck:t.conflictingCodingAssistantCheck??!0,codeInstruction:{model:t.advanced?.codeInstruction?.model},chat:{url:t.advanced?.chat?.url,model:t.advanced?.chat?.model,stream:t.advanced?.chat?.stream,enableEditableHistory:t.advanced?.chat?.enableEditableHistory??!1,useRichTextHistory:t.advanced?.chat?.useRichTextHistory??!0,smartPasteUsePrecomputation:t.advanced?.chat?.smartPasteUsePrecomputation??!0,experimentalFullFilePaste:t.advanced?.chat?.experimentalFullFilePaste??!1,modelDisplayNameToId:t.advanced?.chat?.modelDisplayNameToId??_ct,userGuidelines:t.chat?.userGuidelines||""},autofix:{enabled:t.advanced?.autofix?.enabled??!1,locationUrl:t.advanced?.autofix?.locationUrl,autofixUrl:t.advanced?.autofix?.autofixUrl},oauth:{clientID:t.advanced?.oauth?.clientID??"augment-vscode-extension",url:t.advanced?.oauth?.url??"https://auth.augmentcode.com"},enableUpload:t.advanced?.enableWorkspaceUpload??!0,shortcutsDisplayDelayMS:t.shortcutsDisplayDelayMS??2e3,enableEmptyFileHint:t.enableEmptyFileHint??!0,disableFocusOnEmptyWorkspace:t.disableFocusOnEmptyWorkspace??!1,enableDataCollection:t.advanced?.enableDataCollection??!1,enableDebugFeatures:t.advanced?.enableDebugFeatures??!1,enableReviewerWorkflows:t.advanced?.enableReviewerWorkflows??!1,completions:{enableAutomaticCompletions:t.enableAutomaticCompletions??t.completions?.enableAutomaticCompletions??!0,disableCompletionsByLanguage:new Set(t.disableCompletionsByLanguage??t.completions?.disableCompletionsByLanguage??[]),enableQuickSuggestions:t.completions?.enableQuickSuggestions??!0,timeoutMs:t.advanced?.completions?.timeoutMs??800,maxWaitMs:t.advanced?.completions?.maxWaitMs??1600,addIntelliSenseSuggestions:t.advanced?.completions?.addIntelliSenseSuggestions??!0,filterThreshold:t.advanced?.completions?.filter_threshold},openFileManager:{v2Enabled:t.advanced?.openFileManager?.v2Enabled??!1},nextEdit:{enabled:t.advanced?.nextEdit?.enabled,backgroundEnabled:t.advanced?.nextEdit?.backgroundEnabled??!0,url:t.advanced?.nextEdit?.url,locationUrl:t.advanced?.nextEdit?.locationUrl??t.advanced?.nextEdit?.url,generationUrl:t.advanced?.nextEdit?.generationUrl??t.advanced?.nextEdit?.url,model:t.advanced?.nextEdit?.model,useDebounceMs:t.advanced?.nextEdit?.useDebounceMs,useCursorDecorations:t.advanced?.nextEdit?.useCursorDecorations??!1,allowDuringDebugging:t.advanced?.nextEdit?.allowDuringDebugging??!1,useMockResults:t.advanced?.nextEdit?.useMockResults??!1,noDiffModeUseCodeLens:t.advanced?.nextEdit?.noDiffModeUseCodeLens??!1,enableBackgroundSuggestions:t.nextEdit?.enableBackgroundSuggestions??!0,enableGlobalBackgroundSuggestions:t.nextEdit?.enableGlobalBackgroundSuggestions??!1,highlightSuggestionsInTheEditor:t.nextEdit?.highlightSuggestionsInTheEditor??!1,showDiffInHover:t.nextEdit?.showDiffInHover??!1,enableAutoApply:t.nextEdit?.enableAutoApply??!0,enableBottomPanel:t.advanced?.nextEdit?.enableBottomPanel},recencySignalManager:{collectTabSwitchEvents:t.advanced?.recencySignalManager?.collectTabSwitchEvents??!1},preferenceCollection:{enable:t.advanced?.preferenceCollection?.enable??!1,enableRetrievalDataCollection:t.advanced?.preferenceCollection?.enableRetrievalDataCollection??!1,enableRandomizedMode:t.advanced?.preferenceCollection?.enableRandomizedMode??!0},vcs:{watcherEnabled:t.advanced?.vcs?.watcherEnabled??!1},smartPaste:{url:t.advanced?.smartPaste?.url,model:t.advanced?.smartPaste?.model},instructions:{model:t.advanced?.instructions?.model},integrations:{atlassian:t.advanced?.integrations?.atlassian?{serverUrl:t.advanced.integrations.atlassian.serverUrl||"",personalApiToken:t.advanced.integrations.atlassian.personalApiToken||"",username:t.advanced.integrations.atlassian.username||""}:void 0,notion:t.advanced?.integrations?.notion?{apiToken:t.advanced.integrations.notion.apiToken||""}:void 0,linear:t.advanced?.integrations?.linear?{apiToken:t.advanced.integrations.linear.apiToken||""}:void 0,github:t.advanced?.integrations?.github?{apiToken:t.advanced.integrations.github.apiToken||""}:void 0},mcpServers:(t.advanced?.mcpServers??[]).filter(r=>r!==void 0).map(r=>({command:MAe(r.command||""),args:r.args?.map(n=>MAe(n)),timeoutMs:r.timeoutMs,env:r.env})),advanced:{personalityPrompts:t.advanced?.personalityPrompts}}}_getRawSettings(){let t=Lc.workspace.getConfiguration("augment");return e.parseSettings(t)}async migrateLegacyConfig(){let t=Lc.workspace.getConfiguration("augment");await this._moveConfig(t,"enableAutomaticCompletions","completions.enableAutomaticCompletions"),await this._moveConfig(t,"disableCompletionsByLanguage","completions.disableCompletionsByLanguage"),await this._moveConfig(t,"enableBackgroundSuggestions","nextEdit.enableBackgroundSuggestions"),await this._moveConfig(t,"enableGlobalBackgroundSuggestions","nextEdit.enableGlobalBackgroundSuggestions"),await this._moveConfig(t,"highlightSuggestionsInTheEditor","nextEdit.highlightSuggestionsInTheEditor")}async _moveConfig(t,r,n){let i=t.inspect(r);if(!i)return;let s=t.inspect(n),o=[{target:Lc.ConfigurationTarget.Workspace,oldValue:i.workspaceValue,newValue:s?.workspaceValue},{target:Lc.ConfigurationTarget.Global,oldValue:i.globalValue,newValue:s?.globalValue}];for(let a of o)a.oldValue!==void 0&&(a.newValue===void 0&&await t.update(n,a.oldValue,a.target),await t.update(r,void 0,a.target))}static parseSettings(t){let r=j("AugmentConfigListener"),n=kAe.safeParse(t);if(!n.success){let i=n.error.issues.map(l=>"["+l.path.join(".")+"]: "+l.message);r.error(`Failed to parse settings: 
${i.join(`
`)}`);let s=n.error.issues.map(l=>l.path.join(".")),o=(0,FAe.omit)(JSON.parse(JSON.stringify(t)),s),a=kAe.safeParse(o);return a.success?(r.info("settings parsed successfully after cleaning"),a.data):{}}return r.info("settings parsed successfully"),n.data}};function MAe(e){let t="${workspaceFolder}";if(!e.includes(t))return e;let r=Lc.workspace.workspaceFolders?.length??0;r!==1&&j("AugmentConfigListener").warn(`Variable ${t} cannot be expanded because there are ${r} workspace folders open.`);let n=Lc.workspace.workspaceFolders?.[0]?.uri;return n&&(e=e.replaceAll(t,n.fsPath)),e}var Hk=class extends X{constructor(r,n,i){super();this._actionsModel=r;this._authSession=n;this._configListener=i;this.addDisposable(this._authSession.onDidChangeSession(()=>{this._updateSignInState()})),this.addDisposable(this._authSession.onReady(()=>{this._updateSignInState()})),this.addDisposable(this._configListener.onDidChange(({newConfig:s,previousConfig:o})=>{s.apiToken===o.apiToken&&s.completionURL===o.completionURL||this._updateSignInState()})),this._updateSignInState()}_updateSignInState(){if(!this._authSession.useOAuth){this._actionsModel.setSystemStateStatus("authenticated","complete");return}if(this._authSession.isLoggedIn===void 0)return;this._authSession.isLoggedIn===!1&&this._configListener.config.enableDebugFeatures&&this._actionsModel.restartActionsState();let r=this._authSession.isLoggedIn?"complete":"incomplete";this._actionsModel.setSystemStateStatus("authenticated",r)}};var QAe=q(Cs()),Kh=q(require("vscode"));var H_="augment.sessions",Wk=["email"],Gk=class extends X{constructor(r,n){super();this._context=r;this._config=n;this.addDisposables(this.onDidChangeSession(i=>{this._isLoggedIn=!!i,Kh.commands.executeCommand("setContext","vscode-augment.isLoggedIn",this._isLoggedIn)}),this._context.secrets.onDidChange(async i=>{i.key===H_&&this._sessionChangeEmitter.fire(await this.getSession())}),this._config.onDidChange(()=>{Kh.commands.executeCommand("setContext","vscode-augment.useOAuth",this.useOAuth)})),this._ready=this.initState()}_sessionChangeEmitter=new Kh.EventEmitter;_readyEmitter=new Kh.EventEmitter;_isLoggedIn;_ready;get onDidChangeSession(){return this._sessionChangeEmitter.event}get onReady(){return this._readyEmitter.event}get useOAuth(){let r=this._config.config;return!!r.oauth&&!!r.oauth.url&&!!r.oauth.clientID&&!r.apiToken&&!r.completionURL}async initState(){this._isLoggedIn=!!await this.getSession(),Kh.commands.executeCommand("setContext","vscode-augment.isLoggedIn",this._isLoggedIn),Kh.commands.executeCommand("setContext","vscode-augment.useOAuth",this.useOAuth),this._readyEmitter.fire()}get isLoggedIn(){return this._isLoggedIn}async saveSession(r,n){await this._context.secrets.store(H_,JSON.stringify({accessToken:r,tenantURL:n,scopes:Wk}))}async getSession(){let r=await this._context.secrets.get(H_);if(r){let n=JSON.parse(r);if((0,QAe.isEqual)(n.scopes,Wk))return n}return null}async removeSession(){await this._context.secrets.get(H_)&&await this._context.secrets.delete(H_)}};var Hy=require("crypto"),_o=q(require("vscode"));async function Ou(e){return new Promise(t=>{let r=e(n=>{r.dispose(),t(n)})})}var $k="augment.oauth-state",wct=".augmentcode.com",NAe=10,Yk=class{constructor(t,r,n,i,s){this._context=t;this._config=r;this._apiServer=n;this._authSession=i;this._onboardingSessionEventReporter=s;this.authRedirectURI=_o.Uri.from({scheme:_o.env.uriScheme,authority:this._context.extension.id,path:"/auth/result"})}_logger=j("OAuthFlow");_programmaticCancellation=new _o.EventEmitter;_previousLogin;authRedirectURI;doProgrammaticCancellation(){this._programmaticCancellation.fire("Cancelled by user")}async startFlow(t=!0){try{this._programmaticCancellation.fire("Cancelled due to new sign in"),await Promise.allSettled([this._previousLogin]),this._logger.info("Creating new session...");let r;t?r=await this.loginWithProgress():r=await this.loginWithoutProgress(),this._logger.info(`Created session ${r.tenantURL}`),this._onboardingSessionEventReporter.reportEvent("signed-in")}catch(r){throw _o.window.showErrorMessage(`Sign in failed. ${He(r)}`),r}}async createOAuthState(){let t=PAe((0,Hy.randomBytes)(32)),r=PAe(Sct(Buffer.from(t))),n=(0,Hy.randomUUID)(),i={codeVerifier:t,codeChallenge:r,state:n,creationTime:new Date().getTime()};return await this._context.secrets.store($k,JSON.stringify(i)),i}async getOAuthState(){let t=await this._context.secrets.get($k);if(t){let r=JSON.parse(t);if(new Date().getTime()-r.creationTime<NAe*60*1e3)return r}return null}async removeOAuthState(){await this._context.secrets.get($k)&&await this._context.secrets.delete($k)}async loginWithoutProgress(){let t=new _o.CancellationTokenSource;return this.login(t.token)}async loginWithProgress(){let t={location:_o.ProgressLocation.Notification,title:"Signing in...",cancellable:!0},r=(n,i)=>(this._previousLogin=this.login(i),this._previousLogin);return _o.window.withProgress(t,r)}async login(t){if(!this._config.config.oauth.url)throw new Error("No OAuth URL defined.");let r=[this.waitForSessionChange(),new Promise((n,i)=>setTimeout(()=>i("Timed out"),NAe*60*1e3)),this.waitForProgrammaticCancellation(),this.waitForCancellation(t,"User cancelled")];try{let n=await this.createOAuthState();return await this.openBrowser(n),await Promise.race(r)}finally{await this.removeOAuthState()}}async openBrowser(t){let r=Wk.join(" "),n=new URLSearchParams({response_type:"code",code_challenge:t.codeChallenge,code_challenge_method:"S256",client_id:this._config.config.oauth.clientID||"",redirect_uri:this.authRedirectURI.toString(),state:t.state,scope:r,prompt:"login"}),i=new URL(`/authorize?${n.toString()}`,this._config.config.oauth.url),s=_o.Uri.parse(i.toString());await _o.env.openExternal(s)}async waitForSessionChange(){let t=await Ou(this._authSession.onDidChangeSession);if(!t)throw new Error("No session");return t}async waitForProgrammaticCancellation(){let t=await Ou(this._programmaticCancellation.event);throw new Error(t)}async waitForCancellation(t,r){throw await Ou(t.onCancellationRequested),new Error(r)}async processAuthRedirect(t){let r=new URLSearchParams(t.query),n=r.get("state");if(!n)throw new Error("No state");let i=await this.getOAuthState();if(!i)throw new Error("No OAuth state found");if(await this.removeOAuthState(),i.state!==n)throw new Error("Unknown state");let s=r.get("error");if(s){let l=[`(${s})`],c=r.get("error_description");throw c&&l.push(c),new Error(`OAuth request failed: ${l.join(" ")}`)}let o=r.get("code");if(!o)throw new Error("No code");let a=r.get("tenant_url");if(a){if(!new URL(a).hostname.endsWith(wct))throw new Error("OAuth request failed: invalid OAuth tenant URL")}else throw new Error("No tenant URL");try{let l=await this._apiServer.getAccessToken(this.authRedirectURI.toString(),a,i.codeVerifier,o);await this._authSession.saveSession(l,a)}catch(l){throw this._logger.error(`Failed to get and save access token: ${He(l)}`),new Error(`If you have a firewall, please add "${a}" to your allowlist.`)}}async handleAuthURI(t){try{await this.processAuthRedirect(t)}catch(r){this._logger.warn("Failed to process auth request:",r),this._programmaticCancellation.fire(He(r))}}};function PAe(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Sct(e){return(0,Hy.createHash)("sha256").update(e).digest()}var c0e=q(VAe()),oG=q($Ae()),Ky=q(require("path")),gi=q(require("vscode")),u0e=require("vscode");var zh=q(require("vscode"));var YAe=q(require("crypto")),Wy=q(require("fs")),fn=q(require("fs/promises")),KAe=q(require("os"));function zAe(e){return e.isFile()?"File":e.isDirectory()?"Directory":"Other"}function $ct(e){return e.isFile()?"File":e.isDirectory()?"Directory":"Other"}function JAe(e){return{size:e.size,type:$ct(e),mtime:Math.floor(e.mtimeMs)}}async function Gy(e){let t=await fn.lstat(e);return JAe(t)}async function jAe(e){try{return await fn.access(e),!0}catch{return!1}}function qr(e){try{return rf(e).type==="File"}catch{return!1}}function Jk(e){try{return rf(e).type==="Directory"}catch{return!1}}async function Pl(e){try{return(await fn.stat(e)).isDirectory()}catch{return!1}}function rf(e){let t=Wy.lstatSync(e);return JAe(t)}async function W_(e){let t=[],r=await fn.readdir(e,{withFileTypes:!0});for(let n of r)t.push([n.name,zAe(n)]);return t}function dm(e){let t=[],r=Wy.readdirSync(e,{withFileTypes:!0});for(let n of r)t.push([n.name,zAe(n)]);return t}async function Ll(e){await fn.mkdir(e,{recursive:!0})}async function tG(e,t){await fn.rename(e,t)}async function jk(e){return await fn.readFile(e)}async function ZAe(e,t){let r=`${e}.${YAe.randomBytes(8).toString("hex")}.tmp`;try{await fn.writeFile(r,t),await fn.rename(r,e)}catch(n){throw await fn.unlink(r),n}}async function Sn(e){return await fn.readFile(e,{encoding:"utf8"})}async function Ul(e,t){return await fn.writeFile(e,t,{encoding:"utf8"})}function XAe(e,t){return Wy.writeFileSync(e,t,{encoding:"utf8"})}async function e0e(e){return await fn.unlink(e)}async function Zk(e){if(!await Pl(e))return;let t=await fn.readdir(e);for(let r of t){let n=Mt(e,r);(await fn.stat(n)).isDirectory()?await Zk(n):await fn.unlink(n)}await fn.rmdir(e)}async function t0e(e){let t=Mt(KAe.tmpdir(),e);return await fn.mkdtemp(t)}function Uc(e,t){zh.commands.executeCommand("setContext",e,t)}var Xk=class e extends X{constructor(r){super();this._extensionContext=r}static storageSubDir="augment-global-state";_fileStorageChangeEmitters=new Map;update(r,n){return this._extensionContext.globalState.update(r,n)}get(r){return this._extensionContext.globalState.get(r)}async save(r,n,i){await this._ensureStorageUriExists(i);let s=this._getFileUri(r,i);await Ul(s.fsPath,JSON.stringify(n));let o=this._fileStorageChangeEmitters.get(r);o&&o.fire({key:r,value:n})}onDidChangeFileStorage(r,n){if(!this._fileStorageChangeEmitters.has(r)){let s=new zh.EventEmitter;this.addDisposable(s),this._fileStorageChangeEmitters.set(r,s)}return this._fileStorageChangeEmitters.get(r).event(n)}dispose(){super.dispose(),this._fileStorageChangeEmitters.clear()}async load(r,n){await this._ensureStorageUriExists(n);let i=this._getFileUri(r,n);try{let s=await Sn(i.fsPath);return JSON.parse(s)}catch{return}}async _ensureStorageUriExists(r){let n=this._getStorageUri(r);await Pl(n.fsPath)||await Ll(n.fsPath)}_getStorageUri(r){return r?.uniquePerWorkspace&&this._extensionContext.storageUri?zh.Uri.joinPath(this._extensionContext.storageUri,e.storageSubDir):zh.Uri.joinPath(this._extensionContext.globalStorageUri,e.storageSubDir)}_getFileUri(r,n){return zh.Uri.joinPath(this._getStorageUri(n),`${r}.json`)}};var K_=q(require("vscode"));var Ln=q(require("path")),rG=q(require("vscode"));var G_=Ln.posix.sep,Kct=new RegExp("/\\/g");function nf(e){return Ln.isAbsolute(e)}function zct(e){return Ln.sep==="\\"?e.replace(Kct,G_):e}function r0e(e){return zct(e)}function $_(e){return e.with({path:Ln.dirname(e.fsPath)})}function n0e(e){return Ln.basename(e)}function qa(e){let t=Ln.dirname(e);return t==="."?"":Jct(t)}function Jct(e){return e.endsWith(G_)?e:e+G_}function $y(e){for(;;){if(e===Ln.sep||e===G_||!e.endsWith(G_)&&!e.endsWith(Ln.sep))return e;e=e.slice(0,-1)}}function Ol(e,t){let r=typeof e=="string"?e:e.fsPath,n=typeof t=="string"?t:t.fsPath;return Ln.relative(r,n)}function sf(e,t){let r=Ol(e,t);return r==="."?"":r.length>0&&!r.endsWith(Ln.sep)?r+Ln.sep:r}function Jh(e,t){let r=Ol(e,t);if(!(r===".."||r.startsWith(".."+Ln.sep)||r.startsWith(".."+Ln.posix.sep)))return r}function ks(e,t){return Jh(e,t)!==void 0}function Yy(e,t){let r=Ol(e,t);return r===""||r==="."||r==="."+Ln.sep||r==="."+Ln.posix.sep}function nG(e){if(Ln.isAbsolute(e))throw new Error(`splitPath: ${e} must be a relative path`);let t=e,r=new Array;for(let n=0;t.length>0;n++){if(n>1e4)throw new Error(`Too-deep or malformed path name ${e}`);let i=Ln.basename(t);i!=="."&&r.push(i);let s=qa(t);if(s===t||s===".")break;t=s}return r.reverse()}async function eM(e,t,r){let n=typeof e=="string"?rG.Uri.file(e):e;for(;;){try{let s=rG.Uri.joinPath(n,t),o=await Gy(s.fsPath);if(r===void 0||o.type===r)return n}catch{}let i=Ln.dirname(n.fsPath);if(Ln.relative(i,n.fsPath).length===0)return;n=n.with({path:i})}}var s0e=require("util"),Oc=q(require("vscode")),Y_=class{constructor(t){this.doc=t}get eol(){return this.doc.eol}get lineCount(){return this.doc.lineCount}getText(t){return this.doc.getText(t)}offsetAt(t){return this.doc.offsetAt(t)}positionAt(t){return this.doc.positionAt(t)}validateRange(t){return this.doc.validateRange(t)}validatePosition(t){return this.doc.validatePosition(t)}getWordRangeAtPosition(t,r){return this.doc.getWordRangeAtPosition(t,r)}lineAt(t){return typeof t=="number"?this.doc.lineAt(t):this.doc.lineAt(t)}},o0e="quiet-background-file",iG=!1;function a0e(){let e=Oc.workspace.registerTextDocumentContentProvider(o0e,{async provideTextDocumentContent(t){return Oc.workspace.fs.readFile(t.with({scheme:"file"})).then(r=>new s0e.TextDecoder("utf-8").decode(r))}});return iG=!0,new Oc.Disposable(()=>{iG=!1,e.dispose()})}async function xo(e){let t;if(typeof e=="string"?t=Oc.Uri.file(e):t=e,!iG||t.scheme!=="file")return Oc.workspace.openTextDocument(t);let r=t.toString();for(let n of Oc.workspace.textDocuments)if(n.uri.scheme===t.scheme&&n.uri.toString()===r)return new Y_(n);return new Promise((n,i)=>{let s=Oc.workspace.onDidOpenTextDocument(o=>{o.uri.scheme===t.scheme&&o.uri.toString()===r&&(s.dispose(),n(new Y_(o)))});Oc.workspace.openTextDocument(t.with({scheme:o0e})).then(o=>{s.dispose(),n(new Y_(o))},o=>{s.dispose(),i(o)})})}function fm(e){let t;if(K_.window.activeTextEditor){let r=K_.window.activeTextEditor.document.uri.fsPath;t=e.getFolderRoot(r)}return t===void 0&&(t=e.getMostRecentlyChangedFolderRoot(),t===void 0&&(t=K_.workspace.workspaceFolders?.[0]?.uri.fsPath)),t}function qu(e,t){if(nf(e)){let i=t.getFolderRoot(e);return i===void 0?void 0:new Le(i,Ol(i,e))}let r=t.findBestWorkspaceRootMatch(e);if(r){let i=r.qualifiedPathName.rootPath;return new Le(i,e)}let n=fm(t);if(n)return new Le(n,e)}async function hm(e,t){let r=qu(e,t)?.absPath;if(r!==void 0)try{return(await xo(r)).getText()}catch{return}}async function l0e(e,t){let r=qu(e,t)?.absPath;if(r!==void 0)try{return(await W_(r)).map(([i,s])=>i)}catch{return}}async function tM(e,t){let r=[];for(let[n,i]of e.entries())if(i.length!==0){r.push(n);try{let s=(await hm(n,t))?.split(`
`)??[];for(let o of i){let a=o.range.start.line+1,l=o.range.end.line+1;r.push(`L${a}-${l}: ${o.message}`);let c=Math.max(0,o.range.start.line-3),u=Math.min(s.length-1,o.range.end.line+3);for(let f=c;f<=u;f++){let p=s[f],g=f+1;r.push(`${String(g).padStart(6)}	${p}`)}r.push("")}}catch{for(let o of i){let a=o.range.start.line+1,l=o.range.end.line+1;r.push(`L${a}-${l}: ${o.message}`)}}}return r.join(`
`)}async function oM(e){let t=e();return!t||!qr(t)?void 0:(await Sn(t)).replace(/^\s+/,"")}async function d0e(e,t){if(!e)return;let r=gi.Uri.joinPath(e,"Augment-Memories").fsPath,n=gi.Uri.joinPath(e,"Agent-Memories").fsPath;if(qr(n))try{if(!qr(r)){let i=await Sn(n);if(i.trim()==="")return;await Ul(r,i),await gi.workspace.fs.delete(gi.Uri.file(n)),t.info("Migrated memories from Agent-Memories to Augment-Memories")}}catch(i){t.error("Error during memories migration:",i)}}var jh=class{static introduction(){return`
Instructions for you:
- Repeat the following markdown without the codeblock
\`\`\`
# \u{1F44B} Meet Auggie

I'm your AI coding assistant. I excel at understanding large, complex codebases but I am happy to chip in on codebases of all sizes.
\`\`\`
`}static gitConfigured(){return"\nInstructions for you:\n- Repeat the following markdown without the codeblock\n```\n## Who are you?\n\nMind if I fetch some information about you from your git configuration:\n```\n- Run `git config user.name` and `git config user.email`\n- Repeat the following text in the codeblock\n```\nHey, {name}, since I am an LLM and I don't have a real memory (sad) I'll be using `\u{1F4E6} Augment Memories`\n```\n        "}static memories(){return`
Instructions for you:
- Repeat the following markdown without the codeblock
\`\`\`
## How I work

* **Augment Memories:** Project-specific memories
  * New folder = clean slate
  * I learn from my mistakes when you correct me
  * You can ask me to remember things (e.g. "commit to memory...")

* **Native Integrations:** Configure integrations like GitHub + Linear with 1-click over in [Settings](command:vscode-augment.showSettingsPanel)
\`\`\`
        `}},iM=class{constructor(t,r){this.shellTool=t;this.workspaceManager=r}timeoutMsec=1e3;async getOnboardingInstructions(){return`System instructions (don't mention them to user):

Basic context:
- Assistant (you) is Augment, a coding agent that I (user) use for the first time
- Assistant (you) is tasked with welcoming and onboarding me to the agent
- Assistant (you) always keeps messages friendly, warm, and welcoming. And nice!

Complete the following instructions.
`+await this._getOnboardingInstructions()}async _getOnboardingInstructions(){try{if(fm(this.workspaceManager)===void 0)throw new Error("Cannot determine current working directory");let[r,n]=await this._getUserNameAndEmail();return r===void 0||n===void 0?jh.introduction()+jh.memories():jh.introduction()+jh.gitConfigured()+jh.memories()}catch{return jh.introduction()}}async _isInsideGitRepo(){return(await this.shellTool.call({command:"git rev-parse --is-inside-work-tree"},[],AbortSignal.timeout(this.timeoutMsec))).text.replace(`
`,"")==="true"}async _getUserNameAndEmail(){let t=await this.shellTool.call({command:"git config user.name"},[],AbortSignal.timeout(this.timeoutMsec)),r=await this.shellTool.call({command:"git config user.email"},[],AbortSignal.timeout(this.timeoutMsec));return t.isError||r.isError?[void 0,void 0]:[t.text.replace(`
`,""),r.text.replace(`
`,"")]}},jct=String.raw`
                     __  __                           _
                    |  \/  |                         (_)
                    | \  / | ___ _ __ ___   ___  _ __ _  ___  ___
                    | |\/| |/ _ \ '_ ' _ \ / _ \| '__| |/ _ \/ __|
                    | |  | |  __/ | | | | | (_) | |  | |  __/\__ \
                    |_|  |_|\___|_| |_| |_|\___/|_|  |_|\___||___/

 .+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.
( Memories help me remember useful details for future interactions.               )
 )                                                                               (
( During Agent sessions, I'll try to create useful Memories automatically.        )
 )Memories can be about your codebase, technologies or your personal preferences.(
(                                                                                 )
 )Your Memories belong to you and are stored locally at the bottom of this file; (
( in the future, we may give you an option to share your memories with others.    )
 )                                                                               (
( NOTE: Memories will be compressed when this file grows too large.               )
 )For personal Memories: consider putting them in User Guidelines (via '@' menu) (
( For repository-level Memories: consider using '.augment-guidelines' file        )
 )Neither will be compressed.                                                    (
(                                                                                 )
 )Happy Coding!                                                                  (
(                                                                                 )
 "+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"+.+"
                  ()
                O
              o
{AUGGIE_LOGO}

 MEMORIES START HERE `,Zct=[String.raw`
      .dKWMMMMMMMMMMMMMMWd                  dWMMMMMMMMMMMMMMWKd.
     :WMMW0OOOOOOOOOOOOOk:                  ckkkkkkkkkkkkkkKMMMW;
     OMMMl                                                  oMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:          .;cc,                   .;c:'           cMMMk
     OMMM:         dWMMMMN;                dMMMMMN,         :MMMO
    :WMMX.         KMMMMMMo                KMMMMMMo         .XMMN;
dOKNMW0o.          .dOKKkc                 .d0KKk:           .o0WMNKOo
:dxOWMNk'                                                    ,kNMWOxd:
    .NMMW.           .oxc                   cxo.            'WMMX.
     OMMM:           .OMMNo'             ,oXMWO.            cMMMk
     OMMM:             'xWMMNOdl::;::ldONMMNx'              cMMMk
     OMMM:                ,lx0XNWMMMWNX0xc,                 cMMMk
     OMMM:                       ...                        cMMMk
     OMMM:                                                  cMMMk
     kMMMx.                                                .xMMMk
     'KMMMWNNNNNNNNNNNNNXd                  dXNNNNNNNNNNNNNWMMMK.
       ;x0KKKKKKKKKKKKKK0;                  ;0KKKKKKKKKKKKKK0x;
`,`
      .dKWMMMMMMMMMMMMMMWd                  dWMMMMMMMMMMMMMMWKd.
     :WMMW0OOOOOOOOOOOOOk:                  ckkkkkkkkkkkkkkKMMMW;
     OMMMl                                                  oMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:          .;cc,                     ,cc;.         cMMMk
     OMMM:         dWMMMMN;                 '0MWWMNo        :MMMO
    :WMMX.         KMMMMMMo               .dWM0,.dWMK,      .XMMN;
dOKNMW0o.          .dOKKkc                ;kd;    .okx.      .o0WMNKOo
:dxOWMNk'                                                    ,kNMWOxd:
    .NMMW.           .oxc                   cxo.            'WMMX.
     OMMM:           .OMMNo'             ,oXMWO.            cMMMk
     OMMM:             'xWMMNOdl::;::ldONMMNx'              cMMMk
     OMMM:                ,lx0XNWMMMWNX0xc,                 cMMMk
     OMMM:                       ...                        cMMMk
     OMMM:                                                  cMMMk
     kMMMx.                                                .xMMMk
     'KMMMWNNNNNNNNNNNNNXd                  dXNNNNNNNNNNNNNWMMMK.
       ;x0KKKKKKKKKKKKKK0;                  ;0KKKKKKKKKKKKKK0x;
`,`
      .dKWMMMMMMMMMMMMMMWd                  dWMMMMMMMMMMMMMMWKd.
     :WMMW0OOOOOOOOOOOOOk:                  ckkkkkkkkkkkkkkKMMMW;
     OMMMl                                                  oMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:                                                  cMMMk
     OMMM:          .;cc,                     ,cc;.         cMMMk
     OMMM:         oWMWMM0'                 '0MWWMNo        :MMMO
    :WMMX.       ,XMWx.,0MWd.             .xWM0,.dWMK,      .XMMN;
dOKNMW0o.        dkl.    ;dkc             ;kd;    .okx.      .o0WMNKOo
:dxOWMNk'                                                    ,kNMWOxd:
    .NMMW.           .oxc                   cxo.            'WMMX.
     OMMM:           .OMMNo'             ,oXMWO.            cMMMk
     OMMM:             'xWMMNOdl::;::ldONMMNx'              cMMMk
     OMMM:                ,lx0XNWMMMWNX0xc,                 cMMMk
     OMMM:                       ...                        cMMMk
     OMMM:                                                  cMMMk
     kMMMx.                                                .xMMMk
     'KMMMWNNNNNNNNNNNNNXd                  dXNNNNNNNNNNNNNWMMMK.
       ;x0KKKKKKKKKKKKKK0;                  ;0KKKKKKKKKKKKKK0x;
`],Xct=Zct.map(e=>jct.replace("{AUGGIE_LOGO}",e)),eut=[String.raw`
                     __  __                           _
                    |  \/  |                         (_)
                    | \  / | ___ _ __ ___   ___  _ __ _  ___  ___
                    | |\/| |/ _ \ '_ ' _ \ / _ \| '__| |/ _ \/ __|
                    | |  | |  __/ | | | | | (_) | |  | |  __/\__ \
                    |_|  |_|\___|_| |_| |_|\___/|_|  |_|\___||___/

 __________________________________________________________________________________
/\                                                                                 \
\_| NOTE: Memories will be compressed when this file grows too large.              |
  | For personal Memories: consider putting them in User Guidelines (via '@' menu) |
  | For repository-level Memories: consider using '.augment-guidelines' file       |
  | Neither will be compressed.                                                    |
  |   _____________________________________________________________________________|_
   \_/_______________________________________________________________________________/

 MEMORIES START HERE `],sG,f0e=gi.window.createTextEditorDecorationType({isWholeLine:!0,before:{contentText:"",fontWeight:"bold"}});function h0e(){return f0e}function aG(e){let t=e[0].split(`
`).length;if(!e.every(r=>r.split(`
`).length===t))throw new Error("All animation frames must have the same number of lines");return t}async function g0e(e,t,r){let n=t();if(!n||e?.document.uri.fsPath!==gi.Uri.file(n).fsPath)return;let i=r.get("memoriesFileOpenCount")??0;await r.update("memoriesFileOpenCount",i+1)}async function dG(e,t,r){let n=p0e(r),i=t();if(!i||e?.document.uri.fsPath!==gi.Uri.file(i).fsPath)return;sG!==void 0&&clearInterval(sG);let s=e.document.getText().replace(/^\s+/,"");s=`
`.repeat(aG(n))+s,await e.edit(c=>{let u=e.document.lineAt(0),f=e.document.lineAt(e.document.lineCount-1),p=new gi.Range(u.range.start,f.range.end);c.replace(p,s)}),await e.document.save();let o=0,a=1e3,l=(0,c0e.default)(()=>{let f=n[o].split(`
`).map((p,g)=>({range:new gi.Range(g,0,g,1e4),renderOptions:{before:{contentText:p.replace(/ /g,"\xA0")}}}));e.setDecorations(f0e,f),o=(o+1)%n.length},a);l(),sG=setInterval(l,a)}function p0e(e){return(e.get("memoriesFileOpenCount")??0)<=3?Xct:eut}function m0e(e,t,r,n,i){if(i.forceMemorySnapshotUpdate(),e.document.uri.fsPath!==r()||!t||t.document!==e.document)return;let s=p0e(n);if(!e.document.getText().startsWith(`
`.repeat(aG(s))))for(let o of e.contentChanges)o.range.start.line<aG(s)&&dG(t,r,n)}var lG=20,cG=class{constructor(t,r,n,i){this.workspaceManager=t;this.apiServer=r;this.logger=n;this.progressTracker=i}toolDefinitions=[{name:"ls",description:"Lists a content of a folder by a relative path to it.",input_schema_json:JSON.stringify({type:"object",properties:{folder:{type:"string",description:"Relative path to a folder. Can be either '.' or './*'"}},required:["folder"]}),tool_safety:Vt.Safe},{name:"read-file",description:"Read a file.",input_schema_json:JSON.stringify({type:"object",properties:{file_path:{type:"string",description:"The path of the file to read."}},required:["file_path"]}),tool_safety:Vt.Safe},{name:"complete",description:"Tool which should be called at the very end to return final response.",input_schema_json:JSON.stringify({type:"object",properties:{response:{type:"string",description:"Final response to the user."}},required:["response"]}),tool_safety:Vt.Safe},{name:"codebase-retrieval",description:"Use this tool to request information from the codebase. It will return relevant snippets for the requested information.",input_schema_json:JSON.stringify({type:"object",properties:{information_request:{type:"string",description:"A description of the information you need."}},required:["information_request"]}),tool_safety:Vt.Safe}];getToolDefinitions(){return this.toolDefinitions}async runTool(t,r){switch(t){case"codebase-retrieval":{let n=this.apiServer.createRequestId(),i=r.information_request;try{let s=await this.apiServer.agentCodebaseRetrieval(n,i,this.workspaceManager.getContext().blobs,[],2e4);return lr(s.formattedRetrieval,n)}catch(s){return this.logger.error(`Failed to retrieve codebase information: ${s}`),ot("Failed to retrieve codebase information.")}}case"ls":{let n=r.folder,i=qu(n,this.workspaceManager)?.absPath;if(i===void 0)return ot(`Failed to list directory: ${n}`);if(!await Pl(i))return ot(`Directory does not exist: ${n}`);try{let o=(await W_(i)).map(([a,l])=>a);return lr(o.join(`
`))}catch{return this.logger.error(`Failed to list directory: ${n}`),ot(`Failed to list directory: ${n}`)}}case"read-file":{let n=r.file_path,i=qu(n,this.workspaceManager)?.absPath;if(i===void 0)return ot(`Failed to read file: ${n}`);if(!qr(i))return ot(`File does not exist: ${n}`);let s=await Sn(i);return s===void 0?(this.logger.error(`Failed to read file: ${n}`),ot(`Failed to read file: ${n}`)):lr(s)}default:return ot(`Unknown tool: ${t}`)}}},uG=class e{constructor(t,r,n,i,s,o,a,l){this.rootAbsPath=t;this.apiServer=r;this.workspaceManager=n;this.featureFlagManager=i;this.logger=s;this.orientationConcurrencyLevel=o;this.progressTracker=a;this.trace=l;if(this.localizationPrompt=this.featureFlagManager.currentFlags.memoriesParams.language_localization_prompt,!this.localizationPrompt)throw this.trace.setFlag(Ft.localizationPromptMissing),new Error("Localization prompt missing");if(this.detectLanguagesPrompt=this.featureFlagManager.currentFlags.memoriesParams.detect_languages_prompt,!this.detectLanguagesPrompt)throw this.trace.setFlag(Ft.detectLanguagesPromptMissing),new Error("Detect languages prompt missing");if(this.orientationCompressionPrompt=this.featureFlagManager.currentFlags.memoriesParams.orientation_compression_prompt,!this.orientationCompressionPrompt)throw this.trace.setFlag(Ft.orientationCompressionPromptMissing),new Error("Orientation compression prompt missing");if(this.orientationMaxLanguages=this.featureFlagManager.currentFlags.memoriesParams.orientation_max_languages,!this.orientationMaxLanguages)throw this.trace.setFlag(Ft.orientationMaxLanguagesMissing),new Error("Orientation max languages missing");if(this.buildTestQuery=this.featureFlagManager.currentFlags.memoriesParams.orientation_build_test_query,!this.buildTestQuery)throw this.trace.setFlag(Ft.orientationBuildTestQueryMissing),new Error("Build test prompt missing");this.queries=[{name:"build-test",template:this.buildTestQuery}],this.tools=new cG(n,r,this.logger,a)}localizationPrompt;detectLanguagesPrompt;orientationCompressionPrompt;orientationMaxLanguages;buildTestQuery;tools;queries;static agentMdPattern=new RegExp("<agent_md>(?:\\s*```(?:\\w+)?\\n?)?(.*?)(?:```\\s*)?</agent_md>","s");async appendToWorkspaceGuidelines(t){let r=this.workspaceManager.getBestFolderRoot();if(!r)throw this.trace.setFlag(Ft.noRootFolderFound),new Error("No root folder found");let n=Ky.default.join(r,".augment-guidelines"),i="";try{qr(n)&&(i=await Sn(n))}catch(l){this.trace.setFlag(Ft.failedToReadGuidelines),this.logger.error(`Failed to read existing guidelines: ${l}`)}let s="",o=i.indexOf(nM),a=i.indexOf(rM);if(o!==-1&&a!==-1&&a>o){let l=i.substring(0,o),c=i.substring(a+rM.length);s=l+nM+`
`+t+`
`+rM+c,this.logger.debug("Replacing existing orientation results between markers")}else{let l=i.trim().length>0?`

`:"";s=i.trim()+l+nM+`
`+t+`
`+rM,this.logger.debug("Appending new orientation results with markers")}try{await gi.workspace.fs.writeFile(gi.Uri.file(n),Buffer.from(s,"utf8")),this.logger.debug(`Successfully updated workspace guidelines at ${n}`)}catch(l){throw this.trace.setFlag(Ft.failedToWriteGuidelines),new Error(`Failed to write workspace guidelines: ${l}`)}}async run(){let{languages:t,allFiles:r}=await this.getTopProgrammingLanguages();if(Object.keys(t).length===0)throw new Error("No programming languages detected");this.progressTracker.set(10);let n=await this.localizeLanguages(r,t);this.progressTracker.set(25);let i=(await l0e(".",this.workspaceManager))?.join(`
`);if(!i)throw this.trace.setFlag(Ft.failedToListRootFolder),new Error("Failed to list root folder");this.progressTracker.set(30);let s=(0,oG.default)(this.orientationConcurrencyLevel),o=Object.keys(t),l=60/o.length/this.queries.length;this.trace.setFlag(Ft.agenticStarted);let c=o.map((v,C)=>s(async()=>{this.logger.debug(`Processing language: ${v}`);let E=[];for(let w of this.queries){this.logger.debug(`Processing query: ${w.name}`);let B=w.template.replace(/{language}/g,v).replace(/{rootFolderContent}/g,i).replace(/{locationList}/g,n[v].split(",").join(`
`)),R=await this.doAgenticTurn(B,l,C);E.push(R),this.logger.debug(`Response language "${v}" and query "${w.name}": ${R}`)}return E})),u=await Promise.all(c);this.trace.setFlag(Ft.agenticEnded);let f=u.flat().join(`

`);this.trace.setStringStats(Ft.agenticModelResponseStats,f),this.progressTracker.set(90);let p=this.apiServer.createRequestId();this.trace.setRequestId(Ft.compressionRequestId,p);let g=await this.simpleLlmCall(this.orientationCompressionPrompt.replace(/{assembledKnowledge}/g,f),p);this.trace.setStringStats(Ft.compressionModelResponseStats,g);let m=g.match(e.agentMdPattern);if(!m)throw this.trace.setFlag(Ft.compressionParsingFailed),new Error("Failed to parse compression response");let y=m[1].trim();this.logger.debug(`Compressed knowledge: ${y}`),this.progressTracker.set(95),this.trace.setFlag(Ft.rememberStarted),await this.appendToWorkspaceGuidelines(y),this.trace.setFlag(Ft.rememberEnded),this.progressTracker.set(100)}async doAgenticTurn(t,r,n){let i=t,s=[],o=[],a={request_message:i,response_text:"",request_id:this.apiServer.createRequestId(),request_nodes:[],response_nodes:[]},l,c=25,u=c+2,f=r/u,p=0;do{if(this.trace.setNum(`agenticNumTurns_${n}`,p),p>c){if(p>u)throw new Error("Too many turns in agentic loop");s=[...s,{id:2,type:ho.TEXT,text_node:{content:"You did too many turns already. Call `complete` tool immediately."}}]}this.logger.debug(`Running agentic turn ${p}.`),this.progressTracker.inc(f);let g=this.apiServer.createRequestId(),m=await mp(i,g,o,this.tools.getToolDefinitions(),s,Xr.agent);for await(let y of m)if(y.nodes){let v=y.nodes.filter(C=>C.type===dc.TOOL_USE||C.type===dc.RAW_RESPONSE);a.response_nodes=a.response_nodes||[],a.response_nodes.push(...v)}if(l=a.response_nodes?.find(y=>y.type===dc.TOOL_USE),l?.tool_use!==void 0){let y=l.tool_use,v=y.tool_name,C=JSON.parse(y.input_json);if(this.logger.debug(`Calling tool: ${v}. Args: ${JSON.stringify(C)}`),v==="complete")return this.logger.debug(`Agentic turn complete. Took ${p} turns.`),this.progressTracker.inc(f*(u-p-1)),this.trace.setStringStats(`agenticModelResponseStats_${n}`,C.response),C.response;let E=await this.tools.runTool(y.tool_name,C);s=[{id:1,type:ho.TOOL_RESULT,tool_result_node:{tool_use_id:y.tool_use_id,content:E.text,is_error:E.isError}}],this.logger.debug(`Tool result: ${E.text.trim().split(`
`)[0]}...`),i="",o.push(a),a={request_message:"",response_text:"",request_id:this.apiServer.createRequestId(),request_nodes:s,response_nodes:[]}}p++}while(l?.tool_use!==void 0);throw this.trace.setFlag(`agenticFailedToComplete_${n}`),new Error("Agent didn't call the complete tool.")}async localizeLanguages(t,r){let n={},i=(0,oG.default)(this.orientationConcurrencyLevel),o=15/Object.keys(r).length;this.trace.setFlag(Ft.localizationStarted);let a=Object.entries(r).map(([c,u],f)=>i(async()=>{this.logger.debug(`Localizing language: ${c} (index: ${f})`);let p=tut(t,u);if(p.trim().length===0)throw new Error(`Failed to render folder tree for ${c}`);let g=this.localizationPrompt.replace(/{programmingLanguage}/g,c).replace(/{languageTree}/g,p);this.trace.setStringStats(`localizationPromptStats_${f}`,g);let m=this.apiServer.createRequestId();this.trace.setRequestId(`localizationRequestId_${f}`,m);let y=await this.simpleLlmCall(g,m);this.trace.setStringStats(`localizationResponseStats_${f}`,y);let v=y.match(/<locations>(.*?)<\/locations>/);if(!v)throw this.trace.setFlag(`localizationParsingFailed_${f}`),new Error(`Failed to extract locations from response: ${y}`);return this.progressTracker.inc(o),{language:c,locations:v[1].trim()}})),l=await Promise.all(a);return this.trace.setFlag(Ft.localizationEnded),l.forEach(({language:c,locations:u},f)=>{let p=u.split(",").length;this.trace.setNum(`localizationNumLocations_${f}`,p),n[c]=u}),n}async getTopProgrammingLanguages(){let t=new Set(["ad","adown","argdown","argdn","bicep","c","cpp","cc","cp","cxx","h","hpp","hxx","cs","ex","elm","erb","rhtml","gd","godot","tres","tscn","go","haml","hs","hx","html","htm","java","js","jsx","kt","ml","mli","mll","mly","php","py","r","rb","rs","res","resi","sass","scala","styl","swift","tf","tfvars","ts","tsx","vue","vala"]),r={},n=[],i=async g=>{let m=await W_(g);if(m)for(let[y,v]of m){if(y.startsWith("."))continue;let C=Ky.default.join(g,y);if(v==="Directory")await i(C);else if(v==="File"){let E=Ky.default.relative(this.rootAbsPath,C);n.push(E);let w=y.includes(".")?y.split(".").pop().toLowerCase():"";w&&t.has(w)&&(r[w]=(r[w]||0)+1)}}};await i(this.rootAbsPath),this.trace.setNum(Ft.topLanguagesNumFiles,n.length);let s=Object.values(r).reduce((g,m)=>g+m,0);if(this.trace.setNum(Ft.topLanguagesNumCodeFiles,s),s<lG)throw Error("Not enough code files to run orientation");let o=Object.entries(r).sort(([,g],[,m])=>m-g).slice(0,20).map(([g,m])=>`${g}: ${m}`).join(`
`),a=this.apiServer.createRequestId();this.trace.setRequestId(Ft.topLanguagesRequestId,a);let l=await this.simpleLlmCall(this.detectLanguagesPrompt.replace(/{fileExtensionsList}/g,o),a);this.trace.setStringStats(Ft.topLanguagesModelResponseStats,l),this.logger.debug(`Detected languages: "${l}"`);let c=JSON.parse(l.trim());this.trace.setNum(Ft.topLanguagesNumDetectedLanguages,Object.keys(c).length);let u={};for(let[g,m]of Object.entries(c))u[g]=m.reduce((y,v)=>y+(r[v]||0),0),this.logger.debug(`${g}: ${u[g]} files`);let f=Object.entries(u).sort(([,g],[,m])=>m-g).slice(0,this.orientationMaxLanguages).map(([g])=>g),p={};for(let g of f)p[g]=c[g];return this.logger.debug(`Top ${this.orientationMaxLanguages} languages: ${JSON.stringify(p)}`),this.trace.setNum(Ft.topLanguagesNumFinalLanguages,Object.keys(p).length),{languages:p,allFiles:n}}async simpleLlmCall(t,r){let n=await mp(t,r,[],[],[],Xr.orientation);for await(let i of n)if(i.nodes){for(let s of i.nodes)if(s.type===dc.RAW_RESPONSE)return s.content}throw new Error("No response from model")}};function A0e(e,t="",r=!0,n="",i=0,s=3){if(i>s)return"";let o=[];if(n){let c=e.isDirectory?`${n}/`:n;o.push(`${t}${r?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 "}${c}`)}let a=t+(r?"    ":"\u2502   "),l=Array.from(e.children.entries()).sort(([c],[u])=>c.localeCompare(u));return l.forEach(([c,u],f)=>{let p=f===l.length-1,g=A0e(u,a,p,c,i+1,s);g&&o.push(g)}),o.join(`
`)}function tut(e,t){let r=e.filter(i=>{let s=i.split(".").pop()?.toLowerCase();return s&&t.includes(s)});if(r.length===0)return"";let n={isDirectory:!0,children:new Map};for(let i of r){let o=gi.workspace.asRelativePath(i).split(Ky.default.sep),a=n;for(let l=0;l<o.length-1;l++){let c=o[l];a.children.has(c)||a.children.set(c,{isDirectory:!0,children:new Map}),a=a.children.get(c)}}return n.children.size===0?"":A0e(n)}var of={state:"idle"},y0e=new u0e.EventEmitter,aM=y0e.event;function Vu(){y0e.fire(of)}var sM="orientation.runCount",nM="[//]: # (AUGMENT-CODEBASE-ORIENTATION-RESULTS-START)",rM="[//]: # (AUGMENT-CODEBASE-ORIENTATION-RESULTS-END)";async function v0e(e,t,r,n,i){try{let s=i.get(sM)||0;if(await i.update(sM,s+1),s>0)return;let o=t.getBestFolderRoot();if(!o)throw Error("Root of the project is `undefined`.");let a=Ky.default.join(o,".augment-guidelines");if(qr(a)){let l=await Sn(a);if(l&&l.includes(nM))return}await z_(e,t,r,n,rh.automaticAfterIndexing)}catch{j("AutomaticOrientation").error("Error running automatic orientation.")}}async function z_(e,t,r,n,i){if(of.state==="in-progress"){gi.window.showInformationMessage("Augment Agent orientation is already in progress");return}let s=j("InitialOrientation"),o=bB.create(i);o.setFlag(Ft.start);try{of={state:"in-progress",progress:0,lastRunTimestamp:Date.now()},Vu(),await rut(e,t,r,n,s,o),of={state:"succeeded",progress:100,lastRunTimestamp:Date.now()},Vu()}catch(a){o.setFlag(Ft.exceptionThrown),s.error(`Error in initial orientation: ${a}`);let l="",c="failed",u=o.getNum(Ft.topLanguagesNumCodeFiles)??lG;u===0?(c="aborted",l="Code files were not found"):u<lG?(c="aborted",l="Repository is too small"):o.getFlag(Ft.compressionParsingFailed)?l="Error code #1002":o.getFlag(Ft.localizationStarted)&&!o.getFlag(Ft.localizationEnded)?l="Error code #1003":o.getFlag(Ft.agenticStarted)&&!o.getFlag(Ft.agenticEnded)?l="Error code #1004":o.getFlag(Ft.rememberStarted)&&!o.getFlag(Ft.rememberEnded)&&(l="Error code #1005"),of={state:c,progress:0,lastRunTimestamp:Date.now(),errorMessage:l},Vu()}finally{o.setFlag(Ft.end),Mr().reportEvent({eventName:Qr.initialOrientation,conversationId:"",eventData:{initialOrientationData:o}})}}async function rut(e,t,r,n,i,s){i.debug("Starting initial orientation process.");let o=r.currentFlags.memoriesParams?.orientation_concurrency_level;if(!o)throw s.setFlag(Ft.concurrencyLevelMissing),Error("Failed to get concurrency level for initial orientation.");if(!r.currentFlags.memoriesParams?.enable_initial_orientation)throw s.setFlag(Ft.initialOrientationDisabled),Error("Initial orientation is not enabled.");let a=l=>{let c=0;return{inc:u=>{of.state!=="failed"&&(c=Math.min(c+u,100),l.report({increment:0,message:`${Math.round(c)}%`}),of={state:"in-progress",progress:Math.round(c),lastRunTimestamp:Date.now()},Vu())},set:u=>{u<=c||(u=Math.min(u,100),c=u,l.report({increment:0,message:`${Math.round(c)}%`}),of={state:"in-progress",progress:Math.round(c),lastRunTimestamp:Date.now()},Vu())},reset:()=>{l.report({increment:0,message:"0%"}),c=0,of={state:"in-progress",progress:0,lastRunTimestamp:Date.now()},Vu()}}};await gi.window.withProgress({location:gi.ProgressLocation.Window,title:"Augment Codebase Orientation"},async(l,c)=>{let u=a(l);u.reset(),await C0e(e,t,r,n,i,o,u,s)})}async function C0e(e,t,r,n,i,s,o,a){o.set(1);try{let l=t.getBestFolderRoot();if(!l)throw a.setFlag(Ft.noRootFolderFound),new Error("No root folder found");i.debug(`Root folder: ${l}.`),o.set(2),o.set(3);let c=new uG(l,e,t,r,i,s,o,a);o.set(5),await c.run(),o.set(100),gi.window.showInformationMessage("Augment Agent completed orientation process. Workspace guidelines were updated!")}catch(l){if(s>1&&Sr.isAPIErrorWithStatus(l,$e.resourceExhausted)){a.setFlag(Ft.retryWithLowerConcurrencyLevel),gi.window.showErrorMessage("Augment agent orientation process failed: Rate limit exceeded. Retrying..."),i.error("Retrying initial orientation with concurrency level 1."),await new Promise(c=>setTimeout(c,5e3)),o.reset(),await C0e(e,t,r,n,i,1,o,a);return}throw l}}var b0e=e=>{let t=e.length-1,r=0;for(;t>=0;){let n=e[t];if(r+=JSON.stringify(n).length,r>8e5)break;t--}return e.slice(t+1)},E0e=e=>{let t=266666.6666666667,r=[0],n=0;for(let s=0;s<e.length;s++){let o=e[s],a=JSON.stringify(o).length;n+a>t&&(r.push(s),n=0),n+=a}if(r.length<4)return e;let i=2*Math.floor((r.length-2)/2);return e.slice(r[i])};function nut(e){return e.split(/\r?\n/)}function iut(e,t){e=e||"",t=t||"";let r=$f(e,t),n=[],i=1,s=1,o=null;for(let a of r){let l=nut(a.value),c=a.count||(l.length>0?l.length-(a.value.endsWith(`
`)?0:1):0);c!==0&&(a.added||a.removed?(o?a.removed?o.before_text+=a.value:a.added&&(o.after_text+=a.value):o={before_line_start:i,before_text:a.removed?a.value:"",after_line_start:s,after_text:a.added?a.value:""},a.removed?i+=c:a.added&&(s+=c)):(o&&(n.push(o),o=null),i+=c,s+=c))}return o&&n.push(o),n}function sut(e,t,r){let n=iut(e.originalCode,e.modifiedCode);return{path:e.filePath.absPath,before_blob_name:t,after_blob_name:r,edits:n}}function out(e,t,r){return{edit_events:e.files.filter(i=>i.changesSummary.totalAddedLines>0||i.changesSummary.totalRemovedLines>0).map(i=>{let s=i.changeDocument,o=t?t(s):{beforeBlobName:void 0,afterBlobName:void 0};return sut(s,o.beforeBlobName,o.afterBlobName)}),source:r}}function _0e(e,t,r,n){return{id:e%2**31,type:ho.EDIT_EVENTS,edit_events_node:out(t,r,n)}}var Gve=q(require("vscode"));var fG=class{_status="running";_buffer=new Array;_triggerYield;_resolveFn;_rejectFn;constructor(t){this._triggerYield=new Promise((r,n)=>{this._resolveFn=r,this._rejectFn=n}),this.collectBaseGenerator(t)}cancel=()=>{this.isFinished||this._reject(new Error("Cancelled"))};get isFinished(){return this._status!=="running"}get hasErrored(){return this._status==="errored"}collectBaseGenerator=async t=>{try{this._resolve(),this._triggerYield=new Promise((r,n)=>{this._resolveFn=r,this._rejectFn=n});for await(let r of t)this._buffer.push(r),this._resolve(),this._triggerYield=new Promise((n,i)=>{this._resolveFn=n,this._rejectFn=i});this._status="success",this._resolve()}catch(r){this._reject(r)}};_reject=t=>{this._status="errored",this._rejectFn(t)};_resolve=()=>{this._resolveFn()};async*copy(){let t=0;for(;;){if(t<this._buffer.length){yield this._buffer[t],t+=1;continue}if(await this._triggerYield,t===this._buffer.length&&this.isFinished)return}}};var gm=fG;var Qi=q(require("vscode"));var J_=q(require("vscode"));function x0e(e,t,r=!1,n=!0){let i=new J_.Position(e.start.line,0),s=e.end.line;n&&e.end.character===0&&s>e.start.line&&(s-=1);let o=t.lineAt(s).range.end;return r&&t.lineCount>e.end.line+1&&(o=new J_.Position(e.end.line+1,0)),new J_.Range(i,o)}function w0e(e){return e?(e.selections=e.selections.map(t=>{if(e.document.getText(t).trim()==="")return t;let n=x0e(t,e.document);return t.active.isBefore(t.anchor)?new Qi.Selection(n.end,n.start):new Qi.Selection(n.start,n.end)}),!0):!1}function S0e(){let e=Qi.window.activeTextEditor;if(!e)return[];let{document:t,selection:r}=e,n=[];return r.isEmpty||(n=Qi.languages.getDiagnostics(t.uri).filter(o=>o.range.intersection(r)).map(o=>({location:{path:t.fileName,line_start:o.range.start.line,line_end:o.range.end.line},char_start:0,char_end:0,blob_name:"",current_blob_name:"",message:o.message,severity:(()=>{switch(o.severity){case Qi.DiagnosticSeverity.Error:return"ERROR";case Qi.DiagnosticSeverity.Warning:return"WARNING";case Qi.DiagnosticSeverity.Information:return"INFORMATION";case Qi.DiagnosticSeverity.Hint:return"HINT";default:return"ERROR"}})()}))),n}function hG(e,t,r,n){if(!e)return null;let{document:i,selection:s}=e,o=t.safeResolvePathName(i.uri);if(!o)return j("getSelectedCodeDetails").error("Unable to resolve path name for document"),null;let a=i.languageId,l=i.lineAt(0).range.start,c=i.lineAt(i.lineCount-1).range.end,u=i.getText(s),f,p;if(u.trim()===""){let y=new Qi.Position(s.active.line+1,0);f=new Qi.Range(l,y),p=new Qi.Range(y,c)}else f=new Qi.Range(l,s.start),p=new Qi.Range(s.end,c);var g=i.getText(f),m=i.getText(p);return g.length>r&&(g=g.slice(g.length-r)),m.length>n&&(m=m.slice(0,n)),m.trim()===""&&(u+=m,m=""),{selectedCode:u,prefix:g,suffix:m,path:o.relPath,language:a,prefixBegin:f.start.character,suffixEnd:p.end.character}}var FG=q(require("fs")),Zh=q(require("os")),mm=q(require("path")),yM=q(Ave()),ix=q(require("vscode"));var kG=Zh.default.platform(),tht=j("AugmentEnvironment");function yve(){let e;return kG==="win32"&&process.env.APPDATA?e=mm.default.join(process.env.APPDATA,"Code","User"):kG==="darwin"?e=mm.default.join(Zh.default.homedir(),"Library","Application Support","Code","User"):kG==="linux"&&(e=mm.default.join(Zh.default.homedir(),".config","Code","User")),e&&FG.default.existsSync(e)?e:null}function vve(){let e=Zh.default.homedir(),t;return Zh.default.platform()==="win32"?t=mm.default.join(e,"Documents"):Zh.default.platform()==="darwin"?t=mm.default.join(e,"Documents"):Zh.default.platform()==="linux"&&(t=mm.default.join(e,"Documents")),t&&FG.default.existsSync(t)?t:null}var MG;function Am(){return MG===void 0&&(MG=ix.extensions.getExtension("Augment.vscode-augment")?.packageJSON??null),MG}var Cve="0.0.3141592";function gr(e,t=Am()?.version){return!t||e===""?!1:yM.default.gte(t,e)||t===Cve}function Ks(e){try{return yM.default.gte(ix.version,e)}catch{return tht.error(`Failed to parse vscode version: ${ix.version}`),!1}}function rht(e=Am()?.version){return e===Cve}function vM(e=Am()?.version){return!e||rht(e)?0:yM.default.parse(e)?.patch??0}function nht(e,t,r,n,i,s,o){return{blob_name:e,path:t,char_start:r,char_end:n,replacement_text:i,present_in_blob:s,expected_blob_name:o}}function jy(e){return e.map(t=>nht(t.blobName,t.pathName,t.origStart,t.origStart+t.origLength,t.text,t.uploaded,t.expectedBlobName))}function lf(e){return Array.isArray?Array.isArray(e):Dve(e)==="[object Array]"}var iht=1/0;function sht(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-iht?"-0":t}function oht(e){return e==null?"":sht(e)}function Hu(e){return typeof e=="string"}function Ive(e){return typeof e=="number"}function aht(e){return e===!0||e===!1||lht(e)&&Dve(e)=="[object Boolean]"}function Bve(e){return typeof e=="object"}function lht(e){return Bve(e)&&e!==null}function Va(e){return e!=null}function QG(e){return!e.trim().length}function Dve(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var cht="Incorrect 'index' type",uht=e=>`Invalid value for key ${e}`,dht=e=>`Pattern length exceeds max of ${e}.`,fht=e=>`Missing ${e} property in key`,hht=e=>`Property 'weight' in key '${e}' must be a positive integer`,Eve=Object.prototype.hasOwnProperty,NG=class{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let i=Tve(n);this._keys.push(i),this._keyMap[i.id]=i,r+=i.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Tve(e){let t=null,r=null,n=null,i=1,s=null;if(Hu(e)||lf(e))n=e,t=_ve(e),r=PG(e);else{if(!Eve.call(e,"name"))throw new Error(fht("name"));let o=e.name;if(n=o,Eve.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(hht(o));t=_ve(o),r=PG(o),s=e.getFn}return{path:t,id:r,weight:i,src:n,getFn:s}}function _ve(e){return lf(e)?e:e.split(".")}function PG(e){return lf(e)?e.join("."):e}function ght(e,t){let r=[],n=!1,i=(s,o,a)=>{if(Va(s))if(!o[a])r.push(s);else{let l=o[a],c=s[l];if(!Va(c))return;if(a===o.length-1&&(Hu(c)||Ive(c)||aht(c)))r.push(oht(c));else if(lf(c)){n=!0;for(let u=0,f=c.length;u<f;u+=1)i(c[u],o,a+1)}else o.length&&i(c,o,a+1)}};return i(e,Hu(t)?t.split("."):t,0),n?r:r[0]}var pht={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},mht={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Aht={location:0,threshold:.6,distance:100},yht={useExtendedSearch:!1,getFn:ght,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},Dt={...mht,...pht,...Aht,...yht},vht=/[^ ]+/g;function Cht(e=1,t=3){let r=new Map,n=Math.pow(10,t);return{get(i){let s=i.match(vht).length;if(r.has(s))return r.get(s);let o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return r.set(s,a),a},clear(){r.clear()}}}var sx=class{constructor({getFn:t=Dt.getFn,fieldNormWeight:r=Dt.fieldNormWeight}={}){this.norm=Cht(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Hu(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){let r=this.size();Hu(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!Va(t)||QG(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Va(o)){if(lf(o)){let a=[],l=[{nestedArrIndex:-1,value:o}];for(;l.length;){let{nestedArrIndex:c,value:u}=l.pop();if(Va(u))if(Hu(u)&&!QG(u)){let f={v:u,i:c,n:this.norm.get(u)};a.push(f)}else lf(u)&&u.forEach((f,p)=>{l.push({nestedArrIndex:p,value:f})})}n.$[s]=a}else if(Hu(o)&&!QG(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function Rve(e,t,{getFn:r=Dt.getFn,fieldNormWeight:n=Dt.fieldNormWeight}={}){let i=new sx({getFn:r,fieldNormWeight:n});return i.setKeys(e.map(Tve)),i.setSources(t),i.create(),i}function bht(e,{getFn:t=Dt.getFn,fieldNormWeight:r=Dt.fieldNormWeight}={}){let{keys:n,records:i}=e,s=new sx({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(i),s}function CM(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:i=Dt.distance,ignoreLocation:s=Dt.ignoreLocation}={}){let o=t/e.length;if(s)return o;let a=Math.abs(n-r);return i?o+a/i:a?1:o}function Eht(e=[],t=Dt.minMatchCharLength){let r=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=t&&r.push([n,i]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}var ym=32;function _ht(e,t,r,{location:n=Dt.location,distance:i=Dt.distance,threshold:s=Dt.threshold,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:a=Dt.minMatchCharLength,includeMatches:l=Dt.includeMatches,ignoreLocation:c=Dt.ignoreLocation}={}){if(t.length>ym)throw new Error(dht(ym));let u=t.length,f=e.length,p=Math.max(0,Math.min(n,f)),g=s,m=p,y=a>1||l,v=y?Array(f):[],C;for(;(C=e.indexOf(t,m))>-1;){let W=CM(t,{currentLocation:C,expectedLocation:p,distance:i,ignoreLocation:c});if(g=Math.min(W,g),m=C+u,y){let Z=0;for(;Z<u;)v[C+Z]=1,Z+=1}}m=-1;let E=[],w=1,B=u+f,R=1<<u-1;for(let W=0;W<u;W+=1){let Z=0,te=B;for(;Z<te;)CM(t,{errors:W,currentLocation:p+te,expectedLocation:p,distance:i,ignoreLocation:c})<=g?Z=te:B=te,te=Math.floor((B-Z)/2+Z);B=te;let Y=Math.max(1,p-te+1),U=o?f:Math.min(p+te,f)+u,ce=Array(U+2);ce[U+1]=(1<<W)-1;for(let Q=U;Q>=Y;Q-=1){let se=Q-1,z=r[e.charAt(se)];if(y&&(v[se]=+!!z),ce[Q]=(ce[Q+1]<<1|1)&z,W&&(ce[Q]|=(E[Q+1]|E[Q])<<1|1|E[Q+1]),ce[Q]&R&&(w=CM(t,{errors:W,currentLocation:se,expectedLocation:p,distance:i,ignoreLocation:c}),w<=g)){if(g=w,m=se,m<=p)break;Y=Math.max(1,2*p-m)}}if(CM(t,{errors:W+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:c})>g)break;E=ce}let N={isMatch:m>=0,score:Math.max(.001,w)};if(y){let W=Eht(v,a);W.length?l&&(N.indices=W):N.isMatch=!1}return N}function xht(e){let t={};for(let r=0,n=e.length;r<n;r+=1){let i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}var bM=class{constructor(t,{location:r=Dt.location,threshold:n=Dt.threshold,distance:i=Dt.distance,includeMatches:s=Dt.includeMatches,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:a=Dt.minMatchCharLength,isCaseSensitive:l=Dt.isCaseSensitive,ignoreLocation:c=Dt.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let u=(p,g)=>{this.chunks.push({pattern:p,alphabet:xht(p),startIndex:g})},f=this.pattern.length;if(f>ym){let p=0,g=f%ym,m=f-g;for(;p<m;)u(this.pattern.substr(p,ym),p),p+=ym;if(g){let y=f-ym;u(this.pattern.substr(y),y)}}else u(this.pattern,0)}searchIn(t){let{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let m={isMatch:!0,score:0};return n&&(m.indices=[[0,t.length-1]]),m}let{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options,u=[],f=0,p=!1;this.chunks.forEach(({pattern:m,alphabet:y,startIndex:v})=>{let{isMatch:C,score:E,indices:w}=_ht(t,m,y,{location:i+v,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});C&&(p=!0),f+=E,C&&w&&(u=[...u,...w])});let g={isMatch:p,score:p?f/this.chunks.length:1};return p&&n&&(g.indices=u),g}},Wu=class{constructor(t){this.pattern=t}static isMultiMatch(t){return xve(t,this.multiRegex)}static isSingleMatch(t){return xve(t,this.singleRegex)}search(){}};function xve(e,t){let r=e.match(t);return r?r[1]:null}var LG=class extends Wu{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},UG=class extends Wu{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},OG=class extends Wu{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},qG=class extends Wu{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},VG=class extends Wu{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},HG=class extends Wu{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},EM=class extends Wu{constructor(t,{location:r=Dt.location,threshold:n=Dt.threshold,distance:i=Dt.distance,includeMatches:s=Dt.includeMatches,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:a=Dt.minMatchCharLength,isCaseSensitive:l=Dt.isCaseSensitive,ignoreLocation:c=Dt.ignoreLocation}={}){super(t),this._bitapSearch=new bM(t,{location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},_M=class extends Wu{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n,i=[],s=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+s,i.push([n,r-1]);let o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}},WG=[LG,_M,OG,qG,HG,VG,UG,EM],wve=WG.length,wht=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Sht="|";function Iht(e,t={}){return e.split(Sht).map(r=>{let n=r.trim().split(wht).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){let a=n[s],l=!1,c=-1;for(;!l&&++c<wve;){let u=WG[c],f=u.isMultiMatch(a);f&&(i.push(new u(f,t)),l=!0)}if(!l)for(c=-1;++c<wve;){let u=WG[c],f=u.isSingleMatch(a);if(f){i.push(new u(f,t));break}}}return i})}var Bht=new Set([EM.type,_M.type]),GG=class{constructor(t,{isCaseSensitive:r=Dt.isCaseSensitive,includeMatches:n=Dt.includeMatches,minMatchCharLength:i=Dt.minMatchCharLength,ignoreLocation:s=Dt.ignoreLocation,findAllMatches:o=Dt.findAllMatches,location:a=Dt.location,threshold:l=Dt.threshold,distance:c=Dt.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:c},this.pattern=r?t:t.toLowerCase(),this.query=Iht(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){let r=this.query;if(!r)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,o=[],a=0;for(let l=0,c=r.length;l<c;l+=1){let u=r[l];o.length=0,s=0;for(let f=0,p=u.length;f<p;f+=1){let g=u[f],{isMatch:m,indices:y,score:v}=g.search(t);if(m){if(s+=1,a+=v,n){let C=g.constructor.type;Bht.has(C)?o=[...o,...y]:o.push(y)}}else{a=0,s=0,o.length=0;break}}if(s){let f={isMatch:!0,score:a/s};return n&&(f.indices=o),f}}return{isMatch:!1,score:1}}},$G=[];function Dht(...e){$G.push(...e)}function YG(e,t){for(let r=0,n=$G.length;r<n;r+=1){let i=$G[r];if(i.condition(e,t))return new i(e,t)}return new bM(e,t)}var xM={AND:"$and",OR:"$or"},KG={PATH:"$path",PATTERN:"$val"},zG=e=>!!(e[xM.AND]||e[xM.OR]),Tht=e=>!!e[KG.PATH],Rht=e=>!lf(e)&&Bve(e)&&!zG(e),Sve=e=>({[xM.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function kve(e,t,{auto:r=!0}={}){let n=i=>{let s=Object.keys(i),o=Tht(i);if(!o&&s.length>1&&!zG(i))return n(Sve(i));if(Rht(i)){let l=o?i[KG.PATH]:s[0],c=o?i[KG.PATTERN]:i[l];if(!Hu(c))throw new Error(uht(l));let u={keyId:PG(l),pattern:c};return r&&(u.searcher=YG(c,t)),u}let a={children:[],operator:s[0]};return s.forEach(l=>{let c=i[l];lf(c)&&c.forEach(u=>{a.children.push(n(u))})}),a};return zG(e)||(e=Sve(e)),n(e)}function kht(e,{ignoreFieldNorm:t=Dt.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:i,norm:s,score:o})=>{let a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),r.score=n})}function Mht(e,t){let r=e.matches;t.matches=[],Va(r)&&r.forEach(n=>{if(!Va(n.indices)||!n.indices.length)return;let{indices:i,value:s}=n,o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),t.matches.push(o)})}function Fht(e,t){t.score=e.score}function Qht(e,t,{includeMatches:r=Dt.includeMatches,includeScore:n=Dt.includeScore}={}){let i=[];return r&&i.push(Mht),n&&i.push(Fht),e.map(s=>{let{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}var Io=class{constructor(t,r={},n){this.options={...Dt,...r},this.options.useExtendedSearch,this._keyStore=new NG(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof sx))throw new Error(cht);this._myIndex=r||Rve(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Va(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let r=[];for(let n=0,i=this._docs.length;n<i;n+=1){let s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,i-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){let{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options,l=Hu(t)?Hu(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return kht(l,{ignoreFieldNorm:a}),s&&l.sort(o),Ive(r)&&r>-1&&(l=l.slice(0,r)),Qht(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(t){let r=YG(t,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Va(s))return;let{isMatch:l,score:c,indices:u}=r.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:c,value:s,norm:a,indices:u}]})}),i}_searchLogical(t){let r=kve(t,this.options),n=(a,l,c)=>{if(!a.children){let{keyId:f,searcher:p}=a,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:p});return g&&g.length?[{idx:c,item:l,matches:g}]:[]}let u=[];for(let f=0,p=a.children.length;f<p;f+=1){let g=a.children[f],m=n(g,l,c);if(m.length)u.push(...m);else if(a.operator===xM.AND)return[]}return u},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Va(a)){let c=n(r,a,l);c.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),c.forEach(({matches:u})=>{s[l].matches.push(...u)}))}}),o}_searchObjectList(t){let r=YG(t,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Va(o))return;let l=[];n.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:o[u],searcher:r}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:t,value:r,searcher:n}){if(!Va(r))return[];let i=[];if(lf(r))r.forEach(({v:s,i:o,n:a})=>{if(!Va(s))return;let{isMatch:l,score:c,indices:u}=n.searchIn(s);l&&i.push({score:c,key:t,value:s,idx:o,norm:a,indices:u})});else{let{v:s,n:o}=r,{isMatch:a,score:l,indices:c}=n.searchIn(s);a&&i.push({score:l,key:t,value:s,norm:o,indices:c})}return i}};Io.version="7.0.0";Io.createIndex=Rve;Io.parseIndex=bht;Io.config=Dt;Io.parseQuery=kve;Dht(GG);var Hve=q(Cs()),cx=q(require("path")),Ha=q(require("vscode"));function Ms(e){return e.rootPath+"/"+e.relPath}function wM(e){return Ms({rootPath:e.repoRoot,relPath:e.pathName})}var Mve=q(require("vscode"));function Fve(e,t){let r={type:"file-ranges-selected",data:[]};if(!e||!t)return r;let n=Nht(e.document.uri,t),i=e.selections;return n&&i.some(s=>!s.isEmpty)&&(r.data=i.map(s=>({repoRoot:n.repoRoot,pathName:n.pathName,fullRange:{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character},originalCode:e.document.getText(s)}))),r}function ox(e){return{startLineNumber:e.start.line,startColumn:e.start.character,endLineNumber:e.end.line,endColumn:e.end.character}}function ax(e){return new Mve.Range(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)}function Nht(e,t){let r=t.safeResolvePathName(e);if(r!==void 0)return Xh(r)}function Xh(e){return{repoRoot:e.rootPath,pathName:e.relPath}}var Qve=q(BA());var Nve=q(require("vscode"));var eg=class extends X{constructor(r,n,i){super();this._globalState=r;this._cacheBackKey=n;this._options=i;let s={max:1e3,...this._options?.lru};this._cache=new Hf(s),this.loadContext(),this.addDisposable(new Nve.Disposable(()=>this.dumpContext.cancel()))}_cache;_onExpiry;dumpContext=(0,Qve.default)(async()=>{let r=this._cache.dump();await this._globalState.save(this._cacheBackKey,r,{uniquePerWorkspace:!0}),this._globalState.update(this._cacheBackKey,void 0)},60*1e3,{leading:!0,trailing:!0});loadContext=async()=>{let r=await this._globalState.load(this._cacheBackKey,{uniquePerWorkspace:!0});if(r){this._cache.load(r);return}let n=this._globalState.get(this._cacheBackKey);n&&this._cache.load(n)};set=async(r,n)=>{this._cache.set(r,n),await this.dumpContext()};get=r=>(this.dumpContext(),this._cache.get(r));get cache(){return this._cache}remove=r=>{this._cache.delete(r)};clear=()=>{this._cache.clear()};getItems=()=>[...this._cache.values()]};var Pve=q(BA()),Lve=q(require("vscode"));var lx=class extends X{constructor(r,n,i){super();this._globalState=r;this._indexBackKey=n;this._opts=i;this._maxKeysBeforeRemoval=i.maxKeysBeforeRemoval??this._maxKeysBeforeRemoval,this._flushDelay=i.maxDelayBeforeRemovalMs??this._flushDelay,this._index=new Io(Object.values(this._items),{...this._opts.fuse}),this._revalidationQueue=new ta(this._revalidateEntry.bind(this)),this.addDisposables(this._revalidationQueue,new Lve.Disposable(()=>this.dumpContext.cancel())),this.loadContext()}_index;_items={};_revalidationQueue;_keysToRemove=new Set;_maxKeysBeforeRemoval=100;_flushTimer=null;_flushDelay=15e3;dumpContext=(0,Pve.default)(async()=>{await this._globalState.save(this._indexBackKey,this._items,{uniquePerWorkspace:!0}),this._globalState.update(this._indexBackKey,void 0)},60*1e3,{leading:!0,trailing:!0});loadContext=async()=>{let r=await this._globalState.load(this._indexBackKey,{uniquePerWorkspace:!0});if(r){this._items={...this._items,...r},this._index=new Io(Object.values(this._items),this._opts.fuse),this.markForRevalidation(Object.values(this._items));return}let n=this._globalState.get(this._indexBackKey);n&&(this._items={...this._items,...n},this._index=new Io(Object.values(this._items),this._opts.fuse),this.markForRevalidation(Object.values(this._items)))};set=r=>{let n=this._opts.keyFn(r);return this._cancelQueuedWork(n),this._items[n]?!1:(this._items[n]=r,this._index.add(r),this.dumpContext(),!0)};markForRevalidation=r=>{r.forEach(n=>{let i=this._opts.keyFn(n);this._revalidationQueue.insert(i,n)}),this._revalidationQueue.kick()};search=(r,n)=>this._index.search(r,n);remove=r=>{this._queueKeyRemoval(this._opts.keyFn(r))};clear=()=>{this._items={},this._index.setCollection([])};get items(){return{...this._items}}_cancelQueuedWork=r=>{this._revalidationQueue.cancel(r),this._keysToRemove.delete(r)};_checkValidity=async r=>this._opts.validator?await this._opts.validator(r):!0;async _revalidateEntry(r){if(r===void 0)return;let[n,i]=r;await this._checkValidity(i)||this._queueKeyRemoval(n)}_queueKeyRemoval=r=>{this._keysToRemove.add(r),this._keysToRemove.size>=this._maxKeysBeforeRemoval?this._flushToRemove():this._flushTimer||(this._flushTimer=setTimeout(()=>this._flushToRemove(),this._flushDelay))};_flushToRemove=()=>{this._flushTimer&&(clearTimeout(this._flushTimer),this._flushTimer=null);for(let r of this._keysToRemove)delete this._items[r];this._index.remove(r=>this._keysToRemove.has(this._opts.keyFn(r))),this._keysToRemove.clear()}};var Gu={keys:["relPath"],minMatchCharLength:1,minExactMatchCharLength:3,threshold:.25,ignoreLocation:!0,includeScore:!0,useExtendedSearch:!0,shouldSort:!0,findAllMatches:!0,sortFn:Lht},SM=class extends X{constructor(r,n,i){super();this._globalState=r;this._workspaceManager=n;this._onDidChangeSyncingStatus=i;this._filesIndex=new lx(this._globalState,"fuzzyFsFilesIndex",{fuse:Gu,validator:this.validatePath,keyFn:Ove}),this._foldersIndex=new lx(this._globalState,"fuzzyFsFoldersIndex",{fuse:Gu,validator:this.validatePath,keyFn:Ove}),this._recentFiles=new eg(this._globalState,"recentlyOpenedFiles",{lru:{max:64}}),this.addDisposables(...this.trackFilesAndFolders(),this._recentFiles,Ha.window.onDidChangeActiveTextEditor(this.trackRecentTextEditor),Ha.window.onDidChangeVisibleTextEditors(this.onDidChangeVisibleTextEditors),Ha.window.tabGroups.onDidChangeTabs(s=>{s.changed.forEach(this.trackRecentTab),s.opened.forEach(this.trackRecentTab)}))}_foldersIndex;_filesIndex;_recentFiles;dispose=()=>{super.dispose(),this._filesIndex.clear(),this._foldersIndex.clear()};get files(){return Object.values(this._filesIndex.items)}get folders(){return Object.values(this._foldersIndex.items)}setFiles=r=>{let n=this._filesIndex.items;r.forEach(a=>this._filesIndex.set(a));let i=this._filesIndex.items,o=Object.keys(n).filter(a=>!i[a]).map(a=>n[a]);this._filesIndex.markForRevalidation(o)};setFolders=r=>{let n=this._foldersIndex.items;r.forEach(a=>this._foldersIndex.set(a));let i=this._foldersIndex.items,o=Object.keys(n).filter(a=>!i[a]).map(a=>n[a]);this._foldersIndex.markForRevalidation(o)};trackRecentAbsPath=r=>{let n=this._workspaceManager.resolvePathName(r);n===void 0||this._workspaceManager.getBlobName(n)===void 0||this._recentFiles.set(r,n)};trackRecentTab=r=>{if(r.input instanceof Ha.TabInputText){let n=r.input.uri.fsPath;this.trackRecentAbsPath(n)}else return};trackRecentTextEditor=r=>{r!==void 0&&this.trackRecentAbsPath(r.document.uri.fsPath)};onDidChangeVisibleTextEditors=()=>{let r=Ha.window.visibleTextEditors;for(let n of r)this.trackRecentTextEditor(n)};trackFilesAndFolders=()=>{let r=(0,Hve.throttle)(()=>{let{files:i,folders:s}=Pht(this._workspaceManager);this.setFiles(i),this.setFolders(s)},15e3,{leading:!0,trailing:!0}),n=i=>{if(!i?.relPath)return;this._workspaceManager.getAllQualifiedPathNames(i.relPath).forEach(o=>{this._filesIndex.set(o)})};return[new Ha.Disposable(()=>r.cancel()),this._workspaceManager.onDidChangeFile(r),this._workspaceManager.onDidChangeFile(n),this._onDidChangeSyncingStatus(r)]};findRecentFiles=r=>{let n=r.data.relPath,i=r.data.maxResults||12,s=this._recentFiles.getItems().map(a=>({repoRoot:a.rootPath,pathName:a.relPath}));if(n.length<Gu.minMatchCharLength)return{type:"find-recently-opened-files-response",data:s.slice(0,i)};let o=Uve(s,n,{fuseSearch:{limit:i},fuseInit:Gu});return{type:"find-recently-opened-files-response",data:o}};findInScope=r=>{let n=r.data.relPath,i=r.data.maxResults||12;return r.data.searchScope?.files?Uve(r.data.searchScope.files,n,{fuseSearch:{limit:i},fuseInit:Gu}):[]};findFiles=r=>{let n=r.data.exactMatch??!1,i=r.data.relPath,s=n?`${i}$`:i,o=r.data.maxResults||12;if(n&&(i.length<Gu.minExactMatchCharLength||i.length<Gu.minMatchCharLength))return{type:"find-file-response",data:[]};if(i.length<Gu.minMatchCharLength){let u=Object.values(this._filesIndex.items).slice(0,100);return{type:"find-file-response",data:u.map(Xh)}}let a={type:"find-file-response",data:[]},l=this.findInScope(r);return a.data=JG([...a.data,...l]),n&&(a.data=qve(a.data,i)),a.data.length>=o||(a.data=JG([...a.data,...this._filesIndex.search(s,{limit:o-a.data.length}).map(c=>({repoRoot:c.item.rootPath,pathName:c.item.relPath}))]),n&&(a.data=qve(a.data,i))),a};findFolders=r=>{let n=r.data.exactMatch??!1,i=r.data.relPath,s=n?`${i}$`:i,o=r.data.maxResults||12;if(i.length<Gu.minMatchCharLength){let u=Object.values(this._foldersIndex.items).slice(0,100);return{type:"find-folder-response",data:u.map(Xh)}}let a={type:"find-folder-response",data:[]},l=this._foldersIndex.search(s,{limit:o}).map(c=>Xh(c.item));return a.data=JG([...a.data,...l]),a};validatePath=async r=>this.statPath(r).then(n=>n!==void 0);statPath=async r=>{if(await this._workspaceManager.awaitInitialFoldersEnumerated(),!!this._workspaceManager.getFolderRoot(Ms(r)))try{return await Gy(Ms(r))}catch{return}}};function Pht(e){let t=o=>e.getAllPathNames(o)[0],n=e.getContextWithBlobNames().blobNames.map(t).filter(o=>o!==void 0),i=new Map(n.map(o=>{let a={rootPath:o.rootPath,relPath:qa(o.relPath)};return[Ms(a),a]})),s=Array.from(i.values());return{files:n,folders:s}}async function Wve(e,t){let r=await xo(Ha.Uri.file(Ms(e))),n=new Ha.Range(r.positionAt(t.charStart),r.positionAt(t.charEnd));return{repoRoot:e.rootPath,pathName:e.relPath,fullRange:{startLineNumber:n.start.line,startColumn:n.start.character,endLineNumber:n.end.line,endColumn:n.end.character}}}function Uve(e,t,r){return new Io(e,{...Gu,...r.fuseInit,keys:["relPath"]}).search(t,r.fuseSearch).map(s=>s.item)}function JG(e){let t=new Map;return e.forEach(r=>{let n=Ms({rootPath:r.repoRoot,relPath:r.pathName});t.set(n,r)}),Array.from(t.values())}function Ove(e){return Ms(e)}function Lht(e,t){if(e.score!==t.score)return e.score-t.score;let r=e.matches?.[0].value,n=t.matches?.[0].value;return r&&n?r.length===n.length?r.localeCompare(n):r.length-n.length:e.score-t.score}function Uht(e,t){let r=cx.normalize(e),n=cx.normalize(t);if(n.length>r.length)return!1;if(r.endsWith(n)){let i=r.length-n.length;return i===0||r[i-1]===cx.sep}return!1}function qve(e,t){return e.filter(r=>Uht(r.pathName,t))}var ux=class{_selectedCodeReferenceRequestId=void 0;_selectedCodeReferenceRequestIdOptionB=void 0;_selectedCode=void 0;_filePath=void 0;_maybeUpdateSelectedCodeReferenceRequestId(t,r,n){let i=n?this._selectedCodeReferenceRequestIdOptionB:this._selectedCodeReferenceRequestId;return i===void 0&&r&&(n?this._selectedCodeReferenceRequestIdOptionB=t.requestId:this._selectedCodeReferenceRequestId=t.requestId,i=Zy._newRequestReferenceId),i}},Zy=class e extends X{constructor(r,n,i,s,o,a,l,c){super();this._globalState=r;this._apiServer=n;this._workspaceManager=i;this._recentChats=s;this._fuzzySymbolSearcher=o;this._assetManager=a;this._featureFlagManager=l;this._checkpointManager=c;this.selectionCache=new eg(this._globalState,"requestIdSelectionMetadata",{lru:{max:1e3}}),this.addDisposables(Gve.window.onDidChangeTextEditorSelection(()=>{this._selectedCodeReferenceRequestId=void 0}),{dispose:()=>this._chatStreams.clear()},this.selectionCache)}_chatStreams=new Map;static _newRequestReferenceId="new";_selectedCodeReferenceRequestId;_preferenceState=new ux;selectionCache;getDiagnostics=r=>({type:"get-diagnostics-response",data:S0e()});_maybeUpdateSelectedCodeReferenceRequestId(r,n){let i=this._selectedCodeReferenceRequestId;return i===void 0&&n&&(this._selectedCodeReferenceRequestId=r.requestId,i=e._newRequestReferenceId,this.selectionCache.set(r.requestId,n)),i}async _getVCSChange(){return this._workspaceManager!==void 0?await this._workspaceManager.getVCSChange():{commits:[],workingDirectory:[]}}async chat(r,n,i){this._recentChats.addItem(r),j("ChatModel").debug(`Sending chat request with ID: ${r.requestId}`);let o;i===void 0?o=this._maybeUpdateSelectedCodeReferenceRequestId(r,n):(o=this._preferenceState._maybeUpdateSelectedCodeReferenceRequestId(r,n,i.useOptionB),n?.selectedCode&&(this._preferenceState._selectedCode=n.selectedCode,this._preferenceState._filePath=n.path),r.selectedCode&&(this._preferenceState._selectedCode=r.selectedCode,this._preferenceState._filePath=r.pathName));let a=await this._getVCSChange(),l=this._getRecentChanges(),c=await this._apiServer.chat(r.requestId,r.message,r.chatHistory,r.blobs,r.userGuidedBlobs,r.externalSourceIds,r.modelId,a,l,o,n?.selectedCode||r.selectedCode,n?.prefix||r.prefix,n?.suffix||r.suffix,n?.path||r.pathName,n?.language||r.language,void 0,void 0,r.userGuidelines,r.workspaceGuidelines,r.toolDefinitions,r.nodes,r.mode,r.agentMemories,r.personaType);return c.workspaceFileChunks=jG(c.workspaceFileChunks||[]),c}getReferenceReqId(){return this._selectedCodeReferenceRequestId}cancelChatStream=r=>{this._chatStreams.get(r)?.cancel()};async*getChatStream(r){let n=this._chatStreams.get(r.data.requestId);if(n)yield*n.copy();else throw new Error(`Chat stream with ID ${r.data.requestId} not found`)}deleteChatStream=r=>{this._chatStreams.get(r)?.cancel(),this._chatStreams.delete(r)};async*chatStream(r,n,i){this._recentChats.addItem(r),yield*this._chatStreams.get(r.requestId)?.copy()??this.startChatStream(r,n,i)}_getRecentChanges(){let r=this._workspaceManager.getContext();return jy(r.recentChunks)}resolveWorkspaceFileChunk=async r=>{let n=r.data,i=this._workspaceManager.getAllPathNames(n.blobName)[0];if(!i)throw new Error(`File chunk with blobName=${n.blobName} not found`);return{type:"resolve-workspace-file-chunk-response",data:await Wve(i,n)}};async*startChatStream(r,n,i){let s=r.requestId,o=this._chatStreams.get(s);if(o)throw new Error(`Chat stream with ID ${s} already exists`);{j("ChatModel").debug(`Sending chat stream request with ID: ${r.requestId}`);let l;i===void 0?l=this._maybeUpdateSelectedCodeReferenceRequestId(r,n):(l=this._preferenceState._maybeUpdateSelectedCodeReferenceRequestId(r,n,i.useOptionB),n?.selectedCode&&(this._preferenceState._selectedCode=n.selectedCode,this._preferenceState._filePath=n.path),r.selectedCode&&(this._preferenceState._selectedCode=r.selectedCode,this._preferenceState._filePath=r.pathName));let c=await this._getVCSChange(),u=this._getRecentChanges(),f=n?.path||r.pathName,p=f?this._workspaceManager.getAllQualifiedPathNames(f)[0]:void 0,g=n?.prefix||r.prefix,m=n?.suffix||r.suffix,y=n?.language||r.language,v=n?.selectedCode||r.selectedCode,C=await this.hydrateChatHistory(r.chatHistory),E=this.limitChatHistory(C),w=r.nodes?await this.hydrateRequestNodes(r.nodes):[],B=p?this._workspaceManager.getFolderRoot(p?.absPath):this._workspaceManager.getMostRecentlyChangedFolderRoot(),R=B?this._workspaceManager.getRepoRootForFolderRoot(B):void 0,N=Ol(R??"",B??"");N!==""&&N!=="."&&(r=Vht(r,N));let W=await this._apiServer.chatStream(r.requestId,r.message,E,r.blobs,r.userGuidedBlobs,r.externalSourceIds,r.modelId,c,u,l,v,g,m,f,y,i&&i.useOptionB?this._apiServer.sessionId+"-B":void 0,i?.disableAutoExternalSources,r.userGuidelines,r.workspaceGuidelines,r.toolDefinitions,w,r.mode,r.agentMemories,r.personaType),Z;n?.path&&p?Z={charStart:g?.length??0,charEnd:(g?.length??0)+(v?.length??0),blobName:this._workspaceManager.getBlobName(p)??""}:Z=void 0,o=new gm(Oht(s,Z,W,async te=>{try{let Y=await this.resolveWorkspaceFileChunk({type:"resolve-workspace-file-chunk",data:te});return this._fuzzySymbolSearcher.warmupCache(te.blobName),{...te,file:Y.data}}catch{return te}})),this._chatStreams.set(s,o),yield*o.copy()}}sendFeedback=async r=>(await this._apiServer.chatFeedback(r.data),{type:"chat-rating-done",data:r.data});saveConversation=async r=>{let n=j("ChatModel"),i=await this._apiServer.saveChat(r.data.conversationId,r.data.chatHistory,r.data.title);return n.debug(`Saved chat with api server: ${i.url}`),{type:"save-chat-done",data:i}};hydrateRequestNodes=async r=>{let n=j("ChatModel");return(await Promise.all(r.map(async s=>{if(s.type===ho.IMAGE_ID){if(!s.image_id_node)return n.error("Invalid image_id_node: missing image_id_node"),s;let o=s.image_id_node.image_id,a=await this._assetManager.loadAsset(o??"");if(!a)return n.error(`Failed to load asset ${o}`),s;let l=Buffer.from(a).toString("base64").replace(/^data:.*?;base64,/,"");return{type:ho.IMAGE,id:s.id,image_node:{image_data:l,format:rI.PNG}}}else if(s.type===ho.CHECKPOINT_REF&&this._checkpointManager){let o=s.checkpoint_ref_node;if(!o)return;let a=o.request_id,l=o.from_timestamp,c=o.to_timestamp;try{let u=await this._checkpointManager.getCheckpointByRequestId(a);return u||(u=await this._checkpointManager.getAggregateCheckpoint({minTimestamp:l,maxTimestamp:c})),u&&u.files.length>0?_0e(s.id,u,()=>({beforeBlobName:void 0,afterBlobName:void 0}),o.source):void 0}catch(u){n.error(`Failed to hydrate checkpoint reference node: ${String(u)}`)}}return s}))).filter(s=>s!==void 0)};hydrateChatHistory=async r=>await Promise.all(r.map(async i=>{if(i.request_nodes){i.request_nodes=await this.hydrateRequestNodes(i.request_nodes);for(let s=0;s<i.request_nodes.length;s++)i.request_nodes[s].id=s}return i}));limitChatHistory=r=>gr(this._featureFlagManager.currentFlags.vscodeChatStablePrefixTruncationMinVersion)?E0e(r):b0e(r)};async function*Oht(e,t,r,n){let i=new Set,s=[],o=new Ua(async l=>{if(l===void 0)return;let c=[l,await n(l)];s.push(c)});t&&(i.add(t),o.insert(t)),o.kick();for await(let l of r){jG(l.workspaceFileChunks??[]).forEach(f=>{i.add(f),o.insert(f)}),o.kick();let u=[...s];u.forEach(([f,p])=>{i.delete(f)}),s=[],yield{type:"chat-model-reply",data:{text:l.text,requestId:e,streaming:!0,workspaceFileChunks:u.map(([f,p])=>p),nodes:l.nodes}}}let a=await Promise.all([...jG([...i]).map(n)]);yield{type:"chat-model-reply",data:{text:"",requestId:e,streaming:!0,workspaceFileChunks:a}}}function jG(e){let t=new Map;for(let n of e){if(n.charStart>=n.charEnd)continue;let i=t.get(n.blobName)??[];i.push(n),t.set(n.blobName,i)}let r=[];for(let[n,i]of t){let s=i.sort((o,a)=>o.charStart-a.charStart).reduce((o,a)=>{let l=o[o.length-1];return l&&l.charEnd+1>=a.charStart?l.charEnd=a.charEnd:o.push(a),o},[]);r.push(...s)}return r}var qht="- The user is working from the directory `${relPath}`.\n- When the user mentions a file name or when viewing output from shell commands, it is likely relative to `${relPath}`.\n- When creating, deleting, viewing or editing files, first try prepending `${relPath}` to the path.\n- When running shell commands, do not prepend `${relPath}` to the path.\n";function Vht(e,t){return e.agentMemories?e.agentMemories+=`
`:e.agentMemories="",e.agentMemories+=qht.replaceAll("${relPath}",t),e}var zve=q(Gf()),Xy=q(require("vscode"));var Wa=q(require("vscode"));async function $ve(e){let[t,r,n]=await Promise.all([Wa.commands.executeCommand("vscode.provideDocumentSemanticTokensLegend",e),Wa.commands.executeCommand("vscode.provideDocumentSemanticTokens",e),xo(e)]);if(!t||!r||!n)return[];let i=[],s=r.data;for(let o=0;o<s.length;o+=5){let a=i[i.length-1],l=s[o],c=s[o+1],u=s[o+2],f=(a?.range.startLineNumber??0)+l,g=(l===0?a?.range.startColumn??0:0)+c,m=new Wa.Position(f,g),v=n.offsetAt(m)+u,C=n.positionAt(v),E=new Wa.Range(m,C),w=n.getText(E);i.push({name:w,kind:Wa.SymbolKind.String,range:ox(E),selectionRange:ox(E),detail:"",tags:[],children:[]})}return i}async function Yve(e,t){let r=Wa.Uri.file(wM(e)),n=await xo(r);if(!n)return Promise.resolve([]);let i=e.fullRange?ax(e.fullRange):void 0,s=i?n.offsetAt(i.start):0,o=n.getText(i),a=new RegExp(`\\b${t}\\b`,"g"),l=o.search(a);if(l>=0){let c=n.positionAt(s+l),u=n.positionAt(s+l+t.length),f=new Wa.Range(c,u);return Promise.resolve([{name:n.getText(f),kind:Wa.SymbolKind.String,range:ox(f),selectionRange:ox(f),detail:"",tags:[],children:[]}])}return Promise.resolve([])}var ZG={keys:["name"],threshold:.05,includeScore:!0,useExtendedSearch:!0,isCaseSensitive:!0},Hht=1e3*5,Wht=2e4,IM=class extends X{constructor(r,n,i,s){super();this._globalState=r;this._config=n;this._fuzzyFsSearcher=i;this._workspaceManager=s;this._logger=j("FuzzySymbolSearcher"),this._fileTokensCache=new eg(this._globalState,"fuzzyBlobNamesToSymbols",{lru:{max:1e3,fetchMethod:this._loadFileDetailSymbols}});let o=(0,zve.default)(async a=>{let l=this._workspaceManager.resolvePathName(a.document.uri.fsPath);if(!l)return;let c=this._workspaceManager.getBlobName(l);c&&(this._fileTokensCache.remove(c),await this.warmupCache(c))},Hht,{leading:!0,trailing:!0});this.addDisposable(Xy.workspace.onDidChangeTextDocument(o)),this.addDisposables(Xy.window.onDidChangeActiveTextEditor(async a=>{if(!a)return;let l=this._workspaceManager.resolvePathName(a.document.uri.fsPath);if(!l)return;let c=this._workspaceManager.getBlobName(l);c&&await this.warmupCache(c)}))}_fileTokensCache;_logger;findSymbolsRegex=async r=>{if(!this._config.config.enableDebugFeatures)return{type:"find-symbol-response",data:[]};let n=r.data.searchScope.files,i=(await Promise.all(n.map(async o=>(await Yve(o,r.data.query)).map(l=>({...l,file:{...o,range:void 0,fullRange:l.range}}))))).flat(),s=Kve(i,r.data.query,{fuseSearch:{limit:1},fuseInit:ZG});return{type:"find-symbol-response",data:s}};findSymbols=async r=>{if(!Ght(r.data.query))return{type:"find-symbol-response",data:[]};let n=await this.getAllFilteredTokens(r.data.searchScope.files??[],{filter:!0,forceRefresh:!1}),i=Kve(n,r.data.query,{fuseSearch:{limit:1},fuseInit:ZG});return{type:"find-symbol-response",data:i}};warmupCache=async r=>{let n=this._workspaceManager.getAllPathNames(r)[0];if(!n)return;let i={repoRoot:n.rootPath,pathName:n.relPath};await this._getAllFileTokens(i)};getAllFilteredTokens=async(r,n)=>{let i=async s=>{let o=await this._getAllFileTokens(s,n.forceRefresh);if(!o)return[];if(!n.filter||!s.fullRange)return o;let a=ax(s.fullRange);return o.filter(l=>{let c=ax(l.range);return a.contains(c)})};return(await Promise.all(r.map(i))).flat()};_loadFileDetailSymbols=async(r,n,{context:i})=>{let s=Xy.Uri.file(i.absPath),o=!0,a=new Promise(l=>setTimeout(()=>{l(void 0),o=!1},i.timeoutMs));for(;o;)try{let l=new Promise(u=>setTimeout(u,4e3)),c=await Promise.race([$ve(s),a]);if(c===void 0||c.length>0)return c??[];await l}catch(l){return this._logger.error(`Failed to load symbols for ${i.absPath}: ${l instanceof Error?l.message:String(l)}`),[]}return[]};_getAllFileTokens=async(r,n=!1)=>{let i=this._getCurrFileDetails(r);if(i===void 0)return[];let s=this._getCurrBlobName(i);if(!s)return[];try{let o=await this._fileTokensCache.cache.fetch(s,{context:{absPath:wM(i),blobName:s,timeoutMs:Wht},forceRefresh:n});return o?o.map(a=>({name:a.name,kind:a.kind,range:a.range,selectionRange:a.selectionRange,detail:a.detail,tags:a.tags||[],children:[],file:{...r,range:void 0,fullRange:a.range}})):[]}catch(o){let a=o instanceof Error?o.message:String(o);return this._logger.error(`Failed to read file tokens for ${s}: ${a}`),[]}};_getCurrBlobName=r=>{let n=new Le(r.repoRoot,r.pathName);return this._workspaceManager.getBlobName(n)};_getCurrFileDetails=r=>{let n=this._workspaceManager.getAllQualifiedPathNames(r.pathName);return n.length?{...r,repoRoot:n[0].rootPath,pathName:n[0].relPath}:void 0}};function Kve(e,t,r){return new Io(e,{...ZG,...r.fuseInit,keys:["name"]}).search(`${t}$`,r.fuseSearch).map(s=>s.item)}function Ght(e){return e.length>0&&!e.match(/[/.\s]/)}var Jve=q(require("fs")),jve=q(Gf()),XG=q(require("path")),Ga=q(require("vscode"));var tg=class extends X{constructor(r,n,i){super();this._config=r;this._flags=n;this._clientMetricsReporter=i;this._initializeWorkspaceWatchers(),this.addDisposable(Ga.workspace.onDidChangeWorkspaceFolders(s=>{s.removed.forEach(o=>{let a=this._workspaceWatchers.get(o.uri.fsPath);a&&(a.dispose(),this._workspaceWatchers.delete(o.uri.fsPath),this._workspaceGuidelinesContent.delete(o.uri.fsPath))}),s.added.forEach(o=>{this._initializeWorkspaceWatcher(o.uri.fsPath)})})),this._userGuidelinesContent=this._config?.config?.chat.userGuidelines||"",this.addDisposable(this._config.onDidChange(()=>{let s=this._userGuidelinesContent;this._userGuidelinesContent=this._config?.config?.chat.userGuidelines||"",this._guidelinesChangedEmitter.fire(),s===""&&this._userGuidelinesContent!==""?this._reportMetric("chat-set-user-guidelines"):s!==""&&this._userGuidelinesContent===""&&this._reportMetric("chat-clear-user-guidelines")}))}_workspaceGuidelinesContent=new Map;_workspaceWatchers=new Map;_userGuidelinesContent="";_guidelinesChangedEmitter=new Ga.EventEmitter;get onDidChange(){return this._guidelinesChangedEmitter.event}_initializeWorkspaceWatchers(){Ga.workspace.workspaceFolders&&Ga.workspace.workspaceFolders.forEach(r=>{this._initializeWorkspaceWatcher(r.uri.fsPath)})}_initializeWorkspaceWatcher(r){let n=XG.join(r,".augment-guidelines");this._updateWorkspaceContent(r);let i=Ga.workspace.createFileSystemWatcher(n);this.addDisposable(i);let s=()=>this._updateWorkspaceContent(r);i.onDidChange(s),i.onDidCreate(s),i.onDidDelete(()=>{this._workspaceGuidelinesContent.set(r,"")}),this._workspaceWatchers.set(r,i)}_updateWorkspaceContent(r){try{let n=XG.join(r,".augment-guidelines"),i=this._workspaceGuidelinesContent.get(r)||"",s=Jve.readFileSync(n,"utf8");this._workspaceGuidelinesContent.set(r,s),this._guidelinesChangedEmitter.fire(),i===""&&s!==""?this._reportMetric("chat-set-workspace-guidelines"):i!==""&&s===""&&this._reportMetric("chat-clear-workspace-guidelines")}catch{let n=this._workspaceGuidelinesContent.get(r)||"";this._workspaceGuidelinesContent.set(r,""),n!==""&&this._reportMetric("chat-clear-workspace-guidelines")}}getWorkspaceGuidelinesContent(r){return this._flags.currentFlags.enableGuidelines&&this._workspaceGuidelinesContent.get(r)||""}getActiveWorkspacePath(r){let n=Ga.window.activeTextEditor;if(!n)return;let i=n.document.uri.fsPath;return r.safeResolvePathName(i)?.rootPath}getCurrentWorkspaceGuidelinesContent(r){let n=Ga.workspace.workspaceFolders;if(!n||n.length===0)return"";if(n.length===1)return this.getWorkspaceGuidelinesContent(n[0].uri.fsPath);let i=this.getActiveWorkspacePath(r);return i?this.getWorkspaceGuidelinesContent(i):""}getUserGuidelinesContent(){return this._flags.currentFlags.enableGuidelines?this._userGuidelinesContent:""}getGuidelinesStates(){return this._flags.currentFlags.enableGuidelines?{userGuidelines:{enabled:this._userGuidelinesContent.length>0,overLimit:this._userGuidelinesContent.length>this._flags.currentFlags.userGuidelinesLengthLimit,contents:this._userGuidelinesContent,lengthLimit:this._flags.currentFlags.userGuidelinesLengthLimit},workspaceGuidelines:Array.from(this._workspaceGuidelinesContent.entries()).map(([r,n])=>({workspaceFolder:r,enabled:n.length>0,overLimit:n.length>this._flags.currentFlags.workspaceGuidelinesLengthLimit,lengthLimit:this._flags.currentFlags.workspaceGuidelinesLengthLimit}))}:{userGuidelines:{enabled:!1,overLimit:!1,contents:"",lengthLimit:this._flags.currentFlags.userGuidelinesLengthLimit}}}_reportMetric=(0,jve.default)(r=>{this._clientMetricsReporter.reportWebviewClientMetric({webviewName:"chat",client_metric:r,value:1})},1e3,{leading:!0,trailing:!1});static updateUserGuidelines(r){Ga.workspace.getConfiguration("augment.chat").update("userGuidelines",r.trim(),Ga.ConfigurationTarget.Global)}};var Em=q(require("vscode"));var e4=(u=>(u.webSearchV1="google_search",u.webSearch="web-search",u.gitHub="github-api",u.linear="linear",u.notion="notion",u.jira="jira",u.confluence="confluence",u.supabase="supabase",u.glean="glean",u.mcp="mcp",u))(e4||{}),Kht=new Set(Wi?Object.values(Wi):[]);var zht=new Set(e4?Object.values(e4):[]);var Jht=new Set(Hi?Object.values(Hi):[]);var xLt=new Set([...Kht,...zht,...Jht]);var Zve=q(require("vscode"));var BM=class extends GA{constructor(r,n,i=.2){super(r,i);this._workspaceManager=n}_maxDiagnosticDelayMs=3e3;async _addDiagnosticsToResponse(r,n){if(r.isError)return r;try{let i=await this._waitForNewDiagnostics(n),s=this._filterDiagnosticsMap(i,n),o=await tM(s,this._workspaceManager),a=o.trim()===""?"The IDE reports no new issues.":`The IDE reports the following new issues:
${o}`;return lr(`${r.text}

${a}`)}catch{return r}}async handleStrReplace(r,n,i,s){let o=this._getDiagnostics(),a=await super.handleStrReplace(r,n,i,s);return this._addDiagnosticsToResponse(a,o)}async handleInsert(r,n,i,s){let o=this._getDiagnostics(),a=await super.handleInsert(r,n,i,s);return this._addDiagnosticsToResponse(a,o)}_getDiagnostics(){let r=new Map;return Zve.languages.getDiagnostics().forEach(([n,i])=>{i.length>0&&r.set(n.fsPath,i)}),r}_filterDiagnosticsMap(r,n){let i=new Map;return r.forEach((s,o)=>{let a=n.get(o)??[],l=this._filterDiagnostics(s,a);l.length>0&&i.set(o,l)}),i}_filterDiagnostics(r,n){return r.filter(i=>!n.some(s=>i.range.start.line===s.range.start.line&&i.range.end.line===s.range.end.line&&i.message===s.message&&i.severity===s.severity))}_hasDifferentDiagnostics(r,n){if(r.size!==n.size)return!0;for(let[i,s]of r){let o=n.get(i);if(!o||s.length!==o.length)return!0;for(let a=0;a<s.length;a++){let l=s[a],c=o[a];if(l.range.start.line!==c.range.start.line||l.range.end.line!==c.range.end.line||l.message!==c.message||l.severity!==c.severity)return!0}}return!1}async _waitForNewDiagnostics(r){let n=Date.now();for(;Date.now()-n<this._maxDiagnosticDelayMs;){let i=this._getDiagnostics();if(this._hasDifferentDiagnostics(i,r))return i;await fo(1e3)}return this._getDiagnostics()}};function gCe(e){return typeof e>"u"||e===null}function jht(e){return typeof e=="object"&&e!==null}function Zht(e){return Array.isArray(e)?e:gCe(e)?[]:[e]}function Xht(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function egt(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function tgt(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var rgt=gCe,ngt=jht,igt=Zht,sgt=egt,ogt=tgt,agt=Xht,Ki={isNothing:rgt,isObject:ngt,toArray:igt,repeat:sgt,isNegativeZero:ogt,extend:agt};function pCe(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function fx(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=pCe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}fx.prototype=Object.create(Error.prototype);fx.prototype.constructor=fx;fx.prototype.toString=function(t){return this.name+": "+pCe(this,t)};var na=fx;function t4(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(s=" ... ",t=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+e.slice(t,r).replace(/\t/g,"\u2192")+o,pos:n-t+s.length}}function r4(e,t){return Ki.repeat(" ",t-e.length)+e}function lgt(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(e.buffer);)i.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",l,c,u=Math.min(e.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)c=t4(e.buffer,n[o-l],i[o-l],e.position-(n[o]-n[o-l]),f),a=Ki.repeat(" ",t.indent)+r4((e.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=t4(e.buffer,n[o],i[o],e.position,f),a+=Ki.repeat(" ",t.indent)+r4((e.line+1).toString(),u)+" | "+c.str+`
`,a+=Ki.repeat("-",t.indent+u+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=i.length);l++)c=t4(e.buffer,n[o+l],i[o+l],e.position-(n[o]-n[o+l]),f),a+=Ki.repeat(" ",t.indent)+r4((e.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var cgt=lgt,ugt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],dgt=["scalar","sequence","mapping"];function fgt(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function hgt(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(ugt.indexOf(r)===-1)throw new na('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=fgt(t.styleAliases||null),dgt.indexOf(this.kind)===-1)throw new na('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var zs=hgt;function Xve(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function ggt(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function i4(e){return this.extend(e)}i4.prototype.extend=function(t){var r=[],n=[];if(t instanceof zs)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new na("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof zs))throw new na("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new na("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new na("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof zs))throw new na("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(i4.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Xve(i,"implicit"),i.compiledExplicit=Xve(i,"explicit"),i.compiledTypeMap=ggt(i.compiledImplicit,i.compiledExplicit),i};var pgt=i4,mgt=new zs("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Agt=new zs("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),ygt=new zs("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),vgt=new pgt({explicit:[mgt,Agt,ygt]});function Cgt(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function bgt(){return null}function Egt(e){return e===null}var _gt=new zs("tag:yaml.org,2002:null",{kind:"scalar",resolve:Cgt,construct:bgt,predicate:Egt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function xgt(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function wgt(e){return e==="true"||e==="True"||e==="TRUE"}function Sgt(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Igt=new zs("tag:yaml.org,2002:bool",{kind:"scalar",resolve:xgt,construct:wgt,predicate:Sgt,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Bgt(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Dgt(e){return 48<=e&&e<=55}function Tgt(e){return 48<=e&&e<=57}function Rgt(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Bgt(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Dgt(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Tgt(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function kgt(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Mgt(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Ki.isNegativeZero(e)}var Fgt=new zs("tag:yaml.org,2002:int",{kind:"scalar",resolve:Rgt,construct:kgt,predicate:Mgt,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Qgt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Ngt(e){return!(e===null||!Qgt.test(e)||e[e.length-1]==="_")}function Pgt(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var Lgt=/^[-+]?[0-9]+e/;function Ugt(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ki.isNegativeZero(e))return"-0.0";return r=e.toString(10),Lgt.test(r)?r.replace("e",".e"):r}function Ogt(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Ki.isNegativeZero(e))}var qgt=new zs("tag:yaml.org,2002:float",{kind:"scalar",resolve:Ngt,construct:Pgt,predicate:Ogt,represent:Ugt,defaultStyle:"lowercase"}),Vgt=vgt.extend({implicit:[_gt,Igt,Fgt,qgt]}),Hgt=Vgt,mCe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ACe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Wgt(e){return e===null?!1:mCe.exec(e)!==null||ACe.exec(e)!==null}function Ggt(e){var t,r,n,i,s,o,a,l=0,c=null,u,f,p;if(t=mCe.exec(e),t===null&&(t=ACe.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],f=+(t[11]||0),c=(u*60+f)*6e4,t[9]==="-"&&(c=-c)),p=new Date(Date.UTC(r,n,i,s,o,a,l)),c&&p.setTime(p.getTime()-c),p}function $gt(e){return e.toISOString()}var Ygt=new zs("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Wgt,construct:Ggt,instanceOf:Date,represent:$gt});function Kgt(e){return e==="<<"||e===null}var zgt=new zs("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Kgt}),c4=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Jgt(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=c4;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function jgt(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=c4,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function Zgt(e){var t="",r=0,n,i,s=e.length,o=c4;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function Xgt(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var ept=new zs("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Jgt,construct:jgt,predicate:Xgt,represent:Zgt}),tpt=Object.prototype.hasOwnProperty,rpt=Object.prototype.toString;function npt(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,rpt.call(i)!=="[object Object]")return!1;for(s in i)if(tpt.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function ipt(e){return e!==null?e:[]}var spt=new zs("tag:yaml.org,2002:omap",{kind:"sequence",resolve:npt,construct:ipt}),opt=Object.prototype.toString;function apt(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],opt.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function lpt(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}var cpt=new zs("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:apt,construct:lpt}),upt=Object.prototype.hasOwnProperty;function dpt(e){if(e===null)return!0;var t,r=e;for(t in r)if(upt.call(r,t)&&r[t]!==null)return!1;return!0}function fpt(e){return e!==null?e:{}}var hpt=new zs("tag:yaml.org,2002:set",{kind:"mapping",resolve:dpt,construct:fpt}),yCe=Hgt.extend({implicit:[Ygt,zgt],explicit:[ept,spt,cpt,hpt]}),ng=Object.prototype.hasOwnProperty,DM=1,vCe=2,CCe=3,TM=4,n4=1,gpt=2,eCe=3,ppt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mpt=/[\x85\u2028\u2029]/,Apt=/[,\[\]\{\}]/,bCe=/^(?:!|!!|![a-z\-]+!)$/i,ECe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function tCe(e){return Object.prototype.toString.call(e)}function $u(e){return e===10||e===13}function Cm(e){return e===9||e===32}function ia(e){return e===9||e===32||e===10||e===13}function tv(e){return e===44||e===91||e===93||e===123||e===125}function ypt(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function vpt(e){return e===120?2:e===117?4:e===85?8:0}function Cpt(e){return 48<=e&&e<=57?e-48:-1}function rCe(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function bpt(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var _Ce=new Array(256),xCe=new Array(256);for(vm=0;vm<256;vm++)_Ce[vm]=rCe(vm)?1:0,xCe[vm]=rCe(vm);var vm;function Ept(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||yCe,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function wCe(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=cgt(r),new na(t,r)}function et(e,t){throw wCe(e,t)}function RM(e,t){e.onWarning&&e.onWarning.call(null,wCe(e,t))}var nCe={YAML:function(t,r,n){var i,s,o;t.version!==null&&et(t,"duplication of %YAML directive"),n.length!==1&&et(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&et(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&et(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&RM(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&et(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],bCe.test(i)||et(t,"ill-formed tag handle (first argument) of the TAG directive"),ng.call(t.tagMap,i)&&et(t,'there is a previously declared suffix for "'+i+'" tag handle'),ECe.test(s)||et(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{et(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function rg(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||et(e,"expected valid JSON character");else ppt.test(a)&&et(e,"the stream contains non-printable characters");e.result+=a}}function iCe(e,t,r,n){var i,s,o,a;for(Ki.isObject(r)||et(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],ng.call(t,s)||(t[s]=r[s],n[s]=!0)}function rv(e,t,r,n,i,s,o,a,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&et(e,"nested arrays are not supported inside keys"),typeof i=="object"&&tCe(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&tCe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)iCe(e,t,s[c],r);else iCe(e,t,s,r);else!e.json&&!ng.call(r,i)&&ng.call(t,i)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,et(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}function u4(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):et(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ni(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Cm(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if($u(i))for(u4(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&RM(e,"deficient indentation"),n}function FM(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||ia(r)))}function d4(e,t){t===1?e.result+=" ":t>1&&(e.result+=Ki.repeat(`
`,t-1))}function _pt(e,t,r){var n,i,s,o,a,l,c,u,f=e.kind,p=e.result,g;if(g=e.input.charCodeAt(e.position),ia(g)||tv(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(i=e.input.charCodeAt(e.position+1),ia(i)||r&&tv(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;g!==0;){if(g===58){if(i=e.input.charCodeAt(e.position+1),ia(i)||r&&tv(i))break}else if(g===35){if(n=e.input.charCodeAt(e.position-1),ia(n))break}else{if(e.position===e.lineStart&&FM(e)||r&&tv(g))break;if($u(g))if(l=e.line,c=e.lineStart,u=e.lineIndent,Ni(e,!1,-1),e.lineIndent>=t){a=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=c,e.lineIndent=u;break}}a&&(rg(e,s,o,!1),d4(e,e.line-l),s=o=e.position,a=!1),Cm(g)||(o=e.position+1),g=e.input.charCodeAt(++e.position)}return rg(e,s,o,!1),e.result?!0:(e.kind=f,e.result=p,!1)}function xpt(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(rg(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else $u(r)?(rg(e,n,i,!0),d4(e,Ni(e,!1,t)),n=i=e.position):e.position===e.lineStart&&FM(e)?et(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);et(e,"unexpected end of the stream within a single quoted scalar")}function wpt(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return rg(e,r,e.position,!0),e.position++,!0;if(a===92){if(rg(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),$u(a))Ni(e,!1,t);else if(a<256&&_Ce[a])e.result+=xCe[a],e.position++;else if((o=vpt(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=ypt(a))>=0?s=(s<<4)+o:et(e,"expected hexadecimal character");e.result+=bpt(s),e.position++}else et(e,"unknown escape sequence");r=n=e.position}else $u(a)?(rg(e,r,n,!0),d4(e,Ni(e,!1,t)),r=n=e.position):e.position===e.lineStart&&FM(e)?et(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}et(e,"unexpected end of the stream within a double quoted scalar")}function Spt(e,t){var r=!0,n,i,s,o=e.tag,a,l=e.anchor,c,u,f,p,g,m=Object.create(null),y,v,C,E;if(E=e.input.charCodeAt(e.position),E===91)u=93,g=!1,a=[];else if(E===123)u=125,g=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),E=e.input.charCodeAt(++e.position);E!==0;){if(Ni(e,!0,t),E=e.input.charCodeAt(e.position),E===u)return e.position++,e.tag=o,e.anchor=l,e.kind=g?"mapping":"sequence",e.result=a,!0;r?E===44&&et(e,"expected the node content, but found ','"):et(e,"missed comma between flow collection entries"),v=y=C=null,f=p=!1,E===63&&(c=e.input.charCodeAt(e.position+1),ia(c)&&(f=p=!0,e.position++,Ni(e,!0,t))),n=e.line,i=e.lineStart,s=e.position,nv(e,t,DM,!1,!0),v=e.tag,y=e.result,Ni(e,!0,t),E=e.input.charCodeAt(e.position),(p||e.line===n)&&E===58&&(f=!0,E=e.input.charCodeAt(++e.position),Ni(e,!0,t),nv(e,t,DM,!1,!0),C=e.result),g?rv(e,a,m,v,y,C,n,i,s):f?a.push(rv(e,null,m,v,y,C,n,i,s)):a.push(y),Ni(e,!0,t),E=e.input.charCodeAt(e.position),E===44?(r=!0,E=e.input.charCodeAt(++e.position)):r=!1}et(e,"unexpected end of the stream within a flow collection")}function Ipt(e,t){var r,n,i=n4,s=!1,o=!1,a=t,l=0,c=!1,u,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)n4===i?i=f===43?eCe:gpt:et(e,"repeat of a chomping mode identifier");else if((u=Cpt(f))>=0)u===0?et(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?et(e,"repeat of an indentation width identifier"):(a=t+u-1,o=!0);else break;if(Cm(f)){do f=e.input.charCodeAt(++e.position);while(Cm(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!$u(f)&&f!==0)}for(;f!==0;){for(u4(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),$u(f)){l++;continue}if(e.lineIndent<a){i===eCe?e.result+=Ki.repeat(`
`,s?1+l:l):i===n4&&s&&(e.result+=`
`);break}for(n?Cm(f)?(c=!0,e.result+=Ki.repeat(`
`,s?1+l:l)):c?(c=!1,e.result+=Ki.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=Ki.repeat(`
`,l):e.result+=Ki.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,r=e.position;!$u(f)&&f!==0;)f=e.input.charCodeAt(++e.position);rg(e,r,e.position,!1)}return!0}function sCe(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,et(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!ia(o))));){if(a=!0,e.position++,Ni(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,nv(e,t,CCe,!1,!0),s.push(e.result),Ni(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)et(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function Bpt(e,t,r){var n,i,s,o,a,l,c=e.tag,u=e.anchor,f={},p=Object.create(null),g=null,m=null,y=null,v=!1,C=!1,E;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),E=e.input.charCodeAt(e.position);E!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,et(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(E===63||E===58)&&ia(n))E===63?(v&&(rv(e,f,p,g,m,null,o,a,l),g=m=y=null),C=!0,v=!0,i=!0):v?(v=!1,i=!0):et(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,E=n;else{if(o=e.line,a=e.lineStart,l=e.position,!nv(e,r,vCe,!1,!0))break;if(e.line===s){for(E=e.input.charCodeAt(e.position);Cm(E);)E=e.input.charCodeAt(++e.position);if(E===58)E=e.input.charCodeAt(++e.position),ia(E)||et(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(rv(e,f,p,g,m,null,o,a,l),g=m=y=null),C=!0,v=!1,i=!1,g=e.tag,m=e.result;else if(C)et(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=u,!0}else if(C)et(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=u,!0}if((e.line===s||e.lineIndent>t)&&(v&&(o=e.line,a=e.lineStart,l=e.position),nv(e,t,TM,!0,i)&&(v?m=e.result:y=e.result),v||(rv(e,f,p,g,m,y,o,a,l),g=m=y=null),Ni(e,!0,-1),E=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&E!==0)et(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&rv(e,f,p,g,m,null,o,a,l),C&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=f),C}function Dpt(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&et(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):et(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ia(o);)o===33&&(n?et(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),bCe.test(i)||et(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),Apt.test(s)&&et(e,"tag suffix cannot contain flow indicator characters")}s&&!ECe.test(s)&&et(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{et(e,"tag name is malformed: "+s)}return r?e.tag=s:ng.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:et(e,'undeclared tag handle "'+i+'"'),!0}function Tpt(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&et(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!ia(r)&&!tv(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&et(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Rpt(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!ia(n)&&!tv(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&et(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),ng.call(e.anchorMap,r)||et(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Ni(e,!0,-1),!0}function nv(e,t,r,n,i){var s,o,a,l=1,c=!1,u=!1,f,p,g,m,y,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=TM===r||CCe===r,n&&Ni(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;Dpt(e)||Tpt(e);)Ni(e,!0,-1)?(c=!0,a=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||TM===r)&&(DM===r||vCe===r?y=t:y=t+1,v=e.position-e.lineStart,l===1?a&&(sCe(e,v)||Bpt(e,v,y))||Spt(e,y)?u=!0:(o&&Ipt(e,y)||xpt(e,y)||wpt(e,y)?u=!0:Rpt(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&et(e,"alias node should not have any properties")):_pt(e,y,DM===r)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=a&&sCe(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&et(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,p=e.implicitTypes.length;f<p;f+=1)if(m=e.implicitTypes[f],m.resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ng.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,p=g.length;f<p;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){m=g[f];break}m||et(e,"unknown tag !<"+e.tag+">"),e.result!==null&&m.kind!==e.kind&&et(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):et(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function kpt(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Ni(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!ia(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&et(e,"directive name must not be less than one character in length");o!==0;){for(;Cm(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!$u(o));break}if($u(o))break;for(r=e.position;o!==0&&!ia(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&u4(e),ng.call(nCe,n)?nCe[n](e,n,i):RM(e,'unknown document directive "'+n+'"')}if(Ni(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ni(e,!0,-1)):s&&et(e,"directives end mark is expected"),nv(e,e.lineIndent-1,TM,!1,!0),Ni(e,!0,-1),e.checkLineBreaks&&mpt.test(e.input.slice(t,e.position))&&RM(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&FM(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ni(e,!0,-1));return}if(e.position<e.length-1)et(e,"end of the stream or a document separator is expected");else return}function SCe(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Ept(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,et(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)kpt(r);return r.documents}function Mpt(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=SCe(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function Fpt(e,t){var r=SCe(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new na("expected a single document in the stream, but found more")}}var Qpt=Mpt,Npt=Fpt,ICe={loadAll:Qpt,load:Npt},BCe=Object.prototype.toString,DCe=Object.prototype.hasOwnProperty,f4=65279,Ppt=9,hx=10,Lpt=13,Upt=32,Opt=33,qpt=34,s4=35,Vpt=37,Hpt=38,Wpt=39,Gpt=42,TCe=44,$pt=45,kM=58,Ypt=61,Kpt=62,zpt=63,Jpt=64,RCe=91,kCe=93,jpt=96,MCe=123,Zpt=124,FCe=125,Js={};Js[0]="\\0";Js[7]="\\a";Js[8]="\\b";Js[9]="\\t";Js[10]="\\n";Js[11]="\\v";Js[12]="\\f";Js[13]="\\r";Js[27]="\\e";Js[34]='\\"';Js[92]="\\\\";Js[133]="\\N";Js[160]="\\_";Js[8232]="\\L";Js[8233]="\\P";var Xpt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],emt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function tmt(e,t){var r,n,i,s,o,a,l;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&DCe.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}function rmt(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new na("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ki.repeat("0",n-t.length)+t}var nmt=1,gx=2;function imt(e){this.schema=e.schema||yCe,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ki.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=tmt(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?gx:nmt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function oCe(e,t){for(var r=Ki.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function o4(e,t){return`
`+Ki.repeat(" ",e.indent*t)}function smt(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function MM(e){return e===Upt||e===Ppt}function px(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==f4||65536<=e&&e<=1114111}function aCe(e){return px(e)&&e!==f4&&e!==Lpt&&e!==hx}function lCe(e,t,r){var n=aCe(e),i=n&&!MM(e);return(r?n:n&&e!==TCe&&e!==RCe&&e!==kCe&&e!==MCe&&e!==FCe)&&e!==s4&&!(t===kM&&!i)||aCe(t)&&!MM(t)&&e===s4||t===kM&&i}function omt(e){return px(e)&&e!==f4&&!MM(e)&&e!==$pt&&e!==zpt&&e!==kM&&e!==TCe&&e!==RCe&&e!==kCe&&e!==MCe&&e!==FCe&&e!==s4&&e!==Hpt&&e!==Gpt&&e!==Opt&&e!==Zpt&&e!==Ypt&&e!==Kpt&&e!==Wpt&&e!==qpt&&e!==Vpt&&e!==Jpt&&e!==jpt}function amt(e){return!MM(e)&&e!==kM}function dx(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function QCe(e){var t=/^\n* /;return t.test(e)}var NCe=1,a4=2,PCe=3,LCe=4,ev=5;function lmt(e,t,r,n,i,s,o,a){var l,c=0,u=null,f=!1,p=!1,g=n!==-1,m=-1,y=omt(dx(e,0))&&amt(dx(e,e.length-1));if(t||o)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=dx(e,l),!px(c))return ev;y=y&&lCe(c,u,a),u=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=dx(e,l),c===hx)f=!0,g&&(p=p||l-m-1>n&&e[m+1]!==" ",m=l);else if(!px(c))return ev;y=y&&lCe(c,u,a),u=c}p=p||g&&l-m-1>n&&e[m+1]!==" "}return!f&&!p?y&&!o&&!i(e)?NCe:s===gx?ev:a4:r>9&&QCe(e)?ev:o?s===gx?ev:a4:p?LCe:PCe}function cmt(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===gx?'""':"''";if(!e.noCompatMode&&(Xpt.indexOf(t)!==-1||emt.test(t)))return e.quotingType===gx?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=n||e.flowLevel>-1&&r>=e.flowLevel;function l(c){return smt(e,c)}switch(lmt(t,a,e.indent,o,l,e.quotingType,e.forceQuotes&&!n,i)){case NCe:return t;case a4:return"'"+t.replace(/'/g,"''")+"'";case PCe:return"|"+cCe(t,e.indent)+uCe(oCe(t,s));case LCe:return">"+cCe(t,e.indent)+uCe(oCe(umt(t,o),s));case ev:return'"'+dmt(t)+'"';default:throw new na("impossible error: invalid scalar style")}}()}function cCe(e,t){var r=QCe(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function uCe(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function umt(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,dCe(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],l=o[2];s=l[0]===" ",n+=a+(!i&&!s&&l!==""?`
`:"")+dCe(l,t),i=s}return n}function dCe(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,l="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,l+=`
`+e.slice(i,s),i=s+1),o=a;return l+=`
`,e.length-i>t&&o>i?l+=e.slice(i,o)+`
`+e.slice(o+1):l+=e.slice(i),l.slice(1)}function dmt(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=dx(e,i),n=Js[r],!n&&px(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||rmt(r);return t}function fmt(e,t,r){var n="",i=e.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],e.replacer&&(a=e.replacer.call(r,String(s),a)),(cf(e,t,a,!1,!1)||typeof a>"u"&&cf(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function fCe(e,t,r,n){var i="",s=e.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(cf(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&cf(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=o4(e,t)),e.dump&&hx===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function hmt(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,l,c,u;for(o=0,a=s.length;o<a;o+=1)u="",n!==""&&(u+=", "),e.condenseFlow&&(u+='"'),l=s[o],c=r[l],e.replacer&&(c=e.replacer.call(r,l,c)),cf(e,t,l,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),cf(e,t,c,!1,!1)&&(u+=e.dump,n+=u));e.tag=i,e.dump="{"+n+"}"}function gmt(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,l,c,u,f,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new na("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)p="",(!n||i!=="")&&(p+=o4(e,t)),c=o[a],u=r[c],e.replacer&&(u=e.replacer.call(r,c,u)),cf(e,t+1,c,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&hx===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,f&&(p+=o4(e,t)),cf(e,t+1,u,!0,f)&&(e.dump&&hx===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=s,e.dump=i||"{}"}function hCe(e,t,r){var n,i,s,o,a,l;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,BCe.call(a.represent)==="[object Function]")n=a.represent(t,l);else if(DCe.call(a.represent,l))n=a.represent[l](t,l);else throw new na("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=n}return!0}return!1}function cf(e,t,r,n,i,s,o){e.tag=null,e.dump=r,hCe(e,r,!1)||hCe(e,r,!0);var a=BCe.call(e.dump),l=n,c;n&&(n=e.flowLevel<0||e.flowLevel>t);var u=a==="[object Object]"||a==="[object Array]",f,p;if(u&&(f=e.duplicates.indexOf(r),p=f!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(i=!1),p&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(u&&p&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(gmt(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(hmt(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?fCe(e,t-1,e.dump,i):fCe(e,t,e.dump,i),p&&(e.dump="&ref_"+f+e.dump)):(fmt(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&cmt(e,e.dump,t,s,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new na("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function pmt(e,t){var r=[],n=[],i,s;for(l4(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function l4(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)l4(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)l4(e[n[i]],t,r)}function mmt(e,t){t=t||{};var r=new imt(t);r.noRefs||pmt(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),cf(r,0,n,!0,!0)?r.dump+`
`:""}var Amt=mmt,ymt={dump:Amt};function h4(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var QM=ICe.load,RLt=ICe.loadAll,kLt=ymt.dump;var MLt=h4("safeLoad","load"),FLt=h4("safeLoadAll","loadAll"),QLt=h4("safeDump","dump");var UCe=[">","<","|","&","$","`",";"],Cmt=[...UCe,"="],bmt=["|","&",";","$","`","(",")","{","}","<",">","[","]",'"',"'","."];function NM(e){return e==="win32"?"powershell":e==="darwin"?"zsh":"bash"}function g4(e){return e==="bash"||e==="powershell"||e==="zsh"}function OCe(e,t){if(t==="bash"){for(let r of UCe)if(e.includes(r))return;return e.split(" ")}else if(t==="powershell"){for(let r of bmt)if(e.includes(r))return;return e.split(" ")}else if(t==="zsh"){for(let r of Cmt)if(e.includes(r))return;return e.split(" ")}}var Emt=`
auto_approval:
  git:
    - type: prefix
      args: ["status"]
    - type: prefix
      args: ["log"]
    - type: prefix
      args: ["diff"]
    - type: prefix
      args: ["show"]
    - type: exact
      args: ["branch"]
    - type: prefix
      args: ["ls-files"]
    - type: prefix
      args: ["blame"]
    - type: prefix
      args: ["rev-parse"]
    - type: prefix
      args: ["remote", "-v"]
    - type: prefix
      args: ["config", "--list"]
    - type: exact
      args: ["config", "user.name"]
    - type: exact
      args: ["config", "user.email"]
    - type: exact
      args: ["branch", "--show-current"]

  kubectl:
    - type: prefix
      args: ["get"]
    - type: prefix
      args: ["describe"]
    - type: prefix
      args: ["explain"]
    - type: prefix
      args: ["logs"]
    - type: prefix
      args: ["top"]
    - type: prefix
      args: ["api-resources"]
    - type: prefix
      args: ["api-versions"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["wait"]
    - type: prefix
      args: ["auth", "can-i"]
    - type: prefix
      args: ["config", "get-contexts"]
    - type: prefix
      args: ["config", "view"]

  bazel:
    - type: prefix
      args: ["query"]
    - type: prefix
      args: ["cquery"]
    - type: prefix
      args: ["config"]
    - type: prefix
      args: ["info"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["help"]
    - type: prefix
      args: ["analyze-profile"]
    - type: prefix
      args: ["aquery"]
    - type: prefix
      args: ["dump"]
    - type: prefix
      args: ["license"]
    - type: prefix
      args: ["print"]
    - type: prefix
      args: ["build", "--nobuild"]
    - type: prefix
      args: ["coverage", "--nobuild"]
    - type: prefix
      args: ["mobile-install", "--nobuild"]
    - type: prefix
      args: ["run", "--nobuild"]
    - type: prefix
      args: ["text", "--nobuild"]
    - type: prefix
      args: ["clean", "--expunge", "--dry-run"]

  docker:
    - type: prefix
      args: ["ps"]
    - type: prefix
      args: ["images"]
    - type: prefix
      args: ["network", "ls"]
    - type: prefix
      args: ["volume", "ls"]
    - type: prefix
      args: ["port"]
    - type: prefix
      args: ["stats"]
    - type: prefix
      args: ["events"]
    - type: prefix
      args: ["diff"]
    - type: prefix
      args: ["history"]
    - type: prefix
      args: ["system", "df"]
    - type: prefix
      args: ["top"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["inspect"]

  npm:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["outdated"]
    - type: prefix
      args: ["doctor"]
    - type: prefix
      args: ["audit"]
    - type: prefix
      args: ["token", "list"]
    - type: prefix
      args: ["ping"]
    - type: prefix
      args: ["view"]
    - type: prefix
      args: ["owner", "ls"]
    - type: prefix
      args: ["fund"]
    - type: prefix
      args: ["explain"]
    - type: prefix
      args: ["ls"]
    - type: prefix
      args: ["why"]
    - type: prefix
      args: ["prefix"]

  terraform:
    - type: prefix
      args: ["show"]
    - type: prefix
      args: ["providers"]
    - type: prefix
      args: ["state", "list"]
    - type: prefix
      args: ["state", "show"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["fmt", "--check"]
    - type: prefix
      args: ["validate"]
    - type: prefix
      args: ["graph"]
    - type: prefix
      args: ["console"]
    - type: prefix
      args: ["output"]
    - type: prefix
      args: ["refresh", "--dry-run"]
    - type: prefix
      args: ["plan"]

  gradle:
    - type: prefix
      args: ["dependencies"]
    - type: prefix
      args: ["projects"]
    - type: prefix
      args: ["properties"]
    - type: prefix
      args: ["tasks"]
    - type: prefix
      args: ["components"]
    - type: prefix
      args: ["model"]
    - type: prefix
      args: ["buildEnvironment"]
    - type: prefix
      args: ["projectsEvaluated"]
    - type: prefix
      args: ["projects", "--dry-run"]
    - type: prefix
      args: ["dependencies", "--dry-run"]
    - type: prefix
      args: ["help"]
    - type: prefix
      args: ["version"]

  helm:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["get", "values"]
    - type: prefix
      args: ["get", "manifest"]
    - type: prefix
      args: ["get", "hooks"]
    - type: prefix
      args: ["get", "notes"]
    - type: prefix
      args: ["status"]
    - type: prefix
      args: ["dependency", "list"]
    - type: prefix
      args: ["show", "chart"]
    - type: prefix
      args: ["show", "values"]
    - type: prefix
      args: ["verify"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["env"]

  aws:
    - type: prefix
      args: ["s3", "ls"]
    - type: prefix
      args: ["ec2", "describe-instances"]
    - type: prefix
      args: ["rds", "describe-db-instances"]
    - type: prefix
      args: ["iam", "list-users"]
    - type: prefix
      args: ["iam", "list-roles"]
    - type: prefix
      args: ["lambda", "list-functions"]
    - type: prefix
      args: ["eks", "list-clusters"]
    - type: prefix
      args: ["ecr", "describe-repositories"]
    - type: prefix
      args: ["cloudformation", "list-stacks"]
    - type: prefix
      args: ["configure", "list"]

  gcloud:
    - type: prefix
      args: ["projects", "list"]
    - type: prefix
      args: ["compute", "instances", "list"]
    - type: prefix
      args: ["compute", "zones", "list"]
    - type: prefix
      args: ["compute", "regions", "list"]
    - type: prefix
      args: ["container", "clusters", "list"]
    - type: prefix
      args: ["services", "list"]
    - type: prefix
      args: ["iam", "roles", "list"]
    - type: prefix
      args: ["config", "list"]
    - type: prefix
      args: ["components", "list"]
    - type: prefix
      args: ["version"]

  postgres:
    - type: prefix
      args: ["psql", "-l"]
    - type: prefix
      args: ["pg_dump", "--schema-only"]
    - type: prefix
      args: ["pg_dump", "--schema", "public", "--dry-run"]
    - type: prefix
      args: ["pg_dump", "-s", "-t"]
    - type: prefix
      args: ["pg_controldata"]
    - type: prefix
      args: ["pg_isready"]
    - type: prefix
      args: ["pg_lsclusters"]
    - type: prefix
      args: ["pg_activity"]
    - type: prefix
      args: ["pgbench", "-i", "--dry-run"]

  maven:
    - type: prefix
      args: ["dependency:tree"]
    - type: prefix
      args: ["dependency:analyze"]
    - type: prefix
      args: ["help:effective-pom"]
    - type: prefix
      args: ["help:describe"]
    - type: prefix
      args: ["help:evaluate"]
    - type: prefix
      args: ["dependency:list"]
    - type: prefix
      args: ["dependency:build-classpath"]
    - type: prefix
      args: ["help:active-profiles"]
    - type: prefix
      args: ["help:effective-settings"]
    - type: prefix
      args: ["version"]

  redis-cli:
    - type: prefix
      args: ["info"]
    - type: prefix
      args: ["monitor"]
    - type: prefix
      args: ["memory", "stats"]
    - type: prefix
      args: ["memory", "doctor"]
    - type: prefix
      args: ["latency", "doctor"]
    - type: prefix
      args: ["cluster", "info"]
    - type: prefix
      args: ["client", "list"]
    - type: prefix
      args: ["slowlog", "get"]
    - type: prefix
      args: ["config", "get"]
    - type: prefix
      args: ["info", "keyspace"]

  yarn:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["info"]
    - type: prefix
      args: ["why"]
    - type: prefix
      args: ["licenses", "list"]
    - type: prefix
      args: ["outdated"]
    - type: prefix
      args: ["check"]
    - type: prefix
      args: ["audit"]
    - type: prefix
      args: ["workspaces", "info"]
    - type: prefix
      args: ["version"]
    - type: prefix
      args: ["config", "list"]

  az:
    - type: prefix
      args: ["account", "list"]
    - type: prefix
      args: ["group", "list"]
    - type: prefix
      args: ["vm", "list"]
    - type: prefix
      args: ["aks", "list"]
    - type: prefix
      args: ["acr", "list"]
    - type: prefix
      args: ["storage", "account", "list"]
    - type: prefix
      args: ["network", "vnet", "list"]
    - type: prefix
      args: ["webapp", "list"]
    - type: prefix
      args: ["functionapp", "list"]
    - type: prefix
      args: ["version"]

  vault:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["policy", "list"]
    - type: prefix
      args: ["auth", "list"]
    - type: prefix
      args: ["secrets", "list"]
    - type: prefix
      args: ["audit", "list"]
    - type: prefix
      args: ["status"]
    - type: prefix
      args: ["token", "lookup"]
    - type: prefix
      args: ["read"]
    - type: prefix
      args: ["version"]

  podman:
    - type: prefix
      args: ["ps"]
    - type: prefix
      args: ["images"]
    - type: prefix
      args: ["pod", "ps"]
    - type: prefix
      args: ["volume", "ls"]
    - type: prefix
      args: ["network", "ls"]
    - type: prefix
      args: ["stats"]
    - type: prefix
      args: ["top"]
    - type: prefix
      args: ["logs"]
    - type: prefix
      args: ["inspect"]
    - type: prefix
      args: ["port"]

  deno:
    - type: prefix
      args: ["info"]
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["doc"]
    - type: prefix
      args: ["lint"]
    - type: prefix
      args: ["types"]
    - type: prefix
      args: ["check"]
    - type: prefix
      args: ["compile", "--dry-run"]
    - type: prefix
      args: ["task", "--list"]
    - type: prefix
      args: ["test", "--dry-run"]
    - type: prefix
      args: ["version"]

  rustup:
    - type: prefix
      args: ["show"]
    - type: prefix
      args: ["toolchain", "list"]
    - type: prefix
      args: ["target", "list"]
    - type: prefix
      args: ["component", "list"]
    - type: prefix
      args: ["override", "list"]
    - type: prefix
      args: ["which"]
    - type: prefix
      args: ["doc"]
    - type: prefix
      args: ["man"]
    - type: prefix
      args: ["version"]

  cargo:
    - type: prefix
      args: ["tree"]
    - type: prefix
      args: ["metadata"]
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["verify"]
    - type: prefix
      args: ["search"]
    - type: prefix
      args: ["vendor", "--dry-run"]
    - type: prefix
      args: ["outdated"]
    - type: prefix
      args: ["doc"]
    - type: prefix
      args: ["config", "get"]
    - type: prefix
      args: ["version"]

  pip:
    - type: prefix
      args: ["list"]
    - type: prefix
      args: ["show"]
    - type: prefix
      args: ["check"]
    - type: prefix
      args: ["debug"]
    - type: prefix
      args: ["config", "list"]
    - type: prefix
      args: ["index"]
    - type: prefix
      args: ["hash"]
    - type: prefix
      args: ["cache", "list"]
    - type: prefix
      args: ["freeze"]
    - type: prefix
      args: ["version"]
`,_mt=`
auto_approval:
  cd:
    type: any
  date:
    type: any
  cal:
    type: any
  uname:
    type: prefix
    args: ["-a"]
  hostname:
    type: any
  whoami:
    type: any
  id:
    type: any
  ps:
    type: any
  free:
    type: any
  w:
    type: any
  who:
    type: any
  ping:
    type: not_contains
    args: ["-f"]
  netstat:
    type: any
  ss:
    type: any
  ip:
    type: prefix
    args: ["addr"]
  dig:
    type: any
  nslookup:
    type: any
  pwd:
    type: any
  ls:
    type: any
  file:
    type: any
  stat:
    type: any
  du:
    type: any
  df:
    type: any
  cat:
    type: any
  less:
    type: any
  more:
    type: any
  head:
    type: any
  tail:
    type: not_contains
    args: ["-f"]
  wc:
    type: any
`,xmt=`
auto_approval:
  cd:
    type: any
  Get-Date:
    type: any
  date:
    type: any
  Get-ComputerInfo:
    type: any
  Get-Host:
    type: any
  $env:USERNAME:
    type: any
  whoami:
    type: any
  Get-Process:
    type: any
  ps:
    type: any
  gps:
    type: any
  Get-Service:
    type: any
  gsv:
    type: any
  Get-NetIPAddress:
    type: any
  ipconfig:
    type: any
  Get-NetTCPConnection:
    type: any
  netstat:
    type: any
  Resolve-DnsName:
    type: any
  nslookup:
    type: any
  Get-DnsClientServerAddress:
    type: any
  Get-Location:
    type: any
  pwd:
    type: any
  gl:
    type: any
  Get-ChildItem:
    type: any
  dir:
    type: any
  ls:
    type: any
  gci:
    type: any
  Get-Item:
    type: any
  gi:
    type: any
  Get-ItemProperty:
    type: any
  gp:
    type: any
  Get-Content:
    type: not_contains
    args: ["-Wait"]
  cat:
    type: any
  gc:
    type: any
  type:
    type: any
  Select-String:
    type: any
  sls:
    type: any
  findstr:
    type: any
  Get-PSDrive:
    type: any
  gdr:
    type: any
  Get-Volume:
    type: any
  Measure-Object:
    type: any
  measure:
    type: any
  Select-Object:
    type: any
  select:
    type: any
`;function PM(e,t){let r;if(t==="bash"||t==="zsh")r=QM(_mt);else if(t==="powershell")r=QM(xmt);else throw new Error(`Unsupported shell: ${t}`);let n=QM(Emt);return{auto_approval:{...r.auto_approval,...n.auto_approval}}}function LM(e,t,r){let n=r;if(n!=="bash"&&n!=="powershell"&&n!=="zsh")return!1;let i=OCe(t,n);if(!i||i.length===0)return!1;let s=i[0],o=i.slice(1),a=e.auto_approval[s];if(!a)return!1;for(let l of Array.isArray(a)?a:[a]){let c=l.args??[];if(l.type==="prefix"){if(c.length<=o.length&&c.every((u,f)=>o[f]===u))return!0}else if(l.type==="exact"){if(c.length===o.length&&c.every((u,f)=>o[f]===u))return!0}else{if(l.type==="any")return!0;if(l.type==="not_contains"&&!c.some(u=>o.includes(u)))return!0}}return!1}var HCe=require("child_process"),bm=q(require("path")),Pt=q(require("vscode"));function wmt(e,t){return e.name===t.name&&e.path===t.path&&e.args?.join(" ")===t.args?.join(" ")&&Object.keys(e.env??{}).join(" ")===Object.keys(t.env??{}).join(" ")&&Object.values(e.env??{}).join(" ")===Object.values(t.env??{}).join(" ")}var UM=class e extends X{constructor(r,n,i){super();this._extensionRoot=r;this._globalState=n;this._enableStart=i;this.addDisposable(this._globalState.onDidChangeFileStorage("terminalSettings",o=>{this._terminalSettings=o.value,this._logger.verbose("Terminal settings changed"),Mr().reportEvent({eventName:Qr.vsCodeTerminalSettingsChanged,conversationId:""}),this._checkAndUpdateShell()})),this._globalState.load("terminalSettings").then(o=>{this._terminalSettings=o??{supportedShells:[]},this._logger.verbose("Initial terminal settings loaded"),this._checkAndUpdateShell()}).catch(o=>{this._logger.debug(`Error loading initial terminal settings: ${o.message}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorLoadingSettings,conversationId:""}),this._terminalSettings={supportedShells:[]}}),this._initializeShells();let s=Pt.window;s.onDidEndTerminalShellExecution&&Ks("1.93.0")?(this._logger.verbose("Registering for onDidEndTerminalShellExecution."),this._shellExecutionListener=s.onDidEndTerminalShellExecution(async o=>{this._logger.verbose(`Got onDidEndTerminalShellExecution event: ${o.execution?.commandLine?.value}, ${o.execution?.commandLine?.confidence}, ${o.terminal?.name}`);for(let[a,l]of Array.from(this._processes).reverse())if(this._logger.verbose(`Checking process ${a} for completion.`),l.terminal===o.terminal&&!l.killed&&l.exitCode===null){if(this._logger.verbose(`Process ${a} is complete.`),l.exitCode=o.exitCode??null,l.readStream&&o.execution.commandLine.value===l.command){await fo(10),this._logger.debug(`Reading exact output for process ${a}`);let u="";for await(let f of l.readStream)u+=f;this._isBuggyOutput(u)?(this._logger.debug(`Buggy output detected for process ${a}. Please upgrade VSCode.`),Mr().reportEvent({eventName:Qr.vsCodeTerminalBuggyOutput,conversationId:""}),l.output=await this._getOutputFromClipboard(a)):l.output=p4(xI(u,this._maxOutputLength))}else o.execution.commandLine.value!==l.command&&(this._logger.debug(`Command line for process ${a} does not match. Expected ${l.command} but got ${o.execution.commandLine.value}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalBuggyExecutionEvents,conversationId:""})),l.output=await this._getOutputFromClipboard(a);l.terminal!==e._longRunningTerminal&&l.terminal.dispose(),l.killed=!0;let c=this._waitResolvers.get(a);c&&c({output:l.output,returnCode:l.exitCode});break}})):Mr().reportEvent({eventName:Qr.vsCodeTerminalShellIntegrationNotAvailable,conversationId:""}),this.addDisposable(Pt.window.onDidCloseTerminal(async o=>{this._logger.verbose(`Got onDidCloseTerminal event: ${o.name}`);for(let[a,l]of this._processes)if(l.terminal===o&&!l.killed){l.readStream&&(l.output=await this._getOutputFromPossiblyIncompleteProcess(l,a)),l.killed=!0,l.exitCode=o.exitStatus?.code??-1;let c=this._waitResolvers.get(a);c&&c({output:l.output,returnCode:l.exitCode});break}}))}static _shellInfo=e._getDefaultShell();_processes=new Map;_waitResolvers=new Map;_nextId=1;_shellExecutionListener;_activePoller;static _longRunningTerminal;_terminalNeedsUpdate=!1;_logger=j("TerminalProcessTools");_maxOutputLength=64*1024;_supportedShells=[];_terminalSettings={supportedShells:[]};_checkAndUpdateShell(){try{let r=this._terminalSettings.selectedShell;if(r&&r!==e._shellInfo.friendlyName){let n=this._supportedShells.find(i=>i.shellInfo.friendlyName===r);if(n)return e._shellInfo=n.shellInfo,this._terminalNeedsUpdate=!0,this._logger.debug(`Updated shell to saved preference: ${e._shellInfo.friendlyName}`),!0}}catch(r){this._logger.debug(`Error checking for shell updates: ${r.message}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorCheckingForShellUpdates,conversationId:""})}return!1}async launch(r,n,i,s){this._checkAndUpdateShell();let o=this._nextId++,a=!1,l;if(s?(!e._longRunningTerminal||e._longRunningTerminal.exitStatus?(e._longRunningTerminal=await this._createTerminal("Augment",n),a=!0):e._longRunningTerminal&&this._terminalNeedsUpdate?(e._longRunningTerminal.dispose(),e._longRunningTerminal=await this._createTerminal("Augment",n),this._terminalNeedsUpdate=!1,a=!0):e._longRunningTerminal&&!this._terminalHasShellIntegration(e._longRunningTerminal)&&(e._longRunningTerminal.dispose(),e._longRunningTerminal=await this._createTerminal(`Augment - ${r}`,n),a=!0),l=e._longRunningTerminal):l=await this._createTerminal(`Augment - ${r}`,n),s&&Array.from(this._processes.values()).some(f=>f.terminal===l&&f.exitCode===null&&!f.killed))return`Cannot launch another waiting process while another waiting process is running. The id of the existing waiting process is ${o}.
Please wait until this process is complete (you can use a tool for this purpose), or launch the new process as a background process with \`wait=false\`.`;l.show(!0);let c="";if(l===e._longRunningTerminal&&!a){let f="";(!Ks("1.98.0")||!this._isTerminalBasicallySupported())&&(f=this.shellName==="powershell"?"#":":"),this._terminalHasShellIntegration(l)?l.shellIntegration.executeCommand(f):l.sendText(f);let p=null,g=!1;await TA(new Promise(m=>{p=setInterval(()=>{g||(g=!0,(async()=>{try{this._logger.verbose("Polling for noop command result"),c=(await this._getLastCommand(l)).lastCommand,c===f&&(p&&(clearInterval(p),p=null),this._logger.debug("Successfully got noop command result."),m(void 0))}finally{g=!1}})())},100)}),1e3).catch(()=>{this._logger.debug("Timed out waiting for noop command to complete"),Mr().reportEvent({eventName:Qr.vsCodeTerminalTimedOutWaitingForNoopCommand,conversationId:""})}).finally(()=>{p&&(clearInterval(p),p=null)})}let u={terminal:l,command:r,lastCommand:c,output:"",killed:!1,readStream:void 0,exitCode:null};if(this._processes.set(o,u),this._terminalHasShellIntegration(l)){let f=l.shellIntegration.executeCommand(r);u.readStream=f.read(),this._logger.debug(`Using existing shell integration for command: ${r}`)}else if(this._isTerminalBasicallySupported()&&Pt.window.onDidChangeTerminalShellIntegration){let f;f=Pt.window.onDidChangeTerminalShellIntegration(p=>{if(p.terminal===l&&p.shellIntegration&&!u.readStream){let g=p.shellIntegration.executeCommand(r);u.readStream=g.read(),this._logger.debug(`Using shell integration for command: ${r}`),f&&(f.dispose(),f=void 0)}}),setTimeout(()=>{u.readStream||(l.sendText(r),this._logger.debug(`Failed to use shell integration for command: ${r}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalFailedToUseShellIntegration,conversationId:""})),f&&(f.dispose(),f=void 0)},2e3)}else this._logger.debug(`Not using shell integration for command: ${r}`),l.sendText(r);return i.addEventListener("abort",()=>{this.kill(o)}),o}async _createTerminal(r,n){let i=this.shellName==="bash"||this.shellName==="zsh"?{PAGER:"cat",LESS:"-FX",GIT_PAGER:"cat"}:{};e._shellInfo.env&&(i={...i,...e._shellInfo.env}),i&&Object.keys(i).length===0&&(i=void 0);let s=Pt.window.createTerminal({name:r,shellPath:e._shellInfo.path??this.shellName,shellArgs:e._shellInfo.args,cwd:n,env:i,iconPath:{light:Pt.Uri.joinPath(this._extensionRoot,"media","panel-icon-light.svg"),dark:Pt.Uri.joinPath(this._extensionRoot,"media","panel-icon-dark.svg")},isTransient:!0});return this._terminalSettings.startupScript&&this._terminalSettings.startupScript.trim()&&(this._terminalHasShellIntegration(s)?s.shellIntegration.executeCommand(this._terminalSettings.startupScript):s.sendText(this._terminalSettings.startupScript),await fo(100)),s}async kill(r){let n=this._processes.get(r);if(!(!n||n.killed))return this._logger.verbose(`Killing process ${r}`),n.terminal===e._longRunningTerminal?n.terminal.sendText("",!1):n.terminal.dispose(),n.killed=!0,n.exitCode=-1,n.output=await this._getOutputFromPossiblyIncompleteProcess(n,r),n.output}isInLongRunningTerminal(r){let n=this._processes.get(r);return!!n&&n.terminal===e._longRunningTerminal}async readOutput(r){let n=this._processes.get(r);return n?n.exitCode!==null||n.killed?{output:n.output,returnCode:n.exitCode}:(this._logger.verbose(`Reading output for process ${r}`),{output:await this._getOutputFromPossiblyIncompleteProcess(n,r),returnCode:n.exitCode}):void 0}writeInput(r,n){let i=this._processes.get(r);return!i||i.killed?!1:(i.terminal.sendText(n),!0)}listProcesses(){let r=[];for(let[n,i]of this._processes.entries()){let s=i.killed?"killed":"running";r.push({id:n,command:i.command,state:s,returnCode:i.exitCode})}return r}waitForProcess(r,n,i){return new Promise(s=>{(async()=>{let o=this._processes.get(r);if(!o){s({output:"",returnCode:null});return}if(o.exitCode!==null){s({output:o.output,returnCode:o.exitCode});return}let a=setTimeout(()=>{this._logger.verbose(`Process ${r} still running after ${n} seconds.  Timing out.`),Mr().reportEvent({eventName:Qr.vsCodeTerminalWaitTimeout,conversationId:""}),this._waitResolvers.delete(r),this._activePoller&&(clearInterval(this._activePoller),this._activePoller=void 0),this.readOutput(r).then(c=>{s({output:c?.output??"",returnCode:null})})},n*1e3);if(this._logger.verbose(`Waiting for process ${r} to complete.  Shell listener is ${this._shellExecutionListener?"registered":"not registered"}`),o.lastCommand===o.command){this._logger.debug("Last command is the same as the current one."),Mr().reportEvent({eventName:Qr.vsCodeTerminalLastCommandIsSameAsCurrent,conversationId:""});let c=await this.readOutput(r);c?s(c):(this._logger.debug(`Failed to read output for process ${r}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalFailedToReadOutput,conversationId:""}),s({output:"",returnCode:null}))}else this._activePoller&&(clearInterval(this._activePoller),this._activePoller=void 0),this._activePoller=setInterval(()=>{(async()=>{this._logger.verbose(`Polling to see if process ${r} is done.`);let{lastCommand:c,isComplete:u}=await this._getLastCommand(o.terminal);if(u||u===void 0&&c===o.command){this._logger.debug(`Polling determined process ${r} is done.`),Mr().reportEvent({eventName:Qr.vsCodeTerminalPollingDeterminedProcessIsDone,conversationId:""}),clearTimeout(a),clearInterval(this._activePoller),this._activePoller=void 0;let f=await this.readOutput(r);o.output=f?.output??"",o.exitCode=f?.returnCode??null,o.killed=!0,f?s(f):(this._logger.debug(`Failed to read output for process ${r}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalFailedToReadOutput,conversationId:""}),s({output:"",returnCode:null}))}})()},1e3),this._waitResolvers.set(r,c=>{clearTimeout(a),clearInterval(this._activePoller),this._activePoller=void 0,this._waitResolvers.delete(r),s(c)});let l=()=>{clearTimeout(a),clearInterval(this._activePoller),this._activePoller=void 0,this._waitResolvers.delete(r),s({output:"",returnCode:null})};i.addEventListener("abort",l)})()})}async _getOutputFromPossiblyIncompleteProcess(r,n){if(r.readStream){this._logger.debug(`Reading exact intermediate output for process ${n}`);let i="";try{let s=async l=>{let c=new Promise(u=>{setTimeout(()=>u({done:!0,value:void 0}),100)});return Promise.race([l.next(),c])},o=r.readStream[Symbol.asyncIterator](),a=await s(o);for(;!a.done;)a.value!==void 0&&(i+=a.value),a=await s(o)}catch(s){this._logger.debug(`Error reading stream for process ${n}: ${s.message??""}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalFailedToReadOutput,conversationId:""})}return p4(xI(i,this._maxOutputLength))}else return r.terminal.exitStatus||r.terminal.show(!0),await this._getOutputFromClipboard(n)}async _getOutputFromClipboard(r){let n=this._processes.get(r)?.terminal;if(n&&n===e._longRunningTerminal&&!this._terminalHasShellIntegration(n))return(await this._getLastCommandAndOutputFallback()).output;Mr().reportEvent({eventName:Qr.vsCodeTerminalReadingApproximateOutput,conversationId:""});let i=await Pt.env.clipboard.readText();await Pt.env.clipboard.writeText(""),await Pt.commands.executeCommand("workbench.action.terminal.copyLastCommandOutput");let s=await Pt.env.clipboard.readText();return await Pt.env.clipboard.writeText(i),this._logger.verbose(`Read approximate output from clipboard got ${s.trim()}`),xI(s,this._maxOutputLength)}async _getLastCommand(r){if(r&&r===e._longRunningTerminal&&!this._terminalHasShellIntegration(r)){let{command:s,output:o,isComplete:a}=await this._getLastCommandAndOutputFallback();return{lastCommand:s,isComplete:a}}let n=await Pt.env.clipboard.readText();await Pt.env.clipboard.writeText(""),await Pt.commands.executeCommand("workbench.action.terminal.copyLastCommand");let i=await Pt.env.clipboard.readText();return await Pt.env.clipboard.writeText(n),this._logger.verbose(`Read last command from clipboard got ${i.trim()}`),{lastCommand:i}}async _getLastCommandAndOutputFallback(){let r=await Pt.env.clipboard.readText();await Pt.env.clipboard.writeText(""),await Pt.commands.executeCommand("workbench.action.terminal.selectToPreviousCommand"),await Pt.commands.executeCommand("workbench.action.terminal.copySelection");let n=await Pt.env.clipboard.readText();await Pt.commands.executeCommand("workbench.action.terminal.selectAll"),await Pt.commands.executeCommand("workbench.action.terminal.copyAndClearSelection");let i=await Pt.env.clipboard.readText();await Pt.env.clipboard.writeText(r);let s=qCe[this.shellName]??qCe.bash,o=n.split(`
`).shift()??"",a=o.replace(s,"").trim(),f=n.slice(o.length+1).split(`
`).filter(m=>!s.test(m)).join(`
`),p=i.split(`
`).reverse().find(m=>m.trim().length>0),g=p!=null&&p.replace(s,"").trim().length===0;return this._logger.verbose(`Reading last command and output from clipboard got ${n.trim()}, command: ${a}, output: ${f.trim()}, isComplete: ${g}`),{command:a,output:f,isComplete:g}}closeAllProcesses(){for(let r of this._processes.values())r.killed||(r.terminal===e._longRunningTerminal?e._longRunningTerminal.sendText("",!1):r.terminal.dispose());this._processes.clear(),this._activePoller&&(clearInterval(this._activePoller),this._activePoller=void 0)}cleanup(){this.closeAllProcesses(),this._shellExecutionListener&&(this._shellExecutionListener.dispose(),this._shellExecutionListener=void 0),this._cleanupTempDirectories(),this.dispose()}async _cleanupTempDirectories(){for(let r of this._supportedShells)if(r.shellInfo.tempDir)try{await Zk(r.shellInfo.tempDir)}catch(n){this._logger.debug(`Error cleaning up temporary directory: ${n.message}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorCleaningUpTempDir,conversationId:""})}if(e._shellInfo.tempDir)try{await Zk(e._shellInfo.tempDir)}catch(r){this._logger.debug(`Error cleaning up current shell temporary directory: ${r.message}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorCleaningUpTempDir,conversationId:""})}}get _currentCapability(){if(this._supportedShells.length>0){let r=this._supportedShells.find(n=>n.shellInfo.name===e._shellInfo.name&&n.shellInfo.path===e._shellInfo.path);if(r)return r.capability}return{capability:1,details:"Capability information not available"}}_isTerminalBasicallySupported(){let r=this._currentCapability.capability;return this._isBasicallySupported(r)}_isBasicallySupported(r){return r===10||r===9||r===8||r===7||r===6}getLongRunningTerminalInfo(){if(!this._isTerminalBasicallySupported()||!e._longRunningTerminal)return;let r=e._longRunningTerminal.shellIntegration?.cwd;if(r instanceof Pt.Uri)return{terminal_id:0,current_working_directory:r.fsPath}}async _initializeShells(){let r=e._shellInfo;try{if(this._supportedShells=await this._findSupportedShells(),this._supportedShells.length>0){let n=this._getVSCodeDefaultProfile();this._supportedShells.sort((o,a)=>{let l=a.capability.capability-o.capability.capability;if(l!==0)return l;if(n){if(o.shellInfo.name===n.name&&a.shellInfo.name!==n.name)return-1;if(a.shellInfo.name===n.name&&o.shellInfo.name!==n.name)return 1}return 0});let i=this._supportedShells.map(o=>({name:o.shellInfo.name,path:o.shellInfo.path,friendlyName:o.shellInfo.friendlyName,supportString:o.capability.capability===10?"Fully supported":this._isBasicallySupported(o.capability.capability)?"Partially supported":"Not supported"})).filter((o,a,l)=>a===l.findIndex(c=>c.friendlyName===o.friendlyName));this._terminalSettings.supportedShells=i,await this._globalState.save("terminalSettings",this._terminalSettings);let s=this._terminalSettings.selectedShell;if(s){let o=this._supportedShells.find(a=>a.shellInfo.friendlyName===s);o?(e._shellInfo=o.shellInfo,this._logger.debug(`Shell initialization complete. Using saved shell preference: ${e._shellInfo.friendlyName} (${iv[o.capability.capability]})`)):(e._shellInfo=this._supportedShells[0].shellInfo,this._logger.debug(`Shell initialization complete. Saved shell '${s}' not found, using best available: ${e._shellInfo.friendlyName} (${iv[this._supportedShells[0].capability.capability]})`))}else e._shellInfo=this._supportedShells[0].shellInfo,this._logger.debug(`Shell initialization complete. Using shell: ${e._shellInfo.friendlyName} (${iv[this._supportedShells[0].capability.capability]})`)}else e._shellInfo=e._getDefaultShell(),this._logger.debug(`Shell initialization complete. No supported shells found, using default: ${e._shellInfo.friendlyName}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalNoSupportedShellsFound,conversationId:""})}catch(n){this._logger.debug(`Error initializing shells: ${n.message}`),e._shellInfo=e._getDefaultShell(),this._logger.debug(`Shell initialization complete with errors. Using default shell: ${e._shellInfo.friendlyName}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorInitializingShells,conversationId:""})}e._longRunningTerminal&&!wmt(r,e._shellInfo)&&(this._terminalNeedsUpdate=!0)}async _getAllShellsToCheck(){let r=[],n=this._getVSCodeDefaultProfile();n&&r.push(n);let i=this._getVSCodeProfiles();for(let o of i)r.some(a=>a.name===o.name&&a.path===o.path)||r.push(o);let s=await this._createZshShellInfo(i);return s&&r.push(s),r}async _findSupportedShells(){let r=[],n=await this._getAllShellsToCheck(),i=Date.now()-this._enableStart;i<5e3&&(this._logger.debug("First terminal initialization since VSCode startup, delaying shell capability checks"),await fo(5e3-i));for(let s of n){if(!g4(s.name)&&!s.name.includes("powershell")){this._logger.debug(`Skipping unsupported shell: ${s.name}`);continue}try{this._logger.debug(`Checking capabilities for shell: ${s.name} ${s.path||""} ${s.args?.join(" ")||""}`);let o=new m4(s),a=await o.checkCapabilities();o.dispose(),this._logger.debug(`Shell ${s.name} capability: ${iv[a.capability]} - ${a.details}`),r.push({shellInfo:s,capability:a})}catch(o){this._logger.debug(`Error checking capabilities for shell ${s.name}: ${o.message}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorCheckingShellCapability,conversationId:""})}}return r}static _getDefaultShell(){let r=NM(process.platform);return{name:r,path:void 0,args:void 0,env:void 0,friendlyName:r+" (default)",tempDir:void 0}}async _createZshShellInfo(r){if(process.platform!=="darwin"&&process.platform!=="linux")return;let n=r.find(i=>i.name==="zsh")?.path;if(n)try{let i=await this._createZshTempEnvironment();return{name:"zsh",path:n,args:void 0,env:{ZDOTDIR:i},friendlyName:"zsh (vanilla)",tempDir:i}}catch(i){this._logger.debug(`Failed to create temporary zsh environment: ${i.message}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorCreatingZshEnvironment,conversationId:""});return}}async _createZshTempEnvironment(){let r=await t0e("augment-zsh-");return await Ul(bm.default.join(r,".zshrc"),`# Empty .zshrc file created by Augment
`),r}_getOSSection(){return process.platform==="win32"?"windows":process.platform==="darwin"?"osx":"linux"}_processShellInfo(r,n){if(r.name==="git bash"&&process.platform==="win32"){let i=this._getGitBashInfo(r.path,r.args);if(!i){n&&(this._logger.debug("Failed to find/use Git Bash path"),Mr().reportEvent({eventName:Qr.vsCodeTerminalFailedToFindGitBash,conversationId:""}));return}r.name=i.name,r.path=i.path,r.args=i.args}if(r.name.includes("powershell")&&process.platform==="win32"){let i=this._findPowerShellPath();if(!i){n&&(this._logger.debug("Failed to find PowerShell path"),Mr().reportEvent({eventName:Qr.vsCodeTerminalFailedToFindPowerShell,conversationId:""}));return}r.name="powershell",r.path=i}if(r.name&&g4(r.name))return{...r,friendlyName:r.name};if(r.name){n&&(this._logger.debug(`Unsupported shell: ${r.name}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalUnsupportedVSCodeShell,conversationId:""}));return}}_getVSCodeDefaultProfile(){let r=this._getOSSection(),i=Pt.workspace.getConfiguration("terminal.integrated.defaultProfile").get(r);if(typeof i=="string"){let s=Pt.workspace.getConfiguration(`terminal.integrated.profiles.${r}.${i}`),o=i.trim().toLowerCase(),a=s.get("path"),l=s.get("args");return this._processShellInfo({name:o,path:a,args:l},!0)}}_getVSCodeProfiles(){let r=[],n=this._getOSSection(),i=Pt.workspace.getConfiguration(`terminal.integrated.profiles.${n}`),s=Object.keys(i);for(let o of s){let a=i.get(o);if(!a)continue;let l=o.toLowerCase(),c=a.path,u=a.args,f=this._processShellInfo({name:l,path:c,args:u},!1);f&&r.push(f)}return r}_getGitBashInfo(r,n){let i=r;return i||(i=this._findGitBashPath()),!i||!qr(i)?void 0:{name:"bash",path:i,args:n??["--login","-i"],friendlyName:"Git Bash"}}_findGitBashPath(){let r=[`${process.env.ProgramFiles}`,`${process.env.ProgramW6432}`,`${process.env["ProgramFiles(x86)"]}`];for(let n of r){if(!Jk(n))continue;let i=[bm.default.join(n,"Git","bin","bash.exe"),bm.default.join(n,"Git","usr","bin","bash.exe")];for(let s of i)if(qr(s))return s}}_findPowerShellPath(){let r=[`${process.env.ProgramFiles}`,`${process.env.ProgramW6432}`,`${process.env["ProgramFiles(x86)"]}`],n,i;for(let o of r){let a=bm.default.join(o,"PowerShell");if(!(!Jk(o)||!Jk(a))){for(let[l,c]of dm(a))if(c==="Directory"&&l.match(/^\d+$/)){let u=bm.default.join(a,l,"pwsh.exe");qr(u)&&(!n||l>n)&&(n=l,i=u)}}}if(i)return i;let s=["System32","SysNative"];for(let o of s){let a=bm.default.join(process.env.windir??"C:\\Windows",o,"WindowsPowerShell","v1.0","powershell.exe");if(qr(a))return a}}get shellName(){return e._shellInfo.name}_isBuggyOutput(r){return this._currentCapability.capability===9?!0:!Ks("1.98.0")&&!r.includes("\x1B]633;D")&&!r.includes("\x1B]133;D")}_terminalHasShellIntegration(r){return this._isTerminalBasicallySupported()?r.shellIntegration!==void 0:!1}},sv=class extends Cn{constructor(r,n){super(Wi.launchProcess,Vt.Check);this._workspaceManager=r;this.processTools=n}version=2;get description(){return`Launch a new process with a shell command. A process can be waiting (\`wait=true\`) or non-waiting (\`wait=false\`).

If \`wait=true\`, launches the process in an interactive terminal, and waits for the process to complete up to
\`max_wait_seconds\` seconds. If the process ends during this period, the tool call returns. If the timeout
expires, the process will continue running in the background but the tool call will return. You can then
interact with the process using the other process tools.

Note: Only one waiting process can be running at a time. If you try to launch a process with \`wait=true\`
while another is running, the tool will return an error.

If \`wait=false\`, launches a background process in a separate terminal. This returns immediately, while the
process keeps running in the background.

Notes:
- Use \`wait=true\` processes when the command is expected to be short, or when you can't
proceed with your task until the process is complete. Use \`wait=false\` for processes that are
expected to run in the background, such as starting a server you'll need to interact with, or a
long-running process that does not need to complete before proceeding with the task.
- If this tool returns while the process is still running, you can continue to interact with the process
using the other available tools. You can wait for the process, read from it, write to it, kill it, etc.
- You can use this tool to interact with the user's local version control system. Do not use the
retrieval tool for that purpose.
- If there is a more specific tool available that can perform the function, use that tool instead of
this one.

The OS is ${process.platform}. The shell is '${this.processTools.shellName}'.`}inputSchemaJson=JSON.stringify({type:"object",properties:{command:{type:"string",description:"The shell command to execute."},wait:{type:"boolean",description:"Whether to wait for the command to complete."},max_wait_seconds:{type:"number",description:"Number of seconds to wait for the command to complete. Only relevant when wait=true. 10 minutes may be a good default: increase from there if needed."},cwd:{type:"string",description:"Working directory for the command. If not supplied, uses the current working directory."}},required:["command","wait","max_wait_seconds"]});checkToolCallSafe(r){let n=PM(process.platform,this.processTools.shellName),i=r.command;return LM(n,i,this.processTools.shellName)}async call(r,n,i){try{let s=r.wait,o=r.max_wait_seconds,a=r.cwd??fm(this._workspaceManager),l=!!s,c=await this.processTools.launch(r.command,a,i,l);if(typeof c=="string")return ot(c);if(!s)return lr(`Process launched with terminal ID ${c}`);let u=await this.processTools.waitForProcess(c,o,i),f=WCe(c,this.processTools,this._workspaceManager);return u.returnCode===null?lr(`Command may still be running. You can use read-process to get more output
and kill-process to terminate it if needed.
Terminal ID ${c}
Output so far:
<output>
${u.output}
</output>
${f}`):{text:`Here are the results from executing the command.
<return-code>
${u.returnCode}
</return-code>
<output>
${u.output}
</output>
${f}`,isError:u.returnCode!==0}}catch(s){return ot(`Failed to launch process: ${s.message??""}`)}}},OM=class extends Cn{constructor(r){super(Wi.killProcess,Vt.Safe);this._processTools=r}description="Kill a process by its terminal ID.";inputSchemaJson=JSON.stringify({type:"object",properties:{terminal_id:{type:"integer",description:"Terminal ID to kill."}},required:["terminal_id"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.terminal_id,o=await this._processTools.kill(s);return o?lr(`Terminal ${s} killed
<output>${o}</output>`):ot(`Terminal ${s} not found`)}},qM=class extends Cn{constructor(r,n){super(Wi.readProcess,Vt.Safe);this._processTools=r;this._workspaceManager=n}description="Read output from a terminal.\n\nIf `wait=true` and the process has not yet completed, waits for the terminal to complete up to `max_wait_seconds` seconds before returning its output.\n\nIf `wait=false` or the process has already completed, returns immediately with the current output.";inputSchemaJson=JSON.stringify({type:"object",properties:{terminal_id:{type:"integer",description:"Terminal ID to read from."},wait:{type:"boolean",description:"Whether to wait for the command to complete."},max_wait_seconds:{type:"number",description:"Number of seconds to wait for the command to complete. Only relevant when wait=true. 1 minute may be a good default: increase from there if needed."}},required:["terminal_id","wait","max_wait_seconds"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.terminal_id,o=r.wait,a=r.max_wait_seconds;o&&await this._processTools.waitForProcess(s,a,i);let l=await this._processTools.readOutput(s);if(!l)return ot(`Terminal ${s} not found`);let c=WCe(s,this._processTools,this._workspaceManager),u=l.returnCode!==null?"completed":"still running",f=`Here is the output from terminal ${s} (status: ${u}):
<output>${l.output}</output>
`;return l.returnCode!==null&&(f+=`<return-code>
${l.returnCode}
</return-code>
`),c&&(f+=c),lr(f)}},VM=class extends Cn{constructor(r){super(Wi.writeProcess,Vt.Safe);this._processTools=r}description="Write input to a terminal.";inputSchemaJson=JSON.stringify({type:"object",properties:{terminal_id:{type:"integer",description:"Terminal ID to write to."},input_text:{type:"string",description:"Text to write to the process's stdin."}},required:["terminal_id","input_text"]});checkToolCallSafe(r){return!0}call(r,n,i){let s=r.terminal_id,o=r.input_text;return this._processTools.writeInput(s,o)?Promise.resolve(lr(`Input written to terminal ${s}`)):Promise.resolve(ot(`Terminal ${s} not found or write failed`))}},HM=class extends Cn{constructor(r){super(Wi.listProcesses,Vt.Safe);this._processTools=r}description="List all known terminals and their states.";inputSchemaJson=JSON.stringify({type:"object",properties:{},required:[]});checkToolCallSafe(r){return!0}call(r,n,i){let s=this._processTools.listProcesses();if(s.length===0)return Promise.resolve(lr("No processes found"));let o=s.map(l=>{let c=l.state;return l.returnCode!==null&&(c+=` (return code: ${l.returnCode})`),`Terminal ${l.id} [${c}]: ${l.command}`}),a=s.filter(l=>l.state==="running").length;return a===1?o.push(`
There is 1 process still running.`):a>1&&o.push(`
There are ${a} processes still running.`),Promise.resolve(lr(`Here are all known processes:

`+o.join(`
`)))}};function WCe(e,t,r){let n=t.getLongRunningTerminalInfo()?.current_working_directory;if(!t.isInLongRunningTerminal(e)||!n)return;let i=r.safeResolvePathName(n)?.relPath;return i!=null&&!nf(i)&&(i=`//${i}`),`The terminal's current working directory is now \`${i??n}\`.
`}function p4(e){return e.replace(/\x1B(?:[@-Z\\-_]|\[[0-?]*[ -/]*[@-~])/g,"").replace(/(?:\x1b\])?(\d+;[^\x07\x1b]*(?:\x07|\x1b\\))/g,"")}var qCe={powershell:/^\s*(?:PS\s+(?:[^>]*))?\s*>\s*/,bash:/^\s*(?:[^@]*@[^:]*:)?(?:[^$]*)?\$\s*/,zsh:/^\s*(?:[^@]*@[^:]*:)?(?:[^%]*)?%\s*/},iv=(u=>(u[u.unknown=1]="unknown",u[u.unsupportedAPI=2]="unsupportedAPI",u[u.shellNotFound=3]="shellNotFound",u[u.noShellIntegration=4]="noShellIntegration",u[u.noExecutionEvents=5]="noExecutionEvents",u[u.buggyExecutionEvents=6]="buggyExecutionEvents",u[u.noOutput=7]="noOutput",u[u.noisyOutput=8]="noisyOutput",u[u.buggyOutput=9]="buggyOutput",u[u.supported=10]="supported",u))(iv||{}),m4=class extends X{constructor(r){super();this._shellInfo=r;this._startBackgroundCheck()}_result={capability:1,details:"Check not started"};_checkPromise;_logger=j("TerminalCapabilityChecker");_testCommand="echo 'Terminal capability test'";async checkCapabilities(r=!1){if(this._result.capability!==1&&!r)return this._result;if(this._checkPromise)return this._checkPromise;this._checkPromise=this._performCheck();try{return this._result=await this._checkPromise,this._result}finally{this._checkPromise=void 0}}async _startBackgroundCheck(){try{let r=await this.checkCapabilities();this._logger.debug(`Terminal capability check result: ${this._getCapabilityDescription(r)}`)}catch(r){this._logger.debug(`Error during initial terminal capability check: ${r.message}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorCheckingShellCapability,conversationId:""})}}_getCapabilityDescription(r=this._result){return`${iv[r.capability]}: ${r.details}`}async _performCheck(){if(!Pt.window.onDidEndTerminalShellExecution||!Ks("1.93.0"))return{capability:2,details:`VSCode version ${Pt.version} does not support required terminal APIs`};if(!await this._checkShellExists())return{capability:3,details:`Shell ${this._shellInfo.path??this._shellInfo.name} does not exist`};let i=Pt.window.createTerminal({name:"Augment Terminal Capability Check",hideFromUser:!0,shellPath:this._shellInfo?.path??this._shellInfo.name,shellArgs:this._shellInfo?.args,env:this._shellInfo?.env,isTransient:!0});try{let s=await this._listenForShellIntegration(i);if(s.listener&&s.listener.dispose(),!s.shellIntegrationDetected)return{capability:4,details:s.message};let{execution:o,readStream:a}=this._executeTestCommand(i,s.shellIntegrationDetected),c=await this._listenForExecutionEvent(i,o,a);c.listener&&c.listener.dispose();let u;switch(c.capability){case 6:u="Terminal receives execution events but for incorrect commands";break;case 5:u="No execution events received";break;case 7:u="Execution event received but no output was captured";break;case 10:u="Terminal has all required capabilities with exact output";break;case 8:u="Terminal has all required capabilities but output contains extra content";break;case 9:u="Terminal has all required capabilities but output is incorrect";break;default:u="Unknown terminal capability";break}return{capability:c.capability,details:u}}catch(s){return this._logger.debug(`Terminal capability check failed: ${s.message}`),Mr().reportEvent({eventName:Qr.vsCodeTerminalErrorCheckingShellCapability,conversationId:""}),{capability:1,details:`Check failed with error: ${s.message}`}}finally{i&&i.dispose()}}_listenForShellIntegration(r){return new Promise(n=>{if(!r){n({message:"Terminal not created",shellIntegrationDetected:!1});return}if(this._terminalHasShellIntegration(r)){n({message:"Shell integration already available",shellIntegrationDetected:!0});return}let i=Pt.window;if(i.onDidChangeTerminalShellIntegration){let s=i.onDidChangeTerminalShellIntegration(o=>{o.terminal===r&&o.shellIntegration&&n({message:"Shell integration detected",shellIntegrationDetected:!0})});this._createTimeout("Shell integration",3e3).then(o=>{n({message:o.message,listener:s,shellIntegrationDetected:!1})})}else n({message:"onDidChangeTerminalShellIntegration API not available",shellIntegrationDetected:!1})})}_listenForExecutionEvent(r,n,i){return new Promise(s=>{let o=Pt.window;if(!o.onDidEndTerminalShellExecution){s({capability:5});return}let a=o.onDidEndTerminalShellExecution(async l=>{let c=l.terminal===r&&l.execution.commandLine.value===this._testCommand,u=l.terminal===r&&l.execution.commandLine.value!==this._testCommand;if(c){let f=7;if(i)try{let p="";for await(let m of i)p+=m;let g=p4(p.trim());g&&g==="Terminal capability test"?f=10:g&&g.includes("Terminal capability test")?f=8:p&&p.length>0&&(f=9)}catch(p){this._logger.debug(`Error reading execution output: ${p.message}`)}s({capability:f})}else u&&(this._logger.debug(`Buggy execution event received for command: ${l.execution.commandLine.value}`),s({capability:6}))});this._createTimeout("Execution event",2e3).then(()=>{s({listener:a,capability:5})})})}_executeTestCommand(r,n){if(!r||!n)return{};try{let i=r;if(i.shellIntegration){let s=i.shellIntegration.executeCommand(this._testCommand),o=s.read();return{execution:s,readStream:o}}else return r.sendText(this._testCommand),{}}catch(i){return this._logger.debug(`Error executing test command: ${i.message}`),{}}}_createTimeout(r,n){return new Promise(i=>{let s=setTimeout(()=>{i({message:`Timeout waiting for ${r}`})},n);this.addDisposable(new Pt.Disposable(()=>clearTimeout(s)))})}_terminalHasShellIntegration(r){return!!r.shellIntegration}async _checkShellExists(){let r=this._shellInfo.path??this._shellInfo.name;try{return this._shellInfo.path&&nf(this._shellInfo.path)?qr(this._shellInfo.path):new Promise(n=>{try{let i=(0,HCe.spawn)(r,[],{shell:!1,stdio:"ignore"});i.on("error",()=>{n(!1)}),i.on("exit",()=>{n(!0)}),setTimeout(()=>{try{i.kill()}catch{}n(!0)},2e3)}catch{n(!1)}})}catch{return!1}}dispose(){super.dispose()}};var GCe=(e,t,r,n,i,s,o)=>a=>new A4(a,t,e,r,n,i,s,o),A4=class e extends HA{constructor(r,n,i,s,o,a,l,c){let u=[],f;r===Xr.agent?(u.push(new y4(n,s,i,o)),o.currentFlags?.vscodeAgentEditTool!==tI.strReplaceEditor?(u.push(new WM(n)),u.push(new v4(n,i,s))):u.push(new BM(s,n)),u.push(new C4),u.push(new b4(n)),f=new UM(a,l,c),u.push(new sv(n,f)),u.push(new OM(f)),u.push(new qM(f,n)),u.push(new VM(f)),u.push(new HM(f))):u.push(new WM(n));super(u,Gi.localToolHost);this._chatMode=r;this._workspaceManager=n;this._apiServer=i;this._checkpointManager=s;this._featureFlagManager=o;this._extensionRoot=a;this._globalState=l;this._enableStart=c;this._terminalProcessTools=f}_terminalProcessTools;async close(r=!1){await super.close(),this._terminalProcessTools!==void 0&&this._terminalProcessTools.cleanup()}closeAllToolProcesses(){return this._terminalProcessTools!==void 0&&this._terminalProcessTools.closeAllProcesses(),Promise.resolve()}factory(r){return new e(this._chatMode,this._workspaceManager,this._apiServer,this._checkpointManager,this._featureFlagManager,this._extensionRoot,this._globalState,this._enableStart)}},WM=class extends Cn{constructor(r){super(Wi.readFile,Vt.Safe);this._workspaceManager=r}description="Read a file.";inputSchemaJson=JSON.stringify({type:"object",properties:{file_path:{type:"string",description:"The path of the file to read."}},required:["file_path"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.file_path;try{let o=await hm(s,this._workspaceManager);return o===void 0?ot(`Cannot read file: ${s}`):lr(o)}catch(o){return ot(`Failed to read file: ${s}: ${o.message??""}`)}}},y4=class extends Cn{constructor(r,n,i,s){super(Wi.saveFile,Vt.Safe);this._workspaceManager=r;this._checkpointManager=n;this._requestIdCreator=i;this._featureFlagManager=s;this._featureFlagManager.currentFlags?.agentSaveFileToolInstructionsReminder&&(this.description=this.descriptionWithInstructionsReminder,this.inputSchemaJson=this.inputSchemaJsonWithInstructionsReminder)}description="Save a new file. Use this tool to write new files with the attached content. It CANNOT modify existing files. Do NOT use this tool to edit an existing file by overwriting it entirely. Use the str-replace-editor tool to edit existing files instead.";inputSchemaJson=JSON.stringify({type:"object",properties:{file_path:{type:"string",description:"The path of the file to save."},file_content:{type:"string",description:"The content of the file."},add_last_line_newline:{type:"boolean",description:"Whether to add a newline at the end of the file (default: true)."}},required:["file_path","file_content"]});maxLines=300;instructions=`LIMIT THE FILE CONTENT TO AT MOST ${this.maxLines} LINES. IF MORE CONTENT NEEDS TO BE ADDED USE THE str-replace-editor TOOL TO EDIT THE FILE AFTER IT HAS BEEN CREATED.`;descriptionWithInstructionsReminder=`Save a new file. Use this tool to write new files with the attached content. Generate \`instructions_reminder\` first to remind yourself to limit the file content to at most ${this.maxLines} lines.It CANNOT modify existing files. Do NOT use this tool to edit an existing file by overwriting it entirely. Use the str-replace-editor tool to edit existing files instead.`;inputSchemaJsonWithInstructionsReminder=JSON.stringify({type:"object",properties:{instructions_reminder:{type:"string",description:`Should be exactly this string: '${this.instructions}'`},file_path:{type:"string",description:"The path of the file to save."},file_content:{type:"string",description:"The content of the file."},add_last_line_newline:{type:"boolean",description:"Whether to add a newline at the end of the file (default: true)."}},required:["instructions_reminder","file_path","file_content"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.file_path;try{let o=r.file_content,a=r.add_last_line_newline??!0,l=o+(a?`
`:""),c=await hm(s,this._workspaceManager)??"",u=qu(s,this._workspaceManager);if(u===void 0)return ot(`Cannot resolve path: ${s}`);if(qr(u.absPath))return ot(`File already exists: ${u.absPath}`);let f=new un(u,void 0,l,{});if(c===l)return f.dispose(),lr(`No changes made to file {${s}}`);let p=n.at(-1)?.request_id??this._requestIdCreator.createRequestId(),g=this._checkpointManager.currentConversationId??"";return await this._checkpointManager.addCheckpoint({conversationId:g,path:u},{sourceToolCallRequestId:p,timestamp:Date.now(),document:f,conversationId:g}),lr(`File saved.  Saved file {${s}}`)}catch(o){return ot(`Failed to save file: ${s}: ${o.message??""}`)}}},v4=class extends Cn{constructor(r,n,i){super(Wi.editFile,Vt.Safe);this._workspaceManager=r;this._apiServer=n;this._checkpointManager=i}_maxDiagnosticDelayMs=5e3;description=`
Edit a file. Accepts a file path and a description of the edit.
This tool can edit whole files.
The description should be detailed and precise, and include all required information to perform the edit.
It can include both natural language and code. It can include multiple code snippets to described different
edits in the file. It can include descriptions of how to perform these edits precisely.

All the contents that should go in a file should be placed in a markdown code block, like this:

<begin-example>
Add a function called foo.

\`\`\`
def foo():
    ...
\`\`\`
</end-example>

This includes all contents, even if it's not code.

Be precise or I will take away your toys.

Prefer to use this tool when editing parts of a file.
`;inputSchemaJson=JSON.stringify({type:"object",properties:{file_path:{type:"string",description:"The path of the file to edit."},edit_summary:{type:"string",description:"A brief description of the edit to be made. 1-2 sentences."},detailed_edit_description:{type:"string",description:"A detailed and precise description of the edit. Can include natural language and code snippets."}},required:["file_path","edit_summary","detailed_edit_description"]});checkToolCallSafe(r){return!0}async call(r,n,i){let s=r.file_path,o;try{let a=r.edit_summary,l=r.detailed_edit_description,c=await hm(s,this._workspaceManager);if(c===void 0)return ot(`Cannot read file: ${s}`);let u=qu(s,this._workspaceManager);if(u===void 0)return ot(`Cannot resolve path: ${s}`);let f=this._getDiagnostics();o=this._apiServer.createRequestId();let p=await this._apiServer.agentEditFile(o,s,a,l,c,i);if(p.isError)return ot(`Failed to edit file: ${s}`,o);let g=new un(u,c,p.modifiedFileContents,{});if(c===p.modifiedFileContents)return g.dispose(),lr(`No changes made to file {${s}}`,o);let m=n.at(-1)?.request_id??o,y=this._checkpointManager.currentConversationId??"";await this._checkpointManager.addCheckpoint({conversationId:y,path:u},{sourceToolCallRequestId:m,timestamp:Date.now(),document:g,conversationId:y});let v=await this._waitForNewDiagnostics(f),C=this._filterDiagnosticsMap(v,f),E=Array.from(C.entries()).map(([N,W])=>`${N}
${W.map(Z=>`${Z.range.start.line}-${Z.range.end.line}: ${Z.message}`).join(`
`)}`).join(`

`),w=v.get(u.absPath)??[],R=this._filterDiagnostics(w,C.get(u.absPath)??[]).map(N=>`${N.range.start.line}-${N.range.end.line}: ${N.message}`).join(`
`);return lr(`File edited successfully.  Saved file {${s}}.  New diagnostics:
${E}

Additional ${s} diagnostics:
${R}`,o)}catch(a){return ot(`Failed to edit file: ${s}: ${a.message??""}`,o)}}_getDiagnostics(){let r=new Map;return Em.languages.getDiagnostics().forEach(([n,i])=>{i.length>0&&r.set(n.fsPath,i)}),r}_filterDiagnosticsMap(r,n){let i=new Map;return r.forEach((s,o)=>{let a=n.get(o)??[],l=this._filterDiagnostics(s,a);l.length>0&&i.set(o,l)}),i}_filterDiagnostics(r,n){return r.filter(i=>!n.some(s=>i.range.start.line===s.range.start.line&&i.range.end.line===s.range.end.line&&i.message===s.message&&i.severity===s.severity))}async _waitForNewDiagnostics(r){let n=Date.now(),i=this._getDiagnostics();for(;Date.now()-n<this._maxDiagnosticDelayMs;){let s=this._getDiagnostics(),o=this._filterDiagnosticsMap(s,r);if(this._hasDifferentDiagnostics(o,this._filterDiagnosticsMap(i,r)))return s;i=s,await fo(1e3)}return i}_hasDifferentDiagnostics(r,n){if(r.size!==n.size)return!0;for(let[i,s]of r){let o=n.get(i);if(!o||s.length!==o.length)return!0;for(let a=0;a<s.length;a++){let l=s[a],c=o[a];if(l.range.start.line!==c.range.start.line||l.range.end.line!==c.range.end.line||l.message!==c.message||l.severity!==c.severity)return!0}}return!1}},C4=class extends Cn{constructor(){super(Wi.openBrowser,Vt.Safe)}description="Open a URL in the default browser.\n\n1. The tool takes in a URL and opens it in the default browser.\n2. The tool does not return any content. It is intended for the user to visually inspect and interact with the page. You will not have access to it.\n3. You should not use `open-browser` on a URL that you have called the tool on before in the conversation history, because the page is already open in the user's browser and the user can see it and refresh it themselves. Each time you call `open-browser`, it will jump the user to the browser window, which is highly annoying to the user.";inputSchemaJson=JSON.stringify({type:"object",properties:{url:{type:"string",description:"The URL to open in the browser."}},required:["url"]});checkToolCallSafe(t){return!0}async call(t,r,n){try{let i=t.url,s=Em.Uri.parse(i);return await Em.env.openExternal(s)?lr(`Opened ${i} in browser`):ot(`Failed to open ${i} in browser: system denied the request`)}catch(i){return ot(`Failed to open URL in browser: ${i.message??""}`)}}},b4=class extends Cn{constructor(r){super(Wi.diagnostics,Vt.Safe);this._workspaceManager=r}description="Get issues (errors, warnings, etc.) from the IDE.";inputSchemaJson=JSON.stringify({type:"object",properties:{paths:{type:"array",items:{type:"string"},description:"Optional list of file paths to get issues for from the IDE. If not provided, returns all issues."}},required:[]});checkToolCallSafe(r){return!0}async call(r,n,i){try{let s=r.paths,o=this._getDiagnostics(),a=o;if(s&&s.length>0){a=new Map;for(let c of s)for(let[u,f]of o.entries())u.includes(c)&&a.set(u,f)}let l=await tM(a,this._workspaceManager);return l.trim()===""?lr("No diagnostics found."):lr(`The IDE reports the following issues:
${l}`)}catch(s){return ot(`Failed to get diagnostics: ${s.message??""}`)}}_getDiagnostics(){let r=new Map;return Em.languages.getDiagnostics().forEach(([n,i])=>{i.length>0&&r.set(n.fsPath,i)}),r}};var GM=class{constructor(t,r){this._apiServer=t;this._configListener=r}_logger=j("VSCodeRemoteInfo");async retrieveRemoteTools(t){try{return(await this._apiServer.listRemoteTools(t)).tools}catch(r){return this._logger.error("Failed to list remote tools",r),[]}}filterToolsWithExtraInput(t){let r=new Set;for(let n of t)this._getExtraToolInput(n)!==void 0&&r.add(n);return Promise.resolve(r)}async runRemoteTool(t,r,n,i,s){return await this._apiServer.runRemoteTool(t,r,n,i,this._getExtraToolInput(i),s)}_getExtraToolInput(t){switch(t){case Mn.Jira:case Mn.Confluence:return this._configListener.config.integrations.atlassian;case Mn.Notion:return this._configListener.config.integrations.notion;case Mn.Linear:return this._configListener.config.integrations.linear;case Mn.GitHubApi:return this._configListener.config.integrations.github;default:return}}};var $Ce=q(require("vscode"));var $M=class e{constructor(t){this._extensionContext=t}static assetSubdirectory="augment-user-assets";async saveAsset(t,r){let n=await this._getUri(t);await ZAe(n.fsPath,r)}async loadAsset(t){let r=await this._getUri(t);try{let n=await jk(r.fsPath);return new Uint8Array(n)}catch{return}}async deleteAsset(t){let r=await this._getUri(t);return await e0e(r.fsPath)}async _getUri(t){let r=this._extensionContext.storageUri??this._extensionContext.globalStorageUri,n=Mt(r.fsPath,e.assetSubdirectory);await Pl(n)||await Ll(n);let i=qa(t);if(i){let s=Mt(n,i);await Pl(s)||await Ll(s)}return $Ce.Uri.file(Mt(n,t))}};var Ebe=q(require("vscode"));var bbe=q(require("path")),zi=q(require("vscode"));var Hl=q(require("vscode"));var df=q(require("vscode"));var YCe=q(require("assert")),KM=q(require("vscode"));var YM=class extends X{constructor(r){super();this._config=r;this._logger=j("CommandManager"),this.addDisposable(new KM.Disposable(()=>{this._commands.forEach((n,i)=>{n.unregister(),this._commands.delete(i)})})),this.addDisposable(this._config.onDidChange(()=>{this.register(this.allCommands)}))}_commands=new Map;_groups=[];_logger;register(r){for(let n of r){if(this._commands.has(n.commandID)){this._commands.get(n.commandID)?.update(this._config);continue}n.register(this._config),this._commands.set(n.commandID,n)}}registerGroup(r,n){this._logger.debug(`Registering group '${r}' with ${n.length} commands.`),this._groups.push({name:r,commands:n}),this.register(n)}get availableCommands(){return Array.from(this._commands.values()).filter(r=>r.isRegistered&&r.canRun())}get availableCommandGroups(){let r=[];for(let n=0;n<this._groups.length;n++){let{name:i,commands:s}=this._groups[n],o=s.filter(a=>a.isRegistered&&a.canRun());o.length!==0&&(r.length>0&&r[r.length-1].name===i?r[r.length-1].commands.push(...o):r.push({name:i,commands:o}))}return r}get allCommands(){return Array.from(this._commands.values())}},At=class extends X{constructor(r=void 0,n=!0){super();this._title=r;this._showInActionPanel=n;let i=this.constructor;typeof i.commandID=="string"&&(this._commandID=i.commandID),this.addDisposable({dispose:()=>this.unregister()})}_registration;_logger=j("AugmentCommand");static commandID;_commandID;get commandID(){return(0,YCe.default)(typeof this._commandID=="string",`commandID must be defined on subclass ${this.constructor.name}`),this._commandID}get title(){if(typeof this._title=="string")return this._title;if(typeof this._title=="function")return this._title()}get showInActionPanel(){return this._showInActionPanel}get isRegistered(){return this._registration!==void 0}canRun(){return!0}register(r){this._registration===void 0&&(this.type==="debug"&&!r.config.enableDebugFeatures||(this._registration=KM.commands.registerCommand(this.commandID,(...n)=>{if(!this.canRun()){this._logger.debug(`Not running '${this.commandID}' command with type ${this.type}.`);return}this.run(...n)})))}update(r){this.type==="debug"&&(r.config.enableDebugFeatures?this.register(r):this.dispose())}unregister(){this._registration?.dispose(),this._registration=void 0}};var sa=class extends At{constructor(r,n=void 0,i=!0){super(n,i);this._syncingEnabledTracker=r}_syncingEnabled(){return this._syncingEnabledTracker.syncingEnabledState==="enabled"||this._syncingEnabledTracker.syncingEnabledState==="partial"}canRun(){return this._syncingEnabled()}};var JCe=q(require("os")),$a=q(require("vscode"));var KCe=q(require("vscode"));function zCe(e){return e.absPath.startsWith("Untitled-")}function JM(e){return KCe.workspace.textDocuments.find(r=>r.isUntitled&&r.uri.path===e.absPath)}var Yu=class e extends un{_instance=crypto.randomUUID();constructor(t,r,n,i){let s=JCe.default.EOL;n!==void 0&&(n=n.endsWith(s)?n:n+s),r!==void 0&&(r=r.endsWith(s)?r:r+s),super(t,r,n,{...i}),this.addDisposable($a.workspace.onDidChangeTextDocument(this._onBaseDocUpdated)),this.addDisposable(this.onOriginalUpdated(()=>void this._write()))}static fromPathName=async(t,r,n)=>{let i=new e(t,"","",{logger:n}),s=await i._read(),o=s===""&&!await i._fileExists()?void 0:s;return i.updateCodeVersions(o,r??o),i};_fileExists=async()=>{try{return await $a.workspace.fs.stat($a.Uri.file(this.filePath.absPath)),!0}catch{return!1}};_read=async()=>{let t=await this._getVsCodeTextDocument();return t?t.getText():""};_write=async()=>{if(this.originalCode===void 0)try{let r=$a.Uri.file(this.filePath.absPath);await this._fileExists()&&(this._opts.logger?.debug(`Deleting file ${this.filePath.absPath}`),await $a.workspace.fs.delete(r));return}catch(r){this._opts.logger?.error(`Failed to delete file ${this.filePath.absPath}: ${String(r)}`);return}let t=await this._getVsCodeTextDocument();if(t&&t.getText()!==this.originalCode){this._opts.logger?.debug(`Writing to doc ${this._instance}`);let r=new $a.WorkspaceEdit;r.replace(t.uri,new $a.Range(0,0,Number.MAX_SAFE_INTEGER,0),this.originalCode),await $a.workspace.applyEdit(r)}};_getVsCodeTextDocument=async()=>{try{let t;if(this.isUntitled?t=JM(this.filePath):t=await $a.workspace.openTextDocument(this.filePath.absPath),t===void 0)throw new Error(`Failed to open document ${this.filePath.absPath}`);return t}catch(t){this._opts.logger?.error(`Failed to read file ${this.filePath.absPath}: ${String(t)}`);return}};_onBaseDocUpdated=t=>{if(t.document.uri.fsPath===this.absPath){let r=t.document.getText();if(r===this.originalCode)return;this.updateOriginal(r)}}};var _m=q(require("vscode")),mx=`

`;function Bo(e){return e.scheme==="vscode-notebook-cell"}function jCe(e){let t=_m.window.activeNotebookEditor?.notebook;return t?Smt(e,t)?[E4(t),Imt(t,e)]:[void 0,0]:[void 0,0]}function ZCe(e){if(Bo(e.uri)){for(let t of _m.workspace.notebookDocuments)for(let r of t.getCells())if(r.document===e)return t}}function E4(e){return ov(e.getCells())}function Smt(e,t){let r=t.getCells().find(n=>n.document===e);return r?r.kind===_m.NotebookCellKind.Code:!1}function Imt(e,t){let n=e.getCells().findIndex(i=>i.document===t);return n===-1?0:Bmt(e,n,!0)}function Bmt(e,t,r){let n=ov(e.getCells().slice(0,t));return r&&n?n.length+mx.length:n.length}function ov(e){return e.filter(n=>n.kind===_m.NotebookCellKind.Code).map(n=>n.document.getText()).join(mx)}function uf(e){return e.getCells!==void 0}var jM=class extends At{constructor(r,n,i){super();this._extension=r;this._extensionUri=n;this._apiServer=i}static commandID="vscode-augment.internal-dv.o";type="public";run=async(...r)=>{if(!this._extension.workspaceManager)throw new Error("No workspace manager");if(!this._extension.keybindingWatcher)throw new Error("No keybinding watcher");let[n,i,s]=r,o=XCe(n);if(o===void 0)return;if(o===null)return;let a=$_(o),l=o.fsPath.replace(a.fsPath,""),c=new Le(a.fsPath,l);vn.createOrShow({extensionUri:this._extensionUri,workspaceManager:this._extension.workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._extension.keybindingWatcher,fuzzyFsSearcher:this._extension.fuzzyFsSearcher,fuzzySymbolSearcher:this._extension.fuzzySymbolSearcher,workTimer:this._extension.workTimer},{document:await Yu.fromPathName(c,i),...s})};canRun(){return!0}},av=class extends sa{constructor(r,n,i,s,o){super(o);this._extension=r;this._extensionUri=n;this._apiServer=i;this._guidelinesWatcher=s}static commandID="vscode-augment.internal-dv.i";type="public";run=async(...r)=>{if(!this._extension.workspaceManager)throw new Error("No workspace manager");if(!this._extension.keybindingWatcher)throw new Error("No keybinding watcher");let n=df.window.activeTextEditor;if(!n){df.window.showInformationMessage("No active editor.");return}if(Bo(n.document.uri)){df.window.showInformationMessage("Code instructions are not supported in notebooks.");return}let[i,s,o]=r,a=XCe(i);if(a===void 0)return;if(a===null)return;let l=$_(a),c=a.fsPath.replace(l.fsPath,""),u=new Le(l.fsPath,c),f=await Yu.fromPathName(u,s),p={...o,document:f,guidelinesWatcher:this._guidelinesWatcher},g=n.selection;p.instruction={selection:{start:{line:g.start.line,character:g.start.character},end:{line:g.end.line,character:g.end.character}}},vn.createOrShow({extensionUri:this._extensionUri,workspaceManager:this._extension.workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._extension.keybindingWatcher,fuzzyFsSearcher:this._extension.fuzzyFsSearcher,fuzzySymbolSearcher:this._extension.fuzzySymbolSearcher,workTimer:this._extension.workTimer},p)};canRun(){let r=this._extension.featureFlagManager.currentFlags,n=df.window.activeTextEditor;return!!(r.enableInstructions&&n&&!Bo(n.document.uri))}},lv=class extends At{static commandID="vscode-augment.internal-dv.aac";type="public";constructor(){super()}run(){vn.currentPanel&&vn.controller?.diffViewMessageHandler.acceptAllChunks()}canRun(){return!0}},cv=class extends At{static commandID="vscode-augment.internal-dv.afc";type="public";constructor(){super()}run(){vn.currentPanel&&vn.controller?.diffViewMessageHandler.acceptFocusedChunk()}canRun(){return!0}},uv=class extends At{static commandID="vscode-augment.internal-dv.rfc";type="public";constructor(){super()}run(){vn.currentPanel&&vn.controller?.diffViewMessageHandler.rejectFocusedChunk()}canRun(){return!0}},dv=class extends At{static commandID="vscode-augment.internal-dv.fpc";type="public";constructor(){super()}run(){vn.currentPanel&&vn.controller?.diffViewMessageHandler.focusPreviousChunk()}canRun(){return!0}},fv=class extends At{static commandID="vscode-augment.internal-dv.fnc";type="public";constructor(){super()}run(){vn.currentPanel&&vn.controller?.diffViewMessageHandler.focusNextChunk()}canRun(){return!0}},hv=class extends At{static commandID="vscode-augment.internal-dv.c";type="public";constructor(){super()}run(){vn.currentPanel&&vn.currentPanel.dispose()}canRun(){return!0}};function XCe(e){return e===void 0?df.window.activeTextEditor?.document.uri:e===null?null:e instanceof df.Uri?e:df.Uri.parse(e)}var lF=q(require("vscode"));function ZM(){return{startLineNumber:null,endLineNumber:null,newText:"",oldText:"",hasYieldedNewChunk:!1,currOffset:null,startRefined:!1,endRefined:!1,newTextBuffer:"",prefixOverlapChecked:!1}}function XM(e){return!jn(e.startLineNumber)&&!jn(e.endLineNumber)&&!jn(e.newText)}function ibe(e){return!e.startRefined&&!jn(e.startLineNumber)&&e.oldText.trim().length>0}function sbe(e){return!e.endRefined&&!jn(e.endLineNumber)&&e.oldText.trim().length>0}function Dmt(e,t){if(ibe(e)){let{isPureInsertion:r,lineBefore:n}=ebe(e);if(r)e.startLineNumber=Ax(t,e.startLineNumber,n,20)+1;else{let s=e.oldText.replaceAll(/\n$/g,"").split(`
`)[0];e.startLineNumber=Ax(t,e.startLineNumber,s,20)}e.startRefined=!0}if(sbe(e)){let{isPureInsertion:r}=ebe(e);if(r)e.endLineNumber=e.startLineNumber;else{let n=e.oldText.replaceAll(/\n$/g,"").split(`
`),i=n[n.length-1];e.endLineNumber=Ax(t,e.endLineNumber-1,i,20)+1}e.endRefined=!0}}function eF(e){let t=(e.newText.match(/\n/g)||[]).length;return{lineChange:{originalStartLineNumber:e.startLineNumber,originalEndLineNumber:e.endLineNumber?e.endLineNumber:e.startLineNumber,modifiedStartLineNumber:e.startLineNumber,modifiedEndLineNumber:e.startLineNumber+t},newText:e.newText}}function obe(e,t){let{replacementStartLine:r,replacementEndLine:n,replacementText:i,replacementOldText:s}=t;return jn(r)||(e.startLineNumber=r),jn(n)||(e.endLineNumber=n),jn(i)||(e.newText+=i),jn(s)||(e.oldText+=s),e}async function*abe(e,t){let r=[],n=ZM(),i=e.split(`
`);for await(let s of cbe(t)){let{replacementStartLine:o,replacementOldText:a}=s;if((!jn(o)||!jn(a))&&XM(n)){let l=eF(n),c=n.currOffset??rF(l,r);r.push(l);let u=tF(l,c);i=rbe([...i],u),n=ZM()}if(n=obe(n,s),ibe(n)){let c=n.oldText.replaceAll(/\n$/g,"").split(`
`)[0];n.startLineNumber=Ax(e,n.startLineNumber,c,20)}if(sbe(n)){let l=n.oldText.replaceAll(/\n$/g,"").split(`
`),c=l[l.length-1];n.endLineNumber=Ax(e,n.endLineNumber,c,20)+1}if(XM(n)){let l=eF(n);n.currOffset=n.currOffset??rF(l,r);let c=tF(l,n.currOffset);yield rbe([...i],c).join(`
`)}}}function Ax(e,t,r,n){let i=e.split(`
`).map(s=>s.trimEnd());if(r=r.trimEnd(),i[t-1]===r)return t;for(let s=1;s<=n;s++){if(t>s&&i[t-s-1]===r)return t-s;if(t+s<=i.length&&i[t+s-1]===r)return t+s}return t}function Tmt(e){return!jn(e.startLineNumber)&&!e.hasYieldedNewChunk}function lbe(e,t,r,n){let i="";if(jn(e.startLineNumber))throw new Error("Start line should be already set when replacement text is set");let s=e.newTextBuffer.split(/(?<=\n)/),o=t.split(/(?<=\n)/).slice(0,e.startLineNumber-1);if(!e.prefixOverlapChecked){let c=Math.min(r,o.length);if(s.length<=c&&!n)return i;for(let u=c;u>=1;u--){let f=!0;for(let p=0;p<u;p++)if(s[p]!==o[o.length-u+p]){f=!1;break}if(f){s=s.slice(u),e.newText=e.newText.split(/(?<=\n)/).slice(u).join("");break}}e.prefixOverlapChecked=!0}if(i=s.slice(0,-r).join(""),s=s.slice(-r),!n)return e.newTextBuffer=s.join(""),i;if(jn(e.endLineNumber))throw new Error("End line should be already set when edit is completed.");let a=t.split(/(?<=\n)/).slice(e.endLineNumber-1),l=Math.min(r,a.length);for(let c=l;c>=1;c--){let u=!0;for(let f=0;f<c;f++)if(s[s.length-c+f]!==a[f]){u=!1;break}if(u){s=s.slice(0,-c),e.newText=e.newText.split(/(?<=\n)/).slice(0,-c).join("");break}}return e.newTextBuffer="",i+=s.join(""),i.length>0&&!i.endsWith(`
`)&&(i+=`
`),i}function ebe(e){if(e.oldText.length===0)return{isPureInsertion:!1,lineBefore:""};let t=e.oldText.split(`
`),r=t[t.length-1],n="PURE INSERTION AFTER LINE:";return r.startsWith(n)?{isPureInsertion:!0,lineBefore:r.substring(n.length)}:{isPureInsertion:!1,lineBefore:""}}function*tbe(e,t,r){let n=lbe(e,r,3,!0);n.length>0&&(yield{chunkContinue:{newText:n}});let i=eF(e),s=rF(i,t),o=tF(i,s);yield{chunkEnd:{originalStartLine:e.startLineNumber,originalEndLine:e.endLineNumber,stagedStartLine:o.lineChange.originalStartLineNumber,stagedEndLine:o.lineChange.originalEndLineNumber}},t.push(Rmt(i,r))}function Rmt(e,t){let r=t.split(/(?<=\n)/),n={originalStartLineNumber:e.lineChange.originalStartLineNumber,originalEndLineNumber:e.lineChange.originalEndLineNumber,modifiedStartLineNumber:e.lineChange.modifiedStartLineNumber,modifiedEndLineNumber:e.lineChange.modifiedEndLineNumber},i=e.newText.split(/(?<=\n)/);for(;n.originalStartLineNumber<n.originalEndLineNumber&&i.length>0;){let s=i[0];if(r[n.originalStartLineNumber-1]!==s)break;n.originalStartLineNumber++,n.modifiedStartLineNumber++,i=i.slice(1)}for(;n.originalStartLineNumber<n.originalEndLineNumber&&i.length>0;){let s=i[i.length-1];if(r[n.originalEndLineNumber-2]!==s)break;n.originalEndLineNumber--,n.modifiedEndLineNumber--,i=i.slice(0,-1)}return{lineChange:{originalStartLineNumber:n.originalStartLineNumber,originalEndLineNumber:n.originalEndLineNumber,modifiedStartLineNumber:n.modifiedStartLineNumber,modifiedEndLineNumber:n.modifiedEndLineNumber},newText:i.join("")}}async function*nF(e,t){let r=[],n=ZM();for await(let i of cbe(t)){let{text:s,replacementStartLine:o,replacementOldText:a}=i;if((!jn(o)||!jn(a)||!jn(s))&&XM(n)&&(yield*tbe(n,r,e),n=ZM()),n=obe(n,i),Dmt(n,e),Tmt(n)){let l=eF(n),c=rF(l,r),u=tF(l,c);yield{newChunkStart:{originalStartLine:n.startLineNumber,stagedStartLine:u.lineChange.originalStartLineNumber}},n.hasYieldedNewChunk=!0}jn(i.replacementText)||(n.newTextBuffer+=i.replacementText,yield{chunkContinue:{newText:lbe(n,e,3,!1)}})}XM(n)&&(yield*tbe(n,r,e))}async function*cbe(e){for await(let t of e)jn(t.replacementOldText)||(yield{text:"",replacementOldText:t.replacementOldText}),jn(t.replacementStartLine)||(yield{text:"",replacementStartLine:t.replacementStartLine}),jn(t.replacementText)||(yield{text:"",replacementText:t.replacementText}),jn(t.replacementEndLine)||(yield{text:"",replacementEndLine:t.replacementEndLine})}function rbe(e,t){let r=t.newText?t.newText.replaceAll(/\n$/g,"").split(`
`):[],n=t.lineChange.originalStartLineNumber-1,i=t.lineChange.originalEndLineNumber-t.lineChange.originalStartLineNumber;return e.splice(n,i,...r),e}function tF(e,t){return{lineChange:{originalStartLineNumber:e.lineChange.originalStartLineNumber+t,originalEndLineNumber:e.lineChange.originalEndLineNumber+t,modifiedStartLineNumber:e.lineChange.modifiedStartLineNumber+t,modifiedEndLineNumber:e.lineChange.modifiedEndLineNumber+t},newText:e.newText}}function rF(e,t){let r=0;for(let n of t)r+=kmt(e,n);return r}function kmt(e,t){if(nbe(e,t))return 0;if(nbe(t,e)){let r=t.lineChange.originalEndLineNumber-t.lineChange.originalStartLineNumber;return t.lineChange.modifiedEndLineNumber-t.lineChange.modifiedStartLineNumber-r}else throw new Error("Edits overlap, which is not supported")}function nbe(e,t){return e.lineChange.originalEndLineNumber<=t.lineChange.originalStartLineNumber}function gv(e,t=null,r=null){if(!t&&!r)throw new Error("Must provide either a response or an error");if(t&&r)throw new Error("Must provide either a response or an error, not both");return{type:"async-wrapper",requestId:e,error:r,baseMsg:t}}var iF=class{constructor(t,r,n=void 0){this._postMessage=t;this._addMsgHandler=r;this._workTimer=n}_disposers=new Array;createWrappedHandler=(t,r,n=!0)=>i=>i.type!=="async-wrapper"||i.baseMsg?.type!==t?!1:((async o=>{try{let a;if(this._workTimer&&n?a=await this._workTimer.runTimed(t,async()=>await o):a=await o,a instanceof Error)throw a;let l=gv(i.requestId,a);this._postMessage(l)}catch(a){if(a instanceof Error){let l=gv(i.requestId,null,a.message);this._postMessage(l)}}})(r(i.baseMsg)),!0);registerHandler=(t,r,n=!0)=>{let i=this.createWrappedHandler(t,r,n),s=this._addMsgHandler(i);this._disposers.push(s)};registerSidecarHandler=t=>{let r=this.createWrappedSidecarHandler(t),n=this._addMsgHandler(r);this._disposers.push(n)};createWrappedSidecarHandler=t=>r=>{if(r.type!=="async-wrapper"||r.destination!=="sidecar")return;let n=i=>{let s=gv(r.requestId,i);this._postMessage(s)};try{t(r.baseMsg,n)}catch(i){if(i instanceof Error){let s=gv(r.requestId,null,i.message);this._postMessage(s)}}};registerStreamHandler=(t,r)=>{let n=this.createWrappedStreamHandler(t,r),i=this._addMsgHandler(n);this._disposers.push(i)};createWrappedStreamHandler=(t,r)=>n=>n.type!=="async-wrapper"||n.baseMsg?.type!==t?!1:((async()=>{let i=n.requestId,s={streamMsgIdx:0,streamNextRequestId:`${n.requestId}-0`};try{for await(let o of this._workTimer?await this._workTimer.runTimed(t,()=>r(n.baseMsg)):r(n.baseMsg)){if(o instanceof Error)throw o;let a=gv(i,o);a.streamCtx={...s},i=s.streamNextRequestId;let l=s.streamMsgIdx+1;s={streamMsgIdx:l,streamNextRequestId:`${n.requestId}-${l}`},this._postMessage(a)}this._postMessage({type:"async-wrapper",requestId:i,error:null,baseMsg:{type:"empty"},streamCtx:{...s,isStreamComplete:!0}})}catch(o){let a=o;this._postMessage({type:"async-wrapper",requestId:i,error:a.message,baseMsg:null,streamCtx:{...s,isStreamComplete:!0}})}})(),!0);dispose=()=>{for(let t of this._disposers)t()};postMessage(t){let r=gv(crypto.randomUUID(),t);this._postMessage(r)}};function js(e,t=void 0){return new iF(r=>void e.postMessage(r),r=>{let n=e.onDidReceiveMessage(r);return()=>void n.dispose()},t)}function sF(e){let t=Math.floor(e/1e3),r=e%1e3*1e6;return[t,r]}var oF=class extends X{constructor(r){super();this._apiServer=r;this.addDisposable({dispose:this._logDiffPanelResolution})}chunkResolveByStartLine=new Map;isAcceptAll=!1;isRejectAll=!1;requestId;sessionOrigin;initialRequestTime;streamFinishTime;applyTime;_logger=j("DiffViewSessionReporter");reset=()=>{this.chunkResolveByStartLine.clear(),this.isAcceptAll=!1,this.isRejectAll=!1,this.requestId=void 0,this.sessionOrigin=void 0,this.initialRequestTime=void 0,this.streamFinishTime=void 0,this.applyTime=void 0};reportResolution=r=>{let{resolveType:n,changes:i,shouldApplyToAll:s}=r.data;s&&!this.chunkResolveByStartLine.size&&(n==="accept"?this.isAcceptAll=!0:this.isRejectAll=!0);for(let o of i){let a=o.lineChanges?.lineChanges||[];for(let l of a){let c=l.originalStart;this.chunkResolveByStartLine.set(c,n==="accept")}}};_logDiffPanelResolution=()=>{if(this._logger.debug("Logging diff panel resolution"),!this.requestId){this.reset(),this._logger.warn("No request id found for diff panel resolution");return}let n=Array.from(this.chunkResolveByStartLine.keys()).sort().map(f=>this.chunkResolveByStartLine.get(f)).filter(f=>f!==void 0),[i,s]=this.initialRequestTime?sF(this.initialRequestTime):[0,0],o=Date.now(),[a,l]=sF(o),[c,u]=sF(this.streamFinishTime||o);if(this.sessionOrigin==="instruction")this._apiServer.logInstructionResolution({request_id:this.requestId,is_accepted_chunks:n,is_accept_all:this.isAcceptAll,is_reject_all:this.isRejectAll,emit_time_sec:c,emit_time_nsec:u,resolve_time_sec:a,resolve_time_nsec:l}),this._logger.debug("Logged instruction resolution");else if(this.sessionOrigin==="smart-paste"){let[f,p]=this.applyTime?sF(this.applyTime):[0,0];this._apiServer.logSmartPasteResolution({request_id:this.requestId,is_accepted_chunks:n,is_accept_all:this.isAcceptAll,is_reject_all:this.isRejectAll,initial_request_time_sec:i,initial_request_time_nsec:s,stream_finish_time_sec:c,stream_finish_time_nsec:u,apply_time_sec:f,apply_time_nsec:p,resolve_time_sec:a,resolve_time_nsec:l}),this._logger.debug("Logged smart paste resolution")}else this._logger.warn(`Unknown session origin: ${this.sessionOrigin}`);this.reset()}};var aF=class extends X{constructor(r,n,i,s,o){super();this._webview=r;this._sessionReporter=n;this._deps=i;this._opts=s;this._workTimer=o;this._workspaceManager=this._deps.workspaceManager,this._asyncMsgHandler=js(this._webview,this._workTimer),this._registerMessageHandlers(),this.addDisposable(this._asyncMsgHandler)}_asyncMsgHandler;_workspaceManager;_registerMessageHandlers(){this._deps.fuzzyFsSearcher&&(this._asyncMsgHandler.registerHandler("find-file-request",this._deps.fuzzyFsSearcher.findFiles),this._asyncMsgHandler.registerHandler("find-folder-request",this._deps.fuzzyFsSearcher.findFolders),this._asyncMsgHandler.registerHandler("find-recently-opened-files",this._deps.fuzzyFsSearcher.findRecentFiles)),this._asyncMsgHandler.registerStreamHandler("diff-view-fetch-pending-stream",()=>this._opts.getCurrentStream()??async function*(){}()),this._asyncMsgHandler.registerHandler("diff-view-resolve-chunk",this._opts.resolveDiff),this._asyncMsgHandler.registerHandler("diff-view-window-focus-change",this._onDiffViewFocusChange),this._asyncMsgHandler.registerHandler("dispose-diff-view",async()=>(this._opts.onUserTriggeredClose?.(),Promise.resolve({}))),this._asyncMsgHandler.registerHandler("diff-view-loaded",()=>this._opts.getInitData()),this._asyncMsgHandler.registerHandler("chat-instruction-message",this._onUserSendInstruction.bind(this))}notifyReinit(){this._webview.postMessage({type:"diff-view-notify-reinit"})}acceptAllChunks(){this._sessionReporter.chunkResolveByStartLine.size||(this._sessionReporter.isAcceptAll=!0),this._webview.postMessage({type:"diff-view-accept-all-chunks"})}acceptFocusedChunk(){this._webview.postMessage({type:"diff-view-accept-selected-chunk"})}rejectFocusedChunk(){this._webview.postMessage({type:"diff-view-reject-focused-chunk"})}focusPreviousChunk(){this._webview.postMessage({type:"diff-view-focus-prev-chunk"})}focusNextChunk(){this._webview.postMessage({type:"diff-view-focus-next-chunk"})}_onDiffViewFocusChange=r=>{let n=r.data;return Uc("vscode-augment.internal-dv.panel-focused",n),{type:"empty"}};async _onUserSendInstruction(r){if(this._deps.logger.info(`onUserSendInstruction: ${JSON.stringify(r)}`),r.type!=="chat-instruction-message"||!("data"in r)||typeof r.data!="object"||!("instruction"in r.data))throw new Error("Invalid message type or data for instruction");let n=this._deps.apiServer.createRequestId();try{let i=this._runChatInstructionStream(r,n);vn.createOrShow(this._deps,{...this._opts,viewOptions:lF.ViewColumn.Active,document:await Yu.fromPathName(this._opts.document.filePath)}),vn.startStream(nF(this._opts.document.originalCode??"",i),n,"instruction")}catch(i){throw lF.window.showErrorMessage(`Failed to send instruction: ${i}`),i}return{type:"empty"}}async*_runChatInstructionStream(r,n){if(!this._opts.guidelinesWatcher){this._deps.logger.error("Guidelines watcher not initialized");return}let{instruction:i,selectedCodeDetails:s}=r.data,{selectedCode:o,prefix:a,suffix:l,path:c,language:u,prefixBegin:f,suffixEnd:p}=s;this._deps.logger.info(`Sending request to the instruction model: ${n}`);let g=this._workspaceManager.getContext(),m;!this._opts.document.isEmptyDocument&&!this._opts.document.isUntitled?m=this._workspaceManager.getBlobName(this._opts.document.filePath):m=g.blobs.checkpointId;try{let y=this._opts.guidelinesWatcher.getUserGuidelinesContent(),v=this._opts.guidelinesWatcher.getCurrentWorkspaceGuidelinesContent(this._workspaceManager),C=await this._deps.apiServer.chatInstructionStream(n,i,g.blobs,[],o,a,l,c,m,f,p,u,y,v);for await(let E of C)yield E}catch(y){throw this._deps.logger.error(`Error in runChatInstructionStream: ${He(y)}`),y}}};var yx=q(require("vscode"));function dbe(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var cF=class extends X{constructor(r,n,i,s){super();this.streamId=r;this.requestId=n;this._stream=i;this._logger=s;this._copyableGenerator=new gm(this._stream),this.addDisposable({dispose:()=>this._cancelToken?.dispose()})}_cancelToken=new yx.CancellationTokenSource;_copyableGenerator;get stream(){return this._formatStream(this._copyableGenerator.copy())}cancel=()=>{this._cancelToken?.cancel(),this._copyableGenerator.cancel(),this.dispose()};_resetStream=()=>{this._cancelToken?.cancel(),this._cancelToken?.dispose(),this._cancelToken=new yx.CancellationTokenSource};async*_formatStream(r){this._resetStream();let n=this._cancelToken.token,i=`${this.streamId}-${dbe()}`;try{yield this._streamStartedMsg(i);for await(let s of r){if(n.isCancellationRequested)break;yield this._streamDataMsg(i,s)}}catch(s){this._notifyStreamError(s)}finally{yield this._streamEndedMsg(i)}}_notifyStreamError(r){yx.window.showWarningMessage("Error streaming in changes to Augment Diff. Please try again."),this._logger.error(`Error streaming in changes to Augment Diff: ${r.message}`)}_streamStartedMsg=r=>({data:{streamId:r,requestId:this.requestId},type:"diff-view-diff-stream-started"});_streamDataMsg=(r,n)=>({data:{...n,streamId:r,requestId:this.requestId},type:"diff-view-diff-stream-chunk"});_streamEndedMsg=r=>({data:{streamId:r,requestId:this.requestId},type:"diff-view-diff-stream-ended"})};var uF=class extends X{constructor(r,n,i,s,o){super();this._panel=r;this._deps=n;this._opts=i;this._workTimer=s;this._sessionReporter=new oF(this._deps.apiServer),o&&(this._sessionReporter.applyTime=o.applyTime),this._diffViewMessageHandler=new aF(this._panel.webview,this._sessionReporter,this._deps,{...this._opts,getInitData:this.getInitData,resolveDiff:this.resolveDiff,getCurrentStream:()=>this._stream?.stream},this._workTimer),this.addDisposable(this._diffViewMessageHandler),this.addDisposable(this._sessionReporter),this.addDisposable(this._opts.document),this._diffViewMessageHandler.notifyReinit()}_sessionReporter;_diffViewMessageHandler;_currentSelection;_stream;get diffViewMessageHandler(){return this._diffViewMessageHandler}get sessionReporter(){return this._sessionReporter}startStream(r,n,i){this._sessionReporter.requestId=n,this._sessionReporter.sessionOrigin=i,this._sessionReporter.initialRequestTime=Date.now(),this._cleanupStream(),this._stream=new cF(this._deps.apiServer.createRequestId(),n,r,this._deps.logger)}_cleanupStream=()=>{this._stream?.cancel(),this._stream=void 0};getInitData=()=>{let r=this._opts?.instruction?.selection,n={type:"diff-view-initialize",data:{file:{repoRoot:"",pathName:"",originalCode:"",modifiedCode:""},keybindings:this.keybindings,instruction:r&&{selection:{start:{line:r?.start.line,character:r?.start.character},end:{line:r?.end.line,character:r?.end.character}}},editable:this._opts.editable,disableResolution:this._opts.disableResolution,disableApply:this._opts.disableApply}};if(this._opts?.instruction){let{selection:i}=this._opts.instruction,{start:s,end:o}=i;this._currentSelection=new Hl.Selection(new Hl.Position(s.line,s.character),new Hl.Position(o.line,o.character))}return this._opts.document.isEmptyDocument||(n.data.file.pathName=this._opts.document.absPath,n.data.file.originalCode=this._opts.document.originalCode,n.data.file.modifiedCode=this._opts.document.modifiedCode),Promise.resolve(n)};resolveDiff=async r=>{let{file:n,resolveType:i,changes:s}=r.data;this._sessionReporter.reportResolution(r);let o=Hl.Uri.file(this._opts.document?.absPath??"").fsPath,a=Hl.Uri.file(n.pathName).fsPath,l=n.modifiedCode===void 0;if(!this._opts.document||o!==a||l)return{type:"empty"};if((i==="accept"||i==="reject")&&this._opts.document.updateCodeVersions(n.originalCode,n.modifiedCode)){let u=await Hl.workspace.openTextDocument(this._opts.document.absPath);s&&s.length>0&&u&&this.updateChangeRange(u,s,i)}return{type:"empty"}};updateChangeRange=(r,n,i)=>{if(!this._currentSelection)return;let s=this._currentSelection.start.line,o=this._currentSelection.end.line,a=Number.MAX_SAFE_INTEGER,l=0;for(let u of n)if(u.lineChanges&&u.lineChanges.lineChanges)for(let f of u.lineChanges.lineChanges)a=Math.min(a,f.originalStart),l=Math.max(l,f.modifiedEnd);i==="accept"&&(s=Math.min(s,a-1),o=Math.max(o,l-1)),s=Math.max(0,s),o=Math.min(r.lineCount-1,o);let c=r.lineAt(o).range.end;this._currentSelection=new Hl.Selection(new Hl.Position(s,0),c)};get keybindings(){return{acceptAllChunks:this._deps.keybindingWatcher.getKeybindingForCommand(lv.commandID,!0)??"",rejectAllChunks:this._deps.keybindingWatcher.getKeybindingForCommand(hv.commandID,!0)??"",acceptFocusedChunk:this._deps.keybindingWatcher.getKeybindingForCommand(cv.commandID,!0)??"",rejectFocusedChunk:this._deps.keybindingWatcher.getKeybindingForCommand(uv.commandID,!0)??"",focusPrevChunk:this._deps.keybindingWatcher.getKeybindingForCommand(dv.commandID,!0)??"",focusNextChunk:this._deps.keybindingWatcher.getKeybindingForCommand(fv.commandID,!0)??""}}};var mi=q(require("vscode"));function Fmt(e,t,r,n){if(t.length===0&&r.length===0)return!1;let i;if(t.length>0&&r.length>0){let s=t[0].start.line,o=r[0].start.line;i=s<=o?t[0]:r[0]}else t.length>0?i=t[0]:r.length>0&&(i=r[0]);return i?(e.revealRange(i,n??mi.TextEditorRevealType.InCenterIfOutsideViewport),!0):!1}function Qmt(){let e=mi.window.activeColorTheme.kind===mi.ColorThemeKind.Dark||mi.window.activeColorTheme.kind===mi.ColorThemeKind.HighContrast;return{added:{background:e?"rgba(0, 255, 0, 0.1)":"rgba(0, 200, 0, 0.05)",text:e?"rgba(150, 255, 150, 0.9)":"rgba(0, 100, 0, 0.8)"},removed:{background:"rgba(255, 0, 0, 0.05)",text:e?"rgba(255, 200, 200, 0.9)":"rgba(150, 0, 0, 0.8)",border:"rgba(150, 0, 0, 0.3)"}}}function fbe(e,t,r,n){let i=Qmt(),s=mi.window.createTextEditorDecorationType({backgroundColor:i.added.background,isWholeLine:!0,after:{color:i.added.text,margin:"0 0 0 1em"}}),o=mi.window.createTextEditorDecorationType({isWholeLine:!0,before:{color:i.removed.text,border:`1px solid ${i.removed.border}`,backgroundColor:i.removed.background,margin:"0 5px 0 0"}}),a=GS("original","modified",t,r,"","",{context:0}),l=[],c=[];for(let f of a.hunks){let p=f.newStart-1,g=!1,m=0,y="";for(let v of f.lines)if(v.startsWith("+")){if(p<e.document.lineCount){let C=new mi.Range(new mi.Position(p,0),new mi.Position(p,e.document.lineAt(p).text.length));l.push(C)}p++}else v.startsWith("-")&&(g=!0,m++,y+=v.substring(1)+`
`);if(g){let v=Math.max(0,f.newStart-2);if(v<e.document.lineCount){let C=new mi.Range(new mi.Position(v,0),new mi.Position(v,e.document.lineAt(v).text.length));c.push({range:C,count:m,removedContent:y.trim()})}}}e.setDecorations(s,l);let u=c.map(f=>{let p=new mi.MarkdownString;return p.appendMarkdown(`**Removed content:**

`),p.appendCodeblock(f.removedContent,"diff"),p.isTrusted=!0,p.supportHtml=!0,{range:f.range,renderOptions:{before:{contentText:`\u2296 ${f.count} line${f.count===1?"":"s"} removed`,color:i.removed.text,border:`1px solid ${i.removed.border}`,backgroundColor:i.removed.background,margin:"0 5px 0 0"}},hoverMessage:p}});return e.setDecorations(o,u),n?.scrollToFirstDecoration&&Fmt(e,l,c.map(f=>f.range),n.revealType),[s,o]}function hbe(e,t){let n=1e4*(Math.log(e.length+1)/Math.log(4)),{minDelayMs:i=1e4,maxDelayMs:s=3e4}=t,o=Math.min(Math.max(n,i),s);setTimeout(()=>{e.forEach(a=>a.dispose())},o)}function gbe(e,t){let r=[],n=mi.workspace.onDidChangeTextDocument(i=>{i.document.uri.toString()===e.document.uri.toString()&&(t.forEach(s=>s.dispose()),r.forEach(s=>void s.dispose()))});return r.push(n),{dispose:()=>{r.forEach(i=>void i.dispose())}}}var Cbe=q(require("path")),AF=q(require("vscode"));async function pbe(e,t,r){if(!Cx())throw new Error("Not in HMR mode");let n=await fetch(`${e}/${t}`);if(!n.ok)throw new Error(`Failed to load ${t} from ${e}: ${n.statusText}`);let i=await n.text();if(!i?.trim())throw new Error(`Empty response when loading ${t} from ${e}: ${n.statusText}`);return _4(i,e,r)}var vx;async function mbe(e){if(vx)return vx;let t=await import("fs"),r=e.fsPath+"/.augment-hmr-env";if(vx=t.readFileSync(r,"utf8").split(`
`).filter(i=>!/^\s*(#|$)/.test(i)).reduce((i,s)=>{let[o,a]=s.split("=");return i[o]=a,i},{}).AUGMENT_HMR,!vx)throw new Error(`Failed to load HMR url from '${r}'`);return vx}function _4(e,t,r){return e.replace("<head>",`<head><base href="${t}" /><meta http-equiv="Content-Security-Policy" content="${r}" />`)}function Cx(){return!!process.env.AUGMENT_IS_HMR&&process.env.AUGMENT_JS_ENV!=="production"}function dF(...e){let t={scripts:new Set,styles:new Set(["'unsafe-inline'"]),fonts:new Set,images:new Set,media:new Set,workers:new Set,connects:new Set};for(let i of e)i(t);let r=["default-src 'none';"],n={"font-src":t.fonts,"style-src":t.styles,"script-src":t.scripts,"img-src":t.images,"media-src":t.media,"worker-src":t.workers,"connect-src":t.connects};for(let[i,s]of Object.entries(n)){let o=Array.from(s).sort();o.length!==0&&r.push(`${i} ${o.join(" ")};`)}return r.join(" ")}function fF(){return e=>{e.fonts.add("https://fonts.gstatic.com"),e.styles.add("https://fonts.googleapis.com")}}function Abe(){return e=>{e.images.add("https://www.google.com"),e.images.add("https://*.gstatic.com"),e.images.add("https://s2.googleusercontent.com")}}function hF(e){return t=>{t.scripts.add(e.cspSource),t.styles.add(e.cspSource),t.images.add(e.cspSource),t.fonts.add(e.cspSource),t.media.add(e.cspSource)}}function gF(){return e=>{e.images.add("data:"),e.images.add("blob:")}}function pF(){return e=>{e.styles.add("'unsafe-inline'"),e.fonts.add("data:"),e.workers.add("blob:")}}function mF(){return e=>{e.fonts.add("https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.2/min/"),e.styles.add("https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.2/min/"),e.scripts.add("https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.2/min/"),e.scripts.add("'unsafe-inline'")}}function ybe(e){if(!Cx())return()=>{};let t=e.replace(/^https?:/,"ws:");return r=>{["fonts","styles","scripts","workers","media","images","connects"].forEach(n=>{r[n].add(e).add(t)})}}function vbe(){return e=>{e.connects.add("https://cdn.jsdelivr.net"),e.connects.add("https://unpkg.com"),e.scripts.add("https://cdn.jsdelivr.net"),e.scripts.add("https://unpkg.com"),e.scripts.add("'unsafe-eval'"),e.workers.add("blob:"),e.connects.add("vscode-resource:"),e.connects.add("https://*.vscode-cdn.net")}}var Zs=class extends X{constructor(r,n){super();this.filename=r;this._webview=n}_logger=j("PanelWebviewBase");generateCSPPolicy(r){return dF(hF(this._webview),fF(),Abe(),gF(),pF(),mF(),vbe(),r?ybe(r):()=>{})}async loadHTML(r){if(Cx())try{let n=await mbe(r);this._logger.debug("Loading '%s' from dev server on '%s'",this.filename,n),this._webview.options={enableScripts:!0,localResourceRoots:[AF.Uri.parse(n)]},this._webview.html=await pbe(n,this.filename,this.generateCSPPolicy(n));return}catch(n){this._logger.error(`Failed to load '%s' from dev server: ${String(n)} `,this.filename),this._webview.html=(await this._loadFile(r,"../../common/webviews/index.html")).replace("></code>",`>${String(n)}</code>`);return}this._webview.html=await this._loadFile(r,this.filename)}async _loadFile(r,n){let i=AF.Uri.joinPath(r,"common-webviews"),s=this._webview.asWebviewUri(AF.Uri.joinPath(i,"/"));this._webview.options={enableScripts:!0,localResourceRoots:[i]};let o=await Sn(Cbe.join(i.fsPath,n));try{return _4(o,s.toString(),this.generateCSPPolicy())}catch(a){throw this._logger.error(`Failed to load ${n}: ${String(a)}`),a}}};var vn=class e extends Zs{constructor(r,n,i=zi.window.createWebviewPanel(e.viewType,"Augment",n.viewOptions??zi.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0})){super("diff-view.html",i.webview);this._deps=r;this._opts=n;this._panel=i;this._panel.iconPath={light:zi.Uri.joinPath(this._deps.extensionUri,"media","panel-icon-light.svg"),dark:zi.Uri.joinPath(this._deps.extensionUri,"media","panel-icon-dark.svg")},this._controller=this._updateOpts(this._opts),this._panel.onDidDispose(()=>{this.dispose()}),this.addDisposables(this._controller,this._panel,new zi.Disposable(()=>{e.currentPanel=void 0})),this.loadHTML(r.extensionUri)}static viewType="augmentDiffView";logger=j("DiffViewWebviewPanel");static currentPanel;_controller;get diffViewController(){return this._controller}dispose=()=>{this._opts.onDispose?.(),this._controller.dispose(),this._panel.dispose(),e.currentPanel=void 0,super.dispose()};_updateOpts=r=>(this._opts=r,this._controller?.dispose(),this._controller=new uF(this._panel,{...this._deps,panel:this._panel,logger:this.logger},{...this._opts,onUserTriggeredClose:()=>this.dispose()},this._deps.workTimer),this._controller);static get controller(){return this.currentPanel?.diffViewController}static get currentDocument(){return this.currentPanel?._opts.document}static get isVisible(){return this.currentPanel?._panel.visible}static startStream=(r,n,i)=>{this.currentPanel?.diffViewController.startStream(r,n,i)};static async instantApply(r,n,i){let s=n.document,o=s.originalCode,a=i,l=s.absPath,c="";for await(let C of abe(o??"",a))c=C;let u=await zi.workspace.openTextDocument(l),f=new zi.WorkspaceEdit;f.replace(u.uri,new zi.Range(0,0,u.lineCount,0),c),await zi.workspace.applyEdit(f);let p=await zi.window.showTextDocument(u),g=fbe(p,o??"",c,{scrollToFirstDecoration:!0,revealType:zi.TextEditorRevealType.InCenterIfOutsideViewport});hbe(g,{minDelayMs:3e4}),gbe(p,g);let y=$f(o??"",c).map(C=>({repoRoot:s.filePath.rootPath,pathName:s.filePath.relPath,originalCode:C.removed?C.value:"",modifiedCode:C.added?C.value:""})),v={file:{repoRoot:s.filePath.rootPath,pathName:s.filePath.relPath,originalCode:o??"",modifiedCode:c},changes:y,resolveType:"accept",shouldApplyToAll:!0};return this.controller?.sessionReporter.reportResolution({type:"diff-view-resolve-chunk",data:v}),c}static createOrShow(r,n){if(n.document.isEmptyDocument)return;e.currentPanel?e.currentPanel._updateOpts(n):e.currentPanel=new e(r,n);let i=e.currentPanel,s=n.document.filePath,o=bbe.default.basename(s.absPath);i._panel.title=`Augment Diff - ${o}`,i._panel.reveal()}};var yF=class{constructor(t,r,n,i,s,o,a){this._extensionUri=t;this._workspaceManager=r;this._apiServer=n;this._keybindingWatcher=i;this._fuzzyFsSearcher=s;this._fuzzySymbolSearcher=o;this._workTimer=a}showDiffView(t,r,n,i){let s=vn.isVisible??!1;if(i.retainFocus&&!s)return Promise.resolve();let o={editable:!1,disableResolution:!0,document:new un(new Le(t.rootPath,t.relPath),r,n,{}),viewOptions:{preserveFocus:!0,viewColumn:Ebe.ViewColumn.Active}};return this._createOrShowDiffView(o),Promise.resolve()}_createOrShowDiffView(t){vn.createOrShow({extensionUri:this._extensionUri,workspaceManager:this._workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._keybindingWatcher,fuzzyFsSearcher:this._fuzzyFsSearcher,fuzzySymbolSearcher:this._fuzzySymbolSearcher,workTimer:this._workTimer},t)}};var vF=class{constructor(t,r){this.auth=t;this.configListener=r}async getAPIToken(){if(this.auth.useOAuth){let t=await this.auth.getSession();if(t)return t.accessToken}return this.configListener.config.apiToken}async getCompletionURL(){if(this.auth.useOAuth){let t=await this.auth.getSession();if(t)return t.tenantURL}return this.configListener.config.completionURL}removeAuthSession(){return this.auth.removeSession()}};var CF=class{constructor(t){this.configListener=t}getConfig(){return Promise.resolve(this.configListener.config)}};var bx=class{constructor(t){this._featureFlagManager=t}get flags(){return{enableAgentMode:gr(vM()===0?this._featureFlagManager.currentFlags.vscodeAgentModeMinVersion??"":this._featureFlagManager.currentFlags.vscodeAgentModeMinStableVersion??""),enableChatWithTools:gr(this._featureFlagManager.currentFlags.vscodeChatWithToolsMinVersion??""),agentEditTool:this._featureFlagManager.currentFlags.vscodeAgentEditTool??"",agentEditToolMinViewSize:this._featureFlagManager.currentFlags.agentEditToolMinViewSize??0,agentEditToolSchemaType:this._featureFlagManager.currentFlags.agentEditToolSchemaType??"StrReplaceEditorToolDefinitionNested",memoriesParams:this._featureFlagManager.currentFlags.memoriesParams??{}}}};var Ya=q(require("vscode"));var bF=class{constructor(t){this._workspaceManager=t}getCwd(){return Promise.resolve(fm(this._workspaceManager))}async readFile(t){await this._workspaceManager.awaitInitialFoldersEnumerated();let r=await hm(t,this._workspaceManager),n=qu(t,this._workspaceManager);return{contents:r,filepath:n}}async writeFile(t,r){let n=await Nmt(t,r);if(!n||n.getText()===r)return;let i=new Ya.WorkspaceEdit;i.replace(n.uri,new Ya.Range(0,0,n.lineCount,0),r),await Ya.workspace.applyEdit(i),await n.save()}async deleteFile(t){if(qr(t.absPath))try{let r=Ya.Uri.file(t.absPath);await Ya.workspace.fs.delete(r)}catch(r){console.error(`Failed to delete file ${t.absPath}:`,r)}}onFileDeleted(t){return this._workspaceManager.onFileDeleted(t)}onFileDidMove(t){return this._workspaceManager.onFileDidMove(t)}};async function Nmt(e,t){try{let r;if(zCe(e))r=JM(e);else if(qr(e.absPath))r=await Ya.workspace.openTextDocument(e.absPath);else{let n=Ya.Uri.file(e.absPath);await Ya.workspace.fs.writeFile(n,Buffer.from(t??"")),r=await Ya.workspace.openTextDocument(n)}if(r===void 0)throw new Error(`Failed to open document ${e.absPath}`);return r}catch{return}}var EF=class{constructor(t){this._extensionContext=t;this.migrateKeys(nh.hasEverUsedAgent,this.getKey(au.agent,nh.hasEverUsedAgent))}async getValue(t,r,n){if(n!==uc.global)throw new Error(`Scope ${String(n)} is not supported`);return await this._extensionContext.globalState.get(this.getKey(t,r))}async setValue(t,r,n,i){if(i!==uc.global)throw new Error(`Scope ${String(i)} is not supported`);await this._extensionContext.globalState.update(this.getKey(t,r),n)}getKey(t,r){return["sidecar",t,r].join(".")}async migrateKeys(t,r){let n=await this._extensionContext.globalState.get(t);n!==void 0&&(await this._extensionContext.globalState.update(r,n),await this._extensionContext.globalState.update(t,void 0))}};var _F=class{constructor(t,r){this._apiServer=t;this._workspaceManager=r}async chatStream(t,r,n,i,s,o,a){return await this._apiServer.chatStream(r,t,n,{checkpointId:void 0,addedBlobs:[],deletedBlobs:[]},[],[],a??void 0,{workingDirectory:[],commits:[]},[],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,i,s,o,void 0,void 0)}agentCodebaseRetrieval(t,r,n,i,s){return this._apiServer.agentCodebaseRetrieval(t,r,this._workspaceManager.getContext().blobs,n,i,s)}logToolUseRequestEvent(t){return this._apiServer.logToolUseRequestEvent(t)}logAgentRequestEvent(t){return this._apiServer.logAgentRequestEvent(t)}logAgentSessionEvent(t){return this._apiServer.logAgentSessionEvent(t)}logRemoteAgentSessionEvent(t){return this._apiServer.logRemoteAgentSessionEvent(t)}checkToolSafety(t,r){return this._apiServer.checkToolSafety(t,r)}};var C1=q(require("vscode"));var dg=q(require("vscode"));var xbe=require("child_process"),wbe=require("util");var _be=j("CommandUtils"),Pmt=(0,wbe.promisify)(xbe.exec),Lmt=5e3;async function Do(e,t={}){try{let{stdout:r,stderr:n}=await Pmt(e,{timeout:Lmt,...t});return n&&_be.debug("stderr:"+n?.toString()),r?.toString()}catch(r){_be.debug(`exec error [${r.code}] [${r.signal}] [${r.message}] [${r.stackTrace}]`)}}var pv=q(require("vscode")),xF=class{constructor(t,r){this._apiServer=t;this._configListener=r}get execOptions(){let t=pv.workspace.workspaceFolders?.[0];if(!t)throw new Error("No workspace folder found");return{cwd:t.uri.fsPath}}register(t){t.registerHandler("get-git-branches-request",this.handleGetGitBranchesRequest.bind(this)),t.registerHandler("get-workspace-diff-request",this.handleGetWorkspaceDiffRequest.bind(this)),t.registerHandler("get-remote-url-request",this.handleGetRemoteUrlRequest.bind(this)),t.registerHandler("git-fetch-request",this.handleGitFetchRequest.bind(this)),t.registerHandler("is-git-repository-request",this.handleIsGitRepositoryRequest.bind(this)),t.registerHandler("is-github-authenticated-request",this.handleIsGithubAuthenticatedRequest.bind(this)),t.registerHandler("authenticate-github-request",this.handleAuthenticateGithubRequest.bind(this)),t.registerHandler("revoke-github-access-request",this.handleRevokeGithubAccessRequest.bind(this))}async handleGetGitBranchesRequest(t){try{let{prefix:r=""}=t.data,{execOptions:n}=this,i=[],s=(await Do("git branch --show-current",n))?.trim(),o=!!await Do("git branch -r | grep $(git branch --show-current)",n),a=(await Do("git symbolic-ref --short refs/remotes/origin/HEAD",n))?.trim(),u=(await Do("git branch --list --remote",n).then(f=>f?.split(`
`).map(p=>p.replace(/^[ *]+/,"")).filter(Boolean)))?.map(f=>{if(!(f===s||f===a)&&f.includes(r))return f}).filter(Boolean);return s&&u?.unshift(s),a&&u?.unshift(a),u?.forEach(f=>{i.push({name:f.trim(),isRemote:f===s?o:!0,isCurrentBranch:f===s,isDefault:f===a})}),{type:"get-git-branches-response",data:{branches:i}}}catch(r){return console.error("Failed to get git branches:",r),{type:"get-git-branches-response",data:{branches:[]}}}}async handleGetWorkspaceDiffRequest(t){try{let{branchName:r}=t.data,n=await Do(`git diff origin/${r} || true`,this.execOptions)||"",i=await Do("git ls-files --others --exclude-standard",this.execOptions)||"";for(let s of i.trimEnd().split(`
`)||[])n+=await Do(process.platform==="win32"?`git diff --no-index NUL ${s} || exit 0`:`git diff --no-index /dev/null ${s} || true`,this.execOptions)||"";return{type:"get-workspace-diff-response",data:{diff:n}}}catch(r){return console.error("Failed to get workspace diff:",r),{type:"get-workspace-diff-response",data:{diff:""}}}}async handleGetRemoteUrlRequest(t){let{execOptions:r}=this;try{let n=(await Do("git remote get-url origin",r))?.trim();if(!n)throw new Error("Failed to get remote url, no remote found");if(!!n?.startsWith("https://"))return{type:"get-remote-url-response",data:{remoteUrl:n}};{let s=n.replace("ssh://","").replace("git@","https://").replace(".com:",".com/").replace(".git","");return{type:"get-remote-url-response",data:{remoteUrl:s}}}}catch(n){return console.error("Failed to get remote url:",n),{type:"get-remote-url-response",data:{remoteUrl:""}}}}async handleGitFetchRequest(t){try{return await Do("git fetch",this.execOptions),{type:"git-fetch-response"}}catch(r){return console.error("Failed to fetch remote branch:",r),{type:"git-fetch-response"}}}async handleIsGitRepositoryRequest(t){try{let r=!!await Do(process.platform==="win32"?"git rev-parse --is-inside-work-tree 2>NUL":"git rev-parse --is-inside-work-tree 2>/dev/null",this.execOptions);return console.log("isGitRepository: ",r),{type:"is-git-repository-response",data:{isGitRepository:r}}}catch(r){return console.error("Failed to check if is git repository:",r),{type:"is-git-repository-response",data:{isGitRepository:!1}}}}async handleIsGithubAuthenticatedRequest(t){try{let i=(await this._apiServer.listRemoteTools([Mn.GitHubApi])).tools.find(a=>a.remoteToolId===Mn.GitHubApi)?.availabilityStatus===jf.Available,o=!!this._configListener.config.completionURL||i;return{type:"is-github-authenticated-response",data:{isAuthenticated:o}}}catch(r){return console.error("Failed to check GitHub authentication status:",r),{type:"is-github-authenticated-response",data:{isAuthenticated:!1}}}}async handleAuthenticateGithubRequest(t){try{let n=(await this._apiServer.listRemoteTools([Mn.GitHubApi])).tools.find(o=>o.remoteToolId===Mn.GitHubApi);if(!n||!n.oauthUrl)return{type:"authenticate-github-response",data:{success:!1,message:"GitHub OAuth URL not found"}};let i=pv.Uri.parse(n.oauthUrl),s=await pv.env.openExternal(i);return{type:"authenticate-github-response",data:{success:s,message:s?"Browser opened for GitHub authentication":"Failed to open browser"}}}catch(r){return console.error("Failed to authenticate with GitHub:",r),{type:"authenticate-github-response",data:{success:!1,message:`Error: ${r instanceof Error?r.message:String(r)}`}}}}async handleRevokeGithubAccessRequest(t){try{let r=await this._apiServer.revokeToolAccess(Mn.GitHubApi);return r.status===3?{type:"revoke-github-access-response",data:{success:!0,message:"GitHub access revoked successfully"}}:r.status===4?{type:"revoke-github-access-response",data:{success:!0,message:"GitHub is not configured"}}:{type:"revoke-github-access-response",data:{success:!1,message:`Failed to revoke GitHub access: ${qk[r.status]}`}}}catch(r){return console.error("Failed to revoke GitHub access:",r),{type:"revoke-github-access-response",data:{success:!1,message:`Error: ${r instanceof Error?r.message:String(r)}`}}}}};var Sbe=async(e,t)=>{let r=e.map(l=>{let c=x4(l.old_path,l.new_path,l.old_contents||"",l.new_contents||"");return{path:l.new_path||l.old_path,changes:c}}),n=Object.values(r).map(l=>({path:l.path,changes:l.changes.map(c=>({id:c.id,path:c.path,diff:c.diff}))})),i=`You are a helpful software engineer. You are given a diff of a set of files. Your job is to walk a fellow developer through the changes in the diff.

You need to storytell through the updates, splitting it into two levels of semantic chunks of changes. You should respond with just JSON in this format:
{
    title: string; // these are top-level categories, like "Clean up the Footer" or "New API routes"
    description: string; // use Markdown. eg. put variable names in backticks, strings in quotes in backticks (eg. \`"String"\`)
    sections: { // Keep single files in a single section
        title: string; // Aim for 1 sentence with 5 - 20 words. Use sentence case and don't use generic words like "Update". Be as descriptive as possible, like a good commit message. eg. "Increased heading spacing in footer"
        type: "fix" | "feature" | "refactor" | "documentation" | "style" | "test" | "chore" | "revert" | "other";
        warning?: string; // look for anything that might be important for the user to know. eg. "This implementation isn't complete"
        changeIds: string[]; // Group related changes into a single section. Always combine all changes with the same file path into a single section
        descriptions: { // annotate the change with one or multiple descriptions of what the code change does
            text: string; // use Markdown. eg. put variable names in backticks, strings in quotes in backticks (eg. \`"String"\`). Use \u2192 to describe value changes
            range: {
                start: number; // line number, 0-indexed
                end: number; // line number, 0-indexed
            }
        }[];
    }[]
}[]

Here's an example set of changes:

[{
    "path": "src/global.css",
    "changes": [{
    "id": "1",
    "path": "src/global.css",
    "diff": "body {
  font-family: sans-serif;
- background-color: #fff;
+ background-color: #000;
}"
    }
}]

You would respond:

[{
  "title": "Style tweaks",
  "description": "Global style changes across the app",
  "sections": [{
        "title": "Invert background color",
        "descriptions": [{
            "line": 2,
            "text": "Change the background color from white \u2192 black"
        }],
        "changeIds": ["1"]
    }]
}]


The changes are:

${JSON.stringify(n,null,2)}

Start your response with [{`,s=await t(i);return JSON.parse(s).map(l=>({title:l.title,description:l.description,sections:l.sections.map(c=>{let u=c.changeIds.map(f=>{let p=r.find(m=>m.changes.find(y=>y.id===f));return p&&p.changes.find(m=>m.id===f)||void 0}).filter(f=>f!==void 0);return{title:c.title,descriptions:c.descriptions,type:c.type,warning:c.warning,changes:u}})}))},Ibe=async(e,t)=>{try{let r=e.map((a,l)=>({path:a.path,fileIndex:l,changes:a.changes.map(c=>({id:c.id,path:c.path,diff:c.diff}))})),n=`You are a helpful software engineer. You are given a diff of a set of files. Your job is to walk a fellow developer through the changes in the diff.

You need to storytell through the updates, splitting it into two levels of semantic chunks of changes. You should respond with just JSON in this format:
{
    title: string; // these are top-level categories, like "Clean up the Footer" or "New API routes"
    description: string; // use Markdown. eg. put variable names in backticks, strings in quotes in backticks (eg. \`"String"\`)
    sections: { // Keep single files in a single section
        title: string; // Aim for 1 sentence with 5 - 20 words. Use sentence case and don't use generic words like "Update". Be as descriptive as possible, like a good commit message. eg. "Increased heading spacing in footer"
        type: "fix" | "feature" | "refactor" | "documentation" | "style" | "test" | "chore" | "revert" | "other";
        warning?: string; // look for anything that might be important for the user to know. eg. "This implementation isn't complete"
        changeIds: string[]; // Group related changes into a single section. Always combine all changes with the same file path into a single section
        descriptions: { // annotate the change with one or multiple descriptions of what the code change does
            text: string; // use Markdown. eg. put variable names in backticks, strings in quotes in backticks (eg. \`"String"\`). Use \u2192 to describe value changes
            range: {
                start: number; // line number, 0-indexed
                end: number; // line number, 0-indexed
            }
        }[];
    }[]
}[]

IMPORTANT: You MUST preserve the original file grouping and order. The files are already grouped correctly in the input and each file has a fileIndex property indicating its original order. Create one subsection per file, and include all changes for that file in that subsection. Do not regroup or reorder the files. The order of files in your response should match the fileIndex order in the input.

Here's an example set of changes:

[{
    "path": "src/global.css",
    "fileIndex": 0,
    "changes": [{
    "id": "1",
    "path": "src/global.css",
    "diff": "body {
  font-family: sans-serif;
- background-color: #fff;
+ background-color: #000;
}"
    }
}]

You would respond:

[{
  "title": "Style tweaks",
  "description": "Global style changes across the app",
  "sections": [{
        "title": "Invert background color",
        "descriptions": [{
            "line": 2,
            "text": "Change the background color from white \u2192 black"
        }],
        "changeIds": ["1"]
    }]
}]


The changes are:

${JSON.stringify(r,null,2)}

Start your response with [{`,i=await t(n);return JSON.parse(i).map(a=>({title:a.title,description:a.description,sections:a.sections.map(l=>{let c=l.changeIds.map(u=>{let f=e.find(g=>g.changes.find(m=>m.id===u));return f&&f.changes.find(g=>g.id===u)||void 0}).filter(u=>u!==void 0);return{title:l.title,descriptions:l.descriptions,type:l.type,warning:l.warning,changes:c}})}))}catch(r){return console.error("Failed to get descriptions:",r),[]}};function wF(e){let t=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return Math.abs(t).toString(36)}function x4(e,t,r,n){let i=KS(e,t,r,n,"","",{context:3}),s=e||t,o=wF(s),a=wF(r+n);return[{id:`${o}-${a}`,path:s,diff:i,originalCode:r,modifiedCode:n}]}var Bbe=async(e,t,r=!1)=>{try{if(r){let p=e.map(C=>({path:C.new_path||C.old_path,changes:[{id:C.id,path:C.new_path||C.old_path,diff:`File: ${C.new_path||C.old_path}
Change type: ${C.change_type||"modified"}`,originalCode:"",modifiedCode:""}]})),g=`You are a helpful software engineer. You are given a diff of a set of files. Your job is to group related changes together.

You should respond with just JSON in this format:
[{
    "path": string; // The file path
    "changes": [{ // The changes for this file
        "id": string; // The ID of the change
        "path": string; // The file path
        "diff": string; // The diff content
    }];
}]

IMPORTANT: Do NOT add any descriptions or explanations. Just group the changes by file. Keep the original IDs intact.

The changes are:

${JSON.stringify(p,null,2)}

Start your response with [{`,m=2e4,y;try{let C=new Promise((E,w)=>{setTimeout(()=>w(new Error("LLM request timed out")),m)});y=await Promise.race([t(g),C])}catch(C){return console.error("LLM request timed out or failed:",C),p}let v;try{v=JSON.parse(y)}catch(C){return console.error("Failed to parse LLM response:",C),p}return v.map(C=>({path:C.path,changes:C.changes.map(E=>({...E,originalCode:"",modifiedCode:""}))}))}let n=e.map(p=>{let g=x4(p.old_path,p.new_path,p.old_contents||"",p.new_contents||"");return{path:p.new_path||p.old_path,changes:g}}),i=n.reduce((p,g)=>p+g.changes.reduce((m,y)=>m+y.diff.length,0),0),s=n.reduce((p,g)=>p+g.changes.length,0);if(i>3e4||n.length>8||s>15)return console.log(`Skipping LLM grouping due to size: ${i} bytes, ${n.length} files, ${s} changes`),n;let o=n.map(p=>({path:p.path,changes:p.changes.map(g=>{if(g.id)return g;let m=wF(g.path),y=wF(g.originalCode+g.modifiedCode);return{...g,id:`${m}-${y}`}})})),a=o.map(p=>({path:p.path,changes:p.changes.map(g=>({id:g.id,path:g.path,diff:g.diff}))})),l=`You are a helpful software engineer. You are given a diff of a set of files. Your job is to group related changes together.

You should respond with just JSON in this format:
[{
    "path": string; // The file path
    "changes": [{ // The changes for this file
        "id": string; // The ID of the change
        "path": string; // The file path
        "diff": string; // The diff content
    }];
}]

IMPORTANT: Do NOT add any descriptions or explanations. Just group the changes by file. Keep the original IDs intact.

Here's an example set of changes:

[{
    "path": "src/global.css",
    "changes": [{
        "id": "abc123",
        "path": "src/global.css",
        "diff": "body {
  font-family: sans-serif;
- background-color: #fff;
+ background-color: #000;
}"
    }]
}]

You would respond with the same structure, just grouped by file:

[{
    "path": "src/global.css",
    "changes": [{
        "id": "abc123",
        "path": "src/global.css",
        "diff": "body {
  font-family: sans-serif;
- background-color: #fff;
+ background-color: #000;
}"
    }]
}]

The changes are:

${JSON.stringify(a,null,2)}

Start your response with [{`,c=2e4,u;try{let p=new Promise((g,m)=>{setTimeout(()=>m(new Error("LLM request timed out")),c)});u=await Promise.race([t(l),p])}catch(p){return console.error("LLM request timed out or failed:",p),n}let f;try{f=JSON.parse(u)}catch(p){return console.error("Failed to parse LLM response:",p),n}return f.map(p=>{let g=p.changes.map(m=>{for(let y of o){let v=y.changes.find(C=>C.id===m.id);if(v)return v}}).filter(m=>m!==void 0);return{path:p.path,changes:g}})}catch(n){return console.error("Failed to group changes with LLM:",n),e.map(i=>{let s=x4(i.old_path,i.new_path,i.old_contents||"",i.new_contents||"");return{path:i.new_path||i.old_path,changes:s}})}};function Umt(e,t){let r={};for(let s=0;s<t.length;s++){let o=t[s];r[o]?r[o].push(s):r[o]=[s]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let s=0;s<e.length;s++){let o=e[s],a=r[o]||[],l=0,c=i[0];for(let u=0;u<a.length;u++){let f=a[u],p;for(p=l;p<i.length&&!(i[p].buffer2index<f&&(p===i.length-1||i[p+1].buffer2index>f));p++);if(p<i.length){let g={buffer1index:s,buffer2index:f,chain:i[p]};if(l===i.length?i.push(c):i[l]=c,l=p+1,c=g,l===i.length)break}}i[l]=c}return i[i.length-1]}function Dbe(e,t){let r=Umt(e,t),n=[],i=e.length,s=t.length;for(let o=r;o!==null;o=o.chain){let a=i-o.buffer1index-1,l=s-o.buffer2index-1;i=o.buffer1index,s=o.buffer2index,(a||l)&&n.push({buffer1:[i+1,a],buffer1Content:e.slice(i+1,i+1+a),buffer2:[s+1,l],buffer2Content:t.slice(s+1,s+1+l)})}return n.reverse(),n}function Omt(e,t,r){let n=[];function i(l,c){n.push({ab:c,oStart:l.buffer1[0],oLength:l.buffer1[1],abStart:l.buffer2[0],abLength:l.buffer2[1]})}Dbe(t,e).forEach(l=>i(l,"a")),Dbe(t,r).forEach(l=>i(l,"b")),n.sort((l,c)=>l.oStart-c.oStart);let s=[],o=0;function a(l){l>o&&(s.push({stable:!0,buffer:"o",bufferStart:o,bufferLength:l-o,bufferContent:t.slice(o,l)}),o=l)}for(;n.length;){let l=n.shift(),c=l.oStart,u=l.oStart+l.oLength,f=[l];for(a(c);n.length;){let p=n[0],g=p.oStart;if(g>u)break;u=Math.max(u,g+p.oLength),f.push(n.shift())}if(f.length===1){if(l.abLength>0){let p=l.ab==="a"?e:r;s.push({stable:!0,buffer:l.ab,bufferStart:l.abStart,bufferLength:l.abLength,bufferContent:p.slice(l.abStart,l.abStart+l.abLength)})}}else{let p={a:[e.length,-1,t.length,-1],b:[r.length,-1,t.length,-1]};for(;f.length;){l=f.shift();let E=l.oStart,w=E+l.oLength,B=l.abStart,R=B+l.abLength,N=p[l.ab];N[0]=Math.min(B,N[0]),N[1]=Math.max(R,N[1]),N[2]=Math.min(E,N[2]),N[3]=Math.max(w,N[3])}let g=p.a[0]+(c-p.a[2]),m=p.a[1]+(u-p.a[3]),y=p.b[0]+(c-p.b[2]),v=p.b[1]+(u-p.b[3]),C={stable:!1,aStart:g,aLength:m-g,aContent:e.slice(g,m),oStart:c,oLength:u-c,oContent:t.slice(c,u),bStart:y,bLength:v-y,bContent:r.slice(y,v)};s.push(C)}o=u}return a(t.length),s}function qmt(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},n),typeof e=="string"&&(e=e.split(n.stringSeparator)),typeof t=="string"&&(t=t.split(n.stringSeparator)),typeof r=="string"&&(r=r.split(n.stringSeparator));let s=[],o=Omt(e,t,r),a=[];function l(){a.length&&s.push({ok:a}),a=[]}function c(u,f){if(u.length!==f.length)return!1;for(let p=0;p<u.length;p++)if(u[p]!==f[p])return!1;return!0}return o.forEach(u=>{u.stable?a.push(...u.bufferContent):n.excludeFalseConflicts&&c(u.aContent,u.bContent)?a.push(...u.aContent):(l(),s.push({conflict:{a:u.aContent,aIndex:u.aStart,o:u.oContent,oIndex:u.oStart,b:u.bContent,bIndex:u.bStart}}))}),l(),s}function Tbe(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},n);let s="<<<<<<<"+(n.label.a?` ${n.label.a}`:""),o="=======",a=">>>>>>>"+(n.label.b?` ${n.label.b}`:""),l=qmt(e,t,r,n),c=!1,u=[];return l.forEach(f=>{f.ok?u=u.concat(f.ok):f.conflict&&(c=!0,u=u.concat([s],f.conflict.a,[o],f.conflict.b,[a]))}),{conflict:c,result:u}}var Ku=q(require("vscode")),xm=require("vscode"),mv=class{constructor(t){this._api=t}register(t){t.registerHandler("get-diff-explanation-request",this.handleDiffExplanationRequestMessage.bind(this)),t.registerHandler("get-diff-group-changes-request",this.handleDiffGroupChangesRequestMessage.bind(this)),t.registerHandler("get-diff-descriptions-request",this.handleDiffDescriptionsRequestMessage.bind(this)),t.registerHandler("apply-changes-request",this.handleDiffApplyMessage.bind(this))}async streamLlmCompletion(t){let r=await mp(t,this._api.createRequestId(),[],[],[],Xr.agent,"gemini-2-flash-001-simple-port");for await(let{nodes:n=[]}of r){let i=n.find(s=>s.type===dc.RAW_RESPONSE)?.content;if(i){let s=i.trim();return s=s.replace(/^```|```$/g,""),s=s.replace(/^json/g,""),s}}return""}async handleDiffExplanationRequestMessage(t){let{changedFiles:r}=t.data,n=this.streamLlmCompletion.bind(this);try{let i=await Sbe(r,n);return{type:"get-diff-explanation-response",data:{explanation:i}}}catch(i){return console.error("Failed to explain diff:",i),{type:"get-diff-explanation-response",data:{explanation:[]}}}}async handleDiffGroupChangesRequestMessage(t){let{changedFiles:r,changesById:n}=t.data,i=this.streamLlmCompletion.bind(this);try{let s=await Bbe(r,i,!!n);return{type:"get-diff-group-changes-response",data:{groupedChanges:s}}}catch(s){return console.error("Failed to group changes:",s),{type:"get-diff-group-changes-response",data:{groupedChanges:[]}}}}async handleDiffDescriptionsRequestMessage(t){let{groupedChanges:r}=t.data,n=this.streamLlmCompletion.bind(this);try{let i=await Ibe(r,n);return{type:"get-diff-descriptions-response",data:{explanation:i}}}catch(i){return console.error("Failed to get descriptions:",i),{type:"get-diff-descriptions-response",data:{explanation:[]}}}}async handleDiffApplyMessage(t){let{path:r,originalCode:n,newCode:i}=t.data;try{if(!r?.trim())throw new Error("File path cannot be empty");if(typeof i!="string")throw new Error("New code must be a string");let s=this.resolveFilePath(r),o=Ku.Uri.file(s);if(i==="")try{return await xm.workspace.fs.stat(o),await xm.workspace.fs.delete(o),{type:"apply-changes-response",data:{success:!0}}}catch{return{type:"apply-changes-response",data:{success:!0}}}let a=new Ku.WorkspaceEdit,l=new Ku.Range(0,0,0,0),c="",u="",f=!1;try{await xm.workspace.fs.stat(o),f=!0,u=i;let g=await xm.workspace.openTextDocument(o);l=new Ku.Range(0,0,g.lineCount-1,g.lineAt(g.lineCount-1).text.length),c=(await xm.workspace.openTextDocument(o))?.getText()||"";let m=(w="")=>w.split(/(?<=\r\n|\n|\r)/g),y=m(c),v=m(n),C=m(i),E=Tbe(y,v,C,{excludeFalseConflicts:!1});E.conflict||(u=E.result.join(""))}catch{f=!1,u=i}if(f||a.createFile(o,{overwrite:!0}),a.replace(o,l,u),!await Ku.workspace.applyEdit(a))throw new Error("Failed to apply workspace edit");return{type:"apply-changes-response",data:{success:!0}}}catch(s){let o=s instanceof Error?s.message:String(s);return{type:"apply-changes-response",data:{success:!1,error:o}}}}resolveFilePath(t){let r=xm.workspace.workspaceFolders?.[0];if(!r)throw new Error("No workspace folder available");return Ku.Uri.joinPath(r.uri,t).fsPath}};var sg=q(require("fs")),Av=q(require("path")),og=q(require("vscode"));var Hmt=Object.freeze({git:{name:".git",type:"Directory"}});async function Ex(e){for(let[t,r]of Object.entries(Hmt)){let n=await eM(e,r.name,r.type);if(n!==void 0)return{root:n,toolName:t}}}var ff=q(require("fs/promises")),S4=q(require("os")),on=q(require("vscode"));var Wmt=[new RegExp("^/Users/[^/]+"),new RegExp("^/home/[^/]+"),/^[A-Za-z]:\\Users\\[^\\]+/];function Gmt(e){for(let t of Wmt){let r=e.match(t);if(r)return r[0]}return null}var $mt=[/Skipping acquiring lock for (.*?)\./,/Loading configuration from (.*?)\./];function Rbe(e){for(let t of $mt){let r=e.match(t);if(r&&r[1]){let n=r[1],i=Gmt(n);if(i){let s=w4(i);return{homePath:i,platform:s}}}}return null}function w4(e){return e.startsWith("/Users/")?"darwin":e.match(/^\/?[a-zA-Z](?::|%3A)\/.*/)?"win32":"linux"}function kbe(e,...t){let r=e==="win32"?"\\":"/";return t.join(r)}function Mbe(e,t){let r=e==="win32"?"\\":"/",n=t.lastIndexOf(r);return n===-1?".":t.substring(0,n)}var ig=class{constructor(t){this.globalState=t}isRemoteEnvironment(){return on.env.remoteName!==void 0}async getHomeDirectory(){if(!this.isRemoteEnvironment())return S4.homedir();if(this.globalState){let r=this.globalState.get("remoteHomeInfo");if(r?.homePath)return r.homePath}try{let r=await on.workspace.openTextDocument(on.Uri.from({scheme:"output",path:"exthost"})),n=Rbe(r.getText());if(n)return this.globalState&&await this.globalState.update("remoteHomeInfo",n),n.homePath}catch(r){on.window.showErrorMessage(`Error finding home directory: ${String(r)}`)}return S4.homedir()}async getPlatform(){if(!this.isRemoteEnvironment())return process.platform;if(this.globalState){let r=this.globalState.get("remoteHomeInfo");if(r?.platform)return r.platform}let t=await this.getHomeDirectory();return w4(t)}async joinPath(...t){let r=await this.getPlatform();return kbe(r,...t)}async getAugmentConfigDir(){let t=await this.getHomeDirectory();return await this.joinPath(t,".augment")}async getAugmentSshConfigPath(){let t=await this.getAugmentConfigDir();return await this.joinPath(t,"ssh-config")}async getSshKnownHostsPath(){let t=await this.getAugmentConfigDir();return await this.joinPath(t,"ssh-known_hosts")}async getDefaultSshConfigPath(){let t=await this.getHomeDirectory();return await this.joinPath(t,".ssh","config")}createFileUri(t){return this.isRemoteEnvironment()?on.Uri.parse(`vscode-local:${t}`):on.Uri.file(t)}async readFile(t){try{if(this.isRemoteEnvironment()){let r=this.createFileUri(t),n=await on.workspace.fs.readFile(r);return Buffer.from(n).toString("utf8")}else return await ff.readFile(t,"utf8")}catch(r){if(r?.code==="ENOENT"||r instanceof on.FileSystemError&&r.code==="FileNotFound")return"";throw on.window.showErrorMessage(`Error reading file ${t}: ${String(r)}`),r}}async getDirname(t){let r=await this.getPlatform();return Mbe(r,t)}async writeFile(t,r,n=384){let i=await this.getDirname(t);if(await this.mkdir(i,448),this.isRemoteEnvironment()){let s=this.createFileUri(t);try{await on.workspace.fs.writeFile(s,Buffer.from(r,"utf8"))}catch(o){throw on.window.showErrorMessage(`Error writing to local file from remote environment: ${t}
${String(o)}`),o}}else await ff.writeFile(t,r,{mode:n})}async mkdir(t,r=448){try{if(this.isRemoteEnvironment()){let n=this.createFileUri(t);try{await on.workspace.fs.createDirectory(n)}catch(i){if(i instanceof on.FileSystemError&&i.code==="FileNotFound"){on.window.showWarningMessage(`Could not create directory on local machine from remote environment: ${t}`);return}throw i}}else await ff.mkdir(t,{recursive:!0,mode:r})}catch(n){if(n?.code!=="EEXIST"&&!(n instanceof on.FileSystemError&&n.code==="FileExists"))throw on.window.showErrorMessage(`Error creating directory ${t}: ${String(n)}`),n}}async directoryExists(t){try{if(this.isRemoteEnvironment()){let r=this.createFileUri(t);return(await on.workspace.fs.stat(r)).type===on.FileType.Directory}else return await ff.access(t),!0}catch{return!1}}async fileExists(t){try{if(this.isRemoteEnvironment()){let r=this.createFileUri(t);return(await on.workspace.fs.stat(r)).type===on.FileType.File}else return await ff.access(t),!0}catch{return!1}}async openFile(t,r){let n=this.createFileUri(t);try{let i=await on.workspace.openTextDocument(n);return await on.window.showTextDocument(i),i}catch(i){if(r!==void 0){let s=await this.getDirname(t);await this.mkdir(s,448),await this.writeFile(t,r);let o=await on.workspace.openTextDocument(n);return await on.window.showTextDocument(o),o}throw i}}};var SF=class{sshFileSystem;augmentDirPath=[".augment","env"];constructor(t){this.sshFileSystem=new ig(t)}isValidScriptName(t){return t.endsWith(".sh")}async listSetupScripts(){let t=[];try{let r=await this.getScriptsFromHomeDirectory();t.push(...r);let n=await this.getScriptsFromGitRoot();t.push(...n);let i=await this.getScriptsFromWorkspaceRoot();t.push(...i);let s=new Map;for(let o of t)s.set(o.name+o.path,o);return Array.from(s.values())}catch(r){throw console.error("Error listing setup scripts:",r),r}}async saveSetupScript(t,r,n){try{let i,s,o,a;if(n==="home"){s=await this.sshFileSystem.getHomeDirectory(),i=await this.sshFileSystem.joinPath(s,...this.augmentDirPath),await this.ensureDirectoryExists(i,!0);let c=await this.sshFileSystem.joinPath(i,t);return await this.sshFileSystem.writeFile(c,r),c}if(n==="git"){if(o=await this.findGitRoot(),!o)throw new Error("Git root directory not found");i=await this.sshFileSystem.joinPath(o,...this.augmentDirPath)}else if(n==="workspace"){if(a=this.getWorkspaceRoot(),!a)throw new Error("Workspace root directory not found");i=await this.sshFileSystem.joinPath(a,...this.augmentDirPath)}else throw new Error("Invalid location");await this.ensureDirectoryExists(i,!1);let l=Av.join(i,t);return await sg.promises.writeFile(l,r,{mode:493}),l}catch(i){throw console.error(`Error saving setup script to ${n}:`,i),i}}async getScriptsFromHomeDirectory(){let t=await this.sshFileSystem.getHomeDirectory(),r=await this.sshFileSystem.joinPath(t,...this.augmentDirPath);return await this.getScriptsFromLocalDirectory(r,"home")}async getScriptsFromGitRoot(){let t=await this.findGitRoot();if(!t)return[];let r=await this.sshFileSystem.joinPath(t,...this.augmentDirPath);return await this.getScriptsFromWorkspaceDirectory(r,"git")}async getScriptsFromWorkspaceRoot(){let t=this.getWorkspaceRoot();if(!t)return[];let r=await this.sshFileSystem.joinPath(t,...this.augmentDirPath);return await this.getScriptsFromWorkspaceDirectory(r,"workspace")}async getScriptsFromLocalDirectory(t,r){let n=[];try{if(!await this.sshFileSystem.directoryExists(t))return[];let s=this.sshFileSystem.createFileUri(t);try{let o=await og.workspace.fs.readDirectory(s);for(let[a,l]of o)if(l===og.FileType.File&&this.isValidScriptName(a))try{let c=await this.sshFileSystem.joinPath(t,a),u=await this.sshFileSystem.readFile(c);n.push({name:a,path:c,content:u,location:r})}catch(c){console.error(`Error reading local file ${a}:`,c)}}catch(o){return console.error(`Error reading local directory ${t}:`,o),[]}}catch(i){console.error(`Error accessing local directory ${t}:`,i)}return n}async getScriptsFromWorkspaceDirectory(t,r){let n=[];try{if(!sg.existsSync(t))return[];let i=await sg.promises.readdir(t);for(let s of i){if(!this.isValidScriptName(s))continue;let o=Av.join(t,s);if((await sg.promises.stat(o)).isFile())try{let l=await Sn(o);n.push({name:s,path:o,content:l,location:r})}catch(l){console.error(`Error reading file ${o}:`,l)}}}catch(i){console.error(`Error reading directory ${t}:`,i)}return n}async findGitRoot(){let t=this.getWorkspaceRoot();if(t){try{let r=await Ex(t);if(r)return r.root.fsPath}catch(r){console.error("Error finding VCS:",r)}try{let r=await Do("git rev-parse --show-toplevel",{cwd:t});if(r)return r.trim()}catch(r){console.error("Error executing git command:",r)}}}getWorkspaceRoot(){if(og.workspace.workspaceFolders&&og.workspace.workspaceFolders.length>0)return og.workspace.workspaceFolders[0].uri.fsPath}async ensureDirectoryExists(t,r=!1){try{r&&this.sshFileSystem.isRemoteEnvironment()?await this.sshFileSystem.mkdir(t):await sg.promises.mkdir(t,{recursive:!0})}catch(n){throw console.error(`Error creating directory ${t}:`,n),n}}async createSetupScriptFile(t,r,n){if(!this.isValidScriptName(r))throw new Error("Invalid script name");let i=r.lastIndexOf("."),[s,o]=i!==-1?[r.substring(0,i),r.substring(i)]:[r,""],a=r,l=await this.listSetupScripts();if(l.find(u=>u.name===a&&u.location===t)){let u=1,f=`${s}(${u})${o}`;for(;l.find(p=>p.name===f&&p.location===t);)u++,f=`${s}(${u})${o}`;a=f}return await this.saveSetupScript(a,n,t)}async deleteSetupScript(t,r){try{let i=(await this.listSetupScripts()).find(s=>s.name===t&&s.location===r);if(!i)return!1;if(r==="home"){let s=this.sshFileSystem.createFileUri(i.path);await og.workspace.fs.delete(s)}else await sg.promises.unlink(i.path);return!0}catch(n){return console.error(`Error deleting setup script ${t}:`,n),!1}}async renameSetupScript(t,r,n){try{if(!this.isValidScriptName(r))throw new Error(`Invalid script name: ${r}. Script names must end with .sh`);let s=(await this.listSetupScripts()).find(c=>c.name===t&&c.location===n);if(!s)return;let o=Av.dirname(s.path),a=Av.join(o,r),l="";return n==="home"?l=await this.sshFileSystem.readFile(s.path):l=await Sn(s.path),await this.deleteSetupScript(t,n),await this.createSetupScriptFile(n,r,l),a}catch(i){throw console.error(`Error renaming setup script ${t} to ${r}:`,i),i}}};var Hbe=q(require("vscode"));var Pbe=require("child_process"),Lbe=q(require("vscode"));var hf=q(require("vscode"));function I4(e,t=!1){return t?new RegExp(`\\bHost\\s+${e}\\b`,"i"):new RegExp(`\\bHost\\s+${e}\\b[\\s\\S]*?(?=\\bHost\\b|$)`,"i")}async function Fbe(e){let t="Augment.vscode-augment",r=hf.workspace.getConfiguration("remote.SSH"),n=r.get("defaultExtensions")||[],i=n.includes(t),s=i?n:[...n,t];try{return i||await r.update("defaultExtensions",s,hf.ConfigurationTarget.Global),await e()}finally{i||await r.update("defaultExtensions",n,hf.ConfigurationTarget.Global)}}function Qbe(e){let t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`^\\s*Include\\s+${t}\\s*$`,"im")}var B4="# Added by Augment for remote agent SSH connections";async function Nbe(e){await hf.commands.executeCommand("vscode.openFolder",hf.Uri.parse(`vscode-remote://ssh-remote+${e}/mnt/persist/workspace`),{forceNewWindow:!0})}var yv=class{fileSystem;configPath=null;timeoutMs=1e4;constructor(t,r){this.fileSystem=new ig(t),this.configPath=r||null}async getAugmentConfigPath(){return this.configPath?this.configPath:await this.fileSystem.getAugmentSshConfigPath()}async getDefaultConfigPath(){let r=Lbe.workspace.getConfiguration("remote.SSH").get("configFile");return r&&r.trim()?r:await this.fileSystem.getDefaultSshConfigPath()}async loadAugmentConfig(){let t=await this.getAugmentConfigPath();return await this.fileSystem.readFile(t)}async loadDefaultConfig(){let t=await this.getDefaultConfigPath();return await this.fileSystem.readFile(t)}async saveToDefaultConfig(t){let r=await this.getDefaultConfigPath();await this.fileSystem.writeFile(r,t,420)}async saveToAugmentConfig(t){let r=await this.getAugmentConfigPath();await this.fileSystem.writeFile(r,t,420)}async addHost(t,r){let n=await this.loadAugmentConfig(),i=I4(t),s=n.match(i),o=await this.formatHostEntry(t,r);if(s){let a=n.replace(s[0],o);await this.saveToAugmentConfig(a)}else{let a=n.trim()?`${n.trim()}

${o}`:o;await this.saveToAugmentConfig(a)}}getRawString(t){return JSON.stringify(t).slice(1,-1)}async formatHostEntry(t,r){let{hostname:n,ssh_config_options:i}=r,s=`Host ${t}
`;s+=`   HostName ${n}
`;let o=await this.fileSystem.getPlatform()==="win32";for(let a of i){let l=a.value;if(a.key==="KnownHostsCommand"&&l.includes("\\n")&&(l=l.replace(/\\n/g,`
`)),o){let c=await this.resolveWSL();a.key==="ProxyCommand"&&(l=`${c} ${l}`),a.key==="KnownHostsCommand"&&(l=`${c} ${l}`),a.key==="UserKnownHostsFile"&&l==="/dev/null"&&(l="NUL")}s+="  "+a.key+" "+this.getRawString(l)+`
`}return s}async resolveWSL(){if(await this.fileSystem.getPlatform()==="win32")try{return await new Promise((t,r)=>{(0,Pbe.exec)("where wsl.exe",{timeout:1e4,windowsHide:!0},(n,i,s)=>{if(n){s&&s.trim()?r(new Error(`${n.message}. stderr: ${s.trim()}`)):r(n);return}let o=i.split(/\r?\n/).filter(a=>a.trim());if(o.length===0){r(new Error("WSL path not found"));return}t(o[0])})})}catch(t){console.error("Error resolving WSL path:",t)}return"C:\\Windows\\System32\\wsl.exe"}async hasHost(t){let r=await this.loadAugmentConfig();return I4(t,!0).test(r)}async addIncludeToDefaultConfig(){let t=await this.getDefaultConfigPath();if(!await this.fileSystem.fileExists(t)){let c=`Include ${await this.getAugmentConfigPath()}`,u=`${B4}
${c}
`;await this.saveToDefaultConfig(u);return}let n=await this.loadDefaultConfig(),i=await this.getAugmentConfigPath();if(Qbe(i).test(n))return;let o=`Include ${i}`,a=`${B4}
${o}

${n}`;await this.saveToDefaultConfig(a)}async ensureAugmentConfigExists(){let t=await this.getAugmentConfigPath();await this.fileSystem.fileExists(t)||await this.saveToAugmentConfig(`# Augment SSH Configuration
`)}async connectToHost(t,r){r&&await this.addHost(t,r),await this.ensureAugmentConfigExists(),await this.addIncludeToDefaultConfig(),await Fbe(async()=>(await Nbe(t),new Promise(n=>{setTimeout(n,this.timeoutMs)})))}};var Ube=require("child_process"),Wl=q(require("fs/promises")),Obe=q(require("os")),D4=q(require("path")),qbe=require("util"),Vbe=q(require("vscode")),Ymt=(0,qbe.promisify)(Ube.exec),T4={type:"ed25519",comment:`augment-remote-agent-key-${new Date().toISOString().split("T")[0]}`,passphrase:"",filename:"augment_remote_agent_key"},IF=class{isRemoteEnvironment(){return Vbe.env.remoteName!==void 0}getAugmentSshKeysDir(){let t=Obe.homedir();return D4.join(t,".augment","ssh-keys")}async ensureKeysDirectoryExists(){let t=this.getAugmentSshKeysDir();try{await Wl.mkdir(t,{recursive:!0,mode:448})}catch(r){if(r?.code!=="EEXIST")throw r}return t}async checkExistingKeys(t,r){try{let n=await Wl.access(t).then(()=>!0).catch(()=>!1),i=await Wl.access(r).then(()=>!0).catch(()=>!1);if(n&&i){let s=await Wl.readFile(r,"utf8");return{privateKeyPath:t,publicKeyPath:r,publicKey:s.trim()}}}catch{}return null}async deleteFile(t){try{await Wl.unlink(t)}catch{}}async generateKeyPair(t={}){if(this.isRemoteEnvironment())throw new Error("SSH key generation is not supported in remote environments. Please generate keys on your local machine.");let r={...T4,...t},n=await this.ensureKeysDirectoryExists(),i=r.filename||`id_${r.type}`,s=D4.join(n,i),o=`${s}.pub`,a=await this.checkExistingKeys(s,o);if(a)return a;await this.deleteFile(s),await this.deleteFile(o);let l=`ssh-keygen -t ${r.type}`;r.bits&&r.type==="rsa"&&(l+=` -b ${r.bits}`),r.comment&&(l+=` -C "${r.comment}"`);let c=r.passphrase||"";l+=` -f "${s}" -N "${c}"`;try{await Ymt(l),await Wl.chmod(s,384);let u=await Wl.readFile(o,"utf8");return{privateKeyPath:s,publicKeyPath:o,publicKey:u.trim()}}catch(u){throw new Error(`Failed to generate SSH key: ${String(u)}`)}}};var BF=class{constructor(t,r){this.api=t;this.sshKeyGenerator=new IF,this.sshConfigManager=new yv(r),this.sshFileSystem=new ig(r)}sshKeyGenerator;sshConfigManager;sshFileSystem;async connectToRemoteAgent(t){let r=await this.getKeyPair(),{privateKeyPath:n,publicKey:i}=r,o=(await this.api.remoteAgentAddSSHKey(t,[i])).ssh_config;o.ssh_config_options.push({key:"IdentityFile",value:n});let a=o.ssh_config_options.some(u=>u.key==="KnownHostsCommand"),l=o.ssh_config_options.some(u=>u.key==="StrictHostKeyChecking"),c=o.ssh_config_options.some(u=>u.key==="UserKnownHostsFile");a?(l||o.ssh_config_options.push({key:"StrictHostKeyChecking",value:"yes"}),c||o.ssh_config_options.push({key:"UserKnownHostsFile",value:"/dev/null"})):(l||o.ssh_config_options.push({key:"StrictHostKeyChecking",value:"no"}),c||o.ssh_config_options.push({key:"UserKnownHostsFile",value:await this.sshFileSystem.getSshKnownHostsPath()})),await this.sshConfigManager.connectToHost(t,o)}isRemoteEnvironment(){return this.sshFileSystem.isRemoteEnvironment()}async getKeyPair(){let t=await this.sshFileSystem.getHomeDirectory(),r=await this.sshFileSystem.joinPath(t,".augment","ssh-keys"),n=await this.sshFileSystem.joinPath(r,T4.filename),i=`${n}.pub`,s=await this.sshFileSystem.fileExists(n),o=await this.sshFileSystem.fileExists(i);if(s&&o){let a=await this.sshFileSystem.readFile(i);return{privateKeyPath:n,publicKeyPath:i,publicKey:a.trim()}}if(this.isRemoteEnvironment())throw await Hbe.window.showErrorMessage("We couldn't find an SSH key pair for remote agent connections. Please try again from a local workspace."),new Error("SSH key generation is not supported in remote environments. Please generate keys on your local machine.");return await this.sshKeyGenerator.generateKeyPair()}};var _x=q(require("vscode"));var Gl=class e{static _instance;_messageHandlers=new Map;_disposables=[];constructor(){this._disposables.push(_x.workspace.onDidChangeWorkspaceFolders(()=>{_x.workspace.workspaceFolders?.length||this.dispose()}))}static getInstance(){return e._instance||(e._instance=new e),e._instance}registerMessageHandler(t,r){this._messageHandlers.set(t,r)}unregisterMessageHandler(t){this._messageHandlers.delete(t)}hasHandler(t){return this._messageHandlers.has(t)}dispose(){this._messageHandlers.clear(),this._disposables.forEach(t=>{t.dispose()}),this._disposables=[],e._instance=void 0}sendMessage(t,r){let n=this._messageHandlers.get(t);if(n)try{n.postMessage(r)}catch{kk.error(`Error sending message to ${t}`)}}broadcastMessage(t){for(let[,r]of this._messageHandlers.entries())try{r.postMessage(t)}catch{kk.error(`Error broadcasting message to ${this._messageHandlers.size} handlers.`)}}};function Wbe(e){let t=Gl.getInstance();e.subscriptions.push(new _x.Disposable(()=>{t.dispose()}))}var wm=q(require("vscode"));var zu=q(require("vscode"));var xx=class e{constructor(t,r){this._webview=t;this._opts=r}static messengerId="remote-agent-diff-panel-messenger";register(t){t.registerHandler("remote-agent-diff-panel-loaded",this.handleDiffPanelLoadedMessage.bind(this));let r=Gl.getInstance();r.hasHandler(e.messengerId)||r.registerMessageHandler(e.messengerId,t)}handleDiffPanelLoadedMessage(t){return{type:"remote-agent-diff-panel-set-opts",data:this._opts}}updateOpts(t){this._opts=t,this._webview.postMessage({type:"remote-agent-diff-panel-set-opts",data:this._opts})}};var wx=class e extends Zs{constructor(r,n){let i=zu.window.createWebviewPanel("remote agent diff",e.title,zu.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0});super("remote-agent-diff.html",i.webview);this._deps=r;this._opts=n;this._panel=i;let{extensionUri:s}=this._deps;this._panel.iconPath={light:zu.Uri.joinPath(s,"media","panel-icon-light.svg"),dark:zu.Uri.joinPath(s,"media","panel-icon-dark.svg")},this._panel.onDidDispose(()=>{Gl.getInstance().broadcastMessage({type:"close-remote-agent-diff-panel"}),Gl.getInstance().unregisterMessageHandler(xx.messengerId),this.dispose()}),this.addDisposables(this._panel,new zu.Disposable(()=>{e.currentPanel=void 0}));let o=js(this._panel.webview,this._deps.workTimer);this.addDisposable(o),this._diffPanelMessenger=new xx(this._panel.webview,this._opts),this._diffPanelMessenger.register(o),this._remoteAgentDiffMessenger=new mv(this._deps.apiServer),this._remoteAgentDiffMessenger.register(o),this.loadHTML(s)}static currentPanel;static title="Remote Agent Changes";_panel;_diffPanelMessenger;_remoteAgentDiffMessenger;updateOpts(r){this._opts=r,this._diffPanelMessenger.updateOpts(r)}static createOrShow(r,n,i,s,o){let a=Gl.getInstance();if(e.currentPanel){e.currentPanel._panel.reveal(zu.ViewColumn.Active),e.currentPanel.updateOpts.call(e.currentPanel,o),a.broadcastMessage({type:"show-remote-agent-diff-panel",data:o});return}e.currentPanel=new e({extensionUri:r,apiServer:n,workTimer:i,globalState:s},o),a.broadcastMessage({type:"show-remote-agent-diff-panel",data:o})}static close(){Gl.getInstance().broadcastMessage({type:"close-remote-agent-diff-panel"}),e.currentPanel&&e.currentPanel._panel.dispose()}};var DF=class e{constructor(t,r,n,i){this._api=t;this._extensionUri=r;this._workTimer=n;this._globalState=i;this._remoteAgentSshManager=new BF(this._api),this._setupScriptsManager=new SF(this._globalState)}_remoteAgentSshManager;_setupScriptsManager;_webview;static messengerId="remote-agents-messenger";register(t,r){this._webview=r,t.registerHandler("create-remote-agent-request",this.handleCreateRemoteAgentMessage.bind(this)),t.registerHandler("delete-remote-agent-request",this.handleDeleteRemoteAgentMessage.bind(this)),t.registerHandler("get-remote-agent-chat-history-request",this.handleGetRemoteAgentChatHistoryMessage.bind(this)),t.registerHandler("remote-agent-chat-request",this.handleRemoteAgentChatRequestMessage.bind(this)),t.registerHandler("remote-agent-interrupt-request",this.handleRemoteAgentInterruptRequestMessage.bind(this)),t.registerHandler("get-remote-agent-overviews-request",this.handleGetRemoteAgentOverviewsMessage.bind(this)),t.registerHandler("list-setup-scripts-request",this.handleListSetupScriptsMessage.bind(this)),t.registerHandler("save-setup-script-request",this.handleSaveSetupScriptMessage.bind(this)),t.registerHandler("delete-setup-script-request",this.handleDeleteSetupScriptMessage.bind(this)),t.registerHandler("rename-setup-script-request",this.handleRenameSetupScriptMessage.bind(this)),t.registerHandler("show-remote-agent-diff-panel",this.handleShowRemoteAgentDiffPanelMessage.bind(this)),t.registerHandler("close-remote-agent-diff-panel",this.handleCloseRemoteAgentDiffPanelMessage.bind(this)),t.registerHandler("remote-agent-ssh-request",this.handleRemoteAgentSshRequestMessage.bind(this)),t.registerHandler("set-remote-agent-notification-enabled",this.handleSetRemoteAgentNotificationEnabledMessage.bind(this)),t.registerHandler("get-remote-agent-notification-enabled-request",this.handleGetRemoteAgentNotificationEnabledMessage.bind(this)),t.registerHandler("delete-remote-agent-notification-enabled",this.handleDeleteRemoteAgentNotificationEnabledMessage.bind(this)),t.registerHandler("remote-agent-notify-ready",this.handleRemoteAgentNotifyReadyMessage.bind(this)),t.registerHandler("remote-agent-workspace-logs-request",this.handleRemoteAgentWorkspaceLogsRequestMessage.bind(this)),t.registerHandler("open-scratch-file-request",this.handleOpenScratchFileRequestMessage.bind(this));let n=Gl.getInstance();n.hasHandler(e.messengerId)||n.registerMessageHandler(e.messengerId,t)}async handleCreateRemoteAgentMessage(t){try{let{prompt:r,workspaceSetup:n,setupScript:i}=t.data,s={request_nodes:[{id:1,type:ho.TEXT,text_node:{content:r}}]},o=await this._api.createRemoteAgent(n,s,void 0,i);return console.log("Created remote agent:",o),{type:"create-remote-agent-response",data:{success:!0,agentId:o.remote_agent_id}}}catch(r){return console.error("Failed to create remote agent:",r),{type:"create-remote-agent-response",data:{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}}async handleDeleteRemoteAgentMessage(t){try{let{agentId:r}=t.data;return await this._api.deleteRemoteAgent(r),{type:"remote-agent-delete-response",data:{success:!0}}}catch(r){return console.error("Failed to delete remote agent:",r),{type:"remote-agent-delete-response",data:{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}}async handleGetRemoteAgentOverviewsMessage(t){try{let r=await this._api.listRemoteAgents();return{type:"get-remote-agent-overviews-response",data:{overviews:r.remote_agents,maxRemoteAgents:r.max_remote_agents}}}catch(r){console.error("Failed to get remote agent overviews:",r);let n=r instanceof Error?r.message:String(r);return{type:"get-remote-agent-overviews-response",data:{overviews:[],maxRemoteAgents:0,error:n}}}}async handleGetRemoteAgentChatHistoryMessage(t){try{let{agentId:r,lastProcessedSequenceId:n}=t.data,i=await this._api.getRemoteAgentChatHistory(r,n);return{type:"get-remote-agent-chat-history-response",data:{chatHistory:i.chat_history}}}catch(r){console.error("Failed to get remote agent chat history:",r);let n=r instanceof Error?r.message:String(r);return{type:"get-remote-agent-chat-history-response",data:{chatHistory:[],error:n}}}}async handleRemoteAgentChatRequestMessage(t){try{let{agentId:r,requestDetails:n}=t.data,i=await this._api.remoteAgentChat(r,n);return{type:"remote-agent-chat-response",data:i.nodes}}catch(r){return console.error("Failed to get remote agent chat response:",r),{type:"remote-agent-chat-response",data:[]}}}async handleRemoteAgentInterruptRequestMessage(t){console.log("Interrupting remote agent:",t.data.agentId);let{agentId:r}=t.data;try{let n=await this._api.interruptRemoteAgent(r);return{type:"remote-agent-interrupt-response",data:n}}catch(n){return console.error("Failed to interrupt remote agent:",n),{type:"remote-agent-interrupt-response",data:4}}}async handleRemoteAgentSshRequestMessage(t){try{let{agentId:r}=t.data;return await this._remoteAgentSshManager.connectToRemoteAgent(r),{type:"remote-agent-ssh-response",data:{success:!0}}}catch(r){return console.error("Failed to get remote agent ssh config:",r),{type:"remote-agent-ssh-response",data:{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}}async handleSetRemoteAgentNotificationEnabledMessage(t){try{let{agentId:r,enabled:n}=t.data,i=await this._globalState.load("remoteAgentNotificationEnabled",{uniquePerWorkspace:!0})??{};return await this._globalState.save("remoteAgentNotificationEnabled",{...i,[r]:n},{uniquePerWorkspace:!0}),{type:"empty"}}catch(r){return console.error("Failed to set remote agent notification enabled:",r),{type:"empty"}}}async handleGetRemoteAgentNotificationEnabledMessage(t){try{let r=await this._globalState.load("remoteAgentNotificationEnabled",{uniquePerWorkspace:!0}),{agentIds:n}=t.data;return n?{type:"get-remote-agent-notification-enabled-response",data:n.reduce((i,s)=>(i[s]=r?.[s]??!1,i),{})}:{type:"get-remote-agent-notification-enabled-response",data:r??{}}}catch(r){return console.error("Failed to get remote agent notification enabled:",r),{type:"get-remote-agent-notification-enabled-response",data:{}}}}async handleDeleteRemoteAgentNotificationEnabledMessage(t){try{let{agentId:r}=t.data,n=await this._globalState.load("remoteAgentNotificationEnabled",{uniquePerWorkspace:!0});return n?(delete n[r],await this._globalState.save("remoteAgentNotificationEnabled",n,{uniquePerWorkspace:!0}),{type:"empty"}):{type:"empty"}}catch(r){return console.error("Failed to delete remote agent notification enabled:",r),{type:"empty"}}}async handleRemoteAgentNotifyReadyMessage(t){let{agentId:r}=t.data;return(await this._globalState.load("remoteAgentNotificationEnabled",{uniquePerWorkspace:!0}))?.[r]?(wm.window.showInformationMessage("Remote Agent is waiting for your input!",{title:"Go to Remote Agent",isCloseAffordance:!1,onClick:async()=>wm.commands.executeCommand("vscode-augment.focusAugmentPanel").then(()=>{this._webview?.postMessage({type:"remote-agent-select-agent-id",data:{agentId:r}})})}).then(i=>{i?.onClick&&i.onClick()}),{type:"empty"}):{type:"empty"}}handleShowRemoteAgentDiffPanelMessage(t){let r=t.data;return wx.createOrShow(this._extensionUri,this._api,this._workTimer,this._globalState,r),t}handleCloseRemoteAgentDiffPanelMessage(t){return wx.close(),Promise.resolve({type:"empty"})}async handleListSetupScriptsMessage(t){try{let r=await this._setupScriptsManager.listSetupScripts();return{type:"list-setup-scripts-response",data:{scripts:r}}}catch(r){return console.error("Failed to list setup scripts:",r),{type:"list-setup-scripts-response",data:{scripts:[],error:r instanceof Error?r.message:String(r)}}}}async handleSaveSetupScriptMessage(t){try{let{name:r,content:n,location:i}=t.data,s=await this._setupScriptsManager.createSetupScriptFile(i,r,n);return{type:"save-setup-script-response",data:{success:!0,path:s}}}catch(r){return console.error("Failed to save setup script:",r),{type:"save-setup-script-response",data:{success:!1,error:r instanceof Error?r.message:String(r)}}}}async handleRemoteAgentWorkspaceLogsRequestMessage(t){try{let{agentId:r}=t.data,n=await this._api.getRemoteAgentWorkspaceLogs(r);return{type:"remote-agent-workspace-logs-response",data:{workspaceSetupStatus:n.workspace_setup_status}}}catch(r){return console.error("Failed to get remote agent workspace logs:",r),{type:"remote-agent-workspace-logs-response",data:{workspaceSetupStatus:{steps:[]}}}}}async handleDeleteSetupScriptMessage(t){try{let{name:r,location:n}=t.data,i=await this._setupScriptsManager.deleteSetupScript(r,n);return{type:"delete-setup-script-response",data:{success:i}}}catch(r){return console.error("Failed to delete setup script:",r),{type:"delete-setup-script-response",data:{success:!1,error:r instanceof Error?r.message:String(r)}}}}async handleRenameSetupScriptMessage(t){try{let{oldName:r,newName:n,location:i}=t.data,s=await this._setupScriptsManager.renameSetupScript(r,n,i);return{type:"rename-setup-script-response",data:{success:!0,path:s}}}catch(r){return console.error("Failed to rename setup script:",r),{type:"rename-setup-script-response",data:{success:!1,error:r instanceof Error?r.message:String(r)}}}}async handleOpenScratchFileRequestMessage(t){try{let{content:r,language:n}=t.data,i=await wm.workspace.openTextDocument({content:r,language:n||"shellscript"});return await wm.window.showTextDocument(i),{type:"empty"}}catch(r){return console.error("Failed to open scratch file:",r),{type:"empty"}}}};var TF=class extends Error{constructor(){super("Invalid source folder uri")}},RF=class extends Error{constructor(t){super(`cannot access source folder: ${t}`)}},kF=class extends Error{constructor(){super("source folder is not a directory")}},MF=class extends Error{constructor(){super("source folder already exists")}},FF=class extends Error{constructor(){super("source folder is home directory")}},QF=class extends Error{constructor(){super("source folder is not an external source folder")}},NF=class extends Error{constructor(){super("source folder does not exist in workspace")}};var PF=class extends Error{constructor(){super("source folder enumeration is not complete")}},vv=(s=>(s[s.vscodeWorkspaceFolder=0]="vscodeWorkspaceFolder",s[s.externalFolder=1]="externalFolder",s[s.nestedWorkspaceFolder=2]="nestedWorkspaceFolder",s[s.nestedExternalFolder=3]="nestedExternalFolder",s[s.untrackedFolder=4]="untrackedFolder",s))(vv||{});var Gbe=require("util"),$be=require("child_process");var LF=class extends Cn{_chatMode;_platform;_shellName;execPromise=(0,Gbe.promisify)($be.exec);_allowlist;constructor(t,r,n){super(Hi.shell,Vt.Check),this._chatMode=t,this._platform=r,this._shellName=n,this._allowlist=PM(process.platform,this._shellName)}get description(){return`Execute a shell command.

- You can use this tool to interact with the user's local version control system. Do not use the
retrieval tool for that purpose.
- If there is a more specific tool available that can perform the function, use that tool instead of
this one.

The OS is ${process.platform}. The shell is '${this._shellName}'.`}inputSchemaJson=JSON.stringify({type:"object",properties:{command:{type:"string",description:"The shell command to execute."}},required:["command"]});checkToolCallSafe(t){if(this._chatMode===Xr.agent){let r=t.command;return LM(this._allowlist,r,this._shellName)}return!1}async call(t,r,n){let i=t.command;try{let s=await this.execPromise(i,{signal:n,cwd:await Vi().getCwd(),shell:this._shellName});return{text:s.stdout+s.stderr,isError:!1}}catch(s){return Kmt(s)&&s.stdout!==void 0&&s.stderr!==void 0?{text:s.stdout+s.stderr,isError:!1}:{text:`Failed to execute shell command: ${s instanceof Error?s.message:String(s)}`,isError:!0}}}};function Kmt(e){return e!==null&&typeof e=="object"&&"code"in e&&"stderr"in e&&"stdout"in e&&"message"in e&&"name"in e}var Zxe=require("child_process"),Xxe=q(BA()),mf=q(Gf()),ewe=q(require("path")),Kt=q(require("vscode"));var UF=q(require("vscode"));async function zmt(e,t,r){let i=(await Sn(e)).split(`
`),s=t-1,o=r-1,a=i.slice(0,s).reduce((c,u)=>c+u.length+1,0),l=i.slice(0,o+1).reduce((c,u)=>c+u.length+1,0)-1;return{charStart:a,charEnd:l}}async function Ybe(e,t){let r=UF.workspace.workspaceFolders?.[0];if(!r)throw new Error("No workspace folder found");let n=UF.Uri.joinPath(r.uri,t.path).fsPath,i=e.resolvePathName(n);if(!i)throw new Error(`Could not resolve path: ${t.path}`);let{charStart:s,charEnd:o}=await zmt(i.absPath,t.startLine,t.endLine);return{requestId:Ph(),mode:"BACKGROUND",scope:"FILE",result:{suggestionId:Ph(),path:t.path,blobName:t.oldBlobName??"",charStart:s,charEnd:o,existingCode:t.oldText,suggestedCode:t.text,changeDescription:t.description,diffSpans:[],editingScore:1,localizationScore:1,editingScoreThreshold:1},qualifiedPathName:i,lineRange:{start:t.startLine-1,stop:t.endLine-1},uriScheme:"file",occurredAt:new Date,state:"fresh",changeType:"modification"}}var R4="augment://sign-in",Kbe=`Augment is only available to signed in users. [Please sign in](${R4}).`,zbe="Augment works best when it has access to your entire codebase. Please grant permission to sync your workspace.",Sx=class{constructor(t,r){this.message=t;this.response=r;this.occuredAt=new Date}occuredAt};var OF=class extends X{constructor(r){super();this._getter=r;this._cache=new Hf({max:1e3,ttl:1e3*60*60,fetchMethod:this._fetchSmartPasteResults}),this.addDisposable({dispose:()=>{this._cache.clear()}})}_cache;_fetchSmartPasteResults=async(r,n,{context:i})=>{let s=await this._getter(i);return Promise.resolve({generator:new gm(s.generator),requestId:s.requestId})};get=async(r,n,i,s)=>{let o=Jmt(r,n,i),a=this._cache.get(o);(!a||a.generator.hasErrored)&&this._cache.delete(o);let l=await this._cache.fetch(o,{context:s,forceRefresh:!1});if(l)return{generator:l.generator.copy(),requestId:l.requestId}};getDirect=async r=>{let n=await Promise.resolve(this._getter(r));if(!n)return;let i=new gm(n.generator);if(i)return{generator:i.copy(),requestId:n.requestId}}};function Jmt(e,t,r){return`${e}--${t}--${r}`}var Jbe=q(require("vscode"));var Ji=class extends At{static commandID="vscode-augment.focusAugmentPanel";type="public";constructor(){super()}async run(){await Jbe.commands.executeCommand("augment-chat.focus")}};var Xs=q(require("vscode"));var jmt="GitHub.copilot",Zmt="Codeium.codeium";var Sm=class e extends X{constructor(r,n){super();this._config=r;this._actionsModel=n;this.addDisposable(Xs.workspace.onDidChangeConfiguration(i=>{(i.affectsConfiguration("github.copilot")||i.affectsConfiguration("codeium"))&&this.checkAndUpdateState()})),this.addDisposable(Xs.extensions.onDidChange(()=>{this.checkAndUpdateState()}))}logger=j("ConflictingExtensions");checkAndUpdateState(){if(this._config.config.conflictingCodingAssistantCheck===!1){this._actionsModel.setSystemStateStatus("disabledGithubCopilot","complete"),this._actionsModel.setSystemStateStatus("disabledCodeium","complete");return}let n=[{check:()=>e._checkGitHubCopilot(),stateName:"disabledGithubCopilot"},{check:()=>e._checkCodeium(),stateName:"disabledCodeium"}];for(let{check:i,stateName:s}of n){let a=i().isConflicting?"incomplete":"complete";this._actionsModel.setSystemStateStatus(s,a)}}static _checkGitHubCopilot(){if(!Xs.extensions.getExtension(jmt))return{extension:"copilot",isConflicting:!1};let n=Xs.workspace.getConfiguration("github.copilot");return{extension:"copilot",isConflicting:n.enable&&n.enable["*"]||!1}}static async disableGitHubCopilot(){try{let r=Xs.workspace.getConfiguration("github.copilot");await r.update("enable",{"*":!1},this.targetForConfig(r.inspect("enable")))}catch{Xs.commands.executeCommand("workbench.extensions.search","@enabled GitHub Copilot")}}static _checkCodeium(){if(!Xs.extensions.getExtension(Zmt))return{extension:"codeium",isConflicting:!1};let n=Xs.workspace.getConfiguration("codeium");return{extension:"codeium",isConflicting:n.enableConfig&&n.enableConfig["*"]||!1}}static async disableCodeium(){try{let r=Xs.workspace.getConfiguration("codeium");await r.update("enableConfig",{"*":!1},this.targetForConfig(r.inspect("enableConfig")))}catch{Xs.commands.executeCommand("workbench.extensions.search","@enabled Codeium")}}static packageName(r,n){return r.packageJSON.displayName||r.packageJSON.name||n}static targetForConfig(r){return r&&r.workspaceValue!==void 0?Xs.ConfigurationTarget.Workspace:Xs.ConfigurationTarget.Global}};var l1=q(iEe()),i1=q(cEe()),Q_e=require("child_process"),yxe=q(q4()),bv=q(q4()),Wxe=require("events"),o1=Object.defineProperty,OAt=Object.defineProperties,qAt=Object.getOwnPropertyDescriptor,VAt=Object.getOwnPropertyDescriptors,a8=Object.getOwnPropertyNames,uEe=Object.getOwnPropertySymbols,HEe=Object.prototype.hasOwnProperty,HAt=Object.prototype.propertyIsEnumerable,dEe=(e,t,r)=>t in e?o1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Yl=(e,t)=>{for(var r in t||(t={}))HEe.call(t,r)&&dEe(e,r,t[r]);if(uEe)for(var r of uEe(t))HAt.call(t,r)&&dEe(e,r,t[r]);return e},Dx=(e,t)=>OAt(e,VAt(t)),Be=(e,t)=>function(){return e&&(t=(0,e[a8(e)[0]])(e=0)),t},WAt=(e,t)=>function(){return t||(0,e[a8(e)[0]])((t={exports:{}}).exports,t),t.exports},Si=(e,t)=>{for(var r in t)o1(e,r,{get:t[r],enumerable:!0})},GAt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of a8(t))!HEe.call(e,i)&&i!==r&&o1(e,i,{get:()=>t[i],enumerable:!(n=qAt(t,i))||n.enumerable});return e},Ai=e=>GAt(o1({},"__esModule",{value:!0}),e),Bx=(e,t,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(c){i(c)}},o=l=>{try{a(r.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(e,t)).next())});function $At(...e){let t=new String(e);return a1.set(t,e),t}function r1(e){return e instanceof String&&a1.has(e)}function fEe(e){return a1.get(e)||[]}var a1,Mx=Be({"src/lib/args/pathspec.ts"(){"use strict";a1=new WeakMap}}),pf,lg=Be({"src/lib/errors/git-error.ts"(){"use strict";pf=class extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),Fx,_v=Be({"src/lib/errors/git-response-error.ts"(){"use strict";lg(),Fx=class extends pf{constructor(e,t){super(void 0,t||String(e)),this.git=e}}}}),WEe,GEe=Be({"src/lib/errors/task-configuration-error.ts"(){"use strict";lg(),WEe=class extends pf{constructor(e){super(void 0,e)}}}});function $Ee(e){return typeof e=="function"?e:Tm}function YEe(e){return typeof e=="function"&&e!==Tm}function KEe(e,t){let r=e.indexOf(t);return r<=0?[e,""]:[e.substr(0,r),e.substr(r+1)]}function zEe(e,t=0){return JEe(e)&&e.length>t?e[t]:void 0}function Dm(e,t=0){if(JEe(e)&&e.length>t)return e[e.length-1-t]}function JEe(e){return!!(e&&typeof e.length=="number")}function Qx(e="",t=!0,r=`
`){return e.split(r).reduce((n,i)=>{let s=t?i.trim():i;return s&&n.push(s),n},[])}function l8(e,t){return Qx(e,!0).map(r=>t(r))}function c8(e){return(0,l1.exists)(e,l1.FOLDER)}function Vr(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}function jEe(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}function c1(e,t){if(Array.isArray(e)){let r=e.indexOf(t);r>=0&&e.splice(r,1)}else e.delete(t);return t}function ju(e){return Array.isArray(e)?e:[e]}function ZEe(e){return e.replace(/[\s-]+(.)/g,(t,r)=>r.toUpperCase())}function XEe(e){return ju(e).map(String)}function Bn(e,t=0){if(e==null)return t;let r=parseInt(e,10);return isNaN(r)?t:r}function Tx(e,t){let r=[];for(let n=0,i=e.length;n<i;n++)r.push(t,e[n]);return r}function Rx(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}function e_e(e,t){return Object.assign({},...t.map(r=>r in e?{[r]:e[r]}:{}))}function K4(e=0){return new Promise(t=>setTimeout(t,e))}function z4(e){if(e!==!1)return e}var Ev,Tm,Nx,u1=Be({"src/lib/utils/util.ts"(){"use strict";Ev="\0",Tm=()=>{},Nx=Object.prototype.toString.call.bind(Object.prototype.toString)}});function Zu(e,t,r){return t(e)?e:arguments.length>2?r:void 0}function u8(e,t){let r=r1(e)?"string":typeof e;return/number|string|boolean/.test(r)&&(!t||!t.includes(r))}function d8(e){return!!e&&Nx(e)==="[object Object]"}function t_e(e){return typeof e=="function"}var Px,eo,r_e,n1,f8,n_e=Be({"src/lib/utils/argument-filters.ts"(){"use strict";u1(),Mx(),Px=e=>Array.isArray(e),eo=e=>typeof e=="string",r_e=e=>Array.isArray(e)&&e.every(eo),n1=e=>eo(e)||Array.isArray(e)&&e.every(eo),f8=e=>e==null||"number|boolean|function".includes(typeof e)?!1:Array.isArray(e)||typeof e=="string"||typeof e.length=="number"}}),J4,YAt=Be({"src/lib/utils/exit-codes.ts"(){"use strict";J4=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.NOT_FOUND=-2]="NOT_FOUND",e[e.UNCLEAN=128]="UNCLEAN",e))(J4||{})}}),kx,KAt=Be({"src/lib/utils/git-output-streams.ts"(){"use strict";kx=class{constructor(e,t){this.stdOut=e,this.stdErr=t}asStrings(){return new kx(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),Lt,ag,zAt=Be({"src/lib/utils/line-parser.ts"(){"use strict";Lt=class{constructor(e,t){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((i,s)=>this.addMatch(i,s,r(s)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,r){let n=r&&e.exec(r);return n&&this.pushMatch(t,n),!!n}pushMatch(e,t){this.matches.push(...t.slice(1))}},ag=class extends Lt{addMatch(e,t,r){return/^remote:\s/.test(String(r))&&super.addMatch(e,t,r)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}}});function i_e(...e){let t=process.cwd(),r=Object.assign(Yl({baseDir:t},s_e),...e.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||t,r.trimmed=r.trimmed===!0,r}var s_e,JAt=Be({"src/lib/utils/simple-git-options.ts"(){"use strict";s_e={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function h8(e,t=[]){return d8(e)?Object.keys(e).reduce((r,n)=>{let i=e[n];return r1(i)?r.push(i):u8(i,["boolean"])?r.push(n+"="+i):r.push(n),r},t):t}function oa(e,t=0,r=!1){let n=[];for(let i=0,s=t<0?e.length:t;i<s;i++)"string|number".includes(typeof e[i])&&n.push(String(e[i]));return h8(g8(e),n),r||n.push(...jAt(e)),n}function jAt(e){let t=typeof Dm(e)=="function";return Zu(Dm(e,t?1:0),Px,[])}function g8(e){let t=t_e(Dm(e));return Zu(Dm(e,t?1:0),d8)}function yi(e,t=!0){let r=$Ee(Dm(e));return t||YEe(r)?r:void 0}var ZAt=Be({"src/lib/utils/task-options.ts"(){"use strict";n_e(),u1(),Mx()}});function j4(e,t){return e(t.stdOut,t.stdErr)}function la(e,t,r,n=!0){return ju(r).forEach(i=>{for(let s=Qx(i,n),o=0,a=s.length;o<a;o++){let l=(c=0)=>{if(!(o+c>=a))return s[o+c]};t.some(({parse:c})=>c(l,e))}}),e}var XAt=Be({"src/lib/utils/task-parser.ts"(){"use strict";u1()}}),o_e={};Si(o_e,{ExitCodes:()=>J4,GitOutputStreams:()=>kx,LineParser:()=>Lt,NOOP:()=>Tm,NULL:()=>Ev,RemoteLineParser:()=>ag,append:()=>Vr,appendTaskOptions:()=>h8,asArray:()=>ju,asCamelCase:()=>ZEe,asFunction:()=>$Ee,asNumber:()=>Bn,asStringArray:()=>XEe,bufferToString:()=>Rx,callTaskParser:()=>j4,createInstanceConfig:()=>i_e,delay:()=>K4,filterArray:()=>Px,filterFunction:()=>t_e,filterHasLength:()=>f8,filterPlainObject:()=>d8,filterPrimitives:()=>u8,filterString:()=>eo,filterStringArray:()=>r_e,filterStringOrStringArray:()=>n1,filterType:()=>Zu,first:()=>zEe,folderExists:()=>c8,forEachLineWithContent:()=>l8,getTrailingOptions:()=>oa,including:()=>jEe,isUserFunction:()=>YEe,last:()=>Dm,objectToString:()=>Nx,orVoid:()=>z4,parseStringResponse:()=>la,pick:()=>e_e,prefixedArray:()=>Tx,remove:()=>c1,splitOn:()=>KEe,toLinesWithContent:()=>Qx,trailingFunctionArgument:()=>yi,trailingOptionsArgument:()=>g8});var wt=Be({"src/lib/utils/index.ts"(){"use strict";n_e(),YAt(),KAt(),zAt(),JAt(),ZAt(),XAt(),u1()}}),a_e={};Si(a_e,{CheckRepoActions:()=>Z4,checkIsBareRepoTask:()=>c_e,checkIsRepoRootTask:()=>l_e,checkIsRepoTask:()=>e0t});function e0t(e){switch(e){case"bare":return c_e();case"root":return l_e()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:d1,parser:p8}}function l_e(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:d1,parser(t){return/^\.(git)?$/.test(t.trim())}}}function c_e(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:d1,parser:p8}}function t0t(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}var Z4,d1,p8,u_e=Be({"src/lib/tasks/check-is-repo.ts"(){"use strict";wt(),Z4=(e=>(e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root",e))(Z4||{}),d1=({exitCode:e},t,r,n)=>{if(e===128&&t0t(t))return r(Buffer.from("false"));n(t)},p8=e=>e.trim()==="true"}});function r0t(e,t){let r=new d_e(e),n=e?h_e:f_e;return Qx(t).forEach(i=>{let s=i.replace(n,"");r.paths.push(s),(g_e.test(s)?r.folders:r.files).push(s)}),r}var d_e,f_e,h_e,g_e,n0t=Be({"src/lib/responses/CleanSummary.ts"(){"use strict";wt(),d_e=class{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}},f_e=/^[a-z]+\s*/i,h_e=/^[a-z]+\s+[a-z]+\s*/i,g_e=/\/$/}}),X4={};Si(X4,{EMPTY_COMMANDS:()=>f1,adhocExecTask:()=>p_e,configurationErrorTask:()=>aa,isBufferTask:()=>A_e,isEmptyTask:()=>y_e,straightThroughBufferTask:()=>m_e,straightThroughStringTask:()=>To});function p_e(e){return{commands:f1,format:"empty",parser:e}}function aa(e){return{commands:f1,format:"empty",parser(){throw typeof e=="string"?new WEe(e):e}}}function To(e,t=!1){return{commands:e,format:"utf-8",parser(r){return t?String(r).trim():r}}}function m_e(e){return{commands:e,format:"buffer",parser(t){return t}}}function A_e(e){return e.format==="buffer"}function y_e(e){return e.format==="empty"||!e.commands.length}var f1,wi=Be({"src/lib/tasks/task.ts"(){"use strict";GEe(),f1=[]}}),v_e={};Si(v_e,{CONFIG_ERROR_INTERACTIVE_MODE:()=>m8,CONFIG_ERROR_MODE_REQUIRED:()=>A8,CONFIG_ERROR_UNKNOWN_OPTION:()=>y8,CleanOptions:()=>ZF,cleanTask:()=>C_e,cleanWithOptionsTask:()=>i0t,isCleanOptionsArray:()=>s0t});function i0t(e,t){let{cleanMode:r,options:n,valid:i}=o0t(e);return r?i.options?(n.push(...t),n.some(c0t)?aa(m8):C_e(r,n)):aa(y8+JSON.stringify(e)):aa(A8)}function C_e(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser(n){return r0t(e==="n",n)}}}function s0t(e){return Array.isArray(e)&&e.every(t=>v8.has(t))}function o0t(e){let t,r=[],n={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach(i=>{a0t(i)?(t=i,n.cleanMode=!0):n.options=n.options&&l0t(r[r.length]=`-${i}`)}),{cleanMode:t,options:r,valid:n}}function a0t(e){return e==="f"||e==="n"}function l0t(e){return/^-[a-z]$/i.test(e)&&v8.has(e.charAt(1))}function c0t(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:e==="--interactive"}var m8,A8,y8,ZF,v8,b_e=Be({"src/lib/tasks/clean.ts"(){"use strict";n0t(),wt(),wi(),m8="Git clean interactive mode is not supported",A8='Git clean mode parameter ("n" or "f") is required',y8="Git clean unknown option found in: ",ZF=(e=>(e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d",e))(ZF||{}),v8=new Set(["i",...XEe(Object.values(ZF))])}});function u0t(e){let t=new __e;for(let r of E_e(e))t.addValue(r.file,String(r.key),r.value);return t}function d0t(e,t){let r=null,n=[],i=new Map;for(let s of E_e(e,t))s.key===t&&(n.push(r=s.value),i.has(s.file)||i.set(s.file,[]),i.get(s.file).push(r));return{key:t,paths:Array.from(i.keys()),scopes:i,value:r,values:n}}function f0t(e){return e.replace(/^(file):/,"")}function*E_e(e,t=null){let r=e.split("\0");for(let n=0,i=r.length-1;n<i;){let s=f0t(r[n++]),o=r[n++],a=t;if(o.includes(`
`)){let l=KEe(o,`
`);a=l[0],o=l[1]}yield{file:s,key:a,value:o}}}var __e,h0t=Be({"src/lib/responses/ConfigList.ts"(){"use strict";wt(),__e=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((e,t)=>Object.assign(e,this.values[t]),{})),this._all}addFile(e){if(!(e in this.values)){let t=Dm(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,r){let n=this.addFile(e);n.hasOwnProperty(t)?Array.isArray(n[t])?n[t].push(r):n[t]=[n[t],r]:n[t]=r,this._all=void 0}}}});function V4(e,t){return typeof e=="string"&&e8.hasOwnProperty(e)?e:t}function g0t(e,t,r,n){let i=["config",`--${n}`];return r&&i.push("--add"),i.push(e,t),{commands:i,format:"utf-8",parser(s){return s}}}function p0t(e,t){let r=["config","--null","--show-origin","--get-all",e];return t&&r.splice(1,0,`--${t}`),{commands:r,format:"utf-8",parser(n){return d0t(n,e)}}}function m0t(e){let t=["config","--list","--show-origin","--null"];return e&&t.push(`--${e}`),{commands:t,format:"utf-8",parser(r){return u0t(r)}}}function A0t(){return{addConfig(e,t,...r){return this._runTask(g0t(e,t,r[0]===!0,V4(r[1],"local")),yi(arguments))},getConfig(e,t){return this._runTask(p0t(e,V4(t,void 0)),yi(arguments))},listConfig(...e){return this._runTask(m0t(V4(e[0],void 0)),yi(arguments))}}}var e8,x_e=Be({"src/lib/tasks/config.ts"(){"use strict";h0t(),wt(),e8=(e=>(e.system="system",e.global="global",e.local="local",e.worktree="worktree",e))(e8||{})}});function y0t(e){return w_e.has(e)}var H4,w_e,S_e=Be({"src/lib/tasks/diff-name-status.ts"(){"use strict";H4=(e=>(e.ADDED="A",e.COPIED="C",e.DELETED="D",e.MODIFIED="M",e.RENAMED="R",e.CHANGED="T",e.UNMERGED="U",e.UNKNOWN="X",e.BROKEN="B",e))(H4||{}),w_e=new Set(Object.values(H4))}});function v0t(...e){return new B_e().param(...e)}function C0t(e){let t=new Set,r={};return l8(e,n=>{let[i,s,o]=n.split(Ev);t.add(i),(r[i]=r[i]||[]).push({line:Bn(s),path:i,preview:o})}),{paths:t,results:r}}function b0t(){return{grep(e){let t=yi(arguments),r=oa(arguments);for(let i of I_e)if(r.includes(i))return this._runTask(aa(`git.grep: use of "${i}" is not supported.`),t);typeof e=="string"&&(e=v0t().param(e));let n=["grep","--null","-n","--full-name",...r,...e];return this._runTask({commands:n,format:"utf-8",parser(i){return C0t(i)}},t)}}}var I_e,Ix,hEe,B_e,D_e=Be({"src/lib/tasks/grep.ts"(){"use strict";wt(),wi(),I_e=["-h"],Ix=Symbol("grepQuery"),B_e=class{constructor(){this[hEe]=[]}*[(hEe=Ix,Symbol.iterator)](){for(let e of this[Ix])yield e}and(...e){return e.length&&this[Ix].push("--and","(",...Tx(e,"-e"),")"),this}param(...e){return this[Ix].push(...Tx(e,"-e")),this}}}}),T_e={};Si(T_e,{ResetMode:()=>XF,getResetMode:()=>_0t,resetTask:()=>E0t});function E0t(e,t){let r=["reset"];return R_e(e)&&r.push(`--${e}`),r.push(...t),To(r)}function _0t(e){if(R_e(e))return e;switch(typeof e){case"string":case"undefined":return"soft"}}function R_e(e){return k_e.includes(e)}var XF,k_e,M_e=Be({"src/lib/tasks/reset.ts"(){"use strict";wi(),XF=(e=>(e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep",e))(XF||{}),k_e=Array.from(Object.values(XF))}});function x0t(){return(0,i1.default)("simple-git")}function gEe(e,t,r){return!t||!String(t).replace(/\s*/,"")?r?(n,...i)=>{e(n,...i),r(n,...i)}:e:(n,...i)=>{e(`%s ${n}`,t,...i),r&&r(n,...i)}}function w0t(e,t,{namespace:r}){if(typeof e=="string")return e;let n=t&&t.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function C8(e,t,r,n=x0t()){let i=e&&`[${e}]`||"",s=[],o=typeof t=="string"?n.extend(t):t,a=w0t(Zu(t,eo),o,n);return c(r);function l(u,f){return Vr(s,C8(e,a.replace(/^[^:]+/,u),f,n))}function c(u){let f=u&&`[${u}]`||"",p=o&&gEe(o,f)||Tm,g=gEe(n,`${i} ${f}`,p);return Object.assign(o?p:g,{label:e,sibling:l,info:g,step:c})}}var F_e=Be({"src/lib/git-logger.ts"(){"use strict";wt(),i1.default.formatters.L=e=>String(f8(e)?e.length:"-"),i1.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):Nx(e)}}),JF,t8,S0t=Be({"src/lib/runners/tasks-pending-queue.ts"(){"use strict";lg(),F_e(),JF=class{constructor(e="GitExecutor"){this.logLabel=e,this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){let t=JF.getName(e.commands[0]),r=C8(this.logLabel,t);return{task:e,logger:r,name:t}}push(e){let t=this.createProgress(e);return t.logger("Adding task to the queue, commands = %o",e.commands),this._queue.set(e,t),t}fatal(e){for(let[t,{logger:r}]of Array.from(this._queue.entries()))t===e.task?(r.info("Failed %o",e),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",e.message),this.complete(t);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(e){this.withProgress(e)&&this._queue.delete(e)}attempt(e){let t=this.withProgress(e);if(!t)throw new pf(void 0,"TasksPendingQueue: attempt called for an unknown task");return t.logger("Starting task"),t}static getName(e="empty"){return`task:${e}:${++JF.counter}`}},t8=JF,t8.counter=0}});function Bm(e,t){return{method:zEe(e.commands)||"",commands:t}}function I0t(e,t){return r=>{t("[ERROR] child process exception %o",r),e.push(Buffer.from(String(r.stack),"ascii"))}}function pEe(e,t,r,n){return i=>{r("%s received %L bytes",t,i),n("%B",i),e.push(i)}}var r8,B0t=Be({"src/lib/runners/git-executor-chain.ts"(){"use strict";lg(),wi(),wt(),S0t(),r8=class{constructor(e,t,r){this._executor=e,this._scheduler=t,this._plugins=r,this._chain=Promise.resolve(),this._queue=new t8}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then(()=>this.attemptTask(e))}attemptTask(e){return Bx(this,null,function*(){let t=yield this._scheduler.next(),r=()=>this._queue.complete(e);try{let{logger:n}=this._queue.attempt(e);return yield y_e(e)?this.attemptEmptyTask(e,n):this.attemptRemoteTask(e,n)}catch(n){throw this.onFatalException(e,n)}finally{r(),t()}})}onFatalException(e,t){let r=t instanceof pf?Object.assign(t,{task:e}):new pf(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(e,t){return Bx(this,null,function*(){let r=this._plugins.exec("spawn.binary","",Bm(e,e.commands)),n=this._plugins.exec("spawn.args",[...e.commands],Bm(e,e.commands)),i=yield this.gitResponse(e,r,n,this.outputHandler,t.step("SPAWN")),s=yield this.handleTaskData(e,n,i,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),A_e(e)?j4(e.parser,s):j4(e.parser,s.asStrings())})}attemptEmptyTask(e,t){return Bx(this,null,function*(){return t("empty task bypassing child process to call to task's parser"),e.parser(this)})}handleTaskData(e,t,r,n){let{exitCode:i,rejection:s,stdOut:o,stdErr:a}=r;return new Promise((l,c)=>{n("Preparing to handle process response exitCode=%d stdOut=",i);let{error:u}=this._plugins.exec("task.error",{error:s},Yl(Yl({},Bm(e,t)),r));if(u&&e.onError)return n.info("exitCode=%s handling with custom error handler"),e.onError(r,u,f=>{n.info("custom error handler treated as success"),n("custom error returned a %s",Nx(f)),l(new kx(Array.isArray(f)?Buffer.concat(f):f,Buffer.concat(a)))},c);if(u)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,a.length,s),c(u);n.info("retrieving task output complete"),l(new kx(Buffer.concat(o),Buffer.concat(a)))})}gitResponse(e,t,r,n,i){return Bx(this,null,function*(){let s=i.sibling("output"),o=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},Bm(e,e.commands));return new Promise(a=>{let l=[],c=[];i.info("%s %o",t,r),i("%O",o);let u=this._beforeSpawn(e,r);if(u)return a({stdOut:l,stdErr:c,exitCode:9901,rejection:u});this._plugins.exec("spawn.before",void 0,Dx(Yl({},Bm(e,r)),{kill(p){u=p||u}}));let f=(0,Q_e.spawn)(t,r,o);f.stdout.on("data",pEe(l,"stdOut",i,s.step("stdOut"))),f.stderr.on("data",pEe(c,"stdErr",i,s.step("stdErr"))),f.on("error",I0t(c,i)),n&&(i("Passing child process stdOut/stdErr to custom outputHandler"),n(t,f.stdout,f.stderr,[...r])),this._plugins.exec("spawn.after",void 0,Dx(Yl({},Bm(e,r)),{spawned:f,close(p,g){a({stdOut:l,stdErr:c,exitCode:p,rejection:u||g})},kill(p){f.killed||(u=p,f.kill("SIGINT"))}}))})})}_beforeSpawn(e,t){let r;return this._plugins.exec("spawn.before",void 0,Dx(Yl({},Bm(e,t)),{kill(n){r=n||r}})),r}}}}),N_e={};Si(N_e,{GitExecutor:()=>P_e});var P_e,D0t=Be({"src/lib/runners/git-executor.ts"(){"use strict";B0t(),P_e=class{constructor(e,t,r){this.cwd=e,this._scheduler=t,this._plugins=r,this._chain=new r8(this,this._scheduler,this._plugins)}chain(){return new r8(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function T0t(e,t,r=Tm){let n=s=>{r(null,s)},i=s=>{s?.task===e&&r(s instanceof Fx?R0t(s):s,void 0)};t.then(n,i)}function R0t(e){let t=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),t=Tm};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(r,{}));function r(n,i){return i in e||(n[i]={enumerable:!1,configurable:!1,get(){return t(i),e.git[i]}}),n}}var k0t=Be({"src/lib/task-callback.ts"(){"use strict";_v(),wt()}});function mEe(e,t){return p_e(r=>{if(!c8(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||r).cwd=e})}var M0t=Be({"src/lib/tasks/change-working-directory.ts"(){"use strict";wt(),wi()}});function W4(e){let t=["checkout",...e];return t[1]==="-b"&&t.includes("-B")&&(t[1]=c1(t,"-B")),To(t)}function F0t(){return{checkout(){return this._runTask(W4(oa(arguments,1)),yi(arguments))},checkoutBranch(e,t){return this._runTask(W4(["-b",e,t,...oa(arguments)]),yi(arguments))},checkoutLocalBranch(e){return this._runTask(W4(["-b",e,...oa(arguments)]),yi(arguments))}}}var Q0t=Be({"src/lib/tasks/checkout.ts"(){"use strict";wt(),wi()}});function N0t(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function P0t(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(e){return la(N0t(),[L_e],e)}})}}}var L_e,L0t=Be({"src/lib/tasks/count-objects.ts"(){"use strict";wt(),L_e=new Lt(/([a-z-]+): (\d+)$/,(e,[t,r])=>{let n=ZEe(t);e.hasOwnProperty(n)&&(e[n]=Bn(r))})}});function U0t(e){return la({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},U_e,e)}var U_e,O0t=Be({"src/lib/parsers/parse-commit.ts"(){"use strict";wt(),U_e=[new Lt(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(e,[t,r,n])=>{e.branch=t,e.commit=n,e.root=!!r}),new Lt(/\s*Author:\s(.+)/i,(e,[t])=>{let r=t.split("<"),n=r.pop();!n||!n.includes("@")||(e.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new Lt(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(e,[t,r,n])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(r,10)||0,e.summary.deletions=parseInt(n,10)||0}),new Lt(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(e,[t,r,n])=>{e.summary.changes=parseInt(t,10)||0;let i=parseInt(r,10)||0;n==="-"?e.summary.deletions=i:n==="+"&&(e.summary.insertions=i)})]}});function q0t(e,t,r){return{commands:["-c","core.abbrev=40","commit",...Tx(e,"-m"),...t,...r],format:"utf-8",parser:U0t}}function V0t(){return{commit(t,...r){let n=yi(arguments),i=e(t)||q0t(ju(t),ju(Zu(r[0],n1,[])),[...Zu(r[1],Px,[]),...oa(arguments,0,!0)]);return this._runTask(i,n)}};function e(t){return!n1(t)&&aa("git.commit: requires the commit message to be supplied as a string/string[]")}}var H0t=Be({"src/lib/tasks/commit.ts"(){"use strict";O0t(),wt(),wi()}});function W0t(){return{firstCommit(){return this._runTask(To(["rev-list","--max-parents=0","HEAD"],!0),yi(arguments))}}}var G0t=Be({"src/lib/tasks/first-commit.ts"(){"use strict";wt(),wi()}});function $0t(e,t){let r=["hash-object",e];return t&&r.push("-w"),To(r,!0)}var Y0t=Be({"src/lib/tasks/hash-object.ts"(){"use strict";wi()}});function K0t(e,t,r){let n=String(r).trim(),i;if(i=O_e.exec(n))return new e1(e,t,!1,i[1]);if(i=q_e.exec(n))return new e1(e,t,!0,i[1]);let s="",o=n.split(" ");for(;o.length;)if(o.shift()==="in"){s=o.join(" ");break}return new e1(e,t,/^re/i.test(n),s)}var e1,O_e,q_e,z0t=Be({"src/lib/responses/InitSummary.ts"(){"use strict";e1=class{constructor(e,t,r,n){this.bare=e,this.path=t,this.existing=r,this.gitDir=n}},O_e=/^Init.+ repository in (.+)$/,q_e=/^Rein.+ in (.+)$/}});function J0t(e){return e.includes(b8)}function j0t(e=!1,t,r){let n=["init",...r];return e&&!J0t(n)&&n.splice(1,0,b8),{commands:n,format:"utf-8",parser(i){return K0t(n.includes("--bare"),t,i)}}}var b8,Z0t=Be({"src/lib/tasks/init.ts"(){"use strict";z0t(),b8="--bare"}});function E8(e){for(let t=0;t<e.length;t++){let r=_8.exec(e[t]);if(r)return`--${r[1]}`}return""}function X0t(e){return _8.test(e)}var _8,Lx=Be({"src/lib/args/log-format.ts"(){"use strict";_8=/^--(stat|numstat|name-only|name-status)(=|$)/}}),V_e,eyt=Be({"src/lib/responses/DiffSummary.ts"(){"use strict";V_e=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function H_e(e=""){let t=W_e[e];return r=>la(new V_e,t,r,!1)}var G4,AEe,yEe,vEe,W_e,G_e=Be({"src/lib/parsers/parse-diff-summary.ts"(){"use strict";Lx(),eyt(),S_e(),wt(),G4=[new Lt(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(e,[t,r,n=""])=>{e.files.push({file:t.trim(),changes:Bn(r),insertions:n.replace(/[^+]/g,"").length,deletions:n.replace(/[^-]/g,"").length,binary:!1})}),new Lt(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(e,[t,r,n])=>{e.files.push({file:t.trim(),before:Bn(r),after:Bn(n),binary:!0})}),new Lt(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(e,[t,r])=>{let n=/(\d+) i/.exec(r),i=/(\d+) d/.exec(r);e.changed=Bn(t),e.insertions=Bn(n?.[1]),e.deletions=Bn(i?.[1])})],AEe=[new Lt(/(\d+)\t(\d+)\t(.+)$/,(e,[t,r,n])=>{let i=Bn(t),s=Bn(r);e.changed++,e.insertions+=i,e.deletions+=s,e.files.push({file:n,changes:i+s,insertions:i,deletions:s,binary:!1})}),new Lt(/-\t-\t(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,after:0,before:0,binary:!0})})],yEe=[new Lt(/(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:!1})})],vEe=[new Lt(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,(e,[t,r,n,i,s])=>{e.changed++,e.files.push({file:s??n,changes:0,insertions:0,deletions:0,binary:!1,status:z4(y0t(t)&&t),from:z4(!!s&&n!==s&&n),similarity:Bn(r)})})],W_e={"":G4,"--stat":G4,"--numstat":AEe,"--name-status":vEe,"--name-only":yEe}}});function tyt(e,t){return t.reduce((r,n,i)=>(r[n]=e[i]||"",r),Object.create({diff:null}))}function $_e(e=S8,t=Y_e,r=""){let n=H_e(r);return function(i){let s=Qx(i.trim(),!1,x8).map(function(o){let a=o.split(w8),l=tyt(a[0].split(e),t);return a.length>1&&a[1].trim()&&(l.diff=n(a[1])),l});return{all:s,latest:s.length&&s[0]||null,total:s.length}}}var x8,w8,S8,Y_e,K_e=Be({"src/lib/parsers/parse-list-log-summary.ts"(){"use strict";wt(),G_e(),Lx(),x8="\xF2\xF2\xF2\xF2\xF2\xF2 ",w8=" \xF2\xF2",S8=" \xF2 ",Y_e=["hash","date","message","refs","author_name","author_email"]}}),z_e={};Si(z_e,{diffSummaryTask:()=>ryt,validateLogFormatConfig:()=>h1});function ryt(e){let t=E8(e),r=["diff"];return t===""&&(t="--stat",r.push("--stat=4096")),r.push(...e),h1(r)||{commands:r,format:"utf-8",parser:H_e(t)}}function h1(e){let t=e.filter(X0t);if(t.length>1)return aa(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`);if(t.length&&e.includes("-z"))return aa(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}var I8=Be({"src/lib/tasks/diff.ts"(){"use strict";Lx(),G_e(),wi()}});function nyt(e,t){let r=[],n=[];return Object.keys(e).forEach(i=>{r.push(i),n.push(String(e[i]))}),[r,n.join(t)]}function iyt(e){return Object.keys(e).reduce((t,r)=>(r in n8||(t[r]=e[r]),t),{})}function J_e(e={},t=[]){let r=Zu(e.splitter,eo,S8),n=!u8(e.format)&&e.format?e.format:{hash:"%H",date:e.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==!1?"%aN":"%an",author_email:e.mailMap!==!1?"%aE":"%ae"},[i,s]=nyt(n,r),o=[],a=[`--pretty=format:${x8}${s}${w8}`,...t],l=e.n||e["max-count"]||e.maxCount;if(l&&a.push(`--max-count=${l}`),e.from||e.to){let c=e.symmetric!==!1?"...":"..";o.push(`${e.from||""}${c}${e.to||""}`)}return eo(e.file)&&a.push("--follow",$At(e.file)),h8(iyt(e),a),{fields:i,splitter:r,commands:[...a,...o]}}function syt(e,t,r){let n=$_e(e,t,E8(r));return{commands:["log",...r],format:"utf-8",parser:n}}function oyt(){return{log(...r){let n=yi(arguments),i=J_e(g8(arguments),Zu(arguments[0],Px)),s=t(...r)||h1(i.commands)||e(i);return this._runTask(s,n)}};function e(r){return syt(r.splitter,r.fields,r.commands)}function t(r,n){return eo(r)&&eo(n)&&aa("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var n8,j_e=Be({"src/lib/tasks/log.ts"(){"use strict";Lx(),Mx(),K_e(),wt(),wi(),I8(),n8=(e=>(e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.mailMap=10]="mailMap",e[e.multiLine=11]="multiLine",e[e.strictDate=12]="strictDate",e))(n8||{})}}),t1,Z_e,ayt=Be({"src/lib/responses/MergeSummary.ts"(){"use strict";t1=class{constructor(e,t=null,r){this.reason=e,this.file=t,this.meta=r}toString(){return`${this.file}:${this.reason}`}},Z_e=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),i8,X_e,lyt=Be({"src/lib/responses/PullSummary.ts"(){"use strict";i8=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},X_e=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function $4(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function CEe(e){let t=/^\s*(\d+)/.exec(e),r=/delta (\d+)/i.exec(e);return{count:Bn(t&&t[1]||"0"),delta:Bn(r&&r[1]||"0")}}var exe,cyt=Be({"src/lib/parsers/parse-remote-objects.ts"(){"use strict";wt(),exe=[new ag(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(e,[t,r])=>{let n=t.toLowerCase(),i=$4(e.remoteMessages);Object.assign(i,{[n]:Bn(r)})}),new ag(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(e,[t,r])=>{let n=t.toLowerCase(),i=$4(e.remoteMessages);Object.assign(i,{[n]:Bn(r)})}),new ag(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(e,[t,r,n])=>{let i=$4(e.remoteMessages);i.total=CEe(t),i.reused=CEe(r),i.packReused=Bn(n)})]}});function txe(e,t){return la({remoteMessages:new nxe},rxe,t)}var rxe,nxe,ixe=Be({"src/lib/parsers/parse-remote-messages.ts"(){"use strict";wt(),cyt(),rxe=[new ag(/^remote:\s*(.+)$/,(e,[t])=>(e.remoteMessages.all.push(t.trim()),!1)),...exe,new ag([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(e,[t])=>{e.remoteMessages.pullRequestUrl=t}),new ag([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(e,[t,r,n])=>{e.remoteMessages.vulnerabilities={count:Bn(t),summary:r,url:n}})],nxe=class{constructor(){this.all=[]}}}});function uyt(e,t){let r=la(new X_e,sxe,[e,t]);return r.message&&r}var bEe,EEe,_Ee,xEe,sxe,wEe,B8,oxe=Be({"src/lib/parsers/parse-pull.ts"(){"use strict";lyt(),wt(),ixe(),bEe=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,EEe=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,_Ee=/^(create|delete) mode \d+ (.+)/,xEe=[new Lt(bEe,(e,[t,r,n])=>{e.files.push(t),r&&(e.insertions[t]=r.length),n&&(e.deletions[t]=n.length)}),new Lt(EEe,(e,[t,,r,,n])=>r!==void 0||n!==void 0?(e.summary.changes=+t||0,e.summary.insertions=+r||0,e.summary.deletions=+n||0,!0):!1),new Lt(_Ee,(e,[t,r])=>{Vr(e.files,r),Vr(t==="create"?e.created:e.deleted,r)})],sxe=[new Lt(/^from\s(.+)$/i,(e,[t])=>void(e.remote=t)),new Lt(/^fatal:\s(.+)$/,(e,[t])=>void(e.message=t)),new Lt(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(e,[t,r,n,i])=>{e.branch.local=n,e.hash.local=t,e.branch.remote=i,e.hash.remote=r})],wEe=(e,t)=>la(new i8,xEe,[e,t]),B8=(e,t)=>Object.assign(new i8,wEe(e,t),txe(e,t))}}),SEe,axe,IEe,dyt=Be({"src/lib/parsers/parse-merge.ts"(){"use strict";ayt(),wt(),oxe(),SEe=[new Lt(/^Auto-merging\s+(.+)$/,(e,[t])=>{e.merges.push(t)}),new Lt(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(e,[t,r])=>{e.conflicts.push(new t1(t,r))}),new Lt(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(e,[t,r,n])=>{e.conflicts.push(new t1(t,r,{deleteRef:n}))}),new Lt(/^CONFLICT\s+\((.+)\):/,(e,[t])=>{e.conflicts.push(new t1(t,null))}),new Lt(/^Automatic merge failed;\s+(.+)$/,(e,[t])=>{e.result=t})],axe=(e,t)=>Object.assign(IEe(e,t),B8(e,t)),IEe=e=>la(new Z_e,SEe,e)}});function BEe(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(t,r){let n=axe(t,r);if(n.failed)throw new Fx(n);return n}}:aa("Git.merge requires at least one option")}var fyt=Be({"src/lib/tasks/merge.ts"(){"use strict";_v(),dyt(),wi()}});function hyt(e,t,r){let n=r.includes("deleted"),i=r.includes("tag")||/^refs\/tags/.test(e),s=!r.includes("new");return{deleted:n,tag:i,branch:!i,new:!s,alreadyUpdated:s,local:e,remote:t}}var DEe,lxe,TEe,gyt=Be({"src/lib/parsers/parse-push.ts"(){"use strict";wt(),ixe(),DEe=[new Lt(/^Pushing to (.+)$/,(e,[t])=>{e.repo=t}),new Lt(/^updating local tracking ref '(.+)'/,(e,[t])=>{e.ref=Dx(Yl({},e.ref||{}),{local:t})}),new Lt(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(e,[t,r,n])=>{e.pushed.push(hyt(t,r,n))}),new Lt(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(e,[t,r,n])=>{e.branch=Dx(Yl({},e.branch||{}),{local:t,remote:r,remoteName:n})}),new Lt(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(e,[t,r,n,i])=>{e.update={head:{local:t,remote:r},hash:{from:n,to:i}}})],lxe=(e,t)=>{let r=TEe(e,t),n=txe(e,t);return Yl(Yl({},r),n)},TEe=(e,t)=>la({pushed:[]},DEe,[e,t])}}),cxe={};Si(cxe,{pushTagsTask:()=>pyt,pushTask:()=>D8});function pyt(e={},t){return Vr(t,"--tags"),D8(e,t)}function D8(e={},t){let r=["push",...t];return e.branch&&r.splice(1,0,e.branch),e.remote&&r.splice(1,0,e.remote),c1(r,"-v"),Vr(r,"--verbose"),Vr(r,"--porcelain"),{commands:r,format:"utf-8",parser:lxe}}var uxe=Be({"src/lib/tasks/push.ts"(){"use strict";gyt(),wt()}});function myt(){return{showBuffer(){let e=["show",...oa(arguments,1)];return e.includes("--binary")||e.splice(1,0,"--binary"),this._runTask(m_e(e),yi(arguments))},show(){let e=["show",...oa(arguments,1)];return this._runTask(To(e),yi(arguments))}}}var Ayt=Be({"src/lib/tasks/show.ts"(){"use strict";wt(),wi()}}),REe,dxe,yyt=Be({"src/lib/responses/FileStatusSummary.ts"(){"use strict";REe=/^(.+)\0(.+)$/,dxe=class{constructor(e,t,r){if(this.path=e,this.index=t,this.working_dir=r,t==="R"||r==="R"){let n=REe.exec(e)||[null,e,e];this.from=n[2]||"",this.path=n[1]||""}}}}});function kEe(e){let[t,r]=e.split(Ev);return{from:r||t,to:t}}function ja(e,t,r){return[`${e}${t}`,r]}function Y4(e,...t){return t.map(r=>ja(e,r,(n,i)=>Vr(n.conflicted,i)))}function vyt(e,t){let r=t.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(i,s,o){let a=`${i}${s}`,l=fxe.get(a);l&&l(e,o),a!=="##"&&a!=="!!"&&e.files.push(new dxe(o,i,s))}}var MEe,fxe,hxe,Cyt=Be({"src/lib/responses/StatusSummary.ts"(){"use strict";wt(),yyt(),MEe=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},fxe=new Map([ja(" ","A",(e,t)=>Vr(e.created,t)),ja(" ","D",(e,t)=>Vr(e.deleted,t)),ja(" ","M",(e,t)=>Vr(e.modified,t)),ja("A"," ",(e,t)=>Vr(e.created,t)&&Vr(e.staged,t)),ja("A","M",(e,t)=>Vr(e.created,t)&&Vr(e.staged,t)&&Vr(e.modified,t)),ja("D"," ",(e,t)=>Vr(e.deleted,t)&&Vr(e.staged,t)),ja("M"," ",(e,t)=>Vr(e.modified,t)&&Vr(e.staged,t)),ja("M","M",(e,t)=>Vr(e.modified,t)&&Vr(e.staged,t)),ja("R"," ",(e,t)=>{Vr(e.renamed,kEe(t))}),ja("R","M",(e,t)=>{let r=kEe(t);Vr(e.renamed,r),Vr(e.modified,r.to)}),ja("!","!",(e,t)=>{Vr(e.ignored=e.ignored||[],t)}),ja("?","?",(e,t)=>Vr(e.not_added,t)),...Y4("A","A","U"),...Y4("D","D","U"),...Y4("U","A","D","U"),["##",(e,t)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,i=/^(.+?(?=(?:\.{3}|\s|$)))/,s=/\.{3}(\S*)/,o=/\son\s([\S]+)$/,a;a=r.exec(t),e.ahead=a&&+a[1]||0,a=n.exec(t),e.behind=a&&+a[1]||0,a=i.exec(t),e.current=a&&a[1],a=s.exec(t),e.tracking=a&&a[1],a=o.exec(t),e.current=a&&a[1]||e.current,e.detached=/\(no branch\)/.test(t)}]]),hxe=function(e){let t=e.split(Ev),r=new MEe;for(let n=0,i=t.length;n<i;){let s=t[n++].trim();s&&(s.charAt(0)==="R"&&(s+=Ev+(t[n++]||"")),vyt(r,s))}return r}}});function byt(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...e.filter(r=>!gxe.includes(r))],parser(r){return hxe(r)}}}var gxe,Eyt=Be({"src/lib/tasks/status.ts"(){"use strict";Cyt(),gxe=["--null","-z"]}});function s1(e=0,t=0,r=0,n="",i=!0){return Object.defineProperty({major:e,minor:t,patch:r,agent:n,installed:i},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function _yt(){return s1(0,0,0,"",!1)}function xyt(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:wyt,onError(e,t,r,n){if(e.exitCode===-2)return r(Buffer.from(T8));n(t)}})}}}function wyt(e){return e===T8?_yt():la(s1(0,0,0,e),pxe,e)}var T8,pxe,Syt=Be({"src/lib/tasks/version.ts"(){"use strict";wt(),T8="installed=false",pxe=[new Lt(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(e,[t,r,n,i=""])=>{Object.assign(e,s1(Bn(t),Bn(r),Bn(n),i))}),new Lt(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(e,[t,r,n,i=""])=>{Object.assign(e,s1(Bn(t),Bn(r),n,i))})]}}),mxe={};Si(mxe,{SimpleGitApi:()=>s8});var s8,Iyt=Be({"src/lib/simple-git-api.ts"(){"use strict";k0t(),M0t(),Q0t(),L0t(),H0t(),x_e(),G0t(),D_e(),Y0t(),Z0t(),j_e(),fyt(),uxe(),Ayt(),Eyt(),wi(),Syt(),wt(),s8=class{constructor(e){this._executor=e}_runTask(e,t){let r=this._executor.chain(),n=r.push(e);return t&&T0t(e,n,t),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(e){return this._runTask(To(["add",...ju(e)]),yi(arguments))}cwd(e){let t=yi(arguments);return typeof e=="string"?this._runTask(mEe(e,this._executor),t):typeof e?.path=="string"?this._runTask(mEe(e.path,e.root&&this._executor||void 0),t):this._runTask(aa("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask($0t(e,t===!0),yi(arguments))}init(e){return this._runTask(j0t(e===!0,this._executor.cwd,oa(arguments)),yi(arguments))}merge(){return this._runTask(BEe(oa(arguments)),yi(arguments))}mergeFromTo(e,t){return eo(e)&&eo(t)?this._runTask(BEe([e,t,...oa(arguments)]),yi(arguments,!1)):this._runTask(aa("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){let e=D8({remote:Zu(arguments[0],eo),branch:Zu(arguments[1],eo)},oa(arguments));return this._runTask(e,yi(arguments))}stash(){return this._runTask(To(["stash",...oa(arguments)]),yi(arguments))}status(){return this._runTask(byt(oa(arguments)),yi(arguments))}},Object.assign(s8.prototype,F0t(),V0t(),A0t(),P0t(),W0t(),b0t(),oyt(),myt(),xyt())}}),Axe={};Si(Axe,{Scheduler:()=>vxe});var FEe,vxe,Byt=Be({"src/lib/runners/scheduler.ts"(){"use strict";wt(),F_e(),FEe=(()=>{let e=0;return()=>{e++;let{promise:t,done:r}=(0,yxe.createDeferred)();return{promise:t,done:r,id:e}}})(),vxe=class{constructor(e=2){this.concurrency=e,this.logger=C8("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let e=Vr(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done(()=>{this.logger("Completing id=",e.id),c1(this.running,e),this.schedule()})}next(){let{promise:e,id:t}=Vr(this.pending,FEe());return this.logger("Scheduling id=%s",t),this.schedule(),e}}}}),Cxe={};Si(Cxe,{applyPatchTask:()=>Dyt});function Dyt(e,t){return To(["apply",...t,...e])}var Tyt=Be({"src/lib/tasks/apply-patch.ts"(){"use strict";wi()}});function Ryt(e,t){return{branch:e,hash:t,success:!0}}function kyt(e){return{branch:e,hash:null,success:!1}}var bxe,Myt=Be({"src/lib/responses/BranchDeleteSummary.ts"(){"use strict";bxe=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function Exe(e,t){return t===1&&o8.test(e)}var QEe,o8,NEe,g1,Fyt=Be({"src/lib/parsers/parse-branch-delete.ts"(){"use strict";Myt(),wt(),QEe=/(\S+)\s+\(\S+\s([^)]+)\)/,o8=/^error[^']+'([^']+)'/m,NEe=[new Lt(QEe,(e,[t,r])=>{let n=Ryt(t,r);e.all.push(n),e.branches[t]=n}),new Lt(o8,(e,[t])=>{let r=kyt(t);e.errors.push(r),e.all.push(r),e.branches[t]=r})],g1=(e,t)=>la(new bxe,NEe,[e,t])}}),_xe,Qyt=Be({"src/lib/responses/BranchSummary.ts"(){"use strict";_xe=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,r,n,i){e==="*"&&(this.detached=t,this.current=r),this.all.push(r),this.branches[r]={current:e==="*",linkedWorkTree:e==="+",name:r,commit:n,label:i}}}}});function PEe(e){return e?e.charAt(0):""}function xxe(e){return la(new _xe,wxe,e)}var wxe,Nyt=Be({"src/lib/parsers/parse-branch.ts"(){"use strict";Qyt(),wt(),wxe=[new Lt(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(e,[t,r,n,i])=>{e.push(PEe(t),!0,r,n,i)}),new Lt(new RegExp("^([*+]\\s)?(\\S+)\\s+([a-z0-9]+)\\s?(.*)$","s"),(e,[t,r,n,i])=>{e.push(PEe(t),!1,r,n,i)})]}}),Sxe={};Si(Sxe,{branchLocalTask:()=>Lyt,branchTask:()=>Pyt,containsDeleteBranchCommand:()=>Ixe,deleteBranchTask:()=>Oyt,deleteBranchesTask:()=>Uyt});function Ixe(e){let t=["-d","-D","--delete"];return e.some(r=>t.includes(r))}function Pyt(e){let t=Ixe(e),r=["branch",...e];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,i){return t?g1(n,i).all[0]:xxe(n)}}}function Lyt(){return{format:"utf-8",commands:["branch","-v"],parser:xxe}}function Uyt(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(r,n){return g1(r,n)},onError({exitCode:r,stdOut:n},i,s,o){if(!Exe(String(i),r))return o(i);s(n)}}}function Oyt(e,t=!1){let r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(n,i){return g1(n,i).branches[e]},onError({exitCode:n,stdErr:i,stdOut:s},o,a,l){if(!Exe(String(o),n))return l(o);throw new Fx(r.parser(Rx(s),Rx(i)),String(o))}};return r}var qyt=Be({"src/lib/tasks/branch.ts"(){"use strict";_v(),Fyt(),Nyt(),wt()}}),Bxe,Vyt=Be({"src/lib/responses/CheckIgnore.ts"(){"use strict";Bxe=e=>e.split(/\n/g).map(t=>t.trim()).filter(t=>!!t)}}),Dxe={};Si(Dxe,{checkIgnoreTask:()=>Hyt});function Hyt(e){return{commands:["check-ignore",...e],format:"utf-8",parser:Bxe}}var Wyt=Be({"src/lib/tasks/check-ignore.ts"(){"use strict";Vyt()}}),Txe={};Si(Txe,{cloneMirrorTask:()=>$yt,cloneTask:()=>Rxe});function Gyt(e){return/^--upload-pack(=|$)/.test(e)}function Rxe(e,t,r){let n=["clone",...r];return eo(e)&&n.push(e),eo(t)&&n.push(t),n.find(Gyt)?aa("git.fetch: potential exploit argument blocked."):To(n)}function $yt(e,t,r){return Vr(r,"--mirror"),Rxe(e,t,r)}var Yyt=Be({"src/lib/tasks/clone.ts"(){"use strict";wi(),wt()}});function Kyt(e,t){return la({raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]},kxe,[e,t])}var kxe,zyt=Be({"src/lib/parsers/parse-fetch.ts"(){"use strict";wt(),kxe=[new Lt(/From (.+)$/,(e,[t])=>{e.remote=t}),new Lt(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.branches.push({name:t,tracking:r})}),new Lt(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.tags.push({name:t,tracking:r})}),new Lt(/- \[deleted]\s+\S+\s*-> (.+)$/,(e,[t])=>{e.deleted.push({tracking:t})}),new Lt(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(e,[t,r,n,i])=>{e.updated.push({name:n,tracking:i,to:r,from:t})})]}}),Mxe={};Si(Mxe,{fetchTask:()=>jyt});function Jyt(e){return/^--upload-pack(=|$)/.test(e)}function jyt(e,t,r){let n=["fetch",...r];return e&&t&&n.push(e,t),n.find(Jyt)?aa("git.fetch: potential exploit argument blocked."):{commands:n,format:"utf-8",parser:Kyt}}var Zyt=Be({"src/lib/tasks/fetch.ts"(){"use strict";zyt(),wi()}});function Xyt(e){return la({moves:[]},Fxe,e)}var Fxe,evt=Be({"src/lib/parsers/parse-move.ts"(){"use strict";wt(),Fxe=[new Lt(/^Renaming (.+) to (.+)$/,(e,[t,r])=>{e.moves.push({from:t,to:r})})]}}),Qxe={};Si(Qxe,{moveTask:()=>tvt});function tvt(e,t){return{commands:["mv","-v",...ju(e),t],format:"utf-8",parser:Xyt}}var rvt=Be({"src/lib/tasks/move.ts"(){"use strict";evt(),wt()}}),Nxe={};Si(Nxe,{pullTask:()=>nvt});function nvt(e,t,r){let n=["pull",...r];return e&&t&&n.splice(1,0,e,t),{commands:n,format:"utf-8",parser(i,s){return B8(i,s)},onError(i,s,o,a){let l=uyt(Rx(i.stdOut),Rx(i.stdErr));if(l)return a(new Fx(l));a(s)}}}var ivt=Be({"src/lib/tasks/pull.ts"(){"use strict";_v(),oxe(),wt()}});function svt(e){let t={};return Pxe(e,([r])=>t[r]={name:r}),Object.values(t)}function ovt(e){let t={};return Pxe(e,([r,n,i])=>{t.hasOwnProperty(r)||(t[r]={name:r,refs:{fetch:"",push:""}}),i&&n&&(t[r].refs[i.replace(/[^a-z]/g,"")]=n)}),Object.values(t)}function Pxe(e,t){l8(e,r=>t(r.split(/\s+/)))}var avt=Be({"src/lib/responses/GetRemoteSummary.ts"(){"use strict";wt()}}),Lxe={};Si(Lxe,{addRemoteTask:()=>lvt,getRemotesTask:()=>cvt,listRemotesTask:()=>uvt,remoteTask:()=>dvt,removeRemoteTask:()=>fvt});function lvt(e,t,r){return To(["remote","add",...r,e,t])}function cvt(e){let t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?ovt:svt}}function uvt(e){let t=[...e];return t[0]!=="ls-remote"&&t.unshift("ls-remote"),To(t)}function dvt(e){let t=[...e];return t[0]!=="remote"&&t.unshift("remote"),To(t)}function fvt(e){return To(["remote","remove",e])}var hvt=Be({"src/lib/tasks/remote.ts"(){"use strict";avt(),wi()}}),Uxe={};Si(Uxe,{stashListTask:()=>gvt});function gvt(e={},t){let r=J_e(e),n=["stash","list",...r.commands,...t],i=$_e(r.splitter,r.fields,E8(n));return h1(n)||{commands:n,format:"utf-8",parser:i}}var pvt=Be({"src/lib/tasks/stash-list.ts"(){"use strict";Lx(),K_e(),I8(),j_e()}}),Oxe={};Si(Oxe,{addSubModuleTask:()=>mvt,initSubModuleTask:()=>Avt,subModuleTask:()=>p1,updateSubModuleTask:()=>yvt});function mvt(e,t){return p1(["add",e,t])}function Avt(e){return p1(["init",...e])}function p1(e){let t=[...e];return t[0]!=="submodule"&&t.unshift("submodule"),To(t)}function yvt(e){return p1(["update",...e])}var vvt=Be({"src/lib/tasks/sub-module.ts"(){"use strict";wi()}});function Cvt(e,t){let r=isNaN(e),n=isNaN(t);return r!==n?r?1:-1:r?qxe(e,t):0}function qxe(e,t){return e===t?0:e>t?1:-1}function bvt(e){return e.trim()}function jF(e){return typeof e=="string"&&parseInt(e.replace(/^\D+/g,""),10)||0}var LEe,Vxe,Evt=Be({"src/lib/responses/TagList.ts"(){"use strict";LEe=class{constructor(e,t){this.all=e,this.latest=t}},Vxe=function(e,t=!1){let r=e.split(`
`).map(bvt).filter(Boolean);t||r.sort(function(i,s){let o=i.split("."),a=s.split(".");if(o.length===1||a.length===1)return Cvt(jF(o[0]),jF(a[0]));for(let l=0,c=Math.max(o.length,a.length);l<c;l++){let u=qxe(jF(o[l]),jF(a[l]));if(u)return u}return 0});let n=t?r[0]:[...r].reverse().find(i=>i.indexOf(".")>=0);return new LEe(r,n)}}}),Hxe={};Si(Hxe,{addAnnotatedTagTask:()=>wvt,addTagTask:()=>xvt,tagListTask:()=>_vt});function _vt(e=[]){let t=e.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...e],parser(r){return Vxe(r,t)}}}function xvt(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function wvt(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}var Svt=Be({"src/lib/tasks/tag.ts"(){"use strict";Evt()}}),Ivt=WAt({"src/git.js"(e,t){"use strict";var{GitExecutor:r}=(D0t(),Ai(N_e)),{SimpleGitApi:n}=(Iyt(),Ai(mxe)),{Scheduler:i}=(Byt(),Ai(Axe)),{configurationErrorTask:s}=(wi(),Ai(X4)),{asArray:o,filterArray:a,filterPrimitives:l,filterString:c,filterStringOrStringArray:u,filterType:f,getTrailingOptions:p,trailingFunctionArgument:g,trailingOptionsArgument:m}=(wt(),Ai(o_e)),{applyPatchTask:y}=(Tyt(),Ai(Cxe)),{branchTask:v,branchLocalTask:C,deleteBranchesTask:E,deleteBranchTask:w}=(qyt(),Ai(Sxe)),{checkIgnoreTask:B}=(Wyt(),Ai(Dxe)),{checkIsRepoTask:R}=(u_e(),Ai(a_e)),{cloneTask:N,cloneMirrorTask:W}=(Yyt(),Ai(Txe)),{cleanWithOptionsTask:Z,isCleanOptionsArray:te}=(b_e(),Ai(v_e)),{diffSummaryTask:Y}=(I8(),Ai(z_e)),{fetchTask:U}=(Zyt(),Ai(Mxe)),{moveTask:ce}=(rvt(),Ai(Qxe)),{pullTask:Ie}=(ivt(),Ai(Nxe)),{pushTagsTask:Q}=(uxe(),Ai(cxe)),{addRemoteTask:se,getRemotesTask:z,listRemotesTask:ie,remoteTask:Pe,removeRemoteTask:dt}=(hvt(),Ai(Lxe)),{getResetMode:ve,resetTask:Rt}=(M_e(),Ai(T_e)),{stashListTask:Zt}=(pvt(),Ai(Uxe)),{addSubModuleTask:tr,initSubModuleTask:ue,subModuleTask:wr,updateSubModuleTask:sr}=(vvt(),Ai(Oxe)),{addAnnotatedTagTask:Hr,addTagTask:Ge,tagListTask:ln}=(Svt(),Ai(Hxe)),{straightThroughBufferTask:Wr,straightThroughStringTask:pr}=(wi(),Ai(X4));function Ee(he,be){this._plugins=be,this._executor=new r(he.baseDir,new i(he.maxConcurrentProcesses),be),this._trimmed=he.trimmed}(Ee.prototype=Object.create(n.prototype)).constructor=Ee,Ee.prototype.customBinary=function(he){return this._plugins.reconfigure("binary",he),this},Ee.prototype.env=function(he,be){return arguments.length===1&&typeof he=="object"?this._executor.env=he:(this._executor.env=this._executor.env||{})[he]=be,this},Ee.prototype.stashList=function(he){return this._runTask(Zt(m(arguments)||{},a(he)&&he||[]),g(arguments))};function Ur(he,be,_t,hn){return typeof _t!="string"?s(`git.${he}() requires a string 'repoPath'`):be(_t,f(hn,c),p(arguments))}Ee.prototype.clone=function(){return this._runTask(Ur("clone",N,...arguments),g(arguments))},Ee.prototype.mirror=function(){return this._runTask(Ur("mirror",W,...arguments),g(arguments))},Ee.prototype.mv=function(he,be){return this._runTask(ce(he,be),g(arguments))},Ee.prototype.checkoutLatestTag=function(he){var be=this;return this.pull(function(){be.tags(function(_t,hn){be.checkout(hn.latest,he)})})},Ee.prototype.pull=function(he,be,_t,hn){return this._runTask(Ie(f(he,c),f(be,c),p(arguments)),g(arguments))},Ee.prototype.fetch=function(he,be){return this._runTask(U(f(he,c),f(be,c),p(arguments)),g(arguments))},Ee.prototype.silent=function(he){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},Ee.prototype.tags=function(he,be){return this._runTask(ln(p(arguments)),g(arguments))},Ee.prototype.rebase=function(){return this._runTask(pr(["rebase",...p(arguments)]),g(arguments))},Ee.prototype.reset=function(he){return this._runTask(Rt(ve(he),p(arguments)),g(arguments))},Ee.prototype.revert=function(he){let be=g(arguments);return typeof he!="string"?this._runTask(s("Commit must be a string"),be):this._runTask(pr(["revert",...p(arguments,0,!0),he]),be)},Ee.prototype.addTag=function(he){let be=typeof he=="string"?Ge(he):s("Git.addTag requires a tag name");return this._runTask(be,g(arguments))},Ee.prototype.addAnnotatedTag=function(he,be){return this._runTask(Hr(he,be),g(arguments))},Ee.prototype.deleteLocalBranch=function(he,be,_t){return this._runTask(w(he,typeof be=="boolean"?be:!1),g(arguments))},Ee.prototype.deleteLocalBranches=function(he,be,_t){return this._runTask(E(he,typeof be=="boolean"?be:!1),g(arguments))},Ee.prototype.branch=function(he,be){return this._runTask(v(p(arguments)),g(arguments))},Ee.prototype.branchLocal=function(he){return this._runTask(C(),g(arguments))},Ee.prototype.raw=function(he){let be=!Array.isArray(he),_t=[].slice.call(be?arguments:he,0);for(let Dn=0;Dn<_t.length&&be;Dn++)if(!l(_t[Dn])){_t.splice(Dn,_t.length-Dn);break}_t.push(...p(arguments,0,!0));var hn=g(arguments);return _t.length?this._runTask(pr(_t,this._trimmed),hn):this._runTask(s("Raw: must supply one or more command to execute"),hn)},Ee.prototype.submoduleAdd=function(he,be,_t){return this._runTask(tr(he,be),g(arguments))},Ee.prototype.submoduleUpdate=function(he,be){return this._runTask(sr(p(arguments,!0)),g(arguments))},Ee.prototype.submoduleInit=function(he,be){return this._runTask(ue(p(arguments,!0)),g(arguments))},Ee.prototype.subModule=function(he,be){return this._runTask(wr(p(arguments)),g(arguments))},Ee.prototype.listRemote=function(){return this._runTask(ie(p(arguments)),g(arguments))},Ee.prototype.addRemote=function(he,be,_t){return this._runTask(se(he,be,p(arguments)),g(arguments))},Ee.prototype.removeRemote=function(he,be){return this._runTask(dt(he),g(arguments))},Ee.prototype.getRemotes=function(he,be){return this._runTask(z(he===!0),g(arguments))},Ee.prototype.remote=function(he,be){return this._runTask(Pe(p(arguments)),g(arguments))},Ee.prototype.tag=function(he,be){let _t=p(arguments);return _t[0]!=="tag"&&_t.unshift("tag"),this._runTask(pr(_t),g(arguments))},Ee.prototype.updateServerInfo=function(he){return this._runTask(pr(["update-server-info"]),g(arguments))},Ee.prototype.pushTags=function(he,be){let _t=Q({remote:f(he,c)},p(arguments));return this._runTask(_t,g(arguments))},Ee.prototype.rm=function(he){return this._runTask(pr(["rm","-f",...o(he)]),g(arguments))},Ee.prototype.rmKeepLocal=function(he){return this._runTask(pr(["rm","--cached",...o(he)]),g(arguments))},Ee.prototype.catFile=function(he,be){return this._catFile("utf-8",arguments)},Ee.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},Ee.prototype._catFile=function(he,be){var _t=g(be),hn=["cat-file"],Dn=be[0];if(typeof Dn=="string")return this._runTask(s("Git.catFile: options must be supplied as an array of strings"),_t);Array.isArray(Dn)&&hn.push.apply(hn,Dn);let Ii=he==="buffer"?Wr(hn):pr(hn);return this._runTask(Ii,_t)},Ee.prototype.diff=function(he,be){let _t=c(he)?s("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):pr(["diff",...p(arguments)]);return this._runTask(_t,g(arguments))},Ee.prototype.diffSummary=function(){return this._runTask(Y(p(arguments,1)),g(arguments))},Ee.prototype.applyPatch=function(he){let be=u(he)?y(o(he),p([].slice.call(arguments,1))):s("git.applyPatch requires one or more string patches as the first argument");return this._runTask(be,g(arguments))},Ee.prototype.revparse=function(){let he=["rev-parse",...p(arguments,!0)];return this._runTask(pr(he,!0),g(arguments))},Ee.prototype.clean=function(he,be,_t){let hn=te(he),Dn=hn&&he.join("")||f(he,c)||"",Ii=p([].slice.call(arguments,hn?1:0));return this._runTask(Z(Dn,Ii),g(arguments))},Ee.prototype.exec=function(he){let be={commands:[],format:"utf-8",parser(){typeof he=="function"&&he()}};return this._runTask(be)},Ee.prototype.clearQueue=function(){return this},Ee.prototype.checkIgnore=function(he,be){return this._runTask(B(o(f(he,u,[]))),g(arguments))},Ee.prototype.checkIsRepo=function(he,be){return this._runTask(R(f(he,c)),g(arguments))},t.exports=Ee}});Mx();lg();var Bvt=class extends pf{constructor(e,t){super(void 0,t),this.config=e}};lg();lg();var gf=class extends pf{constructor(e,t,r){super(e,r),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}};_v();GEe();u_e();b_e();x_e();S_e();D_e();M_e();function Dvt(e){return e?[{type:"spawn.before",action(n,i){e.aborted&&i.kill(new gf(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(n,i){function s(){i.kill(new gf(void 0,"abort","Abort signal received"))}e.addEventListener("abort",s),i.spawned.on("close",()=>e.removeEventListener("abort",s))}}]:void 0}function Tvt(e){return typeof e=="string"&&e.trim().toLowerCase()==="-c"}function Rvt(e,t){if(Tvt(e)&&/^\s*protocol(.[a-z]+)?.allow/.test(t))throw new gf(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function kvt(e,t){if(/^\s*--(upload|receive)-pack/.test(e))throw new gf(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(t==="clone"&&/^\s*-u\b/.test(e))throw new gf(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(t==="push"&&/^\s*--exec\b/.test(e))throw new gf(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function Mvt({allowUnsafeProtocolOverride:e=!1,allowUnsafePack:t=!1}={}){return{type:"spawn.args",action(r,n){return r.forEach((i,s)=>{let o=s<r.length?r[s+1]:"";e||Rvt(i,o),t||kvt(i,n.method)}),r}}}wt();function Fvt(e){let t=Tx(e,"-c");return{type:"spawn.args",action(r){return[...t,...r]}}}wt();var UEe=(0,bv.deferred)().promise;function Qvt({onClose:e=!0,onExit:t=50}={}){function r(){let i=-1,s={close:(0,bv.deferred)(),closeTimeout:(0,bv.deferred)(),exit:(0,bv.deferred)(),exitTimeout:(0,bv.deferred)()},o=Promise.race([e===!1?UEe:s.closeTimeout.promise,t===!1?UEe:s.exitTimeout.promise]);return n(e,s.close,s.closeTimeout),n(t,s.exit,s.exitTimeout),{close(a){i=a,s.close.done()},exit(a){i=a,s.exit.done()},get exitCode(){return i},result:o}}function n(i,s,o){i!==!1&&(i===!0?s.promise:s.promise.then(()=>K4(i))).then(o.done)}return{type:"spawn.after",action(i,s){return Bx(this,arguments,function*(o,{spawned:a,close:l}){var c,u;let f=r(),p=!0,g=()=>void(p=!1);(c=a.stdout)==null||c.on("data",g),(u=a.stderr)==null||u.on("data",g),a.on("error",g),a.on("close",m=>f.close(m)),a.on("exit",m=>f.exit(m));try{yield f.result,p&&(yield K4(50)),l(f.exitCode)}catch(m){l(f.exitCode,m)}})}}}wt();var Nvt="Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings",OEe="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option";function Pvt(e){return!e||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(e)}function qEe(e,t){if(e.length<1||e.length>2)throw new gf(void 0,"binary",Nvt);if(e.some(Pvt))if(t)console.warn(OEe);else throw new gf(void 0,"binary",OEe);let[n,i]=e;return{binary:n,prefix:i}}function Lvt(e,t=["git"],r=!1){let n=qEe(ju(t),r);e.on("binary",i=>{n=qEe(ju(i),r)}),e.append("spawn.binary",()=>n.binary),e.append("spawn.args",i=>n.prefix?[n.prefix,...i]:i)}lg();function Uvt(e){return!!(e.exitCode&&e.stdErr.length)}function Ovt(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function qvt(e=!1,t=Uvt,r=Ovt){return(n,i)=>!e&&n||!t(i)?n:r(i)}function VEe(e){return{type:"task.error",action(t,r){let n=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new pf(void 0,n.toString("utf-8"))}:{error:n}}}}wt();var Vvt=class{constructor(){this.plugins=new Set,this.events=new Wxe.EventEmitter}on(e,t){this.events.on(e,t)}reconfigure(e,t){this.events.emit(e,t)}append(e,t){let r=Vr(this.plugins,{type:e,action:t});return()=>this.plugins.delete(r)}add(e){let t=[];return ju(e).forEach(r=>r&&this.plugins.add(Vr(t,r))),()=>{t.forEach(r=>this.plugins.delete(r))}}exec(e,t,r){let n=t,i=Object.freeze(Object.create(r));for(let s of this.plugins)s.type===e&&(n=s.action(n,i));return n}};wt();function Hvt(e){let t="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(s,o){return r.includes(o.method)?jEe(s,t):s}},{type:"spawn.after",action(s,o){var a;o.commands.includes(t)&&((a=o.spawned.stderr)==null||a.on("data",l=>{let c=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(l.toString("utf8"));c&&e({method:o.method,stage:Wvt(c[1]),progress:Bn(c[2]),processed:Bn(c[3]),total:Bn(c[4])})}))}}]}function Wvt(e){return String(e.toLowerCase().split(" ",1))||"unknown"}wt();function Gvt(e){let t=e_e(e,["uid","gid"]);return{type:"spawn.options",action(r){return Yl(Yl({},t),r)}}}function $vt({block:e,stdErr:t=!0,stdOut:r=!0}){if(e>0)return{type:"spawn.after",action(n,i){var s,o;let a;function l(){a&&clearTimeout(a),a=setTimeout(u,e)}function c(){var f,p;(f=i.spawned.stdout)==null||f.off("data",l),(p=i.spawned.stderr)==null||p.off("data",l),i.spawned.off("exit",c),i.spawned.off("close",c),a&&clearTimeout(a)}function u(){c(),i.kill(new gf(void 0,"timeout","block timeout reached"))}r&&((s=i.spawned.stdout)==null||s.on("data",l)),t&&((o=i.spawned.stderr)==null||o.on("data",l)),i.spawned.on("exit",c),i.spawned.on("close",c),l()}}}Mx();function Yvt(){return{type:"spawn.args",action(e){let t=[],r;function n(i){(r=r||[]).push(...i)}for(let i=0;i<e.length;i++){let s=e[i];if(r1(s)){n(fEe(s));continue}if(s==="--"){n(e.slice(i+1).flatMap(o=>r1(o)&&fEe(o)||o));break}t.push(s)}return r?[...t,"--",...r.map(String)]:t}}}wt();var Kvt=Ivt();function zvt(e,t){var r;let n=new Vvt,i=i_e(e&&(typeof e=="string"?{baseDir:e}:e)||{},t);if(!c8(i.baseDir))throw new Bvt(i,"Cannot use simple-git on a directory that does not exist");return Array.isArray(i.config)&&n.add(Fvt(i.config)),n.add(Mvt(i.unsafe)),n.add(Yvt()),n.add(Qvt(i.completion)),i.abort&&n.add(Dvt(i.abort)),i.progress&&n.add(Hvt(i.progress)),i.timeout&&n.add($vt(i.timeout)),i.spawnOptions&&n.add(Gvt(i.spawnOptions)),n.add(VEe(qvt(!0))),i.errors&&n.add(VEe(i.errors)),Lvt(n,i.binary,(r=i.unsafe)==null?void 0:r.allowUnsafeCustomBinary),new Kvt(i,n)}_v();var Gxe=zvt;var $xe={added_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},broken_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},copied_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},deleted_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},modified_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},renamed_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},unmerged_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]},unknown_file_stats:{changed_file_count:0,per_file_change_stats_head:[],per_file_change_stats_tail:[]}},xv=class{git;constructor(t){try{this.git=Gxe({baseDir:t,binary:"git",maxConcurrentProcesses:6,trimmed:!1})}catch{this.git=void 0}}countTokens(t){return Math.ceil(t.length/3)}async getChangedFileStats(t){let r=await this.git.status(),n=["created","deleted","modified","renamed"],i=$xe,s=new Set(r.staged);for(let o of n){let a=[];if(o==="renamed"?a=r.renamed.map(l=>l.to):a=r[o],t.onlyUseStagedChanges&&(a=a.filter(l=>s.has(l))),a.length>0){let l=o;o==="created"&&(l="added");let c=`${l}_file_stats`;i[c].changed_file_count=a.length;let u=await Promise.all(a.map(async g=>{let{insertions:m,deletions:y}=await this.getInsertionDeletionStats(t.onlyUseStagedChanges,[g]);return{file_path:g,insertion_count:m,deletion_count:y,old_file_path:o==="renamed"&&r.renamed.find(v=>v.to===g)?.from||g}})),f=u.slice(0,5),p=u.slice(-5);i[c].per_file_change_stats_head=f,i[c].per_file_change_stats_tail=p.filter(g=>!f.find(m=>m.file_path===g.file_path))}}return i}async getInsertionDeletionStats(t,r){let n=["--staged","--shortstat"].concat(r),i=await this.git.diff(n);if(!t){let l=["--shortstat"].concat(r);i+=await this.git.diff(l)}let s=i.split(",").map(l=>l.trim()),o=parseInt(s.find(l=>l.includes("insertion"))?.split(" ")[0]||"0"),a=parseInt(s.find(l=>l.includes("deletion"))?.split(" ")[0]||"0");return{insertions:o,deletions:a}}async getTruncatedDiffs(t,r){let{insertions:n,deletions:i}=await this.getInsertionDeletionStats(t.onlyUseStagedChanges,[]);if(n+i<=t.diffNoopLineLimit){let o=await this.git.diff(["--staged","--name-only"]);t.onlyUseStagedChanges||(o+=await this.git.diff(["--name-only"]));let a=o.split(`
`).filter(Boolean),l=await Promise.all(a.map(async f=>{let p=await this.git.diff(["--staged",f]);return t.onlyUseStagedChanges||(p+=await this.git.diff([f])),{fileName:f,diff:p,tokens:this.countTokens(p)}}));l.sort((f,p)=>f.tokens-p.tokens);let c="",u=r;for(let f of l)if(u+f.tokens<=t.diffBudget)c+=f.diff+`
`,u+=f.tokens;else break;return c.trim()}else{let o=await this.git.diff(["--staged"]);return t.onlyUseStagedChanges||(o+=await this.git.diff([])),o.split(`
`).slice(0,t.diffNoopLineLimit).join(`
`).slice(0,t.diffBudget-r)}}async getCommitMessages(t){return(await this.git.log({maxCount:t})).all.map(n=>n.message)}async getCurrentAuthor(){let r=(await this.git.listConfig()).all["user.email"];return Array.isArray(r)?r[0]||void 0:r||void 0}getExampleCommitMessages(t,r,n,i){let s=[],o=0;for(let a of t.slice(r.length)){if(s.length>=i-r.length)break;let l=this.countTokens(a);if(o+l<=n)s.push(a),o+=l;else break}return s}async getRelevantCommitMessages(t,r){return this.git.log({maxCount:3}).then(n=>n.all.filter(i=>i.author_email===t.trim()).map(i=>i.message).reduce((i,s)=>{let o=this.countTokens(s);return this.countTokens(i.join(`
`))+o<=r&&i.push(s),i},[]))}async getCommitMessagePromptData(t){if(!this.git)return{changedFileStats:$xe,diff:"",generatedCommitMessageSubrequest:{relevant_commit_messages:[],example_commit_messages:[]}};let r=await this.getChangedFileStats(t),n=this.countTokens(JSON.stringify(r)),i=await this.getTruncatedDiffs(t,n),s=await this.getCommitMessages(32),o=await this.getCurrentAuthor(),a=[],l=[];if(o){a=await this.getRelevantCommitMessages(o,t.relevantMessageSubbudget);let c=this.countTokens(a.join(`
`)),u=t.messageBudget-c;l=this.getExampleCommitMessages(s,a,u,t.maxExampleCommitMessages)}return{changedFileStats:r,diff:i,generatedCommitMessageSubrequest:{relevant_commit_messages:a,example_commit_messages:l}}}};function Yxe(e,t=!1){let r=2166136261,n=t?e.length-e.trimLeft().length:0;for(let i=n;i<e.length;i++)r^=e.charCodeAt(i),r*=16777619;return r>>>0}function Jvt(e,t){let r=e.length,n=t.length,i=Array(n+1).fill(null).map(()=>({lcsLength:0,minSubstringLength:1/0})),s=Array(n+1).fill(null).map(()=>({lcsLength:0,minSubstringLength:1/0}));i[0].minSubstringLength=0;let o=0,a=1/0,l=-1;for(let c=1;c<=r;c++){s[0]={lcsLength:0,minSubstringLength:0};for(let u=1;u<=n;u++){if(e[c-1]===t[u-1]){let f=i[u-1].lcsLength+1,p=i[u-1].minSubstringLength+1;s[u]={lcsLength:f,minSubstringLength:p}}else{let f=i[u],p=s[u-1];if(f.lcsLength>p.lcsLength){let g=f.lcsLength,m=f.minSubstringLength+1;s[u]={lcsLength:g,minSubstringLength:m}}else if(f.lcsLength<p.lcsLength){let g=p.lcsLength,m=p.minSubstringLength;s[u]={lcsLength:g,minSubstringLength:m}}else{let g=f.lcsLength,m=Math.min(f.minSubstringLength+1,p.minSubstringLength);s[u]={lcsLength:g,minSubstringLength:m}}}if(u===n){let f=s[u];(f.lcsLength>o||f.lcsLength===o&&f.minSubstringLength<a)&&(o=f.lcsLength,a=f.minSubstringLength,l=c)}}[i,s]=[s,i]}return{maxLCSLength:o,minSubstringLength:a,endIndex:l}}function Kxe(e,t){let r=e.split(`
`),n=t.trim().split(`
`);function i(p){let g=r.map(y=>Yxe(y,p)),m=n.map(y=>Yxe(y,p));return Jvt(g,m)}let s=i(!1),o=i(!0),{maxLCSLength:a,minSubstringLength:l,endIndex:c}=s.maxLCSLength>=o.maxLCSLength?s:o;if(a===0)return null;let u=c-l,f=c-1;return{start:u,end:f}}var zxe=require("path"),Cr=q(require("vscode"));async function cg(e,t=void 0){let r=(0,zxe.resolve)(e.repoRoot,e.pathName);if(e.openLocalUri&&Cr.env.remoteName!==void 0){let s=await Cr.workspace.openTextDocument(Cr.Uri.parse(`vscode-local:${r}`));await Cr.window.showTextDocument(s);return}e.differentTab?t===void 0||Cr.window.tabGroups.all.length===1?await Cr.commands.executeCommand("vscode.openWith",Cr.Uri.file(r),"default",Cr.ViewColumn.Beside):await Cr.commands.executeCommand("vscode.openWith",Cr.Uri.file(r),"default",t===Cr.ViewColumn.One?t+1:t-1):await Cr.commands.executeCommand("vscode.open",Cr.Uri.file(r));let n;if(!(!Cr.window.activeTextEditor||Cr.window.activeTextEditor.document.uri.fsPath!==r)){if(e.fullRange){let i=e.fullRange;n=Cr.window.activeTextEditor.document.validateRange(new Cr.Range(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn))}else if(e.range){let i=e.range;n=Cr.window.activeTextEditor.document.validateRange(new Cr.Range(i.start-1,0,i.stop-1,999))}else if(e.snippet){let s=(await Cr.workspace.openTextDocument(r)).getText(),o=Kxe(s,e.snippet);if(o===null){let a=Cr.window.activeTextEditor.selection.active;n=Cr.window.activeTextEditor.document.validateRange(new Cr.Range(a,a))}else n=Cr.window.activeTextEditor.document.validateRange(new Cr.Range(o.start,0,o.end,999))}else return;Cr.window.activeTextEditor?.revealRange(n),Cr.window.activeTextEditor.selection=new Cr.Selection(n.end,n.start)}}var jxe=q(require("path")),Vc=q(require("vscode"));function jvt(e){return e.endsWith(`
`)?e.slice(0,-1):e}function Jxe(e,t){let r=e.split(`
`);for(let n of[...t].sort(({result:{charEnd:i}},{result:{charEnd:s}})=>s-i))r.splice(n.lineRange.start,n.lineRange.stop-n.lineRange.start,jvt(n.result.suggestedCode));return r.join(`
`)}var Rm=class e extends X{constructor(r,n,i,s,o,a,l){super();this._extensionUri=r;this._conversationId=n;this._initialIterationId=i;this._initialStage=s;this._chatApp=o;this._resolveFileService=a;this._workTimer=l;this._panel=Vc.window.createWebviewPanel(e.viewType,"Augment",Vc.ViewColumn.One,{retainContextWhenHidden:!0,enableScripts:!0}),this._detailsPanelAsyncMsgHandler=js(this._panel.webview,this._workTimer),this._detailsPanelAsyncMsgHandler.registerHandler("autofix-panel-details-init-request",this.handleAutofixInitMessage),this._detailsPanelAsyncMsgHandler.registerHandler("autofix-panel-apply-and-retest-request",this.handleAutofixApplyAndRetestRequest.bind(this)),this._resolveFileService.register(this._detailsPanelAsyncMsgHandler),this._panel.iconPath={light:Vc.Uri.joinPath(this._extensionUri,"media","panel-icon-light.svg"),dark:Vc.Uri.joinPath(this._extensionUri,"media","panel-icon-dark.svg")},this.addDisposables(this._panel,new Vc.Disposable(()=>{e.currentPanel=void 0})),this._panel.onDidDispose(()=>{this.dispose(),e.currentPanel=void 0}),this._setHTML()}static viewType="augmentAutofixPanel";_logger=j("AutofixWebviewPanel");static currentPanel;_panel;_detailsPanelAsyncMsgHandler;get logger(){return this._logger}async _setHTML(){let r=this._panel.webview,n=Vc.Uri.joinPath(this._extensionUri,"common-webviews");r.options={enableScripts:!0,localResourceRoots:[n]};let i=r.asWebviewUri(Vc.Uri.joinPath(n,"/")),s=dF(hF(r),fF(),gF(),pF(),mF()),o=await Sn(jxe.default.join(n.fsPath,"autofix.html"));o=o.replace(/<head>/i,`<head>
            <base href="${i.toString()}" />
            <meta http-equiv="Content-Security-Policy" content="${s}">
        `),r.html=o}static launchAutofixPanel(r,n,i,s,o,a,l){if(e.currentPanel)if(e.currentPanel._conversationId===n){e.currentPanel.openSpecificStage(i,s),e.currentPanel._panel.reveal();return}else e.currentPanel.dispose();e.currentPanel=new e(r,n,i,s,o,a,l)}handleAutofixStateUpdate=async r=>{await this._panel.webview.postMessage({type:"autofix-panel-state-update",data:r.data})};handleCommandPartialOutput=async r=>{await this._panel.webview.postMessage(r)};handleAutofixInitMessage=async r=>(await this._chatApp.sendAutofixUpdateRequestMessage(),{type:"autofix-panel-open-specific-stage",data:{iterationId:this._initialIterationId,stage:this._initialStage}});handleAutofixApplyAndRetestRequest=async r=>(await this._applyAllAutofixChanges(r.data.selectedSolutions),await this._chatApp.sendAutofixSuggestionsAppliedMessage(r.data.selectedSolutions),{type:"empty"});async openSpecificStage(r,n){await this._panel.webview.postMessage({type:"autofix-panel-open-specific-stage",data:{iterationId:r,stage:n}})}async _applyAutofixChanges(r,n){let i=await Sn(r),s=Jxe(i,n);await Ul(r,s)}async _applyAllAutofixChanges(r){let n=new Map;for(let i of r){let s=Ms(i.qualifiedPathName);n.has(s)?n.get(s).push(i):n.set(s,[i])}for(let[i,s]of n.entries())await this._applyAutofixChanges(i,s)}};var Hc=q(require("vscode"));function Zvt(e){if(e.startsWith("A")||e.startsWith("="))return!0;if(e.startsWith("B"))return!1;throw new Error(`Incorrect rating: ${e}`)}function R8(e){let t;if(e.startsWith("A"))t=-1*parseInt(e.charAt(1),10);else if(e.startsWith("B"))t=parseInt(e.charAt(1),10);else if(e.startsWith("="))t=0;else throw new Error(`Incorrect rating: ${e}`);return t}var wv=class e extends Zs{constructor(r,n,i,s,o,a,l,c){super("preference.html",r.webview);this._extensionUri=n;this._fuzzyFsSearcher=i;this.inputData=o;this._externalSources=l;this._userSpecifiedExternalSources=c;this._asyncMsgHandler=js(r.webview,a),this.addDisposable(this._asyncMsgHandler),this._asyncMsgHandler.registerHandler("find-file-request",this._fuzzyFsSearcher.findFiles),this._asyncMsgHandler.registerHandler("chat-loaded",u=>Promise.resolve({type:"chat-initialize",data:{}})),this._panel=r,this._inputData=o}static currentPanel;_panel;static _logger=j("PreferenceWebviewPanel");_inputData;_asyncMsgHandler;_resolvePreference;handleMessage=r=>{if(r.type==="preference-result-message"){let n=r.data;this._resolvePreference(n),this._panel.dispose()}r.type==="preference-notify"&&Hc.window.showInformationMessage(r.data),r.type==="preference-panel-loaded"&&(e._logger.info("Preference panel loaded, sending input data"),this._panel.webview.postMessage({type:"preference-init",data:this._inputData})),r.type==="open-file"&&cg(r.data)};static async launchStandalonePreferencePanel(r,n,i,s,o=[],a=[],l){e.currentPanel&&(e.currentPanel.dispose(),e.currentPanel=void 0);let u=(Hc.window.activeTextEditor?Hc.window.activeTextEditor.viewColumn:void 0)||Hc.ViewColumn.One,f={type:"Chat",data:n,enableRetrievalDataCollection:i},p=Hc.window.createWebviewPanel("preference","Augment Preference",u,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[Hc.Uri.joinPath(r,"/common-webviews")]}),g=e.currentPanel=new e(p,r,s,u,f,l,o,a);return await g.loadHTML(r),p.onDidDispose(()=>{g._resolvePreference&&g._resolvePreference(null),g.dispose()}),g.addDisposables(p,new Hc.Disposable(()=>{e.currentPanel=void 0})),p.webview.onDidReceiveMessage(g.handleMessage),e.currentPanel}async postStreamChunk(r,n){await this._panel.webview.postMessage({...r,stream:n})}async postStreamDone(){await this._panel.webview.postMessage({type:"chat-stream-done"})}async getResult(r,n,i){let s=await new Promise(o=>{this._resolvePreference=o});return s?(await this.sendResultToBackend(r,n,i,s),Zvt(s.overallRating)):!0}async sendResultToBackend(r,n,i,s){let o=`${s.textFeedback}
MODEL_IDS_START_LABEL
${i?.a}
${i?.b}
MODEL_IDS_END_LABEL
IMPLICIT_EXTERNAL_SOURCES_START_LABEL
${this._externalSources?.map(a=>a.name).join(", ")??""}
IMPLICIT_EXTERNAL_SOURCES_END_LABEL
USER_SPECIFIED_EXTERNAL_SOURCES_START_LABEL
${this._userSpecifiedExternalSources?.join(", ")??""}
USER_SPECIFIED_EXTERNAL_SOURCES_END_LABEL
`;await Di(async()=>{try{return await n.recordPreferenceSample({request_ids:[r.a,r.b],scores:{overallRating:R8(s.overallRating),formattingRating:R8(s.formattingRating),instructionFollowingRating:R8(s.instructionFollowingRating),isHighQuality:s.isHighQuality?1:0},feedback:o})}catch(a){throw e._logger.error(`Error reporting preference sample: ${a}`),a}},e._logger)}};var m1=2e5;var Ux=class extends X{constructor(r,n,i,s,o,a,l,c,u,f,p,g,m,y,v,C,E,w,B,R,N,W,Z){super();this._chatModel=r;this._chatModelConfigs=n;this._apiServer=i;this._workspaceManager=s;this._keybindingWatcher=o;this._config=a;this._extensionUri=l;this._featureFlagManager=c;this._clientMetricsReporter=u;this._actionsModel=f;this._syncingEnabledTracker=p;this._onboardingWorkspaceModel=g;this._syncingStatus=m;this._onboardingSessionEventReporter=y;this._fuzzyFsSearcher=v;this._fuzzySymbolSearcher=C;this._toolsModel=E;this._resolveFileService=w;this._checkpointManager=B;this._guidelinesWatcher=R;this._assetManager=N;this._globalState=W;this._workTimer=Z;let te=Kt.workspace.workspaceFolders?.at(0)?.uri.fsPath??"";this._commitMessagePromptPreparer=new xv(te),this._remoteAgentsMessenger=new DF(this._apiServer,this._extensionUri,this._workTimer,this._globalState),this._gitReferenceMessenger=new xF(this._apiServer,this._config),this._remoteAgentDiffMessenger=new mv(this._apiServer),this._smartPasteCache=new OF(async Y=>{let U=this._apiServer.createRequestId();return Promise.resolve({generator:this._smartPasteWithChatInstruction(Y,U),requestId:U})}),this.addDisposables(this._actionsModel.onDerivedStatesSatisfied(this.handleDerivedStateChange.bind(this)),this._syncingEnabledTracker.onDidChangeSyncingEnabled(this.sendSyncEnabledStatus.bind(this)),this._guidelinesWatcher.onDidChange(this.sendCurrentGuidelinesState.bind(this)),this._smartPasteCache,this._checkpointManager.onAgentEditListHasUpdates(()=>this._notifyAgentEditListHasUpdates()),this._toolsModel.onRestartHosts(()=>{this.setupMemoryUpdateListener()})),this.setupMemoryUpdateListener()}_logger=j("ChatApp");_asyncMsgHandler;_lastKnownSourceFolders=[];_webview;_smartPasteCache;_commitMessagePromptPreparer;_memoryUpdateManagerDisposable;_remoteAgentsMessenger;_gitReferenceMessenger;_remoteAgentDiffMessenger;appType(){return"chat"}title(){return""}register(r){this._webview=r,this._asyncMsgHandler=js(this._webview,this._workTimer),this.addDisposable(this._asyncMsgHandler),this._asyncMsgHandler.registerHandler("find-file-request",this._fuzzyFsSearcher.findFiles),this._asyncMsgHandler.registerHandler("find-folder-request",this._fuzzyFsSearcher.findFolders),this._asyncMsgHandler.registerHandler("find-recently-opened-files",this._fuzzyFsSearcher.findRecentFiles),this._asyncMsgHandler.registerHandler("resolve-file-request",async n=>({type:"resolve-file-response",data:await this.resolveTargetPath(n.data.relPath,n.data.searchScope,n.data.exactMatch)})),this._asyncMsgHandler.registerStreamHandler("chat-user-message",this.onUserSendMessage.bind(this)),this._asyncMsgHandler.registerStreamHandler("generate-commit-message",this.generateCommitMessage.bind(this)),this._asyncMsgHandler.registerStreamHandler("chat-get-stream-request",this._chatModel.getChatStream.bind(this._chatModel)),this._asyncMsgHandler.registerHandler("chat-user-cancel",n=>this.onUserCancel(n)),this._asyncMsgHandler.registerHandler("chat-rating",this._chatModel.sendFeedback),this._asyncMsgHandler.registerHandler("save-chat",this._chatModel.saveConversation),this._asyncMsgHandler.registerHandler("chat-launch-autofix-panel",n=>this.onLaunchAutofixPanel(n)),this._asyncMsgHandler.registerHandler("chat-autofix-state-update",n=>this.handleAutofixStateUpdate(n)),this._asyncMsgHandler.registerHandler("open-confirmation-modal",n=>this.onOpenConfirmationModal(n)),this._asyncMsgHandler.registerHandler("find-external-sources-request",this.onExternalSourceSearch),this._asyncMsgHandler.registerHandler("resolve-workspace-file-chunk",this._chatModel.resolveWorkspaceFileChunk),this._asyncMsgHandler.registerHandler("find-symbol-request",this._fuzzySymbolSearcher.findSymbols),this._asyncMsgHandler.registerHandler("chat-autofix-execute-command-request",this.onExecuteCommand.bind(this)),this._asyncMsgHandler.registerHandler("chat-autofix-plan-request",this.onAutofixPlan.bind(this)),this._asyncMsgHandler.registerHandler("find-symbol-regex-request",this._fuzzySymbolSearcher.findSymbolsRegex),this._asyncMsgHandler.registerHandler("get-diagnostics-request",this._chatModel.getDiagnostics),this._asyncMsgHandler.registerHandler("report-webview-client-metric",n=>(this._clientMetricsReporter.reportWebviewClientMetric(n.data),Promise.resolve({type:"empty"}))),this._asyncMsgHandler.registerHandler("get-workspace-info-request",async()=>{await Promise.resolve(null);try{let i=this._workspaceManager.listSourceFolders().filter(o=>o.syncingEnabled).reduce((o,a)=>"trackedFileCount"in a?o+a.trackedFileCount:o,0),s=i>0?[i]:[];return{type:"get-workspace-info-response",data:{trackedFileCount:s.length>0?s:void 0}}}catch(n){return this._logger.error("Error getting workspace info:",n),{type:"get-workspace-info-response",data:{}}}}),this._asyncMsgHandler.registerHandler("show-augment-panel",this.showAugmentPanel),this._asyncMsgHandler.registerHandler("call-tool",this.callTool,!1),this._asyncMsgHandler.registerHandler("cancel-tool-run",this.cancelToolRun),this._asyncMsgHandler.registerHandler("check-safe",this.toolCheckSafe),this._asyncMsgHandler.registerHandler("checkToolExists",this.checkToolExists),this._asyncMsgHandler.registerHandler("get-ide-state-node-request",this._getChatRequestIdeState),this._asyncMsgHandler.registerHandler("chat-save-image-request",this._saveImage),this._asyncMsgHandler.registerHandler("chat-load-image-request",this._loadImage),this._asyncMsgHandler.registerHandler("chat-delete-image-request",this._deleteImage),this._asyncMsgHandler.registerHandler("chat-mode-changed",n=>(this._toolsModel.setMode(n.data.mode),Promise.resolve({type:"empty"}))),this._asyncMsgHandler.registerHandler("chat-get-agent-onboarding-prompt-request",async()=>{let n=NM(process.platform),i=new LF(Xr.agent,process.platform,n),s=new iM(i,this._workspaceManager);return this._onboardingSessionEventReporter.reportEvent("saw-agent-onboarding"),Promise.resolve({type:"chat-get-agent-onboarding-prompt-response",data:{prompt:await s.getOnboardingInstructions()}})}),this._asyncMsgHandler.registerHandler("check-agent-auto-mode-approval",()=>{let n=this._globalState.get("agentAutoModeApproved");return Promise.resolve({type:"check-agent-auto-mode-approval-response",data:n??!1})}),this._asyncMsgHandler.registerHandler("set-agent-auto-mode-approved",async n=>(await this._globalState.update("agentAutoModeApproved",n.data),{type:"empty"})),this._asyncMsgHandler.registerHandler("chat-loaded",n=>{this.sendSourceFolders(),this.sendSyncStatus(),this.sendSyncEnabledStatus(),this.sendCurrentGuidelinesState(),this._onboardingWorkspaceModel.shouldShowSummary&&this.sendShowSummary(),this._actionsModel.broadcastDerivedStates();let i=Kt.window.activeTextEditor;i?.document.uri?(this.sendCurrentlyOpenFiles([i.document.uri]),this.sendFileSelections(i)):this.sendCurrentlyOpenFiles([]),this._notifyAgentEditListHasUpdates();let s=this._toolsModel.memoriesAbsPath?{rootPath:"",relPath:this._toolsModel.memoriesAbsPath}:void 0;return Promise.resolve({type:"chat-initialize",data:{enablePreferenceCollection:this._config.config.preferenceCollection.enable,enableRetrievalDataCollection:this._config.config.preferenceCollection.enableRetrievalDataCollection,enableDebugFeatures:this._config.config.enableDebugFeatures,useRichTextHistory:this._config.config.chat.useRichTextHistory,modelDisplayNameToId:this.getMergedAdditionalChatModels(),fullFeatured:!0,enableExternalSourcesInChat:gr(this._featureFlagManager.currentFlags.vscodeExternalSourcesInChatMinVersion??""),smallSyncThreshold:this._featureFlagManager.currentFlags.smallSyncThreshold,bigSyncThreshold:this._featureFlagManager.currentFlags.bigSyncThreshold,enableSmartPaste:gr(this._featureFlagManager.currentFlags.enableSmartPasteMinVersion??""),enableDirectApply:gr(this._featureFlagManager.currentFlags.vscodeDirectApplyMinVersion??""),summaryTitles:this._featureFlagManager.currentFlags.enableSummaryTitles,suggestedEditsAvailable:gr(this._featureFlagManager.currentFlags.vscodeNextEditMinVersion??""),enableShareService:gr(this._featureFlagManager.currentFlags.vscodeShareMinVersion??""),maxTrackableFileCount:this._featureFlagManager.currentFlags.maxTrackableFileCount,enableDesignSystemRichTextEditor:gr(this._featureFlagManager.currentFlags.vscodeDesignSystemRichTextEditorMinVersion??""),enableSources:gr(this._featureFlagManager.currentFlags.vscodeSourcesMinVersion??""),enableChatMermaidDiagrams:this._featureFlagManager.currentFlags.enableChatMermaidDiagrams,smartPastePrecomputeMode:this._featureFlagManager.currentFlags.smartPastePrecomputeMode,useNewThreadsMenu:gr(this._featureFlagManager.currentFlags.vscodeNewThreadsMenuMinVersion??""),enableEditableHistory:gr(this._featureFlagManager.currentFlags.vscodeEditableHistoryMinVersion??""),enableChatMermaidDiagramsMinVersion:gr(this._featureFlagManager.currentFlags.vscodeEnableChatMermaidDiagramsMinVersion??""),enableChatMultimodal:gr(this._featureFlagManager.currentFlags.vscodeChatMultimodalMinVersion??""),enableAgentMode:gr(vM()===0?this._featureFlagManager.currentFlags.vscodeAgentModeMinVersion??"":this._featureFlagManager.currentFlags.vscodeAgentModeMinStableVersion??""),enableRichCheckpointInfo:gr(this._featureFlagManager.currentFlags.vscodeRichCheckpointInfoMinVersion??""),agentMemoriesFilePathName:s,workspaceUnpopulated:this._actionsModel.isDerivedStateSatisfied("WorkspaceNotPopulated"),truncateChatHistory:!1,enableVirtualizedMessageList:gr(this._featureFlagManager.currentFlags.vscodeVirtualizedMessageListMinVersion??""),customPersonalityPrompts:{agent:this._config.config.advanced.personalityPrompts?.agent??"",prototyper:this._config.config.advanced.personalityPrompts?.prototyper??"",brainstorm:this._config.config.advanced.personalityPrompts?.brainstorm??"",reviewer:this._config.config.advanced.personalityPrompts?.reviewer??""},enablePersonalities:gr(this._featureFlagManager.currentFlags.vscodePersonalitiesMinVersion??""),enableBackgroundAgents:this._config.config.enableDebugFeatures&&gr(this._featureFlagManager.currentFlags.vscodeBackgroundAgentsMinVersion??""),memoryClassificationOnFirstToken:this._featureFlagManager.currentFlags.memoryClassificationOnFirstToken??!1}})}),this._asyncMsgHandler.registerSidecarHandler((n,i)=>{kK(n,i)}),this._resolveFileService.register(this._asyncMsgHandler),this.addDisposables(Kt.window.onDidChangeTextEditorSelection(n=>{!n||n.textEditor.document.uri.scheme==="output"||(this.sendSourceFolders(),this.sendFileSelections(n.textEditor))}),this._onboardingWorkspaceModel.onShouldShowSummary(this.sendShowSummary),this._webview.onDidReceiveMessage(this.onDidReceiveMessage),this._workspaceManager.onDidChangeSourceFolders(this.sendSourceFolders),Kt.window.onDidChangeActiveTextEditor(n=>{this.sendSourceFolders(),n?this.sendCurrentlyOpenFiles([n.document.uri]):(this.sendCurrentlyOpenFiles([]),this.sendFileSelections(void 0))}),this._syncingStatus.onDidChangeSyncingStatus(this.sendSyncStatus),aM(n=>{this._webview?.postMessage({type:"orientation-status-update",data:n})})),this._remoteAgentsMessenger.register(this._asyncMsgHandler,this._webview),this._gitReferenceMessenger.register(this._asyncMsgHandler),this._remoteAgentDiffMessenger.register(this._asyncMsgHandler),this.updateLastKnownSourceFolders()}async*generateCommitMessage(r){let n;try{n=await this._commitMessagePromptPreparer.getCommitMessagePromptData({diffBudget:9216,messageBudget:3072,relevantMessageSubbudget:1024,diffNoopLineLimit:5e3,onlyUseStagedChanges:!1,maxExampleCommitMessages:3})}catch(i){let s=`Cannot generate commit message prompt: Failed to generate diff details. Error: ${i instanceof Error?i.message:String(i)}`;throw Kt.window.showInformationMessage(s),new Error(s)}yield*this.onGenerateCommitMessage(n)}getMergedAdditionalChatModels=()=>{let r=this._config.config.chat.modelDisplayNameToId||{},n=this._featureFlagManager.currentFlags.additionalChatModels;n=n.replace(/'/g,'"');try{return{...n!==""?JSON.parse(n):{},...r}}catch(i){return this._logger.debug(`Failed to parse additional chat models: ${i.message}`),r}};onUserCancel=r=>(this._logger.debug("onUserCancel"),this._chatModel.cancelChatStream(r.data.requestId),{type:"empty"});isMemoriesFile(r){let n=this._toolsModel.memoriesAbsPath;if(!n)return!1;let i=Le.from({rootPath:"rootPath"in r?r.rootPath:r.repoRoot,relPath:"relPath"in r?r.relPath:r.pathName}),s=Le.from({rootPath:"",relPath:n});return Le.equals(i,s)}filterMemoriesFromSelectedCode(r){return r&&(this.isMemoriesFile({rootPath:"",relPath:r.path})?null:r)}sendCurrentlyOpenFiles=(0,Xxe.default)(r=>{let n=r.map(i=>this._resolvePathName(i)).filter(i=>i!==void 0).filter(i=>!this.isMemoriesFile(i));this._webview?.postMessage({type:"currently-open-files",data:n})},250);sendShowSummary=(0,mf.default)(()=>{this._webview?.postMessage({type:"should-show-summary"}),this._onboardingWorkspaceModel.setShouldShowSummary(!1),this._onboardingSessionEventReporter.reportEvent("saw-summary")},250,{leading:!0,trailing:!0});sendSyncStatus=(0,mf.default)(()=>{this._webview?.postMessage({type:"source-folders-sync-status",data:this._syncingStatus.status})},250,{leading:!0,trailing:!0});sendSyncEnabledStatus=(0,mf.default)(()=>{this._webview?.postMessage({type:"sync-enabled-state",data:this._syncingEnabledTracker.syncingEnabledState})},250,{leading:!0,trailing:!0});sendCurrentGuidelinesState=(0,mf.default)(()=>{this._webview?.postMessage({type:"update-guidelines-state",data:this._guidelinesWatcher.getGuidelinesStates()})},250,{leading:!0,trailing:!0});sendSourceFolders=(0,mf.default)(()=>{this.updateLastKnownSourceFolders(),this._webview?.postMessage({type:"source-folders-updated",data:{sourceFolders:this._lastKnownSourceFolders}})},250,{leading:!0,trailing:!0});updateLastKnownSourceFolders(){this._lastKnownSourceFolders=this._workspaceManager.trackedSourceFolderNames()}sendFileSelections=(0,mf.default)(r=>{if(r?.document.uri){let n=this._resolvePathName(r.document.uri);n&&!this.isMemoriesFile(n)?this._webview?.postMessage({type:"currently-open-files",data:[n]}):this._webview?.postMessage({type:"currently-open-files",data:[]}),n&&!this.isMemoriesFile(n)?this._webview?.postMessage(Fve(r,this._workspaceManager)):this._webview?.postMessage({type:"file-ranges-selected",data:[]})}else this._webview?.postMessage({type:"file-ranges-selected",data:[]})},250,{leading:!0,trailing:!0});onOpenConfirmationModal=async r=>{let n=await Kt.window.showInformationMessage(r.data.message,{modal:!0},{title:r.data.cancelButtonText,isCloseAffordance:!0},{title:r.data.confirmButtonText});return{type:"confirmation-modal-response",data:{ok:n?.title===r.data.confirmButtonText}}};_handleCompleteChatReply(r){this._workspaceManager.recordChatReponse(r)}async postStreamChunksToPanel(r,n,i,s){await r.postStreamChunk({type:"chat-model-reply",data:{text:n,requestId:i,workspaceFileChunks:[]}},s)}getNextLine(r){let n=r.indexOf(`
`);return n===-1?[r,""]:[r.slice(0,n+1),r.slice(n+1)]}async*onGenerateCommitMessage(r){let n=this._apiServer.createRequestId(),i=await this._apiServer.generateCommitMessageStream(n,r);for await(let s of i)yield{type:"chat-model-reply",data:{text:s.text,requestId:n,workspaceFileChunks:[]}}}handleAutofixStateUpdate=async r=>(await Rm.currentPanel?.handleAutofixStateUpdate(r),{type:"empty"});onLaunchAutofixPanel=r=>(Rm.launchAutofixPanel(this._extensionUri,r.data.conversationId,r.data.iterationId,r.data.stage,this,this._resolveFileService,this._workTimer),{type:"empty"});async*onUserSendMessage(r){let n=this._apiServer.createRequestId(),i=this._workspaceManager.getContext(),s={checkpointId:void 0,addedBlobs:[],deletedBlobs:[]};(r.data.context?.userSpecifiedFiles?.length||r.data.context?.sourceFolders?.length)&&!r.data.disableRetrieval&&(s=i.blobs);let o=[];r.data.context?.userSpecifiedFiles&&!r.data.disableRetrieval&&(o=this._getBlobNames(r.data.context.userSpecifiedFiles));let a=this._guidelinesWatcher.getUserGuidelinesContent(),l=this._guidelinesWatcher.getCurrentWorkspaceGuidelinesContent(this._workspaceManager),c=[];r.data.context?.externalSources&&!r.data.disableRetrieval&&(c=r.data.context.externalSources.map(p=>p.id));let u;if((r.data.context?.selections?.length||r.data.context?.recentFiles?.length)&&!r.data.disableSelectedCodeDetails){w0e(Kt.window.activeTextEditor);let p=this._chatModelConfigs.get(r.data?.modelId??"")?.suggestedPrefixCharCount??m1,g=this._chatModelConfigs.get(r.data?.modelId??"")?.suggestedSuffixCharCount??m1;u=hG(Kt.window.activeTextEditor,this._workspaceManager,p,g),u=this.filterMemoriesFromSelectedCode(u)}let f=p=>{let g=this._workspaceManager;p.unknownBlobNames&&p.unknownBlobNames.length>0&&g.handleUnknownBlobs(i,p.unknownBlobNames),p.checkpointNotFound&&g.handleUnknownCheckpoint(n,s.checkpointId)};try{let p=!0;if(this._config.config.chat.stream!==!1&&!this._config.config.preferenceCollection.enable){let m="";if(r.data.memoriesInfo?.isClassifyAndDistill){let v=this._featureFlagManager.currentFlags.memoriesParams.classify_and_distill_prompt;if(!v){this._logger.error("Classify and distill prompt missing.");return}r.data.text=v.replace("{message}",r.data.text),r.data.nodes?.length&&(r.data.nodes=r.data.nodes.map(C=>C.type===ho.TEXT&&C.text_node?{...C,text_node:{content:v.replace("{message}",C.text_node.content)}}:C))}else if(r.data.memoriesInfo?.isDistill){let v=this._featureFlagManager.currentFlags.memoriesParams.distill_prompt;if(!v){this._logger.error("Distill prompt missing.");return}r.data.text=v.replace("{message}",r.data.text)}let y;if(this._toolsModel.chatMode===Xr.agent)if(this._featureFlagManager.currentFlags.useMemorySnapshotManager){let v=r.data.conversationId??"";y=await this._toolsModel.getAgentMemoriesWithSnapshot(v)}else y=await oM(this._checkpointManager.getAgentMemoriesAbsPath);for await(let v of this._chatModel.chatStream({requestId:n,message:r.data.text,chatHistory:r.data.chatHistory,blobs:s,userGuidedBlobs:o,externalSourceIds:c,modelId:r.data.modelId,userGuidelines:a,workspaceGuidelines:l,toolDefinitions:(await this._toolsModel.getToolDefinitions()).map(C=>C.definition),nodes:r.data.nodes,mode:this._toolsModel.chatMode,agentMemories:y,personaType:r.data.personaType},u)){if(f(v.data),p){p=!1;let C=this._syncingStatus.status.foldersProgress.some(E=>E.progress?.newlyTracked);this._syncingStatus.status.status!=="done"&&C&&(v.data.text=`*Note: Augment is not yet fully synced and may be unable to answer questions about your workspace.*

`+v.data.text)}m+=v.data.text,yield v}this._handleCompleteChatReply(m);return}yield*await this.handlePreferenceCollection(r,n,s,o,c,u)}catch(p){if(p instanceof Sr&&p.status===$e.augmentTooLarge)return yield{type:"chat-model-reply-failed",data:{text:"",requestId:n,workspaceFileChunks:[]},displayErrorMessage:"The selected text exceeds the allowable limit. Please reduce the amount of text and try again"};if(p instanceof Sr&&(p.status===$e.resourceExhausted||p.status===$e.unavailable))return yield{type:"chat-model-reply-failed",data:{text:"",requestId:n,workspaceFileChunks:[]},displayErrorMessage:p.message,isRetriable:!0};if(p instanceof Error)return(String(p).includes("terminate")||p.message.includes("terminate"))&&this._logger.error(`Terminated error in chat: ${String(p)}`),yield{type:"chat-model-reply-failed",data:{text:"",requestId:n,workspaceFileChunks:[]},displayErrorMessage:p.message};if(String(p).startsWith("Error: Cancelled"))return;throw Kt.window.showErrorMessage(`Failed to send chat message: ${p}`),p}}async handlePreferenceCollection(r,n,i,s,o,a){let l=this._featureFlagManager.currentFlags.eloModelConfiguration;if((!l.highPriorityModels||l.highPriorityModels.length<2)&&l.highPriorityThreshold!==0||(!l.regularBattleModels||l.regularBattleModels.length<2)&&l.highPriorityThreshold<1)return async function*(){await Promise.resolve(),yield{type:"chat-model-reply-failed",data:{text:"",requestId:n,workspaceFileChunks:[]},displayErrorMessage:"Model comparison is not available at this time."}}();let c=l.highPriorityThreshold;(this._chatModel._preferenceState._selectedCode!==a?.selectedCode||this._chatModel._preferenceState._filePath!==a?.path)&&(this._chatModel._preferenceState=new ux);let u={message:r,requestId:n,blobs:i,userGuidedBlobs:s,selectedCodeDetails:a};return Math.random()<c?this.handleHighPriorityTest(u,o,l.highPriorityModels):this.handleRegularBattle(u,o,l.regularBattleModels)}handleHighPriorityTest(r,n,i){let s,o;if(i.length>0&&Array.isArray(i[0])){let a=Math.floor(Math.random()*i.length);[s,o]=i[a]}else[s,o]=i.sort(()=>Math.random()-.5).slice(0,2);return Promise.resolve(this.runComparison(r,{modelId:s,modelIdB:o,externalSourceIds:n,externalSourceIdsB:n}))}handleRegularBattle(r,n,i){let s=i[Math.floor(Math.random()*i.length)],o;do o=i[Math.floor(Math.random()*i.length)];while(o===s&&i.length>1);return Promise.resolve(this.runComparison(r,{modelId:s,modelIdB:o,externalSourceIds:n,externalSourceIdsB:n}))}async*runComparison(r,n){let i=this._apiServer.createRequestId(),s=(await this._toolsModel.getToolDefinitions()).map(m=>m.definition),o=this._chatModel.chatStream({requestId:r.requestId,message:r.message.data.text,chatHistory:r.message.data.chatHistory,blobs:r.blobs,userGuidedBlobs:r.userGuidedBlobs,externalSourceIds:n.externalSourceIds,modelId:n.modelId,toolDefinitions:s,personaType:r.message.data.personaType},r.selectedCodeDetails),a=this._chatModel.chatStream({requestId:i,message:r.message.data.text,chatHistory:r.message.data.chatHistory,blobs:r.blobs,userGuidedBlobs:r.userGuidedBlobs,externalSourceIds:n.externalSourceIdsB,modelId:n.modelIdB,toolDefinitions:s,personaType:r.message.data.personaType},r.selectedCodeDetails),{responseA:l,responseB:c,workspaceFileChunksA:u,workspaceFileChunksB:f,preferencePanel:p}=await this.processStreams(o,a,r.message,r.requestId,i,n.implicitExternalSources?n.implicitExternalSources:[],[...n.externalSourceIds??[],...n.externalSourceIdsB??[]]);p.postStreamDone();let g=await p?.getResult({a:r.requestId,b:i},this._apiServer,{a:n.modelId,b:n.modelIdB});g?this._chatModel._preferenceState._selectedCodeReferenceRequestIdOptionB=this._chatModel._preferenceState._selectedCodeReferenceRequestId:this._chatModel._preferenceState._selectedCodeReferenceRequestId=this._chatModel._preferenceState._selectedCodeReferenceRequestIdOptionB,this._handleCompleteChatReply(g?l:c),yield{type:"chat-model-reply",data:{text:g?l:c,requestId:g?r.requestId:i,workspaceFileChunks:g?u:f}}}async processStreams(r,n,i,s,o,a,l){let c="",u="",f="",p="",g=[],m=[],y=await wv.launchStandalonePreferencePanel(this._extensionUri,{a:new Sx(i.data.text,""),b:new Sx(i.data.text,"")},this._config.config.preferenceCollection.enableRetrievalDataCollection,this._fuzzyFsSearcher,a,l,this._workTimer),v=r[Symbol.asyncIterator](),C=n[Symbol.asyncIterator](),E=await v.next(),w=await C.next();for(;!E.done||!w.done;){!E.done&&(!c.includes(`
`)||w.done)&&(c+=E.value.data.text,g=g.concat(E.value.data.workspaceFileChunks),E=await v.next()),!w.done&&(!u.includes(`
`)||E.done)&&(u+=w.value.data.text,m=m.concat(w.value.data.workspaceFileChunks),w=await C.next());let B,R;for(;(c.includes(`
`)&&u.includes(`
`)||E.done||w.done)&&([B,c]=E.done&&!c.includes(`
`)?[c,""]:this.getNextLine(c),[R,u]=w.done&&!u.includes(`
`)?[u,""]:this.getNextLine(u),f+=B,p+=R,this.postStreamChunksToPanel(y,f,s,"A"),this.postStreamChunksToPanel(y,p,o,"B"),!(c.length===0||u.length===0)););}return c&&(f+=c,this.postStreamChunksToPanel(y,f,s,"A")),u&&(p+=u,this.postStreamChunksToPanel(y,p,o,"B")),{responseA:f,responseB:p,workspaceFileChunksA:g,workspaceFileChunksB:m,preferencePanel:y}}onExternalSourceSearch=async r=>{if(!gr(this._featureFlagManager.currentFlags.vscodeExternalSourcesInChatMinVersion))return{type:"find-external-sources-response",data:{sources:[]}};let n=await this._apiServer.searchExternalSources(r.data.query,[]);return{type:"find-external-sources-response",data:n}};getActiveWorkspacePath=()=>{let r=Kt.window.activeTextEditor;if(!r)return;let n=r.document.uri.fsPath;return this._workspaceManager.safeResolvePathName(n)?.rootPath};_resolvePathName(r){let n=this._workspaceManager.safeResolvePathName(r);if(n!==void 0)return{repoRoot:n.rootPath,pathName:n.relPath}}_getDefaultTargetPath=()=>{let r=Kt.window.activeTextEditor;if(!r)return;let n=r.document.uri.fsPath,i=this._workspaceManager.safeResolvePathName(n);return i?Xh(i):void 0};resolveTargetPath=async(r,n=void 0,i=!0)=>{if(!r)return;let s;if(nf(r))s=this._workspaceManager.safeResolvePathName(r);else{let a=this._workspaceManager.findBestWorkspaceRootMatch(r);a&&(s={rootPath:a.qualifiedPathName.rootPath,relPath:r})}if(s){let a=await this._fuzzyFsSearcher.statPath(s);if(a){let l=Xh(s);return l.fileType=a.type,l}}let o=this._fuzzyFsSearcher.findFiles({type:"find-file-request",data:{rootPath:"",relPath:r,exactMatch:i,maxResults:10,searchScope:n}});if(o.data.length>=0)return o.data[0]};async*_smartPasteWithChatInstruction(r,n){let{message:i,targetFilePath:s,targetFileContent:o}=r,a=r.selectedCodeDetails;n=n??this._apiServer.createRequestId();let l=this._workspaceManager.getContext().blobs,c=i.data.chatHistory.map(f=>({request_message:f.request_message,response_text:f.response_text,request_id:f.request_id})),u=this._chatModel.getReferenceReqId();for(let f=c.length-1;f>=0;f--){let p=c[f],g=this._chatModel.selectionCache.get(p.request_id);if(g){a=g,u=p.request_id;break}}try{let f=await this._apiServer.smartPasteStream(n,"",l,c,a?.selectedCode,a?.prefix,a?.suffix,a?.path,void 0,a?.prefixBegin,a?.suffixEnd,a?.language,i.data.generatedCode,s,o,u);for await(let p of f)yield p}catch(f){throw this._logger.error(`Error in _smartPasteWithChatInstruction: ${He(f)}`),f}}onClearMetadataFor=r=>{let n=r.data,i=this._chatModel;n.requestIds?.forEach(s=>{i.deleteChatStream(s),i.selectionCache.remove(s)}),n.conversationIds?.forEach(s=>{this._checkpointManager.clearConversationCheckpoints(s)})};async onExecuteCommand(r){let{iterationId:n,command:i,args:s}=r.data,o=(0,Zxe.spawn)(i,s,{stdio:["ignore","pipe","pipe"],shell:!0,cwd:this.getActiveWorkspacePath()}),a="",l=-1;return await new Promise((c,u)=>{o.stdout?.on("data",f=>{a+=f.toString(),Rm.currentPanel?.handleCommandPartialOutput({type:"autofix-panel-execute-command-partial-output",data:{iterationId:n,output:a}})}),o.stderr?.on("data",f=>{a+=f.toString(),Rm.currentPanel?.handleCommandPartialOutput({type:"autofix-panel-execute-command-partial-output",data:{iterationId:n,output:a}})}),o.on("close",f=>{l=f??-1,c()}),o.on("error",u)}),{type:"chat-autofix-execute-command-result",data:{output:a,returnCode:l}}}async _getVCSChange(){return this._workspaceManager!==void 0?await this._workspaceManager.getVCSChange():{commits:[],workingDirectory:[]}}async onAutofixPlan(r){let i=this._workspaceManager.getContext().blobs,s=await this._getVCSChange(),o=null;try{o=await this._apiServer.autofixPlan(r.data.command,s,i,r.data.steeringHistory)}catch{return{type:"chat-autofix-plan-response",data:{plan:{summary:"Error",replacements:[],originalReplacements:[]}}}}let a=o.replacements,l=await Promise.all(a.map(async c=>await Ybe(this._workspaceManager,c)));return{type:"chat-autofix-plan-response",data:{plan:{summary:o.summary,replacements:l,originalReplacements:a}}}}onDidReceiveMessage=async r=>{switch(r.type){case"chat-create-file":{let n=r.data.relPath;if(n){let i=this._workspaceManager.findBestWorkspaceRootMatch(n);if(!i||i.fileType!=="Directory"){Kt.window.showWarningMessage(`Directory ${qa(n)} not found.`);break}let s=Ms({rootPath:i.qualifiedPathName.rootPath,relPath:n}),o=Kt.Uri.file(s);try{await Kt.workspace.fs.stat(o),Kt.window.showErrorMessage(`Cannot create file at ${o.fsPath}. File already exists.`);break}catch{}try{await Kt.workspace.fs.writeFile(o,Buffer.from(r.data.code));let a=await Kt.workspace.openTextDocument(o);if(!a){this._logger.error(`Could not open document at ${o.fsPath} during file creation.`);break}await Kt.window.showTextDocument(a)}catch(a){this._logger.error(`Could not create file at ${o.fsPath}: ${a}`)}}else{try{let i=await Kt.workspace.openTextDocument({content:r.data.code}),s=i.uri;await Kt.workspace.fs.writeFile(s,Buffer.from(r.data.code)),await Kt.window.showTextDocument(i)}catch(i){this._logger.error(`Could not create untitled file: ${i}`)}break}break}case"chat-smart-paste":{let n=Kt.window.activeTextEditor,i=null;n&&(i=hG(n,this._workspaceManager,m1,m1));let s,o=await this.resolveTargetPath(r.data.targetFile)??this._getDefaultTargetPath();if(!r.data.options?.dryRun)if(o){if(r.data.options?.requireFileConfirmation&&!(await this.onOpenConfirmationModal({type:"open-confirmation-modal",data:{title:"Apply Codeblock",message:`Are you sure you want to apply the codeblock to ${o.pathName}?`,confirmButtonText:"Apply",cancelButtonText:"Cancel"}})).data.ok)return}else{Kt.window.showWarningMessage("Cannot apply codeblock. No valid target file found."),this._clientMetricsReporter.reportWebviewClientMetric({webviewName:"chat",client_metric:"chat-failed-smart-paste-resolve-file",value:1});return}if(!o)return;s=Ms({rootPath:o.repoRoot,relPath:o.pathName});let a=(await xo(s)).getText(),l=Le.from({rootPath:o.repoRoot,relPath:o.pathName}),c;!r.data.options?.dryRun&&!r.data.options?.instantApply&&this._createOrShowDiffView({smartPasteContext:{applyTime:c},document:new Yu(l,a,r.data.generatedCode)});let u,f;if(this._config.config.chat.smartPasteUsePrecomputation??!0){let p=await this._smartPasteCache.get(r.data.generatedCode,s,a,{message:r,selectedCodeDetails:i,targetFilePath:s,targetFileContent:a});if(!p){this._logger.error("Could not get valid edit stream for smart paste.");return}u=p.generator,f=p.requestId,this._clientMetricsReporter.reportWebviewClientMetric({webviewName:"chat",client_metric:"chat-precompute-smart-paste",value:1})}else{if(r.data.options?.dryRun)return;{let p=await this._smartPasteCache.getDirect({message:r,selectedCodeDetails:i,targetFilePath:s,targetFileContent:a});if(!p){this._logger.error("Could not get valid edit stream for smart paste.");return}u=p.generator,f=p.requestId,this._clientMetricsReporter.reportWebviewClientMetric({webviewName:"chat",client_metric:"chat-smart-paste",value:1})}}if(!u){this._logger.error("Could not get valid edit stream for smart paste.");return}r.data.options?.dryRun||(r.data.options?.instantApply?await vn.instantApply({extensionUri:this._extensionUri,workspaceManager:this._workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._keybindingWatcher,fuzzyFsSearcher:this._fuzzyFsSearcher,fuzzySymbolSearcher:this._fuzzySymbolSearcher,workTimer:this._workTimer},{document:new Yu(l,a,r.data.generatedCode)},u):vn.startStream(nF(a,u),f,"smart-paste"));break}case"open-file":{let n=await this.resolveTargetPath(r.data.pathName,void 0,!1);if(!n&&r.data.allowOutOfWorkspace){cg(r.data);return}else if(!n)return;let i=n.repoRoot,s=n.pathName;cg({repoRoot:i,pathName:s,range:r.data.range,fullRange:r.data.fullRange,differentTab:r.data.differentTab,snippet:r.data.snippet});break}case"open-memories-file":{let n=this._toolsModel.memoriesAbsPath;if(!n)return;cg({repoRoot:"",pathName:n});break}case"main-panel-perform-action":{this.performAction(r.data);break}case"used-slash-action":{this._onboardingSessionEventReporter.reportEvent("used-slash-action");break}case"used-chat":{this._onboardingSessionEventReporter.reportEvent("used-chat");break}case"chat-clear-metadata":{this.onClearMetadataFor(r);break}case"open-guidelines":{this._openGuidelines(r.data);break}case"update-user-guidelines":{tg.updateUserGuidelines(r.data);break}case"open-settings-page":{r.data?Kt.commands.executeCommand("vscode-augment.showSettingsPanel",r.data):Kt.commands.executeCommand("vscode-augment.showSettingsPanel");break}case"augment-link":{try{let n=r.data;if(n){let i=Kt.Uri.parse(n);Kt.env.openExternal(i)}}catch(n){this._logger.error(`Failed to open URL: ${He(n)}`)}break}case"trigger-initial-orientation":{if(!this._featureFlagManager.currentFlags.memoriesParams?.enable_initial_orientation)return;await z_(this._apiServer,this._workspaceManager,this._featureFlagManager,this._checkpointManager,rh.onboarding);break}case"get-orientation-status":{Vu();break}case"execute-command":{let n=r.data;try{await Kt.commands.executeCommand(n)}catch(i){this._logger.error(`Failed to execute command ${n}: ${i}`)}break}case"report-error":{this._apiServer.reportError(r.data.originalRequestId,r.data.sanitizedMessage,r.data.stackTrace,r.data.diagnostics);break}}};_openGuidelines=r=>{if(r){let n=ewe.default.join(r,".augment-guidelines"),i=Kt.Uri.file(n);Kt.commands.executeCommand("vscode.open",i);return}else{Kt.commands.executeCommand("workbench.action.openSettings","augment.userGuidelines");return}};_getBlobNames(r){let n=new Array;for(let i of r){let s=this._workspaceManager.getBlobName(Le.from(i));s!==void 0&&n.push(s)}return n}performAction(r){switch(r){case"disable-github-copilot":{Sm.disableGitHubCopilot();break}case"disable-codeium":{Sm.disableCodeium();break}case"move-extension-aside":{this._actionsModel.setSystemStateStatus("hasMovedExtensionAside","complete");break}case"open-folder":{Kt.commands.executeCommand("vscode.openFolder");break}case"close-folder":{Kt.commands.executeCommand("vscode.closeFolder");break}case"grant-sync-permission":{this._syncingEnabledTracker.enableSyncing();break}}}handleDerivedStateChange(r){this.sendActionsToWebview(r.map(n=>n.name))}async sendActionsToWebview(r){await this._webview?.postMessage({type:"main-panel-actions",data:r})}async sendAutofixUpdateRequestMessage(){await this._webview?.postMessage({type:"chat-autofix-state-update-request"})}async sendAutofixSuggestionsAppliedMessage(r){await this._webview?.postMessage({type:"chat-autofix-suggestions-applied",data:{selectedSolutions:r}})}onChatExtensionMessage=async r=>{switch(r){case"runSlashFix":{await this._webview?.postMessage({type:"run-slash-command",data:"fix"});break}case"runSlashExplain":{await this._webview?.postMessage({type:"run-slash-command",data:"explain"});break}case"newThread":{await this._webview?.postMessage({type:"new-thread"});break}case"runSlashTest":{await this._webview?.postMessage({type:"run-slash-command",data:"write-test"});break}case"runSlashDocument":{await this._webview?.postMessage({type:"run-slash-command",data:"document"});break}case"reset-agent-onboarding":{await this._webview?.postMessage({type:"reset-agent-onboarding"});break}}};showAugmentPanel=async()=>(await Kt.commands.executeCommand(Ji.commandID),{type:"empty"});callTool=async r=>{let n=r.data,i=await this._chatModel.hydrateChatHistory(n.chatHistory),s=this._chatModel.limitChatHistory(i),o=await this._toolsModel.callTool(n.chatRequestId,n.toolUseId,n.name,n.input,s,n.conversationId);return{type:"call-tool-response",data:o}};cancelToolRun=async r=>(await this._toolsModel.cancelToolRun(r.data.requestId,r.data.toolUseId),{type:"cancel-tool-run-response"});toolCheckSafe=async r=>{let n=r.data,i=await this._toolsModel.checkToolCallSafe(n.name,n.input);return{type:"check-safe-response",data:{isSafe:i}}};checkToolExists=async r=>{let n=await this._toolsModel.checkToolExists(r.toolName);return{type:"checkToolExistsResponse",exists:n}};_getChatRequestIdeState=async r=>{let n=Kt.window.activeTextEditor?this._workspaceManager.getFolderRoot(Kt.window.activeTextEditor?.document.uri):void 0,i=this._workspaceManager.getMostRecentlyChangedFolderRoot(),s=this._workspaceManager.listSourceFolders().filter(l=>l.type===0).sort(l=>l.folderRoot===n?-1:l.folderRoot===i?0:1).map(l=>({folder_root:l.folderRoot,repository_root:this._workspaceManager.getRepoRootForFolderRoot(l.folderRoot)??l.folderRoot})),o=this._toolsModel.getTool(Wi.launchProcess),a;return o&&o instanceof sv&&(a=o.processTools.getLongRunningTerminalInfo()),!a&&s.length>0&&(a={terminal_id:0,current_working_directory:s[0].folder_root}),Promise.resolve({type:"get-ide-state-node-response",data:{workspace_folders:s,workspace_folders_unchanged:!1,current_terminal:a}})};_createOrShowDiffView=r=>{vn.createOrShow({extensionUri:this._extensionUri,workspaceManager:this._workspaceManager,apiServer:this._apiServer,keybindingWatcher:this._keybindingWatcher,fuzzyFsSearcher:this._fuzzyFsSearcher,fuzzySymbolSearcher:this._fuzzySymbolSearcher,workTimer:this._workTimer},r)};_notifyAgentEditListHasUpdates=(0,mf.default)(()=>{this._webview?.postMessage({type:"chat-agent-edit-list-has-updates",data:{}})},1e3,{leading:!0,trailing:!0});_notifyMemoryHasUpdates=(0,mf.default)(()=>{this._webview?.postMessage({type:"chat-memory-has-updates"})},500,{leading:!0,trailing:!0});setupMemoryUpdateListener(){if(!this._toolsModel||typeof this._toolsModel.getSidecarToolHost!="function")return;let r=this._toolsModel.getSidecarToolHost();if(!r)return;let n=r.getMemoryUpdateManager();n&&(this._memoryUpdateManagerDisposable?.dispose(),this._memoryUpdateManagerDisposable=n.onMemoryHasUpdates(()=>{this._notifyMemoryHasUpdates()}),this.addDisposable(this._memoryUpdateManagerDisposable))}_saveImage=async r=>{let{filename:n,data:i}=r.data;return await this._assetManager.saveAsset(n,i),{type:"chat-save-image-response",data:n}};_deleteImage=async r=>{let n=r.data;return await this._assetManager.deleteAsset(n),{type:"chat-delete-image-response"}};_loadImage=async r=>{let n=r.data,i=await this._assetManager.loadAsset(n);return{type:"chat-load-image-response",data:i}}};var k8=q(require("vscode")),rwe=require("vscode");var twe=require("vscode");var Iv=class extends At{constructor(r,n){super();this._featureFlagManager=r;this._changeWebviewAppEvent=n}type="public";static commandID="_vscode-augment.showSidebarChat";run(){this._changeWebviewAppEvent.fire("chat"),twe.commands.executeCommand(Ji.commandID)}};async function Af(e){try{await k8.commands.executeCommand(Ji.commandID),await k8.commands.executeCommand(Iv.commandID)}catch(t){t instanceof Error&&rwe.window.showErrorMessage(`Sorry, Augment ${e} encountered an unexpected error: ${He(t)}`)}}var Bv=class extends sa{constructor(r,n,i,s,o,a){super(s,o,a);this._extension=r;this._configListener=n;this._chatExtensionEvent=i;this._extension=r,this._configListener=n,this._chatExtensionEvent=i}type="public";canRun(){return this._extension.ready}updateSelectionToCoverDiagnostics(r){let n=dg.window.activeTextEditor;if(n){let i;if(r&&!r.every(s=>n.selection.contains(s.range))){let s=Math.min(...r.map(c=>c.range.start.line)),o=Math.max(...r.map(c=>c.range.end.line)),a=new dg.Position(s,0),l=n.document.lineAt(o).range.end;i=new dg.Range(a,l)}else n.selection.isEmpty&&(i=n.document.lineAt(n.selection.active.line).range);i&&(n.selection=new dg.Selection(i.start,i.end))}}},ug=class extends Bv{static commandID="vscode-augment.chat.slash.fix";constructor(t,r,n,i){super(t,r,n,i,"Fix using Augment",!1)}async run(t,r){await Af("Quick Fix"),r&&this.updateSelectionToCoverDiagnostics(r),this._chatExtensionEvent.fire("runSlashFix")}},Dv=class extends Bv{static commandID="vscode-augment.chat.slash.explain";constructor(t,r,n,i){super(t,r,n,i,"Explain using Augment",!1)}async run(){await Af("Explain"),this._chatExtensionEvent.fire("runSlashExplain")}},Tv=class extends Bv{static commandID="vscode-augment.chat.slash.test";constructor(t,r,n,i){super(t,r,n,i,"Write test using Augment",!1)}async run(){await Af("Write a Test"),this._chatExtensionEvent.fire("runSlashTest")}},Rv=class extends Bv{static commandID="vscode-augment.chat.slash.document";constructor(t,r,n,i){super(t,r,n,i,"Document",!0)}async run(){await Af("Document"),this._chatExtensionEvent.fire("runSlashDocument")}};var v1=class{provideCodeActions(t,r,n,i){let s=n.diagnostics;if(s.length===0)return Promise.resolve(void 0);let o=new C1.CodeAction("Fix using Augment",C1.CodeActionKind.QuickFix);return o.command={command:ug.commandID,title:"Fix using Augment",arguments:[t.uri,s]},Promise.resolve([o])}resolveCodeAction(t,r){return t}};var M8=q(require("vscode"));var b1=class extends At{constructor(r,n,i){super("Reset Agent Onboarding",!0);this._chatExtensionEvent=r;this._globalState=n;this._workspaceStorage=i}static commandID="augment.resetAgentOnboarding";type="debug";async run(){await Af("Reset Agent Onboarding"),this._chatExtensionEvent.fire("reset-agent-onboarding"),await this._globalState.update("memoriesFileOpenCount",0),await this._workspaceStorage.update(sM,0)}},kv=class extends sa{constructor(r,n,i){super(i,"Run Agent Initial Orientation",!0);this._extension=r;this._apiServer=n}static commandID="vscode-augment.runAgentInitialOrientation";type="debug";async run(){if(!this._extension.workspaceManager){M8.window.showErrorMessage("Workspace manager is not ready");return}if(!this._extension.agentCheckpointManager){M8.window.showErrorMessage("Agent checkpoint manager is not ready");return}await z_(this._apiServer,this._extension.workspaceManager,this._extension.featureFlagManager,this._extension.agentCheckpointManager,rh.command)}canRun(){return super.canRun()&&this._extension.ready}};var km=class e extends At{constructor(r,n,i,s){super(s);this._auth=r;this._oauthFlow=n;this._commandID=i}static signInCommandID="vscode-augment.signIn";static signOutCommandID="vscode-augment.signOut";type="public";async run(){this.commandID===e.signInCommandID?await this._oauthFlow.startFlow():await this._auth.removeSession()}canRun(){return this._auth.useOAuth?this.commandID===e.signOutCommandID?this._auth.isLoggedIn===!0:!this._auth.isLoggedIn:!1}};var iwe=require("child_process"),Mv=q(require("fs")),Mm=require("path"),br=q(require("vscode"));var F8=class{documents=new Map;setDocumentContent(t,r){this.documents.set(t.toString(),r)}provideTextDocumentContent(t){return this.documents.get(t.toString())}},E1=class e extends At{constructor(r,n){super();this._extension=r;this._apiServer=n;this._outputChannel=br.window.createOutputChannel("Autofix Command Output")}static commandID="vscode-augment.autofixCommand";type="public";static testCommandHistory=[];_outputChannel;_chunkCount=32;_autofixLogger=j("AutofixCommand");async _locationToChunkContents(r,n){let i=(0,Mm.join)(n,r.path),o=(await Mv.promises.readFile(i,{encoding:"utf8"})).split(`
`),a=0,l=Math.max(r.range.start-a,0),c=Math.min(r.range.stop+a,o.length);return{path:r.path,content:o.slice(l,c).join(`
`),start_line:l,end_line:c}}_clearAndShowOutput(r){this._outputChannel.clear(),this._outputChannel.appendLine(r),this._outputChannel.show()}async _openDiffForChanges(r,n){let i=r.map(async s=>{let o="virtual",a=new F8,l=br.workspace.registerTextDocumentContentProvider(o,a),c=br.Uri.parse(`${o}:/${s.path}.right`);a.setDocumentContent(c,s.targetContent),await br.commands.executeCommand("vscode.diff",br.Uri.file((0,Mm.join)(n,s.path)),c,`Diff - ${s.path}`),await new Promise(u=>{let f=br.workspace.onDidCloseTextDocument(p=>{p.uri.toString()===c.toString()&&(f.dispose(),l.dispose(),u())})})});await Promise.all(i)}async _getTestCommand(){let r=br.window.createQuickPick();r.placeholder="Enter the test command to run (e.g. `pytest`)",r.ignoreFocusOut=!0;let n=()=>{let s=r.value?[{label:r.value,description:"New command"}]:[],o=e.testCommandHistory.filter(a=>a.toLowerCase()!==r.value.toLowerCase()).map(a=>({label:a,description:"Previous command"}));r.items=[...s,...o]};r.onDidChangeValue(n),n(),r.show();let i=await new Promise(s=>{r.onDidAccept(()=>{let o=r.selectedItems[0]?.label||r.value;s(o||void 0),r.hide()}),r.onDidHide(()=>s(void 0))});return r.dispose(),i&&(e.testCommandHistory=[i,...e.testCommandHistory.filter(s=>s!==i)].slice(0,10)),i}_runCommand(r,n,i=!1){return i&&this._clearAndShowOutput("Running command: "+r),new Promise(s=>{let o=r.split(" "),a=o[0],l=o.slice(1),c=(0,iwe.spawn)(a,l,{cwd:n,stdio:["ignore","pipe","pipe"],shell:!0}),u="";c.stdout.on("data",f=>{u+=f.toString(),i&&this._outputChannel.append(f.toString())}),c.stderr.on("data",f=>{u+=f.toString(),i&&this._outputChannel.append(f.toString())}),c.on("close",f=>{s({output:u,success:f===0})}),c.on("error",f=>{s({output:f.message,success:!1})})})}async _askYesNo(r,n=""){let i={modal:!0,detail:n},s=[{title:"Yes"},{title:"No",isCloseAffordance:!0}];return await br.window.showInformationMessage(r,i,...s)===s[0]}async _getEditLocations(r,n,i,s,o,a){let l=await this._apiServer.nextEditLocation(a,r,"",n,[],i,[],[],o,!1);if(l.checkpointNotFound)throw new Error("Checkpoint not found");if(l.candidateLocations.length===0)throw new Error("No candidate locations found");return Promise.all(l.candidateLocations.map(async c=>this._locationToChunkContents(c.item,s)))}async _diffToChunks(r){return Promise.all(r.map(n=>{let i=n.afterContent.split(`
`);return{path:n.afterPath,content:n.afterContent,start_line:0,end_line:i.length-1}}))}async _applyChanges(r,n,i){if(n&&await this._askYesNo("Would you like to apply and test the changes?")){for(let o of r){let{path:a,targetContent:l}=o;await Mv.promises.writeFile((0,Mm.join)(i,a),l)}if((await this._runCommand(n,i,!0)).success)br.window.showInformationMessage("The tests has passed.");else{let o="Command failed. Keep changes anyway?";if(!await this._askYesNo(o,"return code != 0"))for(let a of r){let{path:l,sourceContent:c}=a;await Mv.promises.writeFile((0,Mm.join)(i,l),c)}}}}_checkOutputReturn(r){return r.success&&r.output.length>0}async _getGitDiffObject(r,n){let i=`git diff ${r} --name-status -M`,o=(await this._runGitCommand(i,n)).split(`
`),a=[];for(let l of o){let[c,...u]=l.split("	"),f=u[0],p=u[u.length-1],g;switch(c[0]){case"M":if(g=rr.modified,f!==p)throw new Error("Unexpected change type: modified with rename");break;case"A":g=rr.added,f="";break;case"D":g=rr.deleted,p="";break;case"R":if(g=rr.renamed,f===p)throw new Error("Unexpected change type: rename with no change");break;default:continue}let m="",y="";if(g!==rr.added){let v=`git show ${r}:${f}`,C=await this._runCommand(v,n);if(!C.success)throw new Error("Failed to execute git command");m=C.output}if(g!==rr.deleted){let v=(0,Mm.join)(n,p);y=await Mv.promises.readFile(v,{encoding:"utf8"})}a.push({beforePath:f,afterPath:p,changeType:g,beforeContent:m,afterContent:y})}return a}_diffToVCSChange(r){let n=new sh(1e3);return{commits:[],workingDirectory:r.map(i=>{let s=n.calculateNoThrow(i.afterPath,i.afterContent)||"",o=n.calculateNoThrow(i.afterPath,i.afterContent)||"";return{beforePath:i.beforePath,afterPath:i.afterPath,changeType:i.changeType,headBlobName:s,indexedBlobName:o,currentBlobName:o}})}}async _uploadBlobs(r,n){let i=[];r.workingDirectory.forEach((s,o)=>{s.currentBlobName&&i.push({pathName:s.afterPath||"",text:n[o].afterContent,blobName:s.currentBlobName,metadata:[]}),s.headBlobName&&i.push({pathName:s.beforePath||"",text:n[o].beforeContent,blobName:s.headBlobName,metadata:[]})});try{await Promise.all(i.map(s=>this._apiServer.batchUpload([s])))}catch{}}async _runGitCommand(r,n){let i=await this._runCommand(r,n);if(!this._checkOutputReturn(i))throw new Error(`Failed to execute git command: ${r}
Output: ${i.output}`);return i.output.trimEnd()}async run(){if(!this._extension.workspaceManager)throw new Error("Workspace manager is not ready");let r=this._extension.workspaceManager.getContext();if(!br.workspace.workspaceFolders||br.workspace.workspaceFolders.length===0){br.window.showErrorMessage("No workspace folders");return}let n=br.workspace.workspaceFolders[0].uri.fsPath,i=await this._runGitCommand("git rev-parse --show-toplevel",n),s=await this._runGitCommand("git rev-parse --abbrev-ref origin/HEAD",i),o=await this._runGitCommand("git rev-parse --abbrev-ref HEAD",i),a=Q=>Q.slice(Q.lastIndexOf("/")+1),l="HEAD";a(o)!==a(s)&&(l=await this._runGitCommand(`git merge-base HEAD ${s}`,i));let c=`git diff -U10 ${l}`,u=await this._runCommand(c,i);if(!this._checkOutputReturn(u)){br.window.showErrorMessage(`Failed to get git diff: ${u.output}`);return}let f;try{f=await this._getGitDiffObject(l,i)}catch(Q){br.window.showErrorMessage(`Failed to parse git diff: ${Q instanceof Error?Q.message:String(Q)}`);return}let p=this._diffToVCSChange(f);try{await this._uploadBlobs(p,f)}catch(Q){br.window.showErrorMessage(`Failed to upload blobs: ${Q instanceof Error?Q.message:String(Q)}`);return}let g=await this._getTestCommand();if(!g){br.window.showInformationMessage("No test command provided.");return}let m=await this._runCommand(g,i,!0),y="The tests has passed, would you like to continue anyway?";if(m.success&&!await this._askYesNo(y,"return code: 0"))return;if(m.output.length===0){br.window.showInformationMessage("No command output found.");return}let v=this._apiServer.createRequestId();this._autofixLogger.info(`Requesting edit locations with requestId=${v}`);let C=this._getEditLocations(m.output,p,r.blobs,i,this._chunkCount,v);v=this._apiServer.createRequestId(),this._autofixLogger.info(`Requesting check command with requestId=${v}`);let E=this._apiServer.checkCommand(g,m.output,v);v=this._apiServer.createRequestId(),this._autofixLogger.info(`Requesting contain errors with requestId=${v}`);let w=this._apiServer.containErrors(g,m.output,v);try{let Q=await E,se="Command doesn't appear code-related. Continue anyway?";if(Q.result)br.window.showInformationMessage("\u2705 Command check passed.");else if(!await this._askYesNo(se,Q.desc))return}catch(Q){br.window.showErrorMessage(`Failed to check command: ${Q instanceof Error?Q.message:String(Q)}`);return}try{let Q=await w,se="Couldn't find errors in the output. Continue anyway?";if(Q.result)br.window.showInformationMessage("\u2705 Contain errors check passed.");else if(!await this._askYesNo(se,Q.desc))return}catch(Q){br.window.showErrorMessage(`Failed to check for errors: ${Q instanceof Error?Q.message:String(Q)}`);return}let B;try{B=await C}catch(Q){br.window.showErrorMessage(`Failed to get edit locations: ${Q instanceof Error?Q.message:String(Q)}`);return}let R=f.filter(Q=>Q.afterPath!==""),N=R.map(Q=>Q.afterPath),W=await this._diffToChunks(R),Z=B.filter(Q=>!N.includes(Q.path)).concat(W);br.window.showInformationMessage(`Found ${B.length} potential edit locations.`),br.window.showInformationMessage("Creating fix plan...");let te;try{v=this._apiServer.createRequestId(),this._autofixLogger.info(`Requesting create fix plan with requestId=${v}`),te=await this._apiServer.createFixPlan(u.output,g,m.output,Z,v)}catch(Q){br.window.showErrorMessage(`Failed to create fix plan: ${Q instanceof Error?Q.message:String(Q)}`);return}let Y=`Changes:
${te.changes.map(Q=>`- ${Q.path}`).join(`
`)}`,U=`${te.fix_desc}

${Y}`,ce=Promise.all(te.changes.map(async Q=>{let se=(0,Mm.join)(i,Q.path),z=await Mv.promises.readFile(se,{encoding:"utf8"});return v=this._apiServer.createRequestId(),this._autofixLogger.info(`Requesting apply file fix with requestId=${v}`),this._apiServer.applyFileFix(Q,z,v)}));if(!await this._askYesNo("Do you confirm the the following fix?",U))return;br.window.showInformationMessage("Generating patch...");let Ie;try{Ie=await ce}catch(Q){br.window.showErrorMessage(`Failed to generate patch: ${Q instanceof Error?Q.message:String(Q)}`);return}if(Ie=Ie.filter(Q=>Q.targetContent!==Q.sourceContent),Ie.length===0){br.window.showWarningMessage("Sorry, no changes to apply.");return}br.window.showInformationMessage("Close all diff views to continue.");try{await this._openDiffForChanges(Ie,i)}catch(Q){Q instanceof Error&&br.window.showErrorMessage(`Failed to open diff views: ${Q.message}`);return}try{await this._applyChanges(Ie,g,i)}catch(Q){br.window.showErrorMessage(`Failed to apply changes: ${Q instanceof Error?Q.message:String(Q)}`);return}}};var z1=q(require("vscode"));var Pi=q(require("vscode"));var Fm=q(require("vscode"));var Ox=(n=>(n.showDiffInHover="showDiffInHover",n.highlightSuggestionsInTheEditor="highlightSuggestionsInTheEditor",n.enableAutoApply="enableAutoApply",n))(Ox||{}),_1=class extends X{constructor(r,n,i){super();this.configListener=r;this.featureFlagManager=n;this.augmentGlobalState=i;i.update("nextEditUxMigrationStatus",void 0)}get config(){return Xvt(this.configListener.config,this.featureFlagManager)}async toggleSetting(r){let n=Fm.workspace.getConfiguration("augment"),i="nextEdit."+Ox[r],s=n.inspect(i),o=Fm.ConfigurationTarget.Global;return s?.workspaceValue!==void 0&&(o=Fm.ConfigurationTarget.Workspace),n.update(i,!this.configListener.config.nextEdit[r],o)}async setGlobalBooleanSetting(r,n){let i=Fm.workspace.getConfiguration("augment"),s="nextEdit."+Ox[r];return i.update(s,n,Fm.ConfigurationTarget.Global)}};function Xvt(e,t){return{enableAutoApply:e.nextEdit.enableAutoApply,showDiffInHover:e.nextEdit.showDiffInHover,enablePanel:e.nextEdit.enableBottomPanel??gr(t.currentFlags.vscodeNextEditBottomPanelMinVersion)??!1}}var an=class extends sa{constructor(r,n,i,s,o=!0,a=!1){super(i,s,o);this._extension=r;this._configListener=n;this._isFileRequired=a}type="debug";static _generateHref(r,n,...i){return`command:${r}?${encodeURIComponent(JSON.stringify([n,...i]))}`}canRun(){return super.canRun()&&this._extension.ready&&Kl(this._configListener.config,this._extension.featureFlagManager.currentFlags.vscodeNextEditMinVersion)&&(this._isFileRequired?Pi.window.activeTextEditor!==void 0:!0)}_getEventSource(r){if(r.length===0)return"command";for(let n in Rs){if(!isNaN(Number(n)))continue;let i=Rs[n];if(r[0]===i)return i}return r.length===2&&r[0]instanceof Pi.Uri&&"groupId"in r[1]?"editor-action-click":r.length===1&&r[0]instanceof Pi.Uri?"right-click":r.length===1&&r[0]===void 0?"next-edit-panel-item-click":"command"}},x1=class extends an{type="public";static commandID="vscode-augment.next-edit.force";constructor(t,r,n){super(t,r,n,void 0,void 0,!0)}canRun(){return super.canRun()}run(...t){this._extension.forceNextEditSuggestion(this._getEventSource(t))}},w1=class extends an{type="public";static commandID="vscode-augment.next-edit.update";constructor(t,r,n){super(t,r,n,void 0,!0,!1)}run(...t){this._extension.nextEditUpdate(this._getEventSource(t))}},S1=class extends an{type="private";static commandID="_vscode-augment.next-edit.update.loading";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},I1=class extends an{type="private";static commandID="_vscode-augment.next-edit.update.disabled-no-changes";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},B1=class extends an{type="private";static commandID="_vscode-augment.next-edit.update.disabled-cached";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},Wc=class extends an{type="public";static commandID="vscode-augment.next-edit.background.accept";constructor(t,r,n){super(t,r,n,void 0)}static generateHref(t,r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.editorNextEdit?.accept(this._getEventSource(t),void 0,typeof t[1]=="string"?t[1]:void 0)}},Qm=class extends an{type="public";static commandID="vscode-augment.next-edit.background.accept-all";constructor(t,r,n){super(t,r,n,void 0,!0)}run(...t){this._extension.editorNextEdit?.acceptAllSuggestions(this._getEventSource(t))}},yf=class extends an{type="private";static commandID="_vscode-augment.next-edit.background.accept-code-action";constructor(t,r,n){super(t,r,n,void 0,!1)}run(t){this._extension.editorNextEdit?.acceptSuggestion(t,"code-action")}},Gc=class extends an{type="public";static commandID="vscode-augment.next-edit.background.reject";constructor(t,r,n){super(t,r,n,void 0)}static generateHref(t="hover-click",r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.editorNextEdit?.reject(this._getEventSource(t),typeof t[1]=="string"?t[1]:void 0)}},Nm=class extends an{type="public";static commandID="vscode-augment.next-edit.background.reject-all";constructor(t,r,n){super(t,r,n,void 0,!0)}run(...t){this._extension.editorNextEdit?.rejectAllSuggestions(this._getEventSource(t))}},Xu=class extends an{type="public";static commandID="vscode-augment.next-edit.background.dismiss";constructor(t,r,n){super(t,r,n,void 0)}run(...t){this._extension.editorNextEdit?.dismissOrReject(this._getEventSource(t))}},ca=class extends an{type="public";static commandID="vscode-augment.next-edit.background.next";constructor(t,r,n){super(t,r,n,void 0)}run(...t){this._extension.editorNextEdit?.gotoNextSmart(this._getEventSource(t))}},Pm=class extends an{type="public";static commandID="vscode-augment.next-edit.background.next-forward";constructor(t,r,n){super(t,r,n,void 0)}run(...t){this._extension.editorNextEdit?.next(this._getEventSource(t))}},Lm=class extends an{type="public";static commandID="vscode-augment.next-edit.background.previous";constructor(t,r,n){super(t,r,n,void 0)}run(...t){this._extension.editorNextEdit?.previous(this._getEventSource(t))}},D1=class extends an{type="private";static commandID="_vscode-augment.next-edit.background.open";constructor(t,r,n){super(t,r,n,void 0,!1)}run(...t){let r=t[0];this._extension.editorNextEdit?.openSuggestionAt(r.uri,r.lineNumber-1)}},T1=class extends an{type="public";static commandID="vscode-augment.next-edit.toggle-panel-horizontal-split";constructor(t,r,n){super(t,r,n,void 0,!1)}run(...t){this._extension.nextEditTogglePanelHorizontalSplit(this._getEventSource(t))}},fg=class extends an{type="public";static commandID="vscode-augment.next-edit.learn-more";constructor(t,r,n){super(t,r,n,void 0,!0)}static generateHref(t="hover-click",r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.nextEditLearnMore(this._getEventSource(t))}},R1=class extends an{type="private";static commandID="_vscode-augment.next-edit.background.next-forward.disabled";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},k1=class extends an{type="private";static commandID="_vscode-augment.next-edit.background.previous.disabled";constructor(t,r,n){super(t,r,n,void 0,!1)}run(){this._extension.noopClicked()}},ed=class extends an{constructor(r,n,i){super(r,n,i,void 0,r.nextEditConfigManager.config.enablePanel);this.extension=r}type="public";static commandID="vscode-augment.next-edit.open-panel";get showInActionPanel(){return this.extension.nextEditConfigManager.config.enablePanel}static generateHref(r="hover-click",n){return"command:augment-next-edit.focus"}run(...r){this._extension.openNextEditPanel(this._getEventSource(r))}},Ro=class extends an{type="private";static commandID="_vscode-augment.next-edit.undo-accept-suggestion";constructor(t,r,n){super(t,r,n,void 0,!1)}static generateHref(t="hover-click",r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.editorNextEdit?.undoAcceptSuggestion(void 0,this._getEventSource(t))}},Fv=class extends an{type="private";static commandID="_vscode-augment.next-edit.toggle-hover-diff";constructor(t,r,n){super(t,r,n,void 0,!1)}static generateHref(t="hover-click",r){return super._generateHref(this.commandID,t,r)}run(...t){this._extension.editorNextEdit?.toggleHoverDiff(this._getEventSource(t),typeof t[1]=="string"?t[1]:void 0)}},M1=class e extends an{type="public";static commandID="vscode-augment.next-edit.toggle-bg";static backgroundSuggestionsConfigKey="nextEdit.enableBackgroundSuggestions";defaultParams={promptFirst:!1,newValue:void 0};constructor(t,r,n){super(t,r,n,()=>r.config.nextEdit.enableBackgroundSuggestions?"Turn Background Suggestions Off":"Turn Background Suggestions On",!0)}async run(t){let r={...this.defaultParams,...t},n=Pi.workspace.getConfiguration("augment"),i=n.inspect(e.backgroundSuggestionsConfigKey),s=Pi.ConfigurationTarget.Global;i?.workspaceValue!==void 0&&(s=Pi.ConfigurationTarget.Workspace);let o=r.newValue??!this._configListener.config.nextEdit.enableBackgroundSuggestions;if(r.promptFirst&&o===!1){let a=await Pi.window.showErrorMessage("Are you sure you want to disable Next Edit Suggestions?",{modal:!0,detail:"You can re-enable them in Settings > Augment > Enable Background Suggestions."},"Disable","Go to Settings");if(a==="Go to Settings"&&Pi.commands.executeCommand("workbench.action.openSettings","@ext:augment.vscode-augment nextEdit.enableBackgroundSuggestions"),a!=="Disable")return}await n.update(e.backgroundSuggestionsConfigKey,o,s)}},F1=class extends an{type="public";static commandID="vscode-augment.next-edit.toggle-all-highlights";constructor(t,r,n){super(t,r,n,()=>this._configListener.config.nextEdit.highlightSuggestionsInTheEditor?"Turn Off All Line Highlights":"Turn On All Line Highlights")}canRun(){return super.canRun()}run(){this._extension.nextEditConfigManager.toggleSetting("highlightSuggestionsInTheEditor")}},qx=class e extends an{type="public";static commandID="vscode-augment.next-edit.enable-bg";static backgroundSuggestionsConfigKey="nextEdit.enableBackgroundSuggestions";constructor(t,r,n){super(t,r,n,()=>"Enable Background Suggestions",!0)}canRun(){return super.canRun()&&this._extension.ready&&!this._configListener.config.nextEdit.enableBackgroundSuggestions}async run(){let t=Pi.workspace.getConfiguration("augment");if(t.get(e.backgroundSuggestionsConfigKey))return;let r=t.inspect(e.backgroundSuggestionsConfigKey),n=Pi.ConfigurationTarget.Global;r?.workspaceValue!==void 0&&(n=Pi.ConfigurationTarget.Workspace),await t.update(e.backgroundSuggestionsConfigKey,!0,n)}},Q1=class e extends an{type="public";static commandID="vscode-augment.next-edit.disable-bg";static backgroundSuggestionsConfigKey="nextEdit.enableBackgroundSuggestions";constructor(t,r,n){super(t,r,n,()=>"Disable Background Suggestions",!0)}canRun(){return super.canRun()&&this._extension.ready&&this._configListener.config.nextEdit.enableBackgroundSuggestions}async run(){let t=Pi.workspace.getConfiguration("augment");if(!t.get(qx.backgroundSuggestionsConfigKey))return;let r=t.inspect(e.backgroundSuggestionsConfigKey),n=Pi.ConfigurationTarget.Global;r?.workspaceValue!==void 0&&(n=Pi.ConfigurationTarget.Workspace),await t.update(e.backgroundSuggestionsConfigKey,!1,n)}},N1=class e extends an{constructor(r,n,i,s){super(r,n,i,e.title);this._globalState=s}static title="Reset Next Edit Onboarding";static commandID="_vscode-augment.next-edit.reset-onboarding";type="debug";canRun(){return this._configListener.config.enableDebugFeatures&&super.canRun()}async run(){await this._globalState.update("nextEditSuggestionSeen",void 0),await this._globalState.update("nextEditSuggestionAccepted",void 0),await this._globalState.update("nextEditKeybindingUsageCount",void 0),await this._globalState.update("nextEditUxMigrationStatus",void 0)}},P1=class extends an{static commandID="vscode-augment.next-edit.settings";type="public";constructor(t,r,n){super(t,r,n,()=>"Enable Background Suggestions",!1)}run(){Pi.commands.executeCommand("workbench.action.openSettings","@ext:augment.vscode-augment augment.nextEdit")}};var Y1=q(require("fs")),Ewe=q(H8()),_we=q(require("os")),xwe=q(require("path")),zl=q(require("vscode"));var Wx=class{_keyCodeToStr;_strToKeyCode;constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,r){this._keyCodeToStr[t]=r,this._strToKeyCode[r.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},V1=new Wx,W8=new Wx,G8=new Wx,lCt=new Array(230),cCt={},pwe=[],mwe=Object.create(null),Awe=Object.create(null),H1={lowerCaseToEnum:e=>Awe[e]||0,toEnum:e=>mwe[e]||0,toString:e=>pwe[e]||"None"},ywe=[],$8=[];for(let e=0;e<=193;e++)ywe[e]=-1;for(let e=0;e<=132;e++)$8[e]=-1;(function(){let e="",t=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",e,e],[1,1,"Hyper",0,e,0,e,e,e],[1,2,"Super",0,e,0,e,e,e],[1,3,"Fn",0,e,0,e,e,e],[1,4,"FnLock",0,e,0,e,e,e],[1,5,"Suspend",0,e,0,e,e,e],[1,6,"Resume",0,e,0,e,e,e],[1,7,"Turbo",0,e,0,e,e,e],[1,8,"Sleep",0,e,0,"VK_SLEEP",e,e],[1,9,"WakeUp",0,e,0,e,e,e],[0,10,"KeyA",31,"A",65,"VK_A",e,e],[0,11,"KeyB",32,"B",66,"VK_B",e,e],[0,12,"KeyC",33,"C",67,"VK_C",e,e],[0,13,"KeyD",34,"D",68,"VK_D",e,e],[0,14,"KeyE",35,"E",69,"VK_E",e,e],[0,15,"KeyF",36,"F",70,"VK_F",e,e],[0,16,"KeyG",37,"G",71,"VK_G",e,e],[0,17,"KeyH",38,"H",72,"VK_H",e,e],[0,18,"KeyI",39,"I",73,"VK_I",e,e],[0,19,"KeyJ",40,"J",74,"VK_J",e,e],[0,20,"KeyK",41,"K",75,"VK_K",e,e],[0,21,"KeyL",42,"L",76,"VK_L",e,e],[0,22,"KeyM",43,"M",77,"VK_M",e,e],[0,23,"KeyN",44,"N",78,"VK_N",e,e],[0,24,"KeyO",45,"O",79,"VK_O",e,e],[0,25,"KeyP",46,"P",80,"VK_P",e,e],[0,26,"KeyQ",47,"Q",81,"VK_Q",e,e],[0,27,"KeyR",48,"R",82,"VK_R",e,e],[0,28,"KeyS",49,"S",83,"VK_S",e,e],[0,29,"KeyT",50,"T",84,"VK_T",e,e],[0,30,"KeyU",51,"U",85,"VK_U",e,e],[0,31,"KeyV",52,"V",86,"VK_V",e,e],[0,32,"KeyW",53,"W",87,"VK_W",e,e],[0,33,"KeyX",54,"X",88,"VK_X",e,e],[0,34,"KeyY",55,"Y",89,"VK_Y",e,e],[0,35,"KeyZ",56,"Z",90,"VK_Z",e,e],[0,36,"Digit1",22,"1",49,"VK_1",e,e],[0,37,"Digit2",23,"2",50,"VK_2",e,e],[0,38,"Digit3",24,"3",51,"VK_3",e,e],[0,39,"Digit4",25,"4",52,"VK_4",e,e],[0,40,"Digit5",26,"5",53,"VK_5",e,e],[0,41,"Digit6",27,"6",54,"VK_6",e,e],[0,42,"Digit7",28,"7",55,"VK_7",e,e],[0,43,"Digit8",29,"8",56,"VK_8",e,e],[0,44,"Digit9",30,"9",57,"VK_9",e,e],[0,45,"Digit0",21,"0",48,"VK_0",e,e],[1,46,"Enter",3,"Enter",13,"VK_RETURN",e,e],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",e,e],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",e,e],[1,49,"Tab",2,"Tab",9,"VK_TAB",e,e],[1,50,"Space",10,"Space",32,"VK_SPACE",e,e],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,e,0,e,e,e],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",e,e],[1,64,"F1",59,"F1",112,"VK_F1",e,e],[1,65,"F2",60,"F2",113,"VK_F2",e,e],[1,66,"F3",61,"F3",114,"VK_F3",e,e],[1,67,"F4",62,"F4",115,"VK_F4",e,e],[1,68,"F5",63,"F5",116,"VK_F5",e,e],[1,69,"F6",64,"F6",117,"VK_F6",e,e],[1,70,"F7",65,"F7",118,"VK_F7",e,e],[1,71,"F8",66,"F8",119,"VK_F8",e,e],[1,72,"F9",67,"F9",120,"VK_F9",e,e],[1,73,"F10",68,"F10",121,"VK_F10",e,e],[1,74,"F11",69,"F11",122,"VK_F11",e,e],[1,75,"F12",70,"F12",123,"VK_F12",e,e],[1,76,"PrintScreen",0,e,0,e,e,e],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",e,e],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",e,e],[1,79,"Insert",19,"Insert",45,"VK_INSERT",e,e],[1,80,"Home",14,"Home",36,"VK_HOME",e,e],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",e,e],[1,82,"Delete",20,"Delete",46,"VK_DELETE",e,e],[1,83,"End",13,"End",35,"VK_END",e,e],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",e,e],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",e],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",e],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",e],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",e],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",e,e],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",e,e],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",e,e],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",e,e],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",e,e],[1,94,"NumpadEnter",3,e,0,e,e,e],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",e,e],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",e,e],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",e,e],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",e,e],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",e,e],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",e,e],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",e,e],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",e,e],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",e,e],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",e,e],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",e,e],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",e,e],[1,107,"ContextMenu",58,"ContextMenu",93,e,e,e],[1,108,"Power",0,e,0,e,e,e],[1,109,"NumpadEqual",0,e,0,e,e,e],[1,110,"F13",71,"F13",124,"VK_F13",e,e],[1,111,"F14",72,"F14",125,"VK_F14",e,e],[1,112,"F15",73,"F15",126,"VK_F15",e,e],[1,113,"F16",74,"F16",127,"VK_F16",e,e],[1,114,"F17",75,"F17",128,"VK_F17",e,e],[1,115,"F18",76,"F18",129,"VK_F18",e,e],[1,116,"F19",77,"F19",130,"VK_F19",e,e],[1,117,"F20",78,"F20",131,"VK_F20",e,e],[1,118,"F21",79,"F21",132,"VK_F21",e,e],[1,119,"F22",80,"F22",133,"VK_F22",e,e],[1,120,"F23",81,"F23",134,"VK_F23",e,e],[1,121,"F24",82,"F24",135,"VK_F24",e,e],[1,122,"Open",0,e,0,e,e,e],[1,123,"Help",0,e,0,e,e,e],[1,124,"Select",0,e,0,e,e,e],[1,125,"Again",0,e,0,e,e,e],[1,126,"Undo",0,e,0,e,e,e],[1,127,"Cut",0,e,0,e,e,e],[1,128,"Copy",0,e,0,e,e,e],[1,129,"Paste",0,e,0,e,e,e],[1,130,"Find",0,e,0,e,e,e],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",e,e],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",e,e],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",e,e],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",e,e],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",e,e],[1,136,"KanaMode",0,e,0,e,e,e],[0,137,"IntlYen",0,e,0,e,e,e],[1,138,"Convert",0,e,0,e,e,e],[1,139,"NonConvert",0,e,0,e,e,e],[1,140,"Lang1",0,e,0,e,e,e],[1,141,"Lang2",0,e,0,e,e,e],[1,142,"Lang3",0,e,0,e,e,e],[1,143,"Lang4",0,e,0,e,e,e],[1,144,"Lang5",0,e,0,e,e,e],[1,145,"Abort",0,e,0,e,e,e],[1,146,"Props",0,e,0,e,e,e],[1,147,"NumpadParenLeft",0,e,0,e,e,e],[1,148,"NumpadParenRight",0,e,0,e,e,e],[1,149,"NumpadBackspace",0,e,0,e,e,e],[1,150,"NumpadMemoryStore",0,e,0,e,e,e],[1,151,"NumpadMemoryRecall",0,e,0,e,e,e],[1,152,"NumpadMemoryClear",0,e,0,e,e,e],[1,153,"NumpadMemoryAdd",0,e,0,e,e,e],[1,154,"NumpadMemorySubtract",0,e,0,e,e,e],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",e,e],[1,156,"NumpadClearEntry",0,e,0,e,e,e],[1,0,e,5,"Ctrl",17,"VK_CONTROL",e,e],[1,0,e,4,"Shift",16,"VK_SHIFT",e,e],[1,0,e,6,"Alt",18,"VK_MENU",e,e],[1,0,e,57,"Meta",91,"VK_COMMAND",e,e],[1,157,"ControlLeft",5,e,0,"VK_LCONTROL",e,e],[1,158,"ShiftLeft",4,e,0,"VK_LSHIFT",e,e],[1,159,"AltLeft",6,e,0,"VK_LMENU",e,e],[1,160,"MetaLeft",57,e,0,"VK_LWIN",e,e],[1,161,"ControlRight",5,e,0,"VK_RCONTROL",e,e],[1,162,"ShiftRight",4,e,0,"VK_RSHIFT",e,e],[1,163,"AltRight",6,e,0,"VK_RMENU",e,e],[1,164,"MetaRight",57,e,0,"VK_RWIN",e,e],[1,165,"BrightnessUp",0,e,0,e,e,e],[1,166,"BrightnessDown",0,e,0,e,e,e],[1,167,"MediaPlay",0,e,0,e,e,e],[1,168,"MediaRecord",0,e,0,e,e,e],[1,169,"MediaFastForward",0,e,0,e,e,e],[1,170,"MediaRewind",0,e,0,e,e,e],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",e,e],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",e,e],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",e,e],[1,174,"Eject",0,e,0,e,e,e],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",e,e],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",e,e],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",e,e],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",e,e],[1,179,"LaunchApp1",0,e,0,"VK_MEDIA_LAUNCH_APP1",e,e],[1,180,"SelectTask",0,e,0,e,e,e],[1,181,"LaunchScreenSaver",0,e,0,e,e,e],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",e,e],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",e,e],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",e,e],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",e,e],[1,186,"BrowserStop",0,e,0,"VK_BROWSER_STOP",e,e],[1,187,"BrowserRefresh",0,e,0,"VK_BROWSER_REFRESH",e,e],[1,188,"BrowserFavorites",0,e,0,"VK_BROWSER_FAVORITES",e,e],[1,189,"ZoomToggle",0,e,0,e,e,e],[1,190,"MailReply",0,e,0,e,e,e],[1,191,"MailForward",0,e,0,e,e,e],[1,192,"MailSend",0,e,0,e,e,e],[1,0,e,114,"KeyInComposition",229,e,e,e],[1,0,e,116,"ABNT_C2",194,"VK_ABNT_C2",e,e],[1,0,e,96,"OEM_8",223,"VK_OEM_8",e,e],[1,0,e,0,e,0,"VK_KANA",e,e],[1,0,e,0,e,0,"VK_HANGUL",e,e],[1,0,e,0,e,0,"VK_JUNJA",e,e],[1,0,e,0,e,0,"VK_FINAL",e,e],[1,0,e,0,e,0,"VK_HANJA",e,e],[1,0,e,0,e,0,"VK_KANJI",e,e],[1,0,e,0,e,0,"VK_CONVERT",e,e],[1,0,e,0,e,0,"VK_NONCONVERT",e,e],[1,0,e,0,e,0,"VK_ACCEPT",e,e],[1,0,e,0,e,0,"VK_MODECHANGE",e,e],[1,0,e,0,e,0,"VK_SELECT",e,e],[1,0,e,0,e,0,"VK_PRINT",e,e],[1,0,e,0,e,0,"VK_EXECUTE",e,e],[1,0,e,0,e,0,"VK_SNAPSHOT",e,e],[1,0,e,0,e,0,"VK_HELP",e,e],[1,0,e,0,e,0,"VK_APPS",e,e],[1,0,e,0,e,0,"VK_PROCESSKEY",e,e],[1,0,e,0,e,0,"VK_PACKET",e,e],[1,0,e,0,e,0,"VK_DBE_SBCSCHAR",e,e],[1,0,e,0,e,0,"VK_DBE_DBCSCHAR",e,e],[1,0,e,0,e,0,"VK_ATTN",e,e],[1,0,e,0,e,0,"VK_CRSEL",e,e],[1,0,e,0,e,0,"VK_EXSEL",e,e],[1,0,e,0,e,0,"VK_EREOF",e,e],[1,0,e,0,e,0,"VK_PLAY",e,e],[1,0,e,0,e,0,"VK_ZOOM",e,e],[1,0,e,0,e,0,"VK_NONAME",e,e],[1,0,e,0,e,0,"VK_PA1",e,e],[1,0,e,0,e,0,"VK_OEM_CLEAR",e,e]],r=[],n=[];for(let i of t){let[s,o,a,l,c,u,f,p,g]=i;if(n[o]||(n[o]=!0,pwe[o]=a,mwe[a]=o,Awe[a.toLowerCase()]=o,s&&(ywe[o]=l,l!==0&&l!==3&&l!==5&&l!==4&&l!==6&&l!==57&&($8[l]=o))),!r[l]){if(r[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);V1.define(l,c),W8.define(l,p||c),G8.define(l,g||p||c)}u&&(lCt[u]=l),f&&(cCt[f]=l)}$8[3]=46})();var Gx;(o=>{function e(a){return V1.keyCodeToStr(a)}o.toString=e;function t(a){return V1.strToKeyCode(a)}o.fromString=t;function r(a){return W8.keyCodeToStr(a)}o.toUserSettingsUS=r;function n(a){return G8.keyCodeToStr(a)}o.toUserSettingsGeneral=n;function i(a){return W8.strToKeyCode(a)||G8.strToKeyCode(a)}o.fromUserSettings=i;function s(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return V1.keyCodeToStr(a)}o.toElectronAccelerator=s})(Gx||={});var Y8=class{unexpectedErrorHandler;listeners;constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?W1.isErrorNoTelemetry(t)?new W1(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(r=>{r(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},d4t=new Y8;function vwe(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}var W1=class e extends Error{name;constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof e)return t;let r=new e;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}};var Qv=class e{constructor(t,r,n,i,s){this.ctrlKey=t;this.shiftKey=r;this.altKey=n;this.metaKey=i;this.keyCode=s}equals(t){return t instanceof e&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",r=this.shiftKey?"1":"0",n=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`K${t}${r}${n}${i}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new qm([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},gg=class e{constructor(t,r,n,i,s){this.ctrlKey=t;this.shiftKey=r;this.altKey=n;this.metaKey=i;this.scanCode=s}equals(t){return t instanceof e&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.scanCode===t.scanCode}getHashCode(){let t=this.ctrlKey?"1":"0",r=this.shiftKey?"1":"0",n=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`S${t}${r}${n}${i}${this.scanCode}`}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===157||this.scanCode===161)||this.shiftKey&&(this.scanCode===158||this.scanCode===162)||this.altKey&&(this.scanCode===159||this.scanCode===163)||this.metaKey&&(this.scanCode===160||this.scanCode===164)}},qm=class{chords;constructor(t){if(t.length===0)throw vwe("chords");this.chords=t}getHashCode(){let t="";for(let r=0,n=this.chords.length;r<n;r++)r!==0&&(t+=";"),t+=this.chords[r].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let r=0;r<this.chords.length;r++)if(!this.chords[r].equals(t.chords[r]))return!1;return!0}};var G1=class{static _readModifiers(t){t=t.toLowerCase().trim();let r=!1,n=!1,i=!1,s=!1,o;do o=!1,/^ctrl(\+|\-)/.test(t)&&(r=!0,t=t.substr(5),o=!0),/^shift(\+|\-)/.test(t)&&(n=!0,t=t.substr(6),o=!0),/^alt(\+|\-)/.test(t)&&(i=!0,t=t.substr(4),o=!0),/^meta(\+|\-)/.test(t)&&(s=!0,t=t.substr(5),o=!0),/^win(\+|\-)/.test(t)&&(s=!0,t=t.substr(4),o=!0),/^cmd(\+|\-)/.test(t)&&(s=!0,t=t.substr(4),o=!0);while(o);let a,l=t.indexOf(" ");return l>0?(a=t.substring(0,l),t=t.substring(l)):(a=t,t=""),{remains:t,ctrl:r,shift:n,alt:i,meta:s,key:a}}static parseChord(t){let r=this._readModifiers(t),n=r.key.match(/^\[([^\]]+)\]$/);if(n){let s=n[1],o=H1.lowerCaseToEnum(s);return[new gg(r.ctrl,r.shift,r.alt,r.meta,o),r.remains]}let i=Gx.fromUserSettings(r.key);return[new Qv(r.ctrl,r.shift,r.alt,r.meta,i),r.remains]}static parseKeybinding(t){if(!t)return null;let r=[],n;for(;t.length>0;)[n,t]=this.parseChord(t),r.push(n);return r.length>0?new qm(r):null}};var K1=class{constructor(t,r){this.platform=t;this.keybindings=r}},Yc=class e extends X{constructor(r){super();this._globalState=r;if(this.defaultKeybindings=this.getDefaultKeybindings(),!this.isRemote&&!this.isWeb){this.platform=_we.default.platform();let n=yve();if(n){let i=xwe.default.join(n,e.keybindingFileName);this.userKeybindings=this.getUserKeybindings(i),this.watcher=Y1.default.watch(n,(s,o)=>{o===e.keybindingFileName&&(e._logger.info(`keybindings file changed: ${s} ${o}`),this.userKeybindings=this.getUserKeybindings(i))}),this.addDisposable({dispose:()=>{this.watcher?.close()}})}}else{let n=this._globalState.get("userKeybindingInfo");this.platform=n?.platform,this.userKeybindings=n?.keybindings??{},this.addDisposable(zl.workspace.onDidSaveTextDocument(i=>{i.uri.scheme==="vscode-userdata"&&i.fileName.endsWith(e.keybindingFileName)&&(this.platform=this.getPlatformFromFilename(i.fileName),this.userKeybindings=this.getUserKeybindingsFromJSON(i.fileName,i.getText()),this._globalState.update("userKeybindingInfo",new K1(this.platform,this.userKeybindings)))})),setTimeout(()=>{this.tryToFindPlatformAndUserKeybindings()},e.remoteHeuristicDelayMs)}}static remoteHeuristicDelayMs=1e3*5;static _logger=j("KeybindingWatcher");static keybindingFileName="keybindings.json";isRemote=zl.env.remoteName!==void 0;isWeb=zl.env.uiKind===zl.UIKind.Web;platform;watcher;defaultKeybindings={};userKeybindings={};async tryToFindPlatformAndUserKeybindings(){if(this.isRemote&&this.platform===void 0){let n=(await zl.workspace.openTextDocument(zl.Uri.from({scheme:"output",path:"exthost"}))).getText(),i=/Skipping acquiring lock for (.*)\./,s=n.match(i);if(s){e._logger.debug("Loading user keybindings");let a=s[1].replace(/workspaceStorage.*/,e.keybindingFileName);this.platform=this.getPlatformFromFilename(a);let l=await zl.workspace.openTextDocument(zl.Uri.from({scheme:"vscode-userdata",path:a}));this.userKeybindings=this.getUserKeybindingsFromJSON(l.fileName,l.getText()),this._globalState.update("userKeybindingInfo",new K1(this.platform,this.userKeybindings))}}}getKeybindingForCommand(r,n=!1){let i=this.userKeybindings[r];if(!i){if(this.userKeybindings["-"+r])return;let o=this.defaultKeybindings[r];o&&(this.platform!==void 0||o.key===o.mac)&&(i=o)}let s;return i?(this.platform===void 0?s=Array.from(new Set([i.key,i.mac])).filter(o=>o!==void 0).join("/"):this.platform==="darwin"&&i.mac?s=i.mac:s=i.key,n?e.formatKeyboardShortcut(s,this.getSimplifiedPlatform()):s):null}static getStructuredKeybinding(r){try{if(!r)return null;let n=G1.parseKeybinding(r);return n?new K8(n.chords):null}catch(n){return this._logger.warn(`error parsing keybinding ${r}`,n),null}}static formatKeyboardShortcut(r,n){try{let i=e.getStructuredKeybinding(r);return i?i.toPrettyString(n):""}catch(i){return this._logger.warn("error formatting keybinding, returning unformatted keybinding.",i),r||""}}getSimplifiedPlatform(){return this.platform==="darwin"?"darwin":this.platform==="win32"?"win32":"linux"}getDefaultKeybindings(){let r=Am();if(r&&r.contributes&&r.contributes.keybindings){let{keybindings:n}=r.contributes;return Object.fromEntries(n.map(i=>[i.command,i]))}return{}}getUserKeybindings(r){if(Y1.default.existsSync(r)){let n=Y1.default.readFileSync(r,"utf8");return this.getUserKeybindingsFromJSON(r,n)}return{}}getUserKeybindingsFromJSON(r,n){try{let i=Ewe.default.parse(n);return Object.fromEntries(i.map(s=>[s.command,s]))}catch(i){return e._logger.debug(`Failed to parse '${r}': ${i.message}`),{}}}getPlatformFromFilename(r){return r.startsWith("/Users/")?"darwin":r.match(/^\/?[a-zA-Z](?::|%3A)\/.*/)?"win32":"linux"}},$1={meta:{darwin:"\u2318",win32:"Win",linux:"Meta"},ctrl:{darwin:"\u2303",win32:"Ctrl",linux:"Ctrl"},alt:{darwin:"\u2325",win32:"Alt",linux:"Alt"},shift:"\u21E7"},bwe={Enter:"\u23CE",UpArrow:"\u2191",DownArrow:"\u2193",Backspace:"\u232B",Escape:"Esc"},K8=class extends qm{constructor(t){super(t)}toPrettyString(t){let r=[];for(let n of this.chords){let i=[];n.ctrlKey&&i.push($1.ctrl[t]),n.shiftKey&&i.push($1.shift),n.altKey&&i.push($1.alt[t]),n.metaKey&&i.push($1.meta[t]);let s;n instanceof Qv?s=Gx.toString(n.keyCode):s=H1.toString(n.scanCode),s in bwe&&(s=bwe[s]),s=s.charAt(0).toUpperCase()+s.substring(1).toLowerCase(),i.push(s),i.join("").length<=2||t==="darwin"?r.push(i.join("")):r.push(i.join("+"))}return r.indexOf("Unknown")!==-1?"":r.join(" ").trim()}};function Kl(e,t){return e.nextEdit.enabled??gr(t)}function $x(e,t){return e.nextEdit.enableBackgroundSuggestions&&e.nextEdit.backgroundEnabled&&Kl(e,t)}function Nv(){let e=z1.window.tabGroups.activeTabGroup?.activeTab?.input;return e instanceof z1.TabInputTextDiff||e!=null&&Object.hasOwn(e,"base")&&Object.hasOwn(e,"input1")&&Object.hasOwn(e,"input2")}var z8=e=>{let t=new Map;for(let r of e.filter(Boolean))t.set(r.result.suggestionId,r);return Array.from(t.values())},Yx=(...e)=>t=>e.some(r=>r(t));function Pv(e){return e?.state==="accepted"}function Xn(e){return e?.state==="fresh"&&e.changeType!=="noop"}function wwe(e){return e?.state==="fresh"}function td(e,t,r=!1){let n=e.getKeybindingForCommand(t,r);return n||(t===Ro.commandID?(e.getSimplifiedPlatform()==="darwin"?n="Cmd+Z":n="Ctrl+Z",r?Yc.formatKeyboardShortcut(n,e.getSimplifiedPlatform()):n):t==="redo"?(e.getSimplifiedPlatform()==="darwin"?n="Cmd+Shift+Z":n="Ctrl+Y",r?Yc.formatKeyboardShortcut(n,e.getSimplifiedPlatform()):n):n)}var J1=class e extends At{constructor(r,n){super(e.title);this._extension=r;this._configListener=n}static title="Clear Recent Editing History";static commandID="vscode-augment.clear-recent-editing-history";type="public";run(){this._extension.clearFileEdits()}canRun(){return super.canRun()&&this._extension.ready&&Kl(this._configListener.config,this._extension.featureFlagManager.currentFlags.vscodeNextEditMinVersion)}};var Z1=require("vscode");var uCt=j("CopySessionIdPanelCommand"),j1=class extends At{constructor(r){super();this._apiServer=r}static commandID="vscode-augment.copySessionId";type="public";async run(){try{let r=this._apiServer.sessionId;await Z1.env.clipboard.writeText(r),await Z1.window.showInformationMessage("Copied session ID to clipboard")}catch(r){uCt.error(`Failed to copy session ID: ${r}`)}}};var Vm=class e extends At{constructor(r){super("Start Extension CPU Profile");this._flagManager=r}static commandID="vscode-augment.cpu-profile.start";static isProfileRunning=!1;type="debug";run(){!this._flagManager.currentFlags.vscodeEnableCpuProfile||e.isProfileRunning||(e.markAsRunning(),console.profile())}canRun(){return this._flagManager.currentFlags.vscodeEnableCpuProfile&&!e.isProfileRunning}static markAsRunning(){e.isProfileRunning=!0}static markAsNotRunning(){e.isProfileRunning=!1}},X1=class extends At{constructor(r){super("End Extension CPU Profile");this._flagManager=r}static commandID="vscode-augment.cpu-profile.stop";type="debug";run(){Vm.isProfileRunning&&(console.profileEnd(),Vm.markAsNotRunning())}canRun(){return Vm.isProfileRunning}};var Kc=class extends At{constructor(r,n,i=!0){super(n,i);this._config=r}type="debug";canRun(){return this._config.config.enableDebugFeatures}};var eQ=class e extends Kc{constructor(r,n,i){super(n,e.title);this._syncingEnabledTracker=r;this._extension=i}static title="$(sync) Enable workspace syncing";static commandID="vscode-augment.enable-workspace-syncing";run(){this._syncingEnabledTracker.syncingEnabledState!=="initializing"&&this._syncingEnabledTracker.enableSyncing()}canRun(){let r=this._syncingEnabledTracker.syncingEnabledState;return super.canRun()&&this._extension.ready&&(r==="disabled"||r==="partial")}},tQ=class e extends Kc{constructor(r,n,i){super(n,e.title);this._syncingStateTracker=r;this._extension=i}static title="$(circle-slash) Disable workspace syncing";static commandID="vscode-augment.disable-workspace-syncing";run(){this._syncingStateTracker.syncingEnabledState!=="initializing"&&this._syncingStateTracker.disableSyncing()}canRun(){let r=this._syncingStateTracker.syncingEnabledState;return super.canRun()&&this._extension.ready&&(r==="enabled"||r==="partial")}};var nQ=require("vscode");var rQ=class extends Kc{constructor(r,n){super(n,"Show Extension Status");this._extension=r}static commandID="vscode-augment.extensionStatus";async run(){this._extension.updateStatusTrace();let r=await nQ.workspace.openTextDocument(Hm.displayStatusUri);await nQ.window.showTextDocument(r)}};var pg=q(require("vscode"));var iQ=class extends At{constructor(r,n,i){super();this._configListener=i;this._apiServer=n,this.extension=r,this.commitMessagePromptPreparer=new xv(pg.default?.workspace.workspaceFolders?.[0].uri.fsPath??"")}type="public";static commandID="vscode-augment.generateCommitMessage";_apiServer;extension;commitMessagePromptPreparer;canRun(){return this._configListener.config.enableDebugFeatures}async run(r){await this.generateCommitMessage()}async generateCommitMessage(){let r;try{r=pg.default.extensions.getExtension("vscode.git")?.exports}catch{pg.default.window.showInformationMessage("Cannot generate commit message: Failed to interact with git extension");return}let n=r?.getAPI(1)?.repositories,i=pg.default.workspace.workspaceFolders?.at(0)?.uri??"",s=n?.find(u=>u.rootUri.toString()===i.toString());if(!s){pg.default.window.showInformationMessage("Cannot generate commit message: no repo");return}if(s.inputBox.value="Augment is generating...",!this.extension.workspaceManager){pg.default.window.showInformationMessage("Cannot generate commit message: no workspace");return}let o;try{o=await this.commitMessagePromptPreparer.getCommitMessagePromptData({diffBudget:9216,messageBudget:3072,relevantMessageSubbudget:1024,diffNoopLineLimit:5e3,onlyUseStagedChanges:!1,maxExampleCommitMessages:3})}catch(u){pg.default.window.showInformationMessage(`Cannot generate commit message: Failed to generate diff details. Error: ${u instanceof Error?u.message:String(u)}`);return}let a=this._apiServer.createRequestId(),l=await this._apiServer.generateCommitMessageStream(a,o),c="";try{for await(let u of l)c+=u.text,s.inputBox.value=c}catch{s.inputBox.value="Server error: failed to generate commit message."}}};var rd=require("vscode");var Kx=require("vscode"),Swe=new Kx.EventEmitter,Iwe=new Kx.EventEmitter,Bwe=new Kx.EventEmitter,Dwe=new Kx.EventEmitter,zc=e=>Swe.event(e),Wm=e=>Bwe.event(e),Twe=e=>Iwe.event(e),Rwe=e=>Swe.fire(e),kwe=()=>Bwe.fire(),J8=e=>Iwe.fire(e),Mwe=e=>Dwe.event(e),Ef=e=>Dwe.fire(e);var sQ=class extends sa{constructor(r,n){super(n);this._extension=r}static commandID="vscode-augment.insertCompletion";completionTimeoutMS=1e4;type="public";async run(){let r={location:rd.ProgressLocation.Notification,title:"Waiting for completion...",cancellable:!0},n,i=async(s,o)=>{n=await this.requestCompletion(o)};if(await rd.window.withProgress(r,i),!n){await rd.window.showWarningMessage("Failed to request a completion");return}switch(n.resultType){case"timeout":await rd.window.showWarningMessage("Failed to request a completion");break;case"cancelled":await rd.window.showInformationMessage("Completion request cancelled");break;default:n.foundCompletion||await rd.window.showInformationMessage("No completions found");break}}async requestCompletion(r){let n=Promise.race([(async()=>{let i=await Ou(zc),s=!1;return i?.completions&&i.completions.length>0&&(s=!0),{foundCompletion:s,resultType:"completion"}})(),(async()=>(await Ou(Wm),{foundCompletion:!1,resultType:"cancelled"}))(),(async()=>(await Ou(r.onCancellationRequested),{foundCompletion:!1,resultType:"cancelled"}))(),new Promise(i=>{setTimeout(()=>{i({foundCompletion:!1,resultType:"timeout"})},this.completionTimeoutMS)})]);return rd.commands.executeCommand("editor.action.inlineSuggest.trigger"),await n}canRun(){return super.canRun()&&this._extension.ready}};var ua=q(require("vscode"));var oQ=class e extends Kc{constructor(r,n){super(n,"Show Internal Context");this._extension=r}static commandID="vscode-augment.showWorkspaceContext";static textDocumentName="Augment Workspace Context.txt";_documentUri=ua.Uri.file(e.textDocumentName).with({scheme:"untitled"});async run(){let r=this._formatContext(),n=await ua.workspace.openTextDocument(this._documentUri);await ua.window.showTextDocument(n);let i=new ua.Range(new ua.Position(0,0),new ua.Position(n.lineCount,0)),s=new ua.WorkspaceEdit;s.replace(n.uri,i,r),await ua.workspace.applyEdit(s)}_formatContext(){let r=this._extension.workspaceManager;if(r===void 0)return"no workspace manager";let n=r.getContextWithBlobNames(),i=`Augment workspace context
`,s=this._formatBlobs(r,n),o=this._formatChunks(n.recentChunks);return i+s+`


`+o}_formatBlobs(r,n){let i=new Array,s=new Set;for(let[c,u]of n.trackedPaths)for(let[f,p]of u)s.add(p);let o=new Map,a=new Set;for(let c of n.blobNames){let u=r.getAllPathInfo(c);for(let[f,p,g]of u){let m=o.get(f);m===void 0&&(m=new Map,o.set(f,m)),m.set(g,[c,u.length])}u.length===0&&!s.has(c)&&a.add(c)}let l=new Map;for(let c of n.recentChunks){let u=c.repoRoot,f=c.pathName,p=l.get(u);p===void 0&&(p=new Map,l.set(u,p)),p.set(f,(p.get(f)||0)+1)}for(let[c,u]of o){let f=n.trackedPaths.get(c)||new Map,p=u.size,g=f.size,m=l.get(c)||new Map;for(let E of m.keys())f.has(E)||i.push(`    ${c}: ${E} has recent chunks but is not open`);let y=`Repo root ${c}: ${p} paths (${g} open)`;i.push(""),i.push(y),i.push("=".repeat(y.length));let v=Array.from(f.keys());v.sort();for(let E of v){let w=f.get(E),B=m.get(E)||0;i.push(`    ${w} -> ${E}: open, recent chunks: ${B}`)}v.length>0&&i.push("");let C=Array.from(u.keys());C.sort();for(let E of C){if(f.has(E))continue;let[w,B]=u.get(E),R=B===1?"":` (x ${B})`;i.push(`    ${w} -> ${E}${R}`)}}if(a.size>0)for(let c of a)i.push(`unknown blob: ${c}`);return i.join(`
`)}_formatChunks(r){let n=new Array,i="Recent chunks";if(n.push(i),n.push("=".repeat(i.length)),r.length===0)return n.push("    (no recent chunks)"),n.join(`
`);for(let s=0;s<r.length;s++){let o=r[s];n.push(""),n.push(`Chunk ${s+1} of ${r.length}`),n.push(`    seq:      ${o.seq}`),n.push(`    uploaded: ${o.uploaded}`),n.push(`    repoRoot: ${o.repoRoot}`),n.push(`    pathName: ${o.pathName}`),n.push(`    blobName: ${o.blobName}`),n.push(`    start:    ${o.origStart}`),n.push(`    length:   ${o.origLength}`),n.push("======== chunk begin ========"),n.push(o.text),n.push("-------- chunk end ----------"),n.push("")}return n.join(`
`)}};var aQ=q(require("vscode"));var _f=class e extends At{constructor(r,n){super();this.extension=r;this._commandID=n}static commandIDCommunity="vscode-augment.manageAccountCommunity";static commandIDProfessional="vscode-augment.manageAccountProfessional";static commandIDEnterprise="vscode-augment.manageAccountEnterprise";type="public";run(){aQ.env.openExternal(aQ.Uri.parse("https://app.augmentcode.com/account"))}canRun(){let r=this.extension.userTier,n=this._commandID===e.commandIDCommunity?"community":this._commandID===e.commandIDProfessional?"professional":"enterprise";return super.canRun()&&r===n}};var Fwe=q(require("vscode"));var lQ=class extends Kc{static commandID="vscode-augment.openSshConfig";sshConfigManager;constructor(t,r){super(t,"Open Augment SSH Config"),this.sshConfigManager=new yv(r)}async run(){try{let t=this.sshConfigManager.fileSystem,r=await t.getAugmentSshConfigPath();await this.sshConfigManager.ensureAugmentConfigExists(),await t.openFile(r)}catch(t){Fwe.window.showErrorMessage(`Error opening SSH config: ${String(t)}`)}}};var j8=require("vscode");var cQ=class extends At{static commandID="vscode-augment.settings";type="public";run(){j8.commands.executeCommand("workbench.action.openSettings","@ext:augment.vscode-augment")}},uQ=class extends At{static commandID="vscode-augment.keyboard-shortcuts";type="public";run(){j8.commands.executeCommand("workbench.action.openGlobalKeybindings","@ext:augment.vscode-augment")}};var Qwe=require("vscode"),Nwe=q(require("vscode"));var dQ=class extends At{static commandID="vscode-augment.showDocs";type="public";async run(){await Nwe.env.openExternal(Qwe.Uri.parse("https://docs.augmentcode.com"))}};var Mo=q(require("vscode"));var fQ=class e extends Zs{constructor(r,n,i,s,o,a,l,c,u=Mo.window.createWebviewPanel("history","Augment History",s)){super("history.html",u.webview);this._extensionUri=r;this._config=n;this._apiServer=i;this._recentCompletions=o;this._recentInstructions=a;this._recentNextEditResults=l;this._workTimer=c;this._panel=u;this._panel.iconPath={light:Mo.Uri.joinPath(this._extensionUri,"media","panel-icon-light.svg"),dark:Mo.Uri.joinPath(this._extensionUri,"media","panel-icon-dark.svg")},this._panel.onDidDispose(()=>{this.dispose()}),this.addDisposables(this._panel,new Mo.Disposable(()=>{e.currentPanel=void 0})),this.addDisposable(this._recentInstructions.onNewItems(f=>{!this._panel||!this._panel.visible||this._panel.webview.postMessage({type:"instructions",data:[f]})})),this.addDisposable(this._recentNextEditResults.onNewItems(f=>{!this._panel||!this._panel.visible||this._panel.webview.postMessage({type:"next-edit-suggestions",data:f})})),this.addDisposable(this._recentCompletions.onNewItems(async f=>{await this.sendCompletions()})),this.addDisposable(this._config.onDidChange(async()=>{await this.sendConfig()})),this._panel.webview.onDidReceiveMessage(async f=>{await this._workTimer.runTimed(f.type,async()=>{await this._handleMessage(f)})}),this.loadHTML(r)}static currentPanel;async _postMessage(r){!this._panel||!this._panel.visible||await this._panel.webview.postMessage(r)}async sendCompletions(){await this._postMessage({type:"completions",data:this._getCompletions()})}_getCompletions(){return this._recentCompletions.items.map(r=>({occuredAt:r.occuredAt.toISOString(),requestId:r.requestId,repoRoot:r.repoRoot,pathName:r.pathName,prefix:r.prefix,completions:r.completions.map(n=>({text:n.completionText,skippedSuffix:n.skippedSuffix,suffixReplacementText:n.suffixReplacementText})),suffix:r.suffix}))}async sendConfig(){await this._postMessage({type:"history-config",data:this._config.config})}async _handleMessage(r){if(!(!this._panel||!this._panel.visible))switch(r.type){case"history-loaded":await this._postMessage({type:"history-initialize",data:{config:this._config.config,completionRequests:this._getCompletions(),instructions:this._recentInstructions.items.slice(),nextEdits:this._recentNextEditResults.items.slice()}});break;case"copy-request-id-to-clipboard":await Mo.env.clipboard.writeText(r.data),await Mo.window.showInformationMessage("Copied request ID to clipboard");break;case"open-file":{cg(r.data,this._panel.viewColumn);break}case"completion-rating":{let n=!0;try{await this._apiServer.completionFeedback(r.data)}catch(i){n=!1,Mo.window.showErrorMessage(`Failed to submit feedback: ${i.message}`)}finally{this._panel.webview.postMessage({type:"completion-rating-done",data:{success:n,requestId:r.data.requestId}})}break}case"next-edit-rating":{let n=!0;try{await this._apiServer.nextEditFeedback(r.data)}catch(i){n=!1,Mo.window.showErrorMessage(`Failed to submit feedback: ${i.message}`)}finally{this._panel.webview.postMessage({type:"next-edit-rating-done",data:{success:n,requestId:r.data.requestId}})}break}}}static createOrShow(r,n,i,s,o,a,l){if(e.currentPanel){e.currentPanel._panel.reveal(Mo.ViewColumn.Beside);return}e.currentPanel=new e(r,n,i,Mo.ViewColumn.Beside,s,o,a,l)}};var hQ=class extends At{constructor(r,n,i,s,o,a,l){super();this._extensionUri=r;this._config=n;this._apiServer=i;this._recentCompletions=s;this._recentInstructions=o;this._recentNextEditResults=a;this._workTimer=l}static commandID="vscode-augment.showHistoryPanel";type="public";run(){fQ.createOrShow(this._extensionUri,this._config,this._apiServer,this._recentCompletions,this._recentInstructions,this._recentNextEditResults,this._workTimer)}};var Lv=q(require("vscode"));var gQ=class extends At{constructor(r,n,i){super();this._extension=r;this._context=n;this._commandManager=i}static commandID="vscode-augment.showAugmentCommands";type="public";async run(){let r=this._context.extension.packageJSON?.contributes?.commands;if(!r)return;let n=Object.fromEntries(r.map(({command:a,title:l})=>[a,l]));for(let a of this._commandManager.availableCommands){let l=a.title||n[a.commandID];l&&(n[a.commandID]=l)}let i={};if(this._extension.keybindingWatcher)for(let a of Object.keys(n)){let l=this._extension.keybindingWatcher.getKeybindingForCommand(a,!0);l&&(i[a]=`${l}`)}let s=this.getActions(n,i),o=await Lv.window.showQuickPick(s,{title:"Augment Commands"});o&&o.commandID&&Lv.commands.executeCommand(o.commandID)}getActions(r,n){let i=[];for(let{name:s,commands:o}of this._commandManager.availableCommandGroups){let a=o.filter(l=>r[l.commandID]);if(a.length!==0){i.length>0&&i.push({label:s,kind:Lv.QuickPickItemKind.Separator});for(let l of a)l.showInActionPanel&&i.push({commandID:l.commandID,label:r[l.commandID],description:n[l.commandID]})}}return Promise.resolve(i)}};var ds=q(require("vscode"));var Z8=q(Gf()),pQ=q(require("vscode"));var Uv=class e extends X{constructor(r,n,i,s=void 0){super();this._workspaceManager=r;this._webview=n;this._featureFlagManager=i;this._asyncMsgHandler=js(this._webview,s),this.addDisposable(this._featureFlagManager.subscribe(["enableWorkspaceManagerUi"],this._registerAllHandlers.bind(this))),this._registerAllHandlers()}_logger=j("WorkspaceUIModel");_asyncMsgHandler;_registerAllHandlers(){this._featureFlagManager.currentFlags.enableWorkspaceManagerUi&&(this._setupWorkspaceListeners(),this.addDisposable(this._asyncMsgHandler),this.addDisposable(this._webview.onDidReceiveMessage(this.onDidReceiveMessage)),this._asyncMsgHandler.registerHandler("ws-context-get-source-folders-request",this.getSourceFoldersHandler),this._asyncMsgHandler.registerHandler("ws-context-get-children-request",this.getChildrenHandler))}_setupWorkspaceListeners(){this.addDisposable(this._workspaceManager.onDidChangeSourceFolders((0,Z8.default)(()=>{this._webview.postMessage({type:"ws-context-source-folders-changed"})},500,{leading:!0,trailing:!0}))),this.addDisposable(this._workspaceManager.onDidChangeSourceFolderContents((0,Z8.default)(r=>{this._webview.postMessage({type:"ws-context-folder-contents-changed",data:r})},500,{leading:!0,trailing:!0})))}getSourceFoldersHandler=()=>{let r=this._workspaceManager.listSourceFolders().sort((n,i)=>n.name.localeCompare(i.name));return{type:"ws-context-get-source-folders-response",data:{workspaceFolders:r.map(e.makeWSContextSourceFolder)}}};getChildrenHandler=r=>{let n=this._workspaceManager.listChildren(r.data.fileId.folderRoot,r.data.fileId.relPath).sort((i,s)=>i.name.localeCompare(s.name));return{type:"ws-context-get-children-response",data:{children:n.map(e.makeWSContextFileItem)}}};static getInclusionState(r){return r.included?r.type==="Directory"&&r.containsExcludedItems?"partial":"included":"excluded"}static makeWSContextFileItem=r=>({name:r.name,fileId:{folderRoot:r.folderRoot,relPath:r.relPath},type:r.type==="Directory"?"folder":"file",inclusionState:e.getInclusionState(r),reason:r.reason,trackedFileCount:r.type==="Directory"?r.trackedFileCount:void 0});static makeWSContextSourceFolder=r=>({name:r.name,fileId:{folderRoot:r.folderRoot,relPath:""},inclusionState:r.containsExcludedItems?"partial":"included",isWorkspaceFolder:r.type===0||r.type===2,isNestedFolder:r.type===2||r.type===3,isPending:r.enumerationState===0,trackedFileCount:r.type===0||r.type===1?r.trackedFileCount:void 0});onDidReceiveMessage=async r=>{switch(this._logger.debug(`Extension received message: ${r.type}`),r.type){case"ws-context-add-more-source-folders":{let n=await pQ.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!0,openLabel:"Add Source Folder"});if(n&&n.length>0){let i=n.map(s=>{try{return this._workspaceManager.addExternalSourceFolder(s),null}catch(o){return this._logger.error("Failed to add source folder:",o),o instanceof Error?{path:s.fsPath,message:o.message}:{path:s.fsPath,message:String(o)}}}).filter(s=>s!==null);i.length>0&&pQ.window.showErrorMessage(`One or more source folders could not be added:
`+i.map(s=>`${s.path}: ${s.message}`).join(`
`))}break}case"ws-context-remove-source-folder":{try{this._workspaceManager.removeExternalSourceFolder(r.data)}catch(n){let i=n;n instanceof Error&&(i=n.message),this._logger.error("Failed to remove source folder:",i),pQ.window.showErrorMessage(`Failed to remove source folder ${r.data}:
 ${String(i)}`)}break}case"ws-context-user-requested-refresh":{this._workspaceManager.refreshSourceFolders();break}}}};var X8=1,Za=class extends Error{constructor(t){super(t),this.name="ToolConfigError"}};var zx=class extends Za{constructor(t){super(`Failed to parse tool config: ${t}`),this.name="ToolConfigParseError"}};var mQ=class e extends Zs{constructor(r,n,i,s,o,a,l=ds.window.createWebviewPanel(e.viewType,"Augment Settings",ds.ViewColumn.Active,{retainContextWhenHidden:!0,enableScripts:!0})){super("settings.html",l.webview);this._extensionUri=r;this._extension=n;this._apiServer=i;this._config=s;this._guidelinesWatcher=o;this._navigateTo=a;this._panel=l;this._store=this._extension.toolConfigStore,this._featureFlagManager=this._extension.featureFlagManager,this._panel.iconPath={light:ds.Uri.joinPath(this._extensionUri,"media","panel-icon-light.svg"),dark:ds.Uri.joinPath(this._extensionUri,"media","panel-icon-dark.svg")},this._panel.onDidDispose(()=>{this.dispose()}),this.addDisposables(this._panel,new ds.Disposable(()=>{e.currentPanel=void 0}),aM(c=>{this._postMessage({type:"orientation-status-update",data:c})})),this.addDisposable(this._panel.webview.onDidReceiveMessage(async c=>{try{await this._extension.workTimer.runTimed(c.type,()=>this._handleMessage(c))}catch(u){this._handleError(u)}})),this._extension.workspaceManager&&(this._workspaceUiModel=new Uv(this._extension.workspaceManager,this._panel.webview,this._extension.featureFlagManager,this._extension.workTimer),this.addDisposable(this._workspaceUiModel)),this.loadHTML(r)}static viewType="augmentSettingsPanel";_log=j("SettingsWebviewPanel");static currentPanel;_workspaceUiModel=null;static mcpServersKey="mcpServers";_store;_featureFlagManager;dispose=()=>{this._panel.dispose(),e.currentPanel=void 0,super.dispose()};navigateToSection(r){this._postMessage({type:"navigate-to-settings-section",data:r})}_handleError(r){r instanceof Za?ds.window.showErrorMessage(r.message):ds.window.showErrorMessage(`Unexpected error: ${He(r)}`)}async _handleMessage(r){switch(r.type){case"settings-panel-loaded":this._handleSettingsPanelLoaded();break;case"tool-config-loaded":await this._handleConfigLoaded();break;case"tool-config-save":await this._handleConfigSave(r.data);break;case"tool-config-get-definitions":await this._handleGetDefinitions(r);break;case"tool-config-start-oauth":await this._handleStartOAuth(r.data);break;case"tool-config-revoke-access":await this._handleRevokeAccess(r.data);break;case"get-stored-mcp-servers":await this._handleGetStorageValue();break;case"set-stored-mcp-servers":await this._handleSetStorageValue(r.data);break;case"execute-initial-orientation":await this._handleExecuteInitialOrientation();break;case"get-orientation-status":this._handleGetOrientationStatus();break;case"update-user-guidelines":tg.updateUserGuidelines(r.data);break;case"get-terminal-settings":await this._handleGetTerminalSettings();break;case"update-terminal-settings":await this._handleUpdateTerminalSettings(r.data);break}}_handleSettingsPanelLoaded(){setTimeout(()=>{this._navigateTo&&this.navigateToSection(this._navigateTo)},500)}async _handleConfigLoaded(){try{let r=await this._store.get(),n=this._getEnableAgentMode(),i=!!this._featureFlagManager.currentFlags.memoriesParams.enable_initial_orientation,s=[],o=[];n&&(s=await(this._extension.toolsModel?.getToolStatusForSettingsPanel()??Promise.resolve([])),o=r.tools.map(l=>({config:JSON.stringify(l.config,null,2),isConfigured:l.isConfigured,name:l.name})));let a=this._guidelinesWatcher.getGuidelinesStates();await this._postMessage({type:"tool-config-initialize",data:{toolConfigs:o,hostTools:s,enableDebugFeatures:this._config.config.enableDebugFeatures,settingsComponentSupported:{workspaceContext:!0,mcpServerList:!0,mcpServerImport:!0,orientation:!0,remoteTools:!0,userGuidelines:this._featureFlagManager.currentFlags.enableGuidelines,terminal:!0},enableAgentMode:n,enableInitialOrientation:i,userTier:this._extension.userTier,guidelines:a}}),await this._handleGetStorageValue()}catch(r){this._handleError(r)}}async _handleConfigSave(r){try{let n=await this._store.get(),i;try{i=JSON.parse(r.toolConfig)}catch(a){throw this._log.error(`Failed to parse tool config: ${He(a)}`),new zx(He(a))}let s={config:i,isConfigured:r.isConfigured,name:r.toolName},o=n.tools.findIndex(a=>a.name===r.toolName);o>=0?n.tools[o]=s:n.tools.push(s),await this._store.save(n)}catch(n){throw this._log.error(`Error saving tool configuration: ${He(n)}`),new zx(He(n))}}async _handleGetDefinitions(r){let n=!!r?.data?.useCache,i=[];this._getEnableAgentMode()&&(i=await(this._extension.toolsModel?.getToolStatusForSettingsPanel(n)??Promise.resolve([]))),await this._postMessage({type:"tool-config-definitions-response",data:{hostTools:i}})}async _handleStartOAuth(r){let n=!1;try{let i=r.authUrl,s=ds.Uri.parse(i);n=await ds.env.openExternal(s),n||this._log.warn(`Failed to open URL: ${i}`)}catch(i){this._log.error(`Error opening URL: ${He(i)}`)}finally{await this._postMessage({type:"tool-config-start-oauth-response",data:{ok:n}})}}async _handleRevokeAccess(r){try{let i=(await(this._extension.toolsModel?.getToolStatusForSettingsPanel()??Promise.resolve([]))).find(s=>s.identifier.hostName===r.toolId.hostName&&s.identifier.toolId===r.toolId.toolId);if(i&&i.identifier.hostName===Gi.remoteToolHost){let s=i.identifier.toolId;this._log.info(`Revoking access for remote tool: ${i.definition.name} (${s})`);let o;try{o=await this._apiServer.revokeToolAccess(s)}catch(a){this._log.error(`API error revoking access: ${He(a)}`),ds.window.showErrorMessage(`Error revoking access: ${He(a)}`);return}switch(o.status){case 3:this._log.info(`Successfully revoked access for ${i.definition.name} (${s}).`),await this._handleGetDefinitions();break;case 4:this._log.info(`Tool ${i.definition.name} (${s}) has no access to revoke.`),await this._handleGetDefinitions();break;case 1:this._log.warn(`Revoking access is not implemented for ${i.definition.name} (${s}).`),ds.window.showWarningMessage(`Revoking access is not implemented for ${i.definition.name} (${s}).`);break;case 2:throw new Za(`Tool not found: ${i.definition.name} (${s}).`);case 5:throw new Za(`Failed to revoke access for ${i.definition.name} (${s}).`);default:throw new Za(`Unknown status (${o.status}) when revoking access for ${i.definition.name} (${s}).`)}}else throw new Za(`Tool not found: ${r.toolId.hostName} ${r.toolId.toolId}`)}catch(n){this._log.error(`Error revoking access: ${He(n)}`),this._handleError(n)}}async _handleGetStorageValue(){try{let r=await this._store.getMCPServers();await this._postMessage({type:"get-stored-mcp-servers-response",data:r})}catch(r){this._log.error(`Error getting storage value: ${He(r)}`),this._handleError(r)}}async _handleSetStorageValue(r){try{await this._store.saveMCPServers(r)}catch(n){this._log.error(`Error setting storage value: ${He(n)}`),this._handleError(n)}}async _postMessage(r){try{return await this._panel.webview.postMessage(r),!0}catch(n){return this._log.error(`Failed to post message to webview: ${He(n)}`),!1}}async _handleExecuteInitialOrientation(){try{await ds.commands.executeCommand(kv.commandID)}catch(r){this._log.error(`Failed to execute initial orientation: ${He(r)}`),this._handleError(r)}}_getEnableAgentMode(){return gr(this._featureFlagManager.currentFlags.vscodeAgentModeMinVersion??"")}_handleGetOrientationStatus(){try{Vu()}catch(r){this._log.error(`Failed to get orientation status: ${He(r)}`),this._handleError(r)}}async _handleGetTerminalSettings(){try{let r=await this._store.getTerminalSettings();await this._postMessage({type:"terminal-settings-response",data:r})}catch(r){this._log.error(`Failed to get terminal settings: ${He(r)}`),this._handleError(r)}}async _handleUpdateTerminalSettings(r){try{r.selectedShell&&await this._store.updateSelectedShell(r.selectedShell),r.startupScript!==void 0&&await this._store.updateStartupScript(r.startupScript);let n=await this._store.getTerminalSettings();await this._postMessage({type:"terminal-settings-response",data:n})}catch(n){this._log.error(`Failed to update terminal settings: ${He(n)}`),this._handleError(n)}}static createOrShow(r,n,i,s,o,a){return e.currentPanel?(e.currentPanel._panel.reveal(),e.currentPanel):(e.currentPanel=new e(r,n,i,s,o,a),e.currentPanel)}};var AQ=class extends At{constructor(r,n,i,s,o){super("Show Settings Panel",!0);this._extensionUri=r;this._extension=n;this._apiServer=i;this._config=s;this._guidelinesWatcher=o}static commandID="vscode-augment.showSettingsPanel";type="public";run(r){let n=mQ.createOrShow(this._extensionUri,this._extension,this._apiServer,this._config,this._guidelinesWatcher,r);r&&n.navigateToSection(r)}};var yQ=class extends At{constructor(r){super();this._chatExtensionEvent=r}static commandID="vscode-augment.startNewChat";type="public";async run(){await Af("Start chat command"),this._chatExtensionEvent.fire("newThread")}};var Pwe=q(require("vscode"));var Ov=class extends At{static commandID="_vscode-augment.statusbarClick";type="private";constructor(){super(void 0,!1)}async run(){await Pwe.commands.executeCommand("augment-chat.focus")}};var Jx=require("vscode");var vQ=class e extends sa{constructor(r,n){super(n,()=>this._configListener.config.completions.enableAutomaticCompletions?"Turn Automatic Completions Off":"Turn Automatic Completions On");this._configListener=r}static commandID="vscode-augment.toggleAutomaticCompletionSetting";static autoCompletionsConfigKey="completions.enableAutomaticCompletions";type="public";run(){let r=Jx.workspace.getConfiguration("augment"),n=r.inspect(e.autoCompletionsConfigKey),i=Jx.ConfigurationTarget.Global;n?.workspaceValue!==void 0&&(i=Jx.ConfigurationTarget.Workspace),r.update(e.autoCompletionsConfigKey,!this._configListener.config.completions.enableAutomaticCompletions,i)}canRun(){return super.canRun()}};function Lwe(e,t,r,n,i,s,o,a,l,c,u,f,p,g){let m=new YM(r);return m.registerGroup("",[new km(n,i,km.signInCommandID,"$(sign-in) Sign In"),new Ji,new eQ(f,r,t)]),m.registerGroup("Completions",[new sQ(t,f),new vQ(r,f)]),m.registerGroup("Code Instruction",[new av(t,e.extensionUri,s,t.guidelinesWatcher,f)]),m.registerGroup("Chat",[new ug(t,r,u,f),new Dv(t,r,u,f),new yQ(u),new Tv(t,r,u,f),new Rv(t,r,u,f),new b1(u,p,g),new kv(t,s,f),new AQ(e.extensionUri,t,s,r,t.guidelinesWatcher)]),m.registerGroup("Next Edit Suggestions",[new Wc(t,r,f),new Gc(t,r,f),new Qm(t,r,f),new Nm(t,r,f),new Xu(t,r,f),new Lm(t,r,f),new Pm(t,r,f),new ca(t,r,f),new x1(t,r,f),new T1(t,r,f),new w1(t,r,f),new fg(t,r,f),new qx(t,r,f),new Q1(t,r,f),new F1(t,r,f),new N1(t,r,f,p),new J1(t,r),new S1(t,r,f),new I1(t,r,f),new B1(t,r,f),new yf(t,r,f),new D1(t,r,f),new ed(t,r,f),new k1(t,r,f),new R1(t,r,f),new Ro(t,r,f),new Fv(t,r,f)]),m.registerGroup("Debug",[new rQ(t,r),new oQ(t,r),new Vm(t.featureFlagManager),new X1(t.featureFlagManager),new lQ(r,p)]),m.registerGroup("",[new cQ,new uQ,new tQ(f,r,t),new dQ,new hQ(e.extensionUri,r,s,o,a,l,t.workTimer),new j1(s),new _f(t,_f.commandIDCommunity),new _f(t,_f.commandIDProfessional),new _f(t,_f.commandIDEnterprise),new km(n,i,km.signOutCommandID,"$(sign-out) Sign Out"),new P1(t,r,f)]),r.config.autofix.enabled&&r.config.autofix.autofixUrl&&m.register([new E1(t,s)]),m.register([new gQ(t,e,m),new M1(t,r,f),new Iv(t.featureFlagManager,c),new iQ(t,s,r),new jM(t,e.extensionUri,s),new lv,new cv,new uv,new dv,new fv,new hv,new Ov]),m}var CQ=class e{constructor(t,r,n,i,s=e.chunkSize){this._apiServer=t;this._completionTimeoutMs=r,this._completionParams={prefixSize:n,suffixSize:i,chunkSize:s}}static chunkSize=1024;_completionTimeoutMs;_completionParams;createRequestId(){return this._apiServer.createRequestId()}get completionParams(){return this._completionParams}async complete(t,r,n,i,s,o,a,l,c,u,f,p,g){let m=await this._apiServer.complete(t,r,n,i,s,o,a,l,c,u,f,p,g);return m.completionTimeoutMs!==void 0&&(this._completionTimeoutMs=m.completionTimeoutMs),m.suggestedPrefixCharCount!==void 0&&(this._completionParams.prefixSize=m.suggestedPrefixCharCount),m.suggestedSuffixCharCount!==void 0&&(this._completionParams.suffixSize=m.suggestedSuffixCharCount),m.suggestedPrefixCharCount!==void 0&&(this._completionParams.chunkSize=e.chunkSize),m}};var qwe=q(Cs()),Jc=q(require("vscode"));var xf=class{constructor(t,r,n,i){this.completionText=t;this.suffixReplacementText=r;this.skippedSuffix=n;this.range=i}toString(){return`text: ${this.completionText}
    suffixReplacementText: ${this.suffixReplacementText}
    skippedSuffix: ${this.skippedSuffix}
    start: ${this.range.startOffset}
    end: ${this.range.endOffset}`}};function bQ(e,t,r){let n="",i=t.completionText,s=e.document,o=s.offsetAt(r)-t.range.startOffset;return o<0?n=e.prefix.slice(o):i=i.slice(o),new xf(n+i,t.suffixReplacementText,t.skippedSuffix,{startOffset:s.offsetAt(r),endOffset:t.range.endOffset})}function Uwe(e,t){return`context:
    text: ${t.selectedCompletionInfo?.text}
    range: ${qv(e,t.selectedCompletionInfo?.range)}
    triggerKind: ${t.triggerKind}`}function Owe(e){return`context:
    text: ${e.triggerCharacter}
    triggerKind: ${e.triggerKind}`}function mg(e,t){return`ln: ${t.line} ch: ${t.character} offset: ${e.offsetAt(t)}`}function qv(e,t){return t===void 0?"<undefined>":`start: ${mg(e,t.start)} -> end: ${mg(e,t.end)}`}function EQ(e,t){return t?`${e}'${t}'`:""}var Vv=class{constructor(t){this._config=t;this._documentation.isTrusted=!0}_logger=j("CompletionItemsProvider");_documentation=new Jc.MarkdownString(`This is a suggestion from Augment.

You can let us know about good or bad suggestions via [the History Panel](command:vscode-augment.showHistoryPanel).`);static triggerCharacters=[".",":"];static languageSelector=["python","typescript","javascript","java","go","rust","c","cpp","php","csharp","ruby","bash","html","css","scss","less","sass","json","yaml","markdown","xml","sql","swift","kotlin","objective-c","perl","scala","lua","groovy","powershell","*"];async provideCompletionItems(t,r,n,i){if(this._logger.debug(`Pop-Up Request - ${t.uri.toString()} ${mg(t,r)}${EQ(" ",i.triggerCharacter)}`),this._logger.verbose(Owe(i)),i.triggerKind===Jc.CompletionTriggerKind.TriggerCharacter)return this._logger.debug("Returning no completions because trigger kind was a trigger character"),[];if(!this._config.config.completions.enableAutomaticCompletions)return this._logger.debug("Automatic completions are disabled"),[];let s,o;try{return await Promise.race([this._getCompletions(t,r,n),new Promise(a=>{let c=(0,qwe.debounce)(()=>{this._logger.warn("Failed to find completions in time"),a([])},this._config.config.completions.timeoutMs,{maxWait:this._config.config.completions.maxWaitMs});o=Wm(()=>{c()}),s=c,c()})])}finally{o?.dispose(),s?.cancel()}}_getCompletionSuffix(t,r){let n=r.substring(t.length,t.length+50);if(n.length===0)return"";let i=n.match(/^[^{}\[\]\(\)"`'<>]+/);return i?i[0]===n?n:i[0]+"\u2026":"\u2026"}async _getCompletions(t,r,n){let i=await Ou(zc);if(!this._config.config.completions.enableQuickSuggestions)return this._logger.debug("Enable IntelliSense suggestion is disabled"),[];if(!i)return this._logger.debug("No completion request"),[];if(t!==i.document)return this._logger.debug(`Completion request document does not match the current document.     current document: ${t.uri.toString()}     completion request document: ${i.document.uri.toString()}`),[];let s=[];for(let o of i.completions){this._logger.verbose(`AugmentCompletion: ${o.toString()}`);let a=t.getWordRangeAtPosition(r)?.start??r,l=bQ(i,o,a),c=t.offsetAt(r);if(c<l.range.startOffset||c>l.range.endOffset){this._logger.debug(`Inline provider event does not satisfy this requests position.     completion item: ${mg(t,r)}    inline provider event: ${l.range.startOffset} => ${l.range.endOffset}}`);continue}let u=t.offsetAt(r)-t.offsetAt(a),f=(l.completionText+l.suffixReplacementText).slice(u),p=f.split(/[^a-zA-Z0-9_]/).shift()??"",g=new Jc.Range(a,r),y=t.getText(g)+p+this._getCompletionSuffix(p,f),v=new Jc.CompletionItem(y);v.insertText=l.completionText+l.suffixReplacementText;let C=new Jc.Range(t.positionAt(l.range.startOffset),t.positionAt(t.offsetAt(r)+l.skippedSuffix.length));v.range={inserting:C,replacing:C},v.preselect=!1,v.kind=Jc.CompletionItemKind.Snippet,v.detail="Augment",v.documentation=this._documentation,v.keepWhitespace=!0,this._logger.debug(`insert: ${v.insertText}
label: ${y}
position: ${mg(t,r)}
inserting: ${qv(t,v.range.inserting)}
replacing: ${qv(t,v.range.replacing)})}`),s.push(v)}return n.isCancellationRequested?(this._logger.debug("Completion cancelled"),[]):s}};var e6=q(require("vscode"));var jx=class extends Error{constructor(r){super(`Configured model "${r}" is not available`);this.modelName=r}};var _Q=class extends Error{constructor(){super("No models available")}},Ag=class extends Error{constructor(t="Skipping inline completion."){super(t)}};function fCt(e,t){return r=>{let n=performance.now()-e;return t(Math.round(n)),r}}function Vwe(e,t){return(...r)=>{let n=performance.now(),i=fCt(n,t),s=e(...r);return s instanceof Promise?s.then(i):i(s)}}var xQ=class{constructor(t,r,n){this._extension=t;this._configListener=r;this._metricsReporter=n;this.generateCompletion=Vwe(this.generateCompletion.bind(this),i=>{this._metricsReporter.report({client_metric:"generate_completion_latency",value:i})})}_logger=j("CompletionsModel");_completionSerial=0;async generateCompletion(t,r,n){let i=this._extension.workspaceManager;if(i===void 0)return;let s=i.completionServer,o=s.createRequestId(),a=i.safeResolvePathName(t.uri);if(a===void 0)return;let[l,c]=[a.rootPath,a.relPath],u=t.offsetAt(r),[f,p,g,m,y]=this._extractPrefixAndSuffix(t,u);u+=y;let v={prefixBegin:g,cursorPosition:u,suffixEnd:m},E=(await this._requestCompletion(i,s,o,t,f,p,v,a,n)).completionItems;if(E.length===0)return{completions:[],document:t,requestId:o,repoRoot:l,pathName:c,prefix:f,suffix:p,occuredAt:new Date,isReused:!1};E.length>1&&this._logger.warn("Multiple completions not supported, ignoring all but the first");let w=[],R=E[0];return R.skippedSuffix.includes(`
`)&&(this._logger.debug("Skipped suffix spans multiple lines, dropping it"),R.skippedSuffix="",R.suffixReplacementText=""),w.push(new xf(R.text,R.suffixReplacementText,R.skippedSuffix,{startOffset:t.offsetAt(r),endOffset:t.offsetAt(r)})),this._logger.debug(`Returning ${w.length} completion(s)`),{occuredAt:new Date,completions:w,document:t,requestId:o,repoRoot:l,pathName:c,prefix:f,suffix:p,isReused:!1}}async _requestCompletion(t,r,n,i,s,o,a,l,c){let u=i.languageId;if(this._configListener.config.completions.disableCompletionsByLanguage.has(u))throw new Ag(`Language ${u} is disabled.`);let p=this._completionSerial++;this._logger.debug(`Requesting new completion - #${p} submitted; requestId: ${n}`);let g=t.translateRange(l,a.prefixBegin,a.suffixEnd),m=g===void 0?a:{prefixBegin:g.beginOffset,cursorPosition:a.cursorPosition,suffixEnd:g.endOffset},y=t.getContext(),v=y.blobs,C=this._getRecentChanges(y),w=t.getEnableCompletionFileEditEvents()?t.getFileEditEvents():void 0;try{let B=await r.complete(n,s,o,l.relPath,g?.blobName,m,u,v,C,w,void 0,void 0,c);return B.unknownBlobNames.length>0&&t.handleUnknownBlobs(y,B.unknownBlobNames),B.checkpointNotFound&&t.handleUnknownCheckpoint(n,v.checkpointId),hCt(B.completionItems,o,this._logger),this._extension.updateModelInfo(B),B.completionItems=B.completionItems.filter(R=>(R.text+R.suffixReplacementText).length>0),B}catch(B){if(Sr.isAPIErrorWithStatus(B,$e.cancelled))throw this._logger.debug(`Completion #${p} cancelled in back end; requestId ${n}`),new Ag("Cancelled in back end");if(Sr.isRetriableAPIError(B))throw this._logger.debug(`Completion #${p} retriable error on back end; requestId ${n}`),new Ag("Retriable error on back end");let R=He(B);throw this._logger.warn(`Completion #${p} failed: ${R}; requestId ${n}`),B}}_extractPrefixAndSuffix(t,r){let n=this._extension.modelInfo,i=n.suggestedPrefixCharCount,s=n.suggestedSuffixCharCount,[o,a]=jCe(t);o!==void 0&&(r+=a);let l=Math.max(0,r-i),c=r+s;if(o!==void 0){let E=o.slice(l,r),w=o.slice(r,c);return[E,w,l,r+w.length,a]}let u=t.positionAt(l),f=t.positionAt(r),p=t.positionAt(r),g=t.positionAt(c),m=new e6.Range(u,f),y=new e6.Range(p,g),v=t.getText(m),C=t.getText(y);return[v,C,l,r+C.length,0]}_getRecentChanges(t){let r=t.recentChunks,n=t.lastChatResponse;if(n!==void 0){let i={seq:n.seq,uploaded:!1,repoRoot:"",pathName:"",blobName:"",text:n.text,origStart:0,origLength:0,expectedBlobName:""},s=r.findIndex(o=>o.seq<i.seq);s<0&&(s=r.length),r=r.slice(0,s).concat([i]).concat(r.slice(s))}return jy(r)}};function hCt(e,t,r){for(let n of e)t.startsWith(n.skippedSuffix)||(r.warn(`Skipped suffix does not match the actual suffix. Skipped suffix: ${n.skippedSuffix}. First ${n.skippedSuffix.length} characters of suffix: ${t.substring(0,n.skippedSuffix.length)}`),n.suffixReplacementText="",n.skippedSuffix="")}var yg=q(require("vscode"));var Gm=class{constructor(t){this._statusBar=t}_state;setState(t){return this.dispose(),this._state=this._statusBar.setState(t),this._state}dispose(){this._state?.dispose()}};var Zx=require("vscode");var wQ=(i=>(i[i.high=0]="high",i[i.medium=1]="medium",i[i.low=2]="low",i[i.neutral=3]="neutral",i))(wQ||{}),t6=Object.values(wQ).filter(e=>typeof e=="number").sort();var Hv={background:new Zx.ThemeColor("statusBarItem.warningBackground"),foreground:new Zx.ThemeColor("statusBarItem.warningForeground")},r6={background:new Zx.ThemeColor("statusBarItem.errorBackground"),foreground:new Zx.ThemeColor("statusBarItem.errorForeground")},Hwe={priority:3,tooltip:"Augment",icon:"$(augment-icon-simple)"},Wwe={priority:3,tooltip:"Open Augment",icon:"$(augment-icon-smile)"},Gwe={priority:0,tooltip:"Sign in to start using Augment",icon:"$(augment-icon-simple)",colors:Hv},$we={priority:2,tooltip:"Augment is indexing your codebase",icon:"$(sync)"},Ywe={priority:0,tooltip:"No API token",icon:"$(augment-icon-simple)",colors:Hv},Kwe={priority:0,tooltip:"No completion URL",icon:"$(augment-icon-simple)",colors:Hv},zwe={priority:2,tooltip:"Initializing Augment",icon:"$(loading~spin)"},Jwe={priority:0,tooltip:"Authentication failed, please sign in again",icon:"$(augment-icon-simple)",colors:Hv},jwe={priority:0,tooltip:"Authentication failed, please check your API token and completion URL",icon:"$(augment-icon-simple)",colors:Hv},Zwe={priority:0,tooltip:"The completion URL setting is invalid. Please enter a valid value",icon:"$(augment-icon-simple)",colors:Hv},Xwe={priority:2,tooltip:"Automatic completions are off",icon:"$(augment-icon-closed-eyes)"},eSe={priority:1,tooltip:"Enhancements are off",icon:"$(augment-icon-simple)"},n6={priority:0,tooltip:"Cannot connect to Augment",icon:"$(augment-icon-simple)",colors:r6},tSe={priority:0,tooltip:"Failed to generate completion",icon:"$(augment-icon-simple)",colors:r6},rSe={priority:1,tooltip:"Generating completion",icon:"$(augment-icon-dots)"},nSe={priority:2,tooltip:"No completions generated",icon:"$(augment-icon-zero)"},iSe={priority:0,tooltip:"Failed to generate suggestions",icon:"$(augment-icon-simple)",colors:r6},sSe={priority:1,tooltip:"Generating suggestions",icon:"$(augment-icon-dots)"},oSe={priority:2,tooltip:"No suggestions generated",icon:"$(augment-icon-zero)"},aSe={priority:0,tooltip:"Workspace indexing is disabled",icon:"$(circle-slash)"};var SQ=class{rpcStart;rpcEnd;constructor(){}};var IQ=class extends SQ{requestStart;emitTime;constructor(t=Date.now(),r,n,i){super(),this.requestStart=t,this.rpcStart=r,this.rpcEnd=n,this.emitTime=i}isComplete(){return[this.rpcStart,this.rpcEnd,this.emitTime].every(r=>r!==void 0)}};var ew=q(require("vscode"));var BQ=class extends X{constructor(r){super();this._metricsReporter=r;this.addDisposables(ew.workspace.onDidChangeTextDocument(n=>{this._onTextDocumentChange(n)}),ew.window.onDidChangeActiveTextEditor(()=>{this._rejectPendingCompletion()}),ew.window.onDidChangeWindowState(()=>{this._rejectPendingCompletion()}),zc(n=>{n&&this._onNewCompletion(n)}))}_logger=j("PendingCompletion");_pendingCompletion;getPendingCompletion(r,n){if(!this._pendingCompletion){this._logger.verbose("No previous completion to use");return}if(this._pendingCompletion.document!==r){this._logger.debug(`Not reusing previous completion as documents differ ${this._pendingCompletion.document.uri.toString()} vs ${r.uri.toString()}`),this._rejectPendingCompletion();return}let i=this._pendingCompletion.completion,s=r.offsetAt(n),o=i.range.endOffset+this._pendingCompletion.added;if(s<i.range.startOffset){this._logger.debug(`Not reusing previous completion as position is before completion: ${s} vs
                ${i.range.startOffset}`),this._rejectPendingCompletion();return}if(s>o){this._logger.debug(`Not reusing previous completion as position is after completion: ${s} vs
                ${o}`),this._rejectPendingCompletion();return}let a=i.skippedSuffix,l=i.completionText,c=i.suffixReplacementText;this._pendingCompletion.deleted>0&&(a=a.slice(this._pendingCompletion.deleted)),a===""&&(l=l+c,c="");let u=new xf(l,c,a,{startOffset:i.range.startOffset,endOffset:o});return this._logger.verbose(`Reusing pending completion: ${u.completionText}`),{...this._pendingCompletion,completions:[u],isReused:!0}}_onNewCompletion(r){let{completions:n,requestId:i}=r;if(this._pendingCompletion?.requestId===i)return;if(!n.length){this._logger.verbose(`No completions in ${i}`),this._rejectPendingCompletion();return}if(n.length!==1){this._logger.warn(`Unable to handle multiple completions, received ${n.length}`),this._rejectPendingCompletion();return}let s=this._findLastMatches(n[0]);if(!s){this._logger.verbose(`Skipped suffix is not a subsequence of the suffix replacement text:
                ${n[0].skippedSuffix} !<= ${n[0].suffixReplacementText}`),this._rejectPendingCompletion();return}this._logger.verbose(`Registering pending completion: ${n[0].completionText}`),this._pendingCompletion={...r,completion:this._stripCommonSkippedSuffix(n[0]),added:0,deleted:0,suffixMatches:s,emitTime:Date.now()}}_findLastMatches(r){let n=r.skippedSuffix,i=r.suffixReplacementText,s=[],o=n.length-1,a=i.length-1;for(;o>=0&&a>=0;)n[o]===i[a]&&(s.push(a),o--),a--;if(!(o>=0))return s.reverse()}_stripCommonSkippedSuffix(r){let n=r.skippedSuffix,i=r.suffixReplacementText,s=0;for(;s<n.length&&s<i.length&&n[n.length-1-s]===i[i.length-1-s];)s++;return s===0?r:new xf(r.completionText,i.slice(0,-s),n.slice(0,-s),r.range)}_onTextDocumentChange(r){if(!this._pendingCompletion||this._pendingCompletion.document!==r.document||r.contentChanges.length===0)return;if(r.contentChanges.length>1){this._logger.verbose(`Unexpected number of content changes: ${r.contentChanges.length}`),this._rejectPendingCompletion();return}let n=this._normalizeChange(r.contentChanges[0]);if(!n){this._logger.verbose(`Unexpected content change: ${JSON.stringify(r.contentChanges[0])}`),this._rejectPendingCompletion();return}let i=this._pendingCompletion.added,s=this._pendingCompletion.deleted,o=this._pendingCompletion.completion,a=n.rangeOffset+n.rangeLength,l=o.range.startOffset+i,c=a-l,u=l-n.rangeOffset;if(c<0||u<0){this._logger.verbose(`Change would delete or unadd negative characters: ${a} - ${l} < 0
                    or ${l} - ${n.rangeOffset} < 0`),this._rejectPendingCompletion();return}s+=c,i-=u;let f=o.completionText+o.suffixReplacementText,p=n.text.length,g=f.slice(i,i+p);if(n.text.slice(0,g.length)!==g){this._logger.verbose(`Pending completion mismatch: ${n.text} vs ${g}`),this._rejectPendingCompletion();return}if(i+=p,s<this._pendingCompletion.suffixMatches.length){let m=this._pendingCompletion.suffixMatches[s];if(i>o.completionText.length+m){this._logger.verbose(`Remaining skipped suffix is not a subsequence of the remaining suffix replacement text:
                    ${o.skippedSuffix.slice(s)} !<= ${f.slice(i)}`),this._rejectPendingCompletion();return}}this._pendingCompletion.added=i,this._pendingCompletion.deleted=s,this._pendingCompletion.added>=f.length&&this._pendingCompletion.deleted>=o.skippedSuffix.length?this._acceptPendingInlineCompletion():(this._pendingCompletion.added>=f.length||this._pendingCompletion.deleted>o.skippedSuffix.length)&&this._rejectPendingCompletion()}_normalizeChange(r){if(!this._pendingCompletion)return;let n=this._pendingCompletion.completion,i=this._pendingCompletion.added,s=this._pendingCompletion.deleted;if(r.rangeOffset<n.range.startOffset){let a=n.range.startOffset-r.rangeOffset;return a>r.rangeLength?void 0:{rangeLength:r.rangeLength-a,rangeOffset:r.rangeOffset+a,text:r.text.slice(a)}}let o=n.range.startOffset+i;if(r.rangeOffset>o){let a=r.rangeOffset-o;return s+a>n.skippedSuffix.length?void 0:{rangeLength:r.rangeLength+a,rangeOffset:r.rangeOffset-a,text:n.skippedSuffix.slice(s,s+a)+r.text}}return{rangeLength:r.rangeLength,rangeOffset:r.rangeOffset,text:r.text}}_rejectPendingCompletion(){this._pendingCompletion&&(J8({requestId:this._pendingCompletion.requestId,acceptedIdx:-1,document:this._pendingCompletion.document}),Ef(!1),this._logger.debug(`Rejecting completion: ${this._pendingCompletion.requestId}`),this._metricsReporter.reportResolution(this._pendingCompletion.requestId,this._pendingCompletion.emitTime,Date.now(),void 0),this._pendingCompletion=void 0)}_acceptPendingInlineCompletion(){this._pendingCompletion&&(J8({requestId:this._pendingCompletion.requestId,acceptedIdx:0,document:this._pendingCompletion.document}),Ef(!1),this._logger.debug(`Accepting completion: ${this._pendingCompletion.requestId}`),this._metricsReporter.reportResolution(this._pendingCompletion.requestId,this._pendingCompletion.emitTime,Date.now(),0),this._pendingCompletion=void 0)}};var $m=q(require("vscode"));var DQ=class extends X{_logger=j("SuppressDeletedCompletions");_inProgressDeletion=void 0;_prevCompletions=void 0;constructor(){super(),this.addDisposables($m.workspace.onDidChangeTextDocument(t=>{this._onTextDocumentChange(t)}),$m.window.onDidChangeActiveTextEditor(t=>{this._resetDeletions(t)}))}_onTextDocumentChange(t){if(t.document.uri.scheme!=="file"&&!Bo(t.document.uri)||t.contentChanges.length===0)return;if(this._inProgressDeletion===void 0||t.contentChanges.length!==1||t.contentChanges[0].text.length>0||t.document!==this._inProgressDeletion.document){this._inProgressDeletion={document:t.document,preDeletionDocumentText:t.document.getText(),prevDeletionRange:void 0,prevDeletionText:void 0,curDocumentText:t.document.getText()},this._prevCompletions=[];return}(this._inProgressDeletion.prevDeletionRange===void 0||!this._areAdjacentDeletions(t.contentChanges[0].range,this._inProgressDeletion.prevDeletionRange))&&(this._inProgressDeletion.preDeletionDocumentText=this._inProgressDeletion.curDocumentText);let r=this._inProgressDeletion.curDocumentText.substring(t.contentChanges[0].rangeOffset,t.contentChanges[0].rangeOffset+t.contentChanges[0].rangeLength);this._inProgressDeletion.prevDeletionRange=t.contentChanges[0].range,this._inProgressDeletion.prevDeletionText=r,this._inProgressDeletion.curDocumentText=t.document.getText()}_areAdjacentDeletions(t,r){return t.end.isEqual(r.start)||t.start.isEqual(r.start)}_resetDeletions(t){if(this._prevCompletions=[],t===void 0){this._inProgressDeletion=void 0;return}this._inProgressDeletion={document:t.document,preDeletionDocumentText:t.document.getText(),prevDeletionRange:void 0,prevDeletionText:void 0,curDocumentText:t.document.getText()}}processRequest(t){if(!t||!this._inProgressDeletion)return t;let r=t.completions;return this._inProgressDeletion.document===t.document&&(r=t.completions.filter(n=>this._checkIfCompletionWasDeleted(t,n)?(this._logger.debug("Suppressing previously deleted completion"),!1):this._checkIfForwardDeletion(t,n)?(this._logger.debug("Suppressing completion due to forward deletion"),!1):!0)),this._inProgressDeletion.document===t.document&&(this._prevCompletions=[...t.completions]),t.completions=r,t}_checkIfCompletionWasDeleted(t,r){let n=t.document,i=n.getText(new $m.Range(n.positionAt(0),n.positionAt(r.range.startOffset))),s=n.getText(new $m.Range(n.positionAt(r.range.endOffset+r.skippedSuffix.length),n.positionAt(n.getText().length))),o=i+r.completionText+s;return this._inProgressDeletion.preDeletionDocumentText===o}_checkIfForwardDeletion(t,r){if(this._inProgressDeletion.prevDeletionRange)return this._prevCompletions?.some(i=>{let s=this._inProgressDeletion?.document?.positionAt(i.range.endOffset),o=t.document.positionAt(r.range.endOffset);if(!s||!s.isEqual(o))return!1;let a=(i.completionText+i.suffixReplacementText).substring(i.range.endOffset-i.range.startOffset),l=r.completionText+r.suffixReplacementText,c=[a];if(this._inProgressDeletion?.prevDeletionText&&c.push(a+this._inProgressDeletion?.prevDeletionText),!c.some(f=>f===l))return!1;let u=this._inProgressDeletion?.document.positionAt(i.range.endOffset);return u&&this._inProgressDeletion?.prevDeletionRange?.start&&u.isEqual(this._inProgressDeletion.prevDeletionRange.start)})}};var gCt=2e3,TQ=class extends X{constructor(r,n,i,s,o){super();this._completionsModel=r;this._config=s;this._timelineReporter=o;this._pendingCompletions=new BQ(n),this._stateController=new Gm(i),this.addDisposable(this._pendingCompletions),this.addDisposable(this._deletedCompletions),this.addDisposable(yg.window.onDidChangeTextEditorSelection(a=>{a.textEditor.document.uri.scheme==="file"&&Ef(!1)}))}_logger=j("InlineCompletionProvider");_pendingCompletions;_deletedCompletions=new DQ;_stateController;async provideInlineCompletionItems(r,n,i,s){let o=new IQ;if(!this._config.config.completions.enableAutomaticCompletions&&i.triggerKind===yg.InlineCompletionTriggerKind.Automatic)return Ef(!1),[];this._stateController.dispose(),this._logger.debug(`Inline Request - ${r.uri.toString()} ${mg(r,n)}${EQ(" ",i.selectedCompletionInfo?.text)}`),this._logger.verbose(Uwe(r,i));let a=await this._getCompletions(r,n,i,o),l=this._deletedCompletions.processRequest(a);if(s.isCancellationRequested)return this._logger.debug("Completion cancelled"),kwe(),Ef(!1),[];if(Rwe(l),!l)return this._logger.debug("Returning no completions"),Ef(!1),[];o.emitTime=Date.now(),l.isReused||this._timelineReporter.reportCompletionTimeline(l.requestId,o);let c=l.completions.map(u=>{this._logger.verbose(`AugmentCompletion: ${u.toString()}`);let f=new yg.InlineCompletionItem(u.completionText+u.suffixReplacementText,new yg.Range(r.positionAt(u.range.startOffset),r.positionAt(u.range.endOffset+u.skippedSuffix.length)));return this._logger.verbose(`InlineCompletionItem: ${JSON.stringify(f.insertText)} ${qv(r,f.range)}`),f});return c.length>0&&Ef(!0),c}async _getCompletions(r,n,i,s){let o=this._pendingCompletions.getPendingCompletion(r,n);if(o&&o.completions.length>0){let l=this._processCompletionForMode(o,i);return this._logger.debug(`Returning ${l.length} completions`),{...o,completions:l}}if(i.selectedCompletionInfo?.text){this._logger.debug("Returning no completions because the provider request includes selected text that does not match an Augment suggestion");return}let a=this._stateController.setState(rSe);try{let l=await this._completionsModel.generateCompletion(r,n,s);if(l&&l.completions.length===0){let c=this._stateController.setState(nSe);setTimeout(()=>{c.dispose()},gCt)}return l}catch(l){l instanceof Ag||this._stateController.setState(tSe)}finally{a.dispose()}}_processCompletionForMode(r,n){if(!n.selectedCompletionInfo||!n.selectedCompletionInfo.text)return r.completions;let i=n.selectedCompletionInfo.range.start;return r.completions.map(o=>bQ(r,o,i))}};var lSe=q(require("vscode"));var vg=class extends X{constructor(r=100,n=()=>!0){super();this._itemVerifier=n;this._ringBuffer=new lu(r),this.addDisposable(this._newItemEventEmitter)}_ringBuffer;_newItemEventEmitter=new lSe.EventEmitter;get onNewItems(){return this._newItemEventEmitter.event}get items(){return this._ringBuffer.slice()}get mostRecentItem(){return this._ringBuffer.at(-1)}addItem(r){this._itemVerifier(r)&&(this._ringBuffer.addItem(r),this._newItemEventEmitter.fire(r))}};var RQ=class extends vg{constructor(){super(100,t=>t.completions.length>0&&!t.isReused)}};var MQ=q(require("vscode"));var cSe=q(require("crypto"));function Wv(e){let t=cSe.createHash("sha256");return t.update(e),t.digest("hex")}var Gv=class e{constructor(t,r){this.start=t;this.stop=r}equals(t){return this.start===t.start&&this.stop===t.stop}get length(){return this.stop-this.start}toString(){return`[${this.start}, ${this.stop})`}compareTo(t){return this.start-t.start}contains(t){return typeof t=="number"&&(t=new e(t,t+1)),this.start<=t.start&&this.stop>=t.stop&&this.stop>t.start}intersects(t){return typeof t=="number"&&(t=new e(t,t+1)),this.start<t.stop&&this.stop>t.start}touches(t){return typeof t=="number"&&(t=new e(t,t+1)),this.start===t.stop||this.stop===t.start}intersection(t){if(this.intersects(t))return new e(Math.max(this.start,t.start),Math.min(this.stop,t.stop))}distanceTo(t){return typeof t=="number"&&(t=new e(t,t+1)),-Math.min(0,Math.min(this.stop,t.stop)-Math.max(this.start,t.start))}offset(t,r,n=-1/0,i=1/0){let s=Math.min(i,Math.max(n,this.start+t)),o=Math.max(n,Math.min(i,this.stop+r));if(s>o){let a=Math.ceil((this.start+this.stop)/2),l=Math.max(n,Math.min(i,a));return new e(l,l)}return new e(s,o)}static anyOverlaps(t){if(t.length<=1)return!1;t.sort((n,i)=>n.start===i.start?n.stop-i.stop:n.start-i.start);let r=t[0].stop;for(let n=1;n<t.length;n++){if(t[n].start<r)return!0;r=t[n].stop}return!1}static mergeTouching(t){if(t.length<=1)return[...t];let r=[...t].sort((i,s)=>i.start-s.start),n=[r[0]];for(let i=1;i<r.length;i++){let s=n[n.length-1],o=r[i];s.stop>=o.start?s.stop=Math.max(s.stop,o.stop):n.push(o)}return n}},Fo=class extends Gv{},Vn=class extends Gv{};function pCt(e,t){let r=t.text===void 0?"":t.text,n;return t.rangeOffset!==void 0&&t.rangeLength!==void 0?n={start:t.rangeOffset,end:t.rangeOffset+t.rangeLength}:n={start:e.offsetAt(t.range.start),end:e.offsetAt(t.range.end)},{text:r,range:n}}var i6=class{constructor(t,r,n){this._uploadBatchFunction=t;this._batchSize=r;this._maxUploadDelayMs=n}_queue=[];_queueNonEmptyTimer;add(t){if(this._queue.push(t),this._queue.length===1&&(clearTimeout(this._queueNonEmptyTimer),this._queueNonEmptyTimer=setTimeout(()=>{this._uploadBatch()},this._maxUploadDelayMs)),this._queue.length>=this._batchSize){let r=this._queue;this._queue=[];let n={user_events:r};this._uploadBatchFunction(n)}}_uploadBatch(){let t=this._queue;this._queue=[];let r=t.length,n={user_events:t};r!==0&&this._uploadBatchFunction(n),clearTimeout(this._queueNonEmptyTimer)}dispose(){this.stop()}stop(){clearTimeout(this._queueNonEmptyTimer)}},s6=class{constructor(t){this._apiServer=t;this._logger=j("UploadHandler")}_logger;_lastErrorTime;_uploadInterruptPeriodMs=15e3;async uploadUserEvents(t){try{if(this._lastErrorTime?Date.now()-this._lastErrorTime<this._uploadInterruptPeriodMs:!1)return;await this._apiServer.uploadUserEvents(t)}catch(r){throw this._logger.info("Error uploading tracked events",r),this._lastErrorTime=Date.now(),r}}},kQ=class e extends X{constructor(r,n,i,s,o,a=e.defaultUploadBatchSize,l=e.defaultMaxUploadDelayMs){super();this._pathResolver=n;this._recentInstructions=i;this._recentCompletions=s;this._recentNextEditSuggestions=o;this._uploadHandler=new s6(r),this._uploadQueue=new i6(c=>void this._uploadHandler.uploadUserEvents.bind(this._uploadHandler)(c),a,l),this._createSubscriptions(),this.addDisposable(this._uploadQueue)}static defaultUploadBatchSize=128;static defaultMaxUploadDelayMs=5e3;_uploadQueue;_uploadHandler;_createSubscriptions(){this.addDisposable(MQ.workspace.onDidChangeTextDocument(this._processChangeTextDocument.bind(this))),this.addDisposable(this._recentInstructions.onNewItems(this._processInstruction.bind(this))),this.addDisposable(this._recentCompletions.onNewItems(this._processCompletion.bind(this))),this.addDisposable(this._recentNextEditSuggestions.onNewItems(this._processNextEdit.bind(this)))}_processChangeTextDocument(r){let n=r.document.uri.fsPath,i=new Date().toISOString(),s=this._pathResolver.resolvePathName(n);if(s===void 0||r.contentChanges.length===0)return;let o=[];for(let y of r.contentChanges)o.push(pCt(r.document,y));let a=500,l=r.document.getText().length,c=o.map(y=>new Fo(y.range.start,y.range.end)).map(y=>y.offset(-a,a,0,l)),u=Gv.mergeTouching(c),f=u.map(y=>r.document.getText(new MQ.Range(r.document.positionAt(y.start),r.document.positionAt(y.stop)))),p=Wv(new TextEncoder().encode(f.join(""))),g={reason:r.reason,content_changes:o,after_changes_hash:p,source_folder_root:s.rootPath,hash_char_ranges:u.map(y=>({start:y.start,end:y.stop})),after_doc_length:l},m={time:i,file_path:s.relPath,text_edit:g};this._uploadQueue.add(m)}_processInstruction(r){let n={request_id:r.requestId},i={time:r.requestedAt.toISOString(),file_path:r.pathName,edit_request_id_issued:n};this._uploadQueue.add(i)}_processNextEdit(r){let n={request_id:r.requestId},i={time:r.requestTime.toISOString(),file_path:r.qualifiedPathName?.relPath??"",next_edit_request_id_issued:n};this._uploadQueue.add(i)}_processCompletion(r){let n={time:r.occuredAt.toISOString(),file_path:r.pathName??"",completion_request_id_issued:{request_id:r.requestId}};this._uploadQueue.add(n)}};var $v=q(require("vscode"));var o6=class{constructor(t,r,n){this.uri=t;this.diagnostic=r;this.time=n}},a6=class{constructor(t,r,n,i){this.uri=t;this.diagnostic=r;this.charStart=n;this.charEnd=i}};function mCt(e,t){return e.message===t.message&&e.severity===t.severity&&e.range.isEqual(t.range)}var FQ=class e extends X{static _maxDiagnosticsPerFile=10;_diagnostics=new Map;_logger=j("DiagnosticsManager");constructor(){super(),this.addDisposable($v.languages.onDidChangeDiagnostics(t=>{let r=new Date;for(let n of t.uris){if(Bo(n))continue;let i=this._diagnostics.get(n.path),s=$v.languages.getDiagnostics(n).slice(0,e._maxDiagnosticsPerFile),o=[];for(let a of s){if(a.severity!==$v.DiagnosticSeverity.Error&&a.severity!==$v.DiagnosticSeverity.Warning)continue;let l=i?.find(c=>mCt(c.diagnostic,a));l===void 0?o.push(new o6(n,a,r)):o.push(l)}this._diagnostics.set(n.path,o)}}))}async getMostRecentDiagnostics(t,r,n=void 0){let s=Array.from(this._diagnostics.entries()).flatMap(([c,u])=>n!==void 0&&!c.startsWith(n)?[]:u).sort((c,u)=>{let f=u.time.getTime()-c.time.getTime();return f!==0?f:c.diagnostic.severity-u.diagnostic.severity}),o=new Map,a=[],l=new Map;for(let c of s){if(c.diagnostic.range.start.line<0||c.diagnostic.range.start.line>c.diagnostic.range.end.line){this._logger.debug(`Ignoring invalid diagnostic ${c.diagnostic.message} in ${c.uri.path} at ${c.diagnostic.range.start.line}:${c.diagnostic.range.end.line}`);continue}let u=o.get(c.uri.path)??0;if(u<r){if(!l.has(c.uri.path))try{l.set(c.uri.path,await xo(c.uri))}catch{this._logger.debug(`Failed to open document ${c.uri.fsPath}.`);continue}let f=l.get(c.uri.path);if(!f)continue;if(c.diagnostic.range.end.line>=f.lineCount){this._logger.debug(`Ignoring stale diagnostic ${c.diagnostic.message} in ${c.uri.path} at ${c.diagnostic.range.start.line}:${c.diagnostic.range.end.line}`);continue}let p=f.offsetAt(c.diagnostic.range.start),g=f.offsetAt(c.diagnostic.range.end);if(a.push(new a6(c.uri,c.diagnostic,p,g)),o.set(c.uri.path,u+1),a.length>=t)break}}return a}};var l6=q(BA()),fs=q(require("vscode"));var ACt=5,QQ=class extends X{constructor(r,n){super();this._keybindingWatcher=r;this._inlineCompletionProvider=n;this.createDecorationTypes(),this.addDisposables(...this.setupEmptyFileHint());let i=fs.window.activeTextEditor;i&&i.document.getText()===""&&this.debouncedDecorations(i),this._logger.info("HotKeyHints initialized")}_logger=j("HotKeyHints");activeCompletion=!1;emptyFileHotKeyHintDecorationType;debouncedDecorations=(0,l6.default)(r=>{(r.document.uri.scheme==="file"||r.document.uri.scheme==="untitled")&&r.document.getText()===""&&!this.activeCompletion?r.setDecorations(this.emptyFileHotKeyHintDecorationType,[r.selection]):this.hideHints(r)},ACt,{leading:!1,trailing:!0});createDecorationTypes(){let r=this._keybindingWatcher.getKeybindingForCommand(Ji.commandID),n="";r?n=`${r} to open Augment.`:n="Click the robot icon in the side bar to open Augment.",this.emptyFileHotKeyHintDecorationType=fs.window.createTextEditorDecorationType({after:{contentText:n,color:"rgba(150, 150, 150, 0.9)",margin:"0 0 0 0.5rem"}})}setupEmptyFileHint(){let r=[];return r.push({dispose:()=>{this.debouncedDecorations.cancel()}}),this._inlineCompletionProvider&&(r.push(zc(n=>{let i=fs.window.activeTextEditor;!i||!n||n.completions.length===0||(this.debouncedDecorations.cancel(),this.hideHints(i),this.activeCompletion=!0)})),r.push(Wm(()=>{this.activeCompletion=!1;let n=fs.window.activeTextEditor;!n||n.document.getText()!==""||this.debouncedDecorations(n)}))),fs.workspace.onDidCloseTextDocument(()=>{this.activeCompletion=!1}),r.push(fs.window.onDidChangeActiveTextEditor(n=>{!n||n.document.getText()!==""||(this.activeCompletion=!1,this.debouncedDecorations(n))})),r.push(fs.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length>0&&(this.activeCompletion=!1),n.document.uri.scheme!=="file"&&n.document.uri.scheme!=="untitled")return;let i=fs.window.activeTextEditor;if(!(!i||i.document.uri.toString()!==n.document.uri.toString())){if(i.document.getText()!==""){this.hideHints(i);return}this.activeCompletion||this.debouncedDecorations(i)}})),r}hideHints(r){r.setDecorations(this.emptyFileHotKeyHintDecorationType,[])}},NQ=class extends X{constructor(r,n){super();this._keybindingWatcher=r;this._inlineCompletionProvider=n;this.createDecorationTypes(),this.addDisposables(...this.setupEmptyLineHint())}_logger=j("EmptyLineHints");activeCompletion=!1;decorationType;debouncedDecorations=(0,l6.default)(r=>{let n=r.selection.active,s=r.document.lineAt(n.line).text,o=s.lastIndexOf(" ")!==-1?s.lastIndexOf(" "):s.length-1,a=new fs.Range(n.line,o+1,n.line,o+1);/\S/.test(s)===!1&&(s.trim()===""||n.character===s.length)?r.setDecorations(this.decorationType,[a]):this.hideHints(r)},16,{leading:!1,trailing:!0});createDecorationTypes(){let r="",n=this._keybindingWatcher.getKeybindingForCommand("augment-chat.focus",!0);n&&(r=`${n} to open Augment`),this.decorationType=fs.window.createTextEditorDecorationType({after:{contentText:r,color:"rgba(150, 150, 150, 0.5)",margin:"0 0 0 1.2rem"}})}setupEmptyLineHint(){let r=[];return r.push({dispose:()=>{this.debouncedDecorations.cancel()}}),this._inlineCompletionProvider&&(r.push(zc(n=>{let i=fs.window.activeTextEditor;!i||!n||n.completions.length===0||(this.debouncedDecorations.cancel(),this.hideHints(i),this.activeCompletion=!0)})),r.push(Wm(()=>{this.activeCompletion=!1;let n=fs.window.activeTextEditor;n&&this.debouncedDecorations(n)}))),r.push(fs.window.onDidChangeTextEditorSelection(n=>{this.debouncedDecorations(n.textEditor)})),r.push(fs.workspace.onDidChangeTextDocument(n=>{let i=fs.window.activeTextEditor;!i||i.document.uri.toString()!==n.document.uri.toString()||this.activeCompletion||this.debouncedDecorations(i)})),r}hideHints(r){r.setDecorations(this.decorationType,[])}};var fSe=q(require("vscode"));var uSe=new Map([["authenticated",{name:"authenticated",status:"initializing"}],["syncingPermitted",{name:"syncingPermitted",status:"complete"}],["disabledGithubCopilot",{name:"disabledGithubCopilot",status:"initializing"}],["hasMovedExtensionAside",{name:"hasMovedExtensionAside",status:"incomplete"}],["workspacePopulated",{name:"workspacePopulated",status:"initializing"}],["workspaceSelected",{name:"workspaceSelected",status:"initializing"}],["disabledCodeium",{name:"disabledCodeium",status:"initializing"}],["uploadingHomeDir",{name:"uploadingHomeDir",status:"initializing"}],["workspaceTooLarge",{name:"workspaceTooLarge",status:"initializing"}]]),dSe=new Map([["UserShouldSignIn",{name:"UserShouldSignIn",renderOrder:0,desiredConditions:[{name:"authenticated",status:"incomplete"}]}],["SyncingPermissionNeeded",{name:"SyncingPermissionNeeded",renderOrder:1,desiredConditions:[{name:"syncingPermitted",status:"initializing"}]}],["uploadingHomeDir",{name:"uploadingHomeDir",renderOrder:2,desiredConditions:[{name:"uploadingHomeDir",status:"complete"}]}],["workspaceTooLarge",{name:"workspaceTooLarge",renderOrder:2,desiredConditions:[{name:"workspaceTooLarge",status:"complete"}]}],["ShouldDisableCopilot",{name:"ShouldDisableCopilot",renderOrder:3,desiredConditions:[{name:"authenticated",status:"complete"},{name:"disabledGithubCopilot",status:"incomplete"}]}],["ShouldDisableCodeium",{name:"ShouldDisableCodeium",renderOrder:3,desiredConditions:[{name:"authenticated",status:"complete"},{name:"disabledCodeium",status:"incomplete"}]}],["WorkspaceNotSelected",{name:"WorkspaceNotSelected",renderOrder:5,desiredConditions:[{name:"authenticated",status:"complete"},{name:"syncingPermitted",status:"complete"},{name:"workspaceSelected",status:"incomplete"}]}],["WorkspacePopulated",{name:"WorkspacePopulated",renderOrder:5,desiredConditions:[{name:"authenticated",status:"complete"},{name:"syncingPermitted",status:"complete"},{name:"workspaceSelected",status:"complete"},{name:"workspacePopulated",status:"complete"}]}],["WorkspaceNotPopulated",{name:"WorkspaceNotPopulated",renderOrder:5,desiredConditions:[{name:"authenticated",status:"complete"},{name:"syncingPermitted",status:"complete"},{name:"workspaceSelected",status:"complete"},{name:"workspacePopulated",status:"incomplete"}]}],["AllActionsComplete",{name:"AllActionsComplete",renderOrder:6,desiredConditions:[{name:"authenticated",status:"complete"},{name:"syncingPermitted",status:"complete"},{name:"disabledGithubCopilot",status:"complete"},{name:"disabledCodeium",status:"complete"},{name:"workspacePopulated",status:"complete"},{name:"workspaceSelected",status:"complete"}]}]]),PQ=class extends X{_systemStates;_derivedStates;_onDerivedStatesSatisfied=new fSe.EventEmitter;_systemToDerivedStateMap=new Map;_globalState;_satisfiedDerivedStates=new Set;constructor(t,r=uSe,n=dSe){super(),this.addDisposable(this._onDerivedStatesSatisfied),this._systemStates=new Map(r),this._derivedStates=new Map(n),this._globalState=t,this.loadSystemStates(),this._derivedStates.forEach(this.updateSystemToDerivedStateMap.bind(this)),this._derivedStates.forEach(i=>{this._isStateSatisfied(i)&&this._satisfiedDerivedStates.add(i.name)}),this._emitSatisfiedStates()}get satisfiedStates(){return Array.from(this._satisfiedDerivedStates).map(t=>this._derivedStates.get(t)).sort((t,r)=>t.renderOrder-r.renderOrder)}saveSystemStates(){let t=JSON.stringify(Array.from(this._systemStates.entries()));this._globalState.update("actionSystemStates",t)}loadSystemStates(){let t=this._globalState.get("actionSystemStates")||"[]";new Map(JSON.parse(t)).forEach(n=>{this._systemStates.set(n.name,n)})}get onDerivedStatesSatisfied(){return this._onDerivedStatesSatisfied.event}updateSystemToDerivedStateMap(t){t.desiredConditions.forEach(r=>{this._systemToDerivedStateMap.has(r.name)||this._systemToDerivedStateMap.set(r.name,new Set),this._systemToDerivedStateMap.get(r.name).add(t.name)})}setSystemStateStatus(t,r){let n={name:t,status:r};this._systemStates.set(n.name,n),this.saveSystemStates();let i=this._systemToDerivedStateMap.get(n.name)||new Set,s=!1;i.forEach(o=>{let a=this._derivedStates.get(o);if(a){let l=this._satisfiedDerivedStates.has(o),c=this._isStateSatisfied(a);l!==c&&(s=!0,c?this._satisfiedDerivedStates.add(o):this._satisfiedDerivedStates.delete(o))}}),s&&this._emitSatisfiedStates(),this.saveSystemStates()}restartActionsState(){this._systemStates=new Map(uSe),this._derivedStates=new Map(dSe),this._systemToDerivedStateMap=new Map,this._satisfiedDerivedStates=new Set,this._derivedStates.forEach(this.updateSystemToDerivedStateMap.bind(this)),this._derivedStates.forEach(t=>{this._isStateSatisfied(t)&&this._satisfiedDerivedStates.add(t.name)}),this._emitSatisfiedStates(),this.saveSystemStates()}getSystemState(t){return this._systemStates.get(t)}addDerivedState(t){this._derivedStates.set(t.name,t),this.updateSystemToDerivedStateMap(t),this._isStateSatisfied(t)&&(this._satisfiedDerivedStates.add(t.name),this._emitSatisfiedStates()),this.saveSystemStates()}isDerivedStateSatisfied(t){let r=this._derivedStates.get(t);return r?this._isStateSatisfied(r):!1}isSystemStateComplete(t){return this._systemStates.get(t)?.status==="complete"}_emitSatisfiedStates(){this._onDerivedStatesSatisfied.fire(this.satisfiedStates)}broadcastDerivedStates(){this._emitSatisfiedStates()}_isStateSatisfied(t){for(let r of t.desiredConditions){let n=this._systemStates.get(r.name);if(!n||n.status!==r.status)return!1}return!0}};var hSe=q(Gf()),tw=q(require("vscode"));var LQ=class extends X{constructor(r,n,i,s,o,a,l){super();this._actionsModel=r;this._apiServer=n;this._config=i;this._syncingEnabledTracker=s;this._changeWebviewAppEvent=o;this._featureFlagManager=a;this._userTier=l;this.addDisposables(this._actionsModel.onDerivedStatesSatisfied(this.handleDerivedStateChange.bind(this)),this._syncingEnabledTracker.onDidChangeSyncingEnabled(this.sendSyncEnabledStatus.bind(this)),this._actionsModel.onDerivedStatesSatisfied(c=>{for(let u of c)(u.name==="WorkspacePopulated"||u.name==="WorkspaceNotPopulated")&&(this._workspaceChecked=!0,this._waitingOnWorkspace&&(this._waitingOnWorkspace=!1,this.changeToChatApp()))}))}_logger=j("AwaitingSyncingPermissionApp");_webview;_asyncMsgHandler;_workspaceChecked=!1;_waitingOnWorkspace=!1;appType(){return"awaiting-syncing-permission"}title(){return"Syncing Permission Needed"}register(r){this._logger.info("Registering AwaitingSyncingPermissionApp"),this._webview=r,this.addDisposable(r.onDidReceiveMessage(n=>this.onMessageFromWebview(n)))}sendSyncEnabledStatus=(0,hSe.default)(()=>{this._webview?.postMessage({type:"sync-enabled-state",data:this._syncingEnabledTracker.syncingEnabledState})},250,{leading:!0,trailing:!0});async handleDerivedStateChange(r){let n=new Set(["SyncingPermissionNeeded","uploadingHomeDir","workspaceTooLarge","WorkspaceNotSelected"]),i=r.map(s=>s.name).filter(s=>n.has(s));if(i.length===0){this._workspaceChecked?this.changeToChatApp():this._waitingOnWorkspace=!0;return}await this.sendActionsToWebview(i)}changeToChatApp(){this._changeWebviewAppEvent.fire("chat")}async sendActionsToWebview(r){await this._webview?.postMessage({type:"main-panel-actions",data:r})}onMessageFromWebview(r){switch(r.type){case"main-panel-perform-action":this.performAction(r.data);break;case"awaiting-syncing-permission-loaded":{this.handleDerivedStateChange(this._actionsModel.satisfiedStates),this.sendSyncEnabledStatus(),this._webview?.postMessage({type:"awaiting-syncing-permission-initialize",data:{workspaceName:tw.workspace.name,enableDebugFeatures:this._config.config.enableDebugFeatures,maxTrackableFileCount:this._featureFlagManager.currentFlags.maxTrackableFileCount,userTier:this._userTier}});break}}}performAction(r){switch(r){case"grant-sync-permission":{this._logger.info("User granted syncing permission"),this._syncingEnabledTracker.enableSyncing();break}case"open-folder":{tw.commands.executeCommand("vscode.openFolder");break}case"close-folder":{tw.commands.executeCommand("workbench.action.closeFolder");break}}}async*onUserSendMessage(r){let n=this._apiServer.createRequestId(),i=zbe;for(let s of i)yield{type:"chat-model-reply",data:{text:s,requestId:n,workspaceFileChunks:[],streaming:!0}},await new Promise(o=>setTimeout(o,8));yield{type:"chat-model-reply",data:{text:"",requestId:n,workspaceFileChunks:[],streaming:!1}}}};var wf=q(require("vscode"));var UQ=class extends X{constructor(r){super();this._onboardingSessionEventReporter=r}_webview;appType(){return"folder-selection"}title(){return"Select Folder"}register(r){this._webview=r,this.addDisposables(this._webview.onDidReceiveMessage(this.onDidReceiveMessage))}onDidReceiveMessage=r=>{switch(r.type){case"main-panel-perform-action":this.performAction(r.data);break;case"main-panel-create-project":this.createProject(r.data.name);break}};performAction(r){switch(r){case"open-folder":{this._onboardingSessionEventReporter.reportEvent("opened-folder"),wf.commands.executeCommand("vscode.openFolder");break}case"close-folder":{wf.commands.executeCommand("workbench.action.closeFolder");break}case"clone-repository":{this._onboardingSessionEventReporter.reportEvent("cloned-repo"),wf.commands.executeCommand("git.clone");break}}}async createProject(r){let n="augment-projects",i=vve();if(!i)return;let s=wf.Uri.file(i),o=wf.Uri.joinPath(s,n),a=wf.Uri.joinPath(o,r);await Pl(a.fsPath)||await Ll(a.fsPath),this._onboardingSessionEventReporter.reportEvent("created-new-project"),await this._onboardingSessionEventReporter.uploadNow(),wf.commands.executeCommand("vscode.openFolder",a)}};var OQ=class extends X{constructor(r,n,i,s){super();this._apiServer=r;this._config=n;this._oauthFlow=i;this._actionsModel=s}_logger=j("SignInApp");_webview;_signInFlow;appType(){return"sign-in"}title(){return""}register(r){this._webview=r,this.addDisposable(r.onDidReceiveMessage(i=>this.onMessageFromWebview(i))),this.addDisposable(this._actionsModel.onDerivedStatesSatisfied(this.handleDerivedStateChange.bind(this)));let n=js(r);this.addDisposable(n),n.registerStreamHandler("chat-user-message",i=>this.onUserSendMessage(i)),n.registerHandler("chat-loaded",i=>(this._actionsModel.isDerivedStateSatisfied("UserShouldSignIn")&&this.sendSignInActions(),Promise.resolve({type:"chat-initialize",data:{enableDebugFeatures:this._config.config.enableDebugFeatures,fullFeatured:!1}})))}onMessageFromWebview(r){switch(r.type){case"main-panel-perform-action":this.performAction(r.data);break;case"augment-link":{switch(r.data){case R4:this.performAction("sign-in");break;default:this._logger.warn(`Unknown augment link: ${r.data}`);break}break}case"sign-in-loaded":{let n={type:"sign-in-loaded-response",data:{client:"vscode"}};this._webview?.postMessage(n);break}}}performAction(r){switch(r){case"cancel-sign-in":this._oauthFlow.doProgrammaticCancellation(),this.sendSignInActions();break;case"sign-in":{this.sendInProgressActions();let n=this._oauthFlow.startFlow(!1);this._signInFlow=n,n.catch(i=>{this._signInFlow===n&&this.sendSignInActions()});break}}}async sendSignInActions(){await this.sendActionsToWebview(["UserShouldSignIn"])}async sendInProgressActions(){await this.sendActionsToWebview(["SignInInProgress"])}handleDerivedStateChange(r){for(let n of r)n.name==="UserShouldSignIn"&&this.sendSignInActions()}async sendActionsToWebview(r){await this._webview?.postMessage({type:"main-panel-actions",data:r})}async*onUserSendMessage(r){let n=this._apiServer.createRequestId(),i=Kbe;for(let s of i)yield{type:"chat-model-reply",data:{text:s,requestId:n,workspaceFileChunks:[],streaming:!0}},await new Promise(o=>setTimeout(o,8));yield{type:"chat-model-reply",data:{text:"",requestId:n,workspaceFileChunks:[],streaming:!1}}}};var qQ=class extends X{constructor(r,n,i){super();this._workspaceManager=r;this._featureFlagManager=n;this._workTimer=i}_workspaceUiModel=null;appType(){return"workspace-context"}title(){return"Workspace Context"}register(r){this._workspaceUiModel?.dispose(),this._featureFlagManager.currentFlags.enableWorkspaceManagerUi&&(this._workspaceUiModel=new Uv(this._workspaceManager,r,this._featureFlagManager,this._workTimer),this.addDisposable(this._workspaceUiModel))}};var VQ=class e extends ii{constructor(r){super("ClientMetricsReporter",e.defaultMaxRecords,e.defaultUploadMsec,e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=500;static defaultUploadMsec=1e4;reportWebviewClientMetric=r=>{this.report({client_metric:`webview__${r.webviewName}__${r.client_metric}`,value:r.value})};performUpload(r){return this._apiServer.clientMetrics(r)}};var HQ=class{constructor(t){this._apiServer=t}uploadEnabled=!1;_logger=j("CodeEditReporter");enableUpload(){this.uploadEnabled=!0}disableUpload(){this.uploadEnabled=!1}dispose(){this.disableUpload()}async reportResolution(t,r,n,i,s){let[o,a]=Hn(r),[l,c]=Hn(n),u={request_id:t,emit_time_sec:o,emit_time_nsec:a,resolve_time_sec:l,resolve_time_nsec:c,is_accepted:i,annotated_text:s};await Di(async()=>{if(this.uploadEnabled)try{return await this._apiServer.logCodeEditResolution(u)}catch(f){throw this._logger.error(`Error reporting edit resolution: ${f}`),f}},this._logger)}};var WQ=class e extends ii{constructor(r,n,i,s,o){super("CompletionAcceptanceReporter",i??e.defaultMaxRecords,s??e.defaultUploadMsec,o??e.defaultBatchSize);this._apiServer=r;this._onboardingSessionEventReporter=n}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportResolution(r,n,i,s){let[o,a]=Hn(n),[l,c]=Hn(i);this.report({request_id:r,emit_time_sec:o,emit_time_nsec:a,resolve_time_sec:l,resolve_time_nsec:c,accepted_idx:s??-1}),s!==void 0&&this._onboardingSessionEventReporter.reportEvent("accepted-completion")}performUpload(r){return this._apiServer.resolveCompletions(r)}};var GQ=class e extends ii{constructor(r,n,i,s){super("TimelineEventReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportCompletionTimeline(r,n){if(!n.emitTime||!n.rpcStart||!n.rpcEnd)return;let[i,s]=Hn(n.requestStart),[o,a]=Hn(n.emitTime),[l,c]=Hn(n.rpcStart),[u,f]=Hn(n.rpcEnd);this.report({request_id:r,initial_request_time_sec:i,initial_request_time_nsec:s,api_start_time_sec:l,api_start_time_nsec:c,api_end_time_sec:u,api_end_time_nsec:f,emit_time_sec:o,emit_time_nsec:a})}performUpload(r){return this._apiServer.reportClientCompletionTimelines(r)}};var Cg=q(require("vscode"));function $Q(e,t="",r={}){for(let n in e)if(Object.hasOwn(e,n)){let i=t?`${t}.${n}`:n;typeof e[n]=="object"&&e[n]!==null?$Q(e[n],i,r):r[i]=String(e[n])}return r}var YQ=class e extends ii{constructor(r,n,i,s){super("ExtensionSessionEventReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportEvent(r,n){this.report({time_iso:new Date().toISOString(),event_name:r,additional_data:n})}performUpload(r){return this._apiServer.logExtensionSessionEvent(r)}reportSourceFolders(r){if(!r.workspaceStorageUri)return;let n=Wv(new TextEncoder().encode(r.workspaceStorageUri));delete r.workspaceStorageUri;let i=$Q({projectId:n,...r});this.report({time_iso:new Date().toISOString(),event_name:"source-folder-snapshot",additional_data:Object.entries(i).map(([s,o])=>({key:s,value:o}))})}reportConfiguration(r,n,i){let s=$Q({otherConfig:{theme:Cg.workspace.getConfiguration().get("workbench.colorTheme"),fontSize:Cg.workspace.getConfiguration().get("editor.fontSize"),isDark:[Cg.ColorThemeKind.Dark,Cg.ColorThemeKind.HighContrast].includes(Cg.window.activeColorTheme.kind)},config:n,featureFlags:i});for(let o in s)o.toLowerCase().includes("token")&&s[o]&&(s[o]="<redacted>");this.report({time_iso:new Date().toISOString(),event_name:"configuration-snapshot",additional_data:Object.entries(s).map(([o,a])=>({key:o,value:a}))})}};var KQ=class e extends ii{constructor(r,n,i,s){super("NextEditResolutionReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportResolution(r,n,i,s){let[o,a]=Hn(n),[l,c]=Hn(i);this.report({request_id:r,emit_time_sec:o,emit_time_nsec:a,resolve_time_sec:l,resolve_time_nsec:c,is_accepted:s})}performUpload(r){return this._apiServer.resolveNextEdits(r)}};var zQ=class e extends ii{constructor(r,n,i,s){super("NextEditSessionEventReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportEvent(r,n,i,s,o){let[a,l]=Hn(i);this.report({related_request_id:r,related_suggestion_id:n,event_time_sec:a,event_time_nsec:l,event_name:s,event_source:o})}reportEventFromSuggestion(r,n,i){this.reportEvent(r?.requestId,r?.result.suggestionId,Date.now(),n,i)}reportEventWithoutIds(r,n){this.reportEvent(void 0,void 0,Date.now(),r,n)}performUpload(r){return this._apiServer.logNextEditSessionEvent(r)}};var JQ=class e extends ii{constructor(r,n,i,s){super("OnboardingSessionEventReporter",n??e.defaultMaxRecords,i??e.defaultUploadMsec,s??e.defaultBatchSize);this._apiServer=r}static defaultMaxRecords=1e4;static defaultBatchSize=1e3;static defaultUploadMsec=1e4;reportEvent(r){let[n,i]=Hn(Date.now());this.report({event_time_sec:n,event_time_nsec:i,event_name:r})}performUpload(r){return this._apiServer.logOnboardingSessionEvent(r)}};var jQ=class extends X{constructor(r,n,i){super();this._reporter=r;this._workTimer=n;this._options=i;this._options.periodMs=Math.max(this._options.periodMs,10),this._options.infoThresholdMs=Math.max(this._options.infoThresholdMs,10),this._options.debugThresholdMs=Math.min(Math.max(this._options.debugThresholdMs,10),this._options.infoThresholdMs),this._schedule(),this.addDisposable({dispose:()=>clearTimeout(this._nextCheck)})}_logger=j("StallDetector");_targetWakeup=0;_nextCheck;_schedule(){this._targetWakeup=Date.now()+this._options.periodMs,this._nextCheck=setTimeout(()=>this._checkStall(),this._options.periodMs)}_checkStall(){let n=Date.now()-this._targetWakeup;if(n>this._options.debugThresholdMs){let s=`Event loop delay: Timer(${this._options.periodMs} msec) ran ${n} msec late.`,o=n>this._options.infoThresholdMs?"info":"debug";this._logger.log(o,s),this._reporter.report({client_metric:"event_loop_delay",value:n})}let i=this._workTimer.popSlowEvents();i.length>0&&this._logger.info(`Recent work: ${JSON.stringify(i)}`),this._schedule()}};var ZQ=class e{thresholdMs;slowEvents;static maxSlowEvents=1e3;constructor(t=1e3){this.thresholdMs=t,this.slowEvents=[]}async runTimed(t,r){let n=process.hrtime.bigint(),i;try{return i=await r(),i}finally{this.recordIfSlow(t,n)}}recordIfSlow(t,r){let n=process.hrtime.bigint()-r,i=Number(n)/1e6;i>=this.thresholdMs&&(this.slowEvents.push({name:t,durationMs:i,timestamp:new Date}),this.slowEvents.length>e.maxSlowEvents&&this.slowEvents.splice(0,e.maxSlowEvents/2))}popSlowEvents(){let t=this.slowEvents;return this.slowEvents=[],t}clear(){this.slowEvents=[]}};var Xa=q(require("vscode"));var c6=q(require("vscode"));var vCt=j("RangesVSCode");function Fs(e,t){return t&&t.lineCount<e.stop?(vCt.warn(`LineRange[${e.start}, ${e.stop}) is out of bounds for document ${t.uri.path}.`),new c6.Range(e.start,0,t.lineCount,0)):new c6.Range(e.start,0,e.stop,0)}function nd(e){return new Vn(e.start.line,e.end.line+(e.end.character>0?1:0))}function pSe(e){return`[${gSe(e.start)},${gSe(e.end)})`}function gSe(e){return`${e.line}:${e.character}`}function u6(e){return[...e.visibleRanges].sort((t,r)=>t.start.line-r.start.line)}function hs(e){return $y(e.fsPath)}function XQ(e){return e.fsPath}function Sf(e){if(e.scheme==="file"||e.scheme==="untitled"||Bo(e))return hs(e)}function mSe(e){if(e.scheme==="file")return hs(e)}var rN=q(require("vscode"));var Yv=class{constructor(t,r){this.title=t;this.action=r;this.title=t,this.action=r}},tN=class extends X{constructor(r,n,i,s,o,a,l){super();this._configListener=r;this._suggestionManager=n;this._keybindingWatcher=i;this._globalState=s;this._nextEditSessionEventReporter=o;this._nextEditConfigManager=a;this._completionVisibilityWatcher=l;this._addInitialTutorial(),this._addSecondTutorial()}_addInitialTutorial(){let r=this._nextEditConfigManager.config.enableAutoApply,n=td(this._keybindingWatcher,ca.commandID,!0),i=td(this._keybindingWatcher,Xu.commandID,!0);this._addTutorial("nextEditSuggestionSeen",s=>s.newSuggestions,Xn,"You have a Next Edit suggestion available. Next Edit helps you complete your train of thought by suggesting changes that continue your recent work.",[new Yv(r?`Preview & Apply (${n})`:`Preview (${n})`,eN(ca.commandID)),new Yv(`Dismiss All (${i})`,eN(Xu.commandID))],"tutorial-initial-shown")}_addSecondTutorial(){let r=td(this._keybindingWatcher,Ro.commandID,!0),n=td(this._keybindingWatcher,"redo",!0),i=td(this._keybindingWatcher,ed.commandID,!0),s=[new Yv("Learn More",eN(fg.commandID))].concat(this._nextEditConfigManager.config.enablePanel?[new Yv(`View All in Panel (${i})`,eN(ed.commandID))]:[]);this._addTutorial("nextEditSuggestionAccepted",o=>o.accepted,void 0,`You just applied a Next Edit suggestion! Use Undo (${r}) and Redo (${n}) to go back and forth between the original and suggested code.`,s,"tutorial-after-accept-shown")}_addTutorial(r,n,i,s,o,a){this._globalState.get(r)!==!0&&this.addDisposable(this._suggestionManager.onSuggestionsChanged(async l=>{if(!this._shouldShowTutorial(r,n(l),i)||this._completionVisibilityWatcher.maybeInlineCompletionVisible)return;this._globalState.update(r,!0),this._nextEditSessionEventReporter.reportEventWithoutIds(a,"unknown");let c=await rN.window.showInformationMessage(s,...o);c?.action(),this._nextEditSessionEventReporter.reportEventWithoutIds(c?"tutorial-nonempty-response":"tutorial-empty-response","unknown")}))}_shouldShowTutorial(r,n,i=void 0){return i&&(n=n.filter(i)),!(n.length===0||this._globalState.get(r)===!0)}};function eN(e){return()=>void rN.commands.executeCommand(e,"tutorial")}var nN=class e extends X{constructor(r,n,i,s,o,a,l,c,u){super();this.workspaceManager=r;this._nextEditSessionEventReporter=n;this._configListener=s;this._suggestionManager=o;this._requestManager=a;this._nextEditConfigManager=c;this._completionVisibilityWatcher=u;this.addDisposable(new Xa.Disposable(()=>{this._requestManager?.clearCompletedRequests(),this._suggestionManager?.clear(!1,"BACKGROUND"),this._noopReportTimer&&(clearTimeout(this._noopReportTimer),this._noopReportTimer=null),this._cancelDelayedFileRequest()})),this._scheduleNoopReport(),this.addDisposable(Xa.workspace.onDidChangeTextDocument(this._handleTextDocumentChanged)),this.addDisposable(Xa.window.onDidChangeTextEditorSelection(this._handleTextEditorSelectionChanged)),this.addDisposable(new Xa.Disposable(this._requestManager.lastFinishedRequest.listen(g=>{if(!g||g.apiResult!==$e.ok||g.mode!=="BACKGROUND")return;let m=Xa.window.activeTextEditor,y=m&&this.workspaceManager.safeResolvePathName(m.document.uri);if(g.suggestions.length===0){this._logRequestCaching(`Request (scope=${g.scope}) returned no suggestions.`);return}if(g.scope==="CURSOR"){let v=g.suggestions.filter(Xn);v.length===0?(this._logRequestCaching("CURSOR request returned no results, falling back to FILE request immediately"),this._requestManager.enqueueRequest(y,"BACKGROUND","FILE")):(this._logRequestCaching(`CURSOR request returned ${v.length} suggestions, scheduling delayed FILE request in ${e._fileRequestDelayMs}ms`),this._delayedFileRequestTimer=setTimeout(()=>{this._logRequestCaching("Enqueuing delayed FILE request"),this._requestManager.enqueueRequest(y,"BACKGROUND","FILE"),this._delayedFileRequestTimer=null},e._fileRequestDelayMs))}else g.scope==="FILE"&&g.suggestions.filter(Xn).length===0&&this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions&&(this._logRequestCaching("FILE request returned no results, falling back to WORKSPACE request"),this._requestManager.enqueueRequest(y,"BACKGROUND","WORKSPACE"))}))),this.addDisposable(this._suggestionManager.onSuggestionsChanged(g=>{for(let v of g.accepted.filter(C=>C.result.truncationChar!==void 0))this._requestManager.enqueueRequest(v.qualifiedPathName,"BACKGROUND","CURSOR",v.lineRange);let y=g.accepted.map(v=>v.requestId).map(v=>g.newSuggestions.filter(C=>Xn(C)&&C.requestId===v));for(let v of y)if(!v.some(C=>C.result.truncationChar===void 0))for(let C of v)this._requestManager.enqueueRequest(C.qualifiedPathName,"BACKGROUND","CURSOR",C.lineRange)})),this.addDisposable(new tN(this._configListener,this._suggestionManager,i,l,n,this._nextEditConfigManager,this._completionVisibilityWatcher));let f=Xa.window.activeTextEditor;if(!f)return;let p=this.workspaceManager.safeResolvePathName(f.document.uri);p&&this._requestManager.enqueueRequest(p,"BACKGROUND","CURSOR")}_logger=j("BackgroundNextEdits");_noopSources=new Set;_noopReportTimer=null;_noopReportDelayMs=6e4*5;_debugRequestCaching=!0;_delayedFileRequestTimer=null;static _fileRequestDelayMs=4e3;_logRequestCaching(r){if(this._debugRequestCaching){let n=typeof r=="string"?r:r();this._logger.debug(n)}}_cancelDelayedFileRequest(){this._delayedFileRequestTimer&&(this._logRequestCaching("Cancelling delayed FILE request"),clearTimeout(this._delayedFileRequestTimer),this._delayedFileRequestTimer=null)}get _isDebugging(){return Xa.debug.activeDebugSession!==void 0&&!this._configListener.config.nextEdit.allowDuringDebugging}_scheduleNoopReport(){this._noopReportTimer&&(clearTimeout(this._noopReportTimer),this._noopReportTimer=null),this._noopReportTimer=setTimeout(()=>{this._reportNoopSources(),this._scheduleNoopReport()},this._noopReportDelayMs)}_reportNoopSources(){if(this._noopSources.size!==0){for(let r of this._noopSources.values())this._nextEditSessionEventReporter.reportEventWithoutIds("background-noop",r);this._noopSources.clear()}}_handleTextDocumentChanged=r=>{if(r.contentChanges.length===0){this._noopSources.add("no-content-changes");return}if(this._isDebugging){this._noopSources.add("debug-session");return}if(uf(r.document)){this._noopSources.add("notebook-document");return}if(!mSe(r.document.uri)){this._noopSources.add("unsupported-uri");return}let n=this.workspaceManager.safeResolvePathName(r.document.uri);if(!n){this._noopSources.add("missing-path-name");return}let i=Xa.window.activeTextEditor;if(!i||r.document!==i.document){this._noopSources.add("not-active-editor");return}if(this._logger.debug(`Received TextDocumentChangeEvent for ${n.relPath}`),this._cancelDelayedFileRequest(),this._logRequestCaching("Canceled delayed FILE request due to document change."),this._suggestionManager.getActiveSuggestions().filter(o=>o.qualifiedPathName.equals(n)&&Xn(o)&&o.result.truncationChar===void 0).length>0){this._noopSources.add("fresh-suggestions"),this._logRequestCaching("Continuing with remaining fresh suggestions.");return}this._requestManager.enqueueRequest(n,"BACKGROUND","CURSOR")};_handleTextEditorSelectionChanged=r=>{let n=Xa.window.activeTextEditor;if(!n||r.textEditor.document!==n.document||Nv()||this._isDebugging||Bo(n.document.uri))return;let i=this.workspaceManager.safeResolvePathName(r.textEditor.document.uri);if(!i)return;let s=this._suggestionManager.getActiveSuggestions().filter(c=>c.qualifiedPathName.equals(i)&&wwe(c)&&c.result.truncationChar===void 0).sort((c,u)=>{let f=c.state==="accepted"?c.afterLineRange(n.document):c.lineRange,p=u.state==="accepted"?u.afterLineRange(n.document):u.lineRange;return f.start-p.start});this._logRequestCaching(()=>`Found ${s.length} fresh suggestions in current file: ${s.map(c=>{let u=c.state==="accepted"?c.afterLineRange(n.document):c.lineRange,f=c.changeType==="noop"?"no-op":"change";return`[${u.toString()}, ${f}]`}).join(", ")}`);let o=nd(n.selection);this._logRequestCaching(`Cursor moved to line range: ${o.toString()}`);let a=s.filter(c=>{let u=c.state==="accepted"?c.afterLineRange(n.document):c.lineRange;return u.intersects(o)||u.touches(o)});if(!(a.length>0))this._logRequestCaching("Cursor not in any fresh suggestion region, sending new CURSOR request"),this._cancelDelayedFileRequest(),this._logRequestCaching("Canceled delayed FILE request due to cursor movement."),this._requestManager.enqueueRequest(i,"BACKGROUND","CURSOR");else{for(let c of a){let u=c.state==="accepted"?c.afterLineRange(n.document):c.lineRange,f=c.changeType==="noop"?"no-op":"change";this._logRequestCaching(`Cursor is in fresh suggestion at lines ${u.toString()}, suggestion ID: ${c.requestId}, state: ${Ql[c.state]}, type: ${f}`)}this._logRequestCaching("Not sending new request as cursor is in fresh suggestion regions")}}};var da=class e{constructor(t,r=(i,s)=>i===s,n=[]){this._value=t;this._equalityFn=r;this._listeners=n}static watch(t,...r){let n=()=>t(...r.map(a=>a.value)),i=new e(n()),s=r.map(a=>a.listen(()=>{i.value=n()})),o=i.dispose;return i.dispose=()=>{o(),s.forEach(a=>a())},i}dispose=()=>{this._listeners=[]};listen(t,r=!1){return r&&t(this._value,this._value),this._listeners.push(t),()=>{this._listeners=this._listeners.filter(n=>n!==t)}}get value(){return this._value}set value(t){if(this._equalityFn(t,this._value))return;let r=this._value;this._value=t;for(let n of this._listeners)n(t,r)}waitUntil(t,r){return new Promise((n,i)=>{let s,o=r!==void 0&&setTimeout(()=>{s?.(),i(new Error("Timeout exceeded."))},r);s=this.listen(a=>{t(a)&&(o&&clearTimeout(o),s?.(),n(a))},!0)})}};var iN=class extends X{_maybeInlineCompletionVisible=new da(!1);constructor(){super(),this.addDisposable(Mwe(t=>{this._maybeInlineCompletionVisible.value=t}))}get maybeInlineCompletionVisible(){return this._maybeInlineCompletionVisible.value}listen(t){return this._maybeInlineCompletionVisible.listen(t)}};var USe=q(Cs()),Se=q(require("vscode"));var id=q(require("vscode"));var d6=class{constructor(t,r){this.suggestion=t;this.isNext=r}toString(){return"hinted-suggestion"}},ei=class{constructor(){}get suggestion(){}toString(){return"no-suggestions"}},gs=class{constructor(t,r){this.suggestion=t;this.isNext=r}toString(){return"hinting"}get hintedSuggestion(){return new d6(this.suggestion,this.isNext)}},Rr=class{constructor(t){this.suggestion=t}toString(){return"before-preview"}},Ht=class{constructor(t){this.suggestion=t}toString(){return"after-preview"}},kr=class{constructor(t,r,n){this.suggestion=t;this.selection=r;this.timeout=n}toString(){return"animating"}};function ASe(e,t){return e instanceof ei&&t instanceof ei?!0:e instanceof gs&&t instanceof gs?e.suggestion.equals(t.suggestion)&&e.isNext===t.isNext:e instanceof Rr&&t instanceof Rr||e instanceof Ht&&t instanceof Ht?e.suggestion.equals(t.suggestion):e instanceof kr&&t instanceof kr?e.suggestion.equals(t.suggestion)&&e.selection.isEqual(t.selection)&&e.timeout===t.timeout:!1}var sN=class{constructor(t,r){this._state=t;this._keybindingWatcher=r}_onDidChangeCodeLenses=new id.EventEmitter;onDidChangeCodeLenses=this._onDidChangeCodeLenses.event;get _activeSuggestion(){return this._state.value instanceof Rr||this._state.value instanceof Ht||this._state.value instanceof kr?this._state.value.suggestion:void 0}refresh(){this._onDidChangeCodeLenses.fire()}_buildCodeLens(t,r,n){return new id.CodeLens(n,{title:t,command:r,tooltip:this._getKeybindingForCommand(r,!0)??void 0,arguments:["code-lens"]})}_getKeybindingForCommand(t,r=!1){return td(this._keybindingWatcher,t,r)?.replace("Escape","esc")}provideCodeLenses(t,r){let n=this._activeSuggestion;if(!n)return[];if(!n.qualifiedPathName.equals(t.uri))return[];let i=[],s=new id.Range(new id.Position(n.lineRange.start,0),new id.Position(n.lineRange.start,0));return i.push(new id.CodeLens(s,{title:`Augment Next Edit: ${n.result.changeDescription}`,command:""})),this._state.value instanceof Ht||this._state.value instanceof kr?i.push(this._buildCodeLens("Undo",Ro.commandID,s)):i.push(this._buildCodeLens("Apply",Wc.commandID,s)),i.push(this._buildCodeLens("Reject",Gc.commandID,s)),i}};var Kv=require("vscode");var ySe=new Kv.EventEmitter,Ym=ySe.event,rw=class extends X{constructor(r,n,i){super();this._reportId=n;this._vcsDetails=i;this._logger=j(`HeadChangeWatcher[${r}]`)}_logger;listening=!1;handleChange=()=>{this._logger.debug("handling HEAD change"),ySe.fire({repoId:this._reportId})};listenForChanges(){if(this.listening)return;if(this._vcsDetails.toolName!=="git")throw new Error("only git is supported for now");let r=Kv.workspace.createFileSystemWatcher(new Kv.RelativePattern(this._vcsDetails.root,".git/logs/HEAD"));this.addDisposables(r,r.onDidCreate(this.handleChange),r.onDidChange(this.handleChange),r.onDidDelete(this.handleChange)),this.listening=!0,this._logger.debug("Listening for HEAD changes.")}};var zv=require("vscode");var oN=new zv.EventEmitter,lN=oN.event,aN=class extends X{constructor(r,n,i){super();this._repoRoot=r;this._folderName=n;this._repoId=i;this._logger=j(`StashWatcher[${this._folderName}]`)}_logger;listening=!1;listenForChanges(){if(this.listening)return;let r=zv.Uri.joinPath(this._repoRoot,".git","refs","stash"),n=zv.workspace.createFileSystemWatcher(r.fsPath);this.addDisposables(n,n.onDidCreate(()=>{this._logger.debug("Stash created"),oN.fire({repoId:this._repoId})}),n.onDidChange(()=>{this._logger.debug("Stash changed"),oN.fire({repoId:this._repoId})}),n.onDidDelete(()=>{this._logger.debug("Stash deleted"),oN.fire({repoId:this._repoId})})),this.listening=!0,this._logger.debug("Listening for stash changes.")}};var BSe=q(require("assert")),We=q(require("vscode"));var cN=q(require("vscode")),CSe="var(--vscode-editorGhostText-foreground)";function g6(){return cN.window.createTextEditorDecorationType({after:{contentText:" ",margin:"0 0 0 3em"}})}function p6(e){let t={after:{color:CSe,margin:"0 0.25em 0 0"}};return(e||[1,2,3,4,5]).map((n,i)=>cN.window.createTextEditorDecorationType({...t,...e?e[i]:{}}))}function uN(e){return cN.window.createTextEditorDecorationType({after:{color:CSe,margin:"0 0 0 0.5em",contentText:e}})}function bSe(){return[g6(),p6(),uN()]}var bCt=q(require("vscode"));function dN(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var ECt=new Map([[31,"a"],[32,"b"],[33,"c"],[34,"d"],[35,"e"],[36,"f"],[37,"g"],[38,"h"],[39,"i"],[40,"j"],[41,"k"],[42,"l"],[43,"m"],[44,"n"],[45,"o"],[46,"p"],[47,"q"],[48,"r"],[49,"s"],[50,"t"],[51,"u"],[52,"v"],[53,"w"],[54,"x"],[55,"y"],[56,"z"],[4,"shift"],[20,"delete"],[3,"return"],[2,"tab"],[9,"escape"],[85,"semicolon"],[1,"backspace"],[5,{linux:"ctrl",win32:"ctrl",darwin:"control"}],[6,{linux:"alt",win32:"alt",darwin:"option"}],[57,{linux:"meta",win32:"win",darwin:"command"}]]);function ESe(e,t){let r=ECt.get(e);return r==null||typeof r=="object"&&(r=r[t],r==null)?null:r}function _Ct(e,t){let r=ESe(e,t);return r==null?null:`$(augment-kb-${r})`}function _Se(e,t){let r=ESe(e,t);if(r==null)return null;let i=Am()?.contributes.icons[`augment-kb-${r}`].default.fontCharacter?.replace("\\","")??null;return i==null?null:String.fromCharCode(parseInt(i,16))}function xSe(e,t){return e==null||e.chords.length<1?null:e.chords.find(n=>n instanceof gg)?e.toPrettyString(t):e.chords.map(n=>{let i=[],s=o=>{i.push(_Ct(o,t))};return n.ctrlKey&&s(5),n.shiftKey&&s(4),n.altKey&&s(6),n.metaKey&&s(57),n.keyCode&&s(n.keyCode),i.some(o=>o==null)?dN(e.toPrettyString(t)):i.join("&nbsp;")}).join("&nbsp;&nbsp;")}function nw(e,t,r){let n=Yc.getStructuredKeybinding(t.getKeybindingForCommand(e));if(!n||n.chords.length<1)return[];if(n.chords.length>1||n.chords[0]instanceof gg)return[{after:{contentText:n?`[${n.toPrettyString(t.getSimplifiedPlatform())}]`:""}}];{let i=n.chords[0],s=[],o=l=>{s.push(_Se(l,t.getSimplifiedPlatform()))};if(i.ctrlKey&&o(5),i.shiftKey&&o(4),i.altKey&&o(6),i.metaKey&&o(57),i.keyCode&&o(i.keyCode),s.some(l=>l==null))return[{after:{contentText:n?`[${n.toPrettyString(t.getSimplifiedPlatform())}]`:""}}];let a={fontFamily:'"Augment.vscode-augment/augment-kb-icon-font.woff"',verticalAlign:"bottom"};return s.map(l=>({light:{after:{...a,contentText:l}},dark:{after:{...a,contentText:l}}}))}}var Jv=q(require("vscode"));function bg(e){let t=new Jv.Position(e,0);return new Jv.Range(t,t)}function Eg(e,t){let r=e.document.lineAt(t).range.end;return new Jv.Range(r,r)}var SSe=q(require("assert")),fN=q(require("vscode"));var wSe=j("DecorationManager"),hN=class extends X{previousDecorationsPerEditor=new Map;addExtraDecorationsForActiveEditor(t,r,n,i){return t}getDecorationsForNextSuggestion;decorate(t,r){let n=new Map;for(let i of fN.window.visibleTextEditors){if(!i.viewColumn)continue;let s=n.get(i)??n.set(i,this.createEmptyDecorations()).get(i),o=t.filter(a=>a.qualifiedPathName.equals(i.document.uri));for(let a of o)this.addDecorationsForItem(s,i,a,r);i===fN.window.activeTextEditor&&this.addExtraDecorationsForActiveEditor(s,i,t,r)}for(let[i,s]of n)for(let[o,a]of s){if(o===void 0){wSe.warn("Got an undefined decoration type.");continue}(0,SSe.default)(a.every(l=>l instanceof a[0].constructor)),i.setDecorations(o,a)}for(let[i,s]of this.previousDecorationsPerEditor){if(!fN.window.visibleTextEditors.includes(i)){this.previousDecorationsPerEditor.delete(i);continue}if(!n.has(i))for(let[o,a]of s){if(o===void 0){wSe.warn("Got an undefined decoration type.");continue}i.setDecorations(o,[])}}this.previousDecorationsPerEditor=n}};var el=class e{constructor(t,r,n,i,s,o,a="file",l=new Date,c="fresh"){this.requestId=t;this.mode=r;this.scope=n;this.result=i;this.qualifiedPathName=s;this.lineRange=o;this.uriScheme=a;this.occurredAt=l;this.state=c;this.changeType=e.determineChangeType(this.result.existingCode,this.result.suggestedCode),this.changeType==="modification"&&this.makeOneLineDiffSpans().filter(f=>f.type!=="noop").every(f=>f.type==="insertion"&&f.updated.isWholeLine)&&(this.changeType="insertion"),this.changeType==="insertion"&&this.lineRange.start>0?this.highlightRange=new Vn(this.lineRange.start-1,this.lineRange.stop-(this.lineRange.stop>this.lineRange.start&&this.result.existingCode.indexOf(`
`)===-1?1:0)):this.changeType==="insertion"&&this.lineRange.start===0&&this.lineRange.stop===0?this.highlightRange=new Vn(0,1):this.highlightRange=this.lineRange}changeType;highlightRange;previewCursorRange(t){let r=this.previewBoxRange(t);return new Vn(Math.max(0,r.start-1),r.stop)}previewBoxRange(t){let r=this.state==="accepted",n=r?this.afterLineRange(t):this.highlightRange;return r&&(this.changeType==="deletion"&&n.start>0?n=new Vn(n.start-1,n.stop-(n.stop>n.start&&this.result.suggestedCode.indexOf(`
`)===-1?1:0)):this.changeType==="deletion"&&n.start===0&&n.stop===0&&(n=new Vn(0,1))),n}get previewTargetCursorLine(){return Math.max(0,this.lineRange.start-1)}toString(){return`EditSuggestion(${this.qualifiedPathName.relPath}:${this.lineRange.toString()})`}equals(t){return this.result.suggestionId===t?.result.suggestionId}compareTo(t){return this.qualifiedPathName.equals(t.qualifiedPathName)?this.lineRange.compareTo(t.lineRange):this.qualifiedPathName.relPath.localeCompare(t.qualifiedPathName.relPath)}makeOneLineDiffSpans(){return e.makeOneLineDiffSpans(this.result.diffSpans,this.result.existingCode,this.result.suggestedCode,this.lineRange)}static determineChangeType(t,r){return t===r?"noop":t===""?"insertion":r===""?"deletion":"modification"}static makeOneLineDiffSpans(t,r,n,i){if(!t)return[];let s=t.sort((f,p)=>f.original.start-p.original.start),o=[],a=i.start,l=i.start,c=!0,u=!0;for(let f of s){let p=r.slice(f.original.start,f.original.stop),g=n.slice(f.updated.start,f.updated.stop),m=e.determineChangeType(p,g),y=p.split(`
`),v=g.split(`
`),C=Math.max(y.length,v.length),E=f.original.start,w=f.updated.start;for(let B=0;B<C;B++){let R=y.length>B?y[B]:"",N=v.length>B?v[B]:"";if(B<y.length-1&&(R+=`
`),B<v.length-1&&(N+=`
`),R===""&&N==="")continue;let W=m;o.push({original:{text:R,charRange:new Fo(E,E+R.length),line:a,isWholeLine:c&&R.endsWith(`
`)},updated:{text:N,charRange:new Fo(w,w+N.length),line:l,isWholeLine:u&&N.endsWith(`
`)},type:W}),E+=R.length,w+=N.length,R.endsWith(`
`)?(a++,c=!0):c=!1,N.endsWith(`
`)?(l++,u=!0):u=!1}}return o.filter(f=>f.original.text!==""||f.updated.text!=="")}afterLineRange(t){return this.state!=="accepted"?this.lineRange:t?this.result.charStart+Nl(this.result.suggestedCode)>Nl(t.getText())?this.lineRange:new Vn(t.positionAt(this.result.charStart).line,t.positionAt(this.result.charStart+Nl(this.result.suggestedCode)).line):new Vn(this.lineRange.start,this.lineRange.stop+this.result.suggestedCode.split(`
`).length-this.result.existingCode.split(`
`).length)}intersects(t){return this.qualifiedPathName.equals(t.qualifiedPathName)&&(this.lineRange.equals(t.lineRange)||this.lineRange.intersects(t.lineRange))}with(t){return new e(t.requestId??this.requestId,t.mode??this.mode,t.scope??this.scope,t.result??this.result,t.qualifiedPathName??this.qualifiedPathName,t.lineRange??this.lineRange,t.uriScheme??this.uriScheme,t.occurredAt??this.occurredAt,t.state??this.state)}static from(t){return new e(t.requestId,t.mode,t.scope,t.result,Le.from(t.qualifiedPathName),new Vn(t.lineRange.start,t.lineRange.stop),t.uriScheme,t.occurredAt,t.state)}};var Zc=q(require("vscode"));var ISe={border:0,background:1,line:2},gN=class extends X{constructor(r){super();this._styles=r;this._decorationTypes.insertion=this._createDecorations(this._styles.insertion),this._decorationTypes.deletion=this._createDecorations(this._styles.deletion),this.addDisposables(...Object.values(this._decorationTypes.insertion).flat(),...Object.values(this._decorationTypes.deletion).flat())}_decorationTypes={insertion:{upper:[],lower:[]},deletion:{upper:[],lower:[]}};_createDecorations(r){return{upper:this._createHalfDecoration(r,!1),lower:this._createHalfDecoration(r,!0)}}_createHalfDecoration(r,n){let i=s=>n?`${s} 0 0 0`:`0 0 ${s} 0`;return[Zc.window.createTextEditorDecorationType({borderWidth:i(r.borderWidth),light:{borderColor:r.lightBorderColor},dark:{borderColor:r.darkBorderColor},borderStyle:"solid",isWholeLine:!0}),Zc.window.createTextEditorDecorationType({borderWidth:i("0.2em"),light:{borderColor:r.lightBackgroundColor},dark:{borderColor:r.darkBackgroundColor},borderStyle:"solid",isWholeLine:!0}),Zc.window.createTextEditorDecorationType({borderWidth:i("0.1em"),borderColor:r.lineColor,borderStyle:"solid",isWholeLine:!0,overviewRulerColor:n?r.overviewRulerColor:void 0,overviewRulerLane:n?Zc.OverviewRulerLane.Right:void 0})]}addEmptyDecorations(r){for(let n of["insertion","deletion"])for(let i of["upper","lower"])for(let s of this._decorationTypes[n][i])r.set(s,[])}addDecorations(r,n,i){if(n>0)for(let s of this._decorationTypes[r].upper)i.get(s)?.push(new Zc.Range(n-1,0,n-1,0));for(let s of this._decorationTypes[r].lower)i.get(s)?.push(new Zc.Range(n,0,n,0))}addSimpleInsertionDecoration(r,n){r>0&&n.get(this._decorationTypes.insertion.upper[ISe.line])?.push(new Zc.Range(r-1,0,r-1,0)),n.get(this._decorationTypes.insertion.lower[ISe.line])?.push(new Zc.Range(r,0,r,0))}};var pN=class e extends hN{constructor(r,n,i,s,o,a,l){super();this._context=r;this._workspaceManager=n;this._keybindingWatcher=i;this._configListener=s;this._nextEditSessionEventReporter=o;this._completionVisible=a;this._showAllLineHighlights=l;let c={active:{insertion:{light:"nextedit-addition-selected-light.svg",dark:"nextedit-addition-selected-dark.svg"},insertionInBetween:{light:"nextedit-addition-inbetween-selected-light.svg",dark:"nextedit-addition-inbetween-selected-dark.svg"},deletion:{light:"nextedit-deletion-selected-light.svg",dark:"nextedit-deletion-selected-dark.svg"},modification:{light:"nextedit-change-selected-light.svg",dark:"nextedit-change-selected-dark.svg"}},inactive:{insertion:{light:"nextedit-addition-light.svg",dark:"nextedit-addition-dark.svg"},insertionInBetween:{light:"nextedit-addition-inbetween-light.svg",dark:"nextedit-addition-inbetween-dark.svg"},deletion:{light:"nextedit-deletion-light.svg",dark:"nextedit-deletion-dark.svg"},modification:{light:"nextedit-change-light.svg",dark:"nextedit-change-dark.svg"}},applied:{light:"nextedit-applied-light.svg",dark:"nextedit-applied-dark.svg"},appliedInBetween:{light:"nextedit-applied-inbetween-light.svg",dark:"nextedit-applied-inbetween-dark.svg"},grayline:{light:"bg-next-edit-gray-line.svg",dark:"bg-next-edit-gray-line.svg"},grayhook:{light:"bg-next-edit-gray-hook.svg",dark:"bg-next-edit-gray-hook.svg"}},u=new Map([["insertion",{inline:"rgb(from var(--vscode-diffEditor-insertedTextBackground) r g b / calc(alpha * 1.8))",focusLine:"rgb(from var(--vscode-diffEditor-insertedTextBackground) r g b / calc(alpha * 1.3))",lineBackground:new We.ThemeColor("diffEditor.insertedLineBackground"),lineOverview:new We.ThemeColor("editorOverviewRuler.addedForeground")}],["deletion",{inline:"rgb(from var(--vscode-diffEditor-removedTextBackground) r g b / calc(alpha * 2))",focusLine:"var(--vscode-diffEditor-removedLineBackground)",lineBackground:"rgb(from var(--vscode-diffEditor-removedLineBackground) r g b / calc(alpha * 0.5))",lineOverview:new We.ThemeColor("editorOverviewRuler.deletedForeground")}],["modification",{inline:"rgb(from var(--vscode-editorOverviewRuler-modifiedForeground) r g b / calc(alpha * 0.5))",focusLine:"rgb(from var(--vscode-editorOverviewRuler-modifiedForeground) r g b / calc(alpha * 0.35))",lineBackground:"rgb(from var(--vscode-editorOverviewRuler-modifiedForeground) r g b / calc(alpha * 0.2))",lineOverview:new We.ThemeColor("editorOverviewRuler.modifiedForeground")}]]),f=new Map([["insertion",{dark:{backgroundColor:"#27E14966",color:"#BCF0C9"},light:{backgroundColor:"#82CC0266",color:"#4B543E"}}],["deletion",{dark:{backgroundColor:"#FF272766",color:"#F4A2A6"},light:{backgroundColor:"#FF272766",color:"#412C2D"}}],["modification",{dark:{backgroundColor:"#FFE30966",color:"#F4EEB6"},light:{backgroundColor:"#EDBD0099",color:"#433C1E"}}]]),p={light:{after:{color:"color-mix(in srgb, rgb(0, 0, 0) 50%, var(--vscode-editor-background))",backgroundColor:"color-mix(in srgb, rgb(0,0,0) 15%, var(--vscode-editor-background))"}},dark:{after:{color:"color-mix(in srgb, rgb(255, 255, 255) 90%, var(--vscode-editor-background))",backgroundColor:"color-mix(in srgb, rgb(255, 255, 255) 25%, var(--vscode-editor-background))"}}},g=(C,E,w,B="75%")=>{let R=c[C][E][w];return{gutterIconPath:We.Uri.joinPath(r.extensionUri,"media","next-edit",R),gutterIconSize:B}},m=(C,E,w="75%")=>{let B=c[C][E];return{gutterIconPath:We.Uri.joinPath(r.extensionUri,"media","next-edit",B),gutterIconSize:w}};this._gutterDecorations={active:{insertion:We.window.createTextEditorDecorationType({light:g("active","insertion","light"),dark:g("active","insertion","dark"),overviewRulerColor:u.get("insertion")?.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right}),insertionInBetween:We.window.createTextEditorDecorationType({light:g("active","insertionInBetween","light"),dark:g("active","insertionInBetween","dark"),overviewRulerColor:u.get("insertion")?.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right}),deletion:We.window.createTextEditorDecorationType({light:g("active","deletion","light"),dark:g("active","deletion","dark"),overviewRulerColor:u.get("deletion")?.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right}),modification:We.window.createTextEditorDecorationType({light:g("active","modification","light"),dark:g("active","modification","dark"),overviewRulerColor:u.get("modification")?.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right})},inactive:{insertion:We.window.createTextEditorDecorationType({light:g("inactive","insertion","light"),dark:g("inactive","insertion","dark"),overviewRulerColor:u.get("insertion")?.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right}),insertionInBetween:We.window.createTextEditorDecorationType({light:g("inactive","insertionInBetween","light"),dark:g("inactive","insertionInBetween","dark"),overviewRulerColor:u.get("insertion")?.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right}),deletion:We.window.createTextEditorDecorationType({light:g("inactive","deletion","light"),dark:g("inactive","deletion","dark"),overviewRulerColor:u.get("deletion")?.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right}),modification:We.window.createTextEditorDecorationType({light:g("inactive","modification","light"),dark:g("inactive","modification","dark"),overviewRulerColor:u.get("modification")?.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right})},applied:We.window.createTextEditorDecorationType({light:m("applied","light"),dark:m("applied","dark")}),appliedInBetween:We.window.createTextEditorDecorationType({light:m("appliedInBetween","light"),dark:m("appliedInBetween","dark")}),grayline:We.window.createTextEditorDecorationType({light:m("grayline","light","cover"),dark:m("grayline","dark","cover")}),grayhook:We.window.createTextEditorDecorationType({light:m("grayhook","light","cover"),dark:m("grayhook","dark","cover")})},this.addDisposables(...Object.values(this._gutterDecorations.active),...Object.values(this._gutterDecorations.inactive),this._gutterDecorations.applied,this._gutterDecorations.appliedInBetween,this._gutterDecorations.grayline,this._gutterDecorations.grayhook),this._focusLineDecorations=new Map,this._focusWholeLineDecorations=new Map,this._wholeLineDecorations=new Map,this._lineDecorations=new Map,this._zeroWidthChangeDecorationsRight=new Map,this._zeroWidthChangeDecorationsLeft=new Map,this._zeroWidthChangeDecorationsStartLine=new Map,this._zeroWidthChangeDecorationsEndLine=new Map;for(let[C,E]of u){this._focusLineDecorations.set(C,We.window.createTextEditorDecorationType({backgroundColor:E.focusLine,isWholeLine:!1,overviewRulerColor:E.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right})),this._focusWholeLineDecorations.set(C,We.window.createTextEditorDecorationType({backgroundColor:E.focusLine,isWholeLine:!0,overviewRulerColor:E.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right})),this._lineDecorations.set(C,We.window.createTextEditorDecorationType({backgroundColor:E.lineBackground,isWholeLine:!1,overviewRulerColor:E.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right})),this._wholeLineDecorations.set(C,We.window.createTextEditorDecorationType({backgroundColor:E.lineBackground,isWholeLine:!0,overviewRulerColor:E.lineOverview,overviewRulerLane:We.OverviewRulerLane.Right}));let w={borderStyle:"solid",borderColor:E.inline};this._zeroWidthChangeDecorationsRight.set(C,We.window.createTextEditorDecorationType({borderWidth:"0 0.2em 0 0",...w})),this._zeroWidthChangeDecorationsLeft.set(C,We.window.createTextEditorDecorationType({borderWidth:"0 0 0 0.2em",...w})),this._zeroWidthChangeDecorationsStartLine.set(C,We.window.createTextEditorDecorationType({borderWidth:"0 0 0 0.4em",...w})),this._zeroWidthChangeDecorationsEndLine.set(C,We.window.createTextEditorDecorationType({borderWidth:"0 0.4em 0 0",...w}))}this.addDisposables(...this._focusLineDecorations.values(),...this._focusWholeLineDecorations.values(),...this._lineDecorations.values(),...this._wholeLineDecorations.values(),...this._zeroWidthChangeDecorationsRight.values(),...this._zeroWidthChangeDecorationsLeft.values(),...this._zeroWidthChangeDecorationsStartLine.values(),...this._zeroWidthChangeDecorationsEndLine.values()),this._inlineDecorations=new Map;for(let[C,E]of f)this._inlineDecorations.set(C,We.window.createTextEditorDecorationType({...E,borderRadius:"0.2em"}));this.addDisposables(...this._inlineDecorations.values()),this._bottomLineDecorationType=We.window.createTextEditorDecorationType({after:{backgroundColor:"var(--vscode-editor-background)"}}),this.addDisposables(this._bottomLineDecorationType),this._bottomBoxDecorationType=We.window.createTextEditorDecorationType({light:{after:{backgroundColor:p.light.after.backgroundColor}},dark:{after:{backgroundColor:p.dark.after.backgroundColor}}}),this.addDisposables(this._bottomBoxDecorationType),this._bottomBoxLogoDecorationType=We.window.createTextEditorDecorationType({light:{after:{color:p.light.after.color}},dark:{after:{color:`color-mix(in srgb, ${p.dark.after.color} 50%, ${p.dark.after.backgroundColor})`}}}),this.addDisposables(this._bottomBoxLogoDecorationType),[this._rightSpacerDecorationType,this._rightKeybindingDecorationTypes,this._rightDecorationType]=bSe(),this.addDisposables(this._rightSpacerDecorationType,...this._rightKeybindingDecorationTypes,this._rightDecorationType),this._bottomTextDecorationType=We.window.createTextEditorDecorationType({dark:{after:{color:p.dark.after.color,backgroundColor:p.dark.after.backgroundColor}},light:{after:{color:p.light.after.color,backgroundColor:p.light.after.backgroundColor}}}),this.addDisposables(this._bottomTextDecorationType);let y={light:{borderColor:"#87BFFF80",backgroundColor:"#87BFFF33",overviewRulerColor:"#87BFFF"},dark:{borderColor:"#9ECBFF80",backgroundColor:"#9ECBFF1A",overviewRulerColor:"#9ECBFF"},borderStyle:"solid",isWholeLine:!0,borderWidth:"0.1em",borderRadius:"0.4em",overviewRulerLane:We.OverviewRulerLane.Right},v={light:{borderColor:"#87BFFF",backgroundColor:"#87BFFF33",overviewRulerColor:"#87BFFF"},dark:{borderColor:"#9ECBFF",backgroundColor:"#9ECBFF1A",overviewRulerColor:"#9ECBFF"},borderStyle:"solid",isWholeLine:!0,borderWidth:"0.2em",borderRadius:"0.4em",overviewRulerLane:We.OverviewRulerLane.Right};this._zeroHeightDiffLineBuilder=new gN({insertion:{lineColor:"rgb(from var(--vscode-diffEditor-insertedLineBackground) r g b / 1)",lightBorderColor:y.light.borderColor,darkBorderColor:y.dark.borderColor,lightBackgroundColor:"color-mix(in srgb, #87BFFF 33%, var(--vscode-editor-background))",darkBackgroundColor:"color-mix(in srgb, #9ECBFF 10%, var(--vscode-editor-background))",borderWidth:"0.3em",overviewRulerColor:u.get("insertion")?.lineOverview},deletion:{lineColor:"rgb(from var(--vscode-diffEditor-removedLineBackground) r g b / calc(alpha * 1.3))",lightBorderColor:v.light.borderColor,darkBorderColor:v.dark.borderColor,lightBackgroundColor:"color-mix(in srgb, #87BFFF 33%, var(--vscode-editor-background))",darkBackgroundColor:"color-mix(in srgb, #9ECBFF 10%, var(--vscode-editor-background))",borderWidth:"0.4em",overviewRulerColor:u.get("deletion")?.lineOverview}}),this.addDisposables(this._zeroHeightDiffLineBuilder),this._activeChangeDecoration1Line=new Map,this._activeChangeDecorationTop=new Map,this._activeChangeDecorationMiddle=new Map,this._activeChangeDecorationBottom=new Map;for(let{baseType:C,mode:E}of[{baseType:y,mode:0},{baseType:v,mode:1}])this._activeChangeDecoration1Line.set(E,We.window.createTextEditorDecorationType({...C})),this._activeChangeDecorationTop.set(E,We.window.createTextEditorDecorationType({...C,borderWidth:[C.borderWidth,C.borderWidth,"0",C.borderWidth].join(" "),borderRadius:[C.borderRadius,C.borderRadius,"0","0"].join(" ")})),this._activeChangeDecorationMiddle.set(E,We.window.createTextEditorDecorationType({...C,borderRadius:void 0,borderWidth:["0",C.borderWidth,"0",C.borderWidth].join(" ")})),this._activeChangeDecorationBottom.set(E,We.window.createTextEditorDecorationType({...C,borderWidth:["0",C.borderWidth,C.borderWidth,C.borderWidth].join(" "),borderRadius:["0","0",C.borderRadius,C.borderRadius].join(" ")}));this.addDisposables(...this._activeChangeDecoration1Line.values(),...this._activeChangeDecorationTop.values(),...this._activeChangeDecorationMiddle.values(),...this._activeChangeDecorationBottom.values())}_gutterDecorations;_lineDecorations;_wholeLineDecorations;_focusLineDecorations;_focusWholeLineDecorations;_inlineDecorations;_rightDecorationType;_bottomBoxLogoDecorationType;_rightKeybindingDecorationTypes;_rightSpacerDecorationType;_bottomLineDecorationType;_bottomBoxDecorationType;_bottomTextDecorationType;_zeroWidthChangeDecorationsRight;_zeroWidthChangeDecorationsLeft;_zeroWidthChangeDecorationsStartLine;_zeroWidthChangeDecorationsEndLine;_activeChangeDecoration1Line;_activeChangeDecorationTop;_activeChangeDecorationMiddle;_activeChangeDecorationBottom;_zeroHeightDiffLineBuilder;shouldDrawBottomDecorations=new da(!0);babyGlobalHintRange;bottomBoxRange;cursorHintRange;_filesWithGutterIconActions=new Set;_linesWithGutterIconActions=[];_logger=j("BackgroundDecorationManager");static suppressGhostTextLineThreshold=3;static _maxGrayTextChars=40;static _maxBottomTextPathChars=40;static _maxBottomTextChars=80;createEmptyDecorations(){let r=new Map;r.set(this._rightSpacerDecorationType,[]),r.set(this._rightDecorationType,[]),this._rightKeybindingDecorationTypes.forEach(i=>{r.set(i,[])}),r.set(this._bottomLineDecorationType,[]),r.set(this._bottomBoxDecorationType,[]),r.set(this._bottomBoxLogoDecorationType,[]),r.set(this._bottomTextDecorationType,[]),this._zeroHeightDiffLineBuilder.addEmptyDecorations(r),this._activeChangeDecoration1Line.forEach(i=>{r.set(i,[])}),this._activeChangeDecorationTop.forEach(i=>{r.set(i,[])}),this._activeChangeDecorationMiddle.forEach(i=>{r.set(i,[])}),this._activeChangeDecorationBottom.forEach(i=>{r.set(i,[])}),Object.values(this._gutterDecorations.active).forEach(i=>{r.set(i,[])}),Object.values(this._gutterDecorations.inactive).forEach(i=>{r.set(i,[])}),r.set(this._gutterDecorations.applied,[]),r.set(this._gutterDecorations.appliedInBetween,[]),r.set(this._gutterDecorations.grayline,[]),r.set(this._gutterDecorations.grayhook,[]);let n=["insertion","deletion","modification"];for(let i of n)r.set(this._lineDecorations.get(i),[]),r.set(this._focusLineDecorations.get(i),[]),r.set(this._wholeLineDecorations.get(i),[]),r.set(this._focusWholeLineDecorations.get(i),[]),r.set(this._inlineDecorations.get(i),[]),r.set(this._zeroWidthChangeDecorationsRight.get(i),[]),r.set(this._zeroWidthChangeDecorationsLeft.get(i),[]),r.set(this._zeroWidthChangeDecorationsStartLine.get(i),[]),r.set(this._zeroWidthChangeDecorationsEndLine.get(i),[]);return r}decorate(r,n){this._filesWithGutterIconActions.clear(),this._linesWithGutterIconActions=[],super.decorate(r,n),We.commands.executeCommand("setContext","vscode-augment.nextEdit.linesWithGutterIconActions",this._linesWithGutterIconActions),We.commands.executeCommand("setContext","vscode-augment.nextEdit.filesWithGutterIconActions",Array.from(this._filesWithGutterIconActions))}addDecorationsForItem(r,n,i,s){if(!i.qualifiedPathName.equals(n.document.uri)||i.changeType==="noop")return r;let o=i.equals(s.activeSuggestion),a=o||i.equals(s.hintSuggestion?.suggestion),l=i.state==="accepted",c=i.makeOneLineDiffSpans(),u=l?i.afterLineRange(n.document):i.lineRange,f;u.start===0||i.changeType!=="insertion"&&!(c[0]&&c[0].type==="insertion"&&c[0].updated.isWholeLine)?f=u:n.document.lineAt(u.start-1).text.length>0?f=new Vn(u.start-1,u.stop):f=new Vn(u.start-1,u.stop-1);let p=Y=>{l||(this._filesWithGutterIconActions.add(i.qualifiedPathName.absPath),this._linesWithGutterIconActions.push(Y+1))},g=i.changeType==="insertion"&&i.lineRange.length===0?"insertionInBetween":i.changeType,m=s.activeSuggestion!==void 0&&s.activeSuggestion.state!=="accepted",y;l&&u.length===0?y=this._gutterDecorations.appliedInBetween:l?y=this._gutterDecorations.applied:o||!m&&a?y=this._gutterDecorations.active[g]:y=this._gutterDecorations.inactive[g];let v=i.previewBoxRange(n.document);r.get(y)?.push(bg(v.start)),p(v.start);for(let Y=v.start+1;Y<v.stop-1;Y++)r.get(this._gutterDecorations.grayline)?.push(bg(Y)),p(Y);if(v.stop-v.start>1&&(r.get(this._gutterDecorations.grayhook)?.push(bg(v.stop-1)),p(v.stop-1)),s.isAnimating&&s.activeSuggestion&&!o||a&&this._completionVisible())return r;let C=o,E=this._showAllLineHighlights()&&!C&&!l,w=Fs(f);if(E&&!o)if(i.changeType==="insertion")this._zeroHeightDiffLineBuilder.addSimpleInsertionDecoration(w.start.line+1,r);else{let Y=f.length===0||i.result.existingCode===`
`,U=[[this._lineDecorations,this._wholeLineDecorations],[this._focusLineDecorations,this._focusWholeLineDecorations]][+a][+Y],ce=w;Y&&(ce=w.with(void 0,w.end.translate(-1,0))),r.get(U.get(i.changeType))?.push(ce)}else if(C){if(i.changeType==="insertion"&&!l||i.changeType==="deletion"&&l)this._zeroHeightDiffLineBuilder.addDecorations(i.changeType,w.start.line+(i.changeType==="insertion"?1:0),r);else if(i.changeType===(l?"deletion":"insertion")){let U=f.length===0?this._focusWholeLineDecorations:this._focusLineDecorations;r.get(U.get(i.changeType))?.push(w)}for(let[U,ce]of xCt(n.document,i,!l))if(U==="noop")E&&r.get(this._focusLineDecorations.get(i.changeType))?.push(ce);else if(U==="deletion"&&ce.start.character===0&&ce.end.character===0){r.get(this._focusLineDecorations.get(U))?.push(ce);continue}else ce.start.isEqual(ce.end)?this._addZeroWidthDecoration(n.document,r,ce,U):r.get(this._inlineDecorations.get(U)).push(ce);let Y=l?1:0;this._addPreviewBox(r,n,i,Y)}let B=i.result.changeDescription,R=n.selection,N=n.visibleRanges.some(Y=>Y.contains(Fs(f))),W=this._configListener.config.nextEdit.useCursorDecorations,Z=R.active.line-f.start,te=!W||Math.abs(Z)<=e.suppressGhostTextLineThreshold;return a&&N&&!l&&!o&&(te&&this.addKeybindingDecor(f.start,r,n,ca.commandID),this.addGrayText(`${B}`,f.start,r,n),this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"suggestion-hint-shown","background")),N&&!l&&this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"suggestion-visibly-shown","background"),r}_addZeroWidthDecoration(r,n,i,s){if(i.start.character===0){n.get(this._zeroWidthChangeDecorationsStartLine.get(s)).push(new We.Range(i.start,i.start.translate(0,1)));return}else if(i.start.character===r.lineAt(i.start.line).text.length){n.get(this._zeroWidthChangeDecorationsEndLine.get(s)).push(new We.Range(i.start.translate(0,-1),i.start));return}else n.get(this._zeroWidthChangeDecorationsLeft.get(s)).push(new We.Range(i.start,i.start.translate(0,1))),n.get(this._zeroWidthChangeDecorationsRight.get(s)).push(new We.Range(i.start.translate(0,-1),i.start))}addKeybindingDecor(r,n,i,s=ca.commandID){nw(s,this._keybindingWatcher,this._context).map((o,a)=>{n.get(this._rightKeybindingDecorationTypes[a])?.push({range:Eg(i,r),renderOptions:o})})}addGrayText(r,n,i,s){i.get(this._rightSpacerDecorationType).push({range:Eg(s,n)});let o=pc(r,e._maxGrayTextChars);i.get(this._rightDecorationType).push({range:Eg(s,n),renderOptions:{after:{contentText:o}}})}addExtraDecorationsForActiveEditor(r,n,i,s){(0,BSe.default)(n===We.window.activeTextEditor);let o=this._workspaceManager.safeResolvePathName(n.document.uri);if(!o)return r;this.babyGlobalHintRange=void 0,this.bottomBoxRange=void 0,this.cursorHintRange=void 0;let a=s.hintSuggestion?.suggestion;if(this._completionVisible()||!a||n.visibleRanges.length===0)return r;let l=this._configListener.config.nextEdit.useCursorDecorations;if(a.qualifiedPathName.equals(n.document.uri)){let c=a.result.changeDescription,u=n.selection,f;if(a.changeType!=="insertion"||a.lineRange.start===0?f=a.lineRange:n.document.lineAt(a.lineRange.start-1).text.length>0?f=new Vn(a.lineRange.start-1,a.lineRange.stop):f=new Vn(a.lineRange.start-1,a.lineRange.stop-1),l){let p=u.intersection(Fs(f)),g=u.start.line-f.start,m=Math.abs(g)>e.suppressGhostTextLineThreshold||!n.visibleRanges.some(v=>v.contains(Fs(f))),y="";!p&&m&&(y=`${g>0?"\u2191":"\u2193"}${Math.abs(g)} lines: `),(y||p)&&(this.addKeybindingDecor(u.start.line,r,n,ca.commandID),this.addGrayText(`${y}${c}`,u.start.line,r,n),this.cursorHintRange=Eg(n,u.start.line),this._nextEditSessionEventReporter.reportEventFromSuggestion(a,"suggestion-offset-text-shown","background"))}else{if(n.visibleRanges.some(g=>g.contains(Fs(a.highlightRange))))return r;let p=f.start<u6(n)[0].start.line?"\u2191":"\u2193";this.addBottomDecoration(r,n,`${p} ${c}`),this._nextEditSessionEventReporter.reportEventFromSuggestion(a,"suggestion-bottom-text-shown","background")}}else if(this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions){if(l){this.addKeybindingDecor(n.selection.active.line,r,n);let c="in file: ";this.addGrayText(`${c}${pc(a.qualifiedPathName.relPath,e._maxGrayTextChars-Nl(c),!0)}`,n.selection.active.line,r,n),this.babyGlobalHintRange=Eg(n,n.selection.active.line)}else{let c="\u21AA ",u=Ol(o.relPath,a.qualifiedPathName.relPath),f=pc(u.length<a.qualifiedPathName.relPath.length?u:a.qualifiedPathName.relPath,e._maxBottomTextPathChars,!0),p=a.result.changeDescription,g=pc(`${c}${f}: ${p}`,e._maxBottomTextChars,!1);this.addBottomDecoration(r,n,g)}this._nextEditSessionEventReporter.reportEventFromSuggestion(a,"suggestion-global-bottom-text-shown","background")}return r}addBottomDecoration(r,n,i){if(n.visibleRanges.length===0||!this.shouldDrawBottomDecorations.value)return;let s=u6(n),o=s[s.length-1],a=o.end.line>=n.document.lineCount-1,l=n.selection,c=a?l.active.line>o.end.line-2:l.active.line>o.end.line-3;if(s.some(C=>C.intersection(l))&&c)return;let u=pc(i,e._maxBottomTextChars),f=C=>{if(C<0||C>=n.document.lineCount)return;let E=n.document.lineAt(C).text.length;r.get(this._bottomLineDecorationType).push({range:new We.Range(C,E,C,E),renderOptions:{after:{margin:`0 ${-E}ch 0 ${-E}ch`,contentText:`${"\xA0".repeat(E)}`,padding:"0 0 0.3lh 0"}}})};a?f(o.end.line):(f(o.end.line-1),f(o.end.line),f(o.end.line+1),f(o.end.line+2));let p=a?n.document.lineCount-1:o.end.line-1,g=n.document.lineAt(p).text.length,m=new We.Range(p,g,p,g);this.babyGlobalHintRange=new We.Range(p,0,p,g),this.bottomBoxRange=this.babyGlobalHintRange;let y=20;r.get(this._bottomBoxDecorationType).push({range:m,renderOptions:{after:{margin:`0 -${y+1}ch 0 0`,contentText:`${"\xA0".repeat(y)}`,padding:"0.2em 1ch 0.15em 1ch",borderRadius:"0.3em"}}});let v={contentText:"\uE901",fontFamily:'"Augment.vscode-augment/augment-icon-font.woff"',verticalAlign:"top",margin:"0 1ch 0 0"};r.get(this._bottomBoxLogoDecorationType).push({renderOptions:{light:{after:v},dark:{after:v}},range:m}),this.addKeybindingDecor(p,r,n),r.get(this._bottomTextDecorationType).push({range:m,renderOptions:{after:{margin:"0 0 0 1ch",contentText:u,padding:"0.2em 1ch 0.15em 0",borderRadius:"0 0.3em 0.3em 0"}}})}_addPreviewBox(r,n,i,s){let o=s===1;if(i.changeType==="insertion"&&!o||i.changeType==="deletion"&&o)return;let a=i.previewBoxRange(n.document);a.stop-a.start<=1?r.get(this._activeChangeDecoration1Line.get(s))?.push(bg(a.start)):r.get(this._activeChangeDecorationTop.get(s))?.push(bg(a.start));for(let l=a.start+1;l<a.stop-1;l++)r.get(this._activeChangeDecorationMiddle.get(s))?.push(bg(l));a.stop-a.start>1&&r.get(this._activeChangeDecorationBottom.get(s))?.push(bg(a.stop-1))}};function xCt(e,t,r){let n=t.result.existingCode,i=t.result.suggestedCode,s=[];for(let o of t.result.diffSpans){let a=n.slice(o.original.start,o.original.stop),l=i.slice(o.updated.start,o.updated.stop),c=el.determineChangeType(a,l),u=r?o.original:o.updated,f=t.result.charStart+u.start,p=t.result.charStart+u.stop;c===(r?"insertion":"deletion")&&e.positionAt(f).character===0&&l.endsWith(`
`)&&(f=t.result.charStart+u.start-1),s.push([c,new We.Range(e.positionAt(f),e.positionAt(p))])}return s}var AN=q(require("vscode"));var mN=class{constructor(t,r,n){this._suggestionManager=t;this._configListener=r;this._nextEditSessionEventReporter=n}provideCodeActions(t,r,n,i){if(!this._configListener.config.enableDebugFeatures)return;let s=new Vn(r.start.line,r.end.line),o=this._suggestionManager.getActiveSuggestions().find(c=>c.changeType!=="noop"&&c.previewCursorRange(t).intersects(s));if(!o)return;let a=o.result.changeDescription||"Augment: Accept suggestion",l=new AN.CodeAction(a,AN.CodeActionKind.QuickFix);return l.command={command:yf.commandID,title:a,arguments:[o]},this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"code-action-shown","code-action"),[l]}resolveCodeAction(t,r){return t}};var ti=q(require("vscode"));var kSe=q(require("os"));var Tzt=j("markdown-html-utils");function DSe(){return Ks("1.92.0")}function wCt(e){return e.replace(/\$\(([\w-]+)\)/gi,"&dollar;($1)")}function jv(e){return wCt(dN(e))}var iw=class e{_spaces;_tabs;constructor({spaces:t,tabs:r}){this._spaces=t,this._tabs=r}static computeCommonLeadingWhitespace(t){if(t.length===0)return new e({spaces:0,tabs:0});let n=t.filter(o=>o.trim().length>0).map(o=>{let a=o.match(/^([ \t]*)/);return a?a[1]:""}),i=n.map(o=>o.length-o.replace(/ /g,"").length),s=n.map(o=>o.length-o.replace(/\t/g,"").length);return new e({spaces:i.reduce((o,a)=>Math.min(o,a),i[0]),tabs:s.reduce((o,a)=>Math.min(o,a),s[0])})}trimLeadingIncremental(t){let r=this._spaces,n=this._tabs,i=0;for(;i<t.length&&(r>0||n>0);){let s=t[i++];if(s===" "&&r>0)r--;else if(s==="	"&&n>0)n--;else return}return{trimmed:t.slice(i),remaining:new e({spaces:r,tabs:n})}}trimLeadingFull(t,r){let n=this.trimLeadingIncremental(t);return n?!n.remaining.isEmpty()&&t.length>0?(r?.debug("Untrimmed whitespace"),t):n.trimmed:(r?.debug(`No common leading whitespace for line: ${t}`),t)}isEmpty(){return this._spaces===0&&this._tabs===0}total(){return this._spaces+this._tabs}};function MSe(e,t,r,n,i,s,o){let a=ICt(e.makeOneLineDiffSpans()),l=a.filter(N=>N.type==="updated").length-a.filter(N=>N.type==="original").length,c=(e.lineRange.stop+2+l).toString().length+1,u;if(s){let N=t?.split(`
`)??[],W=r?.split(`
`)??[],Z=[...N,...a.map(te=>te.spans.map(Y=>Y.text).join("")),...W];u=iw.computeCommonLeadingWhitespace(Z),t=N.map(te=>u.trimLeadingFull(te,o)).join(`
`),r=W.map(te=>u.trimLeadingFull(te,o)).join(`
`)}else u=iw.computeCommonLeadingWhitespace([]);let f=n,{rendered:p,longestLineLength:g}=DCt(a,f,i,e.result.truncationChar,u,o);t&&(t=pc(t,g)),r&&(r=pc(r,g));let m=Zv(e.lineRange.start,c),y=t?`<span style="color:${i.lineNumberColor};">${m}${m}<span class="codicon codicon-blank"></span> ${jv(RSe(sw(t),g+1))}</span>
`:"",v=Zv(e.lineRange.stop+1,c),C=Zv(e.lineRange.stop+1+l,c),E="",w="";kSe.default.platform()==="win32"&&(E="<strong>",w="</strong>");let B="background-color:var(--vscode-editor-background);"+(SCt()?"border-radius:5px;":""),R=r?`
<span style="color:${i.lineNumberColor};">${v}${C}<span class="codicon codicon-blank"></span> ${jv(RSe(sw(r),g+1))}</span>`:"";return{result:`
${E}<pre><span style="${B}">${y}${p}${R}</span></pre>${w}
`,longestLineLength:g+c}}function SCt(){return DSe()&&!Ks("1.97.0")}function ICt(e){let t=[],r=[];if(e.length===0)return[];let n={type:"noop",spans:[],originalLineNumber:-1,updatedLineNumber:-1},i={type:"noop",spans:[],originalLineNumber:-1,updatedLineNumber:-1},s=()=>{n.spans.some(a=>a.text.length>0)&&t.push(n)},o=()=>{i.spans.some(a=>a.text.length>0)&&r.push(i)};for(let a of e)(a.original.text!==""||!a.updated.isWholeLine)&&(n.spans.push({type:a.type,text:a.original.text,charRange:a.original.charRange}),n.originalLineNumber=a.original.line,a.type!=="noop"?n.type="original":n.updatedLineNumber=a.updated.line),(a.updated.text!==""||!a.original.isWholeLine)&&(i.spans.push({type:a.type,text:a.updated.text,charRange:a.updated.charRange}),i.updatedLineNumber=a.updated.line,a.type!=="noop"?i.type="updated":(i.originalLineNumber=a.original.line,i.type!=="noop"?n.type="original":n.type!=="noop"&&(i.type="updated"))),a.original.text.endsWith(`
`)&&(s(),n={type:"noop",spans:[],originalLineNumber:-1,updatedLineNumber:-1}),a.updated.text.endsWith(`
`)&&(o(),i={type:"noop",spans:[],originalLineNumber:-1,updatedLineNumber:-1});return s(),o(),BCt(t,r)}function BCt(e,t){let r=[],n=0,i=0,s=0;for(;i<e.length||s<t.length;){if(n++>1e4)throw new Error("infinite loop in groupLines");for(;i<e.length&&e[i].type!=="noop";)r.push(e[i]),i++;for(;s<t.length&&t[s].type!=="noop";)r.push(t[s]),s++;for(;i<e.length&&s<t.length&&e[i].type==="noop"&&t[s].type==="noop";)r.push(e[i]),i++,s++}return r}function DCt(e,t,r,n,i,s){if(e.length===0)return{rendered:"",longestLineLength:0};let{linePadAmounts:o,longestLineLength:a}=TCt(e,t,i),c=(e.map(f=>f.updatedLineNumber).concat(e.map(f=>f.originalLineNumber)).reduce((f,p)=>Math.max(f,p),0)+2).toString().length+1,u=[];for(let f=0;f<e.length;f++){let p=e[f],g,m;p.type==="noop"?(g=p.spans.map(E=>E.text).join(""),g=i.trimLeadingFull(g),m="#00000000"):p.type==="original"?(g=TSe(p.spans,!0,r,i,s),m=r.originalLineColor):(g=TSe(p.spans,!1,r,i,s),m=r.updatedLineColor),g=sw(g);let y=(p.type!=="updated"?p.originalLineNumber+1:"").toString(),v=(p.type!=="original"?p.updatedLineNumber+1:"").toString(),C=p.type==="noop"?'<span class="codicon codicon-blank"></span>':p.type==="original"?'<span class="codicon codicon-diff-remove"></span>':'<span class="codicon codicon-diff-insert"></span>';u.push(`<span style="color:${r.lineNumberColor};background-color:${m};">${Zv(y,c)}${Zv(v,c)}</span><span style="background-color:${m};">${C} </span>${g}<span style="background-color:${m};">${" ".repeat(o[f])}</span>`)}return n!==void 0&&u.push(`<span style="color:${r.lineNumberColor};">${Zv(" ",2*c+1)}...(MORE CHANGES)...</span>`),{rendered:u.join(`
`),longestLineLength:a}}function TCt(e,t,r){let n=e.map(s=>sw(s.spans.map(o=>o.text).join(""))),i=Math.max(t,n.map(s=>s.length).reduce((s,o)=>Math.max(s,o),0)-r.total());return{linePadAmounts:n.map(s=>i-Math.max(0,s.length-r.total())+1),longestLineLength:i}}function TSe(e,t,r,n,i){let s=[];if(e.length===0||e.every(o=>o.text===""))return"";for(let o of e){let a;o.type==="noop"?t?a=`background-color:${r.originalLineColor};`:a=`background-color:${r.updatedLineColor};`:t?a=`background-color:${r.originalTextColor};`:a=`background-color:${r.updatedTextColor};`;let l=o.text,c=n.trimLeadingIncremental(o.text);c?(l=c.trimmed,n=c.remaining):i?.debug(`No common leading whitespace for span: ${o.text}`);let u=jv(l),f=u.endsWith(`
`);u=sw(u),s.push(`<span style="${a}">${u}</span>${f?`
`:""}`)}return n.isEmpty()||i?.debug("Untrimmed whitespace"),s.join("")}function Zv(e,t){let r=e.toString();return t-Nl(r)>=0?" ".repeat(t-r.length)+r:r}function RSe(e,t){let r=e.toString();return t-Nl(r)>=0?r+" ".repeat(t-r.length):r}function sw(e){return e.endsWith(`
`)?e.slice(0,-1):e}var QSe=q(require("vscode"));function m6(e,t,r,n,i){let s="$(augment-icon-simple)&#x2009;&#x1D5D;",o=t.length>0?FSe(t[0]):"";for(let c=1;c<t.length;c++){let u=t[c].noLeftMargin?"&nbsp;&nbsp;":"&nbsp;&nbsp;&nbsp;&nbsp;";o+=`${u}${FSe(t[c])}`}let a=r?`<br/>${r}`:"",l=new QSe.MarkdownString(`${s}&nbsp;&nbsp;&nbsp;&nbsp;${o}<br/>${e}${a}`);return l.isTrusted=!0,l.supportHtml=!0,l.supportThemeIcons=!0,l}function FSe(e){return`<a href="${e.href}" title="${e.tooltip}">${e.text}${e.keybindingIcons?`&nbsp;${e.keybindingIcons}`:""}</a>`}var RCt=38,yN=class e extends X{constructor(r,n,i,s,o,a,l,c,u){super();this._keybindingWatcher=r;this._nextEditSessionEventReporter=n;this._suggestionManager=i;this._state=s;this._configListener=o;this._hasCompletionShowing=a;this._showKeybindingsOnButtons=l;this._keybindingStatus=c;this._nextEditConfigManager=u;this.addDisposable(ti.window.onDidChangeTextEditorVisibleRanges(f=>{this._handleVisibleRangesChanged(f)})),this._register(void 0),this.addDisposable(ti.window.onDidChangeActiveTextEditor(f=>this._register(f))),this.addDisposable(this._suggestionManager.onSuggestionsChanged(f=>{this._register(ti.window.activeTextEditor)})),this.addDisposable(new ti.Disposable(()=>{this._provider?.dispose(),this._provider=void 0}))}_logger=j("BackgroundNextEditsHoverProvider");static inlineDiffColors={originalLineColor:"var(--vscode-diffEditor-removedLineBackground)",originalTextColor:"#FF000066",updatedLineColor:"var(--vscode-diffEditor-insertedLineBackground)",updatedTextColor:"#9CCC2C66",lineNumberColor:"var(--vscode-editorGhostText-foreground)"};_provider;_waitingToShowHover=!1;get _showDiffInDifflessHover(){return this._nextEditConfigManager.config.showDiffInHover}_handleVisibleRangesChanged(r){let n=r.textEditor.document,i=this._state.value.suggestion;i&&(this._state.value instanceof Rr||this._state.value instanceof Ht||this._state.value instanceof kr)&&i.qualifiedPathName.equals(n.uri)&&r.visibleRanges.some(s=>s.contains(Fs(i.highlightRange)))&&this.showHover()}_register(r){this._waitingToShowHover||(this._provider?.dispose(),this._provider=void 0,r&&(this._provider=ti.languages.registerHoverProvider({pattern:r.document.uri.fsPath},this)))}provideHover(r,n,i){if(this._hoverDisabled())return;let s,o;try{if(r.uri.scheme==="output"||this._hasCompletionShowing())return;this._waitingToShowHover=!1,o=this._suggestionManager.getActiveSuggestions().filter(c=>c.state==="fresh"&&c.changeType!=="noop"&&c.qualifiedPathName.equals(r.uri)).find(c=>this.hoverContactCondition(c,n,r));let l=this._provideDifflessHover(r,n,o);return l&&this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"hover-shown","unknown"),l&&new ti.Hover(l)}catch(a){return a instanceof Error&&(this._logger.error(`Error in hover provider: ${a.message}, requestId: ${s}`),a.stack&&this._logger.error(a.stack),this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"error-hover-error","unknown")),new ti.Hover(`Error rendering hover. requestId: ${s}`)}}_keybindingWillWork(r,n){return r===ed?this._nextEditConfigManager.config.enablePanel:n&&!n.equals(this._state.value.suggestion)?!1:this._keybindingStatus.get(r)}_provideDifflessHover(r,n,i){let s,o=[];i=this._state.value instanceof ei||this._state.value instanceof gs?i:void 0;let a=["hover-click",i?.result.suggestionId??void 0],l=(y,v)=>{if(this._keybindingWillWork(y,i)){let C=this.getPrettyKeybinding(y.commandID);return`${v}${C?"&nbsp;"+C:""}`}return v},c=(y,v,C)=>{let E=y.commandID;return{href:y.generateHref(...a),text:v,tooltip:l(y,C),keybindingIcons:this._showKeybindingsOnButtons()&&this._keybindingWillWork(y,i)?this.getPrettyKeybindingIcons(E):null}},u=c(Gc,"Reject","Reject Suggestion"),f=c(ed,"$(layout-panel)","Open Suggestions Panel");f.keybindingIcons=null;let p=c(Fv,"$(diff-single)",this._showDiffInDifflessHover?"Hide Diff":"Show Diff");p.noLeftMargin=!0;let g={href:`command:workbench.action.openSettings?${encodeURIComponent(JSON.stringify(["@ext:augment.vscode-augment augment.nextEdit"]))}`,text:"$(gear)",tooltip:"Open Settings",noLeftMargin:!0},m=c(fg,"Learn More","Learn More");if(((this._state.value instanceof Rr||this._state.value instanceof Ht)&&this._state.value.suggestion?.previewCursorRange(r).contains(n.line)||i)&&(s=i||this._state.value.suggestion,o=[c(Wc,"Apply","Apply Suggestion"),u,...this._showKeybindingsOnButtons()?[m]:[],...this._nextEditConfigManager.config.enablePanel?[f]:[],p,g]),this._state.value instanceof Ht){let y=this._state.value.suggestion.previewCursorRange(r);(y.contains(n.line)||this._state.value.suggestion?.changeType==="deletion"&&y?.touches(n.line))&&(s=this._state.value.suggestion,o=[c(Ro,"Undo","Undo Suggestion"),u,...this._showKeybindingsOnButtons()?[m]:[],...this._nextEditConfigManager.config.enablePanel?[f]:[],p,g])}if(s){let y=jv(s.result.changeDescription);if(this._showDiffInDifflessHover){let{result:v,longestLineLength:C}=this.getHoverDiff(r,s,RCt);return m6(y,o,v,[],C)}else return m6(y,o)}}hoverContactCondition(r,n,i){return r.previewCursorRange(i).contains(n.line)}getPrettyKeybinding(...r){return this.getKeybindingsForCommands(r,!0)}getPrettyKeybindingIcons(...r){let n=Yc.getStructuredKeybinding(this.getKeybindingsForCommands(r));return xSe(n,this._keybindingWatcher.getSimplifiedPlatform())}getKeybindingsForCommands(r,n=!1){let i=r.map(s=>td(this._keybindingWatcher,s,n));return i.includes(null)?"":i.join(" ")}getHoverDiff(r,n,i){let s=n.state==="accepted"?n.afterLineRange(r):n.lineRange,o=s.start>0?new ti.Range(s.start-1,0,s.start,0):void 0,a=s.stop<r.lineCount-1?new ti.Range(s.stop,0,s.stop+1,0):void 0,l=MSe(n,o&&r.getText(o),a&&r.getText(a),i,e.inlineDiffColors,!0,this._logger);return n.result.truncationChar!==void 0&&this._nextEditSessionEventReporter.reportEventFromSuggestion(n,"suggestion-truncated-in-hover","unknown"),l}_hoverDisabled(){return this._configListener.config.nextEdit.noDiffModeUseCodeLens}showHover(){this._hoverDisabled()||(this._register(ti.window.activeTextEditor),this._waitingToShowHover=!0,ti.commands.executeCommand("editor.action.showHover",{focus:"noAutoFocus"}))}hideHover(r="unknown"){this._hoverDisabled()||r==="keybinding"||(Ks("1.97.0-insider")||Ks("1.97.0")?ti.commands.executeCommand("editor.action.hideHover"):(ti.commands.executeCommand("editorScroll",{to:"down",by:"line",value:0}),ti.commands.executeCommand("editorScroll",{to:"up",by:"line",value:0})))}async hideHoverAsync(r="unknown"){this._hoverDisabled()||r==="keybinding"||(Ks("1.97.0-insider")||Ks("1.97.0")?await ti.commands.executeCommand("editor.action.hideHover"):(await ti.commands.executeCommand("editorScroll",{to:"down",by:"line",value:0}),await ti.commands.executeCommand("editorScroll",{to:"up",by:"line",value:0})))}};var NSe=q(require("vscode"));var kCt=new Map([[ca,"vscode-augment.nextEdit.canNextSmart"],[Pm,"vscode-augment.nextEdit.canNext"],[Lm,"vscode-augment.nextEdit.canPrevious"],[Wc,"vscode-augment.nextEdit.canAccept"],[Gc,"vscode-augment.nextEdit.canReject"],[Xu,"vscode-augment.nextEdit.canDismiss"],[yf,"vscode-augment.nextEdit.canAcceptCodeAction"],[Qm,"vscode-augment.nextEdit.canAcceptAll"],[Nm,"vscode-augment.nextEdit.canRejectAll"],[Ro,"vscode-augment.nextEdit.canUndoAcceptSuggestion"]]),vN=class extends X{constructor(r){super();this._state=r;this.addDisposable(new NSe.Disposable(this._state.listen(n=>{let i=!(n instanceof ei);this._set(ca,i),this._set(Pm,i),this._set(Lm,i),this._set(Wc,n instanceof Rr||n instanceof kr||n instanceof Ht),this._set(Gc,n instanceof Rr||n instanceof kr||n instanceof Ht),this._set(Ro,n instanceof Ht),this._set(Xu,i),this._set(yf,n instanceof Ht),this._set(Qm,i),this._set(Nm,i)},!0)))}_status=new Map;get(r){return this._status.get(r)??!1}_set(r,n){this._status.set(r,n);let i=kCt.get(r);i&&Uc(i,n)}};var CN=class e extends X{constructor(r,n,i,s,o,a,l,c,u,f,p=g=>{}){super();this.workspaceManager=n;this._nextEditSessionEventReporter=i;this._configListener=o;this._suggestionManager=a;this._requestManager=l;this._globalState=c;this._nextEditConfigManager=u;this._completionVisibilityWatcher=f;this._onCursorWithinSuggestion=p;this._state=new da(new ei,ASe),this._decorationManager=new pN(r,n,s,o,i,this.isInlineCompletionVisible,this.isShowAllHighlightsEnabled),this.addDisposable(this._decorationManager),this._codeActionProvider=new mN(this._suggestionManager,this._configListener,i),this._keybindingStatus=this.addDisposable(new vN(this._state)),this._hoverProvider=new yN(s,i,this._suggestionManager,this._state,this._configListener,this.isInlineCompletionVisible,()=>(this._globalState.get("nextEditKeybindingUsageCount")??0)<e.maxKeybindingUsageCount,this._keybindingStatus,this._nextEditConfigManager),this.addDisposable(this._hoverProvider),this._codeLensProvider=new sN(this._state,s),this.addDisposable(new Se.Disposable(()=>{this._state.value=new ei,this._state.dispose(),this._decorationManager.decorate([],{}),this._hoverProvider.hideHover("command")})),this.addDisposable(Se.languages.registerCodeActionsProvider("*",this._codeActionProvider)),this.addDisposable(Se.workspace.onDidChangeTextDocument(this._handleTextDocumentChanged)),this.addDisposable(Se.window.onDidChangeActiveTextEditor(this._handleEditorChange)),this.addDisposable(Se.window.onDidChangeTextEditorSelection(this._handleTextEditorSelectionChanged)),this.addDisposable(new Se.Disposable(this._requestManager.lastResponse.listen(g=>{g&&this._suggestionManager.add([el.from(g)],g.mode==="FORCED")}))),this.addDisposable(this._suggestionManager.onSuggestionsChanged(g=>{this._handleSuggestionsChanged(g)})),this.addDisposable(Se.window.onDidChangeTextEditorVisibleRanges(g=>{this.workspaceManager.safeResolvePathName(g.textEditor.document.uri)&&g.textEditor===Se.window.activeTextEditor&&!Nv()&&(!this._lastVisibleRanges||this._lastVisibleRanges.uri.fsPath!==g.textEditor.document.uri.fsPath||this._lastVisibleRanges.visibleRanges.length!==g.visibleRanges.length||this._lastVisibleRanges.visibleRanges.some((m,y)=>!m.equals(nd(g.visibleRanges[y]))))&&(this._drawDecorations(),this._configListener.config.nextEdit.useCursorDecorations||(this._decorationManager.shouldDrawBottomDecorations.value=!1,this._debouncedSetBottomDecorations()),this._lastVisibleRanges={uri:g.textEditor.document.uri,visibleRanges:g.visibleRanges.map(m=>nd(m))})})),this.addDisposable(new Se.Disposable(this._suggestionManager.suggestionWasJustAccepted.listen(g=>{g&&(this._debouncedSetBottomDecorations.flush(),this._drawDecorations())}))),this._configListener.addDisposable(this._configListener.onDidChange(g=>{!!g.newConfig.nextEdit.highlightSuggestionsInTheEditor!=!!g.previousConfig.nextEdit.highlightSuggestionsInTheEditor&&this._drawDecorations()})),this.addDisposable(this.workspaceManager.onDidChangeSourceFolderContents(g=>{let m=new Map,y=this._suggestionManager.getAllSuggestions().filter(v=>{if(v.qualifiedPathName.rootPath!==g)return!1;let C=v.qualifiedPathName.relPath;return m.get(C)||m.set(C,this.workspaceManager.hasFile(v.qualifiedPathName)),!m.get(C)});this._suggestionManager.remove(y)})),this.addDisposable(new Se.Disposable(this._completionVisibilityWatcher.listen(()=>{this._drawDecorations()}))),this._configListener.config.nextEdit.noDiffModeUseCodeLens&&(this.addDisposable(Se.languages.registerCodeLensProvider("*",this._codeLensProvider)),this.addDisposable(new Se.Disposable(this._state.listen(()=>{this._codeLensProvider.refresh()})))),this.addDisposable(new Se.Disposable(this._state.listen(()=>{this._drawDecorations()}))),this.addDisposable(new Se.Disposable(this._state.listen(g=>{let m;g instanceof ei?m="state-transitioned-to-no-suggestions":g instanceof gs?m="state-transitioned-to-hinting":g instanceof Rr?m="state-transitioned-to-before-preview":g instanceof Ht?m="state-transitioned-to-after-preview":g instanceof kr&&(m="state-transitioned-to-animating"),m!==void 0&&this._nextEditSessionEventReporter.reportEventFromSuggestion(g.suggestion,m,"unknown")}))),this.addDisposable(Se.debug.onDidStartDebugSession(()=>{this._suggestionManager.clear(!1),this._decorationManager.decorate([],{})})),this.addDisposable(Se.debug.onDidTerminateDebugSession(()=>{this._handleEditorChange(Se.window.activeTextEditor)})),this.addDisposable(Ym(()=>{this._suggestionManager.clear(!1),this._decorationManager.decorate([],{})})),this.addDisposable(lN(()=>{this._suggestionManager.clear(!1),this._decorationManager.decorate([],{})}))}static _waitForAcceptTimeoutMs=1e3;static _applySuggestionDelayMs={fromHover:50,atCursor:250,onScreen:500,offScreen:750,largeBonus:250};static _largeChangeLineCountThreshold=3;static _postScrollRenderDelayMs=250;static maxKeybindingUsageCount=30;_logger=j("EditorNextEdits");_decorationManager;_codeActionProvider;_keybindingStatus;_hoverProvider;_codeLensProvider;_state;_lastVisibleRanges;_ignoreSelectionChangeEvents=!1;_debouncedSetBottomDecorations=(0,USe.debounce)(()=>{this._decorationManager.shouldDrawBottomDecorations.value=!0,this._drawDecorations()},e._postScrollRenderDelayMs);static get _smoothScrollDelayMs(){return Se.workspace.getConfiguration("editor").smoothScrolling??!1?150:0}dismiss(r,n=!1,i=!0){this._state.value instanceof Rr||this._state.value instanceof kr?(this._state.value=new gs(this._state.value.suggestion,!0),i&&this._suggestionManager.clearJustAcceptedSuggestions(),this._nextEditSessionEventReporter.reportEventWithoutIds("preview-decoration-dismissed",r??"command")):this._state.value instanceof Ht&&(this._state.value=this._getHintedState(),i&&this._suggestionManager.clearJustAcceptedSuggestions(),this._nextEditSessionEventReporter.reportEventWithoutIds("reverse-decoration-dismissed",r??"command")),n&&this._hoverProvider.hideHover()}async dismissOrReject(r){let n=Se.window.activeTextEditor;this._state.value instanceof Ht?(await this._undoSuggestions(this._state.value.suggestion),this.dismiss(r,!0)):this._state.value instanceof Rr||this._state.value instanceof kr?this.dismiss(r):n&&this._state.value instanceof gs&&this._hoverProvider.hoverContactCondition(this._state.value.suggestion,n.selection.active,n.document)?this.reject(r,this._state.value.suggestion.result.suggestionId):this.reject(r)}isInlineCompletionVisible=()=>this._completionVisibilityWatcher.maybeInlineCompletionVisible;isShowAllHighlightsEnabled=()=>this._configListener.config.nextEdit.highlightSuggestionsInTheEditor;nextAvailableSuggestion=(r=!0,n=!1)=>LSe(this._suggestionManager.getActiveSuggestions().filter(Xn),this._state.value instanceof Rr||this._state.value instanceof Ht||this._state.value instanceof kr?this._state.value.suggestion:void 0,!r,n,this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions);_handleSuggestionsChanged=async r=>{this._updateSuggestions(r.newSuggestions,!0);let n=Se.window.activeTextEditor,i=n&&r.undone.find(s=>s.lineRange.contains(n.selection.active.line)||s.lineRange.touches(n.selection.active.line));if(i&&this._state.value instanceof Ht){await this._suggestionManager.suggestionWasJustUndone.waitUntil(o=>o===!0,e._waitForAcceptTimeoutMs);let s=this._getSuggestionSelection(i);s.isEqual(n.selection)||(this._ignoreSelectionChangeEvents=!0,n.selection=s),this._state.value=new Rr(i),this._nextEditSessionEventReporter.reportEventFromSuggestion(this._state.value.suggestion,"undid-accepted-suggestion","document-changed"),this._hoverProvider.showHover()}if(n&&r.accepted.length>0&&(this._state.value instanceof Rr||this._state.value instanceof kr)){await this._suggestionManager.suggestionWasJustAccepted.waitUntil(a=>a===!0,e._waitForAcceptTimeoutMs);let s=r.accepted[r.accepted.length-1],o=this._getSuggestionSelection(s);o.isEqual(n.selection)||(this._ignoreSelectionChangeEvents=!0,n.selection=o),this._state.value=new Ht(s),this._hoverProvider.showHover()}else r.accepted.length>0&&(this._ignoreSelectionChangeEvents=!0)};_updateSuggestions(r,n){if(Nv())return;let i=r.filter(Xn);if((this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions?i:i.filter(o=>o.qualifiedPathName.equals(Se.window.activeTextEditor?.document.uri))).length===0&&this._state.value instanceof gs){this._state.value=new ei,this._onCursorWithinSuggestion(void 0);return}n&&(this._state.value instanceof ei||this._state.value instanceof gs)&&(this._state.value=this._getHintedState()),this._drawDecorations()}get _isDebugging(){return Se.debug.activeDebugSession!==void 0&&!this._configListener.config.nextEdit.allowDuringDebugging}_drawDecorations(){if(this._isDebugging){this._decorationManager.decorate([],{});return}let r=this._suggestionManager.getActiveSuggestions().filter(Xn),n=this._suggestionManager.getJustAcceptedSuggestions(),i=this._state.value instanceof gs?this._state.value:this._getHintedState();this._decorationManager.decorate(r.concat(n),{hintSuggestion:i instanceof gs?i.hintedSuggestion:void 0,activeSuggestion:this._state.value instanceof Rr||this._state.value instanceof Ht||this._state.value instanceof kr?this._state.value.suggestion:void 0,isAnimating:this._state.value instanceof kr})}_handleTextDocumentChanged=r=>{if(r.contentChanges.length===0)return;let n=this.workspaceManager.safeResolvePathName(r.document.uri);if(this._isDebugging||Bo(r.document.uri)||!n)return;let i=Se.window.activeTextEditor;!i||r.document!==i.document||(this._clearAnimatedApply(),(this._state.value instanceof Ht||this._state.value instanceof kr)&&(this._state.value=new ei,this._nextEditSessionEventReporter.reportEventWithoutIds("reverse-decoration-dismissed","document-changed")))};_handleTextEditorSelectionChanged=r=>{let n=Se.window.activeTextEditor;if(!n||r.textEditor.document!==n.document||Nv()||this._isDebugging||Bo(n.document.uri)||!this.workspaceManager.safeResolvePathName(r.textEditor.document.uri))return;this._clearAnimatedApply(n.selection);let s=!(r.kind===Se.TextEditorSelectionChangeKind.Keyboard||r.kind===Se.TextEditorSelectionChangeKind.Mouse)&&this._ignoreSelectionChangeEvents;this._ignoreSelectionChangeEvents=!1,(this._state.value instanceof Rr||this._state.value instanceof kr||this._state.value instanceof Ht)&&!s?this.dismiss("editor-selection-changed"):s||this._suggestionManager.clearJustAcceptedSuggestions(),(this._state.value instanceof ei||this._state.value instanceof gs||this._state.value instanceof kr&&!this._getSuggestionSelection(this._state.value.suggestion).isEqual(n.selection))&&(this._state.value=this._getHintedState()),this._drawDecorations();let o=this._state.value.suggestion;if(o&&n.selection.isEmpty&&this._hoverProvider.hoverContactCondition(o,n.selection.active,n.document)){let l="unknown";r.kind===Se.TextEditorSelectionChangeKind.Keyboard?l="keyboard":r.kind===Se.TextEditorSelectionChangeKind.Mouse?l="click":r.kind===Se.TextEditorSelectionChangeKind.Command&&(l="command"),this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"cursor-inside-suggestion",l),this._onCursorWithinSuggestion(o)}else this._onCursorWithinSuggestion(void 0)};_handleEditorChange=r=>{this.dismiss("active-editor-changed"),r&&this._updateSuggestions(this._suggestionManager.getActiveSuggestions(),!1)};async accept(r,n=!0,i,s){let o;if(i){if(o=this._suggestionManager.findSuggestionById(i),o)return this._hoverProvider.hideHover(),await this.open(o,{shouldAutoApply:!0,animationDelayMs:e._applySuggestionDelayMs.fromHover,preserveFocus:s,eventSource:r}),!0}else(this._state.value instanceof Rr||this._state.value instanceof kr||this._state.value instanceof Ht)&&(o=this._state.value.suggestion);return this.acceptSuggestion(o,r,n,s)}async acceptSuggestion(r,n,i=!0,s=!1){if(!r)return Se.window.showInformationMessage("No Next Edit to accept."),this._nextEditSessionEventReporter.reportEventWithoutIds("error-no-suggestion-to-accept",n??"command"),!1;if(this._state.value instanceof Ht&&this._state.value.suggestion?.equals(r))return this.dismiss(n),!1;if(i&&this._hoverProvider.hideHover(n??"command"),await this.gotoSuggestion(r,void 0,s),Se.window.activeTextEditor&&!r.qualifiedPathName.equals(Se.window.activeTextEditor.document.uri))return this._logger.debug(`Current suggestion ${r.qualifiedPathName.relPath} does not match active document ${Se.window.activeTextEditor?.document.uri.toString()}`),this._nextEditSessionEventReporter.reportEventFromSuggestion(r,"error-accept-suggestion-wrong-document",n??"command"),!1;this._nextEditSessionEventReporter.reportEventFromSuggestion(r,"accept",n??"command"),this._state.value instanceof Rr||(this._state.value=new Rr(r)),PSe(),this._suggestionManager.accept([r]);try{await this._suggestionManager.suggestionWasJustAccepted.waitUntil(o=>o===!0,e._waitForAcceptTimeoutMs)}catch{return this._logger.debug("Error waiting for suggestion to be accepted."),!1}return this.incrementKeybindingUsageCount(n),!0}_acceptSuggestions(r,n){if(r.length===0){Se.window.showInformationMessage("No Next Edits to accept.");return}this._state.value=new ei,PSe(),this._hoverProvider.hideHover("command");for(let i of r)this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"accept",n??"command");this._suggestionManager.accept(r)}acceptAllSuggestionsInFile(r,n){let i=Ms(r),s=this._suggestionManager.getActiveSuggestions().filter(Xn).filter(o=>i===o.qualifiedPathName.absPath);this._acceptSuggestions(s,n),this._nextEditSessionEventReporter.reportEventWithoutIds("accept-all-in-file",n??"command")}acceptAllSuggestions(r){let n=this._suggestionManager.getActiveSuggestions().filter(Xn);this._acceptSuggestions(n,r),this._nextEditSessionEventReporter.reportEventWithoutIds("accept-all",r??"command")}reject(r,n){let i;return n?i=this._suggestionManager.findSuggestionById(n):(this._state.value instanceof Rr||this._state.value instanceof Ht||this._state.value instanceof kr)&&(i=this._state.value.suggestion),this.rejectSuggestion(i,r)}rejectSuggestion(r,n){this._hoverProvider.hideHover(n??"command"),r&&Se.window.activeTextEditor&&!r.qualifiedPathName.equals(Se.window.activeTextEditor.document.uri)&&this._logger.debug(`Current suggestion ${r.qualifiedPathName.relPath} does not match active document ${Se.window.activeTextEditor?.document.uri.toString()}`);let i=this._state.value;this._state.value instanceof kr?(this._clearAnimatedApply(),this._state.value=new ei):this._state.value=new ei;let s,o,a=!1;r?(s=[r],this._suggestionManager.reject(s),o="reject",a=r.state==="accepted"):(s=this._suggestionManager.getActiveSuggestions().filter(Xn),this._suggestionManager.reject(s),o="reject-all"),this._drawDecorations(),this._requestManager?.clearCompletedRequests("FORCED");for(let l of s)this._nextEditSessionEventReporter.reportEventFromSuggestion(l,o,n??"command");i instanceof Ht?this._undoSuggestions(i.suggestion):r&&a&&this._undoSuggestions(r)}_rejectSuggestions(r,n){if(this._nextEditSessionEventReporter.reportEventWithoutIds("reject-all",n??"command"),this._suggestionManager.reject(r),r.length===0){Se.window.showInformationMessage("No Next Edits to reject.");return}this._state.value=new ei,this._hoverProvider.hideHover("command"),this._suggestionManager.reject(r),this._requestManager?.clearCompletedRequests("FORCED");for(let i of r)this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"reject",n??"command")}rejectAllSuggestionsInFile(r,n){let i=Ms(r),s=this._suggestionManager.getJustAcceptedSuggestions().filter(a=>i===a.qualifiedPathName.absPath),o=this._suggestionManager.getActiveSuggestions().filter(Xn).filter(a=>i===a.qualifiedPathName.absPath).concat(s);this._rejectSuggestions(o,n),this._undoSuggestions(s),this._nextEditSessionEventReporter.reportEventWithoutIds("reject-all-in-file",n??"command")}rejectAllSuggestions(r){let n=this._suggestionManager.getJustAcceptedSuggestions(),i=this._suggestionManager.getActiveSuggestions().filter(Xn).concat(n);this._rejectSuggestions(i,r),this._undoSuggestions(n),this._nextEditSessionEventReporter.reportEventWithoutIds("reject-all",r??"command")}_undoSuggestions(r){Array.isArray(r)||(r=[r]);let n=new Se.WorkspaceEdit;for(let i of r)n.replace(Se.Uri.from({scheme:i.uriScheme,path:i.qualifiedPathName.absPath}),new Se.Range(new Se.Position(i.afterLineRange().start,0),new Se.Position(i.afterLineRange().stop,0)),i.result.existingCode);return Se.workspace.applyEdit(n)}gotoNextSmart(r){this.incrementKeybindingUsageCount(r);let n=this._getHintedState().suggestion;if(this._state.value instanceof ei){Se.window.showInformationMessage("No more suggestions right now."),this._hoverProvider.hideHover(r??"command");return}else{if(this._state.value instanceof Ht&&!n)return this.dismiss(r);if(this._state.value instanceof kr)return this._clearAnimatedApply(),this.accept();if(n)return this._nextEditSessionEventReporter.reportEventFromSuggestion(this._state.value instanceof Rr||this._state.value instanceof Ht?this._state.value.suggestion:void 0,"goto-hinting-triggered-from",r??"command"),this._nextEditSessionEventReporter.reportEventFromSuggestion(n,"goto-hinting-triggered-to",r??"command"),this.open(n,{eventSource:r});this._logger.debug("Could not goto hinting.")}}next(r){return this._nextOrPrevious(!0,r)}previous(r){return this._nextOrPrevious(!1,r)}_nextOrPrevious(r,n,i=!0){let s=this._suggestionManager.getActiveSuggestions().filter(Xn),o=LSe(s,this._state.value instanceof Rr||this._state.value instanceof Ht||this._state.value instanceof kr?this._state.value.suggestion:void 0,!r,!1,this._configListener.config.nextEdit.enableGlobalBackgroundSuggestions);if(this._nextEditSessionEventReporter.reportEventFromSuggestion(this._state.value instanceof Rr||this._state.value instanceof Ht?this._state.value.suggestion:void 0,r?"next-triggered-from":"previous-triggered-from",n??"command"),this._nextEditSessionEventReporter.reportEventFromSuggestion(o,r?"next-triggered-to":"previous-triggered-to",n??"command"),!o){i&&Se.window.showInformationMessage("No more suggestions right now."),this._hoverProvider.hideHover(n??"command");return}return this._decorationManager.shouldDrawBottomDecorations.value=!1,this._debouncedSetBottomDecorations(),this._state.value instanceof kr?(this._logger.debug("Finishing animation instead of opening suggestion."),this._clearAnimatedApply(),this.accept()):(this.incrementKeybindingUsageCount(n),this.open(o,{eventSource:n}))}undoAcceptSuggestion(r,n){r??=this._state.value instanceof Ht?this._state.value.suggestion:void 0,r&&r.state==="accepted"?this._undoSuggestions(r):Se.commands.executeCommand("undo"),this._hoverProvider.hideHover(n??"command"),this._nextEditSessionEventReporter.reportEventWithoutIds("undo-accept",n??"command")}undoAllSuggestionsInFile(r,n){let i=Ms(r),s=this._suggestionManager.getActiveSuggestions().filter(Pv).filter(o=>i===o.qualifiedPathName.absPath);if(s.length===0){Se.window.showInformationMessage("No Next Edits to undo.");return}this._nextEditSessionEventReporter.reportEventWithoutIds("undo-all-in-file",n??"command"),this._undoSuggestions(s),this._hoverProvider.hideHover(n??"command")}async toggleHoverDiff(r,n){if(await this._nextEditConfigManager.toggleSetting("showDiffInHover"),n){let i=this._suggestionManager.findSuggestionById(n),s=Se.window.activeTextEditor;if(i&&s){this._hoverProvider.hideHover(r??"command");let o=s.selection,a=this._getSuggestionSelection(i);(!this._hoverProvider.hoverContactCondition(i,s.selection.active,s.document)||!s.selection.isEqual(a))&&(this._ignoreSelectionChangeEvents=!0,s.selection=a),this._hoverProvider.showHover(),s.selection=o}}else this._hoverProvider.hideHover(r??"command"),this._hoverProvider.showHover()}_clearAnimatedApply(r){this._state.value instanceof kr&&(!r||!r.isEqual(this._state.value.selection))&&clearTimeout(this._state.value.timeout)}async gotoSuggestion(r,n=void 0,i=!1){this._completionVisibilityWatcher.maybeInlineCompletionVisible&&(this._logger.debug("Clearing inline completion before opening next edit suggestion."),await Se.commands.executeCommand("editor.action.inlineSuggest.hide"));let s=!1;if(r.qualifiedPathName.equals(Se.window.activeTextEditor?.document.uri))i||await Se.commands.executeCommand("workbench.action.focusActiveEditorGroup");else{s=!0,this._nextEditSessionEventReporter.reportEventFromSuggestion(r,"suggestion-global-offset-text-triggered","command");let l=Se.window.visibleTextEditors.find(c=>r.qualifiedPathName.equals(c.document.uri));if(l)await Se.window.showTextDocument(l.document,{selection:this._getSuggestionSelection(r),preserveFocus:i});else{if(!qr(r.qualifiedPathName.absPath)){Se.window.showInformationMessage(`Suggestion for ${r.qualifiedPathName.relPath} is no longer relevant.`),this._suggestionManager.remove(this._suggestionManager.getActiveSuggestions().filter(c=>c.qualifiedPathName.equals(r.qualifiedPathName)));return}await Se.window.showTextDocument(Se.Uri.file(r.qualifiedPathName.absPath),{selection:this._getSuggestionSelection(r),preserveFocus:i})}}let o=Se.window.activeTextEditor;if(!o||!r.qualifiedPathName.equals(o.document.uri)){this._logger.debug(`Unable to go to suggestion in ${r.qualifiedPathName.absPath}.`);return}if(r.lineRange.start>=o.document.lineCount&&(this._logger.warn("Trying to move to a line that doesn't exist."),this._nextEditSessionEventReporter.reportEventFromSuggestion(r,"error-moving-to-line-that-doesnt-exist","unknown")),o.visibleRanges.some(l=>l.contains(Fs(r.lineRange)))||(o.revealRange(new Se.Range(r.lineRange.start,0,r.lineRange.stop,0),Se.TextEditorRevealType.InCenterIfOutsideViewport),await fo(e._smoothScrollDelayMs)),n===void 0){let l=!s&&r.highlightRange.contains(o.selection.active.line),c=!s&&o.visibleRanges.some(u=>u.contains(Fs(r.lineRange)));n=l?e._applySuggestionDelayMs.atCursor:c?e._applySuggestionDelayMs.onScreen:e._applySuggestionDelayMs.offScreen,r.lineRange.length>e._largeChangeLineCountThreshold&&(n+=e._applySuggestionDelayMs.largeBonus)}let a=this._getSuggestionSelection(r);return(!this._hoverProvider.hoverContactCondition(r,o.selection.active,o.document)||!o.selection.isEqual(a))&&(this._ignoreSelectionChangeEvents=!0,o.selection=a),n}async open(r,n={}){if(r.state==="stale"){this._logger.debug(`Tried to open stale suggestion. ${r.result.suggestionId}`);return}let i=await this.gotoSuggestion(r,n.animationDelayMs,n.preserveFocus);if(i===void 0)return;let s=Se.window.activeTextEditor;if(!s){this._logger.debug(`Unable to open suggestion in ${r.qualifiedPathName.absPath}.`);return}(this._state.value instanceof Rr||this._state.value instanceof Ht)&&!r.equals(this._state.value.suggestion)&&await this._hoverProvider.hideHoverAsync(n.eventSource??"command"),r.state==="accepted"?this._state.value=new Ht(r):this._state.value=new Rr(r),this._state.value instanceof Rr&&(n.shouldAutoApply??this.nextEditConfig.enableAutoApply)?(this._clearAnimatedApply(),this._state.value=new kr(r,s.selection,setTimeout(()=>{this.accept(void 0,!1,void 0,n.preserveFocus)},i))):this._hoverProvider.showHover()}openSuggestionAt(r,n){let i=this._suggestionManager.getActiveSuggestions().find(s=>Xn(s)&&s.qualifiedPathName.equals(r)&&(s.lineRange.contains(n)||s.lineRange.touches(n)));i?(this._nextEditSessionEventReporter.reportEventFromSuggestion(i,"suggestion-opened","gutter-click"),this.open(i,{animationDelayMs:e._applySuggestionDelayMs.atCursor,eventSource:"gutter-click"})):(this._logger.error(`No suggestion found for ${r.toString()} at line ${n}.`),Se.window.showInformationMessage("No suggestion found."),this._nextEditSessionEventReporter.reportEventWithoutIds("error-no-suggestion-found","command"))}_getHintedState(){let r=Se.window.activeTextEditor;if(!r)return new ei;let n=this.nextAvailableSuggestion(!0);if(!n)return new ei;let i=this.nextAvailableSuggestion(!1);return i?r.visibleRanges.some(s=>s.contains(Fs(i.highlightRange)))&&!r.visibleRanges.some(s=>s.contains(Fs(n.highlightRange)))?new gs(i,!1):new gs(n,!0):new gs(n,!0)}get state(){return this._state.value}addStateListener(r){return this._state.listen(r)}_getSuggestionSelection(r){let n=r.previewTargetCursorLine;return new Se.Selection(n,0,n,0)}async incrementKeybindingUsageCount(r){if(r!=="keybinding")return;let n=this._globalState.get("nextEditKeybindingUsageCount")??0;if(!(n>=e.maxKeybindingUsageCount))return this._globalState.update("nextEditKeybindingUsageCount",n+1)}get nextEditConfig(){return this._nextEditConfigManager.config}};async function PSe(){try{await Se.commands.executeCommand("extension.vim_escape"),await Se.commands.executeCommand("extension.vim_insert"),await Se.commands.executeCommand("extension.vim_escape")}catch{}}function LSe(e,t,r,n,i){let s=r?-1:1;if(e.length===0)return;let o=Se.window.activeTextEditor;if(!o)return;let a=o.selection;if(!a)return;let l=nd(a),c=e.filter(f=>f.qualifiedPathName.equals(o.document.uri)&&(!n||!f.equals(t)));if(c.length===0&&i)return e.filter(f=>!n||!f.equals(t)).filter(f=>f.scope==="WORKSPACE").reduce((f,p)=>f!=null&&f.result.localizationScore>p.result.localizationScore?f:p,void 0);n&&(c=c.filter(f=>!f.equals(t)));let u=c.sort((f,p)=>s*f.highlightRange.compareTo(p.highlightRange));return t?u.find(f=>s*f.highlightRange.compareTo(t.highlightRange)>0)??u[0]:u.find(f=>s*f.highlightRange.compareTo(l)>=0||f.previewBoxRange(o.document).contains(a.active.line)||f.previewBoxRange(o.document).contains(a.anchor.line))??u[0]}var Jl=q(require("vscode"));var to=q(require("vscode"));var bN=q(require("assert")),OSe=q(H8()),Xv=q(require("vscode"));function EN(e){return Mt(e.rootPath,e.relPath+".next-edit-results.json5")}async function*qSe(e){(0,bN.default)(e.pathName);let t=await Xv.workspace.openTextDocument(Le.from(e.pathName).absPath),r=EN(e.pathName);(0,bN.default)(qr(r));let n=OSe.default.parse((await Xv.workspace.openTextDocument(r)).getText()),i=t.getText(),s=0;for await(let o of n)o.path=o.path??e.pathName?.relPath,o.blobName=e.blobName??"",o.suggestionId=o.suggestionId??`mock-suggestion-${o.blobName}-${s++}`,o.charStart=o.charStart??t.offsetAt(new Xv.Position(o.lineStart,0)),o.charEnd=o.charEnd??t.offsetAt(new Xv.Position(o.lineEnd,0)),o.diffSpans=o.diffSpans??(o.existingCode!=null&&o.suggestedCode!=null?MCt(o.existingCode,o.suggestedCode):[{original:{start:o.charStart,stop:o.charEnd},updated:{start:o.charStart,stop:o.charEnd}}]),o.existingCode=o.existingCode?.replaceAll("|","")??i.substring(o.charStart,o.charEnd),o.suggestedCode=o.suggestedCode?.replaceAll("|","")??i.substring(o.charStart,o.charEnd),o.changeDescription=o.changeDescription??"",o.editingScore=o.editingScore??1,o.localizationScore=o.localizationScore??1,o.editingScoreThreshold=o.editingScoreThreshold??1,yield{result:o,unknownBlobNames:[],checkpointNotFound:!1}}function MCt(e,t){let r=[],n=e.split("|"),i=t.split("|");(0,bN.default)(n.length===i.length);let s=0,o=0;for(let a=0;a<n.length;a++)r.push({original:{start:s,stop:s+n[a].length},updated:{start:o,stop:o+i[a].length}}),s+=n[a].length,o+=i[a].length;return r}var FCt=10,QCt=3;function VSe(e,t){return t?e.getFolderRoot(Le.from(t).absPath):e.getMostRecentlyChangedFolderRoot()}function y6(e,t,r,n){let i=!!t.config.nextEdit.useMockResults&&!!r&&qr(EN(r));return(n??e.getFileEditEvents(VSe(e,r))).length!==0||i}async function*HSe(e,t,r,n,i,s,o,a){let l=j("queryNextEditStream");if(o.isCancellationRequested){l.debug("Skipping Next Edit with cancelled token."),yield{status:$e.cancelled};return}if(!y6(t,s,e.pathName,e.fileEditEvents)){l.debug("Skipping Next Edit with no changes."),yield{status:$e.ok};return}let u=s.config.nextEdit.useMockResults&&e.pathName&&qr(EN(e.pathName)),f=VSe(t,e.pathName),p=e.fileEditEvents??t.getFileEditEvents(f),g=f?t.getRepoRootForFolderRoot(f):void 0,m=e.pathName&&Le.from(e.pathName),y=m?.rootPath??g,v=t.getContext();e={...e,blobName:e.blobName??(m&&t.getBlobName(m)),blobs:e.blobs??v.blobs,recentChanges:e.recentChanges??jy(v.recentChunks.filter(E=>!E.uploaded)),fileEditEvents:p,unindexedEditEvents:e.unindexedEditEvents.length>0?e.unindexedEditEvents:v.unindexedEditEvents,unindexedEditEventsBaseBlobNames:e.unindexedEditEventsBaseBlobNames.length>0?e.unindexedEditEventsBaseBlobNames:v.unindexedEditEventsBaseBlobNames,diagnostics:await PCt(r,y,i,t)};let C=new A6(e.requestId,t);l.debug(`[${e.requestId}] Starting request for ${m?.relPath} (mode=${e.mode}, scope=${e.scope}).`);try{let E;if(u?E=qSe(e):E=await n.nextEditStream(e),o.isCancellationRequested){l.debug(`[${e.requestId}] Skipping next edit with cancelled token.`),yield{status:$e.cancelled};return}for await(let w of E){let B=`[${e.requestId}/${w.result.suggestionId}]`;if(w.unknownBlobNames.length>0&&(t.handleUnknownBlobs(v,w.unknownBlobNames),l.warn(`${B} Found ${w.unknownBlobNames.length} unknown blobs.`)),w.checkpointNotFound&&(t.handleUnknownCheckpoint(e.requestId,e.blobs.checkpointId),l.warn(`${B} Checkpoint was not found.`)),o.isCancellationRequested){l.debug(`${B} Cancelled by the client.`),yield{status:$e.cancelled};return}let R=await NCt(w.result.path,y,t),N=R&&t.safeResolvePathName(R.uri);if(o.isCancellationRequested){l.debug(`${B} Cancelled by the client.`),yield{status:$e.cancelled};return}if(!N){l.warn(`${B} Response path ${w.result.path} has no document.`),a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-no-document-for-response","unknown");continue}if(R?.uri.scheme==="file"&&!qr(N.absPath)){l.warn(`${B} Response path ${N.relPath} does not exist.`),a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-response-file-is-deleted","unknown");continue}let W=R.getText(),Z=KW(W,w.result.charStart),te=KW(W,w.result.charEnd),Y=C.updateWithPendingEdits(N,new Fo(Z,te));if(!Y){l.debug(`${B} Response was invalidated by pending edits.`),yield{status:$e.invalidArgument};return}let U=new to.Range(R.positionAt(Y.start),R.positionAt(Y.stop)),ce=R.lineAt(U.end.line);if(ce.range.isEqual(ce.rangeIncludingLineBreak)&&U.end.line===R.lineCount-1&&U.end.character===ce.range.end.character&&!U.isEmpty&&(U=U.with({end:new to.Position(U.end.line+1,0)})),U.start.character!==0||U.end.character!==0){if(l.warn(`${B} Response was not line-aligned ${pSe(U)}.`),l.debug(`${B} Converting char range ${w.result.charStart}-${w.result.charEnd} to ${Z}-${te}.`),l.debug(`${B} Updated char range to ${Y?.start}-${Y?.stop}.`),l.debug(`${B} The bad line is: "${R.lineAt(U.end.character!==0?U.end.line:U.start.line).text}".`),a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-response-not-line-aligned","unknown"),N.relPath!==e.pathName?.relPath)continue;a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-response-not-line-aligned-for-current-file","unknown"),yield{status:$e.invalidArgument};return}if(R.getText(U)!==w.result.existingCode){if(l.warn(`${B} Code in buffer doesn't match code in response.`),l.debug(`${B} Converting char range ${w.result.charStart}-${w.result.charEnd} to ${Z}-${te}.`),l.debug(`${B} Updated char range to ${Y?.start}-${Y?.stop}.`),l.debug(`${B} Buffer code: "${R.getText(U)}", response code: "${w.result.existingCode}".`),a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-code-in-buffer-doesnt-match-code-in-response","unknown"),N.relPath!==e.pathName?.relPath)continue;a.reportEvent(e.requestId,w.result.suggestionId,Date.now(),"error-code-in-buffer-doesnt-match-code-in-response-for-current-file","unknown"),yield{status:$e.invalidArgument};return}let Ie=new el(e.requestId,e.mode,e.scope,{...w.result,charStart:Y.start,charEnd:Y.stop},N,nd(U),R.uri.scheme);l.debug(`${B} Returning ${Ie.changeType} suggestion for ${N.relPath}@${Ie.lineRange.toString()}.`),yield{status:$e.ok,suggestion:Ie}}l.debug(`[${e.requestId}] Request completed.`)}catch(E){if(Sr.isAPIErrorWithStatus(E,$e.cancelled)){l.debug(`[${e.requestId}] Cancelled by the server.`),yield{status:$e.cancelled};return}l.warn(`[${e.requestId}] Next edit failed: ${E}.`),a.reportEvent(e.requestId,void 0,Date.now(),"error-api-error","unknown"),yield{status:$e.unknown};return}finally{C.dispose()}}var A6=class extends X{constructor(r,n){super();this.requestId=r;this.workspaceManager=n;this.addDisposable(to.workspace.onDidChangeTextDocument(i=>{if(i.contentChanges.length===0)return;let s=this.workspaceManager.safeResolvePathName(i.document.uri);if(!s)return;let o=this._pendingEdits.get(s.absPath)??[];o.push(...i.contentChanges),this._pendingEdits.set(s.absPath,o)}))}_pendingEdits=new Map;updateWithPendingEdits(r,n){let i=this._pendingEdits.get(r.absPath)??[];for(let s of i){let o=s.text.length-s.rangeLength;if(s.rangeOffset+s.rangeLength<n.start)n.start+=o,n.stop+=o;else if(s.rangeOffset<=n.stop)return}return n}};async function NCt(e,t,r){if(!t){let n=r.getAllQualifiedPathNames(e);n.length===1&&(t=n[0].rootPath)}if(t){let n=to.Uri.file(Mt(t,e)),i=await to.workspace.openTextDocument(n);if(i)return i}return to.window.visibleTextEditors.find(n=>n.document.uri.fsPath===e)?.document}async function PCt(e,t,r,n){let i=await e.getMostRecentDiagnostics(FCt,QCt,t),s=new Map;return(await Promise.all(i.map(async a=>{let l=a.uri.path;t&&l.startsWith(t)&&(l=l.substring(t.length));let c;switch(a.diagnostic.severity){case to.DiagnosticSeverity.Error:c="ERROR";break;case to.DiagnosticSeverity.Warning:c="WARNING";break;case to.DiagnosticSeverity.Information:c="INFORMATION";break;case to.DiagnosticSeverity.Hint:c="HINT";break}s.has(l)||s.set(l,r.calculateNoThrow(l,(await xo(a.uri.fsPath)).getText()));let u=s.get(l);if(!u)return;let f=n.safeResolvePathName(a.uri);if(!f)return;let p=n.getBlobName(f);return p?{location:{path:l,line_start:a.diagnostic.range.start.line,line_end:a.diagnostic.range.end.line},message:a.diagnostic.message,severity:c,current_blob_name:u,blob_name:p,char_start:a.charStart,char_end:a.charEnd}:void 0}))).filter(a=>a!==void 0)}var _N=class extends X{constructor(r,n,i,s,o){super();this._workspaceManager=r;this._nextEditRequestManager=n;this._suggestionManager=i;this._configListener=s;this._nextEditSessionEventReporter=o;this.addDisposable(Jl.workspace.onDidChangeTextDocument(this.handleWorkspaceEditsAvailable)),this.addDisposable(Jl.window.onDidChangeActiveTextEditor(this.handleWorkspaceEditsAvailable)),this.addDisposable(new Jl.Disposable(this._nextEditRequestManager.lastFinishedRequest.listen(()=>{this._handleWorkspaceEditsCached()})))}timeoutMs=1e3*30;_logger=j("GlobalNextEdits");async startGlobalQuery(r){Jl.commands.executeCommand("setContext","vscode-augment.nextEdit.global.updating",!0);try{this._nextEditSessionEventReporter.reportEventWithoutIds("global-mode-refreshed",r??"command");let n=Jl.window.activeTextEditor,i=n?this._workspaceManager.safeResolvePathName(n.document.uri):void 0,s=this._nextEditRequestManager.enqueueRequest(i,"FOREGROUND","WORKSPACE");if(!s)return;await this._nextEditRequestManager.lastFinishedRequest.waitUntil(a=>a!==void 0&&a.requestId===s,this.timeoutMs).catch(a=>{this._logger.error(`Global next edit failed: ${a}`),this._nextEditSessionEventReporter.reportEvent(s,void 0,Date.now(),"error-global-mode-error","command")});let o=this._suggestionManager.getActiveSuggestions().filter(a=>!qr(a.qualifiedPathName.absPath));this._suggestionManager.remove(o)}finally{Jl.commands.executeCommand("setContext","vscode-augment.nextEdit.global.updating",!1)}}cancel(){this._nextEditRequestManager.cancelAll(),this._nextEditSessionEventReporter.reportEventWithoutIds("global-mode-canceled","command")}handleWorkspaceEditsAvailable=()=>{let{activeTextEditor:r}=Jl.window,n=r?this._workspaceManager.safeResolvePathName(r?.document.uri):void 0,i=y6(this._workspaceManager,this._configListener,n);Uc("vscode-augment.nextEdit.global.canUpdate",i)};_handleWorkspaceEditsCached(){let{activeTextEditor:r}=Jl.window,n=r?this._workspaceManager.safeResolvePathName(r?.document.uri):void 0,i=this._nextEditRequestManager.shouldNotEnqueueRequestReason(n,"FOREGROUND","WORKSPACE");Uc("vscode-augment.nextEdit.global.updateCached",i)}};var WSe=q(Cs()),jl=q(require("vscode"));var xN=class e extends X{constructor(r,n,i,s,o,a,l,c,u,f,p,g){super();this._apiServer=r;this._configListener=n;this._workspaceManager=i;this._diagnosticsManager=s;this._nextEditSessionEventReporter=o;this._clientMetricsReporter=a;this._blobNameCalculator=l;this._suggestionManager=c;this._recentSuggestions=u;this._stateController=f;this._completionJustAccepted=p;this._featureFlagManager=g;this.addDisposable(new jl.Disposable(()=>{this._inflightRequest?.cancelTokenSource?.cancel(),this._inflightRequest?.cancelTokenSource?.dispose(),this._inflightRequest=void 0,this.lastFinishedRequest.dispose(),this.lastResponse.dispose(),this.state.dispose()})),this.addDisposable(new jl.Disposable(this.state.listen(y=>{Uc("vscode-augment.nextEdit.loading",y==="inflight")})));let m=y=>{let v=y??this._featureFlagManager.currentFlags.nextEditDebounceMs;this._processPendingRequestsDebounced&&this._processPendingRequestsDebounced.cancel(),this._processPendingRequestsDebounced=(0,WSe.debounce)(()=>void this._processPendingRequests(),v)};m(this._configListener.config.nextEdit.useDebounceMs),this.addDisposable(this._configListener.onDidChange(y=>{y.newConfig.nextEdit.useDebounceMs!==y.previousConfig.nextEdit.useDebounceMs&&m(y.newConfig.nextEdit.useDebounceMs)})),this.addDisposable(jl.workspace.onDidChangeTextDocument(y=>{y.contentChanges.length>0&&this._workspaceManager.safeResolvePathName(y.document.uri)&&(this._freshCompletedRequests=[]),!(!Le.equals(this._inflightRequest?.qualifiedPathName,y.document.uri)&&!this._pendingRequests.some(v=>Le.equals(v.qualifiedPathName,y.document.uri)))&&y.contentChanges.length>0&&!this._suggestionManager.suggestionWasJustAccepted.value&&this.cancelAll()}))}_logger=j("NextEditRequestManager");static _statusClearTimeoutMs=2e3;_pendingRequests=[];_inflightRequest;lastFinishedRequest=new da(void 0);lastResponse=new da(void 0);state=new da("ready");_processPendingRequestsDebounced;_freshCompletedRequests=[];get hasInflightRequest(){return!!this._inflightRequest}get pendingQueueLength(){return this._pendingRequests.length}shouldNotEnqueueRequestReason(r,n,i,s){let o=this._resolvePath(r),a={mode:n,scope:i,selection:s??o?.selection,requestBlobName:o?.blobName,qualifiedPathName:r},l=this._inflightRequest||this._pendingRequests[0];if(l&&v6(a,l))return`Skipping ${n}/${i} request because it is subsumed by inflight request ${l.id}.`;let c=this._freshCompletedRequests.find(f=>v6(a,f)),u=`${r?.relPath}@${a.selection?.toString()}`;if(c)return`Skipping ${n}/${i} request at ${u} because it is subsumed by ${c.id}, which was recently completed.`}enqueueRequest(r,n,i,s){let o=this.shouldNotEnqueueRequestReason(r,n,i,s);if(o){this._logger.debug(o);return}let a=this._resolvePath(r);s=s??a?.selection;let l=`${r?.relPath}@${s?.toString()}`,c={id:this._apiServer.createRequestId(),qualifiedPathName:r,mode:n,scope:i,enqueuedAt:Date.now()};this._logger.debug(`Starting enqueuing ${n}/${i} request ${c.id} at ${l}.`);let u=this._inflightRequest||this._pendingRequests[0];u&&(c.mode==="FOREGROUND"||c.mode==="FORCED"?(this._logger.debug(`Clearing requests for foreground request @ ${l}.`),this.cancelAll()):c.mode==="BACKGROUND"&&u.mode==="BACKGROUND"&&!Le.equals(u.qualifiedPathName,c.qualifiedPathName)?(this._logger.debug(`Clearing requests for background request @ ${l}.`),this.cancelAll()):c.mode==="BACKGROUND"&&u.mode==="BACKGROUND"&&u.scope==="WORKSPACE"&&c.scope==="FILE"&&(this._logger.debug(`Clearing background workspace requests for background file request @ ${l}.`),this.cancelAll()));let f=this._pendingRequests.find(p=>v6(c,p));return f?this._logger.debug(`Skipping enqueueing request ${c.id} at ${l} because it is subsumed by ${f.id}, which is already pending.`):this._pendingRequests.push(c),this.state.value=this._inflightRequest?"inflight":"pending",this._processPendingRequestsDebounced(),(c.mode==="FOREGROUND"||c.mode==="FORCED"||this._suggestionManager.suggestionWasJustAccepted.value||this._completionJustAccepted.value)&&this._processPendingRequestsDebounced.flush(),c.id}cancelAll(){this._inflightRequest&&(this._logger.debug(`Cancelling inflight request ${this._inflightRequest.id}.`),this._inflightRequest.cancelTokenSource?.cancel(),this._inflightRequest.cancelTokenSource?.dispose(),this._inflightRequest=void 0),this._pendingRequests.length>0&&(this._logger.debug(`Cancelling ${this._pendingRequests.length} pending requests: ${this._pendingRequests.map(r=>r.id).toString()}.`),this._pendingRequests=[],this._processPendingRequestsDebounced.cancel())}async _processPendingRequests(){if(this._inflightRequest){this._logger.debug("Waiting for inflight request to complete.");return}else if(!this._pendingRequests.length){this._logger.debug("Waiting for a request to be enqueued.");return}let[r]=this._pendingRequests.splice(0,1),n=this._resolvePath(r.qualifiedPathName),i=Date.now()-r.enqueuedAt;this._logger.debug(`Starting to process ${r.id} after ${i} ms.`);let s=n?.blobName,o=r.qualifiedPathName,a=n?.document,l=n?.selection,c=r.mode,u=r.scope,f=this._suggestionManager.getRejectedSuggestions().filter(E=>E.changeType!=="noop"&&(u==="WORKSPACE"||o===void 0||E.qualifiedPathName.equals(o))).map(E=>new Qk(E.qualifiedPathName.relPath,E.lineRange,E.result.charStart,E.result.charEnd)),p=r.id,g=this._inflightRequest={...r,requestBlobName:s,selection:l,cancelTokenSource:new jl.CancellationTokenSource};this.state.value="inflight";let m=this._stateController.setState(sSe),y=$e.ok,v=[],C=new Date;try{let E=Date.now(),w=HSe({requestId:p,clientCreatedAt:new Date,instruction:"",selectedCode:a?.getText(l&&Fs(l,a)),prefix:l&&a?.getText(Fs({start:0,stop:l.start},a)),suffix:l&&a?.getText(Fs({start:l.stop,stop:a.lineCount},a)),language:a?.languageId,pathName:o,mode:c,scope:u,blockedLocations:f,unindexedEditEvents:[],unindexedEditEventsBaseBlobNames:[]},this._workspaceManager,this._diagnosticsManager,this._apiServer,this._blobNameCalculator,this._configListener,g.cancelTokenSource.token,this._nextEditSessionEventReporter),B=Date.now(),R=0,N=0,W=0,Z=E-g.enqueuedAt;this._logger.debug(`[${g.id}] queued for ${Z} ms.`);for await(let Y of w){if(y=Y.status,!Y.suggestion)break;W++;let ce=Date.now()-g.enqueuedAt;this._logger.debug(`[${Y.suggestion?.requestId}/${Y.suggestion?.result.suggestionId}] ${Y.suggestion?.changeType?.toString()} took ${ce} ms since enqueue.`),R===0&&Y.suggestion!==void 0&&Y.suggestion.changeType!=="noop"&&(R=ce),W===4&&R===0&&(N=ce),this.lastResponse.value=Y.suggestion,Y.suggestion&&v.push(Y.suggestion)}let te=y===$e.ok&&v.length===0;if(y===$e.ok&&!te&&this._freshCompletedRequests.push(g),!te&&g.mode==="BACKGROUND"){this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_preprocessing_latency_ms",value:B-E});let Y=Date.now()-g.enqueuedAt;y===$e.ok?this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_finish_latency_ms",value:Y}):R>0||N>0?this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_partial_latency_ms",value:Y}):y===$e.cancelled?this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_cancel_latency_ms",value:Y}):this._clientMetricsReporter.report({client_metric:"next_edit_bg_stream_error_latency_ms",value:Y}),R>0?this._clientMetricsReporter.report({client_metric:"next_edit_bg_first_change_latency_ms",value:R}):N>0?this._clientMetricsReporter.report({client_metric:"next_edit_bg_sufficient_noops_latency_ms",value:N}):W<4&&y===$e.ok&&this._clientMetricsReporter.report({client_metric:"next_edit_bg_sufficient_noops_latency_ms",value:Y})}}catch(E){this._logger.warn(`[${p}] Next edit failed: ${E}.`),this._nextEditSessionEventReporter.reportEvent(p,void 0,Date.now(),"error-api-error","unknown")}finally{g===this._inflightRequest&&(this._inflightRequest=void 0,this._pendingRequests.length>0?(this._processPendingRequestsDebounced(),this._processPendingRequestsDebounced.flush()):(this._logger.debug("No more pending requests."),this.state.value="ready",y===$e.ok&&!this._suggestionManager.getActiveSuggestions().some(w=>w.state==="fresh"&&w.changeType!=="noop")?UCt(this._stateController.setState(oSe),e._statusClearTimeoutMs):y!==$e.cancelled&&y!==$e.ok&&(this._stateController.setState(iSe),this._logger.debug(`Request ${p} failed with status: ${y}.`))));let E=new Nk(p,c,u,o,y,v,C);this._recentSuggestions.addItem(E),this.lastFinishedRequest.value=E,m.dispose(),g.cancelTokenSource.dispose()}}clearCompletedRequests(r){this._freshCompletedRequests=this._freshCompletedRequests.filter(n=>r!==void 0&&n.mode!==r)}_resolvePath(r){let n=r&&Le.from(r),i=n&&this._findEditorForPath(n),s=i&&i.document,o=s&&this._blobNameCalculator.calculate(n.relPath,s.getText()),a=i&&new Vn(i.selection.start.line,i.selection.end.line);return{blobName:o,document:s,selection:a}}_findEditorForPath(r){let n=Le.from(r);return jl.window.activeTextEditor&&this._workspaceManager.safeResolvePathName(jl.window.activeTextEditor.document.uri)?.equals(n)?jl.window.activeTextEditor:jl.window.visibleTextEditors.find(i=>this._workspaceManager.safeResolvePathName(i.document.uri)?.equals(n))}},LCt=15;function v6(e,t){return e.mode===t.mode&&(e.scope===t.scope||e.scope==="CURSOR"&&t.scope==="FILE")&&(e.scope==="WORKSPACE"||Le.equals(e.qualifiedPathName,t.qualifiedPathName))&&!(e.scope!=="WORKSPACE"&&e.requestBlobName&&t.requestBlobName&&e.requestBlobName!==t.requestBlobName)&&!(e.scope==="CURSOR"&&e.selection?.start!=null&&t.selection?.start!=null&&Math.abs(e.selection.start-t.selection.start)>LCt)}function UCt(e,t){setTimeout(()=>{e.dispose()},t)}var YSe=q(Cs()),Qs=q(require("vscode"));var ow=q(require("vscode"));var Km=class extends X{_document;_lastSetAt;_observable;constructor(t=void 0,r=1){super(),this._observable=this.addDisposable(new da(t));let n=i=>{this.value===void 0||i&&this._document&&i!==this._document||this._lastSetAt&&Date.now()-this._lastSetAt<r||this.clear()};this.addDisposable(ow.window.onDidChangeActiveTextEditor(()=>{n()})),this.addDisposable(ow.window.onDidChangeTextEditorSelection(i=>{n(i.textEditor.document)})),this.addDisposable(ow.workspace.onDidChangeTextDocument(i=>{n(i.document)}))}get value(){return this._observable.value}listen(t,r=!1){return this._observable.listen(t,r)}waitUntil(t,r){return this._observable.waitUntil(t,r)}set(t,r){this._lastSetAt=Date.now(),this._document=r,this._observable.value=t}clear(){this._document=void 0,this._observable.value=void 0}};var $Se=q(require("vscode"));var zm=class{constructor(t){this.suggestion=t}},eC=class{constructor(t){this.suggestion=t}},aw=class{constructor(t){this.suggestion=t}},tC=class{constructor(t){this.suggestion=t}},rC=class{constructor(t){this.suggestion=t}};function wN(e,t){if(t.contentChanges.length===0||t.document.uri.fsPath!==e.qualifiedPathName.absPath)return new zm(e);let r=e.state==="accepted",n=t.document,i=r?e.afterLineRange():e.lineRange,s=t.contentChanges.filter(g=>g.range.end.line<=i.start&&!GSe(g,i)),o=s.map(g=>{let m=g.text.match(/\n/g)?.length??0,y=g.range.end.line-g.range.start.line;return m-y}).reduce((g,m)=>g+m,0),a=new Vn(e.lineRange.start+o,e.lineRange.stop+o),l=s.map(g=>g.text.length-g.rangeLength).reduce((g,m)=>g+m,0),c=n.offsetAt(new $Se.Position(a.start,0))-l,u=e.with({result:{...e.result,charStart:e.result.charStart+l,charEnd:e.result.charEnd+l},lineRange:a}),f=t.contentChanges.filter(g=>GSe(g,i)).map(g=>({rangeOffset:g.rangeOffset-c,rangeLength:g.rangeLength,text:g.text})).sort((g,m)=>g.rangeOffset-m.rangeOffset);if(f.length===0)return l===0?new zm(u):new eC(u);let p=0;for(let g of f){if((r?e.result.existingCode:e.result.suggestedCode).slice(p+g.rangeOffset,p+g.rangeOffset+g.text.length)!==g.text)return new tC(e);p+=g.text.length-g.rangeLength}return r&&(p*=-1),p!==e.result.suggestedCode.length-e.result.existingCode.length?new tC(e):r?new rC(u.with({state:"fresh"})):new aw(u.with({state:"accepted"}))}function OCt(e){return new Vn(e.start.line,e.end.line+(e.end.character>0?1:0))}function GSe(e,t){let r=OCt(e.range);return r.intersects(t)||t.length===0&&r.touches(t)?!0:r.length===0&&r.start===t.start?!e.text.endsWith(`
`)||r.equals(t):!1}var SN=class extends X{constructor(r,n,i=1e3*60*10){super();this._workspaceManager=r;this._nextEditSessionEventReporter=n;this.defaultRejectionDurationMs=i;this.suggestionWasJustAccepted=new Km,this.suggestionWasJustUndone=new Km,this.addDisposable(this.suggestionWasJustAccepted),this.addDisposable(this.suggestionWasJustUndone),this.addDisposable(new Qs.Disposable(()=>this.clear(!0))),this.addDisposable(Qs.workspace.onDidChangeTextDocument(s=>{this.handleChangeEvent(s)}))}_suggestions=[];_justAcceptedSuggestions=[];_rejectedSuggestions=[];_suggestionsChangedListeners=[];suggestionWasJustAccepted;suggestionWasJustUndone;_logger=j("SuggestionManagerImpl");onSuggestionsChanged(r){return this._suggestionsChangedListeners.push(r),new Qs.Disposable(()=>{this._suggestionsChangedListeners=this._suggestionsChangedListeners.filter(n=>n!==r)})}dispatchSuggestionsChangedEvent(r){let n={...r,newSuggestions:r.newSuggestions,oldSuggestions:r.oldSuggestions};this._suggestionsChangedListeners.forEach(i=>void i(n))}add(r,n){if(this._rejectedSuggestions=this._getCurrentRejectedSuggestions(),n){let s=this._rejectedSuggestions.length;this._rejectedSuggestions=this._rejectedSuggestions.filter(([o,a])=>!r.some(l=>o.intersects(l))),s!==this._rejectedSuggestions.length&&this._logger.debug(`Clearing ${s-this._rejectedSuggestions.length} old rejections.`)}else{let s=r.length;r=r.filter(o=>!this._rejectedSuggestions.some(([a,l])=>a.intersects(o))),s!==r.length&&this._logger.debug(`Dropping ${s-r.length} suggestions that overlap with rejected suggestions.`)}if(!r.length)return!1;let i=this._suggestions;this._filterSuggestions(s=>!r.some(o=>s.intersects(o)));for(let s of r)this._reportNonemptyEvent(s,"nonempty-suggestion-added");return this._suggestions.push(...r),this.checkValidity(this._suggestions),this.dispatchSuggestionsChangedEvent({oldSuggestions:i,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:[],undone:[]}),!0}remove(r){if(!r.length)return!1;let n=this._suggestions,i=this._rejectedSuggestions;return this._filterSuggestions(s=>!r.some(o=>o.equals(s))),this._rejectedSuggestions=this._getCurrentRejectedSuggestions().filter(([s,o])=>!r.some(a=>a.equals(s))),this._logger.debug(`Removing ${n.length-this._suggestions.length} suggestions and ${i.length-this._rejectedSuggestions.length} rejections from the manager.`),n.length!==this._suggestions.length?(this.dispatchSuggestionsChangedEvent({oldSuggestions:n,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:[],undone:[]}),!0):i.length!==this._rejectedSuggestions.length}clear(r,n){let i=this._suggestions;for(let s of i)this._reportNonemptyEvent(s,"nonempty-suggestion-cleared");n?this._suggestions=this._suggestions.filter(s=>s.mode!==n):this._suggestions=[],r&&(this._rejectedSuggestions=[]),this._justAcceptedSuggestions=[],this.dispatchSuggestionsChangedEvent({oldSuggestions:i,newSuggestions:[],accepted:this._justAcceptedSuggestions,rejected:[],undone:[]})}getActiveSuggestions(){return[...this._suggestions]}getJustAcceptedSuggestions(){return[...this._justAcceptedSuggestions]}clearJustAcceptedSuggestions(){this._justAcceptedSuggestions.length!==0&&(this._justAcceptedSuggestions=[],this.dispatchSuggestionsChangedEvent({oldSuggestions:this._suggestions,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:[],undone:[]}))}findSuggestionById(r){return this._suggestions.find(n=>n.result.suggestionId===r)}_getCurrentRejectedSuggestions(){let r=Date.now(),n=this._rejectedSuggestions.filter(([i,s])=>r<s);return n.length!==this._rejectedSuggestions.length&&this._logger.debug(`Filtering out ${this._rejectedSuggestions.length-n.length} expired rejections.`),n}getRejectedSuggestions(){return this._rejectedSuggestions=this._getCurrentRejectedSuggestions(),this._rejectedSuggestions.map(([r,n])=>r)}getAllSuggestions(){return[...this.getActiveSuggestions(),...this.getRejectedSuggestions()]}accept(r){if(r.length===0)return;let n=new Qs.WorkspaceEdit;for(let i of r)n.replace(Qs.Uri.from({scheme:i.uriScheme,path:i.qualifiedPathName.absPath}),new Qs.Range(new Qs.Position(i.lineRange.start,0),new Qs.Position(i.lineRange.stop,0)),i.result.suggestedCode);Qs.workspace.applyEdit(n)}reject(r,n=this.defaultRejectionDurationMs){if(r.length===0)return;this._logger.debug(`Rejecting ${r.length} suggestions.`),this._justAcceptedSuggestions=this._justAcceptedSuggestions.filter(a=>!r.some(l=>l.equals(a)));let i=this._suggestions;this._filterSuggestions(a=>!r.some(l=>l.equals(a)));let s=Date.now()+n,o=r.map(a=>[a,s]);this._rejectedSuggestions=this._getCurrentRejectedSuggestions().concat(o),this.dispatchSuggestionsChangedEvent({oldSuggestions:i,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:r,undone:[]})}handleChangeEvent(r){if(r.contentChanges.length===0)return!1;let n=this._workspaceManager.safeResolvePathName(r.document.uri);if(n===void 0)return!1;let i=this._suggestions,[s,o]=(0,YSe.partition)(this._suggestions,w=>n.equals(w.qualifiedPathName)),a=s.map(w=>wN(w,r)),l=this._justAcceptedSuggestions.map(w=>wN(w,r)),c=this._getCurrentRejectedSuggestions().map(([w,B])=>wN(w,r)),u=_g(a,aw),f=_g(a,tC),p=_g(l,rC),g=_g(c,rC);this._justAcceptedSuggestions=_g(l,zm).concat(_g(l,eC));let m=p.concat(g),y=f.filter(w=>m.some(B=>B.lineRange.equals(w.afterLineRange(r.document))||B.lineRange.intersects(w.afterLineRange(r.document))));(u.length>0||f.length>0||m.length>0)&&this._logger.debug(`Accepting ${u.length} suggestions and invalidating ${f.length} suggestions (of which ${y.length} were invalidated due to undo) and undoing ${m.length} suggestions.`);let v=u.length===0&&m.length===0&&f.length>y.length,C=[..._g(a,zm),..._g(a,eC)].map(w=>this._markStaleIfNeeded(w,v,"document-changed")),E=o.map(w=>this._markStaleIfNeeded(w,v,"document-changed"));for(let w of u)this._reportNonemptyEvent(w,r.reason===Qs.TextDocumentChangeReason.Redo?"nonempty-suggestion-redone":"nonempty-suggestion-accepted","document-changed");for(let w of f)this._reportNonemptyEvent(w,"nonempty-suggestion-invalidated","document-changed");for(let w of m)this._reportNonemptyEvent(w,"nonempty-suggestion-undone","document-changed");return this._suggestions=E.concat(C,p),this.checkValidity(this._suggestions),this._justAcceptedSuggestions=(v?[]:this._justAcceptedSuggestions).concat(u),u.length>0&&this.suggestionWasJustAccepted.set(!0),p.length>0&&this.suggestionWasJustUndone.set(!0),this.dispatchSuggestionsChangedEvent({oldSuggestions:i,newSuggestions:this._suggestions,accepted:this._justAcceptedSuggestions,rejected:[],undone:p}),u.length>0}_filterSuggestions(r){this._suggestions=this._suggestions.filter(n=>{let i=r(n);return i||this._reportNonemptyEvent(n,"nonempty-suggestion-dropped"),i}),this.checkValidity(this._suggestions)}_markStaleIfNeeded(r,n,i){return n?(this._reportNonemptyEvent(r,"nonempty-suggestion-becomes-stale",i),r.with({state:"stale"})):r}checkValidity(r){if(r.length<2)return!0;let n=[...r];n.sort((s,o)=>s.qualifiedPathName.relPath.localeCompare(o.qualifiedPathName.relPath)||s.lineRange.compareTo(o.lineRange));let i=n[0];for(let s=1;s<n.length;s++){let o=n[s];if(i.intersects(o))return this._logger.error(`Found intersecting suggestions, ${i.toString()} and ${o.toString()}`),this._nextEditSessionEventReporter.reportEventFromSuggestion(o,"error-intersecting-suggestions","unknown"),!1}return!0}_reportNonemptyEvent(r,n,i){r.changeType!=="noop"&&this._nextEditSessionEventReporter.reportEventFromSuggestion(r,n,i??"unknown")}};function _g(e,t){return e.filter(r=>r instanceof t).map(r=>r.suggestion)}var IN=q(Cs()),ro=q(require("vscode"));var qCt=2,VCt=200,HCt=80,WCt=3,GCt=3,$Ct=4,nC=class e extends X{constructor(r,n,i,s,o){super();this._configListener=r;this._context=n;this._keybindingWatcher=i;this._featureFlagManager=s;this._hints=o;this._decorations=new C6(this._context,this._keybindingWatcher,this._hints),this._hoverPanel=new b6,this.showHintDecoration=IN.debounce(a=>{this._decorations.decorate(a)},VCt)}_decorations;_previousEditor;_hoverPanel;showHintDecoration;enable(){this.dispose(),(this._configListener.config.enableDebugFeatures||gr(this._featureFlagManager.currentFlags.vscodeChatHintDecorationMinVersion))&&(this._hoverPanel.enable(),this.addDisposable(ro.window.onDidChangeActiveTextEditor(r=>{this._decorations.clearDecorations(this._previousEditor),this._previousEditor=r,r&&e.canDecorateEditor(r)&&this.enableMultilineSelectionHints(r.selection)})),this.addDisposable(ro.window.onDidChangeTextEditorSelection(r=>{if(!e.canDecorateEditor(r.textEditor))return;let n=r.selections[0];this.enableMultilineSelectionHints(n)})))}dispose(){super.dispose(),this._decorations.clearDecorations(),this._hoverPanel.dispose()}enableMultilineSelectionHints(r){this._decorations.clearDecorations(),r.isSingleLine?this._hoverPanel.setRange():(this.showHintDecoration(this.getOffsetLine(r)),this._hoverPanel.setRange(r.start,r.end))}static canDecorateEditor(r){return r.document.uri.scheme==="file"||r.document.uri.scheme==="untitled"}getOffsetLine(r){let n=ro.window.activeTextEditor,i=r.active.line<r.anchor.line;if(!n)return i?r.active.line-1:r.active.line+1;let s=i?1:-1,o=[Math.min(r.anchor.line,r.active.line),Math.max(r.anchor.line,r.active.line)],a=r.active.line+s*qCt,l=r.active.line,c=[Math.min(a,l),Math.max(a,l)],u=IN.range(Math.max(c[0],o[0]),Math.min(c[1],o[1])+1);return u.sort((f,p)=>{let g=n.document.lineAt(f).text.length-n.document.lineAt(p).text.length;return g===0?i?f-p:p-f:g}),u[0]===r.active.line?u[1]:u[0]}},C6=class{constructor(t,r,n){this._context=t;this._keybindingWatcher=r;this._hints=n;this._rightSpacerDecorationType=g6(),this._keyHintDecorationTypes=[],this._hints.forEach((i,s)=>{let o=nw(i.keyBindingId,this._keybindingWatcher,this._context);this._decorationLength+=o.length*GCt;let a={keyBindingDecorationTypes:p6(),textDecorationType:uN(i.text)};this._decorationLength+=i.text.length,s<this._hints.length-1&&(a.gapDecorationType=uN(" | "),this._decorationLength+=$Ct),this._keyHintDecorationTypes.push(a)})}_rightSpacerDecorationType;_keyHintDecorationTypes;_decorationLength=0;decorate(t){let r=ro.window.activeTextEditor;if(!r||!nC.canDecorateEditor(r)||this._keyHintDecorationTypes.length===0)return;let n=Eg(r,t),i=r.document.lineAt(t).text.length,s=Math.max(HCt-i-this._decorationLength,WCt);r.setDecorations(this._rightSpacerDecorationType,[{range:n,renderOptions:{after:{margin:`0 0 0 ${s}ch`}}}]),this._keyHintDecorationTypes.forEach((o,a)=>{let l=nw(this._hints[a].keyBindingId,this._keybindingWatcher,this._context);o.keyBindingDecorationTypes.forEach((c,u)=>{l[u]&&r.setDecorations(c,[{range:n,renderOptions:l[u]}])}),r.setDecorations(o.textDecorationType,[{range:n}]),o.gapDecorationType&&r.setDecorations(o.gapDecorationType,[{range:n,renderOptions:{after:{margin:"0 0.65em 0 0.5em"}}}])})}clearDecorations(t){let r=t??ro.window.activeTextEditor;r&&(r.setDecorations(this._rightSpacerDecorationType,[]),this._keyHintDecorationTypes.forEach(n=>{n.keyBindingDecorationTypes.forEach(i=>{r.setDecorations(i,[])}),r.setDecorations(n.textDecorationType,[]),n.gapDecorationType&&r.setDecorations(n.gapDecorationType,[])}))}},b6=class extends X{_provider;_range;enable(){this.registerHoverProvider(ro.window.activeTextEditor),this.addDisposable(ro.window.onDidChangeActiveTextEditor(t=>{this.registerHoverProvider(t)}))}setRange(t,r){if(t&&r){this._range=new ro.Range(t,r);return}this._range=void 0}provideHover(t,r,n){if(this._range&&this._range.contains(r)){let i=`
$(augment-icon-simple)
&nbsp;
<a href="command:${Ji.commandID}" title="Open Augment Chat">
    Open in Chat
</a> |
<a href="command:${ug.commandID}" title="Fix with Augment Chat">
    Fix
</a> |
<a href="command:${Dv.commandID}" title="Explain with Augment Chat">
    Explain
</a> | <a href="command:${Tv.commandID}" title="Write a test with Augment Chat">
    Write a Test
</a> | <a href="command:${Rv.commandID}" title="Document with Augment Chat">
    Document
</a>
            `,s=new ro.MarkdownString(i);return s.isTrusted=!0,s.supportHtml=!0,s.supportThemeIcons=!0,new ro.Hover(s,this._range)}}registerHoverProvider(t){this._provider?.dispose(),this._provider=void 0,!(!t||!nC.canDecorateEditor(t))&&(this._provider=ro.languages.registerHoverProvider({pattern:t.document.uri.fsPath},this))}};var KSe=q(require("vscode"));var BN=class{_logger=j("ResolveFileService");constructor(){}getOpenDocumentText(t){for(let r of KSe.workspace.textDocuments)if(r.uri.fsPath===t&&r.uri.scheme==="file")return r.getText();return null}async resolveFile(t){let r=Le.from(t).absPath,n=this.getOpenDocumentText(r);if(n==null)try{n=await Sn(r)}catch(i){this._logger.warn(`Could not read file: ${r}`,i),n=""}return n}register(t){t.registerHandler("read-file-request",async r=>({type:"read-file-response",data:{pathName:r.data.pathName,content:await this.resolveFile(r.data.pathName)}}))}};var DN=class e{constructor(t){this.publish=t}static _lineLen=80;static _indent="    ";static _subIndent="  ";_content="";_disposed=!1;get content(){return this._content}addSection(t){let r=(this._content.length===0?"":`
`)+`================
`;this._addLine(r+t)}addObject(t){if(t===void 0)this.addLine(this.formatValue(t));else for(let r in t){let n=t[r];typeof n!="object"?this.addValue(r,n):this.addValue(r,JSON.stringify(n))}}formatValue(t){return t===void 0?"<undefined>":t===null?"<null>":typeof t=="string"?`"${t}"`:`${t}`}addLine(t){this._disposed||this._addLine(e._indent+t)}addText(t,r){if(this._disposed)return;let n=(this._content.length===0?"":`
`)+">>>>>>>>>>>>>>>> ";this._addLine(n+t),this._addLine(r,""),r.length>0&&r[r.length-1]!==`
`&&this._addLine("|<---- (ends here)"),this._addLine("<<<<<<<<<<<<<<<< "+t)}addError(t){if(e._indent.length+t.length<=e._lineLen){this._addLine(e._indent+t);return}let r=0,n=e._indent;for(;;){let i=t.indexOf(": ",r);if(i===-1){this._addLine(n+t.substring(r));break}this._addLine(n+t.substring(r,i+1)),r=i+2,n+=e._subIndent}}addValue(t,r){this._addLine(e._indent+t+": "+this.formatValue(r))}addStringValue(t,r,n=!0){this._addLine(e._indent+t+": "+(n?`"${r}"`:r))}_addLine(t,r=`
`){this._disposed||(this._content+=t+r)}savePoint(){return this._content.length}rollback(t){this._disposed||this._content.length>t&&(this._content=this._content.substring(0,t))}dispose(){this._disposed=!0,this._content=""}};var iC=q(require("vscode"));var RN=q(require("vscode"));var TN=class{constructor(t){this._baseState=t}_stateEventEmitter=new RN.EventEmitter;_state={0:[],1:[],2:[],3:[]};onDidChangeState=this._stateEventEmitter.event;setState(t){this._state[t.priority].push(t);let r=!1;return RN.Disposable.from({dispose:()=>{if(r)return;r=!0;let n=!1;this._state[t.priority]=this._state[t.priority].filter(i=>n?!0:(n=i===t,!n)),this._stateEventEmitter.fire()}})}getPriorityState(){for(let t of t6){let r=this._state[t];if(r.length>0)return r[r.length-1]}return this._baseState}reset(){for(let t of t6)this._state[t]=[];this._stateEventEmitter.fire()}};var YCt="Augment",kN=class extends X{_statusBarItem;_stateManager=new TN(Hwe);_currentState;constructor(){super(),this.addDisposable(new iC.Disposable(()=>this.reset())),this._statusBarItem=iC.window.createStatusBarItem("vscode-augment.PrimaryStatusBarItem",iC.StatusBarAlignment.Right),this._statusBarItem.name="Augment",this._statusBarItem.command=Ov.commandID,this.addDisposables(this._statusBarItem,this._stateManager.onDidChangeState(()=>this.updateState())),this.updateState(),this._statusBarItem.show()}updateState(){let t=this._stateManager.getPriorityState();if(t===this._currentState)return;this._currentState=t,this._statusBarItem.tooltip=t.tooltip,this._statusBarItem.backgroundColor=t.colors?.background,this._statusBarItem.color=t.colors?.foreground;let r=t.label?t.label:YCt;this._statusBarItem.text=`${t.icon} ${r}`}setState(t){let r=this._stateManager.setState(t);return this.updateState(),r}reset(){this._stateManager.reset()}};var sC=q(require("vscode"));var MN=class extends Zs{constructor(r,n,i,s,o,a,l,c,u,f,p=js(i,f)){super("next-edit-suggestions.html",i);this._webviewView=n;this._suggestionManager=s;this._globalNextEdit=o;this._editorEditManager=a;this._nextEditSessionEventReporter=l;this._resolveFileService=c;this._nextEditVSCodeToWebviewMessage=u;this._asyncMsgHandler=p;this.loadHTML(r),this.addDisposable(this._asyncMsgHandler),this._resolveFileService.register(this._asyncMsgHandler),this.addDisposable(this._suggestionManager.onSuggestionsChanged(g=>{let m=z8([this._editorEditManager.state.suggestion].concat(g.newSuggestions).concat(this._suggestionManager.getJustAcceptedSuggestions())).filter(Yx(Xn,Pv));this.postMessage({type:"next-edit-suggestions-changed",data:{suggestions:m}}),n.badge={value:m.length,tooltip:"Next Edit Suggestions"}})),this.addDisposable(new sC.Disposable(this._editorEditManager.addStateListener((g,m)=>{if(g instanceof Ht||g instanceof Rr||g instanceof kr){this.postMessage({type:"next-edit-preview-active",data:g.suggestion});return}if(m instanceof Ht||m instanceof Rr||m instanceof kr){this.postMessage({type:"next-edit-dismiss"});return}if((g.suggestion?.equals(m.suggestion)??m.suggestion===void 0)&&!(g instanceof Ht)&&!(m instanceof Ht))return;let y=z8([this._editorEditManager.state.suggestion].concat(this._suggestionManager.getActiveSuggestions()).concat(this._suggestionManager.getJustAcceptedSuggestions())).filter(Yx(Xn,Pv));this.postMessage({type:"next-edit-suggestions-changed",data:{suggestions:y}}),this.postMessage({type:"next-edit-next-suggestion-changed",data:g.suggestion})}))),this.addDisposable(this._nextEditVSCodeToWebviewMessage.event(g=>{this.postMessage(g)})),this.addDisposable(this._webview.onDidReceiveMessage(this.onDidReceiveMessage)),n.badge={value:this._suggestionManager.getActiveSuggestions().filter(Yx(Xn)).length,tooltip:"Next Edit Suggestions"},this._nextEditSessionEventReporter.reportEventWithoutIds("panel-created","unknown")}logger=j("NextEditSuggestionsPanel");wrapAsyncMsg(r,n,i=null){return this.postMessage({type:"async-wrapper",requestId:r.requestId,error:i,baseMsg:n})}postMessage=async r=>this._webview.postMessage(r);onDidReceiveMessage=async r=>{switch(r.type){case"next-edit-suggestions-action":if("accept"in r.data){await this._editorEditManager.acceptSuggestion(el.from(r.data.accept),"next-edit-panel-item-click",void 0,!0);return}if("reject"in r.data){this._editorEditManager.rejectSuggestion(el.from(r.data.reject),"next-edit-panel-item-click");return}if("undo"in r.data&&r.data.undo){this._editorEditManager.undoAcceptSuggestion(el.from(r.data.undo),"next-edit-panel-item-click");return}if("acceptAllInFile"in r.data){if(r.data.acceptAllInFile.length===0){sC.window.showInformationMessage("No Next Edits to accept.");return}this._editorEditManager.acceptAllSuggestionsInFile(r.data.acceptAllInFile[0].qualifiedPathName,"next-edit-panel-item-click");return}if("rejectAllInFile"in r.data){if(r.data.rejectAllInFile.length===0){sC.window.showInformationMessage("No Next Edits to reject.");return}this._editorEditManager.rejectAllSuggestionsInFile(r.data.rejectAllInFile[0].qualifiedPathName,"next-edit-panel-item-click");return}if("undoAllInFile"in r.data){if(r.data.undoAllInFile.length===0){sC.window.showInformationMessage("No Next Edits to undo.");return}this._editorEditManager.undoAllSuggestionsInFile(r.data.undoAllInFile[0].qualifiedPathName,"next-edit-panel-item-click");return}this.logger.error("Unknown action message: "+JSON.stringify(r));return;case"next-edit-dismiss":this._editorEditManager.dismiss("next-edit-panel-item-click",!0,!1);return;case"next-edit-loaded":this._nextEditSessionEventReporter.reportEventWithoutIds("panel-opened","unknown"),await this.postMessage({type:"next-edit-suggestions-changed",data:{suggestions:this._suggestionManager.getActiveSuggestions().concat(this._suggestionManager.getJustAcceptedSuggestions()).filter(Yx(Xn,Pv))}}),this.postMessage({type:"next-edit-next-suggestion-changed",data:this._editorEditManager.state.suggestion}),this._globalNextEdit.handleWorkspaceEditsAvailable();return;case"next-edit-open-suggestion":await this._editorEditManager.open(el.from(r.data),{shouldAutoApply:!1,preserveFocus:!0,eventSource:"next-edit-panel-item-click",animationDelayMs:0}),this._nextEditSessionEventReporter.reportEvent(r.data.requestId,r.data.result.suggestionId,Date.now(),"panel-suggestion-clicked","click");return;case"next-edit-refresh-started":await this._globalNextEdit.startGlobalQuery(),await this.postMessage({type:"next-edit-refresh-finished"});return;case"next-edit-cancel":this._globalNextEdit.cancel();return;case"next-edit-active-suggestion":this.postMessage({type:"next-edit-active-suggestion",data:r.data});return}}};var FN=class{constructor(t,r,n){this.storage=t;this.toolsModel=r;this.getSettingsMcpServers=n}logger=j("ToolConfigStore");async get(){try{return await this.storage.load("toolsConfiguration")??{version:X8,tools:[]}}catch(t){return this.logger.error(`Failed to load tool configurations: ${He(t)}`),{version:X8,tools:[]}}}async save(t){try{await this.storage.save("toolsConfiguration",t)}catch(r){let n=`Failed to save tool configurations: ${He(r)}`;throw this.logger.error(n),new Za(n)}}async getMCPServers(){try{let t=await this.storage.load("mcpServers");return Array.isArray(t)?t:[]}catch(t){return this.logger.error(`Failed to load MCP servers: ${He(t)}`),[]}}async saveMCPServers(t){try{await this.storage.save("mcpServers",t),await this.updateSidecarMCPServers()}catch(r){let n=`Failed to save MCP servers: ${He(r)}`;throw this.logger.error(n),new Za(n)}}async updateSidecarMCPServers(){try{let r=(await this.getMCPServers()).map(s=>({name:s.name,command:s.command,args:[],useShellInterpolation:!0,env:s.env})),n=this.getSettingsMcpServers?this.getSettingsMcpServers():[],i=[...r];n&&n.length>0&&i.push(...n),this.toolsModel&&this.toolsModel.setMcpServers(i)}catch(t){this.logger.error(`Failed to update sidecar MCP servers: ${He(t)}`)}}async getTerminalSettings(){try{return await this.storage.load("terminalSettings")??{supportedShells:[],selectedShell:void 0}}catch(t){return this.logger.error(`Failed to load terminal settings: ${He(t)}`),{supportedShells:[],selectedShell:void 0}}}async saveTerminalSettings(t){try{await this.storage.save("terminalSettings",t)}catch(r){let n=`Failed to save terminal settings: ${He(r)}`;throw this.logger.error(n),new Za(n)}}async updateSelectedShell(t){let r=await this.getTerminalSettings();r.selectedShell=t,await this.saveTerminalSettings(r)}async updateStartupScript(t){let r=await this.getTerminalSettings();r.startupScript=t,await this.saveTerminalSettings(r)}};var zSe=q(require("vscode"));var QN=class extends Zs{_currentApp;constructor(t){super("main-panel.html",t),this.addDisposable(this._webview.onDidReceiveMessage(r=>this.onDidReceiveMessage(r)))}changeApp(t){this._currentApp=t,this._currentApp&&(this._currentApp.register(this._webview),Uc("vscode-augment.mainPanel.app",this._currentApp.appType())),this._postAppTypeMsg()}onDidReceiveMessage(t){switch(t.type){case"main-panel-loaded":this._postAppTypeMsg();break}}_postAppTypeMsg(){this._webview.postMessage({type:"main-panel-display-app",data:this._currentApp?.appType()})}};var NN=class extends X{constructor(r){super();this._extensionUri=r;this.addDisposable(this.visibilityEventEmitter)}_logger=j("MainPanelWebviewProvider");_webviewView=void 0;_mainPanelWebview=void 0;currentApp=void 0;visibilityEventEmitter=new zSe.EventEmitter;get onVisibilityChange(){return this.visibilityEventEmitter.event}isVisible(){return!!this._webviewView?.visible}changeApp(r){this.currentApp?.dispose(),r&&this.addDisposable(r),this._setViewTitle(r?.title()||""),this.currentApp=r,this._mainPanelWebview?.changeApp(r)}_setViewTitle(r){this._webviewView&&(this._webviewView.title=r)}async resolveWebviewView(r,n,i){r.onDidDispose(()=>{this._webviewView===r&&(this._logger.debug("Disposing of main panel webview view"),this._webviewView=void 0)}),this._webviewView=r,this._setViewTitle(this.currentApp?.title()||""),this._mainPanelWebview?.dispose(),this._mainPanelWebview=new QN(this._webviewView.webview),this.addDisposable(this._mainPanelWebview),this._mainPanelWebview.changeApp(this.currentApp),this._mainPanelWebview.addDisposable(this._webviewView.onDidChangeVisibility(()=>{this.visibilityEventEmitter.fire(!!this._webviewView?.visible)})),await this._mainPanelWebview.loadHTML(this._extensionUri)}};var PN=class extends X{constructor(r,n,i){super();this._config=r;this._featureFlagsManager=n;this.onWebviewCreated=i;this.maybeRegisterWebview()}webviewView=void 0;nextEditWebview=void 0;maybeRegisterWebview=()=>{!this.webviewView||!Kl(this._config.config,this._featureFlagsManager.currentFlags.vscodeNextEditMinVersion)||(this.nextEditWebview?.dispose(),this.nextEditWebview=this.onWebviewCreated(this.webviewView),this.addDisposable(this.nextEditWebview))};resolveWebviewView(r,n,i){this.webviewView=r,this.maybeRegisterWebview()}};var E6=class extends Error{constructor(){super("SingletonExecutor has been disposed")}},sd=class e extends X{constructor(r){super();this._execute=r;this.addDisposable({dispose:()=>this._stopping=!0})}static _disposedError=new E6;_nextExecutionScheduled=!1;_kickPromise=Promise.resolve();_stopping=!1;kick(){return this._nextExecutionScheduled?this._kickPromise:(this._nextExecutionScheduled=!0,this._kickPromise=this._kickPromise.then(async()=>(this._nextExecutionScheduled=!1,this._stopping?Promise.reject(e._disposedError):this._execute())),this._kickPromise)}};var LN=class e{constructor(t){this._workspaceStorage=t;this._persistedFolders=this._readFolders(),this._toPersist=new Map(this._persistedFolders),this._persister=new sd(async()=>await this._persistFolders())}static storageKey="external-source-folders:original";_persistedFolders;_toPersist;_persister;getFolders(){return new Map(this._persistedFolders)}async setFolders(t){JSe(this._persistedFolders,t)||(this._toPersist=new Map(t),await this._persister.kick())}async _persistFolders(){if(JSe(this._persistedFolders,this._toPersist))return;let t=new Map(this._toPersist),r=new Array;for(let[n,i]of t)r.push({folderRoot:n,folderName:i});await this._workspaceStorage.update(e.storageKey,r),this._persistedFolders=t}_readFolders(){let t=this._workspaceStorage.get(e.storageKey);if(t===void 0)return new Map;if(!Array.isArray(t))return new Map;let r=new Map;for(let n of t)n.folderRoot===void 0||typeof n.folderRoot!="string"||n.folderName===void 0||typeof n.folderName!="string"||r.set(n.folderRoot,n.folderName);return r}};function JSe(e,t){if(e.size!==t.size)return!1;for(let[r,n]of e)if(t.get(r)!==n)return!1;return!0}var jSe=q(require("vscode"));var UN=class extends X{constructor(r,n){super();this._globalState=r;this._syncingStatus=n;this.loadWorkspaceMessageState(),this.addDisposable(this._syncingStatus.onDidChangeSyncingStatus(i=>this._handleSyncingProgress()))}_workspaceMessageState=new Map;_shouldShowSummary=!1;shouldShowSummaryEmitter=new jSe.EventEmitter;get shouldShowSummary(){return this._shouldShowSummary}get onShouldShowSummary(){return this.shouldShowSummaryEmitter.event}setShouldShowSummary(r){this._shouldShowSummary=r}async _handleSyncingProgress(){let r=this._syncingStatus.status;r.foldersProgress.length!==0&&await this.handleShowingSummaryMsg(r)}async handleShowingSummaryMsg(r){if(!(r.status!=="done"||r.foldersProgress.every(s=>s.progress?.trackedFiles===void 0||s.progress.trackedFiles===0)||r.foldersProgress.find(s=>this._workspaceMessageState.get(s.folderRoot)?.workspaceSummary)||!r.foldersProgress.find(s=>s.progress?.newlyTracked))){this.showSummaryMessage();for(let s of r.foldersProgress)this._workspaceMessageState.set(s.folderRoot,{folderRoot:s.folderRoot,workspaceSummary:!0});await this.saveWorkspaceMessageState()}}showSummaryMessage(){this._shouldShowSummary=!0,this.shouldShowSummaryEmitter.fire(!0)}async saveWorkspaceMessageState(){await this._globalState.update("workspaceMessageStates",Array.from(this._workspaceMessageState.values()))}loadWorkspaceMessageState(){let r=this._globalState.get("workspaceMessageStates");r&&(this._workspaceMessageState=new Map(r.map(n=>[n.folderRoot,n])))}dispose(){this.shouldShowSummaryEmitter.dispose()}};var qN=q(require("vscode"));var ON=class extends X{constructor(r,n){super();this._statusBar=r;this.addDisposables(n(i=>this._handleSyncingStatusChanged(i)),new qN.Disposable(()=>{this._syncingStatusBarDisposable?.dispose(),this._syncingStatusBarDisposable=void 0}))}static syncingMessage="Augment is synchronizing with your codebase to make better suggestions. The first time typically takes a few minutes.";_syncingStatusBarDisposable;_syncingNotificationShown=!1;_handleSyncingStatusChanged(r){switch(r.status){case"longRunning":this._syncingNotificationShown||r.foldersProgress.find(i=>i.progress?.newlyTracked)&&(this._syncingNotificationShown=!0,qN.commands.executeCommand(Ji.commandID));case"running":this._syncingStatusBarDisposable||(this._syncingStatusBarDisposable=this._statusBar.setState($we));break;case"done":this._syncingNotificationShown=!1,this._syncingStatusBarDisposable?.dispose(),this._syncingStatusBarDisposable=void 0;break}}};var VN=class extends X{constructor(r,n){super();this._statusBarManager=r;this._syncingEnabledTracker=n;this.addDisposable(this._syncingEnabledTracker.onDidChangeSyncingEnabled(s=>this._updateSyncingState(s==="enabled")));let i=this._syncingEnabledTracker.syncingEnabledState;i!=="initializing"&&this._updateSyncingState(i==="enabled")}_syncingDisabledDisp=void 0;_updateSyncingState(r){r?(this._syncingDisabledDisp?.dispose(),this._syncingDisabledDisp=void 0):this._syncingDisabledDisp||(this._syncingDisabledDisp=this._statusBarManager.setState(aSe))}};var WN=q(require("vscode"));var HN=class extends X{_workspaceManager=void 0;_syncingEnabledChangedEmitter=new WN.EventEmitter;_publishStateExecutor;constructor(){super(),this._publishStateExecutor=new sd(async()=>{await this._publishSyncingState()})}get syncingEnabledState(){return this._workspaceManager?this._workspaceManager.syncingEnabledState:"initializing"}get onDidChangeSyncingEnabled(){return this._syncingEnabledChangedEmitter.event}enableSyncing(){if(this.syncingEnabledState==="initializing")throw new Error("Syncing enabled state not initialized");this.syncingEnabledState!=="enabled"&&this._workspaceManager.enableSyncing()}disableSyncing(){if(this.syncingEnabledState==="initializing")throw new Error("Syncing enabled state not initialized");this.syncingEnabledState!=="disabled"&&this._workspaceManager.disableSyncing()}set workspaceManager(t){this._workspaceManager=t,this.addDisposable(this._workspaceManager.onDidChangeSyncingState(r=>void this._publishStateExecutor.kick()))}async _publishSyncingState(){await WN.commands.executeCommand("setContext","vscode-augment.syncingEnabledState",this.syncingEnabledState),this._syncingEnabledChangedEmitter.fire(this.syncingEnabledState)}};var GN=class e extends X{constructor(r){super();this._workspaceStorage=r;this._currentPermission=this._getStoredPermission(),this._persister=new sd(async()=>await this._persistCurrentPermission()),this._logPermission("Initial syncing permission",this._currentPermission)}static storageKey="syncingPermission.2024102300";_currentPermission;_persister;_logger=j("SyncingPermissionTracker");get syncingPermissionDenied(){return this._currentPermission?.state===1}getFolderSyncingPermission(r){let n=this._currentPermission;if(n===void 0)return this._logger.info(`Permission to sync folder ${r} unknown: no permission information recorded`),"unknown";if(n.state===1){let i=new Date(n.timestamp).toLocaleString();return this._logger.info(`Permission to sync folder ${r} denied at ${i}`),"denied"}for(let i of n.permittedFolders)if(r===i.sourceFolder){let s=new Date(i.timestamp).toLocaleString();return this._logger.info(`Permission to sync folder ${r} granted at ${s}; type = ${i.type}`),"granted"}return this._logger.info(`Permission to sync folder ${r} unknown: no current permission for folder`),"unknown"}setDefaultPermissions(r){if(this._currentPermission!==void 0||r.length===0)return;let n=Date.now();this._setSyncingPermission({state:0,permittedFolders:r.map(i=>({sourceFolder:i,type:"implicit",timestamp:n}))})}setPermittedFolders(r){let n=Date.now();this._setSyncingPermission({state:0,permittedFolders:r.map(i=>({sourceFolder:i,type:"explicit",timestamp:n}))})}addPermittedFolder(r){let n=this._currentPermission;(n===void 0||n.state===1)&&(n={state:0,permittedFolders:[]});let i={sourceFolder:r,type:"explicit",timestamp:Date.now()};this._setSyncingPermission({...n,permittedFolders:[...n.permittedFolders,i]})}addImplicitlyPermittedFolder(r){let n=this._currentPermission;if(n?.state===1)return;if(n===void 0)n={state:0,permittedFolders:[]};else if(n.permittedFolders.find(o=>o.sourceFolder===r)!==void 0)return;let i={sourceFolder:r,type:"implicit",timestamp:Date.now()};this._setSyncingPermission({...n,permittedFolders:[...n.permittedFolders,i]})}dropPermission(r){if(r.length===0||this._currentPermission===void 0||this._currentPermission.state===1)return;let n=this._currentPermission.permittedFolders.filter(i=>!r.includes(i.sourceFolder));this._setSyncingPermission({...this._currentPermission,permittedFolders:n})}dropStaleFolders(r){if(this._currentPermission===void 0||this._currentPermission.state===1)return;let n=this._currentPermission.permittedFolders.filter(i=>r.includes(i.sourceFolder));this._setSyncingPermission({...this._currentPermission,permittedFolders:n})}denyPermission(){this._setSyncingPermission({state:1,timestamp:Date.now()})}_getStoredPermission(){return this._workspaceStorage.get(e.storageKey)}_setSyncingPermission(r){this._currentPermission=r,this._logPermission("Updating syncing permission",r),this._persister.kick()}async persistCurrentPermission(){await this._persister.kick()}async _persistCurrentPermission(){await this._workspaceStorage.update(e.storageKey,this._currentPermission)}_logPermission(r,n){if(n===void 0){this._logger.info(`${r}: undefined`);return}if(n.state===1){let s=new Date(n.timestamp).toLocaleString();this._logger.info(`${r}: syncing permission denied for workspace at ${s}`);return}let i=n.permittedFolders.length===0?"none":n.permittedFolders.map(s=>{let o=new Date(s.timestamp).toLocaleString();return`
    ${s.sourceFolder} (${s.type}) at ${o}`}).join("");this._logger.info(`${r}: syncing permission granted for workspace. Folders:${i}`)}};var ZSe=q(require("vscode"));var $N=class extends X{constructor(r,n){super();this._featureFlagManager=r;this._workspaceManager=n;this.addDisposable(this._workspaceManager.onDidChangeSourceFolders(()=>this._handleSourceFoldersChanged())),this.addDisposable(this._workspaceManager.onDidChangeSyncingProgress(i=>this._handleSyncingProgressChanged(i))),this._handleSourceFoldersChanged()}_newFolders=new Set;_folderBacklogSize=new Map;_folderTrackedFilesSize=new Map;_syncingStatusEmitter=new ZSe.EventEmitter;_status={status:"done",foldersProgress:[]};get status(){return this._status}get onDidChangeSyncingStatus(){return this._syncingStatusEmitter.event}_handleSourceFoldersChanged(){this._newFolders.clear(),this._folderBacklogSize.clear(),this._folderTrackedFilesSize.clear(),this._workspaceManager.getSyncingProgress().forEach(r=>this._updateFolderState(r)),this._reportSyncingStatus()}_handleSyncingProgressChanged(r){this._updateFolderState(r),this._reportSyncingStatus()}_updateFolderState(r){r.progress!==void 0&&(r.progress.newlyTracked?this._newFolders.add(r.folderRoot):this._newFolders.delete(r.folderRoot),this._folderBacklogSize.set(r.folderRoot,r.progress.backlogSize),this._folderTrackedFilesSize.set(r.folderRoot,r.progress.trackedFiles))}_reportSyncingStatus(){let r=!1,n=0,i=0,s=this._featureFlagManager.currentFlags;this._folderBacklogSize.forEach((l,c)=>{l>=s.bigSyncThreshold&&(r=!0),n+=l}),this._folderTrackedFilesSize.forEach((l,c)=>{i+=l});let o="done";r?o="longRunning":(n>s.smallSyncThreshold||n/i>=.1)&&(o="running");let a=this._status.status;this._status={status:o,foldersProgress:this._workspaceManager.getSyncingProgress(),prevStatus:a},this._syncingStatusEmitter.fire(this._status)}};var ec=q(Cs()),St=q(require("vscode"));var _6=class{async read(t){try{return await jk(t)}catch{return}}stat(t){try{return rf(t)}catch{return}}};function XSe(){return new _6}var zCt="file-edit-events.json",YN=class{save(t){return Promise.resolve()}load(){return Promise.resolve([])}clear(){}},KN=class{_logger=j("FileEditEventsStore");_version="1";_storeFile;constructor(t){this._logger.debug(`Using [${t.directory}] to store events`),this._storeFile=Mt(t.directory,zCt)}save(t){this._logger.debug(`Saving ${t.length} events to ${this._storeFile}`),XAe(this._storeFile,JSON.stringify({version:this._version,events:t}))}async load(){this._logger.debug(`Loading events from ${this._storeFile}`);try{if(!qr(this._storeFile))return this._logger.debug(`File ${this._storeFile} does not exist. Not loading events.`),[];let t=await Sn(this._storeFile),r=JSON.parse(t);return r.version!==this._version?(this._logger.debug(`Version mismatch: ${r.version} !== ${this._version}. Not loading events from ${this._storeFile}`),[]):(this._logger.debug(`Loaded ${r.events.length} events from ${this._storeFile}`),r.events)}catch(t){return this._logger.debug(`Failed to load events from ${this._storeFile}`,t),[]}}clear(){this.save([])}};function eIe(e,t){let r=Math.min(e.length,t.length),n=1024,i=0;for(;i<r;){let s=e.slice(i,i+n),o=t.slice(i,i+n);if(s!==o)break;if(s.length===0)throw new Error(`unexpected empty block: s1=${e}, s2=${t}`);i+=s.length}for(;i<r&&e[i]===t[i];)i++;return i}function tIe(e,t){let r=Math.min(e.length,t.length),n=1024,i=0;for(;i<r;){let a=e.slice(Math.max(0,e.length-i-n),e.length-i),l=t.slice(Math.max(0,t.length-i-n),t.length-i);if(a!==l)break;if(a.length===0)throw new Error(`unexpected empty block: s1=${e}, s2=${t}`);i+=a.length}let s=e.length-1,o=t.length-1;for(;i<r&&e[s-i]===t[o-i];)i++;return i}var Zl=class e{beforeStart;afterStart;beforeText;afterText;constructor(t){this.beforeStart=t.beforeStart,this.afterStart=t.afterStart,this.beforeText=t.beforeText,this.afterText=t.afterText}static from(t){return new e({beforeStart:t.beforeStart??0,afterStart:t.afterStart??0,beforeText:t.beforeText??"",afterText:t.afterText??""})}get beforeEnd(){return this.beforeStart+this.beforeText.length}get afterEnd(){return this.afterStart+this.afterText.length}get beforeCRange(){return new Fo(this.beforeStart,this.beforeEnd)}get afterCRange(){return new Fo(this.afterStart,this.afterEnd)}toString(){return`SingleEdit{before=${this.beforeStart}:${this.beforeEnd}, after=${this.afterStart}:${this.afterEnd}, beforeText=${JSON.stringify(this.beforeText)}, afterText=${JSON.stringify(this.afterText)}}`}mergeNext(t){if(t.afterText===""&&t.beforeStart>=this.afterStart&&t.beforeEnd<=this.afterEnd){let r=this.afterText.slice(0,t.beforeStart-this.afterStart)+this.afterText.slice(t.beforeEnd-this.afterStart);return new e({beforeStart:this.beforeStart,afterStart:this.afterStart,beforeText:this.beforeText,afterText:r})}else{if(this.afterEnd===t.beforeStart)return new e({beforeStart:this.beforeStart,afterStart:this.afterStart,beforeText:this.beforeText+t.beforeText,afterText:this.afterText+t.afterText});if(t.beforeEnd===this.afterStart)return new e({beforeStart:t.beforeStart,afterStart:t.afterStart,beforeText:t.beforeText+this.beforeText,afterText:t.afterText+this.afterText})}}normalize(){let t=this.beforeStart,r=this.afterStart,n=this.beforeText,i=this.afterText,s=eIe(n,i);s>0&&(t+=s,r+=s,n=n.slice(s),i=i.slice(s));let o=tIe(n,i);return o>0&&(n=n.slice(0,-o),i=i.slice(0,-o)),new e({beforeStart:t,afterStart:r,beforeText:n,afterText:i})}};var xg=class e{path;beforeBlobName;afterBlobName;edits;constructor(t){this.path=t.path,this.beforeBlobName=t.beforeBlobName,this.afterBlobName=t.afterBlobName,this.edits=t.edits}static from(t){return new e({path:t.path??"",beforeBlobName:t.beforeBlobName??"",afterBlobName:t.afterBlobName??"",edits:t.edits?.map(n=>Zl.from(n))??[]})}changedChars(){return this.edits.reduce((t,r)=>t+r.beforeText.length+r.afterText.length,0)}isRepeatedChange(){if(this.edits.length<=1)return!0;let t=this.edits[0];return this.edits.every(r=>r.beforeText===t.beforeText&&r.afterText===t.afterText)}mergeNext(t){if(this.edits.length!==t.edits.length||this.path!==t.path||!t.isRepeatedChange())return;let r=[],n=0,i=0;for(let s=0;s<this.edits.length;s++){let o=this.edits[s],a=o.mergeNext(t.edits[s]);if(a===void 0)return;r.push(new Zl({beforeStart:a.beforeStart+n,afterStart:a.afterStart+i,beforeText:a.beforeText,afterText:a.afterText})),n+=a.beforeText.length-o.beforeText.length,i+=a.afterText.length-o.afterText.length}if(r.length>=2){let s=r.map(a=>a.beforeCRange);if(Fo.anyOverlaps(s))return;let o=r.map(a=>a.afterCRange);if(Fo.anyOverlaps(o))return}return new e({path:this.path,beforeBlobName:this.beforeBlobName,afterBlobName:t.afterBlobName,edits:r}).normalize()}normalize(){let t=this.edits.map(r=>r.normalize()).filter(r=>r.beforeText!==r.afterText).sort((r,n)=>r.beforeStart-n.beforeStart);return new e({path:this.path,beforeBlobName:this.beforeBlobName,afterBlobName:this.afterBlobName,edits:t})}hasChange(){return this.edits.some(t=>t.beforeText!==t.afterText)}};var nIe=q(x6());var lw=class{_events=new nIe.default;_queueSizeChars=0;constructor(){}add(t){return this._events.push(t),this._updateState(t,"ADDED")}_updateState(t,r){return t===void 0?0:(r==="ADDED"?this._queueSizeChars+=t.changedChars()??0:this._queueSizeChars-=t.changedChars()??0,t.changedChars()??0)}removeOld(){let t=this._events.shift();return this._updateState(t,"REMOVED"),t}removeNew(){let t=this._events.pop();return this._updateState(t,"REMOVED"),t}newest(){if(this._events.length!==0)return this.at(this._events.length-1)}asArray(){return this._events.toArray()}get numEvents(){return this._events.length}get sizeChars(){return this._queueSizeChars}at(t){return this._events.get(t)}removeAt(t){let r=this._events.get(t);this._updateState(r,"REMOVED"),this._events.removeOne(t)}clear(){this._events.clear(),this._queueSizeChars=0}};var Jm=class{constructor(t,r=new lw){this.maxQueueSizeChars=t;this._queue=r}addEvent(t,r){let n=this._queue.newest(),i=n?.afterBlobName===r,s=0,o=i?void 0:n?.mergeNext(t);if(o!==void 0){let a=this._queue.removeNew();s-=a?.changedChars()??0,o.hasChange()&&(s+=this._queue.add(o))}else s+=this._queue.add(t);for(;this._queue.sizeChars>this.maxQueueSizeChars;)this._queue.removeOld();return s}removeEventsForFile(t){for(let r=this._queue.numEvents-1;r>=0;r--){let n=this._queue.at(r);n!==void 0&&n.path===t&&this._queue.removeAt(r)}}removeEventsPriorToBlob(t){let r=null;for(let n=this._queue.numEvents-1;n>=0;n--){let i=this._queue.at(n);if(!r&&i?.afterBlobName===t){this._queue.removeAt(n),r=i.path;continue}r&&i?.path===r&&this._queue.removeAt(n)}}updatePath(t,r){for(let n=0;n<this._queue.numEvents;n++){let i=this._queue.at(n);i!==void 0&&i.path===t&&(i.path=r)}}getEvents(){return this._queue.asArray()}clear(){this._queue.clear()}};var w6=["file".toString(),"untitled".toString()];var cw=class extends X{constructor(r,n,i,s,o=5e3){super();this._folderName=r;this._blobNameCalculator=n;this._maxBlobSizeBytes=i;this._store=s;this.maxEventCharsToReturn=o;this._logger=j(`FileEditEventsWatcher[${this._folderName}]`),this._eventsQueue=new Jm(this.maxEventCharsToReturn*2)}_eventsQueue;_lastKnownText=new Map;_lastEventTimestamp=0;_logger;_swapLastKnownText(r,n){if(!this._lastKnownText.has(r))throw new Error(`no known text for [${r}]`);let i=this._lastKnownText.get(r);return this._lastKnownText.set(r,n),i}_vscodeEventToFileEditEvent(r,n){let i=n.document.getText(),s=this._swapLastKnownText(r,i),o=n.contentChanges.map(a=>new Zl({beforeStart:a.rangeOffset,afterStart:a.rangeOffset,beforeText:s.substring(a.rangeOffset,a.rangeOffset+a.rangeLength),afterText:a.text}));if(o.length>1){o.sort((l,c)=>l.beforeStart-c.beforeStart);let a=0;o=o.map(l=>{let c=l.afterStart+a;return a+=l.afterText.length-l.beforeText.length,new Zl({beforeStart:l.beforeStart,afterStart:c,beforeText:l.beforeText,afterText:l.afterText})})}return new xg({path:r,edits:o,beforeBlobName:this._blobNameCalculator.calculateNoThrow(r,s),afterBlobName:this._blobNameCalculator.calculateNoThrow(r,i)}).normalize()}handleChangedDocument(r){let n=r.relPath,i=r.event;if(!w6.includes(i.document.uri.scheme))return;if(i.document.getText().length>this._maxBlobSizeBytes){this._logger.debug(`Ignoring event for ${n} because it is too large`);return}if(!this._lastKnownText.has(n)){this._logger.debug(i.contentChanges.length>0?`Last known text is not for the same file. Missing last known text for [${n}].  This is ok if we have recently cleared.`:`Updating last known text for ${n} - based on empty event`),this._lastKnownText.set(n,i.document.getText());return}if(i.contentChanges.length===0){this._logger.verbose(`Ignoring event for ${n} - no content changes`);return}let s=this._vscodeEventToFileEditEvent(n,i);s.hasChange()&&(this._eventsQueue.addEvent(s),this._lastEventTimestamp=Date.now())}get lastEventTimestamp(){return this._lastEventTimestamp}handleOpenedDocument(r){if(w6.includes(r.document.uri.scheme)){if(r.document.getText().length>this._maxBlobSizeBytes){this._logger.debug(`Ignoring event for ${r.relPath} because it is too large`);return}this._logger.debug(`Adding last known text for ${r.relPath}. size before = ${this._lastKnownText.size}`),this._lastKnownText.set(r.relPath,r.document.getText())}}handleClosedDocument(r){this._logger.debug(`Removing last known text for ${r.relPath}. size before = ${this._lastKnownText.size}`),this._lastKnownText.delete(r.relPath)}getEvents(){let r=[],n=0,i=this._eventsQueue.getEvents();for(let s=i.length-1;s>=0;s--){let o=i[s];if(n+o.changedChars()>this.maxEventCharsToReturn)break;r.push(o),n+=o.changedChars()}return r.reverse(),r}handleFileDeleted(r){this._logger.debug(`Deleting events for ${r.relPath}`),this._lastKnownText.delete(r.relPath),this._eventsQueue.removeEventsForFile(r.relPath)}_handleFileWillRename(r,n){this._logger.debug(`Renaming events for file [${r}] to [${n}]`),this._lastKnownText.has(r)&&(this._lastKnownText.set(n,this._lastKnownText.get(r)),this._lastKnownText.delete(r)),this._eventsQueue.updatePath(r,n)}handleFileWillRename(r){if(this._logger.debug(`Renaming events for file/folder [${r.oldRelPath}] to [${r.newRelPath}]`),r.type==="File")this._handleFileWillRename(r.oldRelPath,r.newRelPath);else if(r.type==="Directory"){for(let n of this._lastKnownText.keys())if(ks(r.oldRelPath,n)){let i=r.newRelPath+n.slice(r.oldRelPath.length);this._handleFileWillRename(n,i)}}}clear(r){this._eventsQueue.clear(),r.clearLastKnown&&this._lastKnownText.clear(),this._lastEventTimestamp=0,this._store.clear()}async loadEvents(){(await this._store.load()).forEach(n=>this._eventsQueue.addEvent(xg.from(n)))}dispose(){super.dispose(),this._store.save(this._eventsQueue.getEvents()),this._logger.debug("Disposing FileEditEventsWatcher")}};var uw=class extends X{constructor(r,n,i,s,o,a,l,c,u=5e3){super();this._blobNameCalculator=r;this._maxBlobSizeBytes=n;this._onFolderTextDocumentChanged=i;this._onFolderTextDocumentOpened=s;this._onFolderTextDocumentClosed=o;this._onFolderFileDeleted=a;this._onFolderFileWillRename=l;this._debugFeaturesEnabled=c;this._maxEventCharsToReturn=u}_watcher=new Map;_logger=j("FileEditManager");listenToEvents(){this._logger.debug("Listening to events"),this.addDisposable(this._onFolderTextDocumentChanged(r=>this._handleTextDocumentChanged(r))),this.addDisposable(this._onFolderTextDocumentOpened(r=>this._handleTextDocumentOpened(r))),this.addDisposable(this._onFolderTextDocumentClosed(r=>this._handleTextDocumentClosed(r))),this.addDisposable(this._onFolderFileDeleted(r=>this._handleFileDeleted(r))),this.addDisposable(this._onFolderFileWillRename(r=>this._handleFileWillRename(r))),this.addDisposable(lN(r=>{this._logger.debug(`Stash changed for repo ${r.repoId}`),this._watcher.get(r.repoId)?.clear({clearLastKnown:!0})})),this.addDisposable(Ym(r=>{this._logger.debug(`Head changed for repo ${r.repoId}`),this._watcher.get(r.repoId)?.clear({clearLastKnown:!0})}))}_handleTextDocumentChanged(r){let n=this._watcher.get(r.folderId);n&&n.handleChangedDocument(r)}_handleTextDocumentOpened(r){let n=this._watcher.get(r.folderId);n&&n.handleOpenedDocument(r)}_handleTextDocumentClosed(r){let n=this._watcher.get(r.folderId);n&&n.handleClosedDocument(r)}_handleFileDeleted(r){let n=this._watcher.get(r.folderId);n&&n.handleFileDeleted(r)}_handleFileWillRename(r){let n=this._watcher.get(r.folderId);n&&n.handleFileWillRename(r)}findFolderIdWithMostRecentChanges(){let r,n=-1,i=-1;for(let[s,o]of this._watcher)o.lastEventTimestamp>n&&(r=o,n=o.lastEventTimestamp,i=s);return r===void 0?-1:i}findEventsForFolder(r){let n=this._watcher.get(r);return n===void 0?[]:n.getEvents()}addInitialDocument(r){this._handleTextDocumentOpened(r)}startTracking(r,n,i){this._logger.debug(`Tracking folder ${r} with store at ${i.directory}`);let s=new cw(n,this._blobNameCalculator,this._maxBlobSizeBytes,this._debugFeaturesEnabled?new KN(i):new YN,this._maxEventCharsToReturn);return this._watcher.set(r,s),s.loadEvents(),s}clearAll(r){this._watcher.forEach(n=>n.clear(r))}dispose(){super.dispose(),this._logger.debug("Disposing FileEditManager"),this._watcher.forEach(r=>r.dispose())}};var fw=q(require("vscode")),Q6=q(hIe());var dw=class{accepted=!0},wg=class{accepted=!1};var Sg=class extends dw{explicit=!1;format(){return"Tracked"}},R6=class extends dw{constructor(r){super();this.ignoreSourceName=r}explicit=!0;format(){return`Tracked (${this.ignoreSourceName})`}},k6=class extends wg{constructor(r){super();this.ignoreSourceName=r}explicit=!0;format(){return`Not tracked (${this.ignoreSourceName})`}},JN=class{constructor(t,r,n,i){this.dirName=t;this.ignoreSource=r;this.rules=n;this.next=i}},M6=class e{constructor(t,r,n){this._rootUri=t;this._ignoreSource=r;this._top=n}static async buildNew(t,r,n){let i=new Array;if(sf(n,r)!==""){let o=r;for(;;){o=$_(o);let a=sf(n,o),l=await t.getRules(o);if(l&&i.push([a,t,l]),a==="")break}}let s;for(let o=i.length-1;o>=0;o--){let[a,l,c]=i[o];s=new JN(a,l,c,s)}return new e(n,t,s)}async buildAtop(t,r){let n=await this._ignoreSource.getRules(t,r);if(n===void 0)return this;let i=sf(this._rootUri,t),s=new JN(i,this._ignoreSource,n,this._top);return new e(this._rootUri,this._ignoreSource,s)}getPathInfo(t){for(let r=this._top;r!==void 0;r=r.next){if(!ks(r.dirName,t))throw new Error(`candidatePath "${t}" is not below ignore file's parent "${r.dirName}"`);let n=t.slice(r.dirName.length),i=r.rules.test(n);if(i.ignored)return new k6(r.ignoreSource.getName(fw.Uri.joinPath(this._rootUri,r.dirName)));if(i.unignored)return new R6(r.ignoreSource.getName(fw.Uri.joinPath(this._rootUri,r.dirName)))}return new Sg}},F6=class e{constructor(t,r){this._ignoreSources=t;this._ignoreStacks=r}static async buildNew(t,r,n){let i=new Array;for(let s of t){let o=await M6.buildNew(s,r,n);i.push(o)}return new e(t,i)}async buildAtop(t,r){let n=new Array,i=0;for(let s=0;s<this._ignoreStacks.length;s++){let o=this._ignoreStacks[s],a=await o.buildAtop(t,r);a!==o&&i++,n.push(a)}return i===0?this:new e(this._ignoreSources,n)}getPathInfo(t){for(let r=this._ignoreStacks.length-1;r>=0;r--){let i=this._ignoreStacks[r].getPathInfo(t);if(i.explicit)return i}return new Sg}};async function hbt(e,t){let r=fw.Uri.joinPath(e,t);try{let n=await Sn(r.fsPath),i=(0,Q6.default)({ignorecase:!1});return i.add(n),i}catch{}}var oC=class{constructor(t=[]){this._ignoreSources=t}async build(t,r){return await F6.buildNew(this._ignoreSources,t,r)}},hw=class{constructor(t){this.filename=t}getName(t){return XQ(fw.Uri.joinPath(t,this.filename))}async getRules(t,r){if(!(r!==void 0&&!(r.find(([i,s])=>s==="File"&&this.filename===i)!==void 0)))return hbt(t,this.filename)}},jN=class{constructor(t){this._sourceFolderRootPath=t}getName(){return"default Augment rules"}getRules(t){return new Promise(r=>{if(hs(t)!==this._sourceFolderRootPath)r(void 0);else{let n=(0,Q6.default)({ignorecase:!1});n.add([".git","*.pem","*.key","*.pfx","*.p12","*.jks","*.keystore","*.pkcs12","*.crt","*.cer","id_rsa","id_ed25519","id_ecdsa","id_dsa",".augment-guidelines",".env"]),r(n)}})}};var ZN=class{constructor(t){this.name=t}start=Date.now();increments=[];charge(t){this.increments.push({name:t,end:Date.now()})}*[Symbol.iterator](){let t=this.start;for(let{name:r,end:n}of this.increments)yield[r,n-t],t=n;yield["total",t-this.start]}format(){return(this.name?`${this.name}:
`:"")+Array.from(this).map(([r,n])=>`  - ${r}: ${n} ms`).join(`
`)}},XN=class{_value=0;_add(t=1){this._value+=t}_invalidate(){this._value=Number.NaN}get value(){return this._value}},N6=class extends XN{increment(t=1){this._add(t)}},P6=class extends XN{_start=void 0;start(){this._start=Date.now()}stop(){this._start===void 0?this._invalidate():this._add(Date.now()-this._start)}},aC=class{constructor(t){this.name=t}counters=new Map;timings=new Map;counterMetric(t){let r=this.counters.get(t);return r===void 0&&(r=new N6,this.counters.set(t,r)),r}timingMetric(t){let r=this.timings.get(t);return r===void 0&&(r=new P6,this.timings.set(t,r)),r}format(){let t=this.name?`${this.name}:`:"",r=Array.from(this.counters.entries()).map(([s,o])=>`  - ${s}: ${o.value}`).join(`
`),n="  - timing stats:",i=Array.from(this.timings.entries()).map(([s,o])=>`    - ${s}: ${o.value} ms`).join(`
`);return t+`
`+r+`
`+n+`
`+i}};var gIe=q(require("os"));function pIe(e){let t=gIe.default.homedir();return Yy(e,t)}var gw=q(require("path")),q6=q(require("vscode"));async function t2(e,t,r,n){let i=await r.build(e,t),s=new Map;s.set("",i),s.set(".",i);let o=200,a=Date.now(),l=[];l.push([e,i]);let c;for(;(c=l.pop())!==void 0;){Date.now()-a>=o&&(await new Promise(v=>setTimeout(v,0)),a=Date.now());let[f,p]=c,g=sf(t,f),m=dm(f.fsPath),y=await p.buildAtop(f,m);y!==p&&s.set(g,y);for(let[v,C]of m){if(Date.now()-a>=o&&(await new Promise(N=>setTimeout(N,0)),a=Date.now()),v==="."||v===".."||C!=="Directory")continue;let w=q6.Uri.joinPath(f,v),B=Mt(g,v,!0);y.getPathInfo(B).accepted&&l.push([w,y])}}return new U6(s,n)}var lC=class{constructor(t,r,n,i){this._name=t;this._startUri=r;this._rootUri=n;this._pathFilter=i;if(!gw.isAbsolute(r.fsPath))throw new Error(`PathIterator[${this._name}]: startUri ${this._name} must contain an absolute pathname`);if(!gw.isAbsolute(n.fsPath))throw new Error(`PathIterator[${this._name}]: rootUri ${n.toString()} must contain an absolute pathname`);if(!ks(hs(n),hs(r)))throw new Error(`PathIterator[${this._name}]: startUri ${hs(this._startUri)} must be inside rootUri ${hs(this._rootUri)}`);this._logger.verbose(`Created PathIterator for startUri ${this._startUri.fsPath}, rootUri ${this._rootUri.fsPath}`)}stats=new aC("Path metrics");_logger=j("PathIterator");_dirsEmitted=this.stats.counterMetric("directories emitted");_filesEmitted=this.stats.counterMetric("files emitted");_otherEmitted=this.stats.counterMetric("other paths emitted");_totalEmitted=this.stats.counterMetric("total paths emitted");_readDirMs=this.stats.timingMetric("readDir");_filterMs=this.stats.timingMetric("filter");_yieldMs=this.stats.timingMetric("yield");_totalMs=this.stats.timingMetric("total");async*[Symbol.asyncIterator](){this._totalMs.start();let t=200,r=Date.now(),n=new Array;n.push(this._startUri);let i;for(;(i=n.pop())!==void 0;){Date.now()-r>=t&&(await new Promise(c=>setTimeout(c,0)),r=Date.now());let o=sf(this._rootUri,i),a=this._pathFilter.makeLocalPathFilter(o);this._readDirMs.start();let l=dm(i.fsPath);this._readDirMs.stop();for(let[c,u]of l){if(Date.now()-r>=t&&(await new Promise(v=>setTimeout(v,0)),r=Date.now()),c==="."||c==="..")continue;this._filterMs.start();let p=q6.Uri.joinPath(i,c),g=Mt(o,c,u==="Directory"),m=a.getPathInfo(g,u);this._filterMs.stop();let y=g;u==="File"?this._filesEmitted.increment():u==="Directory"?(y=$y(g),this._dirsEmitted.increment()):this._otherEmitted.increment(),this._totalEmitted.increment(),this._yieldMs.start(),yield[p,y,u,m],this._yieldMs.stop(),u==="Directory"&&m.accepted&&n.push(p)}}this._totalMs.stop()}},L6=class extends wg{constructor(r){super();this.extension=r}format(){return`Unsupported file extension (${this.extension})`}},e2=class{_fileExtensions;constructor(t){if(t){this._fileExtensions=new Set;for(let r of t)this._fileExtensions.add(r.toLowerCase())}else this._fileExtensions=void 0}acceptsPath(t,r="File"){return this.getPathInfo(t,r).accepted}getPathInfo(t,r="File"){if(r==="File"){let i=gw.extname(t);if(this._fileExtensions!==void 0&&!this._fileExtensions.has(i.toLowerCase()))return new L6(i)}else r==="Directory"&&!t.endsWith("/")&&(t+="/");let n=this._getIgnoreStack(qa(t));return n===void 0?new Sg:n.getPathInfo(t)}},U6=class extends e2{constructor(r,n){super(n);this._ignorePathMap=r}makeLocalPathFilter(r){let n=this._getIgnoreStack(r);return new O6(n,this._fileExtensions)}_getIgnoreStack(r){if(nf(r))throw new Error(`Absolute path ${r} passed to PathFilter`);let n=r;for(let i=0;i<1e4;i++){let s=this._ignorePathMap.get(n);if(s)return s;if(qa(n)===n)return;n=qa(n)}throw new Error(`Too-deep or malformed directory name ${r}`)}},O6=class extends e2{constructor(r,n){super(n);this._ignoreStack=r}_getIgnoreStack(r){return this._ignoreStack}};var gbt=q(require("vscode"));function jm(e){let t;return new Promise(r=>{t=e(n=>{t.dispose(),r(n)})})}var r2=class e{static defaultStartSeq=1e4;_next;constructor(t=e.defaultStartSeq){this._next=t}next(){return this._next++}};var n2=class{constructor(t,r=Do){this.root=t;this.commandExecutor=r}async version(){return await this.commandExecutor("git --version")}async diff(t){let r=["git","diff"];t.nameStatus&&r.push("--name-status"),t.hash1&&r.push(t.hash1),t.hash2&&r.push(t.hash2),t.relPath&&(r.push("--"),r.push(t.relPath));let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}async lsFiles(t){let r=["git","ls-files"];t.others&&r.push("--others"),t.excludeStandard&&r.push("--exclude-standard"),t.relPath&&(r.push("--"),r.push(t.relPath));let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}async show(t){let r=["git","show"];t.nameStatus&&r.push("--name-status"),t.oneLine&&r.push("--oneline"),t.object&&r.push(`"${t.object}"`);let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}async symbolicRef(t){let r=["git","symbolic-ref"];t.name&&r.push(t.name);let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}async log(t){let r=["git","log"];t.commit1&&r.push(t.commit1),t.commit2&&r.push(t.commit2),t.noMerges&&r.push("--no-merges"),t.format&&r.push(`--format="${t.format}"`),t.not&&r.push(`--not "${t.not}"`);let n=r.join(" ");return await this.commandExecutor(n,{cwd:this.root.fsPath})}};var Zm={};XP(Zm,{BlobNameRetrieverImpl:()=>V6,FileChangeWatcherImpl:()=>H6,FileUploaderImpl:()=>W6,FileUtilsImpl:()=>G6,HeadChangeWatcher:()=>rw,onDidChange:()=>Ym});var mIe=q(require("vscode"));var V6=class{constructor(t,r,n){this._rootPath=t;this._workspaceManager=r;this._blobNameCalculator=n}async getBufferBlobName(t){let r=mIe.Uri.file(Mt(this._rootPath,t)),i=(await xo(r)).getText();return this._blobNameCalculator.calculate(t,i)}getIndexedBlobName(t){return this._workspaceManager.getBlobName(new Le(this._rootPath,t))}};var i2=require("vscode");var H6=class{constructor(t,r){this._rootPath=t;this.onDidChangeFile=r}async _getOpenTabs(){let t=[];for(let r of i2.window.tabGroups.all)for(let n of r.tabs){let i=n.input;if(!Pk(i,"uri"))continue;let s=i.uri;if(!await jAe(s.fsPath))continue;let a=null;try{a=await i2.workspace.openTextDocument(s)}catch{continue}let l=a.isDirty;t.push({label:n.label,uri:s,isDirty:l})}return t}async getPathsWithBufferChanges(){let r=(await this._getOpenTabs()).filter(i=>i.isDirty&&ks(this._rootPath.fsPath,i.uri.fsPath)),n=[];for(let i of r){let s=Jh(this._rootPath.fsPath,i.uri.fsPath);s!==void 0&&n.push(s)}return n}};var AIe=require("vscode");var W6=class extends X{constructor(r,n){super();this._blobNameCalculator=r;this._apiServer=n;this._uploadQueue=new Ua(async i=>{i!==void 0&&await this._processUpload(i)}),this.addDisposable(this._uploadQueue)}_emitter=new AIe.EventEmitter;_uploadQueue;_logger=j("FileUploaderImpl");get onDidChange(){return this._emitter.event}upload(r,n){let i=this._blobNameCalculator.calculate(r,n);if(i===void 0)throw new Error(`blobNameCalculator returned undefined for ${r}`);return this._uploadQueue.insert({path:r,content:n,blobName:i}),this._uploadQueue.kick(),Promise.resolve(i)}async _processUpload(r){try{this._logger.debug(`Upload started: path [${r.path}] with blob name [${r.blobName}]`),await this._apiServer.batchUpload([{pathName:r.path,text:r.content,blobName:r.blobName,metadata:[]}]),this._logger.debug(`Upload complete: path [${r.path}] with blob name [${r.blobName}]`)}catch(n){this._logger.debug(`Failed upload for [${r.path}]. Caused by: ${n.stack}.`)}}};var G6=class{constructor(t){this._pathFilter=t}isUploadable(t){return this._pathFilter.acceptsPath(t)}};var $6=q(require("vscode"));var yIe=(i=>(i.added="A",i.deleted="D",i.modified="M",i.renamed="R",i))(yIe||{}),pbt=Object.freeze({A:rr.added,D:rr.deleted,M:rr.modified,R:rr.renamed}),mbt=new RegExp("^R\\d{3}$"),Abt=`
`,ybt="	";function vbt(e,t){for(let r in e)if(e[r]===t)return e[r]}function Cbt(e){let r=mbt.test(e)?"R":vbt(yIe,e);if(!r)throw new Error(`Unknown diff change type [${e}]`);return r}function bbt(e){return pbt[Cbt(e)]}function Ebt(e,t,r){return{[rr.added]:void 0,[rr.deleted]:e,[rr.modified]:e,[rr.renamed]:e}[r]}function _bt(e,t,r){return{[rr.added]:e,[rr.deleted]:void 0,[rr.modified]:e,[rr.renamed]:t}[r]}function s2(e){let t=[],r=e.split(Abt);for(let n of r){if(!n||n.trim().length===0)continue;let[i,s,o]=n.split(ybt),a=bbt(i),l={beforePath:Ebt(s,o,a),afterPath:_bt(s,o,a),changeType:a};t.push(l)}return t}var o2=class{constructor(t){this._git=t}async getWorkingDirectoryChanges(){let t=`
`,r=[],n=new Set,i=await this._git.diff({hash1:"HEAD",nameStatus:!0});if(i){r=s2(i);for(let o of r.slice(0,50))o.afterPath!==void 0&&n.add(o.afterPath)}let s=await this._git.lsFiles({others:!0,excludeStandard:!0});if(s){let o=s.split(t).filter(a=>a.trim().length>0&&!n.has(a)).map(a=>({afterPath:a,beforePath:void 0,changeType:rr.added}));r=r.concat(o)}return r}async _getDefaultBranch(){let t="refs/remotes/origin",r=await this._git.symbolicRef({name:`${t}/HEAD`});if(r)return r.trim().replace(t+"/","")}async _getCommitHashes(){let t="%H",r=`
`,n=await this._getDefaultBranch();return(await this._git.log({commit1:n,commit2:"HEAD",noMerges:!0,format:t,not:n}))?.split(r)??[]}async getCommitChanges(){let t=`
`,r={},n=await this._getCommitHashes();for(let i of n){let s=await this._git.show({object:i,nameStatus:!0,oneLine:!0}),o=s?.slice(s.indexOf(t)+1);if(o==null)throw new Error(`Could not get commit changes for commit ${i}`);let a=s2(o);r[i]=a}return r}async getFileWorkingDirectoryChange(t){let r=await this._git.diff({hash1:"HEAD",nameStatus:!0,relPath:t});if(r){let i=s2(r);if(i.length>0)return i[0]}if((await this._git.lsFiles({others:!0,excludeStandard:!0,relPath:t}))?.trim()===t)return{afterPath:t,beforePath:void 0,changeType:rr.added}}async getFileContentForCommit(t,r){let n=await this._git.show({object:`${r}:${t}`});if(n===void 0)throw new Error(`Could not find file ${t} in commit ${r}`);return n}async getFileContentBeforeCommit(t,r){return this.getFileContentForCommit(t,`${r}^`)}};var vIe=q(Cs());var a2=class extends X{constructor(r,n,i,s,o,a,l){super();this._workspaceName=r;this._vcs=n;this._fileUtils=i;this._fileUploader=s;this._fileChangeWatcher=o;this._blobNameRetriever=a;this._configListener=l;this._logger=j(`VCSRepoWatcher[${r}]`),this._changes={commits:[],workingDirectory:[]},this.addDisposable(s.onDidChange(c=>this.handleFileUploaded(c))),this.addDisposable(o.onDidChangeFile(c=>this.handleFileChange(c)))}_changes;_workingDirectoryTrackedPaths=new Set;_trackedBlobs=new Map;_logger;async _uploadFile(r){let n=await r.readContent(),i=await this._fileUploader.upload(r.path,n);return this._trackedBlobs.set(i,r),i}_clear(){this._changes={commits:[],workingDirectory:[]},this._workingDirectoryTrackedPaths.clear(),this._trackedBlobs.clear()}async handleHeadChange(){this._logger.debug("Handling head changes"),this._clear();try{let i=await this.collectCommitChanges();this._changes.commits=i}catch(i){this._logger.error("Error collecting commit changes",i)}let r=await this.collectWorkingDirectoryChanges(),n=await this.collectBufferChanges();this._changes.workingDirectory=r.concat(n)}handleFileUploaded(r){throw new Error("Method not implemented.")}async handleFileChange(r){if(this._logger.debug(`Handling file change [${r.relPath}]`),r.origin==="buffer"&&this._workingDirectoryTrackedPaths.has(r.relPath))return;r.origin==="disk"&&(this._changes.workingDirectory=this._changes.workingDirectory.filter(s=>s.afterPath!==r.relPath)),this._workingDirectoryTrackedPaths.add(r.relPath);let n;if(r.origin==="disk")n=await this._vcs.getFileWorkingDirectoryChange(r.relPath);else if(r.origin==="buffer")n={afterPath:r.relPath,beforePath:r.relPath,changeType:rr.modified};else{this._logger.debug(`Unknown file change origin ${JSON.stringify(r)}`);return}if(!n){this._changes.workingDirectory=this._changes.workingDirectory.filter(s=>{let o=s.changeType===rr.renamed&&s.afterPath===r.relPath,a=s.changeType===rr.deleted&&s.beforePath===r.relPath,l=s.changeType===rr.added&&s.afterPath===r.relPath;return!o&&!a&&!l});return}let i={changeType:n.changeType};n.beforePath&&(i.beforePath=n.beforePath),n.afterPath&&(i.afterPath=n.afterPath),[rr.deleted,rr.modified,rr.renamed].includes(n.changeType)&&(i.headBlobName=await this._uploadFile({path:n.afterPath,readContent:()=>this._vcs.getFileContentForCommit(n.beforePath,"HEAD")})),rr.renamed.includes(n.changeType)&&(this._changes.workingDirectory=this._changes.workingDirectory.filter(s=>s.afterPath!==n.beforePath)),this._changes.workingDirectory.push(i)}async collectCommitChanges(){let r=[];this._logger.debug("Collecting disk changes");let n=await this._vcs.getCommitChanges();for(let i in n){let s={hash:i,files:[]};for(let o of n[i]){let a={changeType:o.changeType};if(o.afterPath!==void 0){if(!this._fileUtils.isUploadable(o.afterPath))continue;a.afterPath=o.afterPath,a.afterBlobName=await this._uploadFile({path:o.afterPath,readContent:()=>this._vcs.getFileContentForCommit(o.afterPath,i)})}if(o.beforePath!==void 0){if(!this._fileUtils.isUploadable(o.beforePath))continue;a.beforePath=o.beforePath,a.beforeBlobName=await this._uploadFile({path:o.beforePath,readContent:()=>this._vcs.getFileContentBeforeCommit(o.beforePath,i)})}s.files.push(a)}r.push(s)}return r}async collectWorkingDirectoryChanges(){let r=[],n=await this._vcs.getWorkingDirectoryChanges();for(let i of n){[rr.added,rr.modified].includes(i.changeType)&&this._workingDirectoryTrackedPaths.add(i.afterPath);let s={changeType:i.changeType};if(i.afterPath!==void 0){if(!this._fileUtils.isUploadable(i.afterPath))continue;s.afterPath=i.afterPath}if(i.beforePath!==void 0){if(!this._fileUtils.isUploadable(i.beforePath))continue;s.beforePath=i.beforePath,s.headBlobName=await this._uploadFile({path:i.beforePath,readContent:()=>this._vcs.getFileContentForCommit(i.beforePath,"HEAD")})}r.push(s)}return r}async collectBufferChanges(){let r=[],n=await this._fileChangeWatcher.getPathsWithBufferChanges();for(let i of n){if(!this._fileUtils.isUploadable(i)||this._workingDirectoryTrackedPaths.has(i))continue;this._workingDirectoryTrackedPaths.add(i);let s={changeType:rr.modified,afterPath:i,beforePath:i};s.headBlobName=await this._uploadFile({path:i,readContent:()=>this._vcs.getFileContentForCommit(i,"HEAD")}),r.push(s)}return r}async getChanges(){let r=(0,vIe.cloneDeep)(this._changes),n=[];for(let i of r.workingDirectory.slice(-50)){if(!i.afterPath){n.push(i);continue}i.indexedBlobName=this._blobNameRetriever.getIndexedBlobName(i.afterPath),i.indexedBlobName!==void 0&&(i.currentBlobName=await this._blobNameRetriever.getBufferBlobName(i.afterPath),n.push(i))}return r.workingDirectory=n,r}handleUnknownBlobs(r){for(let n of r){let i=this._trackedBlobs.get(n);i!==void 0&&this._uploadFile(i)}}};var l2=class{constructor(t,r){this._fileUploader=t;this.configListener=r}_repoWatchers=new Map;_disposables=new Map;_logger=j("VCSWatcher");_headChangeListener;_createFacade(t){if(t.toolName==="git")return new o2(new n2(t.root));throw new Error("only git is supported for now")}startTracking(t,r,n,i,s,o){if(this._logger.debug(`startTracking folderId ${r}`),this._repoWatchers.has(r))return this._logger.debug(`folderId ${r} is already being tracked`),new $6.Disposable(()=>{});let a=new a2(t,this._createFacade(n),o,this._fileUploader,i,s,this.configListener);return this._repoWatchers.set(r,a),this._disposables.set(r,[a]),a.handleHeadChange(),new $6.Disposable(()=>this._stopTracking(r))}_stopTracking(t){this._logger.debug(`stopTracking folderId ${t}`);let r=this._disposables.get(t);if(r){for(let n of r)n.dispose();this._disposables.delete(t)}this._repoWatchers.delete(t)}dispose(){this._logger.debug("Disposing VCSWatcher");for(let t of this._repoWatchers.keys())this._stopTracking(t);this._repoWatchers.clear(),this._disposables.clear()}getWatchedFolderIds(){return Array.from(this._repoWatchers.keys())}async getChanges(){let t={commits:[],workingDirectory:[]};for(let r of this._repoWatchers.values()){let n=await r.getChanges();t.commits=t.commits.concat(n.commits),t.workingDirectory=t.workingDirectory.concat(n.workingDirectory)}return t}handleUnknownBlobs(t){for(let r of this._repoWatchers.values())r.handleUnknownBlobs(t)}listenForEvents(){this._logger.debug("Registering for events"),this._headChangeListener!==void 0&&this._headChangeListener.dispose(),this._headChangeListener=Ym(t=>{this._logger.debug(`Head changed for repo ${t.repoId}`),this._repoWatchers.get(t.repoId)?.handleHeadChange().catch(r=>{r instanceof Error?this._logger.error(`Error handling head change: ${r.message??""} ${r.stack}`):this._logger.error(`Error handling head change: ${r}`)})})}};var Y6=q(Cs());var c2=class{constructor(t,r,n){this._configListener=t;this._openFileManagerV1=r;this._openFileManagerV2=n}_logger=j("OpenFileManagerProxy");get isV2Enabled(){return this._configListener.config.openFileManager.v2Enabled}startTrackingFolder(t,r){return this.isV2Enabled?[this._openFileManagerV2.startTrackingFolder(t,r),this._openFileManagerV1.openSourceFolder(r)]:[this._openFileManagerV1.openSourceFolder(r)]}addOpenedDocument(t,r){this._openFileManagerV1.startTracking(t.folderId,t.relPath,t.document),this.isV2Enabled&&this._openFileManagerV2.addOpenedDocument(t,r)}getBlobName(t,r){if(this.isV2Enabled){let n=this._openFileManagerV2.getBlobName(t,r),i=this._openFileManagerV1.getBlobName(t,r);return(n===void 0&&i!==void 0||n!==void 0&&i===void 0)&&this._logger.debug(`[WARN] getBlobName returned different results between v1 and v2 [${t}:${r}]
[${JSON.stringify(n)}]
[${JSON.stringify(i)}]`),i}else return this._openFileManagerV1.getBlobName(t,r)}handleMissingBlob(t,r,n){if(this.isV2Enabled){let i=this._openFileManagerV2.handleMissingBlob(t,r,n);return this._openFileManagerV1.notifyMissingBlob(t,r,n)||i}else return this._openFileManagerV1.notifyMissingBlob(t,r,n)}loseFocus(){this._openFileManagerV1.loseFocus()}stopTracking(t,r){this._openFileManagerV1.stopTracking(t,r),this.isV2Enabled&&this._openFileManagerV2.stopTracking(t,r)}handleClosedDocument(t){let r=uf(t.document);this._openFileManagerV1.stopTracking(t.folderId,t.relPath,r?1:0),this.isV2Enabled&&this._openFileManagerV2.handleClosedDocument(t)}handleChangedDocument(t){Object.prototype.hasOwnProperty.call(t.event,"notebook")?this._openFileManagerV1.applyNotebookChange(t.folderId,t.relPath,t.event):this._openFileManagerV1.applyTextDocumentChange(t.folderId,t.relPath,t.event),this.isV2Enabled&&this._openFileManagerV2.handleChangedDocument(t)}isTracked(t,r){if(this.isV2Enabled){let n=this._openFileManagerV2.isTracked(t,r),i=this._openFileManagerV1.isTracked(t,r);return n!==i&&this._logger.debug(`[WARN] isTracked returned different results between v1 and v2 [${t}:${r}]
[${JSON.stringify(n)}]
[${JSON.stringify(i)}]`),i}else return this._openFileManagerV1.isTracked(t,r)}getTrackedPaths(t){if(this.isV2Enabled){let r=this._openFileManagerV2.getTrackedPaths(t),n=this._openFileManagerV1.getTrackedPaths(t),i=(0,Y6.difference)(r,n);i.length>0&&this._logger.debug(`[WARN] getTrackedPaths in new but not in old [${t}]
[${JSON.stringify(i)}]`);let s=(0,Y6.difference)(n,r);return s.length>0&&this._logger.debug(`[WARN] getTrackedPaths in old but not in new [${t}]
[${JSON.stringify(s)}]`),n}else return this._openFileManagerV1.getTrackedPaths(t)}getRecencySummary(t){return this._openFileManagerV1.getRecencySummary(t)}getAllEditEvents(){return this.isV2Enabled?this._openFileManagerV2.getAllEditEvents():new Map}getAllPathToIndexedBlob(){return this.isV2Enabled?this._openFileManagerV2.getAllPathToIndexedBlob():new Map}translateRange(t,r,n,i){if(this.isV2Enabled){let s=this._openFileManagerV2.translateRange(t,r,n,i),o=this._openFileManagerV1.translateRange({folderId:t,relPath:r,beginOffset:n,endOffset:i});return(s?.blobName!==o?.blobName||s?.beginOffset!==o?.beginOffset||s?.endOffset!==o?.endOffset)&&this._logger.debug(`[WARN] translateRange returned different results between v1 and v2 [${t}:${r}]
[${JSON.stringify(s)}]
[${JSON.stringify(o)}]`),o}else return this._openFileManagerV1.translateRange({folderId:t,relPath:r,beginOffset:n,endOffset:i})}};var K6=q(Cs()),u2=class{store;primaryKey;constructor(t){this.store={},this.primaryKey=t}add(t){let r=t[this.primaryKey];if(this.get(r))throw new Error(`Record with primary key ${r} already exists.`);this.store[r]=Object.assign({},t)}update(t,r){this.store[t]={...this.store[t],...r}}delete(t){let r=this.store[t];return delete this.store[t],r}deleteBy(t){let r=this.search(t);for(let n of r)this.delete(n[this.primaryKey])}get(t){return this.store[t]}search(t,{limit:r}={}){let n=0,i=[];for(let s of Object.values(this.store))if(K6.default.every(t,(o,a)=>K6.default.isEqual(s[a],o))&&(i.push(s),n++,r&&n>=r))break;return i}getAll(){return Object.values(this.store)}clear(){this.store={}}};var d2=class{_logger=j("BlobStatusStore");_store=new u2("blobName");_embargoedPaths=new Set;getIndexedBlobName(t){if(this._embargoedPaths.has(t)){this._logger.debug(`Path [${t}] is embargoed`);return}let r=this._store.search({pathName:t,status:"indexed"});if(r.length===0){this._logger.debug(`No indexed blob found for ${t}`);return}return r.length>1?(this._logger.warn(`Multiple indexed blobs found for ${t}`),r.sort((n,i)=>(n.indexedAt??0)-(i.indexedAt??0)),r[r.length-1].blobName):r[0].blobName}isTrackingBlob(t){return this._store.get(t)!==void 0}removePath(t){this._store.deleteBy({pathName:t}),this._embargoedPaths.delete(t)}isTrackingPath(t){return this._embargoedPaths.has(t)||this._store.search({pathName:t},{limit:1}).length>0}clear(){this._store.clear(),this._embargoedPaths.clear()}getTrackedPaths(){return[...new Set(...this._store.getAll().map(t=>t.pathName),...this._embargoedPaths)]}addIndexedBlob(t,r){this.addUploadedBlob(t,r),this.updateBlobIndexed(t)}addUploadedBlob(t,r){this._store.add({blobName:t,pathName:r,status:"uploaded",uploadRequestedAt:Date.now()})}getLastBlobNameForPath(t){return this._store.search({pathName:t}).reduce((n,i)=>n===void 0?i:(n.uploadRequestedAt??0)>(i.uploadRequestedAt??0)?n:i)?.blobName}updateBlobIndexed(t){let r=Date.now(),n=this._store.get(t);if(!n){this._logger.debug(`[ERROR] Failed to find record for ${t}`);return}if(n.status==="indexed"){this._logger.debug(`[WARN] Blob ${t} is already indexed`);return}let i=this._store.search({pathName:n.pathName,status:"indexed"});if(i.length===0){n.status="indexed",n.indexedAt=r;return}if((i.reduce((o,a)=>(o.uploadRequestedAt??0)>(a.uploadRequestedAt??0)?o:a).uploadRequestedAt??0)>(n.uploadRequestedAt??0)){this._logger.info(`Blob ${t} is indexed but there is a newer blob to upload for ${n.pathName}`),this._store.delete(t);return}for(let o of i)this._store.delete(o.blobName);n.status="indexed",n.indexedAt=r}embargoPath(t){if(this._embargoedPaths.has(t)){this._logger.debug(`Path [${t}] is already embargoed`);return}this._logger.debug(`Embargoing path [${t}]`),this._store.deleteBy({pathName:t}),this._embargoedPaths.add(t)}isEmbargoed(t){return this._embargoedPaths.has(t)}updateBlobName(t,r){let n=this._store.get(t);if(!n){this._logger.debug(`[ERROR] Failed to find record for ${t}`);return}this._store.delete(t),n.blobName=r,this._store.add(n)}getAllPathToIndexedBlob(){return this._store.search({status:"indexed"}).reduce((t,r)=>(t.set(r.pathName,r.blobName),t),new Map)}};var mw=require("vscode");var f2=require("vscode"),z6=new f2.EventEmitter,J6=z6.event,j6=new f2.EventEmitter,Z6=j6.event,X6=new f2.EventEmitter,e9=X6.event;var CIe=q(x6());var h2=class{_queue=new CIe.default;config;constructor(t={}){this.config={sizeLimit:t.sizeLimit??1e6,queueSizeManagement:t.queueSizeManagement??"REMOVE_OLDEST"}}enqueue(t){if(this._queue.length>=this.config.sizeLimit){if(this.config.queueSizeManagement==="REJECT_NEW_ITEMS")return!1;this.config.queueSizeManagement==="REMOVE_OLDEST"&&this._queue.shift()}return this._queue.push(t),!0}dequeue(){return this._queue.shift()}isEmpty(){return this._queue.isEmpty()}clear(){this._queue.clear()}peek(){return this.peek()}getItems(){return Object.freeze(this._queue.toArray())}size(){return this._queue.length}};var bIe=j("SimpleQueueProcessor"),pw=class{queue;_inProgress=!1;_disposed=!1;constructor(t=new h2){this.queue=t}enqueue(t){return this.queue.enqueue(t)}dequeue(){return this.queue.dequeue()}isEmpty(){return this.queue.isEmpty()}clear(){this.queue.clear()}peek(){return this.queue.peek()}getItems(){return this.queue.getItems()}size(){return this.queue.size()}dispose(){this._disposed=!0}retry(t,r){setTimeout(()=>{for(let n of t)this.enqueue(n);this.startProcess()},r)}startProcess(){this._inProgress||(this._inProgress=!0,Promise.resolve().then(async()=>{for(;!this.isEmpty()&&!this.isDisposed();){let t=this.peek();if(await this.internalProcess(),t===this.peek())break}}).catch(t=>{t instanceof Error?bIe.info(`Unhandled error while processing task: ${t.message} ${t.stack}`):bIe.info(`Unhandled error while processing task: ${t}`)}).finally(()=>{this._inProgress=!1}))}isDisposed(){return this._disposed}};function Sbt(e,t){let r=new Set(t.unknownBlobNames.concat(t.nonindexedBlobNames)),n=[];for(let i of e)r.has(i)||n.push(i);return n}var t9=class extends pw{constructor(r,n){super();this._apiServer=r;this._config=n}_onFoundIndexedBlobNamesEmitter=new mw.EventEmitter;_onFoundUnknownBlobNamesEmitter=new mw.EventEmitter;_pollingStartTime=new Map;_logger=j("FileUploader#BlobStatusExecutor");dispose(){super.dispose(),this._pollingStartTime.clear(),this._onFoundIndexedBlobNamesEmitter.dispose(),this._onFoundUnknownBlobNamesEmitter.dispose()}get onFoundIndexedBlobNames(){return this._onFoundIndexedBlobNamesEmitter.event}get onFoundUnknownBlobNames(){return this._onFoundUnknownBlobNamesEmitter.event}retryBlobNames(r){let[s,o]=r.reduce((a,l)=>{let c=this._pollingStartTime.get(l);return c===void 0?(this._logger.debug(`[WARN] retryBlobNames: missing start time for ${l}`),a[1].push(l),a):(Date.now()-c<this._config.oldBlobNameThresholdMs?a[1].push(l):a[0].push(l),a)},[[],[]]);s.length>0&&this.retry(s,this._config.newBlobNameRetryMs),o.length>0&&this.retry(o,this._config.oldBlobNameRetryMs)}async internalProcess(){let r=new Set,n=0;for(;n<this._config.maxBatchCount;){let o=this.dequeue();if(o===void 0)break;r.add(o),this._pollingStartTime.has(o)||this._pollingStartTime.set(o,Date.now()),n++}this._logger.verbose(`FindMissingProcess started: for [${r.size}] items`);let i;try{i=await Di(()=>this._apiServer.findMissing([...r]),this._logger)}catch{this._logger.debug(`[ERROR] FindMissingProcess failed: for [${r.size}] items`),this.retryBlobNames([...r]);return}if(i.unknownBlobNames.length>0){this._logger.debug(`FindMissingProcess found unknown: for [${i.unknownBlobNames.length}] items`);for(let o of i.unknownBlobNames)this._pollingStartTime.delete(o);this._onFoundUnknownBlobNamesEmitter.fire(i.unknownBlobNames)}i.nonindexedBlobNames.length>0&&(this._logger.debug(`FindMissingProcess found nonindexed: for [${i.nonindexedBlobNames.length}] items`),this.retryBlobNames(i.nonindexedBlobNames));let s=Sbt(r,i);for(let o of s)this._pollingStartTime.delete(o);s.length>0&&(this._logger.verbose(`FindMissingProcess found not missing: for [${s.length}] items`),this._onFoundIndexedBlobNamesEmitter.fire(s))}},r9=class extends pw{constructor(r,n){super();this._apiServer=r;this._config=n}_onUploadedEmitter=new mw.EventEmitter;_onFailedEmitter=new mw.EventEmitter;_logger=j("FileUploader#UploadExecutor");dispose(){super.dispose(),this._onUploadedEmitter.dispose(),this._onFailedEmitter.dispose()}get onDidUpload(){return this._onUploadedEmitter.event}get onFailed(){return this._onFailedEmitter.event}async _processUpload(r){let n=Date.now(),i;this._logger.verbose(`Upload started [${n}]: for [${r.length}] items`),i=await Di(()=>this._apiServer.batchUpload(r),this._logger),this._logger.debug(`Upload complete [${n}]: for [${i.blobNames.length} / ${r.length}] items`);let s=new Map;if(i!==void 0)for(let a=0;a<i.blobNames.length;a++){let l=r[a].blobName,c=i.blobNames[a];s.set(l,c),l!==c&&this._logger.debug(`[WARN]Upload blob name mismatch: ${l} -> ${c}`)}let o=r.length-(i?.blobNames.length??0);return{expectedToActualBlobNameMap:s,failedCount:o}}processResult(r,n){let{expectedToActualBlobNameMap:i,failedCount:s}=r;s>0&&(this._logger.debug(`[WARN] Scheduling for retry [${s}] items`),this.retry(n.slice(n.length-s),this._config.retryMs)),i.size>0&&this._onUploadedEmitter.fire(i)}async internalProcess(){let r=0,n=[],i=[],s=0;for(;!this.isDisposed()&&s<this._config.maxBatchCount;){let o=this.peek();if(o===void 0)break;let a=await o.readContent();if(a.length>this._config.maxUploadSize){this._logger.debug(`[WARN] UploadExecutor: skipping upload for ${o.path} because it is too large`),this.dequeue();continue}if(r+a.length>this._config.maxUploadSize)break;r+=a.length,n.push({pathName:o.path,text:a,blobName:o.blobName,metadata:[]}),i.push(o),this.dequeue(),s++}if(n.length===0){this._logger.debug("UploadExecutor: no items to upload");return}try{let o=await this._processUpload(n);this.processResult(o,i)}catch(o){this._logger.debug(`[ERROR] UploadExecutor failed: for [${n.length}] items. Caused by: ${o.message} ${o.stack}`),await this.processIndividualUploads(i,n)}}async processIndividualUploads(r,n){for(let i=0;i<r.length;i++){let s=r[i],o=n[i];try{let a=await this._processUpload([o]);this.processResult(a,[s])}catch{this._logger.debug(`[ERROR] UploadExecutor failed: for [${s.blobName}]`),this._onFailedEmitter.fire(s)}}}},Ibt={uploadConfig:{maxUploadSize:1e7,maxBatchCount:128,retryMs:6e4},blobStatusConfig:{maxBatchCount:1e3,oldBlobNameThresholdMs:6e4,oldBlobNameRetryMs:6e4,newBlobNameRetryMs:3e3}},g2=class extends X{constructor(r,n,i=Ibt){super();this._blobNameCalculator=r;this._apiServer=n;this._config=i;this._uploadExecutor=new r9(n,i.uploadConfig),this._blobStatusExecutor=new t9(n,i.blobStatusConfig),this.addDisposables({dispose:()=>{this._handledItems.clear()}},this._uploadExecutor,this._blobStatusExecutor,this._uploadExecutor.onDidUpload(s=>{j6.fire({expectedToActualBlobNameMap:s});for(let[o,a]of s)this._handledItems.has(o)&&(o!==a&&(this._handledItems.set(a,this._handledItems.get(o)),this._handledItems.delete(o)),this._blobStatusExecutor.enqueue(a));this._blobStatusExecutor.startProcess()}),this._uploadExecutor.onFailed(s=>{this._logger.debug(`[ERROR] Upload failed: ${s.path}`),this._handledItems.delete(s.blobName),z6.fire({blobName:s.blobName})}),this._blobStatusExecutor.onFoundIndexedBlobNames(s=>{for(let o of s)this._handledItems.delete(o);X6.fire({blobNames:s})}),this._blobStatusExecutor.onFoundUnknownBlobNames(s=>{for(let o of s){let a=this._handledItems.get(o);a&&this._uploadExecutor.enqueue(a)}this._uploadExecutor.startProcess()}))}_logger=j("BlobUploaderImpl");_uploadExecutor;_blobStatusExecutor;_handledItems=new Map;enqueueUpload(r,n){let i=this._blobNameCalculator.calculate(r.path,n);if(i===void 0){this._logger.debug(`blobNameCalculator returned undefined for ${r.path}`);return}let s={...r,blobName:i};return this._handledItems.set(i,s),this._logger.debug(`upload: ${r.path}. total: ${this._handledItems.size}`),this._blobStatusExecutor.enqueue(i),i}startUpload(){this._blobStatusExecutor.startProcess()}};var n9=class{constructor(t){this._blobNameCalculator=t}_logger=j("OpenDocumentSnapshotCache");_lastKnownText=new Map;handleDocumentOpened(t){uf(t.document)||this._lastKnownText.set(t.relPath,t.document.getText())}handleDocumentClosed(t){this._lastKnownText.delete(t.relPath)}handleFileRename(t){for(let r of this._lastKnownText.keys())if(ks(t.oldRelPath,r)){let n=t.newRelPath+r.slice(t.oldRelPath.length);this._lastKnownText.set(n,this._lastKnownText.get(r)),this._lastKnownText.delete(r)}}handleFileDeletion(t){this._lastKnownText.delete(t.relPath)}_swapLastKnownText(t,r){if(!this._lastKnownText.has(t)){this._logger.verbose(`[WARN] no known last text for path [${t}]. initializing.`),this._lastKnownText.set(t,r);return}let n=this._lastKnownText.get(t);return this._lastKnownText.set(t,r),n}handleDocumentChange(t){if(Object.prototype.hasOwnProperty.call(t.event,"notebook"))return;t=t;let r=t.event.document.getText(),n=this._swapLastKnownText(t.relPath,r);if(!n||t.event.contentChanges.length===0)return;let i=t.event.contentChanges.map(s=>new Zl({beforeStart:s.rangeOffset,afterStart:s.rangeOffset,beforeText:n.substring(s.rangeOffset,s.rangeOffset+s.rangeLength),afterText:s.text}));if(i.length>1){i.sort((o,a)=>o.beforeStart-a.beforeStart);let s=0;i=i.map(o=>{let a=o.afterStart+s;return s+=o.afterText.length-o.beforeText.length,new Zl({beforeStart:o.beforeStart,afterStart:a,beforeText:o.beforeText,afterText:o.afterText})})}return new xg({path:t.relPath,edits:i,beforeBlobName:this._blobNameCalculator.calculateNoThrow(t.relPath,n),afterBlobName:this._blobNameCalculator.calculateNoThrow(t.relPath,r)}).normalize()}getLastKnownText(t){return this._lastKnownText.get(t)}},p2=class{constructor(t){this._blobNameCalculator=t;this._openDocumentSnapshotCache=new n9(this._blobNameCalculator),this._fileEditsStore=new Jm(1e6)}_openDocumentSnapshotCache;_fileEditsStore;handleDocumentOpened(t){this._openDocumentSnapshotCache.handleDocumentOpened(t)}handleDocumentClosed(t){this._openDocumentSnapshotCache.handleDocumentClosed(t)}handleFileWillRename(t){this._openDocumentSnapshotCache.handleFileRename(t)}handleFileDeletion(t){this._openDocumentSnapshotCache.handleFileDeletion(t)}handleDocumentChange(t,r){let n=this._openDocumentSnapshotCache.handleDocumentChange(t);return n===void 0?0:this._fileEditsStore.addEvent(n,r)}getEvents(){return this._fileEditsStore.getEvents()}removeEventsPriorToBlob(t){this._fileEditsStore.removeEventsPriorToBlob(t)}getLastKnownText(t){return this._openDocumentSnapshotCache.getLastKnownText(t)}};var i9=class{constructor(t,r,n,i,s){this.blobStatusStore=t;this.fileEditProcessor=r;this.fileChangeSizeCounter=n;this.workspaceName=i;this.folderId=s}dispose(){this.blobStatusStore.clear()}};var s9=class{_size=0;_relPath="";get size(){return this._size}add(t,r){return this._relPath!==r?(this._size=t,this._relPath=r):this._size+=t,this._size}clear(){this._size=0,this._relPath=""}};function EIe(e){return uf(e)?e.getCells().map(t=>t.document.getText()).join(`
`):e.getText()}var Bbt=1e3;function Dbt(e){return Object.prototype.hasOwnProperty.call(e.event,"notebook")?e.event.notebook:e.event.document}var m2=class extends X{constructor(r,n){super();this._blobUploader=r;this._blobNameCalculator=n;this.addDisposables(e9(i=>this.handleBlobIndexed(i)),Z6(i=>this.handleBlobUploaded(i)),J6(i=>this.handleBlobUploadFailed(i)))}_folderResources=new Map;_logger=j("OpenFileManagerV2");_uploadingBlobToFolder=new Map;startTrackingFolder(r,n){let i=new p2(this._blobNameCalculator),s=new i9(new d2,i,new s9,r,n);return this._folderResources.set(n,s),this.addDisposable(s),s}handleBlobIndexed(r){for(let n of r.blobNames){this._logger.verbose(`Blob ${n} indexed`);let i=this._uploadingBlobToFolder.get(n);if(i===void 0){this._logger.debug(`[WARN] Blob ${n} was indexed but not tracked. Ignoring.`);return}this._uploadingBlobToFolder.delete(n),this._folderResources.get(i)?.blobStatusStore.updateBlobIndexed(n),this._folderResources.get(i)?.fileEditProcessor.removeEventsPriorToBlob(n)}}handleBlobUploadFailed(r){let n=r.blobName;this._uploadingBlobToFolder.has(n)&&(this._logger.debug(`Blob ${n} failed to upload`),this._uploadingBlobToFolder.delete(n))}handleBlobUploaded(r){this._logger.verbose(`Handling ${r.expectedToActualBlobNameMap.size} uploaded blobs`);for(let[n,i]of r.expectedToActualBlobNameMap){if(n===i)continue;let s=this._uploadingBlobToFolder.get(n);if(s===void 0){this._logger.debug(`Blob ${n} was uploaded but not tracked. Ignoring.`);continue}this._logger.debug(`[WARN] Blob name mismatch. Expected ${n} but got ${i}.`),this._uploadingBlobToFolder.set(i,s),this._uploadingBlobToFolder.delete(n);let o=this._folderResources.get(s);if(o===void 0){this._logger.debug(`[WARN] Blob ${n} was uploaded but folder ${s} is not tracked. Ignoring.`);continue}o.blobStatusStore.updateBlobName(n,i)}}_upload(r,n,i,s){let o=this._folderResources.get(r)?.workspaceName;this._logger.info(`[${o}] Uploading [${i}] because [${s}]`);let a=this._blobUploader.enqueueUpload({path:i,readContent:async()=>n},n);a&&(this._uploadingBlobToFolder.set(a,r),this._folderResources.get(r)?.blobStatusStore.addUploadedBlob(a,i))}stopTracking(r,n){this._logger.info(`[${this._folderResources.get(r)?.workspaceName}] Stopping tracking [${n}]`),this._folderResources.get(r)?.blobStatusStore.removePath(n)}addOpenedDocument(r,n){let i=this._folderResources.get(r.folderId);if(i===void 0)throw new Error(`Source folder [${r.folderId}] is not open`);let s=i.workspaceName;uf(r.document)&&this._logger.info(`TODO [${s}] Ignoring notebook document ${r.relPath}`);let o=EIe(r.document),a=this._blobNameCalculator.calculate(r.relPath,o);if(!a){i.blobStatusStore.embargoPath(r.relPath),this._logger.debug(`[WARN] Failed to calculate blob name for ${r.relPath}`);return}a!==n?(this._upload(r.folderId,o,r.relPath,"new file"),this._logger.debug(`[INFO] Blob name mismatch. Expected ${n} but got ${a}.`)):i.blobStatusStore.addIndexedBlob(n,r.relPath)}getBlobName(r,n){return this._folderResources.get(r)?.blobStatusStore?.getIndexedBlobName(n)}handleMissingBlob(r,n,i){let s=this._folderResources.get(r);if(s===void 0)return!1;let o=s.blobStatusStore.isTrackingBlob(i),a=s.workspaceName;if(!o)return!1;this._logger.info(`[${a}] Re-uploading ${i} for ${n} in ${r}`);let l=s.fileEditProcessor.getLastKnownText(n);return l===void 0?!1:(this._upload(r,l,n,"missing blob"),!0)}handleClosedDocument(r){let n=this._folderResources.get(r.folderId)?.workspaceName;this._logger.info(`[${n}] Handling closed document ${r.relPath}`),this.stopTracking(r.folderId,r.relPath)}handleChangedDocument(r){let n=this._folderResources.get(r.folderId);if(n===void 0){this._logger.debug(`Ignoring change event for ${r.relPath} because folder is not tracked`);return}if(n.blobStatusStore.isEmbargoed(r.relPath))return;let i=n.workspaceName;if(Object.prototype.hasOwnProperty.call(r.event,"notebook")){this._logger.debug(`[${i}] Ignoring notebook document ${r.relPath}`);return}let s=n.fileEditProcessor;if(s===void 0){this._logger.debug(`[${i}] Ignoring change event for ${r.relPath} because folder is not tracked`);return}let o=n.blobStatusStore.getLastBlobNameForPath(r.relPath),a=s.handleDocumentChange(r,o);(n.fileChangeSizeCounter.add(a,r.relPath)??0)>Bbt&&(this._upload(r.folderId,EIe(Dbt(r)),r.relPath,"large change"),n.fileChangeSizeCounter.clear())}isTracked(r,n){return this._folderResources.get(r)?.blobStatusStore.isTrackingPath(n)??!1}getTrackedPaths(r){return this._folderResources.get(r)?.blobStatusStore.getTrackedPaths()??[]}translateRange(r,n,i,s){let o=this.getBlobName(r,n);if(o===void 0)return;let a={blobName:o,beginOffset:i,endOffset:s},l=(u,f)=>{if(u.afterStart>f.endOffset)return f;if(u.afterEnd<f.beginOffset){let p=u.afterText.length-u.beforeText.length;return{blobName:f.blobName,beginOffset:f.beginOffset-p,endOffset:f.endOffset-p}}return{blobName:f.blobName,beginOffset:Math.min(u.afterStart,f.beginOffset),endOffset:Math.max(u.afterEnd,f.endOffset)}},c=this._folderResources.get(r)?.fileEditProcessor.getEvents().filter(u=>u.path===n)??[];for(let u of c)for(let f of u.edits)a=l(f,a);return a}getAllEditEvents(){let r=new Map;return Array.from(this._folderResources.keys()).reduce((n,i)=>{let s=Number(i);return n.set(s,this._folderResources.get(s)?.fileEditProcessor.getEvents()??[]),n},r)}getAllPathToIndexedBlob(){let r=new Map;return Array.from(this._folderResources.keys()).reduce((n,i)=>{let s=Number(i);return n.set(s,this._folderResources.get(s)?.blobStatusStore.getAllPathToIndexedBlob()??new Map),n},r)}};var _Ie=q(require("vscode"));var o9=require("vscode");var Aw=class extends Error{constructor(r,n){let i=r instanceof Error?r.message:`${r}`;super(`WorkQueueItemFailed: ${i}, retry = ${n}`);this.toThrow=r;this.retry=n}},a9=class{throwError(t,r){throw new Aw(t,r)}},l9=class{progressReporter;completedItems=0;totalItems;constructor(t,r){this.progressReporter=t,this.totalItems=r,this.update(0,this.totalItems)}update(t,r){this.completedItems+=t,this.totalItems=this.completedItems+r,this.progressReporter.update(this.completedItems,this.totalItems)}cancel(){this.progressReporter.cancel()}},c9=class{constructor(t,r){this.item=t;this.process=r}itemCount(){return 1}start(t){return this.process(this.item,t)}},u9=class{constructor(t,r){this.items=t;this.process=r}itemCount(){return this.items.size}start(t){return this.process(this.items,t)}},A2=class{queue=new Set;get size(){return this.queue.size}add(t){this.queue.add(t)}delete(t){this.queue.delete(t)}},d9=class extends A2{constructor(r){super();this.process=r}dequeue(){let r=this.queue.values().next();if(r.done)throw new Error("Cannot dequeue from empty queue");let n=r.value;return this.queue.delete(n),new c9(n,this.process)}},f9=class extends A2{constructor(r,n){super();this.process=r;this._maxBatchSize=n}dequeue(){let r;if(this._maxBatchSize===void 0||this.queue.size<=this._maxBatchSize)r=this.queue,this.queue=new Set;else{r=new Set;let n=this.queue.values();for(let i=0;i<this._maxBatchSize;i++){let s=n.next();if(s.done)break;let o=s.value;this.queue.delete(o),r.add(o)}}return new u9(r,this.process)}},y2=class e{constructor(t,r,n,i){this.name=t;this.shutdownError=n;if("processOne"in r)this.queue=new d9(r.processOne);else if("processBatch"in r)this.queue=new f9(r.processBatch,r.maxBatchSize);else throw new Error("Invalid processor type");this.backoffParams=i||e.defaultBackoffParams,this.logger=j(`WorkQueue[${t}]`),this.errorHandler=new a9}static queueStatusChanged="QueueStatusChanged";static itemFailed="ItemFailed";static defaultBackoffParams={initialMS:100,mult:2,maxMS:3e4};eventEmitters={[e.queueStatusChanged]:new o9.EventEmitter,[e.itemFailed]:new o9.EventEmitter};queue;countReporters=new Set;progressReporters=new Set;errorHandler;backoffParams;itemsInProgress=0;stopping=!1;logger;stop(){this.stopping=!0,this.update(),this.notifyStatusChanged()}add(t){this.stopping||(this.queue.add(t),this.update(),this.kick())}delete(t){this.stopping||(this.queue.delete(t),this.update())}size(){return this.queue.size+this.itemsInProgress}reportQueueSize(t){let r=this.size();t.update(r),this.countReporters.add(t)}awaitEmpty(t,r=!0){if(this.stopping)return Promise.resolve();let n=this.size();return n===0?Promise.resolve():(t&&this.progressReporters.add(new l9(t,n)),new Promise((i,s)=>{let o=[];function a(){for(let l of o)l.dispose()}o.push(this.eventEmitters[e.queueStatusChanged].event(()=>{a(),this.stopping?s(this.shutdownError):i()})),r&&o.push(this.eventEmitters[e.itemFailed].event(l=>{a(),s(l)}))}))}update(t=0){if(this.stopping){for(let r of this.countReporters)r.cancel();for(let r of this.progressReporters)r.cancel()}else{this.itemsInProgress-=t;let r=this.size();for(let n of this.countReporters)n.update(r);for(let n of this.progressReporters)n.update(t,r)}}notifyStatusChanged(){this.eventEmitters[e.queueStatusChanged].fire(null),this.progressReporters.clear()}notifyItemFailed(t){let r=t instanceof Aw?t.toThrow:t;this.eventEmitters[e.itemFailed].fire(r)}delay(t){return new Promise(r=>setTimeout(r,t))}async kick(){if(!this.itemsInProgress){for(;!this.stopping&&this.queue.size!==0;){let t=this.queue.dequeue();this.itemsInProgress=t.itemCount();let r=0,n=0;do{try{await t.start(this.errorHandler),n&&this.logger.debug(`item succeeded; retries = ${n}`);break}catch(i){if(this.notifyItemFailed(i),!(i instanceof Aw&&i.retry)){this.logger.debug(`item failed, not retrying; retries = ${n}`);break}}this.logger.debug(`item failed, retrying in ${r} ms; retries = ${n}`),await this.delay(r),this.logger.debug("retrying"),r===0?r=this.backoffParams.initialMS:r=Math.min(r*this.backoffParams.mult,this.backoffParams.maxMS),n++}while(!this.stopping);this.stopping||this.update(this.itemsInProgress)}this.notifyStatusChanged()}}};function cC(e,t){let r=new Set(t);return e.filter(n=>!r.has(n))}var v2=class e extends X{static defaultCheckpointThreshold=1e3;_checkpointId;_checkpointBlobNames=new Map;_toAdd=new Map;_toRemove=new Set;_apiServer;_logger;_checkpointQueue;_checkpointThreshold;_maxCheckpointBatchSize=1e4;_featureFlagManager;_onContextChange=new _Ie.EventEmitter;onContextChange=this._onContextChange.event;get _flags(){return this._featureFlagManager.currentFlags}constructor(t,r,n,i){super(),this._logger=j("BlobsCheckpointManager"),this._checkpointId=void 0,this._apiServer=t,this._featureFlagManager=r,this._checkpointThreshold=i??e.defaultCheckpointThreshold,this.addDisposable(n(s=>{this.updateBlob(s.absPath,s.prevBlobName,s.newBlobName)})),this._checkpointQueue=new y2("checkpoint",{processOne:async(s,o)=>await this._checkpoint(s,o)}),this._logger.info(`BlobsCheckpointManager created. checkpointThreshold: ${this._checkpointThreshold}`)}refBlob(t){let r=this._checkpointBlobNames.get(t);r!==void 0?(this._checkpointBlobNames.set(t,r+1),r===0&&this._toRemove.delete(t)):this._toAdd.set(t,(this._toAdd.get(t)??0)+1)}derefBlob(t){!this.derefFromCheckpoint(t)&&!this.derefFromAdded(t)&&this._logger.error(`derefBlob: blob ${t} not found in checkpoint or toAdd`)}derefFromCheckpoint(t){let r=this._checkpointBlobNames.get(t);return r===void 0||r<=0?(r!==void 0&&this._logger.error(`derefFromCheckpoint: blob ${t} has reference count ${r}. In toRemove? ${this._toRemove.has(t)}`),!1):(this._checkpointBlobNames.set(t,r-1),r===1&&this._toRemove.add(t),!0)}derefFromAdded(t){let r=this._toAdd.get(t);return r===void 0?!1:r<=1?(this._toAdd.delete(t),r===1):(this._toAdd.set(t,r-1),!0)}getCheckpointedBlobNames(){return Array.from(this._checkpointBlobNames.keys())}getContext(){return{checkpointId:this._checkpointId,addedBlobs:Array.from(this._toAdd.keys()),deletedBlobs:Array.from(this._toRemove)}}getContextAdjusted(t,r){let n=new Set(this._toAdd.keys()),i=new Set(this._toRemove);for(let s of t)this._checkpointBlobNames.has(s)||n.add(s),i.delete(s);for(let s of r)this._checkpointBlobNames.has(s)&&i.add(s),n.delete(s);return{checkpointId:this._checkpointId,addedBlobs:Array.from(n),deletedBlobs:Array.from(i)}}blobsPayload(t){let r=this.getCheckpointedBlobNames(),n=cC(t,r),i=cC(r,t);return{checkpointId:this._checkpointId,addedBlobs:n,deletedBlobs:i}}expandBlobs(t){if(t.checkpointId===void 0)return t.addedBlobs;if(t.checkpointId!==this._checkpointId)throw new Error(`expandBlobs: checkpointId mismatch: ${t.checkpointId} != ${this._checkpointId}`);let r=this.getCheckpointedBlobNames();if(r.push(...t.addedBlobs),t.deletedBlobs.length>0){let n=new Set(t.deletedBlobs);return r.filter(i=>!n.has(i))}return r}validateMatching(t,r,n=!1){if(t.checkpointId!==r.checkpointId)return this._logger.error(`checkpointId mismatch: ${t.checkpointId} vs ${r.checkpointId}`),!1;let i=!0,s=cC(t.addedBlobs,r.addedBlobs),o=cC(r.addedBlobs,t.addedBlobs);return(s.length>0||o.length>0)&&(i=!1,this._logger.error(`addedBlobs mismatch: -${s.length}/+${o.length}`),n&&(this._logger.error(`left-added: ${s.slice(0,5).join(",")}`),this._logger.error(`right-added: ${o.slice(0,5).join(",")}`))),s=cC(t.deletedBlobs,r.deletedBlobs),o=cC(r.deletedBlobs,t.deletedBlobs),(s.length>0||o.length>0)&&(i=!1,this._logger.error(`deletedBlobs mismatch: -${s.length}/+${o.length}`),n&&(this._logger.error(`left-deleted: ${s.slice(0,5).join(",")}`),this._logger.error(`right-deleted: ${o.slice(0,5).join(",")}`))),i}updateBlob(t,r,n){this._logger.verbose(`notifyBlobChange ${t}: ${r} to ${n}`),n&&n!==r&&this.refBlob(n),r&&n!==r&&this.derefBlob(r),this._toAdd.size+this._toRemove.size>=this._checkpointThreshold&&this._checkpointQueue.size()===0&&this._queueCheckpoint()}resetCheckpoint(){for(let[t,r]of this._checkpointBlobNames)r>0?this._toAdd.set(t,r):this._toRemove.delete(t)||this._logger.warn(`blob with 0 references was not found in toRemove: ${t}`);for(let t of this._toRemove)this._logger.warn(`blob in toRemove was not found in checkpoint: ${t}`);this._toRemove.clear(),this._checkpointId=void 0,this._checkpointBlobNames.clear(),this._onContextChange.fire(this.getContext())}async awaitEmptyQueue(){await this._checkpointQueue.awaitEmpty(void 0,!1)}async _checkpoint(t,r){let{checkpointId:n,addedBlobs:i,deletedBlobs:s}=t;this._logger.debug(`Begin checkpoint of working set into ${n}`),this._logger.debug(`add ${i.length} blobs, remove ${s.length} blobs into ${n}`);let o={newCheckpointId:""};try{o=await this._apiServer.checkpointBlobs(t)}catch(a){let l=a instanceof Error?a.message:`${a}`,c=this._checkpointId?this._checkpointId:"{initial}";Sr.isAPIErrorWithStatus(a,$e.invalidArgument)||Sr.isAPIErrorWithStatus(a,$e.unimplemented)?(this._logger.warn(`checkpoint-blobs from ${c} failed with invalid argument: ${l}. Recreating checkpoint.`),this.resetCheckpoint(),this._queueCheckpoint(),r.throwError(a,!1)):(this._logger.error(`checkpoint-blobs failed with error: ${l}.`),r.throwError(a,!1))}if(n!==this._checkpointId)this._logger.warn(`original checkpointId ${n} does not match current checkpointId ${this._checkpointId}. Abandoning new checkpoint.`);else{this._logger.debug(`checkpointId ${n} advanced to ${o.newCheckpointId}`),this._checkpointId=o.newCheckpointId;for(let a of i){let l=this._toAdd.get(a);l===void 0?(this._checkpointBlobNames.set(a,0),this._toRemove.add(a)):(this._checkpointBlobNames.set(a,l),this._toAdd.delete(a))}for(let a of s){let l=this._checkpointBlobNames.get(a);l===void 0?this._logger.warn(`In _checkpoint: deleted blob ${a} not found in checkpoint`):l>0&&this._toAdd.set(a,l),this._checkpointBlobNames.delete(a),this._toRemove.delete(a)}this._onContextChange.fire(this.getContext())}this._toAdd.size+this._toRemove.size>=this._checkpointThreshold&&(this._logger.debug(`starting a new round of checkpointing due to size ${this._toAdd.size} + ${this._toRemove.size}`),this._queueCheckpoint())}_queueCheckpoint(){this._logger.debug("queue checkpoint");let t=Array.from(this._toAdd.keys()).slice(0,this._maxCheckpointBatchSize),r=Array.from(this._toRemove).slice(0,this._maxCheckpointBatchSize),n={checkpointId:this._checkpointId,addedBlobs:t,deletedBlobs:r};this._logger.debug(`queue checkpoint: version: ${n.checkpointId}, add: ${n.addedBlobs.length} blobs, rm: ${n.deletedBlobs.length} blob`),this._checkpointQueue.add(n)}};var yw=q(require("vscode"));function Ig(e,t,r,n){let i=0;for(let s of r)if(e.log(t,`  ${s}`),i++,n!==void 0&&i>=n){e.log(t,"  ...");break}}var h9=class{constructor(t,r){this.maxItems=t;this.maxByteSize=r}items=new Map;byteSize=0;addItem(t,r){let n=this.items.get(t);if(n===void 0){if(this.items.size>=this.maxItems||this.byteSize+r.byteSize>=this.maxByteSize)return!1;this.items.set(t,[r]),this.byteSize+=r.byteSize}else n.push(r);return!0}},g9=class{constructor(t){this.maxItemCount=t}items=new Map;get full(){return this.items.size>=this.maxItemCount}addItem(t,r){if(this.items.has(t))return!1;this.items.set(t,r)}},C2=class e extends X{constructor(r,n,i,s,o){super();this.workspaceName=r;this._apiServer=n;this._pathHandler=i;this._pathMap=s;this._logger=j(`DiskFileManager[${r}]`),o===void 0?this._probeBatchSize=e.maxProbeBatchSize:(o<e.minProbeBatchSize?this._logger.verbose(`Rejecting requested probe batch size of ${o} (min = ${e.minProbeBatchSize})`):o>e.maxProbeBatchSize&&this._logger.verbose(`Rejecting requested probe batch size of ${o} (max = ${e.maxProbeBatchSize})`),this._probeBatchSize=Math.max(Math.min(o,e.maxProbeBatchSize),e.minProbeBatchSize)),this._toCalculate=new ta(this._calculate.bind(this)),this.addDisposable(this._toCalculate),this._toProbe=new ta(this._probe.bind(this)),this.addDisposable(this._toProbe),this._probeBatch=this._newProbeBatch(),this._toUpload=new ta(this._upload.bind(this)),this.addDisposable(this._toUpload),this._uploadBatch=this._newUploadBatch(),this._probeRetryWaiters=new ta(this._enqueueForProbe.bind(this)),this.addDisposable(this._probeRetryWaiters),this._probeRetryKicker=new Pc(this._probeRetryWaiters,e.probeRetryPeriodMs),this.addDisposable(this._probeRetryKicker),this._probeRetryBackoffWaiters=new ta(this._enqueueForProbe.bind(this)),this._probeRetryBackoffKicker=new Pc(this._probeRetryBackoffWaiters,e.probeRetryBackoffPeriodMs),this.addDisposable(this._probeRetryBackoffKicker)}static minProbeBatchSize=1;static maxProbeBatchSize=1e3;static maxUploadBatchBlobCount=128;static maxUploadBatchByteSize=1e6;static probeRetryPeriodMs=3*1e3;static probeBackoffAfterMs=60*1e3;static probeRetryBackoffPeriodMs=60*1e3;_notAPlainFile="Not a file";_fileNotAccessible="File not readable";_fileNotText="Binary file";_fileUploadFailure="Upload failed";_onDidChangeInProgressItemCountEmitter=new yw.EventEmitter;onDidChangeInProgressItemCount=this._onDidChangeInProgressItemCountEmitter.event;_onQuiescedEmitter=new yw.EventEmitter;_onQuiesced=this._onQuiescedEmitter.event;_textDecoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});_toCalculate;_toProbe;_probeBatch;_probeBatchSize;_probeRetryWaiters;_probeRetryKicker;_probeRetryBackoffWaiters;_probeRetryBackoffKicker;_toUpload;_uploadBatch;_itemsInFlight=new Map;_seq=1e3;metrics=new aC("File metrics");_logger;_stopping=!1;_pathsAccepted=this.metrics.counterMetric("paths accepted");_pathsNotAccessible=this.metrics.counterMetric("paths not accessible");_nonFiles=this.metrics.counterMetric("not plain files");_largeFiles=this.metrics.counterMetric("large files");_blobNameCalculationFails=this.metrics.counterMetric("blob name calculation fails");_encodingErrors=this.metrics.counterMetric("encoding errors");_mtimeCacheHits=this.metrics.counterMetric("mtime cache hits");_mtimeCacheMisses=this.metrics.counterMetric("mtime cache misses");_probeBatches=this.metrics.counterMetric("probe batches");_blobNamesProbed=this.metrics.counterMetric("blob names probed");_filesRead=this.metrics.counterMetric("files read");_blobsUploaded=this.metrics.counterMetric("blobs uploaded");_ingestPathMs=this.metrics.timingMetric("ingestPath");_probeMs=this.metrics.timingMetric("probe");_statMs=this.metrics.timingMetric("stat");_readMs=this.metrics.timingMetric("read");_uploadMs=this.metrics.timingMetric("upload");stop(){this.dispose()}dispose(){this._stopping=!0,super.dispose()}get probeBatchSize(){return this._probeBatchSize}get itemsInFlight(){return this._itemsInFlight.size}ingestPath(r,n){this._ingestPathMs.start(),!this._stopping&&(n=r0e(n),this._enqueueForCalculate(r,n),this._ingestPathMs.stop())}async awaitQuiesced(){if(!(this._stopping||this._itemsInFlight.size===0))return jm(this._onQuiesced)}_nextSeq(){return this._seq++}_makeAbsPath(r,n){let i=this._pathMap.getRepoRoot(r);if(i!==void 0)return Mt(i,n)}_fileTooLargeString(r){return`File too large (${r} > ${this._pathHandler.maxBlobSize})`}_getMtime(r,n,i,s){this._statMs.start();let o=this._pathHandler.classifyPath(r);switch(this._statMs.stop(),o.type){case"inaccessible":this._pathsNotAccessible.increment(),this._pathMapInvalidate(n,i,s,this._fileNotAccessible);return;case"not a file":this._nonFiles.increment(),this._pathMapInvalidate(n,i,s,this._notAPlainFile);return;case"large file":this._largeFiles.increment(),this._pathMapInvalidate(n,i,s,this._fileTooLargeString(o.size));return;case"accepted":return o.mtime}}async _readAndValidate(r,n,i,s){this._readMs.start();let o=await this._pathHandler.readText(r);switch(this._readMs.stop(),this._filesRead.increment(),o.type){case"inaccessible":this._pathsNotAccessible.increment(),this._pathMapInvalidate(n,i,s,this._fileNotAccessible);return;case"large file":this._largeFiles.increment(),this._pathMapInvalidate(n,i,s,this._fileTooLargeString(o.size));return;case"binary":this._pathMapInvalidate(n,i,s,this._fileNotText);return;case"text":return o.contents}}_calculateBlobName(r,n,i,s){try{return this._pathHandler.calculateBlobName(r,n)}catch(o){if(o instanceof Lb){this._largeFiles.increment();let a=this._fileTooLargeString(n.length);this._pathMapInvalidate(i,r,s,a)}else this._blobNameCalculationFails.increment(),this._pathMapInvalidate(i,r,s,He(o));return}}async _calculate(r){if(r===void 0)return;let[n,[i,s]]=r;if(!this._pathMapVerify(i,s,n))return;let o=this._makeAbsPath(i,s);if(o===void 0){this._inflightItemRemove(n);return}let a=this._getMtime(o,i,s,n);if(a===void 0)return;let l,c=this._pathMap.getBlobInfo(i,s,a);if(c!==void 0){this._mtimeCacheHits.increment();let[f,p]=c;if(p>0){this._pathMapUpdate(i,s,n,f,a);return}l=f}else{let f=await this._readAndValidate(o,i,s,n);if(f===void 0||(this._mtimeCacheMisses.increment(),l=this._calculateBlobName(s,f,i,n),l===void 0))return}this._pathsAccepted.increment();let u={folderId:i,relPath:s,blobName:l,mtime:a,startTime:Date.now()};this._enqueueForProbeRetry(n,u)}_newProbeBatch(){return new g9(this._probeBatchSize)}_grabProbeBatch(){if(this._probeBatch.items.size===0)return;let r=this._probeBatch;return this._probeBatch=this._newProbeBatch(),r}async _probe(r){if(r!==void 0){let[o,a]=r;if(!this._pathMapVerify(a.folderId,a.relPath,o)||(this._probeBatch.addItem(o,a),!this._probeBatch.full))return}let n=this._grabProbeBatch();if(n===void 0)return;let i=new Set;for(let[o,a]of n.items)i.add(a.blobName);this._probeBatches.increment(),this._blobNamesProbed.increment(n.items.size),this._logger.verbose(`probe ${i.size} blobs`),this._probeMs.start();let s;try{s=await Di(async()=>this._apiServer.findMissing([...i]),this._logger)}catch{}if(this._probeMs.stop(),s!==void 0){this._logger.verbose(`find-missing reported ${s.unknownBlobNames.length} unknown blob names and ${s.nonindexedBlobNames.length} nonindexed blob names.`),s.unknownBlobNames.length>0&&(this._logger.verbose("unknown blob names:"),Ig(this._logger,"verbose",s.unknownBlobNames,5)),s.nonindexedBlobNames.length>0&&(this._logger.verbose("nonindexed blob names:"),Ig(this._logger,"verbose",s.nonindexedBlobNames,5));let o=new Set(s.unknownBlobNames),a=new Set(s.nonindexedBlobNames),l=this._beginUploadBatch();for(let[c,u]of n.items)this._pathMapVerify(u.folderId,u.relPath,c)&&(o.has(u.blobName)?this._enqueueForUpload(c,u.folderId,u.relPath,!1):a.has(u.blobName)?this._enqueueForProbeRetry(c,u):this._pathMapUpdate(u.folderId,u.relPath,c,u.blobName,u.mtime));l.dispose()}else for(let[o,a]of n.items)this._enqueueForProbeRetry(o,a)}_newUploadBatch(){return new h9(e.maxUploadBatchBlobCount,e.maxUploadBatchByteSize)}_grabUploadBatch(){if(this._uploadBatch.items.size===0)return;let r=this._uploadBatch;return this._uploadBatch=this._newUploadBatch(),r}async _upload(r){let n;if(r!==void 0){let[a,{seq:l,folderId:c,relPath:u}]=r;if(!this._pathMapVerify(c,u,l))return;let f=this._getMtime(a,c,u,l);if(f===void 0)return;let p=await this._readAndValidate(a,c,u,l);if(p===void 0)return;let g=this._calculateBlobName(u,p,c,l);if(g===void 0)return;let m;try{m=this._textDecoder.decode(p)}catch(v){this._pathMapInvalidate(c,u,l,He(v)),this._encodingErrors.increment();return}let y={seq:l,folderId:c,pathName:u,text:m,blobName:g,mtime:f,byteSize:p.length,metadata:[]};if(this._uploadBatch.addItem(g,y))return;n=y}let i=this._grabUploadBatch();if(i===void 0)return;n!==void 0&&this._uploadBatch.addItem(n.blobName,n),this._logger.verbose(`upload ${i.items.size} blobs`);let s=new Array;for(let[a,l]of i.items)s.push(l[0]);this._uploadMs.start();let o=await this._uploadBlobBatch(s);this._uploadMs.stop(),this._blobsUploaded.increment(o.size);for(let[a,l]of i.items){let c=o.get(a);if(c===void 0)for(let u of l)this._pathMapInvalidate(u.folderId,u.pathName,u.seq,this._fileUploadFailure);else for(let u of l){let f={folderId:u.folderId,relPath:u.pathName,blobName:c,mtime:u.mtime,startTime:Date.now()};this._enqueueForProbeRetry(u.seq,f)}}}async _uploadBlobBatch(r){this._logger.verbose(`upload begin: ${r.length} blobs`);for(let s of r)this._logger.verbose(`    - ${s.folderId}:${s.pathName}; expected blob name ${s.blobName}`);let n;try{n=await Di(async()=>await this._apiServer.batchUpload(r),this._logger)}catch(s){this._logger.error(`batch upload failed: ${He(s)}`)}let i=new Map;if(n!==void 0)for(let s=0;s<n.blobNames.length;s++)i.set(r[s].blobName,n.blobNames[s]);return await this._uploadBlobsSequentially(r,n?.blobNames.length??0,i),i}async _uploadBlobsSequentially(r,n,i){for(let s=n;s<r.length;s++){let o=r[s];try{this._logger.verbose(`sequential upload of ${o.pathName} -> ${o.blobName}`);let a=await Di(async()=>this._apiServer.memorize(o.pathName,o.text,o.blobName,[]),this._logger);i.set(o.blobName,a.blobName)}catch{}}}_inflightItemAdd(r,n,i){this._itemsInFlight.set(r,[n,i])}_inflightItemRemove(r){this._itemsInFlight.delete(r),this._onDidChangeInProgressItemCountEmitter.fire(this._itemsInFlight.size),this._itemsInFlight.size===0&&(this._logger.verbose("inflight items signaling empty"),this._onQuiescedEmitter.fire())}_pathMapVerify(r,n,i){if(!this._pathMap.shouldTrack(r,n))return this._inflightItemRemove(i),!1;let s=this._pathMap.getContentSeq(r,n);return s!==void 0&&s>=i?(this._inflightItemRemove(i),!1):!0}_pathMapUpdate(r,n,i,s,o){this._inflightItemRemove(i),this._pathMap.update(r,n,i,s,o)}_pathMapInvalidate(r,n,i,s){this._logger.verbose(`path map invalidate: ${r}:${n} (${s})`),this._pathMap.markUntrackable(r,n,i,s),this._inflightItemRemove(i),this._pathMap.markUntrackable(r,n,i,s)}_enqueueForCalculate(r,n){let i=this._nextSeq();this._inflightItemAdd(i,r,n),this._toCalculate.insert(i,[r,n])?this._toCalculate.kick():this._inflightItemRemove(i)}_enqueueForProbe(r){if(r===void 0)this._toProbe.kick();else{let[n,i]=r;this._logger.verbose(`probe enqueue ${i.blobName} -> ${n}, ${i.folderId}:${i.relPath}`),this._toProbe.insert(n,i)}return Promise.resolve()}_beginUploadBatch(){return new yw.Disposable(()=>this._toUpload.kick())}_enqueueForUpload(r,n,i,s=!0){this._logger.verbose(`upload enqueue ${n}:${i} -> ${r}`);let o=this._makeAbsPath(n,i);if(o===void 0){this._inflightItemRemove(r);return}let a=this._toUpload.get(o);if(a!==void 0){let l=a.seq;if(l>r)this._inflightItemRemove(l);else if(l<r){this._inflightItemRemove(r);return}}this._toUpload.insert(o,{seq:r,folderId:n,relPath:i},!0),s&&this._toUpload.kick()}_enqueueForProbeRetry(r,n){Date.now()-n.startTime<e.probeBackoffAfterMs?(this._logger.verbose(`probe-retry enqueue ${n.blobName} -> ${r}, ${n.folderId}:${n.relPath}`),this._probeRetryWaiters.insert(r,n)):(this._logger.verbose(`probe-retry enqueue backoff ${n.blobName} -> ${r}, ${n.folderId}:${n.relPath}`),this._probeRetryBackoffWaiters.insert(r,n))}};var Bf=class{static cacheFileName="mtime-cache.json";static tmpFileName="mtime-cache.json.tmp"},p9=class{constructor(t=Ub){this.namingVersion=t}entries=new Array};function Rbt(e){if(!(e.mtime===void 0||typeof e.mtime!="number"||!e.mtime)&&!(e.name===void 0||typeof e.name!="string"||!e.name))return{mtime:e.mtime,name:e.name}}function kbt(e){return Mt(e,Bf.cacheFileName)}function E2(e){let t=kbt(e);return qr(t)}async function wIe(e,t){let r=Mt(e,Bf.cacheFileName),n=Mt(t,Bf.cacheFileName);await Ll(t),await tG(r,n)}async function SIe(e,t){let r=new Map,n=j(`MtimeCache[${e}]`),i=Mt(t,Bf.cacheFileName);n.info(`reading blob name cache from ${i}`);try{let s=0,o=await Sn(i),a=JSON.parse(o);if(a.namingVersion===void 0||a.namingVersion!==Ub)n.info(`blob naming version ${a.namingVersion} !== ${Ub}`);else if(Array.isArray(a.entries))for(let[l,c]of a.entries){let u=Rbt(c);u!==void 0&&(r.set(l,{mtime:u.mtime,name:u.name}),s++)}n.info(`read ${s} entries from ${i}`)}catch(s){let o=He(s);s instanceof Error&&"code"in s&&s.code==="ENOENT"?n.info(`no blob name cache found at ${i} (probably new source folder); error = ${o}`):n.error(`failed to read blob name cache ${i}: ${o}`)}return r}var b2=class extends Bf{constructor(r,n){super();this._name=r;this._cacheDirName=n;this._cacheFileName=Mt(this._cacheDirName,Bf.cacheFileName),this._tmpFileName=Mt(this._cacheDirName,Bf.tmpFileName)}_cacheFileName;_tmpFileName;_logger=j("MTimeCacheWriter");get cacheFileName(){return this._cacheFileName}async write(r){this._logger.debug(`persisting to ${this._cacheFileName}`);let n=new p9;for(let[i,s,o]of r)n.entries.push([i,{mtime:s,name:o}]);await Ll(this._cacheDirName),await Ul(this._tmpFileName,JSON.stringify(n,void 0,4)),await tG(this._tmpFileName,this._cacheFileName),this._logger.debug(`persisted ${n.entries.length} entries at naming version ${Ub} to ${this._cacheFileName}`)}};var BIe=q(Cs()),Cw=q(require("vscode"));var IIe=require("console");var m9=class{constructor(t,r,n,i){this.seq=t;this.start=r;this.length=n;this.origLength=i}get end(){return this.start+this.length}get localShift(){return this.origLength-this.length}},uC=class e{constructor(t,r,n,i,s){this.seq=t;this.start=r;this.length=n;this.origStart=i;this.origLength=s}static fromMod(t,r){return new e(t.seq,t.start,t.length,t.start+r,t.origLength)}get end(){return this.start+this.length}get origEnd(){return this.origStart+this.origLength}setStart(t){let r=this.start-t;this.start-=r,this.length+=r,this.origStart-=r,this.origLength+=r}setEnd(t){let r=t-this.end;this.length+=r,this.origLength+=r}},dC=class e{static _logger=j("ChangeTracker");_modifications=[];_seq=0;get seq(){return this._seq}get empty(){return this._modifications.length===0}get length(){return this._modifications.length}translate(t,r){let n=t+Math.max(r,0),i=0,s=0;for(;i<this._modifications.length&&this._modifications[i].end<t;)s+=this._modifications[i].localShift,i++;let a=(i===this._modifications.length||t<this._modifications[i].start?t:this._modifications[i].start)+s;for(;i<this._modifications.length&&this._modifications[i].end<n;)s+=this._modifications[i].localShift,i++;let c=(i===this._modifications.length||n<this._modifications[i].start?n:this._modifications[i].start+this._modifications[i].origLength)+s;return[a,c-a]}apply(t,r,n,i){let s=0,o,a,l,c=r,u=0,f;for(;s<this._modifications.length&&this._modifications[s].end<r;)s++;if(f=s,s<this._modifications.length&&this._modifications[s].start<=r){o=this._modifications[s],a=o.length,l=o.origLength;let p=c-o.start;(0,IIe.assert)(p<=o.length);let g=Math.min(o.length-p,n-u);a-=g,u+=g,c=o.end,++s}else o=new m9(t,r,0,0),a=0,l=0;for(;s<this._modifications.length&&u<n;s++){let p=this._modifications[s],g=p.start-c,m=Math.min(g,n-u);if(l+=m,u+=m,c+m<p.start)break;let y=Math.min(p.length,n-u);a+=p.length-y,u+=y,l+=p.origLength,c=p.end}for(o.length=a+i,o.origLength=l+(n-u),o.seq=t,this._modifications.splice(f,s-f,o),s=f+1;s<this._modifications.length;s++)this._modifications[s].start+=i-n;this._seq=t}merge(t){for(let r of t._modifications)this.apply(r.seq,r.start,r.origLength,r.length)}advance(){for(let t of this._modifications)t.origLength=t.length}getEdits(){let t=[],r=0;for(let n of this._modifications)t.push(new uC(n.seq,n.start,n.length,n.start+r,n.origLength)),r+=n.localShift;return t}countChunks(t){if(this._modifications.length===0)return 0;let r=this._modifications.at(-1).end;return this.getChunks(t,r).length}getChunks(t,r){if(this._modifications.length===0)return[];let n=new Array,i,s=0;for(let a of this._modifications){let l=uC.fromMod(a,s);if(s+=a.localShift,i!==void 0&&(l.start-i.start>=t||l.end-i.start>t&&l.length<=t)&&(n.push(i),i=void 0),i===void 0)i=new uC(l.seq,l.start,0,l.origStart,0);else{let f=l.start-i.end;i.length+=f,i.origLength+=f}let c=l.length,u=Math.min(c,t-i.length);i.length+=u,i.origLength+=l.origLength,i.seq=Math.max(i.seq,l.seq);for(let f=u;f<c;f+=u){n.push(i);let p=l.start+f;i=new uC(l.seq,p,0,l.origEnd,0),u=Math.min(c-f,t),i.length+=u}}return i!==void 0&&n.push(i),this._widen(n,t,r),this._validateChunks(n)}_widen(t,r,n){let i=0;for(let s=0;s<t.length;s++){let o=t[s],a=s+1===t.length?n:t[s+1].start,l=r-o.length,c,u,f=Math.floor(o.start-l/2);f<=i?(c=i,u=Math.min(c+r,a)):(u=Math.min(f+r,a),c=Math.max(u-r,i)),o.setStart(c),o.setEnd(u),i=u}}_validateChunks(t){let r=new Array;for(let n of t)n.origStart>n.origEnd?e._logger.error("invalid chunk: ",JSON.stringify(n)):r.push(n);return r}};var DIe=6,TIe=6,vw=DIe*TIe,Mbt=1e3,Fbt=2e3,Qbt=60*1e3,Nbt=200,Pbt=30*1e3,Lbt=30*1e3,Ubt=60*1e3,_2=class{constructor(t,r,n,i){this.folderId=t;this.pathName=r;this.key=n;this.appliedSeq=i;this.recentChangesets=new lu(TIe),this.addChangeset(i),this.changesSinceUpload=new dC}uploadedBlobName;uploadedSeq;recentChangesets;changesSinceUpload;uploadRequested=!1;inProgressUpload;_embargoed=!1;invalidateUploadState(){this.uploadedBlobName=void 0,this.uploadedSeq=void 0}_clear(){this.uploadedBlobName=void 0,this.uploadedSeq=void 0,this.recentChangesets.clear(),this.changesSinceUpload=void 0,this.uploadRequested=!1,this.inProgressUpload=void 0}embargo(){this._clear(),this._embargoed=!0}get embargoed(){return this._embargoed}get uploadInProgress(){return this.inProgressUpload!==void 0}getBlobName(){return this.recentChanges(!1)?.blobName}longestHistory(t){if(this.uploadedSeq===void 0)return;let r=this.recentChangesets.at(0);if(r!==void 0){if(t)return{changeTracker:r.changeTracker,blobName:this.uploadedBlobName};if(this.uploadedBlobName!==void 0&&!(r.initialSeq>this.uploadedSeq))return{changeTracker:r.changeTracker,blobName:this.uploadedBlobName}}}recentChanges(t){return this.inProgressUpload!==void 0?this.inProgressUpload.savedChangeset:this.longestHistory(t)}applyAll(t,r,n,i){for(let s of this.recentChangesets)s.changeTracker.apply(t,r,n,i);this.appliedSeq=t}advanceAll(){for(let t of this.recentChangesets)t.changeTracker.advance()}addChangeset(t){this.recentChangesets.addItem({initialSeq:t,changeTracker:new dC})}purgeChangesets(t){let r=0;for(;!this.recentChangesets.empty&&!((this.recentChangesets.at(1)?.initialSeq??this.appliedSeq)>=t);)this.recentChangesets.shiftLeft(1),r++;return r}},A9=class extends _2{constructor(r,n,i,s,o){super(r,n,i,o);this.document=s}get documentType(){return 0}getText(){return this.document.getText()}},y9=class extends _2{constructor(r,n,i,s,o){super(r,n,i,o);this.document=s}get documentType(){return 1}getText(){return E4(this.document)}};function Obt(e){return e.getCells!==void 0}function qbt(e){return Obt(e)?e:ZCe(e)}var x2=class e extends X{constructor(r,n,i,s,o,a){super();this._apiServer=r;this._completionServer=n;this._configListener=i;this._blobNameCalculator=s;this._pathMap=o;this._sequenceGenerator=a;this._logger=j("OpenFileManager"),this._uploadQueue=new Ua(this._upload.bind(this)),this.addDisposable(this._uploadQueue),this._verifyWaiters=new Ua(this._enqueueForVerify.bind(this)),this.addDisposable(this._verifyWaiters),this._verifyWaitersKicker=new Pc(this._verifyWaiters,Fbt),this.addDisposable(this._verifyWaitersKicker),this._longWaiters=new Ua(this._enqueueForVerify.bind(this)),this.addDisposable(this._longWaiters),this._longWaitersKicker=new Pc(this._longWaiters,Qbt),this.addDisposable(this._longWaitersKicker),this._verifyQueue=new Ua(this._verify.bind(this)),this.addDisposable(this._verifyQueue)}_trackedFolders=new Map;_uploadQueue;_verifyWaiters;_longWaiters;_verifyWaitersKicker;_longWaitersKicker;_verifyQueue;_verifyBatch=new Map;_prevUpdatedDocument;_logger;openSourceFolder(r){if(this._trackedFolders.has(r))throw new Error(`Source folder ${r} is already open`);return this._trackedFolders.set(r,new Map),this._logger.info(`Opened source folder ${r}`),new Cw.Disposable(()=>{this._closeSourceFolder(r)})}_closeSourceFolder(r){this._trackedFolders.delete(r),this._logger.info(`Closed source folder ${r}`)}startTracking(r,n,i){this._trackDocument(r,n,i)}stopTracking(r,n,i){let s=this._getFolder(r);if(s===void 0)return;let o=s.get(n);o!==void 0&&(i!==void 0&&o.documentType!==i||(s.delete(n),this._prevUpdatedDocument===o&&(this._prevUpdatedDocument=void 0),this._logger.verbose(`stop tracking ${r}:${n}`)))}isTracked(r,n){return this._getDocument(r,n)!==void 0}getTrackedPaths(r){let n=this._getFolder(r);return n===void 0?new Array:Array.from(n.keys())}loseFocus(){this._setFocus(void 0)}get _chunkSize(){return this._completionServer.completionParams.chunkSize}_getFolder(r){return this._trackedFolders.get(r)}_getDocument(r,n,i){let s=typeof r=="number"?this._getFolder(r):r;if(s===void 0)return;let o=s.get(n);if(o!==void 0&&!(i!==void 0&&o.key!==i))return o}getBlobName(r,n){return this._getDocument(r,n)?.getBlobName()}translateRange(r){let n=this._getDocument(r.folderId,r.relPath);if(n===void 0||n.uploadedBlobName===void 0)return;let i=n.changesSinceUpload;if(i===void 0)return;let s=i.translate(r.beginOffset,r.endOffset-r.beginOffset);return{blobName:n.uploadedBlobName,beginOffset:s[0],endOffset:s[0]+s[1]}}notifyMissingBlob(r,n,i){let s=this._getDocument(r,n);return s===void 0||s.uploadedBlobName!==i?!1:(s.invalidateUploadState(),this._tryEnqueueUpload(r,n,"blob name reported missing",s),!0)}getRecencySummary(r){let n=new Map,i=new Array;for(let[s,o]of this._trackedFolders){let a=new Map;n.set(s,a);for(let[l,c]of o){if(c.embargoed||c.uploadedSeq===void 0)continue;let u=c.recentChanges(!1);if(u===void 0||u.blobName===void 0)continue;a.set(l,u.blobName);let f=c.getText(),p=u.changeTracker.getChunks(r,f.length);if(p.length===0)continue;let g=this._blobNameCalculator.calculateNoThrow(l,f);for(let m of p)i.push({seq:m.seq,uploaded:m.seq<=c.uploadedSeq,folderId:s,pathName:l,blobName:u.blobName,text:f.slice(m.start,m.end),origStart:m.origStart,origLength:m.origLength,expectedBlobName:g})}}return i.sort(e._compareChunks),{folderMap:n,recentChunks:i}}getRecentChunkInfo(r,n=!1){let i=new Array;for(let[s,o]of this._trackedFolders)for(let[a,l]of o){if(l.embargoed||l.uploadedSeq===void 0)continue;let c=l.recentChanges(n);if(c===void 0)continue;let u=c.changeTracker.getChunks(r,l.getText().length);if(u.length!==0)for(let f of u)i.push({seq:f.seq,uploaded:f.seq<=l.uploadedSeq,folderId:s,pathName:a,blobName:c.blobName})}return i.sort(e._compareChunks),i}static _compareChunks(r,n){return r.uploaded===n.uploaded?n.seq-r.seq:r.uploaded?1:-1}applyTextDocumentChange(r,n,i){let s=this._getDocument(r,n);if(s===void 0){this._trackDocument(r,n,i.document);return}if(!this._prepareForUpdate(s)||i.contentChanges.length===0)return;let o=i.contentChanges.map(a=>[a.rangeOffset,a.rangeLength,a.text.length]);this._applyChangedRanges(r,n,s,o)}applyNotebookChange(r,n,i){let s=this._getDocument(r,n);if(s===void 0){this._trackDocument(r,n,i.notebook);return}if(!this._prepareForUpdate(s)||i.contentChanges.length===0)return;let o=i.notebook.getCells().slice(),a=new Array;i.contentChanges.slice().reverse().forEach(l=>{o.splice(l.range.start,l.addedCells.length),o.splice(l.range.start,0,...l.removedCells);let c=o.slice(0,l.range.start).every(y=>y.kind===Cw.NotebookCellKind.Markup),u=o.slice(l.range.end).every(y=>y.kind===Cw.NotebookCellKind.Markup),f=ov(o.slice(0,l.range.start)).length;f>0&&!c&&!u&&(f+=mx.length);let p=!c||!u?mx.length:0,g=ov(l.addedCells).length;g>0&&(g+=p);let m=ov(l.removedCells).length;m>0&&(m+=p),(g>0||m>0)&&a.push([f,m,g])}),a.reverse(),this._applyChangedRanges(r,n,s,a)}_setFocus(r){this._prevUpdatedDocument!==void 0&&r!==this._prevUpdatedDocument&&(this._tryEnqueueUpload(this._prevUpdatedDocument.folderId,this._prevUpdatedDocument.pathName,"document lost focus"),this._purgeUnneededChangesets()),this._prevUpdatedDocument=r}_trackDocument(r,n,i){let s=this._getFolder(r);if(s===void 0)throw new Error(`Source folder ${r} is not open`);let o=this._getDocument(s,n);if(this._setFocus(o),o!==void 0)return;let a=this._sequenceGenerator.next(),l=qbt(i);if(l===void 0){let p=i;o=new A9(r,n,a,p,a)}else o=new y9(r,n,a,l,a);s.set(n,o);let c=o.getText(),u=this._blobNameCalculator.calculate(n,c);if(u===void 0){this._embargo(r,n,o,"blob name calculation failed");return}this._pathMap.getAnyPathName(u)===void 0?this._tryEnqueueUpload(r,n,"new document has no blob name",o):(o.uploadedBlobName=u,o.uploadedSeq=o.appliedSeq),this._logger.verbose(`start tracking ${r}:${n}`)}_prepareForUpdate(r){return this._setFocus(r),!r.embargoed}_applyChangedRanges(r,n,i,s){let o=this._sequenceGenerator.next();i.recentChangesets.empty&&(i.addChangeset(o),this._logger.verbose(`apply: new changeset for ${r}:${n}; total = ${i.recentChangesets.length}`));let a=i.inProgressUpload;for(let u of s){let[f,p,g]=u;a!==void 0&&(a.savedChangeset!==void 0&&a.savedChangeset.changeTracker.apply(o,f,p,g),a.changesSinceUpload.apply(o,f,p,g)),i.applyAll(o,f,p,g),i.changesSinceUpload?.apply(o,f,p,g)}if(i.appliedSeq=o,a!==void 0){let u=a.changesSinceUpload.length>=Nbt;u||(u=a.changesSinceUpload.countChunks(this._chunkSize)>=vw),u&&this._cancelInProgressUpload(r,n,i)}if(i.changesSinceUpload!==void 0){let u=i.changesSinceUpload.countChunks(this._chunkSize);u>1&&this._tryEnqueueUpload(r,n,"multiple non-uploaded chunks",i),u>=vw&&(this._logger.verbose(`apply: no longer tracking non-uploaded changes for ${r}:${n}`),i.changesSinceUpload=void 0)}let c=i.recentChangesets.at(-1).changeTracker.countChunks(this._chunkSize);c>=DIe&&(i.addChangeset(o),this._logger.verbose(`apply: new changeset for ${r}:${n}; chunks = ${c}; total = ${i.recentChangesets.length}`))}_cancelInProgressUpload(r,n,i){this._logger.verbose(`cancel in-progress upload: ${r}:${n}`),i.inProgressUpload=void 0,i.key=this._sequenceGenerator.next()}_validateInProgressUpload(r,n,i){let s=this._getDocument(r,n,i);if(!(s===void 0||s.inProgressUpload===void 0))return[s,s.inProgressUpload]}_tryEnqueueUpload(r,n,i,s){let o=s??this._getDocument(r,n);o!==void 0&&(o.uploadRequested||o.appliedSeq!==o.uploadedSeq&&o.appliedSeq!==o.inProgressUpload?.uploadSeq&&(this._logger.verbose(`upload request: ${r}:${n}; reason = ${i}`),o.uploadRequested=!0,o.uploadInProgress?this._logger.verbose(`upload request delayed: upload for ${r}:${n} already in progress`):this._enqueueUpload(r,n,o.key)))}_retryUpload(r,n){this._logger.verbose(`retry upload; ${r}:${n}`);let i=this._getDocument(r,n);if(i===void 0){this._logger.verbose(`retry upload: document is no longer tracked; ${r}:${n}`);return}if(i.inProgressUpload!==void 0){this._logger.verbose(`retry upload: upload already in progress; ${r}:${n}`);return}i.uploadRequested=!0,this._enqueueUpload(r,n,i.key)}_enqueueUpload(r,n,i){this._uploadQueue.insert([r,n,i])&&(this._logger.verbose(`enqueue upload: ${r}:${n}`),this._uploadQueue.kick())}async _upload(r){if(r===void 0)return;let[n,i,s]=r,o=this._getDocument(n,i,s);if(o===void 0){this._logger.verbose(`upload: upload cancelled or no longer tracking document ${n}:${i}`);return}o.uploadRequested=!1;let a=o.getText(),l=this._blobNameCalculator.calculate(i,a);if(l===void 0){this._embargo(n,i,o,"failed to compute blob name");return}let c=o.longestHistory(!1),u=c===void 0||c.blobName===void 0?void 0:{changeTracker:(0,BIe.cloneDeep)(c.changeTracker),blobName:c.blobName};o.inProgressUpload={uploadSeq:o.appliedSeq,blobName:l,savedChangeset:u,changesSinceUpload:new dC},o.advanceAll(),o.uploadedBlobName=void 0;let f;try{this._logger.verbose(`upload: begin; ${n}:${i}, ${l}`);let g=Date.now();f=await Di(async()=>{if(!(Date.now()-g>Pbt)&&this._validateInProgressUpload(n,i,s))return this._apiServer.memorize(i,a,l,[])},this._logger)}catch(g){return this._logger.verbose(`upload: failed; ${n}:${i}, ${l}; ${He(g)};`),this._embargo(n,i,o,`upload encountered permanent error: ${He(g)}`)}if(!this._validateInProgressUpload(n,i,s))return this._logger.verbose(`upload: upload cancelled; pathName = ${n}:${i}`),this._retryUpload(n,i);if(f===void 0)return this._logger.verbose(`upload: upload timed out, cancelling; pathName = ${n}:${i}`),this._cancelInProgressUpload(n,i,o),this._retryUpload(n,i);let p=f.blobName;p===l?this._logger.verbose(`upload: completed; ${n}:${i}, ${p}`):this._logger.error(`upload: completed with mismatched blobName; pathName, received, expected = ${n}:${i}, ${p}, ${l}`),o.inProgressUpload.blobName=p,this._enqueueVerifyWaiter({folderId:n,pathName:i,key:s,startTime:Date.now()},p)}_requeueVerifyWaiter(r,n){let i=r.folderId,s=r.pathName;if(!this._validateInProgressUpload(i,s,r.key))return this._logger.verbose(`requeue verify-wait: upload cancelled; ${i}:${s}, ${n}`),this._retryUpload(i,s);Date.now()-r.startTime>Ubt?(this._logger.verbose(`verify-wait: enqueue long; pathName = ${i}:${s}`),this._longWaiters.insert(r)):this._enqueueVerifyWaiter(r,n)}_enqueueVerifyWaiter(r,n){this._logger.verbose(`verify-wait: enqueue; ${r.folderId}:${r.pathName}, ${n}`),this._verifyWaiters.insert(r)}_enqueueForVerify(r){return r===void 0?(this._verifyQueue.kick(),Promise.resolve()):(this._verifyQueue.insert(r),Promise.resolve())}_grabVerifyBatch(){if(this._verifyBatch.size===0)return;let r=this._verifyBatch;return this._verifyBatch=new Map,r}async _verify(r){if(r!==void 0){let o=this._getDocument(r.folderId,r.pathName,r.key);if(o===void 0||o.inProgressUpload===void 0)return;let a=this._verifyBatch.get(o.inProgressUpload.blobName);if(a===void 0&&(a=new Array,this._verifyBatch.set(o.inProgressUpload.blobName,a)),a.push(r),this._verifyBatch.size<Mbt)return}let n=this._grabVerifyBatch();if(n===void 0)return;let i=[...n.keys()];this._logger.verbose(`verify batch: blob count = ${i.length}`);let s;try{let o=Date.now();s=await Di(async()=>{if(!(Date.now()-o>Lbt))return this._apiServer.findMissing(i)},this._logger)}catch{}if(s===void 0){this._logger.verbose("verify: timeout exceeded");for(let o of i){let a=n.get(o);for(let l of a)this._requeueVerifyWaiter(l,o)}}else{this._logVerifyResult(s);let o=new Set(s.unknownBlobNames),a=new Set(s.nonindexedBlobNames);for(let[l,c]of n)if(o.has(l))for(let u of c)this.notifyMissingBlob(u.folderId,u.pathName,l);else if(a.has(l))for(let u of c)this._requeueVerifyWaiter(u,l);else for(let u of c)this._commit(u,l)}}_commit(r,n){let i=r.folderId,s=r.pathName,o=this._validateInProgressUpload(i,s,r.key);if(o===void 0){this._logger.verbose(`commit: upload cancelled for ${i}:${s}`);return}let[a,l]=o;a.inProgressUpload=void 0,this._logger.verbose(`commit: ${i}:${s}, ${n}; uploadSeq = ${l.uploadSeq}`),a.uploadedBlobName=n,a.uploadedSeq=l.uploadSeq,a.changesSinceUpload=l.changesSinceUpload,a.uploadRequested&&this._retryUpload(r.folderId,r.pathName)}_purgeUnneededChangesets(){let r=this.getRecentChunkInfo(this._chunkSize,!0);if(r.length<vw)return;let n=r[vw-1].seq,i=new Set;for(let s=vw;s<r.length;s++){let o=this._getDocument(r[s].folderId,r[s].pathName);o!==void 0&&i.add(o)}for(let s of i){if(s===void 0)continue;let o=s.purgeChangesets(n);o>0&&this._logger.verbose(`purge: removed ${o} changesets from ${s.folderId}:${s.pathName}`)}}_embargo(r,n,i,s){this._logger.info(`embargoing: ${r}:${n} reason = ${s}`),i.embargo()}_logVerifyResult(r){let n=r.unknownBlobNames.length>0?"error":"verbose";this._logger.log(n,`find-missing reported ${r.unknownBlobNames.length} unknown blob names and ${r.nonindexedBlobNames.length} nonindexed blob names.`),r.unknownBlobNames.length>0&&(this._logger.log(n,"unknown blob names:"),Ig(this._logger,n,r.unknownBlobNames,5)),r.nonindexedBlobNames.length>0&&(this._logger.log(n,"nonindexed blob names:"),Ig(this._logger,n,r.nonindexedBlobNames,5))}};var RIe=require("buffer");var w2=class{constructor(t,r){this._fileReader=r;this._blobNameCalculator=new sh(t)}_blobNameCalculator;get maxBlobSize(){return this._blobNameCalculator.maxBlobSize}classifyPath(t){let r=this._fileReader.stat(t);return r?r.type!=="File"?{type:"not a file",mtime:r.mtime}:r.size>this._blobNameCalculator.maxBlobSize?{type:"large file",mtime:r.mtime,size:r.size}:{type:"accepted",size:r.size,mtime:r.mtime}:{type:"inaccessible"}}async readText(t){let r;try{if(r=await this._fileReader.read(t),r===void 0)return{type:"inaccessible"}}catch{return{type:"inaccessible"}}return(0,RIe.isUtf8)(r)?r.length>this._blobNameCalculator.maxBlobSize?{type:"large file",size:r.length}:JSON.stringify(r.toString()).length>this._blobNameCalculator.maxBlobSize?{type:"large file",size:r.length}:{type:"text",contents:r}:{type:"binary"}}calculateBlobName(t,r){return this._blobNameCalculator.calculateOrThrow(t,r)}};var S2=q(require("vscode"));var I2=class{_nextFolderId=100;_sourceFolders=new Map;_blobNameChangedEmitter=new S2.EventEmitter;_nextEntryTS=1e3;_logger=j("PathMap");constructor(){}dispose(){for(let[t,r]of this._sourceFolders)r.dispose()}get nextEntryTS(){return this._nextEntryTS}get onDidChangeBlobName(){return this._blobNameChangedEmitter.event}onDidChangePathStatus(t){return this._sourceFolders.get(t)?.onDidChangePathStatus}openSourceFolder(t,r){for(let[o,a]of this._sourceFolders){if(Yy(a.folderRoot,t))throw new Error(`Source folder ${t} is already open`);if(ks(t,a.folderRoot))throw new Error(`Source folder ${t} contains ${a.folderRoot}`);if(ks(a.folderRoot,t))throw new Error(`Source folder ${a.folderRoot} contains ${t}`)}let n=this._nextFolderId++,i=new v9(t,r);this._sourceFolders.set(n,i);let s=i.onDidChangeBlobName(this._handleBlobNameChangeEvent.bind(this));return i.addDisposable(s),this._logger.info(`Opened source folder ${t} with id ${n}`),n}closeSourceFolder(t){let r=this._sourceFolders.get(t);if(r===void 0)return;r.clear();let n=r.folderRoot;this._sourceFolders.delete(t),r.dispose(),this._logger.info(`Closed source folder ${n} with id ${t}`)}_handleBlobNameChangeEvent(t){this._blobNameChangedEmitter.fire(t)}getRepoRoot(t){return this._sourceFolders.get(t)?.repoRoot}hasFile(t,r){return this._sourceFolders.get(t)?.hasFile(r)??!1}getBlobName(t,r){return this._sourceFolders.get(t)?.getBlobName(r)}getBlobInfo(t,r,n){return this._sourceFolders.get(t)?.getBlobInfo(r,n)}getAnyPathName(t){for(let r of this._sourceFolders.values()){let n=r.getPathName(t);if(n!==void 0)return this._makeQualifiedPathName(r,n)}}getAllPathNames(t){let r=new Array;for(let n of this._sourceFolders.values()){let i=n.getPathName(t);i!==void 0&&r.push(new Le(n.repoRoot,i))}return r}getUniquePathCount(t){let r=0;for(let n of this._sourceFolders.values())n.getPathName(t)!==void 0&&r++;return r}getAllQualifiedPathNames(t){return this.getAllQualifiedPathInfos(t).map(r=>r.qualifiedPathName)}getAllQualifiedPathInfos(t){let r=new Array;for(let n of this._sourceFolders.values()){let i=n.getPathInfo(t);if(i!==void 0){let[s,o]=i;r.push({qualifiedPathName:new Le(n.repoRoot,t),fileType:s,isAccepted:o.accepted})}}return r}getAllPathInfo(t){let r=new Array;for(let n of this._sourceFolders.values()){let i=n.getPathName(t);i!==void 0&&r.push([n.folderRoot,n.repoRoot,i])}return r}getPathInfo(t,r){return this._sourceFolders.get(t)?.getPathInfo(r)}reportMissing(t){for(let r of this._sourceFolders.values()){let n=r.reportMissing(t);if(n!==void 0)return this._makeQualifiedPathName(r,n)}}insert(t,r,n,i){let s=this._nextEntryTS++;this._sourceFolders.get(t)?.insert(r,s,n,i)}remove(t,r){this._sourceFolders.get(t)?.remove(r)}shouldTrack(t,r){return this._sourceFolders.get(t)?.shouldTrack(r)??!1}getContentSeq(t,r){return this._sourceFolders.get(t)?.getContentSeq(r)}update(t,r,n,i,s){this._sourceFolders.get(t)?.update(r,n,i,s)}markUntrackable(t,r,n,i){this._sourceFolders.get(t)?.markUntrackable(r,n,i)}purge(t,r){this._sourceFolders.get(t)?.purge(r)}*pathsWithBlobNames(){for(let[t,r]of this._sourceFolders)for(let[n,i,s]of r.pathsWithBlobNames())yield[t,r.repoRoot,n,i,s]}*pathsInFolder(t){let r=this._sourceFolders.get(t);r!==void 0&&(yield*r.allPaths())}enablePersist(t,r,n){this._sourceFolders.get(t)?.enablePersist(r,n)}_makeQualifiedPathName(t,r){return new Le(t.repoRoot,r)}trackedFileCount(t){return this._sourceFolders.get(t)?.trackedFileCount??0}getFolderIds(){return Array.from(this._sourceFolders.keys())}},v9=class extends X{constructor(r,n){super();this.folderRoot=r;this.repoRoot=n}static defaultPersistThreshold=100;_allPathNames=new Map;_trackableFilePaths=new Set;_blobNameToPathName=new Map;_persistState=void 0;_pathStatusChangedEmitter=new S2.EventEmitter;_blobNameChangedEmitter=new S2.EventEmitter;get onDidChangePathStatus(){return this._pathStatusChangedEmitter.event}get onDidChangeBlobName(){return this._blobNameChangedEmitter.event}get trackedFileCount(){return this._trackableFilePaths.size}shouldTrack(r){let n=this._allPathNames.get(r);return n===void 0?!1:n.fileType==="File"&&n.pathAcceptance.accepted}getContentSeq(r){return this._allPathNames.get(r)?.fileInfo?.contentSeq}insert(r,n,i,s){let o=this._allPathNames.get(r),a=o===void 0||o.fileType!==i||o.pathAcceptance.format()!==s.format();if(o===void 0)o={entryTS:n,fileType:i,pathAcceptance:s},this._allPathNames.set(r,o);else{let l=o.fileInfo;o.entryTS=n,o.fileType=i,o.pathAcceptance=s,s.accepted||(o.fileInfo=void 0,l?.trackable&&(this._blobNameToPathName.delete(l.blobName),this._publishBlobNameChange(r,l.blobName,void 0),this._markDirty()))}o.fileType==="File"&&o.pathAcceptance.accepted&&o.fileInfo?.trackable!==!1?this._trackableFilePaths.add(r):this._trackableFilePaths.delete(r),a&&this._pathStatusChangedEmitter.fire({relPath:r})}remove(r){let n=this._allPathNames.get(r);if(n!==void 0){if(this._allPathNames.delete(r),this._trackableFilePaths.delete(r),n.fileInfo!==void 0&&n.fileInfo.trackable){let i=n.fileInfo.blobName;this._blobNameToPathName.delete(i),this._publishBlobNameChange(r,i,void 0),this._markDirty()}this._pathStatusChangedEmitter.fire({relPath:r})}}clear(){for(let[r,n]of this._allPathNames)n.fileInfo!==void 0&&n.fileInfo.trackable&&this._publishBlobNameChange(r,n.fileInfo.blobName,void 0);this._allPathNames.clear(),this._trackableFilePaths.clear(),this._blobNameToPathName.clear(),this._markDirty()}update(r,n,i,s){let o=this._allPathNames.get(r);if(o===void 0||o.fileType!=="File"||!o.pathAcceptance.accepted||o.fileInfo!==void 0&&o.fileInfo.contentSeq>n)return;let a=o.fileInfo===void 0?!0:o.fileInfo.trackable,l;o.fileInfo?.trackable&&(l=o.fileInfo.blobName),o.fileInfo={trackable:!0,contentSeq:n,blobName:i,mtime:s},this._trackableFilePaths.add(r),i!==l&&(l!==void 0&&this._blobNameToPathName.delete(l),this._blobNameToPathName.set(i,r),this._publishBlobNameChange(r,l,i),this._markDirty()),(!a||l===void 0)&&this._pathStatusChangedEmitter.fire({relPath:r})}markUntrackable(r,n,i){let s=this._allPathNames.get(r);if(s===void 0||s.fileType!=="File"||!s.pathAcceptance.accepted||s.fileInfo!==void 0&&s.fileInfo.contentSeq>n)return;let o=s.fileInfo;s.fileInfo={trackable:!1,contentSeq:n,reason:i},this._trackableFilePaths.delete(r);let a=!1;if(o===void 0)a=!0;else if(o.trackable===!0){a=!0;let l=o.blobName;this._blobNameToPathName.delete(l),this._publishBlobNameChange(r,l,void 0),this._markDirty()}else a=i!==o.reason;a&&this._pathStatusChangedEmitter.fire({relPath:r})}_makeAbsPath(r){return Mt(this.repoRoot,r)}_publishBlobNameChange(r,n,i){n!==i&&this._blobNameChangedEmitter.fire({absPath:this._makeAbsPath(r),prevBlobName:n,newBlobName:i})}purge(r){let n=new Array;for(let[i,s]of this._allPathNames)s.entryTS<r&&n.push(i);for(let i of n)this.remove(i)}hasFile(r){return this._trackableFilePaths.has(r)}getBlobName(r){let n=this._allPathNames.get(r);if(n?.fileInfo?.trackable)return n.fileInfo?.blobName}getBlobInfo(r,n){let i=this._allPathNames.get(r);if(i?.fileInfo?.trackable&&i.fileInfo.mtime===n)return[i.fileInfo.blobName,i.fileInfo.contentSeq]}getPathName(r){return this._blobNameToPathName.get(r)}getPathInfo(r){let n=this._allPathNames.get(r);if(n!==void 0)return[n.fileType,n.pathAcceptance]}reportMissing(r){let n=this._blobNameToPathName.get(r);if(n===void 0)return;let i=this._allPathNames.get(n);if(i?.fileInfo?.trackable)return i.fileInfo.contentSeq=0,n}*pathsWithBlobNames(){for(let[r,n]of this._allPathNames){let i=n.fileInfo;i?.trackable&&(yield[r,i.mtime,i.blobName,i.contentSeq])}}*allPaths(){for(let[r,n]of this._allPathNames){let i=n.pathAcceptance.accepted,s=!1,o=n.pathAcceptance.format();i&&(n.fileType==="Other"?(i=!1,o="Not a file"):n.fileInfo!==void 0&&(n.fileInfo?.trackable===!0?s=!0:(i=!1,o=n.fileInfo.reason))),yield[r,n.fileType,i,s,o]}}_markDirty(){this._persistState!==void 0&&this._persistState.dirtyCount++}enablePersist(r,n){if(this._persistState)return;this._persistState={dirtyCount:this._trackableFilePaths.size,lastPersistDirtyCount:0,mtimeCacheWriter:r,persisting:!1},this._maybePersist();let i=setInterval(()=>void this._maybePersist(),n);this.addDisposable({dispose:()=>clearInterval(i)})}async _maybePersist(){if(!(this._persistState===void 0||this._persistState.persisting)){this._persistState.persisting=!0;try{this._persistState.dirtyCount>this._persistState.lastPersistDirtyCount&&await this._persist(this._persistState)}finally{this._persistState.persisting=!1}}}async _persist(r){let n=function*(o){for(let[a,l]of o){let c=l.fileInfo;c?.trackable&&(yield[a,c.mtime,c.blobName])}},i=r.dirtyCount;await r.mtimeCacheWriter.write(n(this._allPathNames.entries())),r.lastPersistDirtyCount=i}};var Xl=q(require("vscode"));var C9=class extends wg{constructor(r){super();this.reason=r}format(){return this.reason}},B2=class extends X{constructor(r,n,i,s,o){super();this.folderName=r;this.folderRoot=n;this.repoRoot=i;this._pathFilter=s;this._workspaceFolder=o;this._logger=j(`PathNotifier[${n}]`)}_pathFoundEmitter=new Xl.EventEmitter;_pathCreatedEmitter=new Xl.EventEmitter;_pathChangedEmitter=new Xl.EventEmitter;_pathDeletedEmitter=new Xl.EventEmitter;_logger;_filesystemWatcherCreated=!1;_stopping=!1;_deletedPaths=void 0;get onDidFindPath(){return this._pathFoundEmitter.event}get onDidCreatePath(){return this._pathCreatedEmitter.event}get onDidChangePath(){return this._pathChangedEmitter.event}get onDidDeletePath(){return this._pathDeletedEmitter.event}dispose(){this._stopping=!0,super.dispose()}async enumeratePaths(){if(this._stopping)return;this._deletedPaths=new Set,this._workspaceFolder!==void 0&&!this._filesystemWatcherCreated&&(this._createFilesystemWatcher(this._workspaceFolder),this._filesystemWatcherCreated=!0);let r=new lC(this.folderName,Xl.Uri.file(this.folderRoot),Xl.Uri.file(this.repoRoot),this._pathFilter);for await(let[i,s,o,a]of r){if(this._stopping)return;this._pathFoundEmitter.fire({relPath:s,fileType:o,acceptance:a})}if(this._stopping)return;let n=this._deletedPaths;this._deletedPaths=void 0;for(let i of n)this._pathDeletedEmitter.fire(i);return r.stats}_handlePathChanged(r,n){let i=this._getRelPath(r);if(i===void 0)return;let s,o;try{s=rf(hs(r)).type,o=this._pathFilter.getPathInfo(i,s)}catch(l){s="Other",o=new C9(He(l))}let a=n?"created":"changed";this._logger.verbose(`${s} ${a}: ${i}, acceptance = ${o.format()}`),this._deletedPaths?.delete(i),n?this._pathCreatedEmitter.fire({relPath:i,fileType:s,acceptance:o}):this._pathChangedEmitter.fire({relPath:i,fileType:s,acceptance:o})}_handlePathDeleted(r){let n=this._getRelPath(r);n!==void 0&&(this._logger.verbose(`Path deleted: ${n}`),this._deletedPaths!==void 0?this._deletedPaths?.add(n):this._pathDeletedEmitter.fire(n))}_getRelPath(r){if(this._stopping)return;let n=Sf(r);if(n!==void 0)return Jh(this.repoRoot,n)}_createFilesystemWatcher(r){let n=Xl.workspace.createFileSystemWatcher(new Xl.RelativePattern(r,"**/*"));this.addDisposables(n,n.onDidCreate(i=>this._handlePathChanged(i,!0)),n.onDidChange(i=>this._handlePathChanged(i,!1)),n.onDidDelete(i=>this._handlePathDeleted(i)))}};var bw=q(require("vscode"));async function kIe(e,t,r,n){let i=hs(e),s=hs(t),o=new Array;o.push(i);let a=new Array,l=200,c=Date.now(),u;for(;(u=o.pop())!==void 0&&(n===void 0||a.length<n);){Date.now()-c>=l&&(await new Promise(y=>setTimeout(y,0)),c=Date.now());let p=sf(s,u),g=r.makeLocalPathFilter(p),m=dm(u);for(let[y,v]of m){if(Date.now()-c>=l&&(await new Promise(w=>setTimeout(w,0)),c=Date.now()),y==="."||y==="..")continue;let E=Mt(p,y,v==="Directory");g.acceptsPath(E,v)&&(v==="File"?a.push(E):v==="Directory"&&o.push(Mt(u,y)))}}return Promise.resolve(a)}var D2=class e{constructor(t,r,n,i){this._apiServer=t;this._pathHandler=r;this._fileExtensions=n;this._maxTrackedFiles=i}static verifyBatchSize=1e3;async describe(t,r,n){let i=await this._getAllPathNames(t,r,n);if(i.length>this._maxTrackedFiles)return{trackable:!1};let s=i.length,o=await this._chooseBlobNameSample(r,i);if(o.length===0)return{trackable:!0,trackableFiles:0,uploadedFraction:1};let a=await this._apiServer.findMissing(o),l=o.length,c=Math.min(a.unknownBlobNames.length,l);return{trackable:!0,trackableFiles:s,uploadedFraction:(l-c)/l}}async _getAllPathNames(t,r,n){let i=await t2(bw.Uri.file(t),bw.Uri.file(r),new oC(n),this._fileExtensions);return await kIe(bw.Uri.file(t),bw.Uri.file(r),i,this._maxTrackedFiles+1)}async _chooseBlobNameSample(t,r){let n=new Array;for(;n.length<e.verifyBatchSize&&r.length>0;){let i=Math.floor(Math.random()*r.length),s=r[i];r[i]=r[r.length-1],r.pop();let o=Mt(t,s),a=await this._pathHandler.readText(o);if(a.type!=="text")continue;let l=this._pathHandler.calculateBlobName(s,a.contents);n.push(l)}return n}};var MIe=q(require("vscode"));var T2=class{maxSize;items;constructor(t){this.maxSize=t,this.items=[]}add(t){let r=this.items.indexOf(t);r!==-1?this.items.splice(r,1):this.items.length>=this.maxSize&&this.items.shift(),this.items.push(t)}clear(){this.items=[]}size(){return this.items.length}toArray(){return this.items.slice()}};var R2=class extends X{constructor(r){super();this._workspaceManager=r;this.addDisposable(MIe.window.onDidChangeActiveTextEditor(this._notifyActiveEditorChanged.bind(this)))}_tabSwitchHistory=new T2(20);_logger=j("TabWatcher");_notifyActiveEditorChanged(r){if(r===void 0)return;let n=r.document.uri;this._workspaceManager.resolvePathName(n.fsPath)!==void 0&&this._tabSwitchHistory.add(n.fsPath)}getTabSwitchEvents(){let r=[];for(let n of this._tabSwitchHistory.toArray()){let i=this._workspaceManager.resolvePathName(n);if(i===void 0)continue;let s=this._workspaceManager.getBlobName(i);s!==void 0&&r.push({relPathName:i.relPath,blobName:s})}return r}};var k2=class e extends X{constructor(r,n){super();this._apiServer=r;this._workspaceManager=n;this._logger=j("UnknownBlobHandler"),this._toProbe=new ta(this._probe.bind(this)),this.addDisposable(this._toProbe),this._probeWaiters=new ta(this._enqueueForProbe.bind(this)),this.addDisposable(this._probeWaiters),this._probeWaitersKicker=new Pc(this._probeWaiters,e.probeRetryWaitMs),this.addDisposable(this._probeWaitersKicker),this._longWaiters=new ta(this._enqueueForProbe.bind(this)),this.addDisposable(this._longWaiters),this._longWaitersKicker=new Pc(this._longWaiters,e.longRetryWaitMs),this.addDisposable(this._longWaitersKicker)}static probeBatchSize=1e3;static probeRetryWaitMs=5*1e3;static probePatienceMs=2*60*1e3;static longRetryWaitMs=60*1e3;_toProbe;_currentBatch=new Map;_probeWaiters;_probeWaitersKicker;_longWaiters;_longWaitersKicker;_logger;enqueue(r){for(let[n,i]of r)this._logger.verbose(`enqueue: ${i.rootPath}:${i.relPath}`),this._toProbe.insert(n,{qualifiedPath:i,startTime:Date.now()});this._toProbe.kick()}_grabCurrentBatch(){if(this._currentBatch.size===0)return;let r=this._currentBatch;return this._currentBatch=new Map,r}async _probe(r){if(r!==void 0){let[o,a]=r;if(this._workspaceManager.getBlobName(a.qualifiedPath)!==o||(this._currentBatch.set(o,a),this._currentBatch.size<e.probeBatchSize))return}let n=this._grabCurrentBatch();if(n===void 0)return;let i=[...n.keys()],s;try{s=await Di(async()=>this._apiServer.findMissing(i),this._logger)}catch{}if(s===void 0)for(let[o,a]of n)this._addRetryWaiter(o,a);else{this._logger.verbose(`find-missing reported ${s.nonindexedBlobNames.length} nonindexed blob names`),s.nonindexedBlobNames.length>0&&Ig(this._logger,"verbose",s.nonindexedBlobNames,5);let o=new Set(s.unknownBlobNames),a=new Set(s.nonindexedBlobNames);for(let[l,c]of n)o.has(l)?this._workspaceManager.notifyBlobMissing(c.qualifiedPath,l):a.has(l)&&this._addRetryWaiter(l,c)}}_enqueueForProbe(r){if(r===void 0)this._toProbe.kick();else{let[n,i]=r;this._logger.verbose(`probe enqueue: ${i.qualifiedPath.rootPath}:${i.qualifiedPath.relPath}: ${n}`),this._toProbe.insert(n,i)}return Promise.resolve()}_addRetryWaiter(r,n){Date.now()-n.startTime<e.probePatienceMs?(this._logger.verbose(`retry enqueue: ${n.qualifiedPath.rootPath}:${n.qualifiedPath.relPath}: ${r}`),this._probeWaiters.insert(r,n)):(this._logger.verbose(`long retry enqueue: ${n.qualifiedPath.rootPath}:${n.qualifiedPath.relPath}: ${r}`),this._longWaiters.insert(r,n))}};var fC=class e{constructor(t,r,n,i=[],s=[],o,a){this.blobs=t;this.recentChunks=r;this.trackedPaths=n;this.unindexedEditEvents=i;this.unindexedEditEventsBaseBlobNames=s;this.lastChatResponse=o;this.blobNames=a}static empty(){return new e({checkpointId:void 0,addedBlobs:[],deletedBlobs:[]},new Array,new Map,[],[],void 0,[])}};function b9(e){return $y(hs(e))}function Ew(e){if(e.scheme==="file")return b9(e)}var E9=class extends X{constructor(r,n,i,s,o,a,l,c,u,f,p){super(u,f);this.folderName=r;this.folderRoot=n;this.repoRoot=i;this.workspaceFolder=s;this.vcsDetails=o;this.folderId=a;this.diskFileManager=l;this.cacheDirPath=c;this.logger=p;this._operationQueue=new Ua(async g=>await this._runSerializedOperation(g)),this.addDisposables(this._operationQueue,{dispose:()=>this._disposeTracker()})}_operationQueue;_tracker;_newlyTracked=!1;_initialEnumerationComplete=!1;_initialSyncComplete=!1;_stopped=!1;dispose(){this._stopped=!0,super.dispose()}get stopped(){return this._stopped}get type(){return this.workspaceFolder===void 0?1:0}_disposeTracker(){this._tracker?.dispose(),this._tracker=void 0}setTracker(r){if(this.stopped)throw new Error("Source folder has been disposed");this._disposeTracker(),this._tracker=r}get tracker(){return this._tracker}get initialEnumerationComplete(){return this._initialEnumerationComplete}setInitialEnumerationComplete(){this._initialEnumerationComplete=!0}get initialSyncComplete(){return this._initialSyncComplete}setInitialSyncComplete(){this._initialSyncComplete=!0}relativePathName(r){if(ks(this.folderRoot,r))return Ol(this.repoRoot,r)}acceptsPath(r){return this._tracker===void 0?!1:this._tracker.pathFilter.acceptsPath(r)}async enqueueSerializedOperation(r){this._operationQueue.insert(r),await this._operationQueue.kick()}async _runSerializedOperation(r){r!==void 0&&(!this._initialEnumerationComplete||this._stopped||await r())}},_9=class extends X{constructor(r,n,i){super(i);this.pathFilter=r;this.pathNotifier=n}};var Vbt=new Set(["home directory","too large"]),Hbt=new Set(["nested"]);function _w(e){return Vbt.has(e)}function FIe(e){return Hbt.has(e)}function tl(e){return e.containingFolderRoot!==void 0?"nested":e.isHomeDir?"home directory":e.folderQualification!==void 0&&!e.folderQualification.trackable?"too large":e.syncingPermission==="denied"?"permission denied":e.syncingPermission==="granted"?"trackable":e.folderQualification===void 0?"qualifying":"permission needed"}var M2=class e extends X{constructor(r,n,i,s,o,a,l,c,u,f,p,g,m,y=new Array,v){super();this._actionsModel=r;this._externalSourceFolderRecorder=n;this._syncingPermissionTracker=i;this._storageUriProvider=s;this._apiServer=o;this._configListener=a;this._featureFlagManager=l;this._clientMetricsReporter=c;this._completionServer=u;this._blobNameCalculator=f;this._maxUploadSizeBytes=p;this._syncingEnabledTracker=g;this._onboardingSessionEventReporter=m;this._enableFileLimitsForSyncingPermission=this._featureFlagManager.currentFlags.enableFileLimitsForSyncingPermission,this._maxTrackableFiles=this._featureFlagManager.currentFlags.maxTrackableFileCount,this._maxTrackableFilesWithoutPermission=Math.min(this._featureFlagManager.currentFlags.maxTrackableFileCountWithoutPermission,this._maxTrackableFiles);let C=Math.min(this._featureFlagManager.currentFlags.minUploadedPercentageWithoutPermission,100);if(this._verifyFolderIsSourceRepo=this._featureFlagManager.currentFlags.verifyFolderIsSourceRepo,this._minUploadedFractionWithoutPermission=C*.01,this._refuseToSyncHomeDirectories=this._featureFlagManager.currentFlags.refuseToSyncHomeDirectories,this._useCheckpointManagerContext=v?.useCheckpointManagerContext??gr(this._featureFlagManager.currentFlags.useCheckpointManagerContextMinVersion),this._validateCheckpointManagerContext=this._featureFlagManager.currentFlags.validateCheckpointManagerContext,this._folderEnumeratedEmitter=this.addDisposable(new St.EventEmitter),this._folderSyncedEmitter=this.addDisposable(new St.EventEmitter),this._syncingProgressEmitter=this.addDisposable(new St.EventEmitter),this._syncingStateEmitter=this.addDisposable(new St.EventEmitter),this._sourceFoldersChangedEmitter=this.addDisposable(new St.EventEmitter),this._sourceFolderContentsChangedEmitter=this.addDisposable(new St.EventEmitter),this._sourceFolderContentsChangedEmitter=this.addDisposable(new St.EventEmitter),this._fileChangedEmitter=this.addDisposable(new St.EventEmitter),this._textDocumentOpenedEmitter=this.addDisposable(new St.EventEmitter),this._textDocumentClosedEmitter=this.addDisposable(new St.EventEmitter),this._textDocumentChangedEmitter=this.addDisposable(new St.EventEmitter),this._fileDeletedEmitter=this.addDisposable(new St.EventEmitter),this._fileWillRenameEmitter=this.addDisposable(new St.EventEmitter),this._fileDidMoveEmitter=this.addDisposable(new St.EventEmitter),this._featureFlagManager.currentFlags.bypassLanguageFilter)this._fileExtensions=void 0;else{let R=new Set;for(let N of y)for(let W of N.extensions)R.add(W);this._fileExtensions=R}this._pathHandler=new w2(this._maxUploadSizeBytes,XSe()),this._pathMap=this.addDisposable(new I2);let E;if(this._configListener.config.openFileManager.v2Enabled){let R=new g2(this._blobNameCalculator,this._apiServer);this.addDisposable(R),E=new m2(R,this._blobNameCalculator)}let w=new x2(this._apiServer,this._completionServer,this._configListener,this._blobNameCalculator,this._pathMap,this._sequenceGenerator);this.addDisposable(w),this._openFileManager=new c2(this._configListener,w,E);let B=v?.blobsCheckpointThreshold;this._blobsCheckpointManager=this.addDisposable(new v2(this._apiServer,this._featureFlagManager,this._pathMap.onDidChangeBlobName,B)),this._unknownBlobHandler=this.addDisposable(new k2(this._apiServer,this)),this._sourceFolderReconciler=this.addDisposable(new sd(()=>this._reconcileSourceFolders())),this._sourceFolderDescriber=new D2(this._apiServer,this._pathHandler,this._fileExtensions,this._maxTrackableFiles),this.addDisposable(St.workspace.onDidChangeWorkspaceFolders(this._handleWorkspaceFolderChangeEvent.bind(this))),this.addDisposable(St.workspace.onDidChangeTextDocument(this._notifyTextDocumentChanged.bind(this))),this.addDisposable(St.workspace.onDidOpenTextDocument(this._notifyTextDocumentOpened.bind(this))),this.addDisposable(St.workspace.onDidCloseTextDocument(this._notifyTextDocumentClosed.bind(this))),this.addDisposable(St.workspace.onDidChangeNotebookDocument(this._notifyNotebookDocumentChanged.bind(this))),this.addDisposable(St.window.onDidChangeActiveTextEditor(this._notifyActiveEditorChanged.bind(this))),this.addDisposable(St.workspace.onDidCloseTextDocument(R=>{this._notifyDocumentClosed(R)})),this.addDisposable(St.workspace.onDidCloseNotebookDocument(R=>{this._notifyDocumentClosed(R)})),this.addDisposable(St.workspace.onWillRenameFiles(R=>{this._notifyWillRenameFile(R)})),this.addDisposable(St.workspace.onDidRenameFiles(R=>{this._notifyDidRenameFile(R)})),this.addDisposable(this._configListener.onDidChange(this._notifyConfigChange.bind(this))),this._notifyConfigChange(),this.addDisposable(new St.Disposable(()=>this._disposeSourceFolders())),this.addDisposable(new St.Disposable(()=>this._disposeTabWatcher())),this._actionsModel.setSystemStateStatus("syncingPermitted","complete"),this._actionsModel.setSystemStateStatus("workspaceTooLarge","initializing"),this._actionsModel.setSystemStateStatus("uploadingHomeDir","initializing"),this._registerInitialSourceFolders(),this._awaitInitialSourceFolders()}static augmentRootName=".augmentroot";static ignoreSources(r){return[new hw(".gitignore"),new jN(r),new hw(".augmentignore")]}static pathMapPersistFrequencyMs=6e4;static defaultPathAccept=new Sg;static _textEncoder=new TextEncoder;_initialSourceFolders=new Set;_registeredSourceFolders=new Map;_trackedSourceFolders=new Map;_fileExtensions;_pathMap;_sequenceGenerator=new r2;_pathHandler;_openFileManager;_blobsCheckpointManager;_unknownBlobHandler;_sourceFolderDescriber;_logger=j("WorkspaceManager");_tabWatcher;_vcsWatcher;_fileEditManager;_folderEnumeratedEmitter;_folderSyncedEmitter;_syncingProgressEmitter;_syncingPermissionInitialized=!1;_sourceFolderReconciler;_syncingStateEmitter;_sourceFoldersChangedEmitter;_sourceFolderContentsChangedEmitter;_fileChangedEmitter;_textDocumentOpenedEmitter;_textDocumentClosedEmitter;_textDocumentChangedEmitter;_fileDeletedEmitter;_fileWillRenameEmitter;_fileDidMoveEmitter;_lastChatResponse=void 0;_enableFileLimitsForSyncingPermission;_maxTrackableFiles;_maxTrackableFilesWithoutPermission;_verifyFolderIsSourceRepo;_minUploadedFractionWithoutPermission;_refuseToSyncHomeDirectories;_useCheckpointManagerContext;_validateCheckpointManagerContext;_stopping=!1;dispose(){this._stopping=!0,super.dispose()}get enableFileLimitsForSyncingPermission(){return this._enableFileLimitsForSyncingPermission}get maxTrackableFiles(){return this._maxTrackableFiles}get maxTrackableFilesWithoutPermission(){return this._maxTrackableFilesWithoutPermission}get verifyFolderIsSourceRepo(){return this._verifyFolderIsSourceRepo}get minUploadedFractionWithoutPermission(){return this._minUploadedFractionWithoutPermission}get refuseToSyncHomeDirectories(){return this._refuseToSyncHomeDirectories}get fileDeletedEmitter(){return this._fileDeletedEmitter.event}get fileWillRenameEmitter(){return this._fileWillRenameEmitter.event}get initialFoldersEnumerated(){return Array.from(this._initialSourceFolders).every(r=>{let n=this._registeredSourceFolders.get(r);if(n===void 0)return!0;let i=tl(n);return _w(i)||FIe(i)||i==="permission denied"?!0:this._trackedSourceFolders.get(r)?.sourceFolder?.initialEnumerationComplete})}async awaitInitialFoldersEnumerated(){for(;!this.initialFoldersEnumerated;)await jm(this._folderEnumeratedEmitter.event)}get onDidEnumerateFolder(){return this._folderEnumeratedEmitter.event}get initialFoldersSynced(){return Array.from(this._initialSourceFolders).every(r=>{let n=this._registeredSourceFolders.get(r);if(n===void 0)return!0;let i=tl(n);return _w(i)||FIe(i)||i==="permission denied"?!0:this._trackedSourceFolders.get(r)?.sourceFolder?.initialSyncComplete})}async awaitInitialFoldersSynced(){for(;!this.initialFoldersSynced;)await jm(this._folderSyncedEmitter.event)}get onDidChangeSyncingProgress(){return this._syncingProgressEmitter.event}get syncingEnabledState(){if(!this._syncingPermissionInitialized)return"initializing";if(this._syncingPermissionTracker.syncingPermissionDenied)return"disabled";let r=0;for(let[n,i]of this._registeredSourceFolders){let s=tl(i);if(_w(s)||s==="permission denied")return"disabled";s==="permission needed"&&r++}return r>0?"partial":"enabled"}get onDidChangeSyncingState(){return this._syncingStateEmitter.event}get onDidChangeSourceFolders(){return this._sourceFoldersChangedEmitter.event}get onDidChangeSourceFolderContents(){return this._sourceFolderContentsChangedEmitter.event}get onDidChangeFile(){return this._fileChangedEmitter.event}get onFileDeleted(){return this._fileDeletedEmitter.event}get onFileDidMove(){return this._fileDidMoveEmitter.event}get completionServer(){return this._completionServer}_disposeSourceFolders(){this._registeredSourceFolders.forEach(r=>{r.cancel?.cancel(),r.cancel?.dispose(),r.cancel=void 0}),this._trackedSourceFolders.forEach(r=>r.sourceFolder?.dispose()),this._trackedSourceFolders.clear(),this._vcsWatcher?.dispose(),this._fileEditManager?.dispose()}_disposeTabWatcher(){this._tabWatcher?.dispose(),this._tabWatcher=void 0}_disposeVCSWatcher(){this._vcsWatcher?.dispose(),this._vcsWatcher=void 0}_disposeEditFileManager(){this._fileEditManager?.dispose(),this._fileEditManager=void 0}_notifyConfigChange(){this._stopping||(this._configListener.config.recencySignalManager.collectTabSwitchEvents?this._tabWatcher===void 0&&(this._tabWatcher=new R2(this)):this._disposeTabWatcher(),this._configListener.config.vcs.watcherEnabled?this._vcsWatcher===void 0&&(this._vcsWatcher=new l2(new Zm.FileUploaderImpl(this._blobNameCalculator,this._apiServer),this._configListener)):this._disposeVCSWatcher(),Kl(this._configListener.config,this._featureFlagManager.currentFlags.vscodeNextEditMinVersion)||this.getEnableCompletionFileEditEvents()?this._fileEditManager===void 0&&(this._fileEditManager=new uw(this._blobNameCalculator,this._maxUploadSizeBytes,this._textDocumentChangedEmitter.event,this._textDocumentOpenedEmitter.event,this._textDocumentClosedEmitter.event,this._fileDeletedEmitter.event,this._fileWillRenameEmitter.event,this._configListener.config.enableDebugFeatures),this._fileEditManager.listenToEvents(),this._trackedSourceFolders.forEach(r=>{r.sourceFolder!==void 0&&this._fileEditManager?.startTracking(r.sourceFolder.folderId,r.sourceFolder.folderName,{directory:this._computeCacheDirPath(r.sourceFolder.folderRoot)})})):this._disposeEditFileManager())}getSyncingProgress(){let r=new Array;return this._trackedSourceFolders.forEach((n,i)=>{r.push(this._getSyncingProgress(i,n.sourceFolder))}),r}_reportSyncingProgress(r){this._syncingProgressEmitter.fire(this._getSyncingProgress(r.folderRoot,r))}_getSyncingProgress(r,n){let i=n?.initialEnumerationComplete?{newlyTracked:n._newlyTracked,trackedFiles:this._pathMap.trackedFileCount(n.folderId),backlogSize:n.diskFileManager.itemsInFlight}:void 0;return{folderRoot:r,progress:i}}_isHomeDir(r){return this._featureFlagManager.currentFlags.refuseToSyncHomeDirectories?pIe(r):!1}_registerInitialSourceFolders(){let r=new Array;St.workspace.workspaceFolders?.forEach(i=>{let s=Ew(i.uri);s!==void 0&&this._mtimeCacheExists(s)&&r.push(s)}),this._syncingPermissionTracker.setDefaultPermissions(r),this._externalSourceFolderRecorder.getFolders().forEach((i,s)=>{if(this._isHomeDir(s)){this._logger.info(`Rejecting external source folder ${s}: home directory`);return}this._logger.info(`Adding external source folder ${s}`),this._initialSourceFolders.add(s),this._registeredSourceFolders.set(s,{folderName:i,isHomeDir:!1,folderType:1,syncingPermission:this._syncingPermissionTracker.syncingPermissionDenied?"denied":"granted"})});let n=new Array;St.workspace.workspaceFolders?.forEach(i=>{let s=i.name,o=Ew(i.uri);if(o===void 0)return;let a=this._syncingPermissionTracker.getFolderSyncingPermission(o);this._logger.info(`Adding workspace folder ${s}; folderRoot = ${o}; syncingPermission = ${a}`),this._initialSourceFolders.add(o),this._registeredSourceFolders.set(o,{folderName:s,isHomeDir:this._isHomeDir(o),folderType:0,syncingPermission:a,workspaceFolder:i}),a==="granted"&&n.push(o)}),this._syncingPermissionTracker.dropStaleFolders(n),this._setSyncingPermissionInitialized()}_mtimeCacheExists(r){let n=this._computeCacheDirPath(r);return E2(n)}_setSyncingPermissionInitialized(){this._syncingPermissionInitialized=!0,this._syncingEnabledTracker.workspaceManager=this}async _awaitInitialSourceFolders(){let r=Date.now();this._kickSourceFolderReconciler(),await this.awaitInitialFoldersSynced(),this._reportWorkspaceStartup(Date.now()-r),this._folderSyncedEmitter.fire()}_handleWorkspaceFolderChangeEvent(r){for(let i of r.added){let s=i.name,o=Ew(i.uri);if(o===void 0)continue;let a=this._syncingPermissionTracker.getFolderSyncingPermission(o);this._logger.info(`Adding workspace folder ${s}; folderRoot = ${o}; syncingPermission = ${a}`),this._registeredSourceFolders.set(o,{folderName:s,isHomeDir:this._isHomeDir(o),folderType:0,syncingPermission:a,workspaceFolder:i})}let n=new Array;for(let i of r.removed){let s=Ew(i.uri);if(s===void 0)continue;this._logger.info(`Removing workspace folder ${s}`);let o=this._registeredSourceFolders.get(s);o!==void 0&&(o.cancel?.cancel(),o.cancel?.dispose(),o.cancel=void 0,this._registeredSourceFolders.delete(s),n.push(s))}this._syncingPermissionTracker.dropPermission(n),this._kickSourceFolderReconciler()}addExternalSourceFolder(r){let n=Ew(r);if(n===void 0)throw new TF;if(this._registeredSourceFolders.has(n))throw new MF;try{if(rf(n).type!=="Directory")throw new kF}catch(i){throw new RF(He(i))}if(this._isHomeDir(n))throw new FF;this._logger.info(`Adding external source folder ${XQ(r)}`),this._registeredSourceFolders.set(n,{folderName:n0e(n),isHomeDir:!1,folderType:1,syncingPermission:this._syncingPermissionTracker.syncingPermissionDenied?"denied":"granted"}),this._kickSourceFolderReconciler()}removeExternalSourceFolder(r){let n=this._registeredSourceFolders.get(r);if(n!==void 0){if(n.folderType!==1)throw new QF;this._logger.info(`Removing external source folder ${r}`),this._registeredSourceFolders.delete(r),this._kickSourceFolderReconciler()}}enableSyncing(){this._logger.info("Enabling syncing for all trackable source folders");let r=new Array;this._registeredSourceFolders.forEach((n,i)=>{let s=tl(n);_w(s)||s==="qualifying"||(n.syncingPermission="granted",r.push(i))}),this._syncingPermissionTracker.setPermittedFolders(r),this._kickSourceFolderReconciler()}disableSyncing(){this._logger.info("Disabling syncing for all trackable source folders"),this._registeredSourceFolders.forEach(r=>{let n=tl(r);_w(n)||(r.syncingPermission="denied")}),this._syncingPermissionTracker.denyPermission(),this._kickSourceFolderReconciler()}requalifyLargeFolders(){this._registeredSourceFolders.forEach(r=>{r.folderQualification=void 0}),this._kickSourceFolderReconciler()}async _kickSourceFolderReconciler(){await this._updateStoredExternalSourceFolders();let r=new Set;for(let[n,i]of this._registeredSourceFolders)if(tl(i)==="trackable"){for(let[o,a]of this._registeredSourceFolders)if(tl(a)==="trackable"&&n!==o&&ks(o,n)){r.add(n);break}}for(let[n,i]of this._registeredSourceFolders){if(!r.has(n)){i.containingFolderRoot=void 0;continue}for(let s of this._registeredSourceFolders.keys())if(!(n===s||r.has(s))&&ks(s,n)){i.containingFolderRoot!==s&&this._logger.info(`Source folder ${n} will not be tracked. Containing folder: ${s}`),i.containingFolderRoot=s;break}}this._updateActionsModelState();for(let[n,i]of this._registeredSourceFolders)tl(i)==="qualifying"&&i.cancel===void 0&&this._qualifySourceFolder(n,i);this._syncingStateEmitter.fire(this.syncingEnabledState),this._sourceFoldersChangedEmitter.fire(),this._sourceFolderReconciler.kick()}async _updateStoredExternalSourceFolders(){let r=new Map;for(let[n,i]of this._registeredSourceFolders)i.folderType===1&&r.set(n,i.folderName);await this._externalSourceFolderRecorder.setFolders(r)}_updateActionsModelState(){if(this._syncingPermissionTracker.syncingPermissionDenied){this._actionsModel.setSystemStateStatus("syncingPermitted","incomplete");return}let r=!1,n=!1,i=!1;for(let[l,c]of this._registeredSourceFolders){let u=tl(c);if(u==="permission needed"){r=!0;break}else if(u==="home directory"){n=!0;break}else if(u==="too large"){i=!0;break}}let s=r?"initializing":"complete";this._actionsModel.setSystemStateStatus("syncingPermitted",s);let o=n?"complete":"initializing";this._actionsModel.setSystemStateStatus("uploadingHomeDir",o);let a=i?"complete":"initializing";this._actionsModel.setSystemStateStatus("workspaceTooLarge",a)}async _qualifySourceFolder(r,n){let[i,s]=await this._findRepoRoot(r),o,a;if(this._enableFileLimitsForSyncingPermission){a="full",this._logger.info(`Beginning ${a} qualification of source folder ${r}`);let c=new St.CancellationTokenSource;if(n.cancel=c,o=await this._sourceFolderDescriber.describe(r,i,e.ignoreSources(r)),c.token.isCancellationRequested){this._logger.info(`Cancelled qualification of source folder ${r}`);return}n.cancel=void 0,c.dispose()}else a="phony",this._logger.info(`Beginning ${a} qualification of source folder ${r} per feature flag`),o={trackable:!0,trackableFiles:0,uploadedFraction:1};let l={...o,repoRoot:i,isRepo:s};n.folderQualification=l,this._syncingPermissionTracker.syncingPermissionDenied?this._logger.info(`Finished ${a} qualification of source folder ${r}: syncing disabled for workspace`):l.trackable?(this._logger.info(`Finished ${a} qualification of source folder ${r}: trackable files: ${l.trackableFiles}, uploaded fraction: ${l.uploadedFraction}, is repo: ${l.isRepo}`),l.trackableFiles>this._maxTrackableFilesWithoutPermission?this._logger.info(`Requesting syncing permission because source folder has more than ${this._maxTrackableFilesWithoutPermission} files`):this._verifyFolderIsSourceRepo&&!l.isRepo?this._logger.info("Requesting syncing permission because source folder does not appear to be a source repo"):l.uploadedFraction<this._minUploadedFractionWithoutPermission?this._logger.info(`Requesting syncing permission because source folder has less than ${this._minUploadedFractionWithoutPermission*100}% of files uploaded`):(n.syncingPermission="granted",this._syncingPermissionTracker.addImplicitlyPermittedFolder(r))):this._logger.info(`Finished ${a} qualification of source folder ${r}: folder not trackable; too large`),this._kickSourceFolderReconciler()}async _reconcileSourceFolders(){await this._syncingPermissionTracker.persistCurrentPermission();let r=this.syncingEnabledState==="disabled",n=new Map;for(let[s,o]of this._trackedSourceFolders){let a=this._registeredSourceFolders.get(s),l;if(a===void 0)l="source folder has been removed";else if(r)l="syncing is disabled";else if(a.containingFolderRoot!==void 0)l=`source folder is nested inside folder ${a.containingFolderRoot}`;else if(a.isHomeDir)l="source folder is a home directory";else if(a.folderQualification?.trackable===!1)l="source folder is too large";else{let c=tl(a);c==="permission denied"?l="syncing permission denied for this source folder":c==="permission needed"?l="syncing permission not yet granted for this source folder":c==="qualifying"&&(l="source folder is being qualified")}l!==void 0&&n.set(s,[o,l])}let i=new Map;for(let[s,o]of this._registeredSourceFolders){if(tl(o)!=="trackable")continue;let l=this._trackedSourceFolders.get(s);l===void 0&&(l={folderName:o.folderName,folderSpec:(0,ec.cloneDeep)(o),cancel:new St.CancellationTokenSource,sourceFolder:void 0,logger:j(`WorkspaceManager[${o.folderName}]`)},i.set(s,l))}for(let[s,[o,a]]of n)o.logger.info(`Stop tracking: ${a}`),this._trackedSourceFolders.delete(s),this._stopTracking(o);for(let[s,o]of i)o.logger.info("Start tracking"),this._trackedSourceFolders.set(s,o),this._startTracking(s,o);return Promise.resolve()}async _startTracking(r,n){let i=new ZN("Startup metrics"),s=n.cancel,o=await this._createSourceFolder(r,n,s.token);if(s.token.isCancellationRequested){n.logger.info("Cancelled in-progress creation of source folder"),o?.dispose();return}if(i.charge("create SourceFolder"),s.dispose(),o===void 0||this._stopping){n.logger.info("Stopped tracking source folder");return}n.sourceFolder=o;let a=n.folderName,l=o.folderId,c=await SIe(a,o.cacheDirPath);if(i.charge("read MtimeCache"),o.stopped){n.logger.info("Stopped tracking source folder");return}for(let[f,p]of c)this._pathMap.insert(l,f,"File",e.defaultPathAccept),this._pathMap.update(l,f,0,p.name,p.mtime);i.charge("pre-populate PathMap");let u=new Nc;try{o._newlyTracked=c.size===0,u.add({dispose:()=>o._newlyTracked=!1});let f=await this._refreshSourceFolder(o,i);if(f===void 0||o.stopped)return;i.charge("enumerate"),o.setInitialEnumerationComplete(),this._folderEnumeratedEmitter.fire();let p=this._pathMap.onDidChangePathStatus(l);if(p===void 0)return;o.addDisposable(p(m=>{this._sourceFolderContentsChangedEmitter.fire(r)}),!0),o.addDisposable(p(m=>{this._reportSyncingProgress(o)})),o.addDisposable(o.diskFileManager.onDidChangeInProgressItemCount(()=>this._reportSyncingProgress(o))),this._reportSyncingProgress(o),this._sourceFoldersChangedEmitter.fire(),await o.diskFileManager.awaitQuiesced(),o.setInitialSyncComplete(),this._folderSyncedEmitter.fire(),i?.charge("await DiskFileManager quiesced");let g=new b2(a,o.cacheDirPath);this._pathMap.enablePersist(l,g,e.pathMapPersistFrequencyMs),i.charge("enable persist"),this._reportSourceFolderStartup(n.logger,o,i,f),this._onboardingSessionEventReporter.reportEvent("finished-syncing")}finally{u.dispose(),this._reportSyncingProgress(o)}}async _createSourceFolder(r,n,i){let s=n.folderName,o=new Nc,a=new Nc,l=n.folderSpec.folderType===1?void 0:n.folderSpec.workspaceFolder,[c,u]=await this._findRepoRoot(r);if(i.isCancellationRequested)return;let f=this._pathMap.openSourceFolder(r,c);o.add(new St.Disposable(()=>this._pathMap.closeSourceFolder(f))),o.addAll(...this._openFileManager.startTrackingFolder(s,f));let p=new C2(s,this._apiServer,this._pathHandler,this._pathMap);o.add(p);let g=n.folderSpec.folderType===0&&this._vcsWatcher!==void 0?await Ex(r):void 0,m=await this._migrateMtimeCache(r,n);return new E9(s,r,c,l,g,f,p,m,o,a,n.logger)}async _migrateMtimeCache(r,n){let i=this._computeCacheDirPath(r);if(E2(i))return i;let s=this._computeCacheDirPath(n.folderName);if(!E2(s))return i;try{n.logger.info(`Migrating mtime cache for ${n.folderName} from "${s}" to "${i}"`),await wIe(s,i)}catch(o){n.logger.error(`Failed to migrate mtime cache for ${n.folderName} from "${s}" to "${i}": ${He(o)}`)}return i}_computeCacheDirPath(r){return e.computeCacheDirPath(r,this._storageUriProvider.storageUri)}static computeCacheDirPath(r,n){let i=hs(n),s=Wv(e._textEncoder.encode(r));return Mt(i,s)}async refreshSourceFolders(){this.requalifyLargeFolders();let r=Array.from(this._trackedSourceFolders.values()).map(n=>n.sourceFolder).filter(n=>n!==void 0).map(n=>n.enqueueSerializedOperation(async()=>{await this._refreshSourceFolder(n)}));try{await Promise.allSettled(r)}catch(n){this._logger.info(`One or more source folders failed to refresh: ${He(n)}`)}}async _refreshSourceFolder(r,n){r.logger.debug(`Refreshing source folder ${r.folderName}`);let i=await this._createSourceFolderTracker(r,n);try{r.setTracker(i)}catch(l){r.logger.info(`Failed to install SourceFolderTracker for ${r.folderName}: ${He(l)}`),i.dispose();return}let s=this._trackVcsRepo(r,i.pathFilter);s!==void 0&&r.addDisposable(s);let o=this._trackFileEdits(r);return o!==void 0&&r.addDisposable(o),this._trackOpenDocuments(r),await this._enumerateSourceFolder(r,n)}async _enumerateSourceFolder(r,n){let i=r.tracker;if(i===void 0)return;let s=this._pathMap.nextEntryTS,o=await i.pathNotifier.enumeratePaths();if(!r.stopped)return n?.charge("enumerate paths"),this._pathMap.purge(r.folderId,s),n?.charge("purge stale PathMap entries"),o}async _createSourceFolderTracker(r,n){let i=new Nc,s=await t2(St.Uri.file(r.folderRoot),St.Uri.file(r.repoRoot),new oC(e.ignoreSources(r.folderRoot)),this._fileExtensions);n?.charge("create PathFilter");let o=this._createPathNotifier(r,s);if(i.add(o),n?.charge("create PathNotifier"),this._configListener.config.enableDebugFeatures){let a=new aN(St.Uri.file(r.repoRoot),r.folderName,r.folderId);if(i.add(a),a.listenForChanges(),this._vcsWatcher===void 0&&r.vcsDetails!==void 0){let l=new rw(r.folderName,r.folderId,r.vcsDetails);i.add(l),l.listenForChanges()}}return new _9(s,o,i)}_createPathNotifier(r,n){let i=new B2(r.folderName,r.folderRoot,r.repoRoot,n,r.workspaceFolder);return i.addDisposables(i.onDidFindPath(s=>{this._handlePathFound(r,s.relPath,s.fileType,s.acceptance)}),i.onDidCreatePath(s=>{this._handlePathCreated(r,s.relPath,s.fileType,s.acceptance)}),i.onDidChangePath(s=>{s.fileType==="File"&&this._handleFileChanged(r,s.relPath,s.acceptance)}),i.onDidDeletePath(s=>{this._handlePathDeleted(r,s)})),i}_trackFileEdits(r){if(r.logger.debug(`_trackFileEdits was called on ${r.folderName}`),this._fileEditManager===void 0){r.logger.debug("_fileEditManager is undefined");return}return r.logger.debug("_fileEditManager tracking the folder"),this._fileEditManager.startTracking(r.folderId,r.folderName,{directory:this._computeCacheDirPath(r.folderRoot)})}_trackVcsRepo(r,n){if(r.logger.debug(`_trackVcsRepo was called on ${r.folderName}`),this._vcsWatcher===void 0){r.logger.debug("_vcsWatcher is undefined");return}let i=r.vcsDetails;if(i===void 0){r.logger.debug("vcsDetails is undefined");return}if(!Yy(b9(i.root),r.repoRoot)){r.logger.info(`Not creating VCSRepoWatcher: vcs root ${hs(i.root)} !== repo root ${r.repoRoot}`);return}return r.logger.debug("_vcsWatcher tracking the folder"),this._vcsWatcher.startTracking(r.folderName,r.folderId,i,new Zm.FileChangeWatcherImpl(i.root,this.onDidChangeFile),new Zm.BlobNameRetrieverImpl(r.repoRoot,this,this._blobNameCalculator),new Zm.FileUtilsImpl(n))}async _findRepoRoot(r){let n;return n=await eM(r,e.augmentRootName),n===void 0&&(n=(await Ex(r))?.root),n!==void 0?[b9(n),!0]:[r,!1]}_trackOpenDocuments(r){let n=this._openFileManager.getTrackedPaths(r.folderId);for(let i of n)r.acceptsPath(i)||this._openFileManager.stopTracking(r.folderId,i);St.workspace.textDocuments.forEach(i=>{this._trackDocument(r,i)!==void 0&&this._fileEditManager?.addInitialDocument({folderId:r.folderId,relPath:r.relativePathName(i.uri.fsPath),document:i})}),St.workspace.notebookDocuments.forEach(i=>{this._trackDocument(r,i)})}_trackDocument(r,n){let i=Sf(n.uri);if(i===void 0)return;let s=r.relativePathName(i);if(s===void 0||!r.acceptsPath(s))return;let o=this._pathMap.getBlobName(r.folderId,s);return this._openFileManager.addOpenedDocument({folderId:r.folderId,relPath:s,document:n},o),s}_stopTracking(r){if(r.sourceFolder===void 0){let n=r.cancel;n.cancel(),n.dispose(),r.logger.info("Cancelled in-progress tracking of source folder")}else{let n=r.sourceFolder;r.sourceFolder=void 0,n.dispose(),r.logger.info("Stopped tracking source folder")}this._folderSyncedEmitter.fire(),this._folderEnumeratedEmitter.fire()}translateRange(r,n,i){let s=this._resolveAbsPath(r.absPath);if(s===void 0)return;let[o,a]=s;return this._openFileManager.translateRange(o.folderId,a,n,i)}getContext(){if(this._openFileManager===void 0||this._pathMap===void 0)return fC.empty();let r=this._openFileManager.getRecencySummary(this._completionServer.completionParams.chunkSize),n=new Set,i=new Map,s=new Map;for(let[y,v]of r.folderMap){let C=this._pathMap.getRepoRoot(y);C!==void 0&&s.set(C,v);for(let[E,w]of v){n.add(w);let B=this._pathMap.getBlobName(y,E);B!==void 0&&B!==w&&i.set(B,(i.get(B)??0)+1)}}let o=new Set;for(let[y,v]of i)n.has(y)||v===this._pathMap.getUniquePathCount(y)&&o.add(y);let a=new Array;for(let y of r.recentChunks){let v=this._pathMap.getRepoRoot(y.folderId);v!==void 0&&a.push({seq:y.seq,uploaded:y.uploaded,repoRoot:v,pathName:y.pathName,blobName:y.blobName,text:y.text,origStart:y.origStart,origLength:y.origLength,expectedBlobName:y.expectedBlobName})}let l=[],c=[];if(this._configListener.config.openFileManager.v2Enabled){let y=this._openFileManager.getAllEditEvents();for(let C of y.values())l.push(...C);let v=this._openFileManager.getAllPathToIndexedBlob();c=[];for(let C of v.values())for(let E of C.values())c.push(E)}let u=this._blobsCheckpointManager,f=u!==void 0&&this._useCheckpointManagerContext,p=f&&this._validateCheckpointManagerContext,g;if(!f||p){let y=new Set(n);for(let[E,w,B,R,N]of this._pathMap.pathsWithBlobNames())r.folderMap.get(E)?.has(B)||y.add(N);let v=Array.from(y),C=this._blobNamesToBlobs(v);if(g=new fC(C,a,s,l,c,this._lastChatResponse,v),!f)return g}let m=u.getContextAdjusted(n,o);return g!==void 0&&(u.validateMatching(g.blobs,m)||this._clientMetricsReporter.report({client_metric:"blob_context_mismatch",value:1})),new fC(m,a,s,l,c,this._lastChatResponse)}getContextWithBlobNames(){let r=this.getContext();return r.blobNames!==void 0?r:{...r,blobNames:this._blobsCheckpointManager.expandBlobs(r.blobs)}}recordChatReponse(r){this._lastChatResponse={seq:this._sequenceGenerator.next(),text:r}}_blobNamesToBlobs(r){return this._blobsCheckpointManager===void 0?{checkpointId:void 0,addedBlobs:r,deletedBlobs:[]}:this._blobsCheckpointManager.blobsPayload(r)}handleUnknownBlobs(r,n){if(n.length===0)return;let i=new Set(n),s=new Array;for(let[o,a]of r.trackedPaths)if(o!==void 0)for(let[l,c]of a)i.has(c)&&(s.push([c,new Le(o,l)]),i.delete(c));for(let o of i){let a=this._pathMap.getAnyPathName(o);a!==void 0&&s.push([o,a])}this._unknownBlobHandler.enqueue(s),this._vcsWatcher?.handleUnknownBlobs(n)}handleUnknownCheckpoint(r,n){this._logger.info(`received checkpoint not found for request id ${r}`),this._blobsCheckpointManager.resetCheckpoint(),this._blobsCheckpointManager.updateBlob("")}notifyBlobMissing(r,n){let i=this._pathMap.reportMissing(n);if(i!==void 0){let o=this._getSourceFolder(i.rootPath);if(o!==void 0){o.diskFileManager.ingestPath(o.folderId,r.relPath);return}}let s=this._getSourceFolder(r.rootPath);s!==void 0&&this._openFileManager.handleMissingBlob(s.folderId,r.relPath,n)}_getSourceFolder(r){return this._trackedSourceFolders.get(r)?.sourceFolder}resolvePathName(r){let n=typeof r=="string"?r:Sf(r);if(n===void 0)return;let i=this._resolveAbsPath(n);if(i===void 0)return;let[s,o]=i;return new Le(s.repoRoot,o)}getFolderRoot(r){let n=typeof r=="string"?r:Sf(r);if(n===void 0)return;let i=this._resolveAbsPath(n);if(i===void 0)return;let[s,o]=i;return s.folderRoot}safeResolvePathName(r){let n=typeof r=="string"?r:Sf(r);if(n===void 0)return;let i=this._resolveAbsPath(n);if(i===void 0)return new Le("",n);let[s,o]=i;return new Le(s.repoRoot,o)}_resolveAbsPath(r){for(let[n,i]of this._trackedSourceFolders){if(i.sourceFolder===void 0)continue;let s=i.sourceFolder.relativePathName(r);if(s!==void 0)return[i.sourceFolder,s]}}hasFile(r){let[n,i]=this._resolveAbsPath(r.absPath)??[void 0,void 0];return n===void 0||i===void 0?!1:this._pathMap.hasFile(n.folderId,r.relPath)}getBlobName(r){let[n,i]=this._resolveAbsPath(r.absPath)??[void 0,void 0];if(!(n===void 0||i===void 0))return this._openFileManager.getBlobName(n.folderId,r.relPath)??this._pathMap.getBlobName(n.folderId,r.relPath)}getAllPathNames(r){return this._pathMap.getAllPathNames(r)}getAllQualifiedPathInfos(r){return this._pathMap.getAllQualifiedPathInfos(r)}getAllQualifiedPathNames(r){return this._pathMap.getAllQualifiedPathNames(r)}getAllPathInfo(r){return this._pathMap.getAllPathInfo(r)}_handlePathFound(r,n,i,s){let o=r.folderId;this._pathMap.insert(o,n,i,s),i==="File"&&s.accepted&&r.diskFileManager.ingestPath(o,n)}_handlePathCreated(r,n,i,s){let o=r.folderId;if(this._pathMap.insert(o,n,i,s),!!s.accepted){if(i==="File")r.diskFileManager.ingestPath(r.folderId,n),this._emitFileNotification(o,n,"disk");else if(i==="Directory"){let a=r.tracker?.pathFilter;if(a===void 0)return;r.enqueueSerializedOperation(()=>this._handleDirectoryCreated(r,n,a))}}}_handleFileChanged(r,n,i){let s=r.folderId;this._pathMap.insert(s,n,"File",i),i.accepted&&(r.diskFileManager.ingestPath(s,n),this._emitFileNotification(s,n,"disk"))}_handlePathDeleted(r,n){let i=r.folderId,s=this._pathMap.getPathInfo(i,n);if(s===void 0)return;this._deletePath(r.folderId,n);let[o,a]=s;if(!a.accepted)return;o==="Directory"?this._handleDirectoryRemoved(r,n):o==="File"&&this._emitFileNotification(i,n,"disk");let l=new Le(r.folderRoot,n);this._fileDeletedEmitter.fire({folderId:i,relPath:n,qualifiedPathName:l})}_deletePath(r,n){this._pathMap.remove(r,n)}async _handleDirectoryCreated(r,n,i){r.logger.info(`Directory created: ${n}`);let s=St.Uri.file(r.repoRoot),o=new lC(r.folderName,St.Uri.joinPath(s,n),s,i);for await(let[a,l,c,u]of o)this._handlePathFound(r,l,c,u)}_handleDirectoryRemoved(r,n){r.logger.info(`Directory removed: ${n}`);let i=r.folderId,s=new Array;for(let[o]of this._pathMap.pathsInFolder(i))Jh(n,o)!==void 0&&s.push(o);for(let o of s)this._deletePath(i,o)}_notifyActiveEditorChanged(r){let n=r?.document,i=this._uriToPathInfo(n?.uri);if(i===void 0){this._openFileManager.loseFocus();return}let[s,o]=i,a=this._pathMap.getBlobName(s,o);this._openFileManager.addOpenedDocument({folderId:s,relPath:o,document:n},a)}_notifyTextDocumentChanged(r){let n=this._uriToPathInfo(r.document.uri);if(n===void 0)return;let[i,s]=n;this._openFileManager.handleChangedDocument({folderId:i,relPath:s,event:r}),this._emitFileNotification(i,s,"buffer"),this._textDocumentChangedEmitter.fire({folderId:i,relPath:s,event:r})}_notifyTextDocumentOpened(r){let n=this._uriToPathInfo(r.uri);if(n===void 0)return;let[i,s]=n;this._textDocumentOpenedEmitter.fire({folderId:i,relPath:s,document:r})}_notifyTextDocumentClosed(r){let n=this._uriToPathInfo(r.uri);if(n===void 0)return;let[i,s]=n;this._textDocumentClosedEmitter.fire({folderId:i,relPath:s,document:r})}_notifyNotebookDocumentChanged(r){let n=this._uriToPathInfo(r.notebook.uri);if(n===void 0)return;let[i,s]=n;this._openFileManager.handleChangedDocument({folderId:i,relPath:s,event:r}),this._emitFileNotification(i,s,"buffer")}_uriToPathInfo(r){if(r===void 0)return;let n=Sf(r);if(n===void 0)return;let i=this._resolveAbsPath(n);if(i===void 0)return;let[s,o]=i;if(s.acceptsPath(o))return[s.folderId,o]}_notifyWillRenameFile(r){r.files.forEach(n=>{let i=this._resolveAbsPath(n.oldUri.fsPath),s=this._resolveAbsPath(n.newUri.fsPath);if(i===void 0||s===void 0)return;let[o,a]=i,[l,c]=s;if(o.folderId!==l.folderId){this._logger.debug(`[WARN] Rename should not cause a file to move between source folders.     old file: ${i[1]}     new file: ${s[1]}    old source folder: ${o.folderName}     new source folder: ${l.folderName}`);return}this._fileWillRenameEmitter.fire({folderId:o.folderId,oldRelPath:a,newRelPath:c,type:rf(n.oldUri.fsPath).type})})}_notifyDidRenameFile(r){r.files.forEach(n=>{let i=this._resolveAbsPath(n.oldUri.fsPath),s=this._resolveAbsPath(n.newUri.fsPath);if(i===void 0||s===void 0)return;let[o,a]=i,[l,c]=s,u=new Le(o.folderRoot,a),f=new Le(l.folderRoot,c);this._fileDidMoveEmitter.fire({oldQualifiedPathName:u,newQualifiedPathName:f})})}_notifyDocumentClosed(r){let n=r.uri,i=Sf(n);if(i===void 0)return;let s=this._resolveAbsPath(i);if(s===void 0)return;let[o,a]=s;this._openFileManager.handleClosedDocument({folderId:o.folderId,relPath:a,document:r})}_emitFileNotification(r,n,i){this._fileChangedEmitter.fire({folderId:r,relPath:n,origin:i})}getTabSwitchEvents(){return this._tabWatcher?.getTabSwitchEvents()}getFileEditEvents(r=void 0){if(this._fileEditManager===void 0)return[];let n;if(r!==void 0){let i=this._trackedSourceFolders.get(r)?.sourceFolder;if(i===void 0)return[];n=i.folderId}else n=this._fileEditManager.findFolderIdWithMostRecentChanges();return n===-1?[]:this._fileEditManager.findEventsForFolder(n)}getMostRecentlyChangedFolderRoot(){if(this._fileEditManager===void 0)return;let r=this._fileEditManager.findFolderIdWithMostRecentChanges();if(r!==-1){for(let[n,i]of this._trackedSourceFolders)if(i.sourceFolder?.folderId===r)return n}}getBestFolderRoot(){return St.window.activeTextEditor?this.getFolderRoot(St.window.activeTextEditor?.document.uri):this.getMostRecentlyChangedFolderRoot()}findBestWorkspaceRootMatch(r){let n=nG(r).slice(0,-1),i="",s;for(let c of n){i=Mt(i,c);let u=this.getAllQualifiedPathInfos(i).filter(f=>f.isAccepted);if(u.length===0)break;s=u[0]}if(s!==void 0)return s;let o=this.getMostRecentlyChangedFolderRoot(),a=o?this.getRepoRootForFolderRoot(o):void 0;if(a!==void 0)return{qualifiedPathName:new Le(a,""),fileType:"Directory",isAccepted:!1};let l=this.listSourceFolders().filter(c=>c.type===0&&c.syncingEnabled);if(l.length>0)return{qualifiedPathName:new Le(l[0].folderRoot,""),fileType:"Directory",isAccepted:!1}}getRepoRootForFolderRoot(r){return this._trackedSourceFolders.get(r)?.sourceFolder?.repoRoot}getVCSWatchedFolderIds(){return this?._vcsWatcher?.getWatchedFolderIds()??[]}async getVCSChange(){return this._vcsWatcher===void 0?{commits:[],workingDirectory:[]}:await this._vcsWatcher.getChanges()}getEnableCompletionFileEditEvents(){return this._featureFlagManager.currentFlags.enableCompletionFileEditEvents}async updateStatusTrace(r){r.addSection("Syncing permission parameters"),r.addValue("enableFileLimitsForSyncingPermission",this.enableFileLimitsForSyncingPermission),r.addValue("maxTrackableFiles",this.maxTrackableFiles),r.addValue("maxTrackableFilesWithoutPermission",this.maxTrackableFilesWithoutPermission),r.addValue("minUploadedFractionWithoutPermission",this.minUploadedFractionWithoutPermission),r.addValue("minUploadedFractionWithoutPermission as a percentage",this.minUploadedFractionWithoutPermission*100),r.addValue("verifyFolderIsSourceRepo",this.verifyFolderIsSourceRepo),r.addValue("refuseToSyncHomeDirectories",this.refuseToSyncHomeDirectories);let n=0;for(let[s,o]of this._registeredSourceFolders){if(n++,r.addSection(`Source folder: ${s}`),o.folderType===0?r.addValue("Folder type","vscode workspace folder"):r.addValue("Folder type","external folder"),o.containingFolderRoot!==void 0){r.addValue("Not tracked: nested folder. Containing folder",o.containingFolderRoot);continue}if(o.isHomeDir){r.addLine("Not tracked: home directory");continue}if(o.folderQualification!==void 0&&!o.folderQualification.trackable){r.addLine("Not tracked: folder is too large");continue}let a=tl(o);if(a==="permission denied"){r.addLine("Not tracked: syncing permission denied");continue}if(a==="permission needed"){r.addLine("Not tracked: syncing permission not yet granted");continue}let l=this._trackedSourceFolders.get(s)?.sourceFolder;if(l===void 0){r.addLine("Tracking in progress");continue}r.addValue("Folder root",s),r.addValue("Repo root",l.repoRoot),r.addValue("Mtime cache dir",l.cacheDirPath),l.diskFileManager.itemsInFlight===0||r.addValue("Source folder startup","in progress"),r.addValue("Source folder startup","complete"),r.addValue("Tracked files",this._pathMap.trackedFileCount(l.folderId)),r.addValue("Syncing backlog size",l.diskFileManager.itemsInFlight)}if(n===0&&r.addSection("Source folders: no open source folders"),r.addSection("Workspace status"),!this.initialFoldersSynced)r.addValue("Workspace startup","in progress");else{r.addValue("Workspace startup","complete");let s=this.getContextWithBlobNames();r.addValue("Blobs in context",s.blobNames.length);let o=r.savePoint();try{let l=0;for(let c=0;c<s.blobNames.length;c+=1e3){r.rollback(o),r.addLine(`Verifying blob names... ${c} / ${s.blobNames.length} `),r.publish();let u=await this._apiServer.findMissing(s.blobNames.slice(c,c+1e3));l+=u.unknownBlobNames.length}r.rollback(o),r.addValue("Unknown blob names",l)}catch(a){r.rollback(o),r.addError(`Unable to verify blob names: ${a}`)}}n===0&&r.addLine("No source folders in workspace");let i=this._blobsCheckpointManager;if(i!==void 0){let s=i.getContext(),o=i.getCheckpointedBlobNames().length;r.addValue("Current checkpoint",s.checkpointId),r.addValue("Blobs in current checkpoint",o),r.addValue("Added blobs not in checkpoint",s.addedBlobs.length),r.addValue("Deleted blobs not in checkpoint",s.deletedBlobs.length)}}_reportSourceFolderStartup(r,n,i,s){let o=n.diskFileManager.metrics;r.info("Tracking enabled"),r.info(s.format()),r.info(o.format()),r.info(i.format())}_reportWorkspaceStartup(r){this._logger.info(`Workspace startup complete in ${r} ms`)}trackedSourceFolderNames(){return Array.from(this._registeredSourceFolders).filter(([r,n])=>tl(n)==="trackable").map(([r,n])=>({folderRoot:r}))}getSourceFoldersReportDetails(){let r=this.listSourceFolders(),n=(0,ec.mapValues)((0,ec.groupBy)(r,f=>vv[f.type]),f=>f.length),i=(0,ec.mapValues)((0,ec.groupBy)(r,f=>vv[f.type]),f=>(0,ec.uniq)(f.map(p=>this.getRepoRootForFolderRoot(p.folderRoot))).length),s=f=>f.type===0||f.type===1,o=f=>f.type===2||f.type===3,a=f=>f.type===4,l=r.filter(f=>s(f)).map(f=>f.trackedFileCount),c=r.filter(f=>o(f)).length,u=(0,ec.mapValues)((0,ec.groupBy)(r.filter(f=>a(f)),f=>f.reason),f=>f.length);return{workspaceStorageUri:this._storageUriProvider.storageUri?.toString(),folderCountByType:n,repoRootCountByType:i,trackedFileCount:l,nestedFolderCount:c,untrackedCountByReason:u}}listSourceFolders(){if(this._syncingPermissionTracker.syncingPermissionDenied)return[];let r=this.syncingEnabledState==="disabled",n=new Array;for(let[i,s]of this._registeredSourceFolders){if(s.containingFolderRoot!==void 0){let f=s.folderType===0?2:3;n.push({type:f,name:s.folderName,syncingEnabled:!1,folderRoot:i,containingFolderRoot:s.containingFolderRoot});continue}if(s.isHomeDir){n.push({type:4,name:s.folderName,syncingEnabled:!1,folderRoot:i,reason:"home directory"});continue}if(s.folderQualification!==void 0&&!s.folderQualification.trackable){n.push({type:4,name:s.folderName,syncingEnabled:!1,folderRoot:i,reason:"too large"});continue}if(s.syncingPermission==="denied"){n.push({type:4,name:s.folderName,syncingEnabled:!1,folderRoot:i,reason:"permission not granted"});continue}let o=s.folderType===0?0:1,a=this._trackedSourceFolders.get(i)?.sourceFolder;if(!a?.initialEnumerationComplete){let f=!r&&s.syncingPermission==="granted";n.push({name:s.folderName,type:o,folderRoot:i,syncingEnabled:f,trackedFileCount:0,containsExcludedItems:!1,containsUnindexedItems:!1,enumerationState:0});continue}let l=!r&&s.syncingPermission==="granted",c=!1,u=!1;for(let[f,p,g,m]of this._pathMap.pathsInFolder(a.folderId))g||(c=!0),p==="File"&&g&&!m&&(u=!0);n.push({name:s.folderName,type:o,folderRoot:i,syncingEnabled:l,trackedFileCount:this._pathMap.trackedFileCount(a.folderId),containsExcludedItems:c,containsUnindexedItems:u,enumerationState:1})}return n}listChildren(r,n){if(this._syncingPermissionTracker.syncingPermissionDenied)return[];let s=this._trackedSourceFolders.get(r)?.sourceFolder;if(s===void 0)throw new NF;if(!s.initialEnumerationComplete)throw new PF;let o=Mt(r,n),a=Ol(s.repoRoot,o),l=new Map,c=new Map,u=new Set,f=new Set,p=s.folderId;for(let[g,m,y,v,C]of this._pathMap.pathsInFolder(p)){let E=Jh(a,g);if(E===void 0)continue;let w=nG(E);if(!(w.length===0||w[0].length===0))if(w.length===1)l.set(w[0],{type:m,included:y,indexed:v,reason:C});else{let B=w[0];if(!y)u.add(B);else if(m==="File"){let R=c.get(B)??0;c.set(B,R+1),v||f.add(B)}}}return Array.from(l.entries()).map(([g,m])=>{let y={name:g,folderRoot:r,relPath:Mt(n,g),included:m.included,reason:m.reason};return m.type==="File"?{...y,type:"File",indexed:m.indexed}:m.type==="Directory"?{...y,type:"Directory",trackedFileCount:c.get(g)??0,containsExcludedItems:u.has(g),containsUnindexedItems:f.has(g)}:{...y,type:"Other"}})}clearFileEdits(){this._fileEditManager?.clearAll({clearLastKnown:!1})}unitTestOnlyGetRepoRoot(r){let n=this._trackedSourceFolders.get(r);if(n!==void 0)return n.sourceFolder?.repoRoot}unitTestOnlySourceFolderBacklog(r){let n=this._trackedSourceFolders.get(r);if(n===void 0)return;let i=n.sourceFolder;if(i!==void 0&&i.initialEnumerationComplete)return i.diskFileManager.itemsInFlight}};var QIe=q(require("vscode"));var F2=class extends X{constructor(r,n){super();this.actionsModel=r;this.workspaceManager=n;this.setInitializing(),this.addDisposable(n),this.checkWorkspaceSelected(),this.checkWorkspacePopulated()}checkWorkspaceSelected(){!!QIe.workspace.workspaceFolders?.length?this._setWorkspaceSelected():this._setWorkspaceNotSelected()}async checkWorkspacePopulated(){if(await this.workspaceManager.awaitInitialFoldersEnumerated(),this._anyFilesExist()){this._setWorkspacePopulated();return}for(this._setWorkspaceEmpty();!this._anyFilesExist();)await jm(this.workspaceManager.onDidChangeSyncingProgress);this._setWorkspacePopulated()}_anyFilesExist(){return!!this.workspaceManager.getSyncingProgress().some(n=>n.progress?.trackedFiles!==void 0&&n.progress.trackedFiles>0)}setInitializing(){this.actionsModel.setSystemStateStatus("workspacePopulated","initializing"),this.actionsModel.setSystemStateStatus("workspaceSelected","initializing")}_setWorkspaceEmpty(){this.actionsModel.setSystemStateStatus("workspacePopulated","incomplete")}_setWorkspacePopulated(){this.actionsModel.setSystemStateStatus("workspacePopulated","complete")}_setWorkspaceSelected(){this.actionsModel.setSystemStateStatus("workspaceSelected","complete")}_setWorkspaceNotSelected(){this.actionsModel.setSystemStateStatus("workspaceSelected","incomplete")}};var Hm=class e extends X{constructor(r,n,i,s,o,a,l,c,u,f,p,g,m,y,v,C,E,w){super();this._extensionContext=r;this._globalState=n;this._augmentConfigListener=i;this._apiServer=s;this._auth=o;this._recentCompletions=a;this._recentInstructions=l;this._recentNextEditResults=c;this._recentChats=u;this._nextEditWebViewEvent=f;this._onExtensionUpdateEvent=p;this._mainPanelProvider=g;this._changeWebviewAppEvent=m;this._actionsModel=y;this._syncingEnabledTracker=v;this._chatExtensionEvent=C;this._onboardingSessionEventReporter=E;this._assetManager=w;if(this._statusBar=new kN,r.subscriptions.push(this._statusBar),this.workTimer=new ZQ,this.featureFlagManager=new Fk({fetcher:this._fetchFeatureFlags.bind(this),refreshIntervalMSec:30*60*1e3},this._augmentConfigListener),this._completionAcceptanceReporter=new WQ(s,this._onboardingSessionEventReporter),this._codeEditReporter=new HQ(s),this._nextEditResolutionReporter=new KQ(s),this._nextEditSessionEventReporter=new zQ(s),this.nextEditConfigManager=new _1(this._augmentConfigListener,this.featureFlagManager,this._globalState),this._clientMetricsReporter=new VQ(s),this._completionTimelineReporter=new GQ(s),this._extensionEventReporter=new YQ(s),this.guidelinesWatcher=new tg(this._augmentConfigListener,this.featureFlagManager,this._clientMetricsReporter),this._toolUseRequestEventReporter=new eI,this.disposeOnDisable.push(this.guidelinesWatcher),this.addDisposable(new Ye.Disposable(()=>this.disable())),this._completionsModel=new xQ(this,this._augmentConfigListener,this._clientMetricsReporter),!Ks("1.96.0"))try{this._logger.info("Starting macCA"),(0,OIe.addToGlobalAgent)(),this._logger.info("macCa Done")}catch(B){this._logger.error("Exception loading mac-ca certs:",B)}}static augmentRootName=".augmentroot";static contentScheme="augment";static displayStatusUri=Ye.Uri.from({scheme:this.contentScheme,path:"Augment Extension Status"});static modelConfigBackoffMsecMax=3e4;keybindingWatcher=void 0;_completionServer=void 0;workspaceManager=void 0;syncingStatusReporter=void 0;fuzzyFsSearcher=void 0;fuzzySymbolSearcher=void 0;_toolsModel=void 0;get toolsModel(){return this._toolsModel}_toolConfigStore=void 0;get toolConfigStore(){return this._toolConfigStore}_agentCheckpointManager=void 0;guidelinesWatcher;_statusBar;_initState;workTimer;_enableCancel;_defaultModel;_modelInfo;_blobNameCalculator;_nextEditRequestManager;_suggestionManager;get modelInfo(){return this._modelInfo}userTier="unknown";_availableModels=[];_languages=[];get languages(){return this._languages}featureFlagManager;_onTextDocumentDidChange=new Ye.EventEmitter;_statusTrace;_completionDisposables=[];_completionAcceptanceReporter;_codeEditReporter;_nextEditResolutionReporter;_nextEditSessionEventReporter;nextEditConfigManager;_clientMetricsReporter;_completionTimelineReporter;_extensionEventReporter;_dataCollector;_editorNextEdit;_backgroundNextEdit;_globalNextEdit;_diagnosticsManager;_nextEditVSCodeToWebviewMessage=new Ye.EventEmitter;_openChatHintManager;enabled=!1;_enableState;disposeOnDisable=[];_inlineCompletionProvider;_completionsModel;_logger=j("AugmentExtension");_chatModel;_currentChatExtensionEventDisposable;_toolUseRequestEventReporter;get sessionId(){return this._apiServer.sessionId}get chatModel(){return this._chatModel}get editorNextEdit(){return this._editorNextEdit}get completionServer(){return this._completionServer}get completionsModel(){return this._completionsModel}get agentCheckpointManager(){return this._agentCheckpointManager}get enableInProgress(){return this._enableCancel!==void 0}get ready(){return this.enabled&&!this.enableInProgress}async enable(){if(this.enabled||this.enableInProgress)return;let r=new Ye.CancellationTokenSource;this._enableCancel=r;try{await this._enable(r.token)}catch(n){if(this._logger.info(`Unable to enable extension: ${He(n)}`),process.env.JEST_WORKER_ID)throw n}finally{r.dispose(),this._enableCancel=void 0}}_syncLastEnabledExtensionVersion(){if(this._extensionContext.extensionMode===Ye.ExtensionMode.Development)return!1;let r=this._extensionContext.extension.packageJSON.version;return this._extensionVersion===r?!1:(this._globalState.update("lastEnabledExtensionVersion",r),this._onExtensionUpdateEvent.fire(),!0)}get _extensionVersion(){return this._globalState.get("lastEnabledExtensionVersion")||""}async _enable(r){(0,PIe.assert)(!this.enabled),this._initState?.dispose(),this._enableState?.dispose();let n=Date.now();if(this.disposeOnDisable.push(new jQ(this._clientMetricsReporter,this.workTimer,{periodMs:100,debugThresholdMs:50,infoThresholdMs:2e3})),this._auth.useOAuth){if(!await this._auth.getSession()){this._enableState=this._statusBar.setState(Gwe);return}}else{if(!this._augmentConfigListener.config.apiToken){this._logger.warn("No API token is configured"),this._enableState=this._statusBar.setState(Ywe);return}if(!this._augmentConfigListener.config.completionURL){this._logger.warn("No completion URL is configured"),this._enableState=this._statusBar.setState(Kwe);return}}let i=this._statusBar.setState(zwe),s,o=new Map;try{if(s=await this._getModelConfig(r),s.models.length===0)throw new _Q;this.userTier=s.userTier,Ye.commands.executeCommand("setContext","augment.userTier",this.userTier),this._defaultModel=s.defaultModel,this._languages=s.languages,this._availableModels=s.models.map(ce=>`${ce.name} - ${ce.internalName}`);let U=this._augmentConfigListener.config.modelName||s.defaultModel;if(this._modelInfo=s.models.find(ce=>[ce.name,ce.internalName].includes(U)||ce.name===(0,LIe.createHash)("sha256").update(U).digest("hex")),this._modelInfo===void 0)throw new jx(U);this.featureFlagManager.update(s.featureFlags);for(let ce of s.models)o.set(ce.name,ce);this._initState?.dispose()}catch(Y){if(Sr.isAPIErrorWithStatus(Y,$e.unauthenticated)){this._auth.useOAuth?this._enableState=this._statusBar.setState(Jwe):this._enableState=this._statusBar.setState(jwe);return}else if(Y instanceof Sd){this._enableState=this._statusBar.setState(Zwe);return}else if(Y instanceof Ye.CancellationError)return;let U=He(Y);throw this._logger.error(`Failed to get model config: ${U}`),this._initState=this._statusBar.setState(n6),Y}finally{i.dispose()}this.featureFlagManager.currentFlags.enableViewTextDocument&&(this._logger.debug("Enabling viewTextDocument background file scheme"),this.disposeOnDisable.push(a0e()));let a=new GN(this._extensionContext.workspaceState);this.disposeOnDisable.push(a),this._completionServer=new CQ(this._apiServer,this._modelInfo.completionTimeoutMs,this._modelInfo.suggestedPrefixCharCount,this._modelInfo.suggestedSuffixCharCount);let l=this.featureFlagManager.currentFlags.maxUploadSizeBytes;this._blobNameCalculator=new sh(l),this.workspaceManager=new M2(this._actionsModel,new LN(this._extensionContext.workspaceState),a,this._extensionContext,this._apiServer,this._augmentConfigListener,this.featureFlagManager,this._clientMetricsReporter,this._completionServer,this._blobNameCalculator,l,this._syncingEnabledTracker,this._onboardingSessionEventReporter,s.languages),this.disposeOnDisable.push(this.workspaceManager);let c=(0,UIe.debounce)(()=>{let Y=this.workspaceManager?.getSourceFoldersReportDetails();Y!==void 0&&this._extensionEventReporter.reportSourceFolders(Y)},5e3);this.disposeOnDisable.push(this.workspaceManager.onDidEnumerateFolder(()=>c())),this.disposeOnDisable.push(this.workspaceManager.onDidChangeSourceFolders(()=>c())),this.syncingStatusReporter=new $N(this.featureFlagManager,this.workspaceManager),this.disposeOnDisable.push(this.syncingStatusReporter),this.disposeOnDisable.push(new ON(this._statusBar,this.syncingStatusReporter.onDidChangeSyncingStatus)),this.keybindingWatcher=new Yc(this._globalState),this.disposeOnDisable.push(this.keybindingWatcher),this._diagnosticsManager=new FQ,this.disposeOnDisable.push(this._diagnosticsManager);let u=new Gm(this._statusBar);this.disposeOnDisable.push(u);let f=new Km;this.disposeOnDisable.push(Twe(Y=>{Y.acceptedIdx>=0&&f.set(!0,Y.document)})),this.disposeOnDisable.push(f);let p=new iN;this.disposeOnDisable.push(p),this._suggestionManager=new SN(this.workspaceManager,this._nextEditSessionEventReporter),this.disposeOnDisable.push(this._suggestionManager),this._nextEditRequestManager=new xN(this._apiServer,this._augmentConfigListener,this.workspaceManager,this._diagnosticsManager,this._nextEditSessionEventReporter,this._clientMetricsReporter,this._blobNameCalculator,this._suggestionManager,this._recentNextEditResults,u,f,this.featureFlagManager),this.disposeOnDisable.push(this._nextEditRequestManager),this._editorNextEdit=new CN(this._extensionContext,this.workspaceManager,this._nextEditSessionEventReporter,this.keybindingWatcher,this._augmentConfigListener,this._suggestionManager,this._nextEditRequestManager,this._globalState,this.nextEditConfigManager,p,Y=>{this._nextEditWebViewEvent.fire({type:"next-edit-active-suggestion",data:Y})}),this.disposeOnDisable.push(this._editorNextEdit),this._globalNextEdit=new _N(this.workspaceManager,this._nextEditRequestManager,this._suggestionManager,this._augmentConfigListener,this._nextEditSessionEventReporter),this.disposeOnDisable.push(this._globalNextEdit);let g=[{text:this.featureFlagManager.currentFlags.enableInstructions?"Chat":"Open in Augment Chat",keyBindingId:Ji.commandID}];this.featureFlagManager.currentFlags.enableInstructions&&g.push({text:"Instruct",keyBindingId:av.commandID}),this._openChatHintManager=new nC(this._augmentConfigListener,this._extensionContext,this.keybindingWatcher,this.featureFlagManager,g),this._openChatHintManager.enable(),this.disposeOnDisable.push(this._openChatHintManager),this.fuzzyFsSearcher=new SM(this._globalState,this.workspaceManager,this.syncingStatusReporter.onDidChangeSyncingStatus),this.fuzzySymbolSearcher=new IM(this._globalState,this._augmentConfigListener,this.fuzzyFsSearcher,this.workspaceManager),this.disposeOnDisable.push(this.fuzzyFsSearcher),this.disposeOnDisable.push(this.fuzzySymbolSearcher),await d0e(this._extensionContext.storageUri,this._logger);let m=()=>{let Y=this._extensionContext.storageUri;if(Y)return Ye.Uri.joinPath(Y,"Augment-Memories").fsPath};TY(new bF(this.workspaceManager)),this.disposeOnDisable.push(new Ye.Disposable(()=>RY())),AK(new _F(this._apiServer,this.workspaceManager)),this.disposeOnDisable.push(new Ye.Disposable(()=>yK())),yY(this._assetManager),this.disposeOnDisable.push(new Ye.Disposable(()=>vY())),BK(new EF(this._extensionContext)),this.disposeOnDisable.push(new Ye.Disposable(()=>DK())),SK(new bx(this.featureFlagManager)),this.disposeOnDisable.push(new Ye.Disposable(()=>IK())),vK(new yF(this._extensionContext.extensionUri,this.workspaceManager,this._apiServer,this.keybindingWatcher,this.fuzzyFsSearcher,this.fuzzySymbolSearcher,this.workTimer)),this.disposeOnDisable.push(new Ye.Disposable(()=>bK())),this._agentCheckpointManager=new zS(new PS,m,Y=>Ye.workspace.onDidChangeTextDocument(U=>{let ce=this.workspaceManager?.safeResolvePathName(U.document.uri);if(!ce)return;let Ie={document:{qualifiedPathName:ce,getText:()=>U.document.getText()},contentChanges:U.contentChanges.map(Q=>({text:Q.text,range:Q.range?{start:{line:Q.range.start.line,character:Q.range.start.character},end:{line:Q.range.end.line,character:Q.range.end.character}}:void 0}))};Y(Ie)}),this.workspaceManager.onFileDeleted,this.workspaceManager.onFileDidMove),this.disposeOnDisable.push(this._agentCheckpointManager),this.disposeOnDisable.push(this.syncingStatusReporter.onDidChangeSyncingStatus(Y=>{Y.prevStatus!==void 0&&Y.prevStatus!=="done"&&Y.status==="done"&&this.featureFlagManager.currentFlags.memoriesParams.enable_initial_orientation&&setTimeout(()=>{if(this.workspaceManager===void 0)throw Error("Workspace manager is undefined");if(this._agentCheckpointManager===void 0)throw Error("Checkpoint manager is undefined");v0e(this._apiServer,this.workspaceManager,this.featureFlagManager,this._agentCheckpointManager,this._extensionContext.workspaceState)},3e3)})),this._toolsModel=new SB([],GCe(this._apiServer,this.workspaceManager,this._agentCheckpointManager,this.featureFlagManager,this._extensionContext.extensionUri,this._globalState,n),new GM(this._apiServer,this._augmentConfigListener),Y=>{Ye.window.showErrorMessage("Failed to start the MCP server. "+JSON.stringify(Y))},new bx(this.featureFlagManager),this._agentCheckpointManager,()=>oM(m),m,()=>this._toolUseRequestEventReporter,{userAgent:"Augment-VSCode/1.0",unsupportedSidecarTools:new Set([Hi.strReplaceEditor])}),TK(new TB(this._agentCheckpointManager,this._toolsModel)),this.disposeOnDisable.push(new Ye.Disposable(()=>RK())),this._toolConfigStore=new FN(this._globalState,this._toolsModel,()=>this._augmentConfigListener.config.mcpServers),this.disposeOnDisable.push(new Ye.Disposable(()=>{this._toolConfigStore=void 0})),this._toolConfigStore.updateSidecarMCPServers(),(async Y=>{let U=Y.memoriesAbsPath;if(U){let ce=Ye.Uri.file(U);try{await Gy(ce.fsPath)}catch{let Ie=qa(ce.fsPath);await Pl(Ie)||await Ll(Ie),await Ul(ce.fsPath,"")}}this.addDisposable(Ye.window.onDidChangeActiveTextEditor(async ce=>{await g0e(ce,m,this._globalState),await dG(ce,m,this._globalState)})),this.addDisposable(Ye.workspace.onDidChangeTextDocument(ce=>{m0e(ce,Ye.window.activeTextEditor,m,this._globalState,Y)})),this.addDisposable(h0e())})(this._toolsModel),this.addDisposable(this._augmentConfigListener.onDidChange(({newConfig:Y,previousConfig:U})=>{this._toolsModel&&((0,x9.default)(Y.mcpServers,U.mcpServers)||this._toolConfigStore?.updateSidecarMCPServers())}));let v=new Zy(this._globalState,this._apiServer,this.workspaceManager,this._recentChats,this.fuzzySymbolSearcher,this._assetManager,this.featureFlagManager,this._agentCheckpointManager);this._chatModel=v;let C=new UN(this._globalState,this.syncingStatusReporter),E=new BN,w=new Ux(v,o,this._apiServer,this.workspaceManager,this.keybindingWatcher,this._augmentConfigListener,this._extensionContext.extensionUri,this.featureFlagManager,this._clientMetricsReporter,this._actionsModel,this._syncingEnabledTracker,C,this.syncingStatusReporter,this._onboardingSessionEventReporter,this.fuzzyFsSearcher,this.fuzzySymbolSearcher,this._toolsModel,E,this._agentCheckpointManager,this.guidelinesWatcher,this._assetManager,this._globalState,this.workTimer);this._currentChatExtensionEventDisposable=this._chatExtensionEvent.event(w.onChatExtensionMessage),this.disposeOnDisable.push(this._currentChatExtensionEventDisposable),this._mainPanelProvider.changeApp(w);let B=this.workspaceManager,R=this.keybindingWatcher;this.disposeOnDisable.push(this._changeWebviewAppEvent.event(Y=>{let U,ce;switch(this._currentChatExtensionEventDisposable?.dispose(),Y){case"chat":U=new Ux(v,o,this._apiServer,B,R,this._augmentConfigListener,this._extensionContext.extensionUri,this.featureFlagManager,this._clientMetricsReporter,this._actionsModel,this._syncingEnabledTracker,C,this.syncingStatusReporter,this._onboardingSessionEventReporter,this.fuzzyFsSearcher,this.fuzzySymbolSearcher,this._toolsModel,E,this._agentCheckpointManager,this.guidelinesWatcher,this._assetManager,this._globalState,this.workTimer),this._mainPanelProvider.changeApp(U),ce=this._chatExtensionEvent.event(U.onChatExtensionMessage),this._currentChatExtensionEventDisposable=ce,this.disposeOnDisable.push(this._currentChatExtensionEventDisposable);break;case"sign-in":break;case"workspace-context":this._mainPanelProvider.changeApp(new qQ(B,this.featureFlagManager,this.workTimer));break;case"awaiting-syncing-permission":this._mainPanelProvider.changeApp(new LQ(this._actionsModel,this._apiServer,this._augmentConfigListener,this._syncingEnabledTracker,this._changeWebviewAppEvent,this.featureFlagManager,s.userTier));break;case"folder-selection":this._mainPanelProvider.changeApp(new UQ(this._onboardingSessionEventReporter));break;default:{let Ie=Y;throw new Error(`Unhandled app case: ${Ie}`)}}})),this.disposeOnDisable.push(this._augmentConfigListener.onDidChange(this._checkInlineCompletionsEnabled.bind(this))),this._checkInlineCompletionsEnabled(),this.disposeOnDisable.push(new Ye.Disposable(()=>this._disableInlineCompletions.bind(this)));{let Y,U,ce,Ie,Q,se,z,ie=(Pe,dt)=>{Y?.dispose(),U?.dispose(),ce?.dispose(),Q?.dispose(),Ie?.dispose(),se?.dispose(),z?.dispose(),Pe.completions.enableAutomaticCompletions||(U=this._statusBar.setState(Xwe)),Pe.enableDebugFeatures&&this.keybindingWatcher?(Q=new NQ(this.keybindingWatcher,this._inlineCompletionProvider),this.disposeOnDisable.push(Q)):Pe.completions.enableAutomaticCompletions&&this.keybindingWatcher&&(Ie=new QQ(this.keybindingWatcher,this._inlineCompletionProvider),this.disposeOnDisable.push(Ie)),se=Ye.languages.registerCodeActionsProvider("*",new v1),this.disposeOnDisable.push(se),Pe.enableUpload||(Y=this._statusBar.setState(eSe));let ve=Pe.enableDataCollection||s.featureFlags.enableHindsight;this._dataCollector&&!ve?(this._logger.debug("Disabling Hindsight Data"),this._dataCollector.dispose(),this._dataCollector=void 0):!this._dataCollector&&ve&&this.workspaceManager!==void 0&&(this._logger.debug("Enabling Hindsight Data"),this._dataCollector=new kQ(this._apiServer,this.workspaceManager,this._recentInstructions,this._recentCompletions,this._recentNextEditResults));let Rt=$x(Pe,this.featureFlagManager.currentFlags.vscodeNextEditMinVersion),Zt=dt&&$x(dt,this.featureFlagManager.currentFlags.vscodeNextEditMinVersion);if(Rt&&!Zt)if(this.workspaceManager&&this.keybindingWatcher&&this._suggestionManager&&this._nextEditRequestManager)try{this._backgroundNextEdit=new nN(this.workspaceManager,this._nextEditSessionEventReporter,this.keybindingWatcher,this._augmentConfigListener,this._suggestionManager,this._nextEditRequestManager,this._globalState,this.nextEditConfigManager,p),this.disposeOnDisable.push(this._backgroundNextEdit),this._nextEditSessionEventReporter.reportEventWithoutIds("initialization-success","validation-expected")}catch(ue){this._logger.error("Error initializing background next edit: ",ue),this._nextEditSessionEventReporter.reportEventWithoutIds("initialization-failure","error"),this._apiServer.reportError(null,"background_next_edit_initialization_failure",ue instanceof Error?ue.stack||ue.message:String(ue),[])}else{this._logger.error("Failed to enable background next edit generation"),this._nextEditSessionEventReporter.reportEventWithoutIds("initialization-skip","validation-unexpected");let ue=[["this.workspaceManager",this.workspaceManager],["this.keybindingWatcher",this.keybindingWatcher],["this._suggestionManager",this._suggestionManager],["this._nextEditRequestManager",this._nextEditRequestManager]].map(wr=>wr.join("=")).join(", ");this._apiServer.reportError(null,"background_next_edit_initialization_failure",`Background next edit initialization failed because ${ue}`,[])}else this._backgroundNextEdit&&!Rt?(this._backgroundNextEdit.dispose(),this._backgroundNextEdit=void 0,this._nextEditSessionEventReporter.reportEventWithoutIds("disposed","validation-expected")):!Rt&&!Zt&&this._nextEditSessionEventReporter.reportEventWithoutIds("initialization-skip","validation-expected");let tr=Kl(Pe,this.featureFlagManager.currentFlags.vscodeNextEditMinVersion??"");tr&&dt&&Pe.nextEdit.enableBackgroundSuggestions!==dt.nextEdit.enableBackgroundSuggestions&&this._nextEditSessionEventReporter.reportEventWithoutIds(Pe.nextEdit.enableBackgroundSuggestions?"background-suggestions-enabled":"background-suggestions-disabled","unknown"),tr&&dt&&Pe.nextEdit.highlightSuggestionsInTheEditor!==dt.nextEdit.highlightSuggestionsInTheEditor&&this._nextEditSessionEventReporter.reportEventWithoutIds(Pe.nextEdit.highlightSuggestionsInTheEditor?"highlights-enabled":"highlights-disabled","unknown")};this.disposeOnDisable.push(this._augmentConfigListener.onDidChange(Pe=>{ie(Pe.newConfig,Pe.previousConfig)})),ie(this._augmentConfigListener.config)}{let Y=[this._completionAcceptanceReporter,this._codeEditReporter,this._nextEditResolutionReporter,this._nextEditSessionEventReporter,this._onboardingSessionEventReporter,this._clientMetricsReporter,this._completionTimelineReporter,this._extensionEventReporter,this._toolUseRequestEventReporter];for(let U of Y)U.enableUpload(),this.disposeOnDisable.push(U);this.disposeOnDisable.push(new Ye.Disposable(()=>{QK(),FK()}))}this.disposeOnDisable.push(Ye.window.registerWebviewViewProvider("augment-next-edit",new PN(this._augmentConfigListener,this.featureFlagManager,Y=>new MN(this._extensionContext.extensionUri,Y,Y.webview,this._suggestionManager,this._globalNextEdit,this._editorNextEdit,this._nextEditSessionEventReporter,E,this._nextEditVSCodeToWebviewMessage,this.workTimer)),{webviewOptions:{retainContextWhenHidden:!0}})),this.enabled=!0,this._statusBar.setState(Wwe),this.disposeOnDisable.push(new VN(this._statusBar,this._syncingEnabledTracker));let N=new Sm(this._augmentConfigListener,this._actionsModel);this.addDisposable(N),N.checkAndUpdateState();let W=new F2(this._actionsModel,this.workspaceManager);this.disposeOnDisable.push(W),this._syncLastEnabledExtensionVersion();let Z=this._extensionContext.extension.packageJSON,te="preRelease"in Z&&Z.preRelease===!0;this._logger.debug(`Is the extension in pre-release? ${te}`),this._extensionEventReporter.reportConfiguration("configuration-snapshot",this._augmentConfigListener.config,this.featureFlagManager.currentFlags)}async _fetchFeatureFlags(r){try{return(await this._getModelConfig(r)).featureFlags}catch(n){this._logger.error("Failed to fetch feature flags: ",n);return}}updateModelInfo(r){if(!this._modelInfo)throw new Error("Model info not set");r.suggestedPrefixCharCount!==void 0&&(this._modelInfo.suggestedPrefixCharCount=r.suggestedPrefixCharCount),r.suggestedSuffixCharCount!==void 0&&(this._modelInfo.suggestedSuffixCharCount=r.suggestedSuffixCharCount),this._modelInfo.completionTimeoutMs=r.completionTimeoutMs}async _getModelConfig(r){let n=1e3,i,s=0,o=6,a=new Gm(this._statusBar);try{for(;;){if(r.isCancellationRequested)throw new Ye.CancellationError;try{this._logger.info("Retrieving model config"),i=await this._apiServer.getModelConfig(),this._logger.info("Retrieved model config")}catch(l){if(this._logger.error("Failed to retrieve model config: ",l),Sr.isAPIErrorWithStatus(l,$e.unauthenticated))throw l;if(l instanceof Sd)throw l;s++}if(r.isCancellationRequested)throw this._logger.info("Model config retrieval cancelled"),new Ye.CancellationError;if(i!==void 0)return this._logger.info("Returning model config"),i;s>=o&&a.setState(n6),this._logger.info(`Retrying model config retrieval in ${n} msec`),await fo(n),n=Math.min(n*2,e.modelConfigBackoffMsecMax)}}finally{a.dispose()}}disable(){for(this.enabled=!1;this.disposeOnDisable.length;)this.disposeOnDisable.pop().dispose();this._currentChatExtensionEventDisposable=void 0,this.reset()}reset(){this._enableCancel?.cancel(),this._enableCancel?.dispose(),this._enableCancel=void 0,this._statusBar.reset(),this.workspaceManager?.dispose(),this.workspaceManager=void 0,this._disableDataCollection()}_checkInlineCompletionsEnabled(r){r&&r.previousConfig.completions.addIntelliSenseSuggestions===r.newConfig.completions.addIntelliSenseSuggestions||this._enableInlineCompletions()}_enableInlineCompletions(){if(this._disableInlineCompletions(),this._logger.debug("Registering inline completions  provider."),this._inlineCompletionProvider=new TQ(this._completionsModel,this._completionAcceptanceReporter,this._statusBar,this._augmentConfigListener,this._completionTimelineReporter),this._completionDisposables.push(this._inlineCompletionProvider),zc(r=>{r&&this._recentCompletions.addItem(r)}),this._completionDisposables.push(Ye.languages.registerInlineCompletionItemProvider("*",this._inlineCompletionProvider)),this._augmentConfigListener.config.completions.addIntelliSenseSuggestions){this._logger.debug("Registering completion items provider.");let r=new Vv(this._augmentConfigListener);this._completionDisposables.push(Ye.languages.registerCompletionItemProvider(Vv.languageSelector,r,...Vv.triggerCharacters))}}_disableInlineCompletions(){for(let r of this._completionDisposables)r.dispose();this._completionDisposables=[]}_disableDataCollection(){this._dataCollector?.dispose(),this._dataCollector=void 0}getRecencyInfo(){let r={},n=this.workspaceManager.getTabSwitchEvents();return n!==void 0&&(r.tab_switch_events=n.map(i=>({path:i.relPathName,file_blob_name:i.blobName}))),r}forceNextEditSuggestion(r){let n=Ye.window.activeTextEditor;if(!n||!this.workspaceManager)return;let i=this.workspaceManager.safeResolvePathName(n.document.uri);i&&(this._nextEditSessionEventReporter.reportEventWithoutIds("suggestion-forced",r??"command"),this._nextEditRequestManager?.enqueueRequest(i,"FORCED","CURSOR",nd(n.selection)))}nextEditUpdate(r){this._globalNextEdit?.startGlobalQuery(r)}nextEditBackgroundSuggestionsEnabled(){return $x(this._augmentConfigListener.config,this.featureFlagManager.currentFlags.vscodeNextEditMinVersion??"")}noopClicked(){this._nextEditSessionEventReporter.reportEventWithoutIds("noop-clicked","command")}nextEditTogglePanelHorizontalSplit(r){this._nextEditVSCodeToWebviewMessage.fire({type:"next-edit-toggle-suggestion-tree"}),this._nextEditSessionEventReporter.reportEventWithoutIds("toggle-panel-horizontal-split",r??"command")}openNextEditPanel(r){this._nextEditSessionEventReporter.reportEventWithoutIds("panel-focus-executed",r??"command"),Ye.commands.executeCommand("augment-next-edit.focus"),this._nextEditVSCodeToWebviewMessage.fire({type:"next-edit-panel-focus"})}nextEditLearnMore(r){this._nextEditSessionEventReporter.reportEventWithoutIds("learn-more-clicked",r??"command"),Ye.env.openExternal(Ye.Uri.parse("https://docs.augmentcode.com/using-augment/next-edit"))}async updateStatusTrace(){this._statusTrace?.dispose();let r=new DN(()=>this._onTextDocumentDidChange.fire(e.displayStatusUri));this._statusTrace=r;let n=0;if(this.enableInProgress){r.addLine("Augment extension is initializing"),r.publish();return}if(!this.enabled){r.addLine("Augment is not enabled in this workspace"),r.publish();return}r.addSection("Extension version");let i=Ye.extensions.getExtension("augment.vscode-augment");i?r.addValue("Extension version",i.packageJSON.version):r.addLine("Cannot retrieve extension version"),r.addSection("Session ID"),r.addValue("Session ID",this._apiServer.sessionId),r.addSection("Recent Completion Requests (oldest to newest)");let s=this._recentCompletions.items.sort((l,c)=>l.occuredAt.getTime()-c.occuredAt.getTime()).slice(0,10);for(let{requestId:l}of s)r.addLine(`${l}`);s.length===0&&r.addLine("No recent completion requests"),r.addSection("Recent Instruction Requests (oldest to newest)");for(let{requestId:l}of this._recentInstructions.items)r.addLine(`${l}`);this._recentInstructions.items.length===0&&r.addLine("No recent instruction requests"),r.addSection("Recent Chat Requests (oldest to newest)");for(let{requestId:l}of this._recentChats.items)r.addLine(`${l}`);this._recentChats.items.length===0&&r.addLine("No recent chat requests"),r.addSection("Extension configuration");let o=this._augmentConfigListener.config;r.addObject(o),r.addValue("Using API token",!this._auth.useOAuth);let a="";if(this._auth.useOAuth){let l=await this._auth.getSession();r.addValue("Tenant URL",l?.tenantURL),a=l?.tenantURL||""}else a=o.completionURL;if(!this.ready){r.addLine("Augment extension is initializing"),r.publish();return}r.addSection("Back-end Configuration"),r.addValue("MaxUploadSizeBytes",this.featureFlagManager.currentFlags.maxUploadSizeBytes),r.addValue("enableCompletionFileEditEvents",this.featureFlagManager.currentFlags.enableCompletionFileEditEvents),r.addSection("Supported languages (Augment name / VSCode name):");for(let l of this._languages)r.addLine(`${l.name} / ${l.vscodeName}`);r.addSection("Available Models");for(let l of this._availableModels){let c=this._defaultModel&&l.startsWith(this._defaultModel),u=!o.modelName&&c||l===o.modelName,f=l+(c?" (default)":"")+(u?" (current)":"");r.addLine(f)}this._availableModels.length===0&&r.addLine("No models available"),r.addSection("Current Model"),n=r.savePoint(),r.addLine("Querying current model"),r.addLine("(in progress...)");try{r.publish(),r.rollback(n),o.modelName||r.addLine("(Using default model)"),r.addObject(this.modelInfo)}catch(l){r.rollback(n),l instanceof jx?r.addLine(`Model "${o.modelName}" not known.`):r.addError(`Unable to query info about model "${o.modelName}": ${He(l)}`)}if(r.addSection("Blob upload"),o.enableUpload?r.addLine("Blob upload enabled in configuration settings"):r.addLine("Blob upload disabled in configuration settings"),this.workspaceManager!==void 0&&await this.workspaceManager.updateStatusTrace(r),a!==""){r.addSection("Completion status"),r.addLine(`Attempting completion from ${a}`);let l=this._apiServer.createRequestId();r.addValue("Request ID",l),n=r.savePoint(),r.addLine("(in progress...)");try{r.publish();let c=Date.now(),u=await this._apiServer.complete(l,"this is the prefix","this is the suffix","/this/is/the/path",void 0,{prefixBegin:0,cursorPosition:0,suffixEnd:0},"python",{checkpointId:void 0,addedBlobs:[],deletedBlobs:[]},[]);r.rollback(n),r.addLine(`Response received in ${Date.now()-c} ms`),u.completionItems.length===0?r.addLine("No completion received"):r.addLine(`${u.completionItems.length} completion(s) received`)}catch(c){r.rollback(n),r.addError(`Completion request failed: ${c}`)}}r.addSection("Feature Flags"),r.addObject(this.featureFlagManager.currentFlags),r.publish()}async provideTextDocumentContent(r){return r.toString()===e.displayStatusUri.toString()?this._statusTrace===void 0?"Internal error. Cannot get Augment extension status.":this._statusTrace.content:""}get onDidChange(){return this._onTextDocumentDidChange.event}clearFileEdits(){this.workspaceManager?.clearFileEdits()}};function qIe(e){let t=e.get("sessionId");return(t===void 0||!iH(t))&&(t=Ph(),e.update("sessionId",t)),t}function Wbt(e){let t=j("activate()");t.debug("======== Activating extension ========");let r;function n(z){z.enable()}function i(z){z.disable()}function s(){r&&(t.debug("======== Deactivating extension ========"),i(r)),r=void 0}function o(){t.info("======== Reloading extension ========"),i(r),n(r)}e.subscriptions.push(new Ye.Disposable(()=>{s()})),e.subscriptions.push(Ye.window.registerUriHandler({handleUri(z){if(z.authority.toLowerCase()!==e.extension.id.toLowerCase()){t.warn(`Ignoring URI ${z.toString()}`);return}switch(z.path){case U.authRedirectURI.path:U.handleAuthURI(z);break;default:t.error(`Unhandled URI ${Ye.Uri.from({scheme:z.scheme,authority:z.authority,path:z.path}).toString()}`)}}}));let a=`${Q2.default.platform()}; ${Q2.default.arch()}; ${Q2.default.release()}`,l=`${e.extension.id}/${e.extension.packageJSON.version} (${a}) ${Ye.env.uriScheme}/${Ye.version}`,c=new Xk(e);e.subscriptions.push(c);let u=qIe(c),f=new Vk;f.migrateLegacyConfig();let p=new Gk(e,f);e.subscriptions.push(p);let g=new HN;e.subscriptions.push(g),xK(new CF(f)),EK(new vF(p,f));let m=new Ok(f,p,u,l,global.fetch),y=new RQ,v=new vg(10),C=new vg(10),E=new vg(10),w=new Ye.EventEmitter,B=new Ye.EventEmitter,R=new Ye.EventEmitter,N=new Ye.EventEmitter,W=new $M(e),Z=new NN(e.extensionUri);Z.onVisibilityChange(z=>{z||wv.currentPanel?.dispose()});let te=new PQ(c);e.subscriptions.push(te);let Y=new JQ(m),U=new Yk(e,f,m,p,Y),ce=new OQ(m,f,U,te);function Ie(z){e:for(let ie of z)switch(ie.name){case"UserShouldSignIn":{Z.changeApp(ce),Q();break e}case"WorkspaceNotSelected":{te.isSystemStateComplete("authenticated")&&(R.fire("folder-selection"),f.config.disableFocusOnEmptyWorkspace||Q());break e}case"ShouldDisableCopilot":case"ShouldDisableCodeium":case"SyncingPermissionNeeded":case"uploadingHomeDir":case"workspaceTooLarge":Q();break e}(te.isDerivedStateSatisfied("SyncingPermissionNeeded")||te.isDerivedStateSatisfied("uploadingHomeDir")||te.isDerivedStateSatisfied("workspaceTooLarge"))&&R.fire("awaiting-syncing-permission")}e.subscriptions.push(p.onDidChangeSession(()=>{o()})),e.subscriptions.push(new Hk(te,p,f)),e.subscriptions.push(Ye.window.registerWebviewViewProvider("augment-chat",Z,{webviewOptions:{retainContextWhenHidden:!0}})),r=new Hm(e,c,f,m,p,y,v,E,C,w,N,Z,R,te,g,B,Y,W);function Q(){Z.isVisible()||Ye.commands.executeCommand(Ji.commandID)}e.subscriptions.push(te.onDerivedStatesSatisfied(Ie)),Ie(te.satisfiedStates),f.onDidChange(z=>{z.newConfig.enableDebugFeatures,z.previousConfig.enableDebugFeatures}),e.subscriptions.push(f.onDidChange(z=>{let ie=!1,Pe=["apiToken","completionURL","oauth","modelName"];for(let dt of Pe)if(!(0,x9.default)(z.previousConfig[dt],z.newConfig[dt])){ie=!0;break}ie&&(t.info("Reloading extension due to config change"),o())})),e.subscriptions.push(Ye.workspace.registerTextDocumentContentProvider(Hm.contentScheme,r)),Wbe(e),VIe(r,f,e);let se=Lwe(e,r,f,p,U,m,y,v,E,R,B,g,c,e.workspaceState);e.subscriptions.push(se),e.subscriptions.push(N),n(r)}function NIe(e){for(let[t,r]of Object.entries(e))Ye.commands.executeCommand("setContext",t,r)}function VIe(e,t,r){let n=()=>{let o=t.config;NIe({"vscode-augment.enableDebugFeatures":o.enableDebugFeatures,"vscode-augment.enableReviewerWorkflows":o.enableReviewerWorkflows,"vscode-augment.enableNextEdit":Kl(t.config,e?.featureFlagManager.currentFlags.vscodeNextEditMinVersion??""),"vscode-augment.enableNextEditBackgroundSuggestions":$x(t.config,e?.featureFlagManager.currentFlags.vscodeNextEditMinVersion??""),"vscode-augment.nextEdit.enablePanel":e.nextEditConfigManager.config.enablePanel})};n(),r.subscriptions.push(t.onDidChange(n));let i=["enableWorkspaceManagerUi","enableSmartPaste","enableSmartPasteMinVersion","enableInstructions","vscodeSourcesMinVersion","vscodeChatHintDecorationMinVersion","vscodeEnableCpuProfile","vscodeNextEditMinVersion"],s=()=>{if(!e)return;let o=e.featureFlagManager.currentFlags;NIe({"vscode-augment.workspace-manager-ui.enabled":o.enableWorkspaceManagerUi,"vscode-augment.internal-new-instructions.enabled":o.enableInstructions,"vscode-augment.internal-dv.enabled":gr(o.enableSmartPasteMinVersion)||o.enableInstructions,"vscode-augment.sources-enabled":gr(o.vscodeSourcesMinVersion)??!1,"vscode-augment.chat-hint.decoration":gr(o.vscodeChatHintDecorationMinVersion)??!1,"vscode-augment.cpu-profile.enabled":o.vscodeEnableCpuProfile,"vscode-augment.nextEdit.enablePanel":e.nextEditConfigManager.config.enablePanel})};s(),r.subscriptions.push(e.featureFlagManager.subscribe(i,s)),r.subscriptions.push(e.featureFlagManager.subscribe(i,n))}var Gbt={setupContextKeySync:VIe};0&&(module.exports={AugmentExtension,_exportedForTesting,activate,getSessionId});
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@mixmark-io/domino/lib/style_parser.js:
  (**
   * @license
   * Copyright Google LLC All Rights Reserved.
   *
   * Use of this source code is governed by an MIT-style license that can be
   * found in the LICENSE file at https://angular.io/license
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
