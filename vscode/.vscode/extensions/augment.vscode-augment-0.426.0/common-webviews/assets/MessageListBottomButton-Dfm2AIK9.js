var Se=Object.defineProperty;var Ee=(o,t,n)=>t in o?Se(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var K=(o,t,n)=>Ee(o,typeof t!="symbol"?t+"":t,n);import{S as H,d as O,e as D,a4 as Y,k as v,b as $,a as Z,t as m,c as j,m as h,ad as at,a7 as rt,o as pt,ak as Nt,y as q,z as k,Q as J,a0 as L,j as x,D as At,E as U,A as I,l as z,G as et,q as Tt,a6 as Te,a2 as G,B as _,I as Mt,P as ft,R as Bt,V as gt,W as ht,X as vt,ar as Re,n as P,af as $t,ac as pe,J as Le,K as tt,ae as Me,ap as kt,aq as It,aK as _t,a1 as Ht,T as fe,Y as xt,Z as qt,ag as ge,h as it,a5 as he,as as qe,aj as Fe,H as ze,u as Pe,v as Ne,w as Ae,p as Ot,x as Be,r as Dt}from"./index-Bg5k1fBH.js";import{M as He}from"./MaterialIcon-BhPUHxOM.js";import{o as ve}from"./keypress-DD1aQVr0.js";import{A as Jt,a as B}from"./autofix-state-d-ymFdyn.js";import{b6 as Oe,b7 as De,b8 as Ft,b9 as Je,aG as Ve,ba as Ue,bb as xe,bc as Ze,bd as je,be as We,bf as Ge}from"./AugmentMessage-DPQ5COF7.js";import{R as ye,E as ct,h as Vt,n as Ut,k as Ke,S as Ye,o as Ct}from"./circle-backslash-DcaYy8Cz.js";import{a as zt}from"./Content-DlSDhH-b.js";import{I as St,L as Qe,N as Xe,J as tn,O as en,Q as nn,T as we}from"./Keybindings-B3h1jpi_.js";import{a as Ce,I as sn,R as on,D as rn,b as an,c as be,d as cn,f as bt,E as ln,e as un}from"./main-panel-DHLQkfbk.js";import{a as ke,e as Zt}from"./ButtonAugment-CSwi-JVg.js";import{E as dn}from"./expand-DPRXx-qB.js";import{P as $n}from"./pen-to-square-DVpukHrw.js";import{h as mn}from"./folder-opened-Bm8IVIHF.js";import{T as Pt}from"./TextTooltipAugment-BspEVawc.js";import{I as Et}from"./IconButtonAugment-CMGBc7C3.js";import{b as pn,c as fn,M as gn,d as hn,e as vn}from"./CollapseButtonAugment-BGvJcqaG.js";import{a as xn}from"./index-CqmTMtlA.js";function jt(o){let t,n,e,s,r,i,a,c;const l=[o[4][o[1]]];let d={};for(let g=0;g<l.length;g+=1)d=pt(d,l[g]);n=new He({props:d});let u=[{class:"stage-container"},o[1]?Nt(o[3][o[1]]):{},{role:"button"},{tabindex:"0"}],f={};for(let g=0;g<u.length;g+=1)f=pt(f,u[g]);return{c(){t=q("div"),k(n.$$.fragment),e=J(),s=q("div"),r=L(o[1]),x(s,"class","message svelte-1etsput"),At(t,f),U(t,"active",o[0]),U(t,"svelte-1etsput",!0)},m(g,y){v(g,t,y),I(n,t,null),z(t,e),z(t,s),z(s,r),i=!0,a||(c=[et(t,"click",o[5]),et(t,"keydown",ve("Enter",o[5]))],a=!0)},p(g,y){const R=18&y?Tt(l,[Te(g[4][g[1]])]):{};n.$set(R),(!i||2&y)&&G(r,g[1]),At(t,f=Tt(u,[{class:"stage-container"},2&y&&(g[1]?Nt(g[3][g[1]]):{}),{role:"button"},{tabindex:"0"}])),U(t,"active",g[0]),U(t,"svelte-1etsput",!0)},i(g){i||($(n.$$.fragment,g),i=!0)},o(g){m(n.$$.fragment,g),i=!1},d(g){g&&h(t),_(n),a=!1,Mt(c)}}}function yn(o){let t,n,e=o[1]&&jt(o);return{c(){e&&e.c(),t=Y()},m(s,r){e&&e.m(s,r),v(s,t,r),n=!0},p(s,[r]){s[1]?e?(e.p(s,r),2&r&&$(e,1)):(e=jt(s),e.c(),$(e,1),e.m(t.parentNode,t)):e&&(Z(),m(e,1,1,()=>{e=null}),j())},i(s){n||($(e),n=!0)},o(s){m(e),n=!1},d(s){s&&h(t),e&&e.d(s)}}}function wn(o,t,n){let e,s,r,i,{stage:a}=t,{iterationId:c}=t,{stageCount:l}=t;const d=at("autofixConversationModel");rt(o,d,g=>n(10,i=g));const u={[B.retesting]:"info",[B.testRunning]:"info",[B.testFailed]:"error",[B.testPassed]:"success",[B.generatingSolutions]:"info",[B.suggestedSolutions]:"warning",[B.selectedSolutions]:"success"},f={[B.retesting]:{iconName:"cached",color:"#FFFFFF"},[B.testRunning]:{iconName:"cached",color:"#FFFFFF"},[B.testFailed]:{iconName:"error",color:"#DB3B4B"},[B.testPassed]:{iconName:"check_circle",color:"#388A34"},[B.generatingSolutions]:{iconName:"cached",color:"#FFFFFF"},[B.suggestedSolutions]:{iconName:"edit",color:"#FFFFFF"},[B.selectedSolutions]:{iconName:"edit",color:"#FFFFFF"}};return o.$$set=g=>{"stage"in g&&n(6,a=g.stage),"iterationId"in g&&n(7,c=g.iterationId),"stageCount"in g&&n(8,l=g.stageCount)},o.$$.update=()=>{var g,y,R;1152&o.$$.dirty&&n(9,e=i==null?void 0:i.getAutofixIteration(c)),1600&o.$$.dirty&&n(0,s=e&&((R=(y=(g=i.extraData)==null?void 0:g.autofixIterations)==null?void 0:y.at(-1))==null?void 0:R.id)===e.id&&e.currentStage===a),833&o.$$.dirty&&n(1,r=function(p,w,E,M){var C;return p?w===Jt.runTest?p.commandFailed===void 0&&M?p.isFirstIteration?B.testRunning:B.retesting:p.commandFailed===!0?B.testFailed:B.testPassed:w===Jt.applyFix?E===(((C=p.suggestedSolutions)==null?void 0:C.length)||0)?p.selectedSolutions?B.selectedSolutions:B.generatingSolutions:B.suggestedSolutions:null:null}(e,a,l,s))},[s,r,d,u,f,()=>{r!==B.generatingSolutions&&d.launchAutofixPanel(c,a)},a,c,l,e,i]}class Eo extends H{constructor(t){super(),O(this,t,wn,yn,D,{stage:6,iterationId:7,stageCount:8})}}function To(o,t){const n=Math.abs(o);let e=200,s=500;typeof t=="number"?e=t:t&&(e=t.baseThreshold??200,s=t.predictTime??500);const r=n*s/1e3;return Math.max(e,r)}function Ro(o,t=10){const n=Math.abs(o);return n>1e3?2*t:n>500?1.5*t:n>200?t:.5*t}function Wt(o){const{scrollTop:t,clientHeight:n,scrollHeight:e}=o;return e-t-n}function Lo(o,t={}){let n=t,e={scrollTop:0,scrollBottom:0,scrollHeight:0,scrolledIntoBottom:!0,scrolledAwayFromBottom:!0};const s=()=>{var p,w,E;const{scrollTop:r,scrollHeight:i,offsetHeight:a}=o,c=Wt(o),l=r>e.scrollTop+1,d=i-e.scrollHeight,u=!(d<0&&e.scrollBottom<-d)&&r<e.scrollTop-1&&c>e.scrollBottom+1,f=i>a,g=((M,C=40)=>Wt(M)<=C)(o),y=g&&f&&l,R=u||!f;y&&!e.scrolledIntoBottom?(p=n.onScrollIntoBottom)==null||p.call(n):R&&!e.scrolledAwayFromBottom&&((w=n.onScrollAwayFromBottom)==null||w.call(n)),e={scrollTop:r,scrollBottom:c,scrolledIntoBottom:y,scrolledAwayFromBottom:R,scrollHeight:i},(E=n.onScroll)==null||E.call(n,r)};return o.addEventListener("scroll",s),{update(r){n=r},destroy(){o.removeEventListener("scroll",s)}}}function Cn(o){let t,n,e;const s=o[4].default,r=ft(s,o,o[3],null);return{c(){t=q("div"),r&&r.c(),x(t,"class",n="c-gradient-mask "+o[2]+" svelte-say8yn"),Bt(t,"--fade-size",o[1]+"px"),U(t,"is-horizontal",o[0]==="horizontal")},m(i,a){v(i,t,a),r&&r.m(t,null),e=!0},p(i,[a]){r&&r.p&&(!e||8&a)&&gt(r,s,i,i[3],e?vt(s,i[3],a,null):ht(i[3]),null),(!e||4&a&&n!==(n="c-gradient-mask "+i[2]+" svelte-say8yn"))&&x(t,"class",n),(!e||2&a)&&Bt(t,"--fade-size",i[1]+"px"),(!e||5&a)&&U(t,"is-horizontal",i[0]==="horizontal")},i(i){e||($(r,i),e=!0)},o(i){m(r,i),e=!1},d(i){i&&h(t),r&&r.d(i)}}}function bn(o,t,n){let{$$slots:e={},$$scope:s}=t,{direction:r="vertical"}=t,{fadeSize:i=Oe}=t,{class:a=""}=t;return o.$$set=c=>{"direction"in c&&n(0,r=c.direction),"fadeSize"in c&&n(1,i=c.fadeSize),"class"in c&&n(2,a=c.class),"$$scope"in c&&n(3,s=c.$$scope)},[r,i,a,s,e]}class Mo extends H{constructor(t){super(),O(this,t,bn,Cn,D,{direction:0,fadeSize:1,class:2})}}function qo(o,t){var r;let n=o.offsetHeight,e=t;const s=new ResizeObserver(i=>{var c;const a=i[0].contentRect.height;i.length===1?a!==n&&((c=e.onHeightChange)==null||c.call(e,a),n=a):console.warn("Unexpected number of resize entries: ",i)});return s.observe(o),(r=e==null?void 0:e.onHeightChange)==null||r.call(e,n),{update(i){e=i},destroy:()=>s.disconnect()}}function Fo(o,t){let n=t;const e=De(()=>{n.onSeen()},1e3,{leading:!0,trailing:!0}),s=new IntersectionObserver(i=>{i.length===1?i[0].isIntersecting&&e():console.warn("Unexpected number of intersection entries: ",i)},{threshold:.5}),r=()=>{s.disconnect(),n.track&&s.observe(o)};return r(),{update(i){const a=n;n=i,n.track!==a.track&&r()},destroy:()=>{s.disconnect(),n.onSeen()}}}function Gt(o){let t,n,e,s=o[6]&&Kt();return n=new on({props:{changeImageMode:o[32],saveImage:o[9].saveImage,deleteImage:o[9].deleteImage,renderImage:o[9].renderImage,isEditable:o[33]}}),{c(){s&&s.c(),t=J(),k(n.$$.fragment)},m(r,i){s&&s.m(r,i),v(r,t,i),I(n,r,i),e=!0},p(r,i){r[6]?s?64&i[0]&&$(s,1):(s=Kt(),s.c(),$(s,1),s.m(t.parentNode,t)):s&&(Z(),m(s,1,1,()=>{s=null}),j());const a={};258&i[0]&&(a.changeImageMode=r[32]),512&i[0]&&(a.saveImage=r[9].saveImage),512&i[0]&&(a.deleteImage=r[9].deleteImage),512&i[0]&&(a.renderImage=r[9].renderImage),64&i[0]&&(a.isEditable=r[33]),n.$set(a)},i(r){e||($(s),$(n.$$.fragment,r),e=!0)},o(r){m(s),m(n.$$.fragment,r),e=!1},d(r){r&&h(t),s&&s.d(r),_(n,r)}}}function Kt(o){let t,n;return t=new rn({}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function kn(o){var R;let t,n,e,s,r,i,a,c,l,d,u=o[9].flags.enableChatMultimodal&&Gt(o);n=new Qe({props:{shortcuts:o[13]}});let f={requestEditorFocus:o[22],onMentionItemsUpdated:o[21]};s=new Ce({props:f}),o[34](s),i=new Xe({props:{placeholder:o[2]}}),c=new St.Content({props:{content:((R=o[7])==null?void 0:R.richTextJsonRepr)??o[3],onContentChanged:o[20]}});const g=o[29].default,y=ft(g,o,o[37],null);return{c(){u&&u.c(),t=J(),k(n.$$.fragment),e=J(),k(s.$$.fragment),r=J(),k(i.$$.fragment),a=J(),k(c.$$.fragment),l=J(),y&&y.c()},m(p,w){u&&u.m(p,w),v(p,t,w),I(n,p,w),v(p,e,w),I(s,p,w),v(p,r,w),I(i,p,w),v(p,a,w),I(c,p,w),v(p,l,w),y&&y.m(p,w),d=!0},p(p,w){var V;p[9].flags.enableChatMultimodal?u?(u.p(p,w),512&w[0]&&$(u,1)):(u=Gt(p),u.c(),$(u,1),u.m(t.parentNode,t)):u&&(Z(),m(u,1,1,()=>{u=null}),j());const E={};8192&w[0]&&(E.shortcuts=p[13]),n.$set(E),s.$set({});const M={};4&w[0]&&(M.placeholder=p[2]),i.$set(M);const C={};136&w[0]&&(C.content=((V=p[7])==null?void 0:V.richTextJsonRepr)??p[3]),c.$set(C),y&&y.p&&(!d||64&w[1])&&gt(y,g,p,p[37],d?vt(g,p[37],w,null):ht(p[37]),null)},i(p){d||($(u),$(n.$$.fragment,p),$(s.$$.fragment,p),$(i.$$.fragment,p),$(c.$$.fragment,p),$(y,p),d=!0)},o(p){m(u),m(n.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),m(c.$$.fragment,p),m(y,p),d=!1},d(p){p&&(h(t),h(e),h(r),h(a),h(l)),u&&u.d(p),_(n,p),o[34](null),_(s,p),_(i,p),_(c,p),y&&y.d(p)}}}function Yt(o){let t,n;return t=new an({props:{chatModel:o[16]}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p:P,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function In(o){let t,n,e=o[6]&&Yt(o);return{c(){e&&e.c(),t=Y()},m(s,r){e&&e.m(s,r),v(s,t,r),n=!0},p(s,r){s[6]?e?(e.p(s,r),64&r[0]&&$(e,1)):(e=Yt(s),e.c(),$(e,1),e.m(t.parentNode,t)):e&&(Z(),m(e,1,1,()=>{e=null}),j())},i(s){n||($(e),n=!0)},o(s){m(e),n=!1},d(s){s&&h(t),e&&e.d(s)}}}function Qt(o){let t,n;return t=new be.Root({props:{$$slots:{rightAlign:[En],leftAlign:[_n]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){const r={};17408&s[0]|64&s[1]&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function _n(o){var e;let t,n;return t=new be.ContextMenu({props:{slot:"leftAlign",onCloseDropdown:o[22],onInsertMentionable:(e=o[10])==null?void 0:e.insertMentionNode}}),{c(){k(t.$$.fragment)},m(s,r){I(t,s,r),n=!0},p(s,r){var a;const i={};1024&r[0]&&(i.onInsertMentionable=(a=s[10])==null?void 0:a.insertMentionNode),t.$set(i)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){_(t,s)}}}function Sn(o){let t,n;return t=new tn({}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function En(o){let t,n;return t=new ke({props:{size:1,variant:"solid",disabled:!o[14],$$slots:{default:[Sn]},$$scope:{ctx:o}}}),t.$on("click",o[18]),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){const r={};16384&s[0]&&(r.disabled=!e[14]),64&s[1]&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Xt(o){let t,n,e;return n=new ke({props:{variant:"solid",color:"neutral",size:1,$$slots:{iconLeft:[Rn],default:[Tn]},$$scope:{ctx:o}}}),n.$on("click",o[31]),{c(){t=q("div"),k(n.$$.fragment),x(t,"class","c-user-msg__collapse-button svelte-9vyoe0")},m(s,r){v(s,t,r),I(n,t,null),e=!0},p(s,r){const i={};64&r[1]&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){e||($(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&h(t),_(n)}}}function Tn(o){let t;return{c(){t=q("span"),t.textContent="Expand"},m(n,e){v(n,t,e)},p:P,d(n){n&&h(t)}}}function Rn(o){let t,n;return t=new dn({props:{slot:"iconLeft"}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p:P,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Ln(o){let t,n,e,s=o[6]&&Qt(o),r=o[4]&&Xt(o);return{c(){s&&s.c(),t=J(),r&&r.c(),n=Y()},m(i,a){s&&s.m(i,a),v(i,t,a),r&&r.m(i,a),v(i,n,a),e=!0},p(i,a){i[6]?s?(s.p(i,a),64&a[0]&&$(s,1)):(s=Qt(i),s.c(),$(s,1),s.m(t.parentNode,t)):s&&(Z(),m(s,1,1,()=>{s=null}),j()),i[4]?r?(r.p(i,a),16&a[0]&&$(r,1)):(r=Xt(i),r.c(),$(r,1),r.m(n.parentNode,n)):r&&(Z(),m(r,1,1,()=>{r=null}),j())},i(i){e||($(s),$(r),e=!0)},o(i){m(s),m(r),e=!1},d(i){i&&(h(t),h(n)),s&&s.d(i),r&&r.d(i)}}}function Mn(o){let t,n,e,s,r,i={editable:o[6],$$slots:{footer:[Ln],header:[In],default:[kn]},$$scope:{ctx:o}};return n=new St.Root({props:i}),o[35](n),n.$on("click",qn),n.$on("dblclick",o[17]),{c(){t=q("div"),k(n.$$.fragment),x(t,"class","c-chat-input svelte-9vyoe0"),x(t,"role","button"),x(t,"tabindex","-1"),U(t,"is-collapsed",o[4]),U(t,"is-editing",o[6])},m(a,c){v(a,t,c),I(n,t,null),o[36](t),e=!0,s||(r=[et(window,"mousedown",o[19]),et(t,"mousedown",Re(o[30]))],s=!0)},p(a,c){const l={};64&c[0]&&(l.editable=a[6]),26623&c[0]|64&c[1]&&(l.$$scope={dirty:c,ctx:a}),n.$set(l),(!e||16&c[0])&&U(t,"is-collapsed",a[4]),(!e||64&c[0])&&U(t,"is-editing",a[6])},i(a){e||($(n.$$.fragment,a),e=!0)},o(a){m(n.$$.fragment,a),e=!1},d(a){a&&h(t),o[35](null),_(n),o[36](null),s=!1,Mt(r)}}}const qn=o=>o.stopPropagation();function Fn(o,t,n){let e,s,r,i,a,c,l,d=P;o.$$.on_destroy.push(()=>d());let{$$slots:u={},$$scope:f}=t;const g=at("chatModel");rt(o,g,b=>n(9,l=b));const y=at(ye.key);let{requestId:R}=t,{placeholder:p="Edit your message..."}=t,{content:w}=t,{collapsed:E=!1}=t,{onSubmitEdit:M}=t,{onCancelEdit:C}=t,{setIsCollapsed:V}=t,{userExpanded:T}=t,N,W,F,S=!1,Q=[];async function ot(){r&&(n(0,T=!0),E&&V(!1),n(6,S=!0),await pe(),yt())}function dt(){return!(!i||!N)&&(M(N,Q),!0)}function A(){return n(0,T=!1),n(6,S=!1),n(7,N=void 0),C(),!0}const yt=()=>F==null?void 0:F.forceFocus();let lt;return o.$$set=b=>{"requestId"in b&&n(1,R=b.requestId),"placeholder"in b&&n(2,p=b.placeholder),"content"in b&&n(3,w=b.content),"collapsed"in b&&n(4,E=b.collapsed),"onSubmitEdit"in b&&n(23,M=b.onSubmitEdit),"onCancelEdit"in b&&n(24,C=b.onCancelEdit),"setIsCollapsed"in b&&n(5,V=b.setIsCollapsed),"userExpanded"in b&&n(0,T=b.userExpanded),"$$scope"in b&&n(37,f=b.$$scope)},o.$$.update=()=>{512&o.$$.dirty[0]&&(n(15,e=l.currentConversationModel),d(),d=$t(e,b=>n(8,c=b))),268435968&o.$$.dirty[0]&&n(27,r=l.flags.enableEditableHistory&&!s),134218184&o.$$.dirty[0]&&n(14,i=S&&r&&N!==void 0&&N.rawText.trim()!==""&&N.rawText!==w&&N.richTextJsonRepr!==w&&!c.awaitingReply&&!sn.hasLoadingImages(N.richTextJsonRepr))},n(28,s=!!(y!=null&&y.isActive)),n(13,a={Enter:dt,Escape:A}),[T,R,p,w,E,V,S,N,c,l,W,F,lt,a,i,e,g,ot,dt,A,function(b){b!==N&&n(7,N=b)},function(b){Q=b.current},()=>F==null?void 0:F.requestFocus(),M,C,()=>{ot()},function(){return lt},r,s,u,function(b){Le.call(this,o,b)},()=>{n(0,T=!0),V(!1)},b=>{R&&b&&c.updateChatItem(R,{rich_text_json_repr:b})},()=>S,function(b){tt[b?"unshift":"push"](()=>{W=b,n(10,W)})},function(b){tt[b?"unshift":"push"](()=>{F=b,n(11,F)})},function(b){tt[b?"unshift":"push"](()=>{lt=b,n(12,lt)})},f]}class zn extends H{constructor(t){super(),O(this,t,Fn,Mn,D,{requestId:1,placeholder:2,content:3,collapsed:4,onSubmitEdit:23,onCancelEdit:24,setIsCollapsed:5,userExpanded:0,requestStartEdit:25,getEditorContainer:26},null,[-1,-1])}get requestStartEdit(){return this.$$.ctx[25]}get getEditorContainer(){return this.$$.ctx[26]}}const X=class X{constructor(t){K(this,"_tipTapExtension");K(this,"_resizeObserver");K(this,"_checkHeight",t=>{var e,s;const n=t.getBoundingClientRect().height;(s=(e=this._options).onResize)==null||s.call(e,n)});K(this,"_setResizeObserver",t=>{var e;const n=(e=t.view)==null?void 0:e.dom;n&&(this._resizeObserver=new ResizeObserver(s=>{for(const r of s)this._checkHeight(r.target)}),this._resizeObserver.observe(n),this._checkHeight(n))});K(this,"_clearResizeObserver",()=>{var t;(t=this._resizeObserver)==null||t.disconnect(),this._resizeObserver=void 0});K(this,"updateOptions",t=>{this._options={...this._options,...t}});this._options=t;const n=X._getNextPluginId(),e=this._setResizeObserver,s=this._clearResizeObserver,r=this._checkHeight;this._tipTapExtension=en.create({name:n,onCreate:function(){var a;((a=this.editor.view)==null?void 0:a.dom)&&(e(this.editor),this.editor.on("destroy",s))},onUpdate:function(){var a;const i=(a=this.editor.view)==null?void 0:a.dom;i&&r(i)},onDestroy:()=>{var i;(i=this._resizeObserver)==null||i.disconnect(),this._resizeObserver=void 0}})}get tipTapExtension(){return this._tipTapExtension}};K(X,"_sequenceId",0),K(X,"RESIZE_OBSERVER_PLUGIN_KEY_BASE","augment-resize-observer-plugin-{}"),K(X,"_getSequenceId",()=>X._sequenceId++),K(X,"_getNextPluginId",()=>{const t=X._getSequenceId().toString();return X.RESIZE_OBSERVER_PLUGIN_KEY_BASE.replace("{}",t)});let Rt=X;function Pn(o,t,n){let{height:e=0}=t;const s=c=>{n(0,e=c)},r=at(nn.CONTEXT_KEY),i=new Rt({onResize:s}),a=r.pluginManager.registerPlugin(i);return Me(a),o.$$set=c=>{"height"in c&&n(0,e=c.height)},i.updateOptions({onResize:s}),[e]}let Nn=class extends H{constructor(o){super(),O(this,o,Pn,null,D,{height:0})}};function An(o){let t,n,e;function s(i){o[21](i)}let r={};return o[6]!==void 0&&(r.height=o[6]),t=new Nn({props:r}),tt.push(()=>kt(t,"height",s)),{c(){k(t.$$.fragment)},m(i,a){I(t,i,a),e=!0},p(i,a){const c={};!n&&64&a&&(n=!0,c.height=i[6],It(()=>n=!1)),t.$set(c)},i(i){e||($(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){_(t,i)}}}function Bn(o){let t,n,e;function s(i){o[23](i)}let r={collapsed:o[7],content:o[3]??o[1],requestId:o[2],onSubmitEdit:o[13],onCancelEdit:o[5],setIsCollapsed:o[11],$$slots:{default:[An]},$$scope:{ctx:o}};return o[8]!==void 0&&(r.userExpanded=o[8]),t=new zn({props:r}),o[22](t),tt.push(()=>kt(t,"userExpanded",s)),{c(){k(t.$$.fragment)},m(i,a){I(t,i,a),e=!0},p(i,a){const c={};128&a&&(c.collapsed=i[7]),10&a&&(c.content=i[3]??i[1]),4&a&&(c.requestId=i[2]),32&a&&(c.onCancelEdit=i[5]),134217792&a&&(c.$$scope={dirty:a,ctx:i}),!n&&256&a&&(n=!0,c.userExpanded=i[8],It(()=>n=!1)),t.$set(c)},i(i){e||($(t.$$.fragment,i),e=!0)},o(i){m(t.$$.fragment,i),e=!1},d(i){o[22](null),_(t,i)}}}function Hn(o){let t,n,e;return n=new Je({props:{items:o[10]}}),{c(){t=q("div"),k(n.$$.fragment),x(t,"slot","edit"),x(t,"class","c-user-msg__actions svelte-ln0veu")},m(s,r){v(s,t,r),I(n,t,null),e=!0},p(s,r){const i={};1024&r&&(i.items=s[10]),n.$set(i)},i(s){e||($(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&h(t),_(n)}}}function On(o){let t,n,e,s;return t=new Ft({props:{timestamp:o[4],$$slots:{edit:[Hn],content:[Bn]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},m(r,i){I(t,r,i),n=!0,e||(s=[et(window,"keydown",ve("Escape",o[12])),et(window,"mousedown",o[12])],e=!0)},p(r,[i]){const a={};16&i&&(a.timestamp=r[4]),134219758&i&&(a.$$scope={dirty:i,ctx:r}),t.$set(a)},i(r){n||($(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){_(t,r),e=!1,Mt(s)}}}function Dn(o,t,n){let e,s,r,i,a,c,l,d=P,u=()=>(d(),d=$t(f,S=>n(20,l=S)),f);o.$$.on_destroy.push(()=>d());let{chatModel:f}=t;u();let{msg:g}=t,{requestId:y}=t,{richTextJsonRepr:R}=t,{timestamp:p}=t,{onStartEdit:w=()=>{}}=t,{onAcceptEdit:E=()=>{}}=t,{onCancelEdit:M=()=>{}}=t;const C=at(ye.key);let V=!1,T=!1;async function N(S){await pe(),n(7,V=S&&r&&!T)}const W=S=>{a&&y&&(N(!1),F==null||F.requestStartEdit(),w(),S.stopPropagation())};let F;return o.$$set=S=>{"chatModel"in S&&u(n(0,f=S.chatModel)),"msg"in S&&n(1,g=S.msg),"requestId"in S&&n(2,y=S.requestId),"richTextJsonRepr"in S&&n(3,R=S.richTextJsonRepr),"timestamp"in S&&n(4,p=S.timestamp),"onStartEdit"in S&&n(14,w=S.onStartEdit),"onAcceptEdit"in S&&n(15,E=S.onAcceptEdit),"onCancelEdit"in S&&n(5,M=S.onCancelEdit)},o.$$.update=()=>{var S,Q;1048580&o.$$.dirty&&n(19,s=y===void 0||y===((Q=(S=l==null?void 0:l.currentConversationModel)==null?void 0:S.lastExchange)==null?void 0:Q.request_id)),524288&o.$$.dirty&&n(16,r=!s&&!0),1310724&o.$$.dirty&&n(17,a=y!==void 0&&l.flags.fullFeatured&&l.flags.enableEditableHistory&&!e),131072&o.$$.dirty&&n(10,c=[...a?[{label:"Edit message",action:W,id:"edit-message",disabled:!1,icon:$n}]:[]]),65600&o.$$.dirty&&i&&r&&(F!=null&&F.getEditorContainer())&&i&&r&&N(!(V&&i<120)&&i>120)},n(18,e=!!(C!=null&&C.isActive)),n(6,i=0),[f,g,y,R,p,M,i,V,T,F,c,N,()=>{},function(S,Q){if(!y)return;f.currentConversationModel.clearHistoryFrom(y);const ot=l.flags.enableChatMultimodal&&S.richTextJsonRepr?f.currentConversationModel.createStructuredRequestNodes(S.richTextJsonRepr):void 0;f.currentConversationModel.sendExchange({request_message:S.rawText,rich_text_json_repr:S.richTextJsonRepr,status:ct.draft,mentioned_items:Q,structured_request_nodes:ot}),E()},w,E,r,a,e,s,l,function(S){i=S,n(6,i)},function(S){tt[S?"unshift":"push"](()=>{F=S,n(9,F)})},function(S){T=S,n(8,T)}]}class Jn extends H{constructor(t){super(),O(this,t,Dn,On,D,{chatModel:0,msg:1,requestId:2,richTextJsonRepr:3,timestamp:4,onStartEdit:14,onAcceptEdit:15,onCancelEdit:5})}}function te(o){let t,n;return t=new Jn({props:{msg:o[1].request_message??"",richTextJsonRepr:o[10],chatModel:o[0],requestId:o[8],timestamp:o[1].timestamp}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){const r={};2&s&&(r.msg=e[1].request_message??""),1024&s&&(r.richTextJsonRepr=e[10]),1&s&&(r.chatModel=e[0]),256&s&&(r.requestId=e[8]),2&s&&(r.timestamp=e[1].timestamp),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function ee(o){let t,n,e;function s(c,l){return c[1].display_error_message?Zn:c[1].response_text&&c[1].response_text.length>0?Un:Vn}let r=s(o),i=r(o),a=o[8]&&ne(o);return{c(){t=q("div"),i.c(),n=J(),a&&a.c(),x(t,"class","c-msg-list__turn-response-failure svelte-1d1manc")},m(c,l){v(c,t,l),i.m(t,null),z(t,n),a&&a.m(t,null),e=!0},p(c,l){r===(r=s(c))&&i?i.p(c,l):(i.d(1),i=r(c),i&&(i.c(),i.m(t,n))),c[8]?a?(a.p(c,l),256&l&&$(a,1)):(a=ne(c),a.c(),$(a,1),a.m(t,null)):a&&(Z(),m(a,1,1,()=>{a=null}),j())},i(c){e||($(a),e=!0)},o(c){m(a),e=!1},d(c){c&&h(t),i.d(),a&&a.d()}}}function Vn(o){let t,n,e,s;return{c(){t=L(`We encountered an issue sending your message. Please
        `),n=q("button"),n.textContent="try again",x(n,"class","svelte-1d1manc")},m(r,i){v(r,t,i),v(r,n,i),e||(s=et(n,"click",_t(o[12])),e=!0)},p:P,d(r){r&&(h(t),h(n)),e=!1,s()}}}function Un(o){let t,n,e,s,r;return{c(){t=L(`Connection lost. Please
        `),n=q("button"),n.textContent="try again",e=L(`
        to restart the conversation!`),x(n,"class","svelte-1d1manc")},m(i,a){v(i,t,a),v(i,n,a),v(i,e,a),s||(r=et(n,"click",_t(o[12])),s=!0)},p:P,d(i){i&&(h(t),h(n),h(e)),s=!1,r()}}}function Zn(o){let t,n=o[1].display_error_message+"";return{c(){t=L(n)},m(e,s){v(e,t,s)},p(e,s){2&s&&n!==(n=e[1].display_error_message+"")&&G(t,n)},d(e){e&&h(t)}}}function ne(o){let t,n,e,s,r,i,a,c;function l(u){o[15](u)}let d={onOpenChange:o[13],content:o[6],triggerOn:[zt.Hover],$$slots:{default:[Wn]},$$scope:{ctx:o}};return o[7]!==void 0&&(d.requestClose=o[7]),i=new Pt({props:d}),tt.push(()=>kt(i,"requestClose",l)),{c(){t=q("div"),n=q("span"),e=L("Request ID: "),s=L(o[8]),r=J(),k(i.$$.fragment),x(t,"class","c-msg-list__request-id svelte-1d1manc")},m(u,f){v(u,t,f),z(t,n),z(n,e),z(n,s),z(t,r),I(i,t,null),c=!0},p(u,f){(!c||256&f)&&G(s,u[8]);const g={};64&f&&(g.content=u[6]),262144&f&&(g.$$scope={dirty:f,ctx:u}),!a&&128&f&&(a=!0,g.requestClose=u[7],It(()=>a=!1)),i.$set(g)},i(u){c||($(i.$$.fragment,u),c=!0)},o(u){m(i.$$.fragment,u),c=!1},d(u){u&&h(t),_(i)}}}function jn(o){let t,n;return t=new mn({}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Wn(o){let t,n;return t=new Et({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[jn]},$$scope:{ctx:o}}}),t.$on("click",o[14]),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){const r={};262144&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Gn(o){let t,n,e,s,r,i=!o[9]&&!Vt(o[1]),a=i&&te(o);e=new Ve({props:{chatModel:o[5],turn:o[1],turnIndex:o[3],requestId:o[8],isLastTurn:o[2],showName:!o[9],showFooter:!Ut(o[1]),markdown:o[1].response_text??"",timestamp:o[1].timestamp,messageListContainer:o[4]}});let c=o[1].status===ct.failed&&ee(o);return{c(){t=q("div"),a&&a.c(),n=J(),k(e.$$.fragment),s=J(),c&&c.c(),x(t,"class","c-msg-list__turn svelte-1d1manc")},m(l,d){v(l,t,d),a&&a.m(t,null),z(t,n),I(e,t,null),z(t,s),c&&c.m(t,null),r=!0},p(l,[d]){514&d&&(i=!l[9]&&!Vt(l[1])),i?a?(a.p(l,d),514&d&&$(a,1)):(a=te(l),a.c(),$(a,1),a.m(t,n)):a&&(Z(),m(a,1,1,()=>{a=null}),j());const u={};32&d&&(u.chatModel=l[5]),2&d&&(u.turn=l[1]),8&d&&(u.turnIndex=l[3]),256&d&&(u.requestId=l[8]),4&d&&(u.isLastTurn=l[2]),512&d&&(u.showName=!l[9]),2&d&&(u.showFooter=!Ut(l[1])),2&d&&(u.markdown=l[1].response_text??""),2&d&&(u.timestamp=l[1].timestamp),16&d&&(u.messageListContainer=l[4]),e.$set(u),l[1].status===ct.failed?c?(c.p(l,d),2&d&&$(c,1)):(c=ee(l),c.c(),$(c,1),c.m(t,null)):c&&(Z(),m(c,1,1,()=>{c=null}),j())},i(l){r||($(a),$(e.$$.fragment,l),$(c),r=!0)},o(l){m(a),m(e.$$.fragment,l),m(c),r=!1},d(l){l&&h(t),a&&a.d(),_(e),c&&c.d()}}}function Kn(o,t,n){let e,s,r,i,a,c,l=P,d=()=>(l(),l=$t(f,C=>n(5,a=C)),f),u=P;o.$$.on_destroy.push(()=>l()),o.$$.on_destroy.push(()=>u());let{chatModel:f}=t;d();let{turn:g}=t,{isLastTurn:y=!1}=t,{turnIndex:R=0}=t,{messageListContainer:p}=t,w,E="Copy request ID",M=()=>{};return o.$$set=C=>{"chatModel"in C&&d(n(0,f=C.chatModel)),"turn"in C&&n(1,g=C.turn),"isLastTurn"in C&&n(2,y=C.isLastTurn),"turnIndex"in C&&n(3,R=C.turnIndex),"messageListContainer"in C&&n(4,p=C.messageListContainer)},o.$$.update=()=>{2&o.$$.dirty&&n(8,e=g.request_id),32&o.$$.dirty&&(n(11,s=a==null?void 0:a.currentConversationModel),u(),u=$t(s,C=>n(17,c=C))),34&o.$$.dirty&&n(10,r=a.flags.enableRichTextHistory?g.rich_text_json_repr:void 0),2&o.$$.dirty&&n(9,i=Ke(g))},[f,g,y,R,p,a,E,M,e,i,r,s,()=>{c.resendTurn(g)},function(C){C||(clearTimeout(w),w=void 0,n(6,E="Copy request ID"))},async function(){e&&(await navigator.clipboard.writeText(e),n(6,E="Copied!"),clearTimeout(w),w=setTimeout(M,1500))},function(C){M=C,n(7,M)}]}class zo extends H{constructor(t){super(),O(this,t,Kn,Gn,D,{chatModel:0,turn:1,isLastTurn:2,turnIndex:3,messageListContainer:4})}}function Yn(o){let t,n,e,s,r,i,a;const c=o[15].default,l=ft(c,o,o[14],null);return{c(){t=q("div"),l&&l.c(),x(t,"class",n=Ht(`c-msg-list__item ${o[5]}`)+" svelte-1s0uz2w"),x(t,"style",e=`min-height: calc(${o[4]}px - (var(--msg-list-item-spacing) * 2));`),x(t,"data-request-id",o[6])},m(d,u){v(d,t,u),l&&l.m(t,null),o[16](t),r=!0,i||(a=fe(s=Ue.call(null,t,{follow:!o[2]&&o[1],scrollContainer:o[3],disableScrollUp:!0,smooth:!0,bottom:!0})),i=!0)},p(d,[u]){l&&l.p&&(!r||16384&u)&&gt(l,c,d,d[14],r?vt(c,d[14],u,null):ht(d[14]),null),(!r||32&u&&n!==(n=Ht(`c-msg-list__item ${d[5]}`)+" svelte-1s0uz2w"))&&x(t,"class",n),(!r||16&u&&e!==(e=`min-height: calc(${d[4]}px - (var(--msg-list-item-spacing) * 2));`))&&x(t,"style",e),(!r||64&u)&&x(t,"data-request-id",d[6]),s&&xt(s.update)&&14&u&&s.update.call(null,{follow:!d[2]&&d[1],scrollContainer:d[3],disableScrollUp:!0,smooth:!0,bottom:!0})},i(d){r||($(l,d),r=!0)},o(d){m(l,d),r=!1},d(d){d&&h(t),l&&l.d(d),o[16](null),i=!1,a()}}}function Qn(o,t,n){let e,s,r,i,a=P,c=P,l=()=>(c(),c=$t(g,T=>n(13,i=T)),g);o.$$.on_destroy.push(()=>a()),o.$$.on_destroy.push(()=>c());let{$$slots:d={},$$scope:u}=t,{requestId:f}=t,{chatModel:g}=t;l();let y,{isLastItem:R=!1}=t,{userControlsScroll:p=!1}=t,{releaseScroll:w=()=>{}}=t,{messageListContainer:E}=t,{minHeight:M}=t,{class:C=""}=t,{dataRequestId:V}=t;return qt(()=>{E&&R&&xe(E,{smooth:!0,onScrollFinish:w})}),o.$$set=T=>{"requestId"in T&&n(9,f=T.requestId),"chatModel"in T&&l(n(0,g=T.chatModel)),"isLastItem"in T&&n(1,R=T.isLastItem),"userControlsScroll"in T&&n(2,p=T.userControlsScroll),"releaseScroll"in T&&n(10,w=T.releaseScroll),"messageListContainer"in T&&n(3,E=T.messageListContainer),"minHeight"in T&&n(4,M=T.minHeight),"class"in T&&n(5,C=T.class),"dataRequestId"in T&&n(6,V=T.dataRequestId),"$$scope"in T&&n(14,u=T.$$scope)},o.$$.update=()=>{var T,N;8192&o.$$.dirty&&(n(8,e=(T=i==null?void 0:i.currentConversationModel)==null?void 0:T.focusModel),a(),a=$t(e,W=>n(12,r=W))),4608&o.$$.dirty&&n(11,s=((N=r.focusedItem)==null?void 0:N.request_id)===f),2048&o.$$.dirty&&s&&E&&y&&Ze(E,y,{topBuffer:0,smooth:!0,scrollDuration:100,onScrollFinish:w})},[g,R,p,E,M,C,V,y,e,f,w,s,r,i,u,d,function(T){tt[T?"unshift":"push"](()=>{y=T,n(7,y)})}]}class Po extends H{constructor(t){super(),O(this,t,Qn,Yn,D,{requestId:9,chatModel:0,isLastItem:1,userControlsScroll:2,releaseScroll:10,messageListContainer:3,minHeight:4,class:5,dataRequestId:6})}}function Xn(o){let t,n,e,s;return n=new ge({props:{size:1}}),{c(){t=q("span"),k(n.$$.fragment),e=L(`
  Generating response...`),x(t,"class","c-gen-response svelte-5is5us")},m(r,i){v(r,t,i),I(n,t,null),z(t,e),s=!0},p:P,i(r){s||($(n.$$.fragment,r),s=!0)},o(r){m(n.$$.fragment,r),s=!1},d(r){r&&h(t),_(n)}}}class ts extends H{constructor(t){super(),O(this,t,null,Xn,D,{})}}class st{constructor(t){K(this,"type","plainText");this.text=t}}class wt{constructor(t){K(this,"type","specialBlock");this.text=t}}function Lt(o){return o.map(t=>t.text).join("")}function es(o){let t,n,e,s,r=(!o[0].status||o[0].status===ct.success)&&o[4]===Lt(o[3]);t=new gn({props:{renderers:o[5],markdown:o[1]+o[4]}});let i=r&&se(o);return{c(){k(t.$$.fragment),n=J(),i&&i.c(),e=Y()},m(a,c){I(t,a,c),v(a,n,c),i&&i.m(a,c),v(a,e,c),s=!0},p(a,c){const l={};18&c&&(l.markdown=a[1]+a[4]),t.$set(l),25&c&&(r=(!a[0].status||a[0].status===ct.success)&&a[4]===Lt(a[3])),r?i?(i.p(a,c),25&c&&$(i,1)):(i=se(a),i.c(),$(i,1),i.m(e.parentNode,e)):i&&(Z(),m(i,1,1,()=>{i=null}),j())},i(a){s||($(t.$$.fragment,a),$(i),s=!0)},o(a){m(t.$$.fragment,a),m(i),s=!1},d(a){a&&(h(n),h(e)),_(t,a),i&&i.d(a)}}}function ns(o){let t;function n(r,i){return r[0].display_error_message?is:r[0].response_text&&r[0].response_text.length>0?rs:os}let e=n(o),s=e(o);return{c(){t=q("div"),s.c(),x(t,"class","c-msg-failure svelte-9a9fi8")},m(r,i){v(r,t,i),s.m(t,null)},p(r,i){e===(e=n(r))&&s?s.p(r,i):(s.d(1),s=e(r),s&&(s.c(),s.m(t,null)))},i:P,o:P,d(r){r&&h(t),s.d()}}}function ss(o){let t,n;return t=new ts({}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p:P,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function se(o){let t;const n=o[7].default,e=ft(n,o,o[8],null);return{c(){e&&e.c()},m(s,r){e&&e.m(s,r),t=!0},p(s,r){e&&e.p&&(!t||256&r)&&gt(e,n,s,s[8],t?vt(n,s[8],r,null):ht(s[8]),null)},i(s){t||($(e,s),t=!0)},o(s){m(e,s),t=!1},d(s){e&&e.d(s)}}}function os(o){let t,n,e=o[2]&&oe(o);return{c(){t=L("We encountered an issue sending your message."),e&&e.c(),n=L(".")},m(s,r){v(s,t,r),e&&e.m(s,r),v(s,n,r)},p(s,r){s[2]?e?e.p(s,r):(e=oe(s),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(s){s&&(h(t),h(n)),e&&e.d(s)}}}function rs(o){let t,n,e=o[2]&&re(o);return{c(){t=L("Connection lost."),e&&e.c(),n=Y()},m(s,r){v(s,t,r),e&&e.m(s,r),v(s,n,r)},p(s,r){s[2]?e?e.p(s,r):(e=re(s),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(s){s&&(h(t),h(n)),e&&e.d(s)}}}function is(o){let t,n=o[0].display_error_message+"";return{c(){t=L(n)},m(e,s){v(e,t,s)},p(e,s){1&s&&n!==(n=e[0].display_error_message+"")&&G(t,n)},d(e){e&&h(t)}}}function oe(o){let t,n,e,s;return{c(){t=L(`Please
            `),n=q("button"),n.textContent="try again",x(n,"class","svelte-9a9fi8")},m(r,i){v(r,t,i),v(r,n,i),e||(s=et(n,"click",_t(function(){xt(o[2])&&o[2].apply(this,arguments)})),e=!0)},p(r,i){o=r},d(r){r&&(h(t),h(n)),e=!1,s()}}}function re(o){let t,n,e,s,r;return{c(){t=L(`Please
            `),n=q("button"),n.textContent="try again",e=L("."),x(n,"class","svelte-9a9fi8")},m(i,a){v(i,t,a),v(i,n,a),v(i,e,a),s||(r=et(n,"click",_t(function(){xt(o[2])&&o[2].apply(this,arguments)})),s=!0)},p(i,a){o=i},d(i){i&&(h(t),h(n),h(e)),s=!1,r()}}}function as(o){let t,n,e,s;const r=[ss,ns,es],i=[];function a(c,l){return(!c[0].status||c[0].status===ct.sent)&&c[4].length<=0?0:c[0].status===ct.failed?1:2}return t=a(o),n=i[t]=r[t](o),{c(){n.c(),e=Y()},m(c,l){i[t].m(c,l),v(c,e,l),s=!0},p(c,l){let d=t;t=a(c),t===d?i[t].p(c,l):(Z(),m(i[d],1,1,()=>{i[d]=null}),j(),n=i[t],n?n.p(c,l):(n=i[t]=r[t](c),n.c()),$(n,1),n.m(e.parentNode,e))},i(c){s||($(n),s=!0)},o(c){m(n),s=!1},d(c){c&&h(e),i[t].d(c)}}}function cs(o){let t,n;return t=new Ft({props:{isAugment:!0,$$slots:{content:[as]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,[s]){const r={};287&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function ls(o,t,n){let e,s,{$$slots:r={},$$scope:i}=t,{turn:a}=t,{preamble:c=""}=t,{resendTurn:l}=t,{markdownBlocks:d=[]}=t,u={code:pn,codespan:fn,link:je};return qt(()=>{if(a.seen_state===Ye.seen)return void n(0,a.response_text=Lt(e),a);let f=Date.now();const g=function*(p){for(const w of p)if(w.type==="specialBlock")yield w.text;else for(const E of w.text)yield E}(e);let y=g.next();const R=()=>{let p=Date.now();const w=Math.round((p-f)/8);let E="";for(let M=0;M<w&&!y.done;M++)E+=y.value,y=g.next();n(0,a.response_text+=E,a),f=p,y.done||requestAnimationFrame(R)};R()}),o.$$set=f=>{"turn"in f&&n(0,a=f.turn),"preamble"in f&&n(1,c=f.preamble),"resendTurn"in f&&n(2,l=f.resendTurn),"markdownBlocks"in f&&n(6,d=f.markdownBlocks),"$$scope"in f&&n(8,i=f.$$scope)},o.$$.update=()=>{1&o.$$.dirty&&n(0,a.response_text=a.response_text??"",a),65&o.$$.dirty&&n(3,e=a.response_text?[new st(a.response_text)]:d),1&o.$$.dirty&&n(4,s=a.response_text??"")},[a,c,l,e,s,u,d,r,i]}class us extends H{constructor(t){super(),O(this,t,ls,cs,D,{turn:0,preamble:1,resendTurn:2,markdownBlocks:6})}}function ds(o){let t,n,e,s;return t=new St.Content({props:{content:o[2]}}),e=new Ce({props:{requestEditorFocus:o[4]}}),{c(){k(t.$$.fragment),n=J(),k(e.$$.fragment)},m(r,i){I(t,r,i),v(r,n,i),I(e,r,i),s=!0},p:P,i(r){s||($(t.$$.fragment,r),$(e.$$.fragment,r),s=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),s=!1},d(r){r&&h(n),_(t,r),_(e,r)}}}function $s(o){let t,n,e={slot:"content",$$slots:{default:[ds]},$$scope:{ctx:o}};return t=new St.Root({props:e}),o[7](t),{c(){k(t.$$.fragment)},m(s,r){I(t,s,r),n=!0},p(s,r){const i={};512&r&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(s){n||($(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){o[7](null),_(t,s)}}}function ms(o){let t,n,e,s;return t=new Ft({props:{$$slots:{content:[$s]},$$scope:{ctx:o}}}),e=new us({props:{turn:o[1],markdownBlocks:o[3]}}),{c(){k(t.$$.fragment),n=J(),k(e.$$.fragment)},m(r,i){I(t,r,i),v(r,n,i),I(e,r,i),s=!0},p(r,[i]){const a={};513&i&&(a.$$scope={dirty:i,ctx:r}),t.$set(a)},i(r){s||($(t.$$.fragment,r),$(e.$$.fragment,r),s=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),s=!1},d(r){r&&h(n),_(t,r),_(e,r)}}}function ps(o,t,n){let{flagsModel:e}=t,{turn:s}=t;const r={seen_state:s.seen_state,status:ct.success},i=[[new wt("[**Chat**](https://docs.augmentcode.com/using-augment/chat)"),new st(": Explore your codebase, get up to speed on unfamiliar code, and work through technical problems using natural language.")],[new wt("[**Code Completions**](https://docs.augmentcode.com/using-augment/completions)"),new st(": Receive intelligent code suggestions that take your entire codebase into account as you type.")],[new wt("[**Instructions**](https://docs.augmentcode.com/using-augment/instructions)"),new st(": Use natural language prompts to write or modify code, applied as a diff for your review.")]];e.suggestedEditsAvailable&&i.push([new wt("[**Suggested Edits**](https://docs.augmentcode.com/using-augment/suggested-edits)"),new st(": Take your completions beyond the cursor and across your workspace.")]);let a,c=[new st(`Welcome to Augment!

Augment can help you understand code, debug issues, and ship faster with its deep understanding of your codebase. Here is what Augment can do for you:

`),...i.flatMap((l,d)=>[new st(`${d+1}. `),...l,new st(`

`)]),new st("Ask questions to learn more! Just remember to tag **@Augment** when asking about Augment's capabilities.")];return o.$$set=l=>{"flagsModel"in l&&n(5,e=l.flagsModel),"turn"in l&&n(6,s=l.turn)},[a,r,{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"What can "},{type:"mention",attrs:{id:"Augment",label:"Augment",data:{id:"Augment",label:"Augment"}}},{type:"text",text:" do?"}]}]},c,function(){a==null||a.requestFocus()},e,s,function(l){tt[l?"unshift":"push"](()=>{a=l,n(0,a)})}]}class No extends H{constructor(t){super(),O(this,t,ps,ms,D,{flagsModel:5,turn:6})}}function fs(o){let t,n;return{c(){t=it("svg"),n=it("path"),x(n,"d","M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z"),x(n,"fill","currentColor"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(t,"width","15"),x(t,"height","15"),x(t,"viewBox","0 0 15 15"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg")},m(e,s){v(e,t,s),z(t,n)},p:P,i:P,o:P,d(e){e&&h(t)}}}class gs extends H{constructor(t){super(),O(this,t,null,fs,D,{})}}function hs(o){let t,n,e,s,r;return n=new gs({}),{c(){t=q("span"),k(n.$$.fragment),e=L(`
  Waiting for user input`),s=L(o[0]),x(t,"class","c-gen-response svelte-5is5us")},m(i,a){v(i,t,a),I(n,t,null),z(t,e),z(t,s),r=!0},p(i,[a]){(!r||1&a)&&G(s,i[0])},i(i){r||($(n.$$.fragment,i),r=!0)},o(i){m(n.$$.fragment,i),r=!1},d(i){i&&h(t),_(n)}}}function vs(o,t,n){let e=".";return qt(()=>{const s=setInterval(()=>{n(0,e=e.length>=3?".":e+".")},500);return()=>clearInterval(s)}),[e]}class Ao extends H{constructor(t){super(),O(this,t,vs,hs,D,{})}}function xs(o){let t,n,e,s,r;return n=new ge({props:{size:1}}),{c(){t=q("span"),k(n.$$.fragment),e=J(),s=L(o[0]),x(t,"class","c-retry-response svelte-1lxm8qk")},m(i,a){v(i,t,a),I(n,t,null),z(t,e),z(t,s),r=!0},p(i,[a]){(!r||1&a)&&G(s,i[0])},i(i){r||($(n.$$.fragment,i),r=!0)},o(i){m(n.$$.fragment,i),r=!1},d(i){i&&h(t),_(n)}}}function ys(o,t,n){let{message:e="Retrying..."}=t;return o.$$set=s=>{"message"in s&&n(0,e=s.message)},[e]}class Bo extends H{constructor(t){super(),O(this,t,ys,xs,D,{message:0})}}function ws(o){let t,n,e;return t=new cn({}),{c(){k(t.$$.fragment),n=L(`
    Stopped`)},m(s,r){I(t,s,r),v(s,n,r),e=!0},i(s){e||($(t.$$.fragment,s),e=!0)},o(s){m(t.$$.fragment,s),e=!1},d(s){s&&h(n),_(t,s)}}}function Cs(o){let t,n,e;return n=new he({props:{size:1,$$slots:{default:[ws]},$$scope:{ctx:o}}}),{c(){t=q("span"),k(n.$$.fragment),x(t,"class","c-stopped svelte-lv19x6")},m(s,r){v(s,t,r),I(n,t,null),e=!0},p(s,[r]){const i={};1&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){e||($(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&h(t),_(n)}}}class Ho extends H{constructor(t){super(),O(this,t,null,Cs,D,{})}}function bs(o){let t,n;return{c(){t=it("svg"),n=it("path"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(n,"d","M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z"),x(n,"fill","currentColor"),x(t,"width","15"),x(t,"height","15"),x(t,"viewBox","0 0 15 15"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg")},m(e,s){v(e,t,s),z(t,n)},p:P,i:P,o:P,d(e){e&&h(t)}}}class Ie extends H{constructor(t){super(),O(this,t,null,bs,D,{})}}function ks(o){let t,n,e;return{c(){t=it("svg"),n=it("path"),e=it("path"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(n,"d","M3.1784 5.56111C3.17842 5.85569 3.41722 6.09449 3.71173 6.09444L9.92275 6.09447C10.0585 6.09447 10.1929 6.06857 10.3189 6.01818L13.9947 4.54786C14.1973 4.46681 14.33 4.27071 14.3301 4.05261C14.33 3.83458 14.1973 3.63846 13.9948 3.55744L10.3189 2.08711C10.1929 2.0367 10.0584 2.01083 9.92278 2.01079L3.71173 2.01079C3.41722 2.01084 3.17844 2.24962 3.1784 2.54412L3.1784 5.56111ZM9.92275 5.0278L4.2451 5.02781L4.24509 3.07749L9.92278 3.07745L11.5339 3.72196L12.2527 4.05263C12.2527 4.05263 11.8167 4.25864 11.534 4.38331C10.9139 4.65675 9.92275 5.0278 9.92275 5.0278Z"),x(n,"fill","currentColor"),x(e,"fill-rule","evenodd"),x(e,"clip-rule","evenodd"),x(e,"d","M8.53346 1.59998C8.53346 1.30543 8.29468 1.06665 8.00013 1.06665C7.70558 1.06665 7.4668 1.30543 7.4668 1.59998V3.07746L8.53346 3.07745V1.59998ZM8.53346 5.0278L7.4668 5.0278V14.4C7.4668 14.6945 7.70558 14.9333 8.00013 14.9333C8.29468 14.9333 8.53346 14.6945 8.53346 14.4V5.0278Z"),x(e,"fill","currentColor"),x(t,"width","15"),x(t,"height","15"),x(t,"viewBox","0 0 15 15"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){v(s,t,r),z(t,n),z(t,e)},p:P,i:P,o:P,d(s){s&&h(t)}}}class _e extends H{constructor(t){super(),O(this,t,null,ks,D,{})}}function ie(o){let t,n,e,s,r;return n=new xn({props:{size:1,insetContent:!0,variant:"ghost",class:"c-checkpoint-tag","data-testid":"checkpoint-version-tag",$$slots:{default:[Rs]},$$scope:{ctx:o}}}),n.$on("click",o[17]),s=new Et({props:{variant:o[6]?"soft":"ghost-block",color:"neutral",size:1,disabled:o[6]||o[4],class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[Ms]},$$scope:{ctx:o}}}),s.$on("click",o[12]),{c(){t=q("div"),k(n.$$.fragment),e=J(),k(s.$$.fragment),x(t,"class","c-checkpoint-container svelte-q20gs5"),x(t,"data-checkpoint-number",o[0]),U(t,"c-checkpoint-container--target-checkpoint",o[6]),U(t,"c-checkpoint-container--dimmed-marker",o[5])},m(i,a){v(i,t,a),I(n,t,null),z(t,e),I(s,t,null),r=!0},p(i,a){const c={};1048778&a&&(c.$$scope={dirty:a,ctx:i}),n.$set(c);const l={};64&a&&(l.variant=i[6]?"soft":"ghost-block"),80&a&&(l.disabled=i[6]||i[4]),1048656&a&&(l.$$scope={dirty:a,ctx:i}),s.$set(l),(!r||1&a)&&x(t,"data-checkpoint-number",i[0]),(!r||64&a)&&U(t,"c-checkpoint-container--target-checkpoint",i[6]),(!r||32&a)&&U(t,"c-checkpoint-container--dimmed-marker",i[5])},i(i){r||($(n.$$.fragment,i),$(s.$$.fragment,i),r=!0)},o(i){m(n.$$.fragment,i),m(s.$$.fragment,i),r=!1},d(i){i&&h(t),_(n),_(s)}}}function Is(o){let t,n;return t=new _e({props:{slot:"leftIcon"}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p:P,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function _s(o){let t,n;return{c(){t=L("Checkpoint "),n=L(o[3])},m(e,s){v(e,t,s),v(e,n,s)},p(e,s){8&s&&G(n,e[3])},d(e){e&&(h(t),h(n))}}}function Ss(o){let t,n=bt(o[7])+"";return{c(){t=L(n)},m(e,s){v(e,t,s)},p(e,s){128&s&&n!==(n=bt(e[7])+"")&&G(t,n)},d(e){e&&h(t)}}}function Es(o){let t;return{c(){t=L(o[1])},m(n,e){v(n,t,e)},p(n,e){2&e&&G(t,n[1])},d(n){n&&h(t)}}}function Ts(o){let t;function n(r,i){return r[1]?Es:r[6]?Ss:void 0}let e=n(o),s=e&&e(o);return{c(){s&&s.c(),t=Y()},m(r,i){s&&s.m(r,i),v(r,t,i)},p(r,i){e===(e=n(r))&&s?s.p(r,i):(s&&s.d(1),s=e&&e(r),s&&(s.c(),s.m(t.parentNode,t)))},d(r){r&&h(t),s&&s.d(r)}}}function Rs(o){let t,n;return t=new we({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[Ts],text:[_s],leftIcon:[Is]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){const r={};1048778&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Ls(o){let t,n;return t=new Ie({}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Ms(o){let t,n;return t=new Pt({props:{triggerOn:[zt.Hover],content:o[6]||o[4]?"Cannot revert to current version":"Revert to this version",$$slots:{default:[Ls]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){const r={};80&s&&(r.content=e[6]||e[4]?"Cannot revert to current version":"Revert to this version"),1048576&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function qs(o){let t,n,e=(!o[4]||o[2])&&ie(o);return{c(){e&&e.c(),t=Y()},m(s,r){e&&e.m(s,r),v(s,t,r),n=!0},p(s,[r]){!s[4]||s[2]?e?(e.p(s,r),20&r&&$(e,1)):(e=ie(s),e.c(),$(e,1),e.m(t.parentNode,t)):e&&(Z(),m(e,1,1,()=>{e=null}),j())},i(s){n||($(e),n=!0)},o(s){m(e),n=!1},d(s){s&&h(t),e&&e.d(s)}}}function Fs(o,t,n){let e,s,r,i,a,c,l,d,u,f,g,{turn:y}=t;const R=at("checkpointStore"),{targetCheckpointIdx:p,totalCheckpointCount:w,uuidToIdx:E}=R;function M(C){qe(p,f=C,f)}return rt(o,p,C=>n(15,f=C)),rt(o,w,C=>n(14,u=C)),rt(o,E,C=>n(16,g=C)),o.$$set=C=>{"turn"in C&&n(13,y=C.turn)},o.$$.update=()=>{var C,V,T;73728&o.$$.dirty&&n(0,e=g.get(y.uuid)??-1),8192&o.$$.dirty&&n(7,s=y.toTimestamp),49153&o.$$.dirty&&n(6,(V=u,r=(C=e)===(T=f)||T===void 0&&C===V-1)),49153&o.$$.dirty&&n(5,i=function(N,W,F){return N===F&&F!==void 0&&F<W-1}(e,u,f)),16385&o.$$.dirty&&n(4,a=e===u-1),1&o.$$.dirty&&n(3,c=e+1),8192&o.$$.dirty&&n(2,l=Ct(y)),8192&o.$$.dirty&&n(1,d=Ct(y)?function(N){var W,F;if((W=N.revertTarget)!=null&&W.uuid){const S=g.get(N.revertTarget.uuid);return S===void 0?void 0:`Reverted to Checkpoint ${S+1}`}return(F=N.revertTarget)!=null&&F.filePath?`Undid changes to ${N.revertTarget.filePath.relPath}`:void 0}(y):void 0)},[e,d,l,c,a,i,r,s,p,w,E,M,async function(){await R.revertToCheckpoint(y.uuid)},y,u,f,g,()=>M(e)]}class Oo extends H{constructor(t){super(),O(this,t,Fs,qs,D,{turn:13})}}function zs(o){let t,n;return t=new _e({props:{slot:"leftIcon"}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p:P,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function ae(o){let t,n,e,s,r,i,a=o[1]===1?"":"s";return{c(){t=q("span"),n=L("("),e=L(o[1]),s=L(" file"),r=L(a),i=L(")"),x(t,"class","c-checkpoint-files-count")},m(c,l){v(c,t,l),z(t,n),z(t,e),z(t,s),z(t,r),z(t,i)},p(c,l){2&l&&G(e,c[1]),2&l&&a!==(a=c[1]===1?"":"s")&&G(r,a)},d(c){c&&h(t)}}}function Ps(o){let t,n,e,s,r=o[1]>0&&ae(o);return{c(){t=L("Checkpoint "),n=L(o[0]),e=J(),r&&r.c(),s=Y()},m(i,a){v(i,t,a),v(i,n,a),v(i,e,a),r&&r.m(i,a),v(i,s,a)},p(i,a){1&a&&G(n,i[0]),i[1]>0?r?r.p(i,a):(r=ae(i),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(i){i&&(h(t),h(n),h(e),h(s)),r&&r.d(i)}}}function Ns(o){let t;return{c(){t=L(o[2])},m(n,e){v(n,t,e)},p(n,e){4&e&&G(t,n[2])},d(n){n&&h(t)}}}function As(o){let t;return{c(){t=L(o[3])},m(n,e){v(n,t,e)},p(n,e){8&e&&G(t,n[3])},d(n){n&&h(t)}}}function Bs(o){let t;function n(r,i){return r[3]?As:r[2]?Ns:void 0}let e=n(o),s=e&&e(o);return{c(){s&&s.c(),t=Y()},m(r,i){s&&s.m(r,i),v(r,t,i)},p(r,i){e===(e=n(r))&&s?s.p(r,i):(s&&s.d(1),s=e&&e(r),s&&(s.c(),s.m(t.parentNode,t)))},d(r){r&&h(t),s&&s.d(r)}}}function ce(o){let t,n,e;return n=new ln({props:{totalAddedLines:o[4].totalAddedLines,totalRemovedLines:o[4].totalRemovedLines}}),{c(){t=q("div"),k(n.$$.fragment),x(t,"class","c-checkpoint-summary")},m(s,r){v(s,t,r),I(n,t,null),e=!0},p(s,r){const i={};16&r&&(i.totalAddedLines=s[4].totalAddedLines),16&r&&(i.totalRemovedLines=s[4].totalRemovedLines),n.$set(i)},i(s){e||($(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&h(t),_(n)}}}function le(o){let t,n;return t=new Et({props:{variant:"ghost-block",color:"neutral",size:1,class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[Os]},$$scope:{ctx:o}}}),t.$on("click",function(){xt(o[7])&&o[7].apply(this,arguments)}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){o=e;const r={};256&s&&(r.$$scope={dirty:s,ctx:o}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Hs(o){let t,n;return t=new Ie({}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Os(o){let t,n;return t=new Pt({props:{triggerOn:[zt.Hover],content:"Revert to this Checkpoint",$$slots:{default:[Hs]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){const r={};256&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Ds(o){let t,n,e,s,r,i,a,c;e=new hn({}),r=new we({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[Bs],text:[Ps],leftIcon:[zs]},$$scope:{ctx:o}}});let l=o[5]&&ce(o),d=!o[6]&&le(o);return{c(){t=q("div"),n=q("div"),k(e.$$.fragment),s=J(),k(r.$$.fragment),i=J(),l&&l.c(),a=J(),d&&d.c(),x(n,"class","c-checkpoint-tag"),x(t,"class","c-checkpoint-header svelte-htx8xt")},m(u,f){v(u,t,f),z(t,n),I(e,n,null),z(n,s),I(r,n,null),z(t,i),l&&l.m(t,null),z(t,a),d&&d.m(t,null),c=!0},p(u,[f]){const g={};271&f&&(g.$$scope={dirty:f,ctx:u}),r.$set(g),u[5]?l?(l.p(u,f),32&f&&$(l,1)):(l=ce(u),l.c(),$(l,1),l.m(t,a)):l&&(Z(),m(l,1,1,()=>{l=null}),j()),u[6]?d&&(Z(),m(d,1,1,()=>{d=null}),j()):d?(d.p(u,f),64&f&&$(d,1)):(d=le(u),d.c(),$(d,1),d.m(t,null))},i(u){c||($(e.$$.fragment,u),$(r.$$.fragment,u),$(l),$(d),c=!0)},o(u){m(e.$$.fragment,u),m(r.$$.fragment,u),m(l),m(d),c=!1},d(u){u&&h(t),_(e),_(r),l&&l.d(),d&&d.d()}}}function Js(o,t,n){let{displayCheckpointIdx:e}=t,{filesCount:s=0}=t,{timestamp:r=""}=t,{revertMessage:i}=t,{diffSummary:a={totalAddedLines:0,totalRemovedLines:0}}=t,{hasChanges:c=!1}=t,{isTarget:l=!1}=t,{onRevertClick:d}=t;return o.$$set=u=>{"displayCheckpointIdx"in u&&n(0,e=u.displayCheckpointIdx),"filesCount"in u&&n(1,s=u.filesCount),"timestamp"in u&&n(2,r=u.timestamp),"revertMessage"in u&&n(3,i=u.revertMessage),"diffSummary"in u&&n(4,a=u.diffSummary),"hasChanges"in u&&n(5,c=u.hasChanges),"isTarget"in u&&n(6,l=u.isTarget),"onRevertClick"in u&&n(7,d=u.onRevertClick)},[e,s,r,i,a,c,l,d]}class Vs extends H{constructor(t){super(),O(this,t,Js,Ds,D,{displayCheckpointIdx:0,filesCount:1,timestamp:2,revertMessage:3,diffSummary:4,hasChanges:5,isTarget:6,onRevertClick:7})}}function ue(o,t,n){const e=o.slice();return e[33]=t[n],e}function de(o){let t,n,e,s,r,i,a;function c(d){o[27](d)}let l={class:"c-checkpoint-collapsible",stickyHeader:!0,$$slots:{header:[Gs],default:[Ws]},$$scope:{ctx:o}};return o[3]!==void 0&&(l.collapsed=o[3]),n=new vn({props:l}),tt.push(()=>kt(n,"collapsed",c)),{c(){t=q("div"),k(n.$$.fragment),x(t,"class","c-checkpoint-container svelte-mxd32u"),x(t,"data-checkpoint-number",o[2]),U(t,"c-checkpoint-container--target-checkpoint",o[11]),U(t,"c-checkpoint-container--dimmed-marker",o[10])},m(d,u){v(d,t,u),I(n,t,null),r=!0,i||(a=fe(s=We.call(null,t,{onVisible:o[28],scrollTarget:document.body})),i=!0)},p(d,u){const f={};6522&u[0]|32&u[1]&&(f.$$scope={dirty:u,ctx:d}),!e&&8&u[0]&&(e=!0,f.collapsed=d[3],It(()=>e=!1)),n.$set(f),(!r||4&u[0])&&x(t,"data-checkpoint-number",d[2]),s&&xt(s.update)&&1&u[0]&&s.update.call(null,{onVisible:d[28],scrollTarget:document.body}),(!r||2048&u[0])&&U(t,"c-checkpoint-container--target-checkpoint",d[11]),(!r||1024&u[0])&&U(t,"c-checkpoint-container--dimmed-marker",d[10])},i(d){r||($(n.$$.fragment,d),r=!0)},o(d){m(n.$$.fragment,d),r=!1},d(d){d&&h(t),_(n),i=!1,a()}}}function Us(o){let t,n,e;return n=new he({props:{size:1,color:"neutral",$$slots:{default:[js]},$$scope:{ctx:o}}}),{c(){t=q("div"),k(n.$$.fragment),x(t,"class","c-edits-list c-edits-list--empty svelte-mxd32u")},m(s,r){v(s,t,r),I(n,t,null),e=!0},p(s,r){const i={};32&r[1]&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){e||($(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&h(t),_(n)}}}function Zs(o){let t,n,e=Zt(o[1]),s=[];for(let i=0;i<e.length;i+=1)s[i]=$e(ue(o,e,i));const r=i=>m(s[i],1,1,()=>{s[i]=null});return{c(){t=q("div");for(let i=0;i<s.length;i+=1)s[i].c();x(t,"class","c-edits-list svelte-mxd32u")},m(i,a){v(i,t,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);n=!0},p(i,a){if(196610&a[0]){let c;for(e=Zt(i[1]),c=0;c<e.length;c+=1){const l=ue(i,e,c);s[c]?(s[c].p(l,a),$(s[c],1)):(s[c]=$e(l),s[c].c(),$(s[c],1),s[c].m(t,null))}for(Z(),c=e.length;c<s.length;c+=1)r(c);j()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)$(s[a]);n=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)m(s[a]);n=!1},d(i){i&&h(t),Fe(s,i)}}}function js(o){let t;return{c(){t=L("No changes to show")},m(n,e){v(n,t,e)},d(n){n&&h(t)}}}function $e(o){let t,n;function e(){return o[25](o[33])}function s(){return o[26](o[33])}return t=new un({props:{qualifiedPathName:o[33].qualifiedPathName,lineChanges:o[33].changesSummary,onClickFile:e,onClickReview:s}}),{c(){k(t.$$.fragment)},m(r,i){I(t,r,i),n=!0},p(r,i){o=r;const a={};2&i[0]&&(a.qualifiedPathName=o[33].qualifiedPathName),2&i[0]&&(a.lineChanges=o[33].changesSummary),2&i[0]&&(a.onClickFile=e),2&i[0]&&(a.onClickReview=s),t.$set(a)},i(r){n||($(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){_(t,r)}}}function Ws(o){let t,n,e,s;const r=[Zs,Us],i=[];function a(c,l){return c[4]?0:c[3]?-1:1}return~(t=a(o))&&(n=i[t]=r[t](o)),{c(){n&&n.c(),e=Y()},m(c,l){~t&&i[t].m(c,l),v(c,e,l),s=!0},p(c,l){let d=t;t=a(c),t===d?~t&&i[t].p(c,l):(n&&(Z(),m(i[d],1,1,()=>{i[d]=null}),j()),~t?(n=i[t],n?n.p(c,l):(n=i[t]=r[t](c),n.c()),$(n,1),n.m(e.parentNode,e)):n=null)},i(c){s||($(n),s=!0)},o(c){m(n),s=!1},d(c){c&&h(e),~t&&i[t].d(c)}}}function Gs(o){let t,n;return t=new Vs({props:{slot:"header",displayCheckpointIdx:o[8],filesCount:o[1].length,timestamp:bt(o[12]),revertMessage:o[6],diffSummary:o[5],hasChanges:o[4],isTarget:o[11],onRevertClick:o[18]}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,s){const r={};256&s[0]&&(r.displayCheckpointIdx=e[8]),2&s[0]&&(r.filesCount=e[1].length),4096&s[0]&&(r.timestamp=bt(e[12])),64&s[0]&&(r.revertMessage=e[6]),32&s[0]&&(r.diffSummary=e[5]),16&s[0]&&(r.hasChanges=e[4]),2048&s[0]&&(r.isTarget=e[11]),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function Ks(o){let t,n,e=(!o[9]||o[7])&&de(o);return{c(){e&&e.c(),t=Y()},m(s,r){e&&e.m(s,r),v(s,t,r),n=!0},p(s,r){!s[9]||s[7]?e?(e.p(s,r),640&r[0]&&$(e,1)):(e=de(s),e.c(),$(e,1),e.m(t.parentNode,t)):e&&(Z(),m(e,1,1,()=>{e=null}),j())},i(s){n||($(e),n=!0)},o(s){m(e),n=!1},d(s){s&&h(t),e&&e.d(s)}}}function Ys(o,t,n){let e,s,r,i,a,c,l,d,u,f,g,y,R,p,w,{turn:E}=t;const M=at("checkpointStore"),C=at("chatModel"),{targetCheckpointIdx:V,totalCheckpointCount:T,uuidToIdx:N}=M;rt(o,V,A=>n(23,p=A)),rt(o,T,A=>n(22,R=A)),rt(o,N,A=>n(24,w=A));let W=!0;function F(A){C==null||C.extensionClient.openFile({repoRoot:A.rootPath,pathName:A.relPath,allowOutOfWorkspace:!0})}function S(A){C==null||C.extensionClient.showAgentReview(A,r,s,!1)}let Q=[],ot=!1,dt=!1;return o.$$set=A=>{"turn"in A&&n(19,E=A.turn)},o.$$.update=()=>{var A,yt,lt;17301504&o.$$.dirty[0]&&n(2,e=w.get(E.uuid)??-1),524288&o.$$.dirty[0]&&n(12,s=E.toTimestamp),524288&o.$$.dirty[0]&&(r=E.fromTimestamp),12582916&o.$$.dirty[0]&&n(11,(yt=R,i=(A=e)===(lt=p)||lt===void 0&&A===yt-1)),12582916&o.$$.dirty[0]&&n(10,a=function(b,ut,nt){return b===nt&&nt!==void 0&&nt<ut-1}(e,R,p)),4194308&o.$$.dirty[0]&&n(9,c=e===R-1),4&o.$$.dirty[0]&&n(8,l=e+1),524288&o.$$.dirty[0]&&n(7,d=Ct(E)),524288&o.$$.dirty[0]&&n(6,u=Ct(E)?function(b){var ut,nt;if((ut=b.revertTarget)!=null&&ut.uuid){const mt=w.get(b.revertTarget.uuid);return mt===void 0?void 0:`Reverted to Checkpoint ${mt+1}`}return(nt=b.revertTarget)!=null&&nt.filePath?`Undid changes to ${b.revertTarget.filePath.relPath}`:void 0}(E):void 0),2621441&o.$$.dirty[0]&&ot&&E&&!dt&&M.getCheckpointSummary(E).then(b=>{n(20,Q=b),n(21,dt=!0)}),1048576&o.$$.dirty[0]&&n(1,f=Q.filter(b=>b.changesSummary&&(b.changesSummary.totalAddedLines>0||b.changesSummary.totalRemovedLines>0))),2&o.$$.dirty[0]&&n(5,g=f.reduce((b,ut)=>{var nt,mt;return b.totalAddedLines+=((nt=ut.changesSummary)==null?void 0:nt.totalAddedLines)??0,b.totalRemovedLines+=((mt=ut.changesSummary)==null?void 0:mt.totalRemovedLines)??0,b},{totalAddedLines:0,totalRemovedLines:0})),2&o.$$.dirty[0]&&n(4,y=f.length>0)},[ot,f,e,W,y,g,u,d,l,c,a,i,s,V,T,N,F,S,function(){M.revertToCheckpoint(E.uuid)},E,Q,dt,R,p,w,A=>F(A.qualifiedPathName),A=>S(A.qualifiedPathName),function(A){W=A,n(3,W)},()=>n(0,ot=!0)]}class Do extends H{constructor(t){super(),O(this,t,Ys,Ks,D,{turn:19},null,[-1,-1])}}function Qs(o){let t;const n=o[3].default,e=ft(n,o,o[4],null);return{c(){e&&e.c()},m(s,r){e&&e.m(s,r),t=!0},p(s,r){e&&e.p&&(!t||16&r)&&gt(e,n,s,s[4],t?vt(n,s[4],r,null):ht(s[4]),null)},i(s){t||($(e,s),t=!0)},o(s){m(e,s),t=!1},d(s){e&&e.d(s)}}}function Xs(o){let t,n;return t=new Ge({props:{class:"c-chat-floating-container c-chat-floating-container--"+o[0],xPos:o[1],yPos:o[2],$$slots:{default:[Qs]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,[s]){const r={};1&s&&(r.class="c-chat-floating-container c-chat-floating-container--"+e[0]),2&s&&(r.xPos=e[1]),4&s&&(r.yPos=e[2]),16&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function to(o,t,n){let{$$slots:e={},$$scope:s}=t,{position:r="bottom"}=t,{xPos:i="middle"}=t,{yPos:a=r==="top"?"top":"bottom"}=t;return o.$$set=c=>{"position"in c&&n(0,r=c.position),"xPos"in c&&n(1,i=c.xPos),"yPos"in c&&n(2,a=c.yPos),"$$scope"in c&&n(4,s=c.$$scope)},[r,i,a,e,s]}class eo extends H{constructor(t){super(),O(this,t,to,Xs,D,{position:0,xPos:1,yPos:2})}}function no(o){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},o[0]],s={};for(let r=0;r<e.length;r+=1)s=pt(s,e[r]);return{c(){t=it("svg"),n=new ze(!0),this.h()},l(r){t=Pe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Ne(t);n=Ae(i,!0),i.forEach(h),this.h()},h(){n.a=null,Ot(t,s)},m(r,i){Be(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M174.6 472.6c4.5 4.7 10.8 7.4 17.4 7.4s12.8-2.7 17.4-7.4l168-176c9.2-9.6 8.8-24.8-.8-33.9s-24.8-8.8-33.9.8L216 396.1V56c0-13.3-10.7-24-24-24s-24 10.7-24 24v340.1L41.4 263.4c-9.2-9.6-24.3-9.9-33.9-.8s-9.9 24.3-.8 33.9l168 176z"/>',t)},p(r,[i]){Ot(t,s=Tt(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:P,o:P,d(r){r&&h(t)}}}function so(o,t,n){return o.$$set=e=>{n(0,t=pt(pt({},t),Dt(e)))},[t=Dt(t)]}class oo extends H{constructor(t){super(),O(this,t,so,no,D,{})}}function me(o){let t,n,e;return n=new Et({props:{class:"c-chat-floating-button",variant:"solid",color:"neutral",size:1,radius:"full",$$slots:{default:[ro]},$$scope:{ctx:o}}}),n.$on("click",o[1]),{c(){t=q("div"),k(n.$$.fragment),x(t,"class","c-msg-list-bottom-button svelte-rg7wt6")},m(s,r){v(s,t,r),I(n,t,null),e=!0},p(s,r){const i={};8&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){e||($(n.$$.fragment,s),e=!0)},o(s){m(n.$$.fragment,s),e=!1},d(s){s&&h(t),_(n)}}}function ro(o){let t,n;return t=new oo({}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function io(o){let t,n,e=o[0]&&me(o);return{c(){e&&e.c(),t=Y()},m(s,r){e&&e.m(s,r),v(s,t,r),n=!0},p(s,r){s[0]?e?(e.p(s,r),1&r&&$(e,1)):(e=me(s),e.c(),$(e,1),e.m(t.parentNode,t)):e&&(Z(),m(e,1,1,()=>{e=null}),j())},i(s){n||($(e),n=!0)},o(s){m(e),n=!1},d(s){s&&h(t),e&&e.d(s)}}}function ao(o){let t,n;return t=new eo({props:{position:"bottom",$$slots:{default:[io]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},m(e,s){I(t,e,s),n=!0},p(e,[s]){const r={};9&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){_(t,e)}}}function co(o,t,n){let{showScrollDown:e=!1}=t,{messageListElement:s=null}=t;return o.$$set=r=>{"showScrollDown"in r&&n(0,e=r.showScrollDown),"messageListElement"in r&&n(2,s=r.messageListElement)},[e,()=>{s&&xe(s,{smooth:!0})},s]}class Jo extends H{constructor(t){super(),O(this,t,co,ao,D,{showScrollDown:0,messageListElement:2})}}export{Ao as A,zo as C,No as E,Mo as G,Jo as M,Bo as R,Ho as S,Jn as U,qo as a,To as b,Ro as c,Wt as d,Po as e,Fo as f,Eo as g,us as h,ts as i,Oo as j,Do as k,Lo as t};
