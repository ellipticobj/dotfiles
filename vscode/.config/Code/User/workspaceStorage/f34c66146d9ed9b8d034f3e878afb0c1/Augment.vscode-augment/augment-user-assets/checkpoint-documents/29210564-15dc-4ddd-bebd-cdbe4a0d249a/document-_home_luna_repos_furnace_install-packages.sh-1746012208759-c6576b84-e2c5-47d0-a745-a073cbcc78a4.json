{"path":{"rootPath":"/home/luna/repos/furnace","relPath":"install-packages.sh"},"modifiedCode":"#!/bin/bash\n\n# Check if a package list file is provided\nif [ $# -lt 1 ]; then\n  echo \"Usage: $0 <package-list-file>\"\n  echo \"Example: $0 fedora-packages-rpm.txt\"\n  exit 1\nfi\n\nPACKAGE_FILE=\"$1\"\n\nif [ ! -f \"$PACKAGE_FILE\" ]; then\n  echo \"Error: Package list file not found: $PACKAGE_FILE\"\n  exit 1\nfi\n\necho \"Installing packages from $PACKAGE_FILE...\"\n\n# Read packages from file, skipping comments and empty lines\nPACKAGES=()\nwhile IFS= read -r line || [ -n \"$line\" ]; do\n  # Skip comments and empty lines\n  if [[ ! \"$line\" =~ ^#.*$ ]] && [[ -n \"$line\" ]]; then\n    # Check if the package is already installed\n    if ! rpm -q \"$line\" &> /dev/null; then\n      PACKAGES+=(\"$line\")\n    fi\n  fi\ndone < \"$PACKAGE_FILE\"\n\n# Install packages in batches of 50 to avoid command line length issues\nif [ ${#PACKAGES[@]} -ne 0 ]; then\n  echo \"Found ${#PACKAGES[@]} packages to install\"\n  \n  # Install in batches of 50\n  BATCH_SIZE=50\n  TOTAL_PACKAGES=${#PACKAGES[@]}\n  BATCHES=$(( (TOTAL_PACKAGES + BATCH_SIZE - 1) / BATCH_SIZE ))\n  \n  for ((i=0; i<BATCHES; i++)); do\n    START=$((i * BATCH_SIZE))\n    END=$(( (i+1) * BATCH_SIZE > TOTAL_PACKAGES ? TOTAL_PACKAGES : (i+1) * BATCH_SIZE ))\n    BATCH=(\"${PACKAGES[@]:START:END-START}\")\n    \n    echo \"Installing batch $((i+1))/$BATCHES ($(( END - START )) packages)...\"\n    sudo dnf install -y \"${BATCH[@]}\"\n  done\n  \n  echo \"All packages have been installed!\"\nelse\n  echo \"No new packages found to install in $PACKAGE_FILE\"\nfi\n"}